/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("PanoptoCore"),require("_"),require("moment"),require("PanoptoViewer"),require("PanoptoReactComponents")):"function"==typeof define&&define.amd?define(["React","PanoptoCore","_","moment","PanoptoViewer","PanoptoReactComponents"],t):"object"==typeof exports?exports.PanoptoWebRecorder=t(require("React"),require("PanoptoCore"),require("_"),require("moment"),require("PanoptoViewer"),require("PanoptoReactComponents")):e.PanoptoWebRecorder=t(e.React,e.PanoptoCore,e._,e.moment,e.PanoptoViewer,e.PanoptoReactComponents)}(window,(function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__7__,__WEBPACK_EXTERNAL_MODULE__26__,__WEBPACK_EXTERNAL_MODULE__56__,__WEBPACK_EXTERNAL_MODULE__108__,__WEBPACK_EXTERNAL_MODULE__153__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Panopto/Scripts/Panopto/Bundles/",n(n.s=389)}([function(e,t,n){"use strict";n.r(t),n.d(t,"OptimizerConstructors",(function(){return Nt})),n.d(t,"AdadeltaOptimizer",(function(){return yt})),n.d(t,"AdagradOptimizer",(function(){return vt})),n.d(t,"AdamOptimizer",(function(){return wt})),n.d(t,"AdamaxOptimizer",(function(){return Ot})),n.d(t,"MomentumOptimizer",(function(){return It})),n.d(t,"Optimizer",(function(){return bt})),n.d(t,"RMSPropOptimizer",(function(){return Tt})),n.d(t,"SGDOptimizer",(function(){return Et})),n.d(t,"Tensor",(function(){return te.a})),n.d(t,"TensorBuffer",(function(){return te.b})),n.d(t,"Variable",(function(){return te.c})),n.d(t,"Rank",(function(){return Rt.a})),n.d(t,"sumOutType",(function(){return Rt.b})),n.d(t,"upcastType",(function(){return Rt.c})),n.d(t,"abs",(function(){return jt.b})),n.d(t,"acos",(function(){return jt.c})),n.d(t,"acosh",(function(){return jt.d})),n.d(t,"add",(function(){return jt.e})),n.d(t,"addN",(function(){return jt.f})),n.d(t,"all",(function(){return jt.g})),n.d(t,"any",(function(){return jt.h})),n.d(t,"argMax",(function(){return jt.i})),n.d(t,"argMin",(function(){return jt.j})),n.d(t,"asin",(function(){return jt.k})),n.d(t,"asinh",(function(){return jt.l})),n.d(t,"atan",(function(){return jt.m})),n.d(t,"atan2",(function(){return jt.n})),n.d(t,"atanh",(function(){return jt.o})),n.d(t,"avgPool",(function(){return jt.p})),n.d(t,"avgPool3d",(function(){return jt.q})),n.d(t,"basicLSTMCell",(function(){return jt.r})),n.d(t,"batchToSpaceND",(function(){return jt.w})),n.d(t,"batchNorm",(function(){return jt.s})),n.d(t,"batchNorm2d",(function(){return jt.t})),n.d(t,"batchNorm3d",(function(){return jt.u})),n.d(t,"batchNorm4d",(function(){return jt.v})),n.d(t,"bincount",(function(){return jt.x})),n.d(t,"broadcastArgs",(function(){return jt.z})),n.d(t,"broadcastTo",(function(){return jt.A})),n.d(t,"buffer",(function(){return jt.B})),n.d(t,"cast",(function(){return jt.C})),n.d(t,"ceil",(function(){return jt.D})),n.d(t,"clipByValue",(function(){return jt.E})),n.d(t,"clone",(function(){return jt.F})),n.d(t,"complex",(function(){return jt.G})),n.d(t,"concat",(function(){return jt.H})),n.d(t,"concat1d",(function(){return jt.I})),n.d(t,"concat2d",(function(){return jt.J})),n.d(t,"concat3d",(function(){return jt.K})),n.d(t,"concat4d",(function(){return jt.L})),n.d(t,"conv1d",(function(){return jt.M})),n.d(t,"conv2d",(function(){return jt.N})),n.d(t,"conv2dTranspose",(function(){return jt.O})),n.d(t,"conv3d",(function(){return jt.P})),n.d(t,"conv3dTranspose",(function(){return jt.Q})),n.d(t,"cos",(function(){return jt.R})),n.d(t,"cosh",(function(){return jt.S})),n.d(t,"cumsum",(function(){return jt.U})),n.d(t,"denseBincount",(function(){return jt.V})),n.d(t,"depthToSpace",(function(){return jt.W})),n.d(t,"depthwiseConv2d",(function(){return jt.X})),n.d(t,"diag",(function(){return jt.Y})),n.d(t,"dilation2d",(function(){return jt.Z})),n.d(t,"div",(function(){return jt.ab})),n.d(t,"divNoNan",(function(){return jt.bb})),n.d(t,"dot",(function(){return jt.cb})),n.d(t,"einsum",(function(){return jt.eb})),n.d(t,"elu",(function(){return jt.fb})),n.d(t,"equal",(function(){return jt.hb})),n.d(t,"erf",(function(){return jt.ib})),n.d(t,"exp",(function(){return jt.jb})),n.d(t,"expandDims",(function(){return jt.kb})),n.d(t,"expm1",(function(){return jt.lb})),n.d(t,"eye",(function(){return jt.mb})),n.d(t,"fill",(function(){return jt.ob})),n.d(t,"floor",(function(){return jt.pb})),n.d(t,"floorDiv",(function(){return jt.qb})),n.d(t,"gather",(function(){return jt.sb})),n.d(t,"greater",(function(){return jt.ub})),n.d(t,"greaterEqual",(function(){return jt.vb})),n.d(t,"imag",(function(){return jt.xb})),n.d(t,"isFinite",(function(){return jt.Bb})),n.d(t,"isInf",(function(){return jt.Cb})),n.d(t,"isNaN",(function(){return jt.Db})),n.d(t,"leakyRelu",(function(){return jt.Eb})),n.d(t,"less",(function(){return jt.Fb})),n.d(t,"lessEqual",(function(){return jt.Gb})),n.d(t,"linspace",(function(){return jt.Ib})),n.d(t,"localResponseNormalization",(function(){return jt.Jb})),n.d(t,"log",(function(){return jt.Kb})),n.d(t,"log1p",(function(){return jt.Lb})),n.d(t,"logSigmoid",(function(){return jt.Mb})),n.d(t,"logSoftmax",(function(){return jt.Nb})),n.d(t,"logSumExp",(function(){return jt.Ob})),n.d(t,"logicalAnd",(function(){return jt.Pb})),n.d(t,"logicalNot",(function(){return jt.Qb})),n.d(t,"logicalOr",(function(){return jt.Rb})),n.d(t,"logicalXor",(function(){return jt.Sb})),n.d(t,"matMul",(function(){return jt.Ub})),n.d(t,"max",(function(){return jt.Vb})),n.d(t,"maxPool",(function(){return jt.Wb})),n.d(t,"maxPool3d",(function(){return jt.Xb})),n.d(t,"maxPoolWithArgmax",(function(){return jt.Yb})),n.d(t,"maximum",(function(){return jt.Zb})),n.d(t,"mean",(function(){return jt.ac})),n.d(t,"meshgrid",(function(){return jt.bc})),n.d(t,"min",(function(){return jt.cc})),n.d(t,"minimum",(function(){return jt.dc})),n.d(t,"mirrorPad",(function(){return jt.ec})),n.d(t,"mod",(function(){return jt.fc})),n.d(t,"moments",(function(){return jt.gc})),n.d(t,"mul",(function(){return jt.ic})),n.d(t,"multiRNNCell",(function(){return jt.jc})),n.d(t,"multinomial",(function(){return jt.kc})),n.d(t,"neg",(function(){return jt.lc})),n.d(t,"notEqual",(function(){return jt.nc})),n.d(t,"oneHot",(function(){return jt.oc})),n.d(t,"ones",(function(){return jt.pc})),n.d(t,"onesLike",(function(){return jt.qc})),n.d(t,"outerProduct",(function(){return jt.sc})),n.d(t,"pad",(function(){return jt.tc})),n.d(t,"pad1d",(function(){return jt.uc})),n.d(t,"pad2d",(function(){return jt.vc})),n.d(t,"pad3d",(function(){return jt.wc})),n.d(t,"pad4d",(function(){return jt.xc})),n.d(t,"pool",(function(){return jt.yc})),n.d(t,"pow",(function(){return jt.zc})),n.d(t,"prelu",(function(){return jt.Ac})),n.d(t,"print",(function(){return jt.Bc})),n.d(t,"prod",(function(){return jt.Cc})),n.d(t,"rand",(function(){return jt.Dc})),n.d(t,"randomGamma",(function(){return jt.Ec})),n.d(t,"randomNormal",(function(){return jt.Fc})),n.d(t,"randomUniform",(function(){return jt.Gc})),n.d(t,"range",(function(){return jt.Hc})),n.d(t,"real",(function(){return jt.Ic})),n.d(t,"reciprocal",(function(){return jt.Jc})),n.d(t,"relu",(function(){return jt.Kc})),n.d(t,"relu6",(function(){return jt.Lc})),n.d(t,"reshape",(function(){return jt.Mc})),n.d(t,"reverse",(function(){return jt.Nc})),n.d(t,"reverse1d",(function(){return jt.Oc})),n.d(t,"reverse2d",(function(){return jt.Pc})),n.d(t,"reverse3d",(function(){return jt.Qc})),n.d(t,"reverse4d",(function(){return jt.Rc})),n.d(t,"round",(function(){return jt.Tc})),n.d(t,"rsqrt",(function(){return jt.Uc})),n.d(t,"scalar",(function(){return jt.Vc})),n.d(t,"selu",(function(){return jt.Xc})),n.d(t,"separableConv2d",(function(){return jt.Yc})),n.d(t,"setdiff1dAsync",(function(){return jt.Zc})),n.d(t,"sigmoid",(function(){return jt.ad})),n.d(t,"sign",(function(){return jt.bd})),n.d(t,"sin",(function(){return jt.dd})),n.d(t,"sinh",(function(){return jt.ed})),n.d(t,"slice",(function(){return jt.fd})),n.d(t,"slice1d",(function(){return jt.gd})),n.d(t,"slice2d",(function(){return jt.hd})),n.d(t,"slice3d",(function(){return jt.id})),n.d(t,"slice4d",(function(){return jt.jd})),n.d(t,"softmax",(function(){return jt.kd})),n.d(t,"softplus",(function(){return jt.ld})),n.d(t,"spaceToBatchND",(function(){return jt.md})),n.d(t,"fft",(function(){return jt.nb})),n.d(t,"ifft",(function(){return jt.wb})),n.d(t,"irfft",(function(){return jt.Ab})),n.d(t,"rfft",(function(){return jt.Sc})),n.d(t,"split",(function(){return jt.qd})),n.d(t,"sqrt",(function(){return jt.rd})),n.d(t,"square",(function(){return jt.sd})),n.d(t,"squaredDifference",(function(){return jt.td})),n.d(t,"squeeze",(function(){return jt.ud})),n.d(t,"stack",(function(){return jt.vd})),n.d(t,"step",(function(){return jt.wd})),n.d(t,"stridedSlice",(function(){return jt.xd})),n.d(t,"sub",(function(){return jt.zd})),n.d(t,"sum",(function(){return jt.Ad})),n.d(t,"tan",(function(){return jt.Bd})),n.d(t,"tanh",(function(){return jt.Cd})),n.d(t,"tensor",(function(){return jt.Dd})),n.d(t,"tensor1d",(function(){return jt.Ed})),n.d(t,"tensor2d",(function(){return jt.Fd})),n.d(t,"tensor3d",(function(){return jt.Gd})),n.d(t,"tensor4d",(function(){return jt.Hd})),n.d(t,"tensor5d",(function(){return jt.Id})),n.d(t,"tensor6d",(function(){return jt.Jd})),n.d(t,"tile",(function(){return jt.Kd})),n.d(t,"topk",(function(){return jt.Ld})),n.d(t,"truncatedNormal",(function(){return jt.Nd})),n.d(t,"unique",(function(){return jt.Od})),n.d(t,"unsortedSegmentSum",(function(){return jt.Pd})),n.d(t,"unstack",(function(){return jt.Qd})),n.d(t,"variable",(function(){return jt.Rd})),n.d(t,"where",(function(){return jt.Sd})),n.d(t,"whereAsync",(function(){return jt.Td})),n.d(t,"zeros",(function(){return jt.Ud})),n.d(t,"zerosLike",(function(){return jt.Vd})),n.d(t,"booleanMaskAsync",(function(){return jt.y})),n.d(t,"transpose",(function(){return jt.Md})),n.d(t,"norm",(function(){return jt.mc})),n.d(t,"movingAverage",(function(){return jt.hc})),n.d(t,"scatterND",(function(){return jt.Wc})),n.d(t,"sparseToDense",(function(){return jt.od})),n.d(t,"gatherND",(function(){return jt.tb})),n.d(t,"dropout",(function(){return jt.db})),n.d(t,"enclosingPowerOfTwo",(function(){return jt.gb})),n.d(t,"cosineWindow",(function(){return jt.T})),n.d(t,"inTopKAsync",(function(){return jt.zb})),n.d(t,"op",(function(){return jt.rc})),n.d(t,"OP_SCOPE_SUFFIX",(function(){return jt.a})),n.d(t,"image",(function(){return jt.yb})),n.d(t,"linalg",(function(){return jt.Hb})),n.d(t,"losses",(function(){return jt.Tb})),n.d(t,"spectral",(function(){return jt.pd})),n.d(t,"fused",(function(){return jt.rb})),n.d(t,"signal",(function(){return jt.cd})),n.d(t,"sparse",(function(){return jt.nd})),n.d(t,"string",(function(){return jt.yd})),n.d(t,"Reduction",(function(){return Bt.a})),n.d(t,"train",(function(){return _t})),n.d(t,"enableProdMode",(function(){return ct.g})),n.d(t,"enableDebugMode",(function(){return ct.f})),n.d(t,"disableDeprecationWarnings",(function(){return ct.c})),n.d(t,"deprecationWarn",(function(){return ct.b})),n.d(t,"disposeVariables",(function(){return ct.e})),n.d(t,"engine",(function(){return ct.h})),n.d(t,"memory",(function(){return ct.m})),n.d(t,"profile",(function(){return ct.n})),n.d(t,"tidy",(function(){return ct.t})),n.d(t,"dispose",(function(){return ct.d})),n.d(t,"keep",(function(){return ct.l})),n.d(t,"time",(function(){return ct.u})),n.d(t,"setBackend",(function(){return ct.r})),n.d(t,"ready",(function(){return ct.o})),n.d(t,"getBackend",(function(){return ct.k})),n.d(t,"removeBackend",(function(){return ct.q})),n.d(t,"findBackend",(function(){return ct.i})),n.d(t,"findBackendFactory",(function(){return ct.j})),n.d(t,"registerBackend",(function(){return ct.p})),n.d(t,"backend",(function(){return ct.a})),n.d(t,"setPlatform",(function(){return ct.s})),n.d(t,"getKernel",(function(){return Ie.c})),n.d(t,"getGradient",(function(){return Ie.b})),n.d(t,"getKernelsForBackend",(function(){return Ie.d})),n.d(t,"registerKernel",(function(){return Ie.f})),n.d(t,"registerGradient",(function(){return Ie.e})),n.d(t,"unregisterKernel",(function(){return Ie.h})),n.d(t,"unregisterGradient",(function(){return Ie.g})),n.d(t,"copyRegisteredKernels",(function(){return Ie.a})),n.d(t,"customGrad",(function(){return mt.a})),n.d(t,"grad",(function(){return mt.b})),n.d(t,"grads",(function(){return mt.c})),n.d(t,"valueAndGrad",(function(){return mt.d})),n.d(t,"valueAndGrads",(function(){return mt.e})),n.d(t,"variableGrads",(function(){return mt.f})),n.d(t,"Environment",(function(){return h.b})),n.d(t,"env",(function(){return h.c})),n.d(t,"ENV",(function(){return h.a})),n.d(t,"version_core",(function(){return st})),n.d(t,"nextFrame",(function(){return Dt.a})),n.d(t,"browser",(function(){return a})),n.d(t,"io",(function(){return r})),n.d(t,"math",(function(){return o})),n.d(t,"serialization",(function(){return c})),n.d(t,"test_util",(function(){return at})),n.d(t,"util",(function(){return it})),n.d(t,"backend_util",(function(){return l})),n.d(t,"tensor_util",(function(){return ot})),n.d(t,"slice_util",(function(){return s})),n.d(t,"gather_util",(function(){return i})),n.d(t,"scatter_util",(function(){return $e})),n.d(t,"device_util",(function(){return In})),n.d(t,"kernel_impls",(function(){return d})),n.d(t,"KernelBackend",(function(){return Rn.b})),n.d(t,"DataStorage",(function(){return Rn.a})),n.d(t,"Abs",(function(){return Ee.a})),n.d(t,"Acos",(function(){return Ee.b})),n.d(t,"Acosh",(function(){return Ee.c})),n.d(t,"Add",(function(){return Ee.d})),n.d(t,"AddN",(function(){return Ee.e})),n.d(t,"All",(function(){return Ee.f})),n.d(t,"Any",(function(){return Ee.g})),n.d(t,"ArgMax",(function(){return Ee.h})),n.d(t,"ArgMin",(function(){return Ee.i})),n.d(t,"Asin",(function(){return Ee.j})),n.d(t,"Asinh",(function(){return Ee.k})),n.d(t,"Atan",(function(){return Ee.l})),n.d(t,"Atanh",(function(){return Ee.n})),n.d(t,"Atan2",(function(){return Ee.m})),n.d(t,"AvgPool",(function(){return Ee.o})),n.d(t,"AvgPoolGrad",(function(){return Ee.r})),n.d(t,"AvgPool3D",(function(){return Ee.p})),n.d(t,"AvgPool3DGrad",(function(){return Ee.q})),n.d(t,"BatchMatMul",(function(){return Ee.s})),n.d(t,"BatchToSpaceND",(function(){return Ee.t})),n.d(t,"Bincount",(function(){return Ee.u})),n.d(t,"BroadcastTo",(function(){return Ee.w})),n.d(t,"BroadcastArgs",(function(){return Ee.v})),n.d(t,"Cast",(function(){return Ee.x})),n.d(t,"Ceil",(function(){return Ee.y})),n.d(t,"ClipByValue",(function(){return Ee.z})),n.d(t,"Complex",(function(){return Ee.A})),n.d(t,"ComplexAbs",(function(){return Ee.B})),n.d(t,"Concat",(function(){return Ee.C})),n.d(t,"Conv2D",(function(){return Ee.D})),n.d(t,"Conv2DBackpropFilter",(function(){return Ee.E})),n.d(t,"Conv2DBackpropInput",(function(){return Ee.F})),n.d(t,"Conv3D",(function(){return Ee.G})),n.d(t,"Conv3DBackpropFilterV2",(function(){return Ee.H})),n.d(t,"Conv3DBackpropInputV2",(function(){return Ee.I})),n.d(t,"Cos",(function(){return Ee.J})),n.d(t,"Cosh",(function(){return Ee.K})),n.d(t,"Cumsum",(function(){return Ee.M})),n.d(t,"CropAndResize",(function(){return Ee.L})),n.d(t,"DenseBincount",(function(){return Ee.N})),n.d(t,"DepthToSpace",(function(){return Ee.O})),n.d(t,"DepthwiseConv2dNative",(function(){return Ee.P})),n.d(t,"DepthwiseConv2dNativeBackpropFilter",(function(){return Ee.Q})),n.d(t,"DepthwiseConv2dNativeBackpropInput",(function(){return Ee.R})),n.d(t,"Diag",(function(){return Ee.S})),n.d(t,"Dilation2D",(function(){return Ee.T})),n.d(t,"Dilation2DBackpropInput",(function(){return Ee.V})),n.d(t,"Dilation2DBackpropFilter",(function(){return Ee.U})),n.d(t,"RealDiv",(function(){return Ee.mc})),n.d(t,"Einsum",(function(){return Ee.W})),n.d(t,"Elu",(function(){return Ee.X})),n.d(t,"EluGrad",(function(){return Ee.Y})),n.d(t,"Erf",(function(){return Ee.ab})),n.d(t,"Equal",(function(){return Ee.Z})),n.d(t,"Exp",(function(){return Ee.bb})),n.d(t,"ExpandDims",(function(){return Ee.cb})),n.d(t,"Expm1",(function(){return Ee.db})),n.d(t,"FFT",(function(){return Ee.eb})),n.d(t,"Fill",(function(){return Ee.fb})),n.d(t,"FlipLeftRight",(function(){return Ee.gb})),n.d(t,"Floor",(function(){return Ee.hb})),n.d(t,"FloorDiv",(function(){return Ee.ib})),n.d(t,"FusedBatchNorm",(function(){return Ee.kb})),n.d(t,"GatherV2",(function(){return Ee.ob})),n.d(t,"GatherNd",(function(){return Ee.nb})),n.d(t,"Greater",(function(){return Ee.pb})),n.d(t,"GreaterEqual",(function(){return Ee.qb})),n.d(t,"Identity",(function(){return Ee.sb})),n.d(t,"IFFT",(function(){return Ee.rb})),n.d(t,"Imag",(function(){return Ee.tb})),n.d(t,"IsFinite",(function(){return Ee.ub})),n.d(t,"IsInf",(function(){return Ee.vb})),n.d(t,"IsNan",(function(){return Ee.wb})),n.d(t,"LeakyRelu",(function(){return Ee.zb})),n.d(t,"Less",(function(){return Ee.Ab})),n.d(t,"LessEqual",(function(){return Ee.Bb})),n.d(t,"LinSpace",(function(){return Ee.Cb})),n.d(t,"Log",(function(){return Ee.Db})),n.d(t,"Log1p",(function(){return Ee.Eb})),n.d(t,"LogicalAnd",(function(){return Ee.Gb})),n.d(t,"LogicalNot",(function(){return Ee.Hb})),n.d(t,"LogicalOr",(function(){return Ee.Ib})),n.d(t,"LogSoftmax",(function(){return Ee.Fb})),n.d(t,"LRN",(function(){return Ee.xb})),n.d(t,"LRNGrad",(function(){return Ee.yb})),n.d(t,"Max",(function(){return Ee.Jb})),n.d(t,"Maximum",(function(){return Ee.Pb})),n.d(t,"MaxPool",(function(){return Ee.Kb})),n.d(t,"MaxPoolGrad",(function(){return Ee.Nb})),n.d(t,"MaxPool3D",(function(){return Ee.Lb})),n.d(t,"MaxPool3DGrad",(function(){return Ee.Mb})),n.d(t,"MaxPoolWithArgmax",(function(){return Ee.Ob})),n.d(t,"Mean",(function(){return Ee.Qb})),n.d(t,"Min",(function(){return Ee.Rb})),n.d(t,"Minimum",(function(){return Ee.Sb})),n.d(t,"MirrorPad",(function(){return Ee.Tb})),n.d(t,"Mod",(function(){return Ee.Ub})),n.d(t,"Multinomial",(function(){return Ee.Vb})),n.d(t,"Multiply",(function(){return Ee.Wb})),n.d(t,"Neg",(function(){return Ee.Xb})),n.d(t,"NotEqual",(function(){return Ee.bc})),n.d(t,"NonMaxSuppressionV3",(function(){return Ee.Yb})),n.d(t,"NonMaxSuppressionV4",(function(){return Ee.Zb})),n.d(t,"NonMaxSuppressionV5",(function(){return Ee.ac})),n.d(t,"OnesLike",(function(){return Ee.dc})),n.d(t,"OneHot",(function(){return Ee.cc})),n.d(t,"Pack",(function(){return Ee.ec})),n.d(t,"PadV2",(function(){return Ee.fc})),n.d(t,"Pool",(function(){return Ee.gc})),n.d(t,"Pow",(function(){return Ee.hc})),n.d(t,"Prelu",(function(){return Ee.ic})),n.d(t,"Prod",(function(){return Ee.jc})),n.d(t,"Range",(function(){return Ee.kc})),n.d(t,"Real",(function(){return Ee.lc})),n.d(t,"Reciprocal",(function(){return Ee.nc})),n.d(t,"Relu",(function(){return Ee.oc})),n.d(t,"Reshape",(function(){return Ee.qc})),n.d(t,"ResizeNearestNeighbor",(function(){return Ee.tc})),n.d(t,"ResizeNearestNeighborGrad",(function(){return Ee.uc})),n.d(t,"ResizeBilinear",(function(){return Ee.rc})),n.d(t,"ResizeBilinearGrad",(function(){return Ee.sc})),n.d(t,"Relu6",(function(){return Ee.pc})),n.d(t,"Reverse",(function(){return Ee.vc})),n.d(t,"Round",(function(){return Ee.xc})),n.d(t,"Rsqrt",(function(){return Ee.yc})),n.d(t,"ScatterNd",(function(){return Ee.zc})),n.d(t,"Select",(function(){return Ee.Ac})),n.d(t,"Selu",(function(){return Ee.Bc})),n.d(t,"Slice",(function(){return Ee.Gc})),n.d(t,"Sin",(function(){return Ee.Ec})),n.d(t,"Sinh",(function(){return Ee.Fc})),n.d(t,"Sign",(function(){return Ee.Dc})),n.d(t,"Sigmoid",(function(){return Ee.Cc})),n.d(t,"Softplus",(function(){return Ee.Ic})),n.d(t,"Sqrt",(function(){return Ee.Qc})),n.d(t,"Sum",(function(){return Ee.Zc})),n.d(t,"SpaceToBatchND",(function(){return Ee.Jc})),n.d(t,"SplitV",(function(){return Ee.Pc})),n.d(t,"Softmax",(function(){return Ee.Hc})),n.d(t,"SparseFillEmptyRows",(function(){return Ee.Kc})),n.d(t,"SparseReshape",(function(){return Ee.Lc})),n.d(t,"SparseSegmentMean",(function(){return Ee.Mc})),n.d(t,"SparseSegmentSum",(function(){return Ee.Nc})),n.d(t,"SparseToDense",(function(){return Ee.Oc})),n.d(t,"SquaredDifference",(function(){return Ee.Sc})),n.d(t,"Square",(function(){return Ee.Rc})),n.d(t,"StridedSlice",(function(){return Ee.Uc})),n.d(t,"StringNGrams",(function(){return Ee.Vc})),n.d(t,"StringSplit",(function(){return Ee.Wc})),n.d(t,"StringToHashBucketFast",(function(){return Ee.Xc})),n.d(t,"Sub",(function(){return Ee.Yc})),n.d(t,"Tan",(function(){return Ee.ad})),n.d(t,"Tanh",(function(){return Ee.bd})),n.d(t,"Tile",(function(){return Ee.cd})),n.d(t,"TopK",(function(){return Ee.dd})),n.d(t,"Transform",(function(){return Ee.ed})),n.d(t,"Transpose",(function(){return Ee.fd})),n.d(t,"Unique",(function(){return Ee.gd})),n.d(t,"Unpack",(function(){return Ee.hd})),n.d(t,"UnsortedSegmentSum",(function(){return Ee.id})),n.d(t,"ZerosLike",(function(){return Ee.jd})),n.d(t,"Step",(function(){return Ee.Tc})),n.d(t,"FromPixels",(function(){return Ee.jb})),n.d(t,"RotateWithOffset",(function(){return Ee.wc})),n.d(t,"_FusedMatMul",(function(){return Ee.kd})),n.d(t,"FusedConv2D",(function(){return Ee.lb})),n.d(t,"FusedDepthwiseConv2D",(function(){return Ee.mb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return K})),n.d(r,"listModels",(function(){return G})),n.d(r,"moveModel",(function(){return Y})),n.d(r,"removeModel",(function(){return H})),n.d(r,"browserFiles",(function(){return ie})),n.d(r,"browserHTTPRequest",(function(){return ge})),n.d(r,"concatenateArrayBuffers",(function(){return f.d})),n.d(r,"decodeWeights",(function(){return f.e})),n.d(r,"encodeWeights",(function(){return f.f})),n.d(r,"fromMemory",(function(){return Ae})),n.d(r,"getLoadHandlers",(function(){return A})),n.d(r,"getModelArtifactsForJSON",(function(){return f.g})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return f.h})),n.d(r,"getSaveHandlers",(function(){return y})),n.d(r,"http",(function(){return me})),n.d(r,"isHTTPScheme",(function(){return he})),n.d(r,"loadWeights",(function(){return le})),n.d(r,"registerLoadRouter",(function(){return b})),n.d(r,"registerSaveRouter",(function(){return g})),n.d(r,"weightsLoaderFactory",(function(){return de})),n.d(r,"withSaveHandler",(function(){return ve}));var o={};n.r(o),n.d(o,"confusionMatrix",(function(){return Oe}));var a={};n.r(a),n.d(a,"fromPixelsAsync",(function(){return Be})),n.d(a,"toPixels",(function(){return _e})),n.d(a,"fromPixels",(function(){return De}));var i={};n.r(i),n.d(i,"prepareAndValidate",(function(){return Me}));var s={};n.r(s),n.d(s,"assertParamsValid",(function(){return Pe})),n.d(s,"maskToAxes",(function(){return Le})),n.d(s,"computeOutShape",(function(){return Fe})),n.d(s,"stridesWithElidedDims",(function(){return ze})),n.d(s,"getNormalizedAxes",(function(){return Ve})),n.d(s,"startIndicesWithElidedDims",(function(){return qe})),n.d(s,"stopIndicesWithElidedDims",(function(){return Ge})),n.d(s,"stridesForAxis",(function(){return He})),n.d(s,"startForAxis",(function(){return Ke})),n.d(s,"stopForAxis",(function(){return Ye})),n.d(s,"isSliceContinous",(function(){return Xe})),n.d(s,"computeFlatOffset",(function(){return Ze})),n.d(s,"parseSliceParams",(function(){return Qe})),n.d(s,"sliceInfo",(function(){return Je}));var c={};n.r(c),n.d(c,"Serializable",(function(){return tt})),n.d(c,"SerializationMap",(function(){return nt})),n.d(c,"registerClass",(function(){return rt}));var u={};n.r(u),n.d(u,"segOpComputeOptimalWindowSize",(function(){return wn})),n.d(u,"computeOutShape",(function(){return Cn})),n.d(u,"collectGatherOpShapeInfo",(function(){return Sn}));var l={};n.r(l),n.d(l,"axesAreInnerMostDims",(function(){return Mt.b})),n.d(l,"combineLocations",(function(){return Mt.c})),n.d(l,"computeOutAndReduceShapes",(function(){return Mt.d})),n.d(l,"expandShapeToKeepDim",(function(){return Mt.e})),n.d(l,"assertAxesAreInnerMostDims",(function(){return Mt.a})),n.d(l,"getAxesPermutation",(function(){return Mt.f})),n.d(l,"getUndoAxesPermutation",(function(){return Mt.h})),n.d(l,"getInnerMostAxes",(function(){return Mt.g})),n.d(l,"getBroadcastDims",(function(){return $t.b})),n.d(l,"getReductionAxes",(function(){return $t.c})),n.d(l,"assertAndGetBroadcastShape",(function(){return $t.a})),n.d(l,"assertParamsConsistent",(function(){return Pt})),n.d(l,"computeOutShape",(function(){return Lt})),n.d(l,"computeDilation2DInfo",(function(){return Ft.d})),n.d(l,"computePool2DInfo",(function(){return Ft.e})),n.d(l,"computePool3DInfo",(function(){return Ft.f})),n.d(l,"computeConv2DInfo",(function(){return Ft.a})),n.d(l,"computeConv3DInfo",(function(){return Ft.b})),n.d(l,"computeDefaultPad",(function(){return Ft.c})),n.d(l,"tupleValuesAreOne",(function(){return Ft.i})),n.d(l,"eitherStridesOrDilationsAreOne",(function(){return Ft.h})),n.d(l,"convertConv2DDataFormat",(function(){return Ft.g})),n.d(l,"getFusedDyActivation",(function(){return zt.c})),n.d(l,"getFusedBiasGradient",(function(){return zt.b})),n.d(l,"applyActivation",(function(){return zt.a})),n.d(l,"shouldFuse",(function(){return zt.d})),n.d(l,"PARALLELIZE_THRESHOLD",(function(){return Ut})),n.d(l,"computeOptimalWindowSize",(function(){return Wt})),n.d(l,"slice_util",(function(){return s})),n.d(l,"upcastType",(function(){return Rt.c})),n.d(l,"getImageCenter",(function(){return Vt})),n.d(l,"getReshaped",(function(){return qt})),n.d(l,"getPermuted",(function(){return Gt})),n.d(l,"getReshapedPermuted",(function(){return Ht})),n.d(l,"getSliceBeginCoords",(function(){return Kt})),n.d(l,"getSliceSize",(function(){return Yt})),n.d(l,"prepareAndValidate",(function(){return Me})),n.d(l,"validateUpdateShape",(function(){return $e.validateUpdateShape})),n.d(l,"validateInput",(function(){return $e.validateInput})),n.d(l,"calculateShapes",(function(){return $e.calculateShapes})),n.d(l,"SELU_SCALEALPHA",(function(){return Xt})),n.d(l,"SELU_SCALE",(function(){return Zt})),n.d(l,"ERF_P",(function(){return Qt})),n.d(l,"ERF_A1",(function(){return Jt})),n.d(l,"ERF_A2",(function(){return en})),n.d(l,"ERF_A3",(function(){return tn})),n.d(l,"ERF_A4",(function(){return nn})),n.d(l,"ERF_A5",(function(){return rn})),n.d(l,"warn",(function(){return on.b})),n.d(l,"log",(function(){return on.a})),n.d(l,"mergeRealAndImagArrays",(function(){return an})),n.d(l,"splitRealAndImagArrays",(function(){return sn})),n.d(l,"complexWithEvenIndex",(function(){return cn})),n.d(l,"complexWithOddIndex",(function(){return un})),n.d(l,"getComplexWithIndex",(function(){return ln})),n.d(l,"assignToTypedArray",(function(){return dn})),n.d(l,"exponents",(function(){return pn})),n.d(l,"exponent",(function(){return hn})),n.d(l,"decodeEinsumEquation",(function(){return gn})),n.d(l,"getEinsumPermutation",(function(){return bn})),n.d(l,"checkEinsumDimSizes",(function(){return yn})),n.d(l,"getEinsumComputePath",(function(){return An})),n.d(l,"isIdentityPermutation",(function(){return vn})),n.d(l,"prepareSplitSize",(function(){return kn})),n.d(l,"segment_util",(function(){return u})),n.d(l,"fromUint8ToStringArray",(function(){return On})),n.d(l,"fromStringArrayToUint8",(function(){return En}));var d={};n.r(d),n.d(d,"nonMaxSuppressionV3Impl",(function(){return Tn.a})),n.d(d,"nonMaxSuppressionV4Impl",(function(){return Tn.b})),n.d(d,"nonMaxSuppressionV5Impl",(function(){return Tn.c})),n.d(d,"whereImpl",(function(){return Nn.a}));var p=n(5),h=(n(110),n(14)),f=n(30);class m{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==m.instance&&(m.instance=new m),m.instance}static registerSaveRouter(e){m.getInstance().saveRouters.push(e)}static registerLoadRouter(e){m.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return m.getHandlers(e,"save")}static getLoadHandlers(e,t){return m.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?m.getInstance().loadRouters:m.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const g=e=>m.registerSaveRouter(e),b=e=>m.registerLoadRouter(e),y=e=>m.getSaveHandlers(e),A=(e,t)=>m.getLoadHandlers(e,t),v="tensorflowjs",x="models_store",k="model_info_store";function w(){if(!Object(h.c)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function C(e){const t=e.result;t.createObjectStore(x,{keyPath:"modelPath"}),t.createObjectStore(k,{keyPath:"modelPath"})}class S{constructor(e){if(this.indexedDB=w(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(v,1);r.onupgradeneeded=()=>C(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(x,"readonly"),r=t.objectStore(x).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{const r=Object(f.h)(t),a=o.transaction(k,"readwrite");let i=a.objectStore(k);const s=i.put({modelPath:this.modelPath,modelArtifactsInfo:r});let c;s.onsuccess=()=>{c=o.transaction(x,"readwrite");const s=c.objectStore(x).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});s.onsuccess=()=>e({modelArtifactsInfo:r}),s.onerror=e=>{i=a.objectStore(k);const t=i.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(s.error)),t.onerror=e=>(o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}S.URL_SCHEME="indexeddb://";const O=e=>{return Object(h.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(S.URL_SCHEME)?(t=e.slice(S.URL_SCHEME.length),new S(t)):null;var t};m.registerSaveRouter(O),m.registerLoadRouter(O);class E{constructor(){this.indexedDB=w()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(v,1);n.onupgradeneeded=()=>C(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(k,"readonly"),a=o.objectStore(k).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(S.URL_SCHEME)?t.slice(S.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(v,1);r.onupgradeneeded=()=>C(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(k,"readwrite"),i=a.objectStore(k),s=i.get(e);let c;s.onsuccess=()=>{if(null==s.result)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=i.delete(e),a=()=>{c=o.transaction(x,"readwrite");const r=c.objectStore(x).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=a,r.onerror=e=>(a(),o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}var I=n(8);const T="/",N="tensorflowjs_models",R="info",j="model_topology",B="weight_specs",_="weight_data",D="model_metadata";function M(e){return{info:[N,e,R].join(T),topology:[N,e,j].join(T),weightSpecs:[N,e,B].join(T),weightData:[N,e,_].join(T),modelMetadata:[N,e,D].join(T)}}function $(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function P(e){const t=e.split(T);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(T)}class L{constructor(e){if(!Object(h.c)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=M(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Object(f.h)(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,Object(f.a)(e.weightData));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(e){throw $(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=Object(f.b)(a),t}}L.URL_SCHEME="localstorage://";const F=e=>{return Object(h.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(L.URL_SCHEME)?(t=e.slice(L.URL_SCHEME.length),new L(t)):null;var t};m.registerSaveRouter(F),m.registerLoadRouter(F);class z{constructor(){Object(I.b)(Object(h.c)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Object(I.b)("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=N+T,n=T+R;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[P(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=M(e=(t=e).startsWith(L.URL_SCHEME)?t.slice(L.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return $(n),r}}const U="://";class W{constructor(){this.managers={}}static getInstance(){return null==W.instance&&(W.instance=new W),W.instance}static registerManager(e,t){Object(I.b)(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(U)&&(e=e.slice(0,e.indexOf(U))),Object(I.b)(e.length>0,(()=>"scheme must not be an empty string."));const n=W.getInstance();Object(I.b)(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function V(e){if(-1===e.indexOf(U))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${W.getSchemes().join(",")}`);return{scheme:e.split(U)[0],path:e.split(U)[1]}}async function q(e,t,n=!1){Object(I.b)(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=m.getLoadHandlers(e);Object(I.b)(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),Object(I.b)(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const o=r[0],a=m.getSaveHandlers(t);Object(I.b)(a.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),Object(I.b)(a.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const i=a[0],s=V(e).scheme,c=V(e).path,u=s===V(e).scheme,l=await o.load();n&&u&&await W.getManager(s).removeModel(c);const d=await i.save(l);return n&&!u&&await W.getManager(s).removeModel(c),d.modelArtifactsInfo}async function G(){const e=W.getSchemes(),t={};for(const n of e){const e=await W.getManager(n).listModels();for(const r in e){t[n+U+r]=e[r]}}return t}async function H(e){const t=V(e);return W.getManager(t.scheme).removeModel(t.path)}async function K(e,t){return q(e,t,!1)}async function Y(e,t){return q(e,t,!0)}class X{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if(Object(h.c)().get("IS_BROWSER")){Object(h.c)().setPlatform("browser",new X);try{W.registerManager(L.URL_SCHEME,new z)}catch(e){}try{W.registerManager(S.URL_SCHEME,new E)}catch(e){}}n(309);var Z=n(41),Q=n(21),J=n(53),ee=n(123),te=n(20);Object(p.b)();const ne={buffer:Z.a,cast:Q.a,clone:J.a,print:ee.a};Object(te.e)(ne);function re(e){return new Promise((e=>setTimeout(e))).then(e)}class oe{constructor(e){if(!Object(h.c)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(oe.URL_SCHEME)&&(e=e.slice(oe.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=Object(f.i)(e,n),o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await re((()=>a.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await re((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Object(f.h)(e)}}}}oe.URL_SCHEME="downloads://";class ae{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),o=r.modelTopology;if(null==o)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:o});const a=Object(f.g)(r,(e=>this.loadWeights(e)));e(a)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),o=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(o).then((e=>[t,Object(f.d)(e)]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const o=new FileReader;o.onload=e=>{const t=e.target.result;n(t)},o.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>Object(f.c)(e.name))),r={};for(const o of e)o.paths.forEach((e=>{const o=Object(f.c)(e);if(-1!==t.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),-1===n.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(o)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function ie(e){return new ae(e)}function se(e,t,n,r){!function(e){Object(I.b)(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Object(I.b)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),Object(I.b)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),Object(I.b)(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((a=>(a.then((a=>{const i=n+ ++o/e.length*(r-n);return t(i),a})),a))))}m.registerSaveRouter((e=>Object(h.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(oe.URL_SCHEME)?function(e="model"){return new oe(e)}(e.slice(oe.URL_SCHEME.length)):null));var ce=n(117);async function ue(e,t){null==t&&(t={});const n=null==t.fetchFunc?Object(h.c)().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await se(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await se(o,t.onProgress,.5,1)}async function le(e,t="",n,r){return de((e=>ue(e,{requestInit:r})))(e,t,n)}function de(e){return async(t,n="",r)=>{const o=t.map((()=>!1)),a={},i=null!=r?r.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,u=ce.a[c]*I.O(e.shape),l=()=>{o[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach(((t,n)=>{t===e.name&&(l(),i[n]=!0)})):l(),s.push(e.name),n+=u}))})),!i.every((e=>e))){const e=r.filter(((e,t)=>!i[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${s.join(", ")}.`)}const c=o.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),u=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)}))}));const l=await e(u),d={};let p=0;return c.forEach((e=>{const n=t[e].paths.length;let r=0;for(let e=0;e<n;e++)r+=l[p+e].byteLength;const o=new ArrayBuffer(r),i=new Uint8Array(o);let s=0;for(let e=0;e<n;e++){const t=new Uint8Array(l[p+e]);i.set(t,s),s+=t.byteLength}a[e].forEach((e=>{const t=o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(f.e)(t,[e.manifestEntry]);for(const e in n)d[e]=n[e]})),p+=n})),d}}class pe{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Object(I.b)("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Object(h.c)().platform.fetch,Object(I.b)(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Object(I.b)(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=Object(f.i)(e,n);t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const o=await this.fetch(this.path,t);if(o.ok)return{modelArtifactsInfo:Object(f.h)(e),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Object(f.g)(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),o=this.weightPathPrefix||n,a=[];for(const t of e)a.push(...t.weights);const i=[],s=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):i.push(o+e+r);this.weightUrlConverter&&i.push(...await Promise.all(s));const c=await ue(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,Object(f.d)(c)]}}function he(e){return null!=e.match(pe.URL_SCHEME_REGEX)}pe.URL_SCHEME_REGEX=/^https?:\/\//;const fe=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>he(e))):he(e),n)return me(e,t)}return null};function me(e,t){return new pe(e,t)}function ge(e,t){return me(e,t)}m.registerSaveRouter(fe),m.registerLoadRouter(fe);class be{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class ye{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function Ae(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new be(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new be({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new be({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function ve(e){return new ye(e)}var xe=n(3),ke=n(22),we=n(116),Ce=n(4),Se=n(93);const Oe=Object(Ce.b)({confusionMatrix_:function(e,t,n){const r=Object(xe.a)(e,"labels","confusionMatrix"),o=Object(xe.a)(t,"predictions","confusionMatrix");I.b(null==n||n>0&&Number.isInteger(n),(()=>`If provided, numClasses must be a positive integer, but got ${n}`)),I.b(1===r.rank,(()=>`Expected the rank of labels to be 1, but got ${r.rank}`)),I.b(1===o.rank,(()=>`Expected the rank of predictions to be 1, but got ${o.rank}`)),I.b(r.shape[0]===o.shape[0],(()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`)),I.b(n>0&&Number.isInteger(n),(()=>`numClasses is required to be a positive integer, but got ${n}`));const a=Object(we.a)(Object(Q.a)(r,"int32"),n),i=Object(we.a)(Object(Q.a)(o,"int32"),n),s=Object(Se.a)(a),c=Object(ke.a)(s,i);return Object(Q.a)(c,"int32")}});var Ee=n(6),Ie=n(59),Te=n(150);let Ne;function Re(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,a=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);s=!0}if(o){const t=2;if(o&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=Object(Ie.c)(Ee.jb,p.a.backendName)){const n={pixels:e},r={numChannels:t};return p.a.runKernel(Ee.jb,n,r)}const[c,u]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height];let l,d;if(i)l=e.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)l=e.data;else if(a||o||s){if(null==Ne)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Ne=new OffscreenCanvas(1,1).getContext("2d")}else Ne=document.createElement("canvas").getContext("2d");Ne.canvas.width=c,Ne.canvas.height=u,Ne.drawImage(e,0,0,c,u),l=Ne.getImageData(0,0,c,u).data}if(4===t)d=new Int32Array(l);else{const e=c*u;d=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)d[n*t+e]=l[4*n+e]}const h=[u,c,t];return Object(Te.a)(d,h,"int32")}function je(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function Be(e,t=3){let n=null;if(Object(h.c)().getBool("WRAP_TO_IMAGEBITMAP")&&je(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Re(n,t)}async function _e(e,t){let n=Object(xe.a)(e,"img","toPixels");if(!(e instanceof te.a)){const e=n;n=Object(Q.a)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,o]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2];if(a>4||2===a)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${a}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const i=await n.data(),s="float32"===n.dtype?255:1,c=new Uint8ClampedArray(o*r*4);for(let e=0;e<r*o;++e){const t=[0,0,0,255];for(let r=0;r<a;r++){const o=i[e*a+r];if("float32"===n.dtype){if(o<0||o>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${o}.`)}else if("int32"===n.dtype&&(o<0||o>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${o}.`);1===a?(t[0]=o*s,t[1]=o*s,t[2]=o*s):t[r]=o*s}const r=4*e;c[r+0]=Math.round(t[0]),c[r+1]=Math.round(t[1]),c[r+2]=Math.round(t[2]),c[r+3]=Math.round(t[3])}if(null!=t){t.width=o,t.height=r;const e=t.getContext("2d"),n=new ImageData(c,o,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c}const De=Object(Ce.b)({fromPixels_:Re});function Me(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===Object(I.O)(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,a=o[o.length-1];let i=1;for(let e=0;e<o.length-1;++e)i*=o[e];const s=e.shape,c=o.slice();c.pop();let u=1;for(let e=a;e<n;++e)u*=s[e],c.push(s[e]);const l=[...Object(I.j)(e.shape).map((e=>e/u)),1].slice(0,a);return[c,i,u,l]}var $e=n(95);function Pe(e,t,n){const r=e.shape.length;I.b(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),I.b(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let o=0;o<r;++o)I.b(t[o]+n[o]<=e.shape[o],(()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`))}function Le(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Fe(e,t,n){const r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function ze(e,t,n,r){const o=[...e];for(let e=o.length;e<r.length;e++)o.push(1);for(let e=0;e<n;e++)0===e?o[t]=1:(o.splice(t,0,1),o.pop());return o}function Ue(e,t,n){return n<=e?n:n-(t-1)}function We(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function Ve(e,t,n,r,o,a,i,s,c){const u=e.length;let l=new Array(u),d=new Array(u),p=new Array(u);if(t.length&&n>0){const c=t[0],u=n+1;l=qe(i,c,u,r,e),d=Ge(s,c,u,o,e),p=ze(a,c,u,e)}else for(let t=0;t<u;t++)l[t]=Ke(i,r,a,e,t,c),d[t]=Ye(s,o,a,e,t,c),p[t]=He(a,t,c);return{begin:l,end:d,strides:p}}function qe(e,t,n,r,o){const a=[...o],i=We(n,t);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const i=Ue(t,n,o);let s=r[i];e&1<<i&&(s=0),a[o]=s}return a}function Ge(e,t,n,r,o){const a=[...o],i=We(n,t);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const i=Ue(t,n,o);let s=r[i];e&1<<i&&(s=Number.MAX_SAFE_INTEGER),a[o]=s}for(let e=0;e<a.length;e++){const t=o[e];a[e]<0&&(a[e]+=t),a[e]=I.i(0,a[e],o[e])}return a}function He(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Ke(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=r[o];return i<0&&(i+=c),i=I.i(0,i,c-1),i}function Ye(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=r[o];return i<0&&(i+=c),i=s>0?I.i(0,i,c):I.i(-1,i,c-1),i}function Xe(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function Ze(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Qe(e,t,n){let r;const o=e.shape.length;let a;return r="number"==typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach((e=>{I.b(-1!==e,(()=>"slice() does not support negative begin indexing."))})),a=null==n?new Array(o).fill(-1):"number"==typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,a=a.map(((t,n)=>t>=0?t:(I.b(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,a]}function Je(e,t,n,r,o,a,i,s,c){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=i&&0!=(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c};for(let e=0;e<d.dims;e++)l&&0!=(1<<e&s)&&d.numAddAxisAfterEllipsis++,1<<e&i&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);let h=!0,f=!0,m=!0;const g=[],b=[];for(let t=0;t<e.length;++t){if(0===p.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(p.shrinkAxisMask&1<<t),r=e[t];if(-1===r){g.push(n?1:-1);continue}const o=[p.beginMask&1<<t,p.endMask&1<<t],a=[p.strides[t]>0?0:-1,p.strides[t]>0?r:r-1];if(n&&p.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===p.strides[t];const i=!!(p.beginMask&1<<t&&p.endMask&1<<t);if(p.beginValid&&p.endValid){if(n){const e=p.begin[t]<0?r+p.begin[t]:p.begin[t];if(p.begin[t]=e,p.end[t]=p.begin[t]+1,e<0||e>=r)throw Error(`slice index ${p.begin[t]} of dimension ${t} out of bounds.`)}else p.begin[t]=et(p.begin[t],0,p.strides[t],r,o,a),p.end[t]=et(p.end[t],1,p.strides[t],r,o,a);const e=1===p.strides[t]&&0===p.begin[t]&&p.end[t]===r;h=h&&e,f=f&&(0===t&&1===p.strides[t]||e)}else h=h&&1===p.strides[t]&&i,f=f&&(0===t&&1===p.strides[t]||i);let s,c=!1;if(p.beginValid&&p.endValid?(s=p.end[t]-p.begin[t],c=!0):n?(s=1,c=!0):i&&r>=0&&(s=p.strides[t]<0?-r:r,c=!0),c){let e;e=0===s||s<0!=p.strides[t]<0?0:Math.trunc(s/p.strides[t])+(s%p.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<p.finalShapeGatherIndices.length;++e){const t=p.finalShapeGatherIndices[e];t>=0?b.push(g[t]):-2===t&&b.push(1)}return{finalShapeSparse:b.filter(((e,t)=>-2!==p.finalShapeGatherIndices[t])),finalShape:b,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function et(e,t,n,r,o,a){if(o[t])return n>0?a[t]:a[t+1&1];{const t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}class tt{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class nt{constructor(){this.classNameMap={}}static getMap(){return null==nt.instance&&(nt.instance=new nt),nt.instance}static register(e){nt.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function rt(e){Object(I.b)(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),Object(I.b)("string"==typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),Object(I.b)(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),nt.register(e)}var ot=n(15),at=n(107),it=n(10);const st="3.11.0";var ct=n(17),ut=n(12),lt=n(19),dt=n(11),pt=n(54),ht=n(37),ft=n(36),mt=n(31),gt=n(16);class bt extends tt{minimize(e,t=!1,n){const{value:r,grads:o}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:o[e.name]})));this.applyGradients(e)}else this.applyGradients(o);return Object(ct.d)(o),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Object(mt.f)(e,t)}dispose(){null!=this.iterations_&&Object(ct.d)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Object(gt.a)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(bt,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class yt extends bt{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=p.a.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:Object(ct.t)((()=>Object(ft.a)(r).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:Object(ct.t)((()=>Object(ft.a)(r).variable(false)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;Object(ct.t)((()=>{const e=Object(ut.a)(Object(dt.a)(a,this.rho),Object(dt.a)(Object(ht.a)(o),1-this.rho)),t=Object(dt.a)(Object(lt.a)(Object(pt.a)(Object(ut.a)(i,this.epsilon)),Object(pt.a)(Object(ut.a)(a,this.epsilon))),o),n=Object(ut.a)(Object(dt.a)(i,this.rho),Object(dt.a)(Object(ht.a)(t),1-this.rho));a.assign(e),i.assign(n);const s=Object(ut.a)(Object(dt.a)(t,-this.learningRate),r);r.assign(s)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Object(ct.d)(this.accumulatedGrads.map((e=>e.variable))),Object(ct.d)(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}yt.className="Adadelta",rt(yt);var At=n(75);class vt extends bt{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:Object(ct.t)((()=>Object(At.a)(r.shape,this.initialAccumulatorValue).variable(e)))}}const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable;Object(ct.t)((()=>{const e=Object(ut.a)(a,Object(ht.a)(o));a.assign(e);const t=Object(ut.a)(Object(dt.a)(Object(lt.a)(o,Object(pt.a)(Object(ut.a)(e,p.a.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Object(ct.d)(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}vt.className="Adagrad",rt(vt);var xt=n(67),kt=n(13);class wt extends bt{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Object(ct.t)((()=>{this.accBeta1=Object(gt.a)(t).variable(),this.accBeta2=Object(gt.a)(n).variable()})),null==r&&(this.epsilon=p.a.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Object(ct.t)((()=>{const n=Object(kt.a)(1,this.accBeta1),r=Object(kt.a)(1,this.accBeta2);t.forEach(((t,o)=>{const a=p.a.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${t}/m`,variable:Object(ct.t)((()=>Object(ft.a)(a).variable(false)))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:`${t}/v`,variable:Object(ct.t)((()=>Object(ft.a)(a).variable(false)))});const i=Array.isArray(e)?e[o].tensor:e[t];if(null==i)return;const s=this.accumulatedFirstMoment[o].variable,c=this.accumulatedSecondMoment[o].variable,u=Object(ut.a)(Object(dt.a)(s,this.beta1),Object(dt.a)(i,1-this.beta1)),l=Object(ut.a)(Object(dt.a)(c,this.beta2),Object(dt.a)(Object(ht.a)(i),1-this.beta2)),d=Object(lt.a)(u,n),h=Object(lt.a)(l,r);s.assign(u),c.assign(l);const f=Object(ut.a)(Object(dt.a)(Object(lt.a)(d,Object(ut.a)(Object(pt.a)(h),this.epsilon)),-this.learningRate),a);a.assign(f)})),this.accBeta1.assign(Object(dt.a)(this.accBeta1,this.beta1)),this.accBeta2.assign(Object(dt.a)(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(ct.d)(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&Object(ct.d)(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),Object(ct.t)((()=>{this.accBeta1.assign(Object(xt.a)(this.beta1,this.iterations_+1)),this.accBeta2.assign(Object(xt.a)(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}wt.className="Adam",rt(wt);var Ct=n(38),St=n(125);class Ot extends bt{constructor(e,t,n,r=null,o=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Object(ct.t)((()=>{this.iteration=Object(gt.a)(0).variable(),this.accBeta1=Object(gt.a)(t).variable()})),null==r&&(this.epsilon=p.a.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Object(ct.t)((()=>{const n=Object(kt.a)(1,this.accBeta1),r=Object(lt.a)(-this.learningRate,Object(ut.a)(Object(dt.a)(this.iteration,this.decay),1));t.forEach(((t,o)=>{const a=p.a.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${t}/m`,variable:Object(ft.a)(a).variable(false)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:`${t}/v`,variable:Object(ft.a)(a).variable(false)});const i=Array.isArray(e)?e[o].tensor:e[t];if(null==i)return;const s=this.accumulatedFirstMoment[o].variable,c=this.accumulatedWeightedInfNorm[o].variable,u=Object(ut.a)(Object(dt.a)(s,this.beta1),Object(dt.a)(i,1-this.beta1)),l=Object(dt.a)(c,this.beta2),d=Object(Ct.a)(i),h=Object(St.a)(l,d);s.assign(u),c.assign(h);const f=Object(ut.a)(Object(dt.a)(Object(lt.a)(r,n),Object(lt.a)(u,Object(ut.a)(h,this.epsilon))),a);a.assign(f)})),this.iteration.assign(Object(ut.a)(this.iteration,1)),this.accBeta1.assign(Object(dt.a)(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(ct.d)(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&Object(ct.d)(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}Ot.className="Adamax",rt(Ot);class Et extends bt{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=p.a.registeredVariables[t];Object(ct.t)((()=>{const e=Object(ut.a)(Object(dt.a)(this.c,r),o);o.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Object(ct.l)(Object(gt.a)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}Et.className="SGD",rt(Et);class It extends Et{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Object(gt.a)(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:Object(ct.t)((()=>Object(ft.a)(r).variable(e)))}}const o=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&Object(ct.t)((()=>{let e;const t=Object(ut.a)(Object(dt.a)(this.m,o),a);e=this.useNesterov?Object(ut.a)(Object(dt.a)(this.c,Object(ut.a)(a,Object(dt.a)(t,this.m))),r):Object(ut.a)(Object(dt.a)(this.c,t),r),o.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Object(ct.d)(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}It.className="Momentum",rt(It);class Tt extends bt{constructor(e,t=.9,n=0,r=null,o=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,null==r&&(this.epsilon=p.a.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t],o=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:Object(ct.t)((()=>Object(ft.a)(r).variable(o)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:Object(ct.t)((()=>Object(ft.a)(r).variable(o)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:Object(ct.t)((()=>Object(ft.a)(r).variable(o)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;Object(ct.t)((()=>{const e=Object(ut.a)(Object(dt.a)(i,this.decay),Object(dt.a)(Object(ht.a)(a),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,o=Object(ut.a)(Object(dt.a)(t,this.decay),Object(dt.a)(a,1-this.decay)),c=Object(lt.a)(Object(dt.a)(a,this.learningRate),Object(pt.a)(Object(kt.a)(e,Object(ut.a)(Object(ht.a)(o),this.epsilon)))),u=Object(ut.a)(Object(dt.a)(s,this.momentum),c);i.assign(e),t.assign(o),s.assign(u);const l=Object(kt.a)(r,u);r.assign(l)}else{const e=Object(ut.a)(Object(dt.a)(i,this.decay),Object(dt.a)(Object(ht.a)(a),1-this.decay)),t=Object(ut.a)(Object(dt.a)(s,this.momentum),Object(lt.a)(Object(dt.a)(a,this.learningRate),Object(pt.a)(Object(ut.a)(e,this.epsilon))));i.assign(e),s.assign(t);const n=Object(kt.a)(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Object(ct.d)(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&Object(ct.d)(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&Object(ct.d)(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}Tt.className="RMSProp",rt(Tt);class Nt{static sgd(e){return new Et(e)}static momentum(e,t,n=!1){return new It(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,o=!1){return new Tt(e,t,n,r,o)}static adam(e=.001,t=.9,n=.999,r=null){return new wt(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new yt(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,o=0){return new Ot(e,t,n,r,o)}static adagrad(e,t=.1){return new vt(e,t)}}var Rt=n(74),jt=n(121),Bt=n(33);const _t={sgd:Nt.sgd,momentum:Nt.momentum,adadelta:Nt.adadelta,adagrad:Nt.adagrad,rmsprop:Nt.rmsprop,adamax:Nt.adamax,adam:Nt.adam};var Dt=n(237),Mt=n(61),$t=n(23);function Pt(e,t){const n=e[0].length;e.forEach(((e,t)=>{I.b(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),I.b(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,o)=>{for(let a=0;a<n;a++)I.b(a===t||e[a]===r[a],(()=>`Error in concat${n}D: Shape of tensors[${o}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`))}))}function Lt(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Ft=n(34),zt=n(39);const Ut=30;function Wt(e){return e<=Ut?e:Object(I.G)(e,Math.floor(Math.sqrt(e)))}function Vt(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function qt(e,t,n,r=!0){let o=[];if(r)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)o=o.concat([e[r+1]/t[r],t[r]]);o=o.concat(e.slice(n+1))}return o}function Gt(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],o=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?o.push(r):n.push(r);r.push(...n),r.push(0),r.push(...o)}return r}function Ht(e,t,n,r=!0){const o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?o.push(t[n-1]*e[n]):o.push(e[n]/t[n-1]):o.push(e[n]);return o}function Kt(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Yt(e,t,n){const r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}const Xt=1.7580993408473768,Zt=1.0507009873554805,Qt=.3275911,Jt=.254829592,en=-.284496736,tn=1.421413741,nn=-1.453152027,rn=1.061405429;var on=n(45);function an(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function sn(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function cn(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function un(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function ln(e,t){return{real:e[2*t],imag:e[2*t+1]}}function dn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function pn(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}function hn(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const fn="->",mn=/->/g;function gn(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(mn,"").length)/fn.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,o]=e.split(fn);Object(I.b)(-1===r.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const a=r.split(","),i=a.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let e=0;e<o.length;++e){const t=o[e];if(!a.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===s.indexOf(t)&&","!==t&&s.push(t)}const c=new Array(a.length);for(let e=0;e<i;++e){if(new Set(a[e].split("")).size!==a[e].length)throw new Error(`Found duplicate axes in input component ${a[e]}. Support for duplicate axes in input is not implemented yet.`);c[e]=[];for(let t=0;t<a[e].length;++t)c[e].push(s.indexOf(a[e][t]))}const u=s.length,l=[];for(let e=o.length;e<u;++e)l.push(e);return{allDims:s,summedDims:l,idDims:c}}function bn(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function yn(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const o=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=o[n]:Object(I.b)(r[t[e][n]]===o[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(o)}, but got dimension ${o[n]}`))}}function An(e,t){const n=e,r=[];let o=0;0===e.length&&n.push(-1),o=e.length+1;for(let e=0;e<o;++e)r.push([]);const a=[];for(let e=0;e<n.length;++e){const o=xn(t,n[e]);for(const t of o)-1===a.indexOf(t)&&(r[e].push(t),a.push(t))}return{path:n,steps:r}}function vn(e){return e.every(((e,t)=>e===t))}function xn(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function kn(e,t,n=0){let r=[];if("number"==typeof t)Object(I.b)(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);Object(I.b)(o<=1,(()=>"There should be only one negative value in split array."));const a=t.indexOf(-1);if(-1!==a){const r=t.reduce(((e,t)=>t>0?e+t:e));t[a]=e.shape[n]-r}Object(I.b)(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function wn(e,t){let n,r=!1;for(e<=Ut?(n=e,r=!0):n=Object(I.G)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Object(I.G)(e,n+1);return n}function Cn(e,t,n){const r=[],o=e.length;for(let a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}function Sn(e,t,n,r){const o=t.shape.length,a=e.shape.length;if(0!==r&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const i=e.shape[n],s=[];let c=1,u=1,l=1;for(let t=0;t<r;++t)s.push(e.shape[t]),c*=e.shape[t];for(let t=r;t<n;t++)s.push(e.shape[t]),u*=e.shape[t];for(let e=r;e<o;e++)s.push(t.shape[e]);for(let t=n+1;t<a;t++)s.push(e.shape[t]),l*=e.shape[t];return{batchSize:c,sliceSize:l,outerSize:u,dimSize:i,outputShape:s}}function On(e){try{return e.map((e=>Object(it.decodeString)(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function En(e){return e.map((e=>Object(it.encodeString)(e)))}var In=n(122),Tn=n(60),Nn=n(152),Rn=n(113)},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(0);function o(e,t,n,o,i){const s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){const e=s.inputIndexStart,c=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?e+1:s.inputIndexEnd;if("tensor"===s.type)return a(t.inputNames[s.inputIndexStart],n,o,i);if("tensors"===s.type){return t.inputNames.slice(e,c).map((e=>a(e,n,o,i)))}const u=a(t.inputNames.slice(e)[0],n,o,i),l=u.dataSync();return"number"===s.type?l[0]:r.util.toNestedArray(u.shape,l)}const c=t.attrParams[e];return c&&c.value}function a(e,t,n,r){const[o,a]=u(e);if(null!=r){const e=r.getHashTableHandleByName(o);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[c(o,e)]));return void 0!==i?t[c(o,i)][a]:void 0}function i(e,t,n){return t[c(e,n.currentContextId)]}function s(e,t){const[n,r,o]=u(e);return[c(n,t&&t.currentContextId),r,o]}function c(e,t){return t?`${e}-${t}`:e}function u(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function l(e,t,n){let r=o("pad",e,t,n);if("explicit"===r){r=o("explicitPaddings",e,t,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function d(e){return e.kept?e:Object(r.clone)(e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(5),o=n(14),a=n(20),i=n(8),s=n(10);function c(e,t){let n=e;if(Object(i.A)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||Object(i.A)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Object(o.c)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&u(e,r,[]),r}function u(e,t,n){if(n=n||[],!Array.isArray(e)&&!Object(i.A)(e))return void Object(i.b)(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));Object(i.b)(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),Object(i.b)(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)u(e[t],r,n.concat(t))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function d(e,t,n,o="numeric"){if(e instanceof a.a)return l(o,e.dtype,t,n),e;let u=Object(i.r)(e);if("string"!==u&&["bool","int32","float32"].indexOf(o)>=0&&(u=o),l(o,u,t,n),null==e||!Object(i.A)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const d=c(e,u);Object(i.A)(e)||Array.isArray(e)||(e=[e]);const p="string"!==u?Object(s.toTypedArray)(e,u):Object(i.m)(e,[],!0);return r.a.makeTensor(p,d,u)}function p(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,o)=>d(e,`${t}[${o}]`,n,r)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(5),o=n(8);const a="__op";function i(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const i=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=a;const s=(...e)=>{r.a.startScope(n);try{const t=i(...e);return Object(o.x)(t)&&console.error("Cannot return a Promise inside of tidy."),r.a.endScope(t),t}catch(e){throw r.a.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},function(e,t,n){"use strict";n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return v}));var r=n(113),o=n(14),a=n(94),i=n(6),s=n(59),c=n(10),u=n(8);class l{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new p)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let i;const s=c.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();i=Promise.resolve({kernelMs:c.now()-s})}if(Object(o.c)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{d(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then((e=>e.kernelMs)),extraInfo:i.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function d(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class p{logKernelProfile(e,t,n,r,o,a){const i="number"==typeof r?u.L(`${r}ms`,9):r.error,s=u.L(e,25),c=t.rank,l=t.size,d=u.L(t.shape.toString(),14);let p="";for(const e in o){const n=o[e];if(null!=n){const r=n.shape||t.shape,o=r.length;p+=`${e}: ${o}D ${o>0?r:""} `}}console.log(`%c${s}\t%c${i}\t%c${c}D ${d}\t%c${l}\t%c${p}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var h=n(20),f=n(15),m=n(45);function g(e){return null!=e.kernelName}class b{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class y{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new b}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(m.b(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new l(this.backendInstance),!0}setupRegisteredKernels(){Object(s.d)(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){Object(s.d)(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof r.b||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,m.b(`Initialization of backend ${e} failed`),m.b(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return m.b(`Initialization of backend ${e} failed`),m.b(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return y.nextTensorId++}nextVariableId(){return y.nextVariableId++}clone(e){const t=v.runKernel(i.sb,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return v.runKernel(i.x,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=Object(s.c)(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let i,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=g(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(e)){const{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;const l=Object(s.c)(t,this.backendName);u.b(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),i=()=>{const e=this.backend.numDataIds();c=l.kernelFunc({inputs:o,attrs:a,backend:this.backend});const i=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const s=i.map((e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)}));if(r){const e=this.getTensorsForGradient(t,o,s);n=this.saveTensorsForBackwardMode(e)}return s}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();c=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:d,attrs:p}=e,h=g(e)?null:e.backwardsFunc;let f;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(l,d,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),t=f.outputs):t=i()})),r&&this.addTapeNode(l,d,t,h,n,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map((e=>null!=d[e]?d[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=Object(s.b)(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let a;r.saveAllInputs?(u.b(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=n.filter(((e,t)=>o[t]));return a.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&u.z(e[0])&&(o=e.map((e=>c.encodeString(e))));const a=r.write(o,t,n),i=new h.a(t,n,a,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(a),t=Object(u.f)(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){n=n||"float32";const o=new h.a(t,n,e,this.nextTensorId());return this.trackTensor(o,r),o}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new h.c(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*u.g(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof h.c||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*u.g(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},c=Object(s.b)(e);null!=c&&(r=c.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=u.F(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Object(f.getTensorsInContainer)(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(u.b(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));u.b(o instanceof h.a,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},o={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const a=e[n],i=a.inputs;for(const e in i){const n=i[e];let s=!1;for(let e=0;e<t.length;e++)if(r[n.id]){a.outputs.forEach((e=>r[e.id]=!0)),s=!0,o[a.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const i={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(a[n.outputs[e].id]){for(const e in r)a[r[e].id]=!0,i[n.id]=!0;break}}const s=[];for(let t=0;t<e.length;t++){const n=e[t];if(o[n.id]&&i[n.id]){const e={};for(const t in n.inputs){const o=n.inputs[t];r[o.id]&&(e[t]=o)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,s.push(t)}}return s}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=Object(u.D)(Object(u.O)(e),"float32");return v.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(i);for(const t in a.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const o=n((()=>s[t]()));if("float32"!==o.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${o.dtype}'`);const i=a.inputs[t];if(!u.a(o.shape,i.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${o.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=o;else{const t=e[i.id];e[i.id]=r(t,o),t.dispose()}}}}(e,a,(e=>this.tidy(e)),x);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){return u.b(u.u(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;u.b(t.every((e=>e instanceof h.a)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};t.forEach(((e,t)=>{r[t]=e}));return this.runKernelFunc({forwardFunc:(r,o)=>(n=e(...t,o),u.b(n.value instanceof h.a,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),u.b(u.u(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const o=n.gradFunc(e,r),a=Array.isArray(o)?o:[o];u.b(a.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),u.b(a.every((e=>e instanceof h.a)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return a.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=Object(c.now)(),n=await this.backend.time(e);return n.wallMs=Object(c.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new b;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function A(){const e=Object(a.b)();if(null==e._tfengine){const t=new o.b(e);e._tfengine=new y(t)}return Object(o.d)(e._tfengine.ENV),Object(h.f)((()=>e._tfengine)),e._tfengine}y.nextTensorId=0,y.nextVariableId=0;const v=A();function x(e,t){const n={a:e,b:t};return v.runKernel(i.d,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return g})),n.d(t,"o",(function(){return b})),n.d(t,"r",(function(){return y})),n.d(t,"p",(function(){return A})),n.d(t,"q",(function(){return v})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return w})),n.d(t,"w",(function(){return C})),n.d(t,"v",(function(){return S})),n.d(t,"x",(function(){return O})),n.d(t,"y",(function(){return E})),n.d(t,"z",(function(){return I})),n.d(t,"A",(function(){return T})),n.d(t,"B",(function(){return N})),n.d(t,"C",(function(){return R})),n.d(t,"D",(function(){return j})),n.d(t,"E",(function(){return B})),n.d(t,"F",(function(){return _})),n.d(t,"G",(function(){return D})),n.d(t,"H",(function(){return M})),n.d(t,"I",(function(){return $})),n.d(t,"J",(function(){return P})),n.d(t,"K",(function(){return L})),n.d(t,"M",(function(){return F})),n.d(t,"L",(function(){return z})),n.d(t,"N",(function(){return U})),n.d(t,"O",(function(){return W})),n.d(t,"P",(function(){return V})),n.d(t,"Q",(function(){return q})),n.d(t,"R",(function(){return G})),n.d(t,"S",(function(){return H})),n.d(t,"T",(function(){return K})),n.d(t,"V",(function(){return Y})),n.d(t,"U",(function(){return X})),n.d(t,"mc",(function(){return Z})),n.d(t,"W",(function(){return Q})),n.d(t,"X",(function(){return J})),n.d(t,"Y",(function(){return ee})),n.d(t,"ab",(function(){return te})),n.d(t,"Z",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return oe})),n.d(t,"db",(function(){return ae})),n.d(t,"eb",(function(){return ie})),n.d(t,"fb",(function(){return se})),n.d(t,"gb",(function(){return ce})),n.d(t,"hb",(function(){return ue})),n.d(t,"ib",(function(){return le})),n.d(t,"kb",(function(){return de})),n.d(t,"ob",(function(){return pe})),n.d(t,"nb",(function(){return he})),n.d(t,"pb",(function(){return fe})),n.d(t,"qb",(function(){return me})),n.d(t,"sb",(function(){return ge})),n.d(t,"rb",(function(){return be})),n.d(t,"tb",(function(){return ye})),n.d(t,"ub",(function(){return Ae})),n.d(t,"vb",(function(){return ve})),n.d(t,"wb",(function(){return xe})),n.d(t,"zb",(function(){return ke})),n.d(t,"Ab",(function(){return we})),n.d(t,"Bb",(function(){return Ce})),n.d(t,"Cb",(function(){return Se})),n.d(t,"Db",(function(){return Oe})),n.d(t,"Eb",(function(){return Ee})),n.d(t,"Gb",(function(){return Ie})),n.d(t,"Hb",(function(){return Te})),n.d(t,"Ib",(function(){return Ne})),n.d(t,"Fb",(function(){return Re})),n.d(t,"xb",(function(){return je})),n.d(t,"yb",(function(){return Be})),n.d(t,"Jb",(function(){return _e})),n.d(t,"Pb",(function(){return De})),n.d(t,"Kb",(function(){return Me})),n.d(t,"Nb",(function(){return $e})),n.d(t,"Lb",(function(){return Pe})),n.d(t,"Mb",(function(){return Le})),n.d(t,"Ob",(function(){return Fe})),n.d(t,"Qb",(function(){return ze})),n.d(t,"Rb",(function(){return Ue})),n.d(t,"Sb",(function(){return We})),n.d(t,"Tb",(function(){return Ve})),n.d(t,"Ub",(function(){return qe})),n.d(t,"Vb",(function(){return Ge})),n.d(t,"Wb",(function(){return He})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"bc",(function(){return Ye})),n.d(t,"Yb",(function(){return Xe})),n.d(t,"Zb",(function(){return Ze})),n.d(t,"ac",(function(){return Qe})),n.d(t,"dc",(function(){return Je})),n.d(t,"cc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"fc",(function(){return nt})),n.d(t,"gc",(function(){return rt})),n.d(t,"hc",(function(){return ot})),n.d(t,"ic",(function(){return at})),n.d(t,"jc",(function(){return it})),n.d(t,"kc",(function(){return st})),n.d(t,"lc",(function(){return ct})),n.d(t,"nc",(function(){return ut})),n.d(t,"oc",(function(){return lt})),n.d(t,"qc",(function(){return dt})),n.d(t,"tc",(function(){return pt})),n.d(t,"uc",(function(){return ht})),n.d(t,"rc",(function(){return ft})),n.d(t,"sc",(function(){return mt})),n.d(t,"pc",(function(){return gt})),n.d(t,"vc",(function(){return bt})),n.d(t,"xc",(function(){return yt})),n.d(t,"yc",(function(){return At})),n.d(t,"zc",(function(){return vt})),n.d(t,"Ac",(function(){return xt})),n.d(t,"Bc",(function(){return kt})),n.d(t,"Gc",(function(){return wt})),n.d(t,"Ec",(function(){return Ct})),n.d(t,"Fc",(function(){return St})),n.d(t,"Dc",(function(){return Ot})),n.d(t,"Cc",(function(){return Et})),n.d(t,"Ic",(function(){return It})),n.d(t,"Qc",(function(){return Tt})),n.d(t,"Zc",(function(){return Nt})),n.d(t,"Jc",(function(){return Rt})),n.d(t,"Pc",(function(){return jt})),n.d(t,"Hc",(function(){return Bt})),n.d(t,"Kc",(function(){return _t})),n.d(t,"Lc",(function(){return Dt})),n.d(t,"Mc",(function(){return Mt})),n.d(t,"Nc",(function(){return $t})),n.d(t,"Oc",(function(){return Pt})),n.d(t,"Sc",(function(){return Lt})),n.d(t,"Rc",(function(){return Ft})),n.d(t,"Uc",(function(){return zt})),n.d(t,"Vc",(function(){return Ut})),n.d(t,"Wc",(function(){return Wt})),n.d(t,"Xc",(function(){return Vt})),n.d(t,"Yc",(function(){return qt})),n.d(t,"ad",(function(){return Gt})),n.d(t,"bd",(function(){return Ht})),n.d(t,"cd",(function(){return Kt})),n.d(t,"dd",(function(){return Yt})),n.d(t,"ed",(function(){return Xt})),n.d(t,"fd",(function(){return Zt})),n.d(t,"gd",(function(){return Qt})),n.d(t,"hd",(function(){return Jt})),n.d(t,"id",(function(){return en})),n.d(t,"jd",(function(){return tn})),n.d(t,"Tc",(function(){return nn})),n.d(t,"jb",(function(){return rn})),n.d(t,"wc",(function(){return on})),n.d(t,"kd",(function(){return an})),n.d(t,"lb",(function(){return sn})),n.d(t,"mb",(function(){return cn}));const r="Abs",o="Acos",a="Acosh",i="Add",s="AddN",c="All",u="Any",l="ArgMax",d="ArgMin",p="Asin",h="Asinh",f="Atan",m="Atanh",g="Atan2",b="AvgPool",y="AvgPoolGrad",A="AvgPool3D",v="AvgPool3DGrad",x="BatchMatMul",k="BatchToSpaceND",w="Bincount",C="BroadcastTo",S="BroadcastArgs",O="Cast",E="Ceil",I="ClipByValue",T="Complex",N="ComplexAbs",R="Concat",j="Conv2D",B="Conv2DBackpropFilter",_="Conv2DBackpropInput",D="Conv3D",M="Conv3DBackpropFilterV2",$="Conv3DBackpropInputV2",P="Cos",L="Cosh",F="Cumsum",z="CropAndResize",U="DenseBincount",W="DepthToSpace",V="DepthwiseConv2dNative",q="DepthwiseConv2dNativeBackpropFilter",G="DepthwiseConv2dNativeBackpropInput",H="Diag",K="Dilation2D",Y="Dilation2DBackpropInput",X="Dilation2DBackpropFilter",Z="RealDiv",Q="Einsum",J="Elu",ee="EluGrad",te="Erf",ne="Equal",re="Exp",oe="ExpandDims",ae="Expm1",ie="FFT",se="Fill",ce="FlipLeftRight",ue="Floor",le="FloorDiv",de="FusedBatchNorm",pe="GatherV2",he="GatherNd",fe="Greater",me="GreaterEqual",ge="Identity",be="IFFT",ye="Imag",Ae="IsFinite",ve="IsInf",xe="IsNan",ke="LeakyRelu",we="Less",Ce="LessEqual",Se="LinSpace",Oe="Log",Ee="Log1p",Ie="LogicalAnd",Te="LogicalNot",Ne="LogicalOr",Re="LogSoftmax",je="LRN",Be="LRNGrad",_e="Max",De="Maximum",Me="MaxPool",$e="MaxPoolGrad",Pe="MaxPool3D",Le="MaxPool3DGrad",Fe="MaxPoolWithArgmax",ze="Mean",Ue="Min",We="Minimum",Ve="MirrorPad",qe="Mod",Ge="Multinomial",He="Multiply",Ke="Neg",Ye="NotEqual",Xe="NonMaxSuppressionV3",Ze="NonMaxSuppressionV4",Qe="NonMaxSuppressionV5",Je="OnesLike",et="OneHot",tt="Pack",nt="PadV2",rt="Pool",ot="Pow",at="Prelu",it="Prod",st="Range",ct="Real",ut="Reciprocal",lt="Relu",dt="Reshape",pt="ResizeNearestNeighbor",ht="ResizeNearestNeighborGrad",ft="ResizeBilinear",mt="ResizeBilinearGrad",gt="Relu6",bt="Reverse",yt="Round",At="Rsqrt",vt="ScatterNd",xt="Select",kt="Selu",wt="Slice",Ct="Sin",St="Sinh",Ot="Sign",Et="Sigmoid",It="Softplus",Tt="Sqrt",Nt="Sum",Rt="SpaceToBatchND",jt="SplitV",Bt="Softmax",_t="SparseFillEmptyRows",Dt="SparseReshape",Mt="SparseSegmentMean",$t="SparseSegmentSum",Pt="SparseToDense",Lt="SquaredDifference",Ft="Square",zt="StridedSlice",Ut="StringNGrams",Wt="StringSplit",Vt="StringToHashBucketFast",qt="Sub",Gt="Tan",Ht="Tanh",Kt="Tile",Yt="TopK",Xt="Transform",Zt="Transpose",Qt="Unique",Jt="Unpack",en="UnsortedSegmentSum",tn="ZerosLike",nn="Step",rn="FromPixels",on="RotateWithOffset",an="_FusedMatMul",sn="FusedConv2D",cn="FusedDepthwiseConv2D"},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__7__},function(e,t,n){"use strict";function r(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,s(e,t,n)}function o(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,s(e,n,r),s(t,n,r)}function a(e,t,n){return Math.max(e,Math.min(t,n))}function i(e){return e%2==0?e:e+1}function s(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function c(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function u(e,t){const n=Math.random();return t*n+(1-n)*e}function l(e,t){let n=0;for(let r=0;r<e.length;r++){const o=Number(e[r])-Number(t[r]);n+=o*o}return n}function d(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function p(e,t,n=""){d(b(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function h(e){d(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function f(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||j(e)&&!n)for(let r=0;r<e.length;++r)f(e[r],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function g(e){return 0===e.length}function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1==0}function A(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function v(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function x(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function w(e,t=(e=>0),n){return new Promise(((r,o)=>{let a=0;const i=()=>{if(e())return void r();a++;const s=t(a);null!=n&&a>=n?o():setTimeout(i,s)};i()}))}function C(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[r]=t/n,o}function S(e,t){const n=t.length;return d((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),d(e.every((e=>y(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function O(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:S(t,e).sort();let i=0;for(let t=0;t<e.length;++t){if(null!=a){if(a[i]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==a[i]||a[i]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),a[i]<=t&&i++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function E(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function I(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function T(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function N(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function R(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function j(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function B(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function _(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function D(e){return"string"==typeof e||e instanceof String}function M(e){return"boolean"==typeof e}function $(e){return"number"==typeof e}function P(e){return Array.isArray(e)?P(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":$(e)?"float32":D(e)?"string":M(e)?"bool":"float32"}function L(e){return!!(e&&e.constructor&&e.call&&e.apply)}function F(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function z(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function U(e,t,n,r=!1){const o=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)o[t]=n[e+t]}else{const a=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)o[t]=U(e+t*s,i,n,r)}return o}function W(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return U(0,e,t,n)}function V(e,t){const n=q(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function q(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function G(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return W(e,new Float32Array(n));if("int32"===t)return W(e,new Int32Array(n));if("bool"===t)return W(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function H(e){e.forEach((t=>{d(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function K(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function Y(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function X(e){return e&&e.then&&"function"==typeof e.then}n.d(t,"M",(function(){return r})),n.d(t,"N",(function(){return o})),n.d(t,"i",(function(){return a})),n.d(t,"H",(function(){return i})),n.d(t,"S",(function(){return s})),n.d(t,"R",(function(){return c})),n.d(t,"J",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"O",(function(){return m})),n.d(t,"y",(function(){return g})),n.d(t,"a",(function(){return b})),n.d(t,"v",(function(){return y})),n.d(t,"T",(function(){return A})),n.d(t,"P",(function(){return v})),n.d(t,"k",(function(){return x})),n.d(t,"L",(function(){return k})),n.d(t,"K",(function(){return w})),n.d(t,"s",(function(){return C})),n.d(t,"I",(function(){return S})),n.d(t,"Q",(function(){return O})),n.d(t,"o",(function(){return E})),n.d(t,"n",(function(){return I})),n.d(t,"h",(function(){return T})),n.d(t,"B",(function(){return N})),n.d(t,"p",(function(){return R})),n.d(t,"A",(function(){return j})),n.d(t,"g",(function(){return B})),n.d(t,"f",(function(){return _})),n.d(t,"z",(function(){return D})),n.d(t,"t",(function(){return M})),n.d(t,"w",(function(){return $})),n.d(t,"r",(function(){return P})),n.d(t,"u",(function(){return L})),n.d(t,"G",(function(){return F})),n.d(t,"j",(function(){return z})),n.d(t,"U",(function(){return W})),n.d(t,"D",(function(){return V})),n.d(t,"F",(function(){return q})),n.d(t,"E",(function(){return G})),n.d(t,"c",(function(){return H})),n.d(t,"C",(function(){return K})),n.d(t,"q",(function(){return Y})),n.d(t,"x",(function(){return X}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({reshape_:function(e,t){const n={x:Object(a.a)(e,"x","reshape","string_or_numeric")},i={shape:t};return r.a.runKernel(o.qc,n,i)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"shuffle",(function(){return o.M})),n.d(t,"shuffleCombo",(function(){return o.N})),n.d(t,"clamp",(function(){return o.i})),n.d(t,"nearestLargerEven",(function(){return o.H})),n.d(t,"swap",(function(){return o.S})),n.d(t,"sum",(function(){return o.R})),n.d(t,"randUniform",(function(){return o.J})),n.d(t,"distSquared",(function(){return o.l})),n.d(t,"assert",(function(){return o.b})),n.d(t,"assertShapesMatch",(function(){return o.e})),n.d(t,"assertNonNull",(function(){return o.d})),n.d(t,"flatten",(function(){return o.m})),n.d(t,"sizeFromShape",(function(){return o.O})),n.d(t,"isScalarShape",(function(){return o.y})),n.d(t,"arraysEqual",(function(){return o.a})),n.d(t,"isInt",(function(){return o.v})),n.d(t,"tanh",(function(){return o.T})),n.d(t,"sizeToSquarishShape",(function(){return o.P})),n.d(t,"createShuffledIndices",(function(){return o.k})),n.d(t,"rightPad",(function(){return o.L})),n.d(t,"repeatedTry",(function(){return o.K})),n.d(t,"inferFromImplicitShape",(function(){return o.s})),n.d(t,"parseAxisParam",(function(){return o.I})),n.d(t,"squeezeShape",(function(){return o.Q})),n.d(t,"getTypedArrayFromDType",(function(){return o.o})),n.d(t,"getArrayFromDType",(function(){return o.n})),n.d(t,"checkConversionForErrors",(function(){return o.h})),n.d(t,"isValidDtype",(function(){return o.B})),n.d(t,"hasEncodingLoss",(function(){return o.p})),n.d(t,"isTypedArray",(function(){return o.A})),n.d(t,"bytesPerElement",(function(){return o.g})),n.d(t,"bytesFromStringArray",(function(){return o.f})),n.d(t,"isString",(function(){return o.z})),n.d(t,"isBoolean",(function(){return o.t})),n.d(t,"isNumber",(function(){return o.w})),n.d(t,"inferDtype",(function(){return o.r})),n.d(t,"isFunction",(function(){return o.u})),n.d(t,"nearestDivisor",(function(){return o.G})),n.d(t,"computeStrides",(function(){return o.j})),n.d(t,"toNestedArray",(function(){return o.U})),n.d(t,"makeOnesTypedArray",(function(){return o.D})),n.d(t,"makeZerosTypedArray",(function(){return o.F})),n.d(t,"makeZerosNestedTypedArray",(function(){return o.E})),n.d(t,"assertNonNegativeIntegerDimensions",(function(){return o.c})),n.d(t,"locToIndex",(function(){return o.C})),n.d(t,"indexToLoc",(function(){return o.q})),n.d(t,"isPromise",(function(){return o.x})),n.d(t,"hexToLong",(function(){return s})),n.d(t,"fingerPrint64",(function(){return y})),n.d(t,"createScalarValue",(function(){return A})),n.d(t,"toTypedArray",(function(){return v})),n.d(t,"now",(function(){return x})),n.d(t,"fetch",(function(){return k})),n.d(t,"encodeString",(function(){return w})),n.d(t,"decodeString",(function(){return C}));var r=n(14),o=n(8),a=n(178);const i=n.n(a).a||a;function s(e){return i.fromString(e,!0,16)}const c=s("c3a5c85c97cb3127"),u=s("b492b66fbe98f273"),l=s("9ae16a3b2f90404f");function d(e){return e.xor(e.shru(47))}function p(e,t,n){const r=e.slice(t,t+n);return i.fromBytes(Array.from(r),!0,!0)}function h(e,t){return p(e,t,8)}function f(e,t){return p(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function g(e,t,n=s("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function b(e,t,n,r){return function(e,t,n,r,o,a){o=o.add(e),a=m(a.add(o).add(r),21);const i=o;return o=(o=o.add(t)).add(n),a=a.add(m(o,44)),[o.add(r),a.add(i)]}(h(e,t),h(e,t+8),h(e,t+16),h(e,t+24),n,r)}function y(e,t=e.length){const n=i.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=l.add(2*t),r=h(e,0).add(l),o=h(e,t-8);return g(m(o,37).mul(n).add(r),m(r,25).add(o).mul(n),n)}if(t>=4){const n=l.add(2*t);return g(f(e,0).shl(3).add(t),f(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return d(l.mul(n).xor(c.mul(r))).mul(l)}return l}(e,t):function(e,t=e.length){const n=l.add(2*t),r=h(e,0).mul(u),o=h(e,8),a=h(e,t-8).mul(n),i=h(e,t-16).mul(l);return g(m(r.add(o),43).add(m(a,30)).add(i),r.add(m(o.add(l),18)).add(a),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=l.add(2*t),r=h(e,0).mul(l),o=h(e,8),a=h(e,t-8).mul(n),i=h(e,t-16).mul(l),s=m(r.add(o),43).add(m(a,30)).add(i),c=g(s,r.add(m(o.add(l),18)).add(a),n),u=h(e,16).mul(n),d=h(e,24),p=s.add(h(e,t-32)).mul(n),f=c.add(h(e,t-24)).mul(n);return g(m(u.add(d),43).add(m(p,30)).add(f),u.add(m(d.add(r),18)).add(p),n)}(e,t);let r=n,o=n.mul(u).add(113),a=d(o.mul(l).add(113)).mul(l),s=[i.UZERO,i.UZERO],p=[i.UZERO,i.UZERO];r=r.mul(l).add(h(e,0));let y=0;const A=64*(t-1>>6),v=A+(t-1&63)-63;do{r=m(r.add(o).add(s[0]).add(h(e,y+8)),37).mul(u),o=m(o.add(s[1]).add(h(e,y+48)),42).mul(u),r=r.xor(p[1]),o=o.add(s[0]).add(h(e,y+40)),a=m(a.add(p[0]),33).mul(u),s=b(e,y,s[1].mul(u),r.add(p[0])),p=b(e,y+32,a.add(p[1]),o.add(h(e,y+16))),[a,r]=[r,a],y+=64}while(y!==A);const x=u.add(a.and(255).shl(1));return y=v,p[0]=p[0].add(t-1&63),s[0]=s[0].add(p[0]),p[0]=p[0].add(s[0]),r=m(r.add(o).add(s[0]).add(h(e,y+8)),37).mul(x),o=m(o.add(s[1]).add(h(e,y+48)),42).mul(x),r=r.xor(p[1].mul(9)),o=o.add(s[0].mul(9).add(h(e,y+40))),a=m(a.add(p[0]),33).mul(x),s=b(e,y,s[1].mul(x),r.add(p[0])),p=b(e,y+32,a.add(p[1]),o.add(h(e,y+16))),[a,r]=[r,a],g(g(s[0],p[0],x).add(d(o).mul(c)).add(a),g(s[1],p[1],x).add(r),x)}function A(e,t){return"string"===t?w(e):v([e],t)}function v(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=o.m(e)),Object(r.c)().getBool("DEBUG")&&o.h(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function x(){return Object(r.c)().platform.now()}function k(e,t){return Object(r.c)().platform.fetch(e,t)}function w(e,t="utf-8"){return t=t||"utf-8",Object(r.c)().platform.encode(e,t)}function C(e,t="utf-8"){return t=t||"utf-8",Object(r.c)().platform.decode(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({mul_:function(e,t){let n=Object(i.a)(e,"a","mul"),s=Object(i.a)(t,"b","mul");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.Wb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({add_:function(e,t){let n=Object(i.a)(e,"a","add"),s=Object(i.a)(t,"b","add");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.d,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({sub_:function(e,t){let n=Object(i.a)(e,"a","sub"),s=Object(i.a)(t,"b","sub");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.Yc,c)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(8),o=n(45);const a="tfjsflags";class i{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=s,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&o.b(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];o.b(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Object(r.x)(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(a in e){e.tfjsflags.split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)}))}}}function s(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function c(){return u}let u=null;function l(e){u=e}},function(e,t,n){"use strict";n.r(t),n.d(t,"makeTypesMatch",(function(){return i})),n.d(t,"assertTypesMatch",(function(){return s})),n.d(t,"isTensorInList",(function(){return c})),n.d(t,"getTensorsInContainer",(function(){return u}));var r=n(20),o=n(74),a=n(8);function i(e,t){if(e.dtype===t.dtype)return[e,t];const n=Object(o.c)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){Object(a.b)(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}function c(e,t){return t.some((t=>t.id===e.id))}function u(e){const t=[];return l(e,t,new Set),t}function l(e,t,n){if(null==e)return;if(e instanceof r.a)return void t.push(e);if(o=e,!Array.isArray(o)&&"object"!=typeof o)return;var o;const a=e;for(const e in a){const r=a[e];n.has(r)||(n.add(r),l(r,t,n))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(8),o=n(43);function a(e,t){if((Object(r.A)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Object(r.A)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Object(o.a)(e,[],[],t)}},function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return f})),n.d(t,"t",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"l",(function(){return b})),n.d(t,"u",(function(){return y})),n.d(t,"r",(function(){return A})),n.d(t,"o",(function(){return v})),n.d(t,"k",(function(){return x})),n.d(t,"q",(function(){return k})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return C})),n.d(t,"p",(function(){return S})),n.d(t,"a",(function(){return O})),n.d(t,"s",(function(){return E}));var r=n(5),o=n(14),a=n(20),i=n(15);function s(){Object(o.c)().set("PROD",!0)}function c(){Object(o.c)().set("DEBUG",!0)}function u(){Object(o.c)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){Object(o.c)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d(){r.a.disposeVariables()}function p(){return r.a}function h(){return r.a.memory()}function f(e){return r.a.profile(e)}function m(e,t){return r.a.tidy(e,t)}function g(e){Object(i.getTensorsInContainer)(e).forEach((e=>e.dispose()))}function b(e){return r.a.keep(e)}function y(e){return r.a.time(e)}function A(e){return r.a.setBackend(e)}function v(){return r.a.ready()}function x(){return r.a.backendName}function k(e){r.a.removeBackend(e)}function w(e){return r.a.findBackend(e)}function C(e){return r.a.findBackendFactory(e)}function S(e,t,n=1){return r.a.registerBackend(e,t,n)}function O(){return r.a.backend}function E(e,t){Object(o.c)().setPlatform(e,t)}Object(a.d)(l)},function(e,t,n){var r={util:n(35)};({}).toString(),e.exports=r,r.util.update(r,{VERSION:"2.1020.0",Signers:{},Protocol:{Json:n(160),Query:n(239),Rest:n(119),RestJson:n(241),RestXml:n(242)},XML:{Builder:n(322),Parser:null},JSON:{Builder:n(161),Parser:n(162)},Model:{Api:n(243),Operation:n(244),Shape:n(111),Paginator:n(245),ResourceWaiter:n(246)},apiLoader:n(327),EndpointCache:n(328).EndpointCache}),n(248),n(330),n(332),n(251),n(333),n(338),n(340),n(341),n(342),n(348),r.events=new r.SequentialExecutor,r.util.memoizedProperty(r,"endpointCache",(function(){return new r.EndpointCache(r.config.endpointCacheSize)}),!0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(124),c=n(4);const u=Object(c.b)({div_:function(e,t){let n=Object(i.a)(e,"a","div"),c=Object(i.a)(t,"b","div");if([n,c]=Object(a.makeTypesMatch)(n,c),"int32"===n.dtype&&"int32"===c.dtype)return Object(s.a)(n,c);const u={a:n,b:c};return r.a.runKernel(o.mc,u,{})}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return A}));var r=n(94),o=n(8);function a(e,t,n,r){const a=Object(o.j)(t),s=function(e,t,n,r){const a=Object(o.O)(t),s=r[r.length-1],c=new Array(s).fill(0),l=t.length,d="complex64"===n?u(e):e;if(l>1)for(let e=0;e<a/s;e++){const t=e*s;for(let e=0;e<s;e++)c[e]=Math.max(c[e],i(d[t+e],0,n).length)}return c}(e,t,n,a),l=t.length,d=c(e,t,n,a,s),p=["Tensor"];return r&&(p.push(`  dtype: ${n}`),p.push(`  rank: ${l}`),p.push(`  shape: [${t}]`),p.push("  values:")),p.push(d.map((e=>"    "+e)).join("\n")),p.join("\n")}function i(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:Object(o.z)(e)?`'${e}'`:"bool"===n?s(e):parseFloat(e.toFixed(7)).toString(),Object(o.L)(r,t)}function s(e){return 0===e?"false":"true"}function c(e,t,n,r,o,a=!0){const l="complex64"===n?2:1,d=t[0],p=t.length;if(0===p){if("complex64"===n){return[i(u(e)[0],0,n)]}return"bool"===n?[s(e[0])]:[e[0].toString()]}if(1===p){if(d>20){const t=3*l;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((d-3)*l,d*l));return"complex64"===n&&(r=u(r),a=u(a)),["["+r.map(((e,t)=>i(e,o[t],n))).join(", ")+", ..., "+a.map(((e,t)=>i(e,o[d-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?u(e):Array.from(e)).map(((e,t)=>i(e,o[t],n))).join(", ")+"]"]}const h=t.slice(1),f=r.slice(1),m=r[0]*l,g=[];if(d>20){for(let t=0;t<3;t++){const r=t*m,a=r+m;g.push(...c(e.slice(r,a),h,n,f,o,!1))}g.push("...");for(let t=d-3;t<d;t++){const r=t*m,a=r+m;g.push(...c(e.slice(r,a),h,n,f,o,t===d-1))}}else for(let t=0;t<d;t++){const r=t*m,a=r+m;g.push(...c(e.slice(r,a),h,n,f,o,t===d-1))}const b=2===p?",":"";g[0]="["+g[0]+b;for(let e=1;e<g.length-1;e++)g[e]=" "+g[e]+b;let y=",\n";for(let e=2;e<p;e++)y+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(a?"":y),g}function u(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var l=n(10);class d{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=o.O(e),null!=n){const e=n.length;o.b(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||o.n(t,this.size),this.strides=Object(o.j)(e)}set(e,...t){0===t.length&&(t=[0]),o.b(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return p().makeTensor(this.values,this.shape,this.dtype)}}let p=null,h=null,f=null;function m(e){p=e}function g(e){h=e}function b(e){f=e}class y{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=o.O(e),this.strides=Object(o.j)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return h.buffer(this.shape,this.dtype,e)}bufferSync(){return h.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Object(o.U)(this.shape,e,"complex64"===this.dtype)}arraySync(){return Object(o.U)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=p().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=p().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await p().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(p().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return h.print(this,e)}clone(){return this.throwIfDisposed(),h.clone(this)}toString(e=!1){return a(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),h.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),p().makeVariable(this,e,t,n)}}Object.defineProperty(y,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Object(r.a)("Tensor",(()=>y));class A extends y{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!o.a(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);p().disposeTensor(this),this.dataId=e.dataId,p().incRef(this,null)}dispose(){p().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(A,Symbol.hasInstance,{value:e=>e instanceof y&&null!=e.assign&&e.assign instanceof Function})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({cast_:function(e,t){const n=Object(a.a)(e,"x","cast");if(!i.B(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const s={x:n},c={dtype:t};return r.a.runKernel(o.x,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({matMul_:function(e,t,n=!1,s=!1){let c=Object(i.a)(e,"a","matMul"),u=Object(i.a)(t,"b","matMul");[c,u]=Object(a.makeTypesMatch)(c,u);const l={a:c,b:u},d={transposeA:n,transposeB:s};return r.a.runKernel(o.s,l,d)}})},function(e,t,n){"use strict";function r(e,t){const n=e.length,r=[];for(let o=0;o<n;o++){const a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function o(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function a(e,t){const n=[],r=Math.max(e.length,t.length);for(let o=0;o<r;o++){let r=e[e.length-o-1];null==r&&(r=1);let a=t[t.length-o-1];if(null==a&&(a=1),1===r)n.unshift(a);else if(1===a)n.unshift(r);else{if(r!==a){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}n.unshift(r)}}return n}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({slice_:function(e,t,n){const i=Object(a.a)(e,"x","slice","string_or_numeric");if(0===i.rank)throw new Error("Slicing scalar is not possible");const s={x:i},c={begin:t,size:n};return r.a.runKernel(o.Gc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(21),s=n(4);const c=Object(s.b)({sum_:function(e,t=null,n=!1){let s=Object(a.a)(e,"x","sum");"bool"===s.dtype&&(s=Object(i.a)(s,"int32"));const c={x:s},u={axis:t,keepDims:n};return r.a.runKernel(o.Zc,c,u)}})},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__26__},function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var d=s(l),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function h(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,m=0;function g(e,t){var n,r,o;if(t.singleton){var a=m++;n=f||(f=u(t)),r=p.bind(null,n,a,!1),o=p.bind(null,n,a,!0)}else n=u(t),r=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);i[o].references--}for(var a=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=a}}}},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var t=r(e,4),n=t[1],o=t[3];if(!o)return n;if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),s="/*# ".concat(i," */"),c=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(c).concat([s]).join("\n")}return[n].join("\n")}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return y}));var r=n(48),o=n(63),a=n(8),i=n(117);async function s(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],s=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${s.dtype}`);const c={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let o=0;for(let e=0;e<t.length;e++){const n=t[e],a=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(a,o),o+=4,r.set(n,o),o+=n.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(c.group=t),n.push(c)}return{data:u(await Promise.all(r)),specs:n}}function c(e,t){const n={};let s,c=0;for(const u of t){const t=u.name,l=u.dtype,d=u.shape,p=Object(a.O)(d);let h;if("quantization"in u){const n=u.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${u.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${u.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==l)throw new Error(`Weight ${u.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${l}.`)}const r=i.a[n.dtype],o=e.slice(c,c+p*r),a="uint8"===n.dtype?new Uint8Array(o):new Uint16Array(o);if("float32"===l)if("uint8"===n.dtype||"uint16"===n.dtype){h=new Float32Array(a.length);for(let e=0;e<a.length;e++){const t=a[e];h[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===s&&(s=A()),h=s(a)}else{if("int32"!==l)throw new Error(`Unsupported dtype in weight '${t}': ${l}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);h=new Int32Array(a.length);for(let e=0;e<a.length;e++){const t=a[e];h[e]=Math.round(t*n.scale+n.min)}}c+=p*r}else if("string"===l){const t=Object(a.O)(u.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(c,c+4))[0];c+=4;const n=new Uint8Array(e.slice(c,c+t));h.push(n),c+=t}}else{const a=i.a[l],s=e.slice(c,c+p*a);if("float32"===l)h=new Float32Array(s);else if("int32"===l)h=new Int32Array(s);else if("bool"===l)h=new Uint8Array(s);else{if("complex64"!==l)throw new Error(`Unsupported dtype in weight '${t}': ${l}`);{h=new Float32Array(s);const e=new Float32Array(h.length/2),a=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],a[t]=h[2*t+1];const i=Object(o.a)(e,d,"float32"),c=Object(o.a)(a,d,"float32");n[t]=Object(r.a)(i,c),i.dispose(),c.dispose()}}c+=p*a}"complex64"!==l&&(n[t]=Object(o.a)(h,d,l))}return n}function u(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const l=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function d(t){return l?e.byteLength(t):new Blob([t]).size}function p(t){if(l)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,t=n.length;e<t;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function h(t){if(l){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function f(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function m(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function g(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function b(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,o]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=o}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function y(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:d(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:d(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function A(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const o=new ArrayBuffer(4*r.length),a=new Uint32Array(o);for(let o=0;o<r.length;o++){const i=r[o],s=e[n[i>>10]+(1023&i)]+t[i>>10];a[o]=s}return new Float32Array(o)}}}).call(this,n(84).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(5),o=n(20),a=n(3),i=n(8);function s(e){return i.b(i.u(e),(()=>"The f passed in grad(f) must be a function")),(t,n)=>{const o=Object(a.a)(t,"x","tf.grad","string_or_numeric"),s=null!=n?Object(a.a)(n,"dy","tf.grad"):null;return r.a.tidy((()=>{const{value:t,grads:n}=r.a.gradients((()=>e(o)),[o],s);return null!=s&&i.e(t.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(n),n[0]}))}}function c(e){return i.b(i.u(e),(()=>"The f passed in grads(f) must be a function")),(t,n)=>{i.b(Array.isArray(t),(()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"));const o=Object(a.b)(t,"args","tf.grads","string_or_numeric"),s=null!=n?Object(a.a)(n,"dy","tf.grads"):null;return r.a.tidy((()=>{const{value:t,grads:n}=r.a.gradients((()=>e(...o)),o,s);return null!=s&&i.e(t.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(n),n}))}}function u(e){return i.b(i.u(e),(()=>"The f passed in valueAndGrad(f) must be a function")),(t,n)=>{i.b(t instanceof o.a,(()=>"The x passed in valueAndGrad(f)(x) must be a tensor")),i.b(null==n||n instanceof o.a,(()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"));const{grads:a,value:s}=r.a.gradients((()=>e(t)),[t],n);return h(a),{grad:a[0],value:s}}}function l(e){return i.b(i.u(e),(()=>"The f passed in valueAndGrads(f) must be a function")),(t,n)=>{i.b(Array.isArray(t)&&t.every((e=>e instanceof o.a)),(()=>"The args passed in valueAndGrads(f)(args) must be array of tensors")),i.b(null==n||n instanceof o.a,(()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"));const a=r.a.gradients((()=>e(...t)),t,n);return null!=n&&i.e(a.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(a.grads),a}}function d(e,t){i.b(i.u(e),(()=>"The f passed in variableGrads(f) must be a function")),i.b(null==t||Array.isArray(t)&&t.every((e=>e instanceof o.c)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in r.a.registeredVariables)t.push(r.a.registeredVariables[e])}const a=n?t.filter((e=>!e.trainable)):null,s=t.length;t=t.filter((e=>e.trainable)),i.b(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`));const{value:c,grads:u}=r.a.gradients(e,t,null,!0);i.b(u.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),i.b(0===c.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${c.rank} tensor`));const l={};return t.forEach(((e,t)=>{null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((e=>l[e.name]=null)),{value:c,grads:l}}function p(e){return r.a.customGrad(e)}function h(e){if(e.filter((e=>null==e)).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(53),c=n(4);const u=Object(c.b)({concat_:function(e,t=0){Object(i.b)(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Object(a.b)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return Object(s.a)(n[0]);const c=n,u={axis:t};return r.a.runKernel(o.C,c,u)}})},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},function(e,t,n){"use strict";function r(e,t,n,r,o="NHWC",a){return i(e,[...t,e[3]],n,a,r,null,null,m(o))}function o(e,t,n,r,o,a,s="channelsLast"){const[c,l]=u(t);let d;if("channelsLast"===s)d=[c,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);d=[c,l,e[1],e[1]]}return i(e,d,n,r,o,a,!1,s)}function a(e,t,n,r,o,a,i="NDHWC"){const[c,u,d]=l(t);let p,h;if("NDHWC"===i)h="channelsLast",p=[c,u,d,e[4],e[4]];else{if("NCDHW"!==i)throw new Error(`Unknown dataFormat ${i}`);h="channelsFirst",p=[c,u,d,e[1],e[1]]}return s(e,p,n,r,o,!1,h,a)}function i(e,t,n,r,o,a,i=!1,s="channelsLast"){let[l,h,f,m]=[-1,-1,-1,-1];if("channelsLast"===s)[l,h,f,m]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,m,h,f]=e}const[g,b,,y]=t,[A,v]=u(n),[x,k]=u(r),w=d(g,x),C=d(b,k),{padInfo:S,outHeight:O,outWidth:E}=function(e,t,n,r,o,a,i,s,u){let l,d,h;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=c(e,t,n));const a=e[0],i=e[1],s=p((a-t+2*r)/n+1,o),u=p((i-t+2*r)/n+1,o);return[s,u]}([t,n],a,r,e,s);d=o[0],h=o[1]}else if("same"===e){d=Math.ceil(t/r),h=Math.ceil(n/o);const e=Math.max(0,(d-1)*r+a-t),s=Math.max(0,(h-1)*o+i-n),c=Math.floor(e/2),u=e-c,p=Math.floor(s/2);l={top:c,bottom:u,left:p,right:s-p,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-a+1)/r),h=Math.ceil((n-i+1)/o);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const c="channelsLast"===u?e[1][0]:e[2][0],f="channelsLast"===u?e[1][1]:e[2][1],m="channelsLast"===u?e[2][0]:e[3][0],g="channelsLast"===u?e[2][1]:e[3][1];l={top:c,bottom:f,left:m,right:g,type:0===c&&0===f&&0===m&&0===g?"VALID":"EXPLICIT"},d=p((t-a+c+f)/r+1,s),h=p((n-i+m+g)/o+1,s)}}return{padInfo:l,outHeight:d,outWidth:h}}(o,h,f,A,v,w,C,a,s),I=i?y*m:y;let T;return"channelsFirst"===s?T=[l,I,O,E]:"channelsLast"===s&&(T=[l,O,E,I]),{batchSize:l,dataFormat:s,inHeight:h,inWidth:f,inChannels:m,outHeight:O,outWidth:E,outChannels:I,padInfo:S,strideHeight:A,strideWidth:v,filterHeight:g,filterWidth:b,effectiveFilterHeight:w,effectiveFilterWidth:C,dilationHeight:x,dilationWidth:k,inShape:e,outShape:T,filterShape:t}}function s(e,t,n,r,o,a=!1,i="channelsLast",s){let[u,h,f,m,g]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[u,h,f,m,g]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[u,g,h,f,m]=e}const[b,y,A,,v]=t,[x,k,w]=l(n),[C,S,O]=l(r),E=d(b,C),I=d(y,S),T=d(A,O),{padInfo:N,outDepth:R,outHeight:j,outWidth:B}=function(e,t,n,r,o,a,i,s,u,l,d){let h,f,m,g;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,o,a){null==o&&(o=c(e,t,r));const i=e[0],s=e[1],u=e[2],l=p((i-t+2*o)/r+1,a),d=p((s-t+2*o)/r+1,a),h=p((u-t+2*o)/r+1,a);return[l,d,h,n]}([t,n,r,1],s,1,o,e,d);f=a[0],m=a[1],g=a[2]}else if("same"===e){f=Math.ceil(t/o),m=Math.ceil(n/a),g=Math.ceil(r/i);const e=(f-1)*o+s-t,c=(m-1)*a+u-n,d=(g-1)*i+l-r,p=Math.floor(e/2),b=e-p,y=Math.floor(c/2),A=c-y,v=Math.floor(d/2);h={top:y,bottom:A,left:v,right:d-v,front:p,back:b,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/o),m=Math.ceil((n-u+1)/a),g=Math.ceil((r-l+1)/i)}return{padInfo:h,outDepth:f,outHeight:m,outWidth:g}}(o,h,f,m,x,k,w,E,I,T,s),_=a?v*g:v;let D;return"channelsFirst"===i?D=[u,_,R,j,B]:"channelsLast"===i&&(D=[u,R,j,B,_]),{batchSize:u,dataFormat:i,inDepth:h,inHeight:f,inWidth:m,inChannels:g,outDepth:R,outHeight:j,outWidth:B,outChannels:_,padInfo:N,strideDepth:x,strideHeight:k,strideWidth:w,filterDepth:b,filterHeight:y,filterWidth:A,effectiveFilterDepth:E,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:C,dilationHeight:S,dilationWidth:O,inShape:e,outShape:D,filterShape:t}}function c(e,t,n,r=1){const o=d(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function u(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function l(e){return"number"==typeof e?[e,e,e]:e}function d(e,t){return t<=1?e:e+(e-1)*(t-1)}function p(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function h(e){const[t,n,r]=u(e);return 1===t&&1===n&&1===r}function f(e,t){return h(e)||h(t)}function m(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return m}))},function(e,t,n){(function(t,r){var o,a={environment:"nodejs",engine:function(){if(a.isBrowser()&&"undefined"!=typeof navigator)return navigator.userAgent;var e=t.platform+"/"+t.version;return t.env.AWS_EXECUTION_ENV&&(e+=" exec-env/"+t.env.AWS_EXECUTION_ENV),e},userAgent:function(){var e=a.environment,t="aws-sdk-"+e+"/"+n(18).VERSION;return"nodejs"===e&&(t+=" "+a.engine()),t},uriEscape:function(e){var t=encodeURIComponent(e);return t=(t=t.replace(/[^A-Za-z0-9_.~\-%]+/g,escape)).replace(/[*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},uriEscapePath:function(e){var t=[];return a.arrayEach(e.split("/"),(function(e){t.push(a.uriEscape(e))})),t.join("/")},urlParse:function(e){return a.url.parse(e)},urlFormat:function(e){return a.url.format(e)},queryStringParse:function(e){return a.querystring.parse(e)},queryParamsToString:function(e){var t=[],n=a.uriEscape,r=Object.keys(e).sort();return a.arrayEach(r,(function(r){var o=e[r],i=n(r),s=i+"=";if(Array.isArray(o)){var c=[];a.arrayEach(o,(function(e){c.push(n(e))})),s=i+"="+c.sort().join("&"+i+"=")}else null!=o&&(s=i+"="+n(o));t.push(s)})),t.join("&")},readFileSync:function(e){return a.isBrowser()?null:n(166).readFileSync(e,"utf-8")},base64:{encode:function(e){if("number"==typeof e)throw a.error(new Error("Cannot base64 encode number "+e));return null==e?e:a.buffer.toBuffer(e).toString("base64")},decode:function(e){if("number"==typeof e)throw a.error(new Error("Cannot base64 decode number "+e));return null==e?e:a.buffer.toBuffer(e,"base64")}},buffer:{toBuffer:function(e,t){return"function"==typeof a.Buffer.from&&a.Buffer.from!==Uint8Array.from?a.Buffer.from(e,t):new a.Buffer(e,t)},alloc:function(e,t,n){if("number"!=typeof e)throw new Error("size passed to alloc must be a number.");if("function"==typeof a.Buffer.alloc)return a.Buffer.alloc(e,t,n);var r=new a.Buffer(e);return void 0!==t&&"function"==typeof r.fill&&r.fill(t,void 0,void 0,n),r},toStream:function(e){a.Buffer.isBuffer(e)||(e=a.buffer.toBuffer(e));var t=new a.stream.Readable,n=0;return t._read=function(r){if(n>=e.length)return t.push(null);var o=n+r;o>e.length&&(o=e.length),t.push(e.slice(n,o)),n=o},t},concat:function(e){var t,n,r=0,o=0;for(n=0;n<e.length;n++)r+=e[n].length;for(t=a.buffer.alloc(r),n=0;n<e.length;n++)e[n].copy(t,o),o+=e[n].length;return t}},string:{byteLength:function(e){if(null==e)return 0;if("string"==typeof e&&(e=a.buffer.toBuffer(e)),"number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"==typeof e.path)return n(166).lstatSync(e.path).size;throw a.error(new Error("Cannot determine length of "+e),{object:e})},upperFirst:function(e){return e[0].toUpperCase()+e.substr(1)},lowerFirst:function(e){return e[0].toLowerCase()+e.substr(1)}},ini:{parse:function(e){var t,n={};return a.arrayEach(e.split(/\r?\n/),(function(e){var r=(e=e.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)\]\s*$/);if(r){if("__proto__"===(t=r[1])||"__proto__"===t.split(/\s/)[1])throw a.error(new Error("Cannot load profile name '"+t+"' from shared ini file."))}else if(t){var o=e.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);o&&(n[t]=n[t]||{},n[t][o[1]]=o[2])}})),n}},fn:{noop:function(){},callback:function(e){if(e)throw e},makeAsync:function(e,t){return t&&t<=e.length?e:function(){var t=Array.prototype.slice.call(arguments,0),n=t.pop(),r=e.apply(null,t);n(r)}}},date:{getDate:function(){return o||(o=n(18)),o.config.systemClockOffset?new Date((new Date).getTime()+o.config.systemClockOffset):new Date},iso8601:function(e){return void 0===e&&(e=a.date.getDate()),e.toISOString().replace(/\.\d{3}Z$/,"Z")},rfc822:function(e){return void 0===e&&(e=a.date.getDate()),e.toUTCString()},unixTimestamp:function(e){return void 0===e&&(e=a.date.getDate()),e.getTime()/1e3},from:function(e){return"number"==typeof e?new Date(1e3*e):new Date(e)},format:function(e,t){return t||(t="iso8601"),a.date[t](a.date.from(e))},parseTimestamp:function(e){if("number"==typeof e)return new Date(1e3*e);if(e.match(/^\d+$/))return new Date(1e3*e);if(e.match(/^\d{4}/))return new Date(e);if(e.match(/^\w{3},/))return new Date(e);throw a.error(new Error("unhandled timestamp format: "+e),{code:"TimestampParserError"})}},crypto:{crc32Table:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],crc32:function(e){var t=a.crypto.crc32Table,n=-1;"string"==typeof e&&(e=a.buffer.toBuffer(e));for(var r=0;r<e.length;r++){n=n>>>8^t[255&(n^e.readUInt8(r))]}return(-1^n)>>>0},hmac:function(e,t,n,r){return n||(n="binary"),"buffer"===n&&(n=void 0),r||(r="sha256"),"string"==typeof t&&(t=a.buffer.toBuffer(t)),a.crypto.lib.createHmac(r,e).update(t).digest(n)},md5:function(e,t,n){return a.crypto.hash("md5",e,t,n)},sha256:function(e,t,n){return a.crypto.hash("sha256",e,t,n)},hash:function(e,t,n,r){var o=a.crypto.createHash(e);n||(n="binary"),"buffer"===n&&(n=void 0),"string"==typeof t&&(t=a.buffer.toBuffer(t));var i=a.arraySliceFn(t),s=a.Buffer.isBuffer(t);if(a.isBrowser()&&"undefined"!=typeof ArrayBuffer&&t&&t.buffer instanceof ArrayBuffer&&(s=!0),r&&"object"==typeof t&&"function"==typeof t.on&&!s)t.on("data",(function(e){o.update(e)})),t.on("error",(function(e){r(e)})),t.on("end",(function(){r(null,o.digest(n))}));else{if(!r||!i||s||"undefined"==typeof FileReader){a.isBrowser()&&"object"==typeof t&&!s&&(t=new a.Buffer(new Uint8Array(t)));var c=o.update(t).digest(n);return r&&r(null,c),c}var u=0,l=new FileReader;l.onerror=function(){r(new Error("Failed to read data."))},l.onload=function(){var e=new a.Buffer(new Uint8Array(l.result));o.update(e),u+=e.length,l._continueReading()},l._continueReading=function(){if(u>=t.size)r(null,o.digest(n));else{var e=u+524288;e>t.size&&(e=t.size),l.readAsArrayBuffer(i.call(t,u,e))}},l._continueReading()}},toHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push(("0"+e.charCodeAt(n).toString(16)).substr(-2,2));return t.join("")},createHash:function(e){return a.crypto.lib.createHash(e)}},abort:{},each:function(e,t){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))if(t.call(this,n,e[n])===a.abort)break}},arrayEach:function(e,t){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))if(t.call(this,e[n],parseInt(n,10))===a.abort)break}},update:function(e,t){return a.each(t,(function(t,n){e[t]=n})),e},merge:function(e,t){return a.update(a.copy(e),t)},copy:function(e){if(null==e)return e;var t={};for(var n in e)t[n]=e[n];return t},isEmpty:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},arraySliceFn:function(e){var t=e.slice||e.webkitSlice||e.mozSlice;return"function"==typeof t?t:null},isType:function(e,t){return"function"==typeof t&&(t=a.typeName(t)),Object.prototype.toString.call(e)==="[object "+t+"]"},typeName:function(e){if(Object.prototype.hasOwnProperty.call(e,"name"))return e.name;var t=e.toString(),n=t.match(/^\s*function (.+)\(/);return n?n[1]:t},error:function(e,t){var n=null;return"string"==typeof e.message&&""!==e.message&&("string"==typeof t||t&&t.message)&&((n=a.copy(e)).message=e.message),e.message=e.message||null,"string"==typeof t?e.message=t:"object"==typeof t&&null!==t&&(a.update(e,t),t.message&&(e.message=t.message),(t.code||t.name)&&(e.code=t.code||t.name),t.stack&&(e.stack=t.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=String(t&&t.name||e.name||e.code||"Error"),e.time=new Date,n&&(e.originalError=n),e},inherit:function(e,t){var n=null;if(void 0===t)t=e,e=Object,n={};else{var r=function(){};r.prototype=e.prototype,n=new r}return t.constructor===Object&&(t.constructor=function(){if(e!==Object)return e.apply(this,arguments)}),t.constructor.prototype=n,a.update(t.constructor.prototype,t),t.constructor.__super__=e,t.constructor},mixin:function(){for(var e=arguments[0],t=1;t<arguments.length;t++)for(var n in arguments[t].prototype){var r=arguments[t].prototype[n];"constructor"!==n&&(e.prototype[n]=r)}return e},hideProperties:function(e,t){"function"==typeof Object.defineProperty&&a.arrayEach(t,(function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0})}))},property:function(e,t,n,r,o){var a={configurable:!0,enumerable:void 0===r||r};"function"!=typeof n||o?(a.value=n,a.writable=!0):a.get=n,Object.defineProperty(e,t,a)},memoizedProperty:function(e,t,n,r){var o=null;a.property(e,t,(function(){return null===o&&(o=n()),o}),r)},hoistPayloadMember:function(e){var t=e.request,n=t.operation,r=t.service.api.operations[n],o=r.output;if(o.payload&&!r.hasEventOutput){var i=o.members[o.payload],s=e.data[o.payload];"structure"===i.type&&a.each(s,(function(t,n){a.property(e.data,t,n,!1)}))}},computeSha256:function(e,t){if(a.isNode()){var r=a.stream.Stream,o=n(166);if("function"==typeof r&&e instanceof r){if("string"!=typeof e.path)return t(new Error("Non-file stream objects are not supported with SigV4"));var i={};"number"==typeof e.start&&(i.start=e.start),"number"==typeof e.end&&(i.end=e.end),e=o.createReadStream(e.path,i)}}a.crypto.sha256(e,"hex",(function(e,n){e?t(e):t(null,n)}))},isClockSkewed:function(e){if(e)return a.property(o.config,"isClockSkewed",Math.abs((new Date).getTime()-e)>=3e5,!1),o.config.isClockSkewed},applyClockOffset:function(e){e&&(o.config.systemClockOffset=e-(new Date).getTime())},extractRequestId:function(e){var t=e.httpResponse.headers["x-amz-request-id"]||e.httpResponse.headers["x-amzn-requestid"];!t&&e.data&&e.data.ResponseMetadata&&(t=e.data.ResponseMetadata.RequestId),t&&(e.requestId=t),e.error&&(e.error.requestId=t)},addPromises:function(e,t){var n=!1;void 0===t&&o&&o.config&&(t=o.config.getPromisesDependency()),void 0===t&&"undefined"!=typeof Promise&&(t=Promise),"function"!=typeof t&&(n=!0),Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var a=e[r];n?a.deletePromisesFromClass&&a.deletePromisesFromClass():a.addPromisesToClass&&a.addPromisesToClass(t)}},promisifyMethod:function(e,t){return function(){var n=this,r=Array.prototype.slice.call(arguments);return new t((function(t,o){r.push((function(e,n){e?o(e):t(n)})),n[e].apply(n,r)}))}},isDualstackAvailable:function(e){if(!e)return!1;var t=n(247);return"string"!=typeof e&&(e=e.serviceIdentifier),!("string"!=typeof e||!t.hasOwnProperty(e))&&!!t[e].dualstackAvailable},calculateRetryDelay:function(e,t,n){t||(t={});var r=t.customBackoff||null;if("function"==typeof r)return r(e,n);var o="number"==typeof t.base?t.base:100;return Math.random()*(Math.pow(2,e)*o)},handleRequestWithRetries:function(e,t,n){t||(t={});var r=o.HttpClient.getInstance(),i=t.httpOptions||{},s=0,c=function(e){var r=t.maxRetries||0;if(e&&"TimeoutError"===e.code&&(e.retryable=!0),e&&e.retryable&&s<r){var o=a.calculateRetryDelay(s,t.retryDelayOptions,e);if(o>=0)return s++,void setTimeout(u,o+(e.retryAfter||0))}n(e)},u=function(){var t="";r.handleRequest(e,i,(function(e){e.on("data",(function(e){t+=e.toString()})),e.on("end",(function(){var r=e.statusCode;if(r<300)n(null,t);else{var o=1e3*parseInt(e.headers["retry-after"],10)||0,i=a.error(new Error,{statusCode:r,retryable:r>=500||429===r});o&&i.retryable&&(i.retryAfter=o),c(i)}}))}),c)};o.util.defer(u)},uuid:{v4:function(){return n(349).v4()}},convertPayloadToString:function(e){var t=e.request,n=t.operation,r=t.service.api.operations[n].output||{};r.payload&&e.data[r.payload]&&(e.data[r.payload]=e.data[r.payload].toString())},defer:function(e){"object"==typeof t&&"function"==typeof t.nextTick?t.nextTick(e):"function"==typeof r?r(e):setTimeout(e,0)},getRequestPayloadShape:function(e){var t=e.service.api.operations;if(t){var n=(t||{})[e.operation];if(n&&n.input&&n.input.payload)return n.input.members[n.input.payload]}},getProfilesFromSharedConfig:function(e,n){var r={},o={};if(t.env[a.configOptInEnv])o=e.loadFrom({isConfig:!0,filename:t.env[a.sharedConfigFileEnv]});var i={};try{i=e.loadFrom({filename:n||t.env[a.configOptInEnv]&&t.env[a.sharedCredentialsFileEnv]})}catch(e){if(!t.env[a.configOptInEnv])throw e}for(var s=0,c=Object.keys(o);s<c.length;s++)r[c[s]]=u(r[c[s]]||{},o[c[s]]);for(s=0,c=Object.keys(i);s<c.length;s++)r[c[s]]=u(r[c[s]]||{},i[c[s]]);return r;function u(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++)e[r[n]]=t[r[n]];return e}},ARN:{validate:function(e){return e&&0===e.indexOf("arn:")&&e.split(":").length>=6},parse:function(e){var t=e.split(":");return{partition:t[1],service:t[2],region:t[3],accountId:t[4],resource:t.slice(5).join(":")}},build:function(e){if(void 0===e.service||void 0===e.region||void 0===e.accountId||void 0===e.resource)throw a.error(new Error("Input ARN object is invalid"));return"arn:"+(e.partition||"aws")+":"+e.service+":"+e.region+":"+e.accountId+":"+e.resource}},defaultProfile:"default",configOptInEnv:"AWS_SDK_LOAD_CONFIG",sharedCredentialsFileEnv:"AWS_SHARED_CREDENTIALS_FILE",sharedConfigFileEnv:"AWS_CONFIG_FILE",imdsDisabledEnv:"AWS_EC2_METADATA_DISABLED"};e.exports=a}).call(this,n(51),n(238).setImmediate)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({zerosLike_:function(e){const t={x:Object(a.a)(e,"x","zerosLike")};return r.a.runKernel(o.jd,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(3),a=n(4);const i=Object(a.b)({square_:function(e){const t=Object(o.a)(e,"x","square");return r.a.runKernel("Square",{x:t},{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({abs_:function(e){const t=Object(a.a)(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return r.a.runKernel(o.B,e)}{const e={x:t};return r.a.runKernel(o.a,e)}}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return b}));var r=n(23),o=n(130),a=n(134),i=n(11),s=n(143),c=n(78),u=n(145),l=n(9),d=n(64),p=n(149),h=n(25);function f(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Object(i.a)(e,Object(p.a)(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function m(e,t){let n=t;const o=r.c(e.shape,t.shape);return o.length>0&&(n=Object(h.a)(n,o)),Object(l.a)(n,e.shape)}function g(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Object(c.a)(e);if("elu"===t)return Object(o.a)(e);if("relu6"===t)return Object(u.a)(e);if("prelu"===t)return Object(s.a)(e,n);if("leakyrelu"===t)return Object(a.a)(e,r);if("sigmoid"===t)return Object(d.a)(e);throw new Error(`Unknown fused activation ${t}.`)}const b=(e,t)=>!(e>0)||"linear"===t},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(20),o=n(8);function a(e,t="float32",n){return t=t||"float32",o.c(e),new r.b(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(8),a=n(43);function i(e,t){Object(o.d)(e);const n=Object(r.c)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Object(a.a)(e,null,n,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(8),a=n(10);function i(e,t,n,i){if(null==i&&(i=Object(o.r)(e)),"complex64"===i)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(o.A)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Object(o.c)(t);const e=Object(o.O)(t),r=Object(o.O)(n);Object(o.b)(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],a=e!==n.length-1||r!==Object(o.O)(t.slice(e));Object(o.b)(n[e]===t[e]||!a,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return Object(o.A)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==i?Object(a.toTypedArray)(e,i):Object(o.m)(e,[],!0),r.a.makeTensor(e,t,i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({neg_:function(e){const t={x:Object(a.a)(e,"x","neg")};return r.a.runKernel(o.Xb,t)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(14);function o(...e){Object(r.c)().getBool("IS_TEST")||Object(r.c)().getBool("PROD")||console.warn(...e)}function a(...e){Object(r.c)().getBool("IS_TEST")||Object(r.c)().getBool("PROD")||console.log(...e)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O})),n.d(t,"i",(function(){return I})),n.d(t,"c",(function(){return T})),n.d(t,"f",(function(){return N})),n.d(t,"e",(function(){return B})),n.d(t,"d",(function(){return _})),n.d(t,"k",(function(){return M})),n.d(t,"g",(function(){return $})),n.d(t,"h",(function(){return P})),n.d(t,"j",(function(){return L})),n.d(t,"b",(function(){return F}));var r=n(0),o=n(66),a=n(87),i=n(2),s=n(275),c=n(276),u=n(277),l=n(278),d=n(279),p=n(280),h=n(281),f=n(282),m=n(283),g=n(284),b=n(285),y=n(286),A=n(287),v=n(288),x=n(289),k=n(290),w=n(291),C=n(292),S=n(293);class O{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[s,c,u,l,d,p,h,f,m,g,b,y,A,v,x,k,w,C,S].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],o=[],a=[],s=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?o.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let c=[];const u=[];let l={},d={};null!=t&&(l=this.mapSignatureEntries(t.inputs),d=this.mapSignatureEntries(t.outputs));const p=Object.keys(s);p.forEach((e=>{const t=s[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=Object(i.b)(e),a=s[r];if(null!=a.outputs){const e=a.outputs.indexOf(o);if(-1!==e){const o=`${r}:${e}`;t.inputNames[n]=o}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(d).length?p.forEach((e=>{const t=s[e];0===t.children.length&&u.push(t)})):Object.keys(d).forEach((e=>{const[t]=Object(i.b)(e),n=s[t];null!=n&&(n.signatureKey=d[e],u.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((e=>{const[t]=Object(i.b)(e),n=s[t];n&&(n.signatureKey=l[e],c.push(n))})):c=r;let h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const f={nodes:s,inputs:c,outputs:u,weights:o,placeholders:r,signature:t,functions:h};return a.length>0&&(f.initNodes=a),f}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=Object(a.a)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.substr(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let o;switch(n.type){case"string":o=I(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=I(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":o=P(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=P(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":o=N(e.attr,n.tfName,n.defaultValue||0),void 0===o&&n.tfDeprecatedName&&(o=N(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":o=$(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=$(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":o=T(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=T(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":o=F(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=F(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":o=M(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=M(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":o=L(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":o=B(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=B(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":o=_(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":o=j(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=j(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:o,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const o=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=Object(i.b)(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:R(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[o,,a]=Object(i.b)(e),s=r[o];if(null!=s.outputs){const e=s.outputs.indexOf(a);if(-1!==e){const r=`${o}:${e}`;t.inputNames[n]=r}}t.inputs.push(s),s.children.push(t)}))}));const s=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=Object(i.b)(s[e.name]),o=r[t];null!=o&&(o.defaultOutput=n,a.push(o))}));const c=this.mapArgsToSignature(e);return{nodes:r,inputs:o,outputs:a,weights:n,placeholders:[],signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function E(t,n){const o=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const n=Object(r.env)().global;if(void 0!==n.atob)return n.atob(t);if(void 0!==e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?o:o.toLowerCase()}function I(e,t,n,r=!1){const o=e[t];return null!=o?E(o.s,r):n}function T(e,t,n){const r=e[t];return r?r.b:n}function N(e,t,n){const r=e[t]||{},o=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof o?o:parseInt(o,10)}function R(e){switch("string"==typeof e&&(e=o.a[e]),e){case o.a.DT_FLOAT:return"float32";case o.a.DT_INT32:case o.a.DT_INT64:case o.a.DT_INT8:case o.a.DT_UINT8:return"int32";case o.a.DT_BOOL:return"bool";case o.a.DT_DOUBLE:return"float32";case o.a.DT_STRING:return"string";default:return null}}function j(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function B(e,t,n){const r=e[t];return r&&r.type?R(r.type):n}function _(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>R(e))):n}function D(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function M(e,t,n){const r=e[t];return r&&r.shape?D(r.shape):n}function $(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function P(e,t,n,r=!1){const o=e[t];return o&&o.list&&o.list.s?o.list.s.map((e=>E(e,r))):n}function L(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>D(e))):n}function F(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n(84).Buffer)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({complex_:function(e,t){const n=Object(a.a)(e,"real","complex"),s=Object(a.a)(t,"imag","complex");i.e(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const c={real:n,imag:s};return r.a.runKernel(o.A,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({reverse_:function(e,t){const n={x:Object(a.a)(e,"x","reverse")},i={dims:t};return r.a.runKernel(o.vc,n,i)}})},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||l||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({clone_:function(e){const t={x:Object(a.a)(e,"x","clone","string_or_numeric")};return r.a.runKernel(o.sb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({sqrt_:function(e){const t={x:Object(a.a)(e,"x","sqrt","float32")};return r.a.runKernel(o.Qc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({exp_:function(e){const t={x:Object(a.a)(e,"x","exp")};return r.a.runKernel(o.bb,t)}})},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__56__},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(106),s=n(23),c=n(4);const u=Object(c.b)({where_:function(e,t,n){const c=Object(a.a)(t,"a","where"),u=Object(a.a)(n,"b","where"),l=Object(a.a)(e,"condition","where","bool"),d=Object(s.a)(Object(s.a)(l.shape,c.shape),u.shape),p={condition:Object(i.a)(l,d),t:Object(i.a)(c,d),e:Object(i.a)(u,d)};return r.a.runKernel(o.Ac,p)}})},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return m}));var r=n(14),o=n(94),a=n(45);const i=Object(o.a)("kernelRegistry",(()=>new Map)),s=Object(o.a)("gradRegistry",(()=>new Map));function c(e,t){const n=g(e,t);return i.get(n)}function u(e){return s.get(e)}function l(e){const t=i.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[a,i]=o,[s]=a.split("_");s===e&&n.push(i)}return n}function d(e){const{kernelName:t,backendName:n}=e,r=g(t,n);i.has(r)&&a.b(`The kernel '${t}' for backend '${n}' is already registered`),i.set(r,e)}function p(e){const{kernelName:t}=e;s.has(t)&&Object(r.c)().getBool("DEBUG")&&a.b(`Overriding the gradient for '${t}'`),s.set(t,e)}function h(e,t){const n=g(e,t);if(!i.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);i.delete(n)}function f(e){if(!s.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);s.delete(e)}function m(e,t){l(e).forEach((e=>{d(Object.assign({},e,{backendName:t}))}))}function g(e,t){return`${t}_${e}`}},function(e,t,n){"use strict";function r(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,a=0,i=!1;for(;r<o;){a=r+(o-r>>>1);const s=n(t,e[a]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||o)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function o(e,t){return e>t?1:e<t?-1:0}function a(e,t,n,r,o){return c(e,t,n,r,o,0)}function i(e,t,n,r,o,a){return c(e,t,n,r,o,0,!1,a,!0)}function s(e,t,n,r,o,a){return c(e,t,n,r,o,a,!0)}function c(e,t,n,o,a,i,s=!1,c=!1,p=!1){const h=[];for(let e=0;e<t.length;e++)t[e]>a&&h.push({score:t[e],boxIndex:e,suppressBeginIndex:0});h.sort(d);const f=i>0?-.5/i:0,m=[],g=[];for(;m.length<n&&h.length>0;){const t=h.pop(),{score:n,boxIndex:i,suppressBeginIndex:s}=t;if(n<a)break;let c=!1;for(let n=m.length-1;n>=s;--n){const r=u(e,i,m[n]);if(r>=o){c=!0;break}if(t.score=t.score*l(o,f,r),t.score<=a)break}t.suppressBeginIndex=m.length,c||(t.score===n?(m.push(i),g.push(t.score)):t.score>a&&r(h,t,d))}const b=m.length,y=n-b;c&&y>0&&(m.push(...new Array(y).fill(0)),g.push(...new Array(y).fill(0)));const A={selectedIndices:m};return s&&(A.selectedScores=g),p&&(A.validOutputs=b),A}function u(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(s-a)*(c-i),f=(d-u)*(p-l);if(h<=0||f<=0)return 0;const m=Math.max(a,u),g=Math.max(i,l),b=Math.min(s,d),y=Math.min(c,p),A=Math.max(b-m,0)*Math.max(y-g,0);return A/(h+f-A)}function l(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d}));var r=n(8);function o(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function a(e,t,n){const r=e.length+t.length,o=[];let a=0,i=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function i(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((t=>e[t]))]}function s(e,t){return a(e,t.map((e=>1)),t)}function c(e,t,n){r.b(o(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function u(e,t){if(o(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function l(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function d(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({pad_:function(e,t,n=0){const i=Object(a.a)(e,"x","pad");if(0===i.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:t,constantValue:n},c={x:i};return r.a.runKernel(o.fc,c,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(43);function a(e,t,n){const a=Object(r.c)(e,n);return Object(o.a)(e,t,a,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({sigmoid_:function(e){const t={x:Object(a.a)(e,"x","sigmoid","float32")};return r.a.runKernel(o.Cc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({max_:function(e,t=null,n=!1){const i={x:Object(a.a)(e,"x","max")},s={reductionIndices:t,keepDims:n};return r.a.runKernel(o.Jb,i,s)}})},function(e,t,n){"use strict";var r,o;n.d(t,"a",(function(){return r})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({pow_:function(e,t){let n=Object(i.a)(e,"base","pow"),s=Object(i.a)(t,"exp","pow");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.hc,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({log_:function(e){const t={x:Object(a.a)(e,"x","log","float32")};return r.a.runKernel(o.Db,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({split_:function(e,t,n=0){const i={x:Object(a.a)(e,"x","split")},s={numOrSizeSplits:t,axis:n};return r.a.runKernel(o.Pc,i,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({stack_:function(e,t=0){const n=Object(a.b)(e,"tensors","stack","string_or_numeric");i.b(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&i.b(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const s=n,c={axis:t};return r.a.runKernel(o.ec,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(8),a=n(48),i=n(77);function s(e,t="float32"){if("complex64"===t){const t=s(e,"float32"),n=Object(i.a)(e,"float32");return Object(a.a)(t,n)}const n=Object(o.D)(Object(o.O)(e),t);return r.a.makeTensor(n,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({expandDims_:function(e,t=0){const n=Object(a.a)(e,"x","expandDims","string_or_numeric");i.b(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const s={input:n},c={dim:t};return r.a.runKernel(o.cb,s,c)}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,o,a,i,s;n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(i||(i={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));const c={float32:i,int32:o,bool:a,complex64:s};function u(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return c[e][t]}function l(e){return u(e,"int32")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(6);function a(e,t,n){const a={shape:e,value:t,dtype:n};return r.a.runKernel(o.fb,{},a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(34),c=n(4),u=n(9);const l=Object(c.b)({conv2d_:function(e,t,n,c,l="NHWC",d=[1,1],p){const h=Object(a.a)(e,"x","conv2d","float32"),f=Object(a.a)(t,"filter","conv2d","float32");let m=h,g=!1;3===h.rank&&(g=!0,m=Object(u.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),i.b(4===m.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`)),i.b(4===f.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${f.rank}.`)),null!=p&&i.b(i.v(c),(()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${p} but got pad ${c}.`));const b="NHWC"===l?m.shape[3]:m.shape[1];i.b(b===f.shape[2],(()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${f.shape[2]}.`)),i.b(s.h(n,d),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`));const y={x:m,filter:f},A={strides:n,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p},v=r.a.runKernel(o.D,y,A);return g?Object(u.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),o=n(8),a=n(48);function i(e,t="float32"){if("complex64"===t){const t=i(e,"float32"),n=i(e,"float32");return Object(a.a)(t,n)}const n=Object(o.F)(Object(o.O)(e),t);return r.a.makeTensor(n,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({relu_:function(e){const t={x:Object(a.a)(e,"x","relu")};return r.a.runKernel(o.oc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(9);var c=n(4);const u=Object(c.b)({batchNorm_:function(e,t,n,c,u,l){null==l&&(l=.001);const d=Object(a.a)(e,"x","batchNorm"),p=Object(a.a)(t,"mean","batchNorm"),h=Object(a.a)(n,"variance","batchNorm");let f,m;null!=u&&(f=Object(a.a)(u,"scale","batchNorm")),null!=c&&(m=Object(a.a)(c,"offset","batchNorm")),i.b(p.rank===h.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),i.b(null==m||p.rank===m.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),i.b(null==f||p.rank===f.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const g={x:function(e){let t;return t=0===e.rank||1===e.rank?Object(s.a)(e,[1,1,1,e.size]):2===e.rank?Object(s.a)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Object(s.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(d),scale:f,offset:m,mean:p,variance:h},b={varianceEpsilon:l},y=r.a.runKernel(o.kb,g,b);return Object(s.a)(y,d.shape)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({tile_:function(e,t){const n=Object(a.a)(e,"x","tile","string_or_numeric");i.b(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const s={x:n},c={reps:t};return r.a.runKernel(o.cd,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r=n(109);n(107);class o{constructor(e,t,n,o,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const i=a||Math.random();this.random=r.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,a;do{r=2*this.random()-1,o=2*this.random()-1,a=r*r+o*o}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*o*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class a{constructor(e,t,n,a){this.alpha=e,this.beta=1/t,this.dtype=n;const i=a||Math.random();this.randu=r.alea(i.toString()),this.randn=new o(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,o,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),o=this.randu(),o<t||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class i{constructor(e=0,t=1,n,o){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==o&&(o=Math.random()),"number"==typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=r.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(6);function a(e,t,n=1,a="float32"){if(0===n)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:a};return r.a.runKernel(o.kc,{},i)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var o=[],a=o.forEach,i=o.slice;function s(e){return a.call(i.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}function c(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":r(XMLHttpRequest))}function u(e){return function(e){return!!e&&"function"==typeof e.then}(e)?e:Promise.resolve(e)}},function(e,t,n){"use strict";(function(e){var r=n(306),o=n(307),a=n(308);function i(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),o=(e=s(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,o){var a,i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*i}else-1!==l&&(a-=a-l),l=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var d=!0,p=0;p<c;p++)if(u(e,a+p)!==u(t,p)){d=!1;break}if(d)return a}return-1}function A(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function v(e,t,n,r){return W(z(t,e.length-n),e,n,r)}function x(e,t,n,r){return W(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return x(e,t,n,r)}function w(e,t,n,r){return W(U(t),e,n,r)}function C(e,t,n,r){return W(function(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a,i,s,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(a=e[o+1]))&&(c=(31&u)<<6|63&a)>127&&(l=c);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(c=(15&u)<<12|(63&a)<<6|63&i)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!c.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),s=Math.min(a,i),u=this.slice(r,o),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){a=u[d],i=l[d];break}return a<i?-1:i<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function I(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=F(e[a]);return o}function R(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,r,o,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function _(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function M(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(e,t,n,r,a){return a||M(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,a){return a||M(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||B(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||B(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):_(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);B(this,e,t,n,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);B(this,e,t,n,o-1,-o)}var a=n-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):_(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return $(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return $(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=c.isBuffer(e)?e:z(new c(e,r).toString()),s=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(73))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const r={};function o(e){return r[e]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({greater_:function(e,t){let n=Object(i.a)(e,"a","greater","string_or_numeric"),c=Object(i.a)(t,"b","greater","string_or_numeric");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.pb,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(23),s=n(4);const c=Object(s.b)({logicalAnd_:function(e,t){const n=Object(a.a)(e,"a","logicalAnd","bool"),s=Object(a.a)(t,"b","logicalAnd","bool");Object(i.a)(n.shape,s.shape);const c={a:n,b:s};return r.a.runKernel(o.Gb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({mean_:function(e,t=null,n=!1){const i={x:Object(a.a)(e,"x","mean")},s={axis:t,keepDims:n};return r.a.runKernel(o.Qb,i,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({real_:function(e){const t={input:Object(a.a)(e,"input","real")};return r.a.runKernel(o.lc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(8),i=n(4);const s=Object(i.b)({ifft_:function(e){Object(a.b)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.a.runKernel(o.rb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({transpose_:function(e,t){const n=Object(a.a)(e,"x","transpose");if(null==t&&(t=n.shape.map(((e,t)=>t)).reverse()),i.b(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`)),t.forEach((e=>{i.b(e>=0&&e<n.rank,(()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+` but got ${t}`))})),n.rank<=1)return n.clone();const s={x:n},c={perm:t};return r.a.runKernel(o.fd,s,c)}})},function(e,t,n){"use strict";(function(e,r){let o;function a(){if(null==o){let t;if("undefined"!=typeof window)t=window;else if(void 0!==e)t=e;else if(void 0!==r)t=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}o=t}return o}function i(e,t){const n=function(){const e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}))}).call(this,n(73),n(51))},function(e,t,n){"use strict";n.r(t),n.d(t,"validateUpdateShape",(function(){return o})),n.d(t,"validateInput",(function(){return a})),n.d(t,"calculateShapes",(function(){return i}));var r=n(8);function o(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(a+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(a+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(let e=0;e<o;++e)if(n.shape[e]!==t.shape[e])throw new Error(a+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-o;++t)if(n.shape[t+o]!==e[t+r])throw new Error(a+` updates.shape[${t+o}] (${n.shape[t+o]}) != shape[${t+o}] (${e[t+o]})`)}function a(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}o(n,t,e)}function i(e,t,n){const o=t.shape.length,a=o>1?t.shape[o-1]:1,i=n.length;let s=1;for(let e=a;e<i;++e)s*=n[e];const c=a<1?1:a;return{sliceRank:a,numUpdates:Object(r.O)(t.shape)/c,sliceSize:s,strides:[...Object(r.j)(n.slice(0,a)),1],outputSize:Object(r.O)(n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4),c=n(9);const u=Object(s.b)({depthwiseConv2d_:function(e,t,n,s,u="NHWC",l=[1,1],d){const p=Object(a.a)(e,"x","depthwiseConv2d","float32"),h=Object(a.a)(t,"filter","depthwiseConv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=Object(c.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),i.b(4===f.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`)),i.b(4===h.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`)),i.b(f.shape[3]===h.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`)),null!=d&&i.b(i.v(s),(()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${s}.`));const g={x:f,filter:h},b={strides:n,pad:s,dataFormat:u,dilations:l,dimRoundingMode:d},y=r.a.runKernel(o.P,g,b);return m?Object(c.a)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({imag_:function(e){const t={input:Object(a.a)(e,"input","imag")};return r.a.runKernel(o.tb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({lessEqual_:function(e,t){let n=Object(i.a)(e,"a","lessEqual","string_or_numeric"),c=Object(i.a)(t,"b","lessEqual","string_or_numeric");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.Bb,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(8),i=n(4);const s=Object(i.b)({fft_:function(e){Object(a.b)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.a.runKernel(o.eb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(8),o=n(48),a=n(32),i=n(97),s=n(4),c=n(91),u=n(9),l=n(24),d=n(69),p=n(77),h=n(36),f=n(99);const m=Object(s.b)({rfft_:function(e,t){Object(r.b)("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const s=e.size/n;let m;if(null!=t&&t<n){const r=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,m=Object(l.a)(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,m=Object(a.a)([e,Object(p.a)(r)],e.shape.length-1),n=t}else m=e;const g=Object(h.a)(m),b=Object(u.a)(Object(o.a)(m,g),[s,n]),y=Object(f.a)(b),A=Math.floor(n/2)+1,v=Object(c.a)(y),x=Object(i.a)(y),k=Object(d.a)(v,[A,n-A],v.shape.length-1),w=Object(d.a)(x,[A,n-A],x.shape.length-1),C=m.shape.slice();return C[m.shape.length-1]=A,Object(u.a)(Object(o.a)(k[0],w[0]),C)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),o=n(8),a=n(4),i=n(9);const s=Object(a.b)({squeeze_:function(e,t){const n=Object(r.a)(e,"x","squeeze");return Object(i.a)(n,Object(o.Q)(n.shape,t).newShape)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({unstack_:function(e,t=0){const n=Object(a.a)(e,"x","unstack","string_or_numeric");i.b(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const s={value:n},c={axis:t};return r.a.runKernel(o.hd,s,c)}})},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=n(297)},function(e,t){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=0,s=r.forwardRef((function(e,t){var n=e.title,o=void 0===n?null:n,s=e.description,c=void 0===s?null:s,u=e.size,l=void 0===u?null:u,d=e.color,p=void 0===d?"currentColor":d,h=e.horizontal,f=void 0===h?null:h,m=e.vertical,g=void 0===m?null:m,b=e.rotate,y=void 0===b?null:b,A=e.spin,v=void 0===A?null:A,x=e.style,k=void 0===x?{}:x,w=e.children,C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);i++;var S,O=null!==v&&v,E=r.Children.map(w,(function(e){var t=e;!0!==O&&(O=!0===(null===v?t.props.spin:v));var n=t.props.size;"number"==typeof l&&"number"==typeof t.props.size&&(n=t.props.size/l);var o={size:n,color:null===p?t.props.color:p,horizontal:null===f?t.props.horizontal:f,vertical:null===g?t.props.vertical:g,rotate:null===y?t.props.rotate:y,spin:null===v?t.props.spin:v,inStack:!0};return r.cloneElement(t,o)}));null!==l&&(k.width="string"==typeof l?l:1.5*l+"rem");var I,T="stack_labelledby_"+i,N="stack_describedby_"+i;if(o)S=c?T+" "+N:T;else if(I="presentation",c)throw new Error("title attribute required when description is set");return r.createElement("svg",a({ref:t,viewBox:"0 0 24 24",style:k,role:I,"aria-labelledby":S},C),o&&r.createElement("title",{id:T},o),c&&r.createElement("desc",{id:N},c),O&&r.createElement("style",null,"@keyframes spin { to { transform: rotate(360deg) } }","@keyframes spin-inverse { to { transform: rotate(-360deg) } }"),E)}));s.displayName="Stack",s.propTypes={size:o.oneOfType([o.number,o.string]),color:o.string,horizontal:o.bool,vertical:o.bool,rotate:o.number,spin:o.oneOfType([o.bool,o.number]),children:o.oneOfType([o.arrayOf(o.node),o.node]).isRequired,className:o.string,style:o.object},s.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var c=s;n.d(t,"Icon",(function(){return d})),n.d(t,"Stack",(function(){return c}));var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=0,d=r.forwardRef((function(e,t){var n=e.path,o=e.id,a=void 0===o?++l:o,i=e.title,s=void 0===i?null:i,c=e.description,d=void 0===c?null:c,p=e.size,h=void 0===p?null:p,f=e.color,m=void 0===f?"currentColor":f,g=e.horizontal,b=void 0!==g&&g,y=e.vertical,A=void 0!==y&&y,v=e.rotate,x=void 0===v?0:v,k=e.spin,w=void 0!==k&&k,C=e.style,S=void 0===C?{}:C,O=e.inStack,E=void 0!==O&&O,I=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),T={},N=[];null!==h&&(E?N.push("scale("+h+")"):(S.width="string"==typeof h?h:1.5*h+"rem",S.height=S.width)),b&&N.push("scaleX(-1)"),A&&N.push("scaleY(-1)"),0!==x&&N.push("rotate("+x+"deg)"),null!==m&&(T.fill=m);var R=r.createElement("path",u({d:n,style:T},E?I:{})),j=R;N.length>0&&(S.transform=N.join(" "),S.transformOrigin="center",E&&(j=r.createElement("g",{style:S},R,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var B,_=j,D=!0===w||"number"!=typeof w?2:w,M=!E&&(b||A);if(D<0&&(M=!M),w&&(_=r.createElement("g",{style:{animation:"spin"+(M?"-inverse":"")+" linear "+Math.abs(D)+"s infinite",transformOrigin:"center"}},j,!(b||A||0!==x)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),E)return _;var $,P="icon_labelledby_"+a,L="icon_describedby_"+a;if(s)B=d?P+" "+L:P;else if($="presentation",d)throw new Error("title attribute required when description is set");return r.createElement("svg",u({ref:t,viewBox:"0 0 24 24",style:S,role:$,"aria-labelledby":B},I),s&&r.createElement("title",{id:P},s),d&&r.createElement("desc",{id:L},d),!E&&w&&(M?r.createElement("style",null,"@keyframes spin-inverse { to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { to { transform: rotate(360deg) } }")),_)}));d.displayName="Icon",d.propTypes={path:o.string.isRequired,size:o.oneOfType([o.number,o.string]),color:o.string,horizontal:o.bool,vertical:o.bool,rotate:o.number,spin:o.oneOfType([o.bool,o.number]),style:o.object,inStack:o.bool,className:o.string},d.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},t.default=d}])},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var o=self||window;try{try{var a;try{a=new o.Blob([e])}catch(t){(a=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),a=a.getBlob()}var i=o.URL||o.webkitURL,s=i.createObjectURL(a),c=new o[t](s,n);return i.revokeObjectURL(s),c}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(53),s=n(4),c=n(9);const u=Object(s.b)({broadcastTo_:function(e,t){let n=Object(a.a)(e,"broadcastTo","x");const s=n.shape;if(t.some((e=>!(e>0)||e%1!=0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Object(c.a)(n,e)}const u=n.shape,l=Array.from(t);for(let e=t.length-1;e>=0;e--)if(u[e]===t[e])l[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(0===l.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return Object(i.a)(n);const d={x:n},p={reps:l};return r.a.runKernel(o.cd,d,p)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"TEST_EPSILON_FLOAT16",(function(){return s})),n.d(t,"expectArraysClose",(function(){return c})),n.d(t,"testEpsilon",(function(){return u})),n.d(t,"expectPromiseToFail",(function(){return d})),n.d(t,"expectArraysEqual",(function(){return p})),n.d(t,"expectNumbersClose",(function(){return h})),n.d(t,"expectValuesInRange",(function(){return m})),n.d(t,"expectArrayBuffersEqual",(function(){return g})),n.d(t,"encodeStrings",(function(){return b}));var r=n(5),o=n(3),a=n(8),i=n(10);const s=.1;function c(e,t,n){return null==n&&(n=u()),l(e,t,((e,t)=>f(e,t,n)))}function u(){return 32===r.a.backend.floatPrecision()?.001:s}function l(e,t,n){let r=!0;if((Object(a.A)(e)||Object(a.A)(t))&&(r=!1),Object(a.A)(e)&&Object(a.A)(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=Object(o.c)(e),r=Object(o.c)(t);if(!Object(a.a)(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const i=Object(a.A)(e)?e:Object(a.m)(e),s=Object(a.A)(t)?t:Object(a.m)(t);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.\nActual:   ${i}.\nExpected: ${s}.`);for(let e=0;e<s.length;++e){const t=i[e],r=s[e];if(!n(t,r))throw new Error(`Arrays differ: actual[${e}] = ${t}, expected[${e}] = ${r}.\nActual:   ${i}.\nExpected: ${s}.`)}}function d(e,t){e().then((()=>t.fail()),(()=>t()))}function p(e,t){const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Object(a.z)(e)||Object(a.z)(e[0])||Object(a.z)(t)||Object(a.z)(t[0])?l(e,n,((e,t)=>e==t)):l(e,t,((e,t)=>f(e,t,0)))}function h(e,t,n){if(null==n&&(n=u()),!f(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function f(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function m(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function g(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function b(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?b(n):e[t]=Object(i.encodeString)(n)}return e}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__108__},function(e,t,n){var r=n(312),o=n(313),a=n(314),i=n(315),s=n(316),c=n(317),u=n(318);u.alea=r,u.xor128=o,u.xorwow=a,u.xorshift7=i,u.xor4096=s,u.tychei=c,e.exports=u},function(e,t,n){"use strict";(function(e){n(5);var t=n(122),r=n(14);const o=Object(r.c)();o.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),o.registerFlag("IS_BROWSER",(()=>t.isBrowser())),o.registerFlag("IS_NODE",(()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node)),o.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),o.registerFlag("PROD",(()=>!1)),o.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>o.getBool("DEBUG"))),o.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),o.registerFlag("IS_TEST",(()=>!1)),o.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),o.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1))}).call(this,n(51))},function(e,t,n){var r=n(240),o=n(35);function a(e,t,n){null!=n&&o.property.apply(this,arguments)}function i(e,t){e.constructor.prototype[t]||o.memoizedProperty.apply(this,arguments)}function s(e,t,n){t=t||{},a(this,"shape",e.shape),a(this,"api",t.api,!1),a(this,"type",e.type),a(this,"enum",e.enum),a(this,"min",e.min),a(this,"max",e.max),a(this,"pattern",e.pattern),a(this,"location",e.location||this.location||"body"),a(this,"name",this.name||e.xmlName||e.queryName||e.locationName||n),a(this,"isStreaming",e.streaming||this.isStreaming||!1),a(this,"requiresLength",e.requiresLength,!1),a(this,"isComposite",e.isComposite||!1),a(this,"isShape",!0,!1),a(this,"isQueryName",Boolean(e.queryName),!1),a(this,"isLocationName",Boolean(e.locationName),!1),a(this,"isIdempotent",!0===e.idempotencyToken),a(this,"isJsonValue",!0===e.jsonvalue),a(this,"isSensitive",!0===e.sensitive||e.prototype&&!0===e.prototype.sensitive),a(this,"isEventStream",Boolean(e.eventstream),!1),a(this,"isEvent",Boolean(e.event),!1),a(this,"isEventPayload",Boolean(e.eventpayload),!1),a(this,"isEventHeader",Boolean(e.eventheader),!1),a(this,"isTimestampFormatSet",Boolean(e.timestampFormat)||e.prototype&&!0===e.prototype.isTimestampFormatSet,!1),a(this,"endpointDiscoveryId",Boolean(e.endpointdiscoveryid),!1),a(this,"hostLabel",Boolean(e.hostLabel),!1),t.documentation&&(a(this,"documentation",e.documentation),a(this,"documentationUrl",e.documentationUrl)),e.xmlAttribute&&a(this,"isXmlAttribute",e.xmlAttribute||!1),a(this,"defaultValue",null),this.toWireFormat=function(e){return null==e?"":e},this.toType=function(e){return e}}function c(e){s.apply(this,arguments),a(this,"isComposite",!0),e.flattened&&a(this,"flattened",e.flattened||!1)}function u(e,t){var n=this,o=null,u=!this.isShape;c.apply(this,arguments),u&&(a(this,"defaultValue",(function(){return{}})),a(this,"members",{}),a(this,"memberNames",[]),a(this,"required",[]),a(this,"isRequired",(function(){return!1})),a(this,"isDocument",Boolean(e.document))),e.members&&(a(this,"members",new r(e.members,t,(function(e,n){return s.create(n,t,e)}))),i(this,"memberNames",(function(){return e.xmlOrder||Object.keys(e.members)})),e.event&&(i(this,"eventPayloadMemberName",(function(){for(var e=n.members,t=n.memberNames,r=0,o=t.length;r<o;r++)if(e[t[r]].isEventPayload)return t[r]})),i(this,"eventHeaderMemberNames",(function(){for(var e=n.members,t=n.memberNames,r=[],o=0,a=t.length;o<a;o++)e[t[o]].isEventHeader&&r.push(t[o]);return r})))),e.required&&(a(this,"required",e.required),a(this,"isRequired",(function(t){if(!o){o={};for(var n=0;n<e.required.length;n++)o[e.required[n]]=!0}return o[t]}),!1,!0)),a(this,"resultWrapper",e.resultWrapper||null),e.payload&&a(this,"payload",e.payload),"string"==typeof e.xmlNamespace?a(this,"xmlNamespaceUri",e.xmlNamespace):"object"==typeof e.xmlNamespace&&(a(this,"xmlNamespacePrefix",e.xmlNamespace.prefix),a(this,"xmlNamespaceUri",e.xmlNamespace.uri))}function l(e,t){var n=this,r=!this.isShape;if(c.apply(this,arguments),r&&a(this,"defaultValue",(function(){return[]})),e.member&&i(this,"member",(function(){return s.create(e.member,t)})),this.flattened){var o=this.name;i(this,"name",(function(){return n.member.name||o}))}}function d(e,t){var n=!this.isShape;c.apply(this,arguments),n&&(a(this,"defaultValue",(function(){return{}})),a(this,"key",s.create({type:"string"},t)),a(this,"value",s.create({type:"string"},t))),e.key&&i(this,"key",(function(){return s.create(e.key,t)})),e.value&&i(this,"value",(function(){return s.create(e.value,t)}))}function p(){s.apply(this,arguments);var e=["rest-xml","query","ec2"];this.toType=function(t){return t=this.api&&e.indexOf(this.api.protocol)>-1?t||"":t,this.isJsonValue?JSON.parse(t):t&&"function"==typeof t.toString?t.toString():t},this.toWireFormat=function(e){return this.isJsonValue?JSON.stringify(e):e}}function h(){s.apply(this,arguments),this.toType=function(e){var t=o.base64.decode(e);if(this.isSensitive&&o.isNode()&&"function"==typeof o.Buffer.alloc){var n=o.Buffer.alloc(t.length,t);t.fill(0),t=n}return t},this.toWireFormat=o.base64.encode}function f(){h.apply(this,arguments)}function m(){s.apply(this,arguments),this.toType=function(e){return"boolean"==typeof e?e:null==e?null:"true"===e}}s.normalizedTypes={character:"string",double:"float",long:"integer",short:"integer",biginteger:"integer",bigdecimal:"float",blob:"binary"},s.types={structure:u,list:l,map:d,boolean:m,timestamp:function(e){var t=this;if(s.apply(this,arguments),e.timestampFormat)a(this,"timestampFormat",e.timestampFormat);else if(t.isTimestampFormatSet&&this.timestampFormat)a(this,"timestampFormat",this.timestampFormat);else if("header"===this.location)a(this,"timestampFormat","rfc822");else if("querystring"===this.location)a(this,"timestampFormat","iso8601");else if(this.api)switch(this.api.protocol){case"json":case"rest-json":a(this,"timestampFormat","unixTimestamp");break;case"rest-xml":case"query":case"ec2":a(this,"timestampFormat","iso8601")}this.toType=function(e){return null==e?null:"function"==typeof e.toUTCString?e:"string"==typeof e||"number"==typeof e?o.date.parseTimestamp(e):null},this.toWireFormat=function(e){return o.date.format(e,t.timestampFormat)}},float:function(){s.apply(this,arguments),this.toType=function(e){return null==e?null:parseFloat(e)},this.toWireFormat=this.toType},integer:function(){s.apply(this,arguments),this.toType=function(e){return null==e?null:parseInt(e,10)},this.toWireFormat=this.toType},string:p,base64:f,binary:h},s.resolve=function(e,t){if(e.shape){var n=t.api.shapes[e.shape];if(!n)throw new Error("Cannot find shape reference: "+e.shape);return n}return null},s.create=function(e,t,n){if(e.isShape)return e;var r=s.resolve(e,t);if(r){var o=Object.keys(e);t.documentation||(o=o.filter((function(e){return!e.match(/documentation/)})));var a=function(){r.constructor.call(this,e,t,n)};return a.prototype=r,new a}e.type||(e.members?e.type="structure":e.member?e.type="list":e.key?e.type="map":e.type="string");var i=e.type;if(s.normalizedTypes[e.type]&&(e.type=s.normalizedTypes[e.type]),s.types[e.type])return new s.types[e.type](e,t,n);throw new Error("Unrecognized shape type: "+i)},s.shapes={StructureShape:u,ListShape:l,MapShape:d,StringShape:p,BooleanShape:m,Base64Shape:f},e.exports=s},function(e,t,n){n(159);var r=n(18),o=r.Service,a=r.apiLoader;a.services.sts={},r.STS=o.defineService("sts",["2011-06-15"]),n(370),Object.defineProperty(a.services.sts,"2011-06-15",{get:function(){var e=n(371);return e.paginators=n(372).pagination,e},enumerable:!0,configurable:!0}),e.exports=r.STS},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class o{refCount(e){return a("refCount")}incRef(e){return a("incRef")}timerAvailable(){return!0}time(e){return a("time")}read(e){return a("read")}readSync(e){return a("readSync")}numDataIds(){return a("numDataIds")}disposeData(e,t){return a("disposeData")}write(e,t,n){return a("write")}move(e,t,n,r,o){return a("move")}memory(){return a("memory")}floatPrecision(){return a("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return a("dispose")}}function a(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({tanh_:function(e){const t={x:Object(a.a)(e,"x","tanh","float32")};return r.a.runKernel(o.bd,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({min_:function(e,t=null,n=!1){const i={x:Object(a.a)(e,"x","min")},s={axis:t,keepDims:n};return r.a.runKernel(o.Rb,i,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({oneHot_:function(e,t,n=1,i=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const s={indices:Object(a.a)(e,"indices","oneHot","int32")},c={depth:t,onValue:n,offValue:i};return r.a.runKernel(o.cc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(86),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,o,a=0,i=e.length,s=this.blocks,c=this.buffer8;a<i;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(o=this.start;a<i&&o<64;++a)c[o++]=e[a];else for(o=this.start;a<i&&o<64;++a)s[o>>2]|=e[a]<<SHIFT[3&o++];else if(ARRAY_BUFFER)for(o=this.start;a<i&&o<64;++a)(r=e.charCodeAt(a))<128?c[o++]=r:r<2048?(c[o++]=192|r>>6,c[o++]=128|63&r):r<55296||r>=57344?(c[o++]=224|r>>12,c[o++]=128|r>>6&63,c[o++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),c[o++]=240|r>>18,c[o++]=128|r>>12&63,c[o++]=128|r>>6&63,c[o++]=128|63&r);else for(o=this.start;a<i&&o<64;++a)(r=e.charCodeAt(a))<128?s[o>>2]|=r<<SHIFT[3&o++]:r<2048?(s[o>>2]|=(192|r>>6)<<SHIFT[3&o++],s[o>>2]|=(128|63&r)<<SHIFT[3&o++]):r<55296||r>=57344?(s[o>>2]|=(224|r>>12)<<SHIFT[3&o++],s[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],s[o>>2]|=(128|63&r)<<SHIFT[3&o++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),s[o>>2]|=(240|r>>18)<<SHIFT[3&o++],s[o>>2]|=(128|r>>12&63)<<SHIFT[3&o++],s[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],s[o>>2]|=(128|63&r)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,o,a,i=this.blocks;this.first?t=((t=((e=((e=i[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+i[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+i[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+i[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+i[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+i[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+i[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+i[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+i[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+i[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+i[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+i[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+i[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+i[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+i[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+i[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[1]-165796510)<<5|e>>>27)+t<<0)^t))+i[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[11]+643717713)<<14|n>>>18)+r<<0)^r))+i[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[5]-701558691)<<5|e>>>27)+t<<0)^t))+i[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[15]-660478335)<<14|n>>>18)+r<<0)^r))+i[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[9]+568446438)<<5|e>>>27)+t<<0)^t))+i[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[3]-187363961)<<14|n>>>18)+r<<0)^r))+i[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[13]-1444681467)<<5|e>>>27)+t<<0)^t))+i[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[7]+1735328473)<<14|n>>>18)+r<<0)^r))+i[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[5]-378558)<<4|e>>>28)+t<<0))+i[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[11]+1839030562)<<16|n>>>16)+r<<0))+i[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[1]-1530992060)<<4|e>>>28)+t<<0))+i[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[7]-155497632)<<16|n>>>16)+r<<0))+i[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[13]+681279174)<<4|e>>>28)+t<<0))+i[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[3]-722521979)<<16|n>>>16)+r<<0))+i[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[9]-640364487)<<4|e>>>28)+t<<0))+i[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[15]+530742520)<<16|n>>>16)+r<<0))+i[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[0]-198630844)<<6|e>>>26)+t<<0)|~n))+i[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+i[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+i[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[10]-1051523)<<15|n>>>17)+r<<0)|~e))+i[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+i[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+i[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[4]-145523070)<<6|e>>>26)+t<<0)|~n))+i[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[2]+718787259)<<15|n>>>17)+r<<0)|~e))+i[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",o=this.array(),a=0;a<15;)e=o[a++],t=o[a++],n=o[a++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=o[a],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__(51),__webpack_require__(73))},function(e,t,n){var r=n(35),o=n(163).populateHostPrefix;function a(e,t,n,o){var a=[e,t].join("/");a=a.replace(/\/+/g,"/");var i={},s=!1;if(r.each(n.members,(function(e,t){var n=o[e];if(null!=n)if("uri"===t.location){var c=new RegExp("\\{"+t.name+"(\\+)?\\}");a=a.replace(c,(function(e,t){return(t?r.uriEscapePath:r.uriEscape)(String(n))}))}else"querystring"===t.location&&(s=!0,"list"===t.type?i[t.name]=n.map((function(e){return r.uriEscape(t.member.toWireFormat(e).toString())})):"map"===t.type?r.each(n,(function(e,t){Array.isArray(t)?i[e]=t.map((function(e){return r.uriEscape(String(e))})):i[e]=r.uriEscape(String(t))})):i[t.name]=r.uriEscape(t.toWireFormat(n).toString()))})),s){a+=a.indexOf("?")>=0?"&":"?";var c=[];r.arrayEach(Object.keys(i).sort(),(function(e){Array.isArray(i[e])||(i[e]=[i[e]]);for(var t=0;t<i[e].length;t++)c.push(r.uriEscape(String(e))+"="+i[e][t])})),a+=c.join("&")}return a}e.exports={buildRequest:function(e){!function(e){e.httpRequest.method=e.service.api.operations[e.operation].httpMethod}(e),function(e){var t=e.service.api.operations[e.operation],n=t.input,r=a(e.httpRequest.endpoint.path,t.httpPath,n,e.params);e.httpRequest.path=r}(e),function(e){var t=e.service.api.operations[e.operation];r.each(t.input.members,(function(t,n){var o=e.params[t];null!=o&&("headers"===n.location&&"map"===n.type?r.each(o,(function(t,r){e.httpRequest.headers[n.name+t]=r})):"header"===n.location&&(o=n.toWireFormat(o).toString(),n.isJsonValue&&(o=r.base64.encode(o)),e.httpRequest.headers[n.name]=o))}))}(e),o(e)},extractError:function(){},extractData:function(e){var t=e.request,n={},o=e.httpResponse,a=t.service.api.operations[t.operation].output,i={};r.each(o.headers,(function(e,t){i[e.toLowerCase()]=t})),r.each(a.members,(function(e,t){var a=(t.name||e).toLowerCase();if("headers"===t.location&&"map"===t.type){n[e]={};var s=t.isLocationName?t.name:"",c=new RegExp("^"+s+"(.+)","i");r.each(o.headers,(function(t,r){var o=t.match(c);null!==o&&(n[e][o[1]]=r)}))}else if("header"===t.location){if(void 0!==i[a]){var u=t.isJsonValue?r.base64.decode(i[a]):i[a];n[e]=t.toType(u)}}else"statusCode"===t.location&&(n[e]=parseInt(o.statusCode,10))})),e.data=n},generateURI:a}},function(e,t,n){var r=n(84).Buffer;"undefined"!=typeof ArrayBuffer&&void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(e){return o.indexOf(Object.prototype.toString.call(e))>-1});var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"];e.exports={isEmptyData:function(e){return"string"==typeof e?0===e.length:0===e.byteLength},convertToBuffer:function(e){return"string"==typeof e&&(e=new r(e,"utf8")),ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o.a})),n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return i.a})),n.d(t,"e",(function(){return s.a})),n.d(t,"f",(function(){return c.a})),n.d(t,"g",(function(){return u.a})),n.d(t,"h",(function(){return l.a})),n.d(t,"i",(function(){return d.a})),n.d(t,"j",(function(){return p.a})),n.d(t,"k",(function(){return h.a})),n.d(t,"l",(function(){return f.a})),n.d(t,"m",(function(){return m.a})),n.d(t,"n",(function(){return g.a})),n.d(t,"o",(function(){return b.a})),n.d(t,"p",(function(){return y.a})),n.d(t,"q",(function(){return A.a})),n.d(t,"r",(function(){return I})),n.d(t,"w",(function(){return T.a})),n.d(t,"s",(function(){return N.a})),n.d(t,"t",(function(){return j})),n.d(t,"u",(function(){return B})),n.d(t,"v",(function(){return _})),n.d(t,"x",(function(){return D.a})),n.d(t,"z",(function(){return M.a})),n.d(t,"A",(function(){return $.a})),n.d(t,"B",(function(){return P.a})),n.d(t,"C",(function(){return L.a})),n.d(t,"D",(function(){return F.a})),n.d(t,"E",(function(){return z.a})),n.d(t,"F",(function(){return U.a})),n.d(t,"G",(function(){return W.a})),n.d(t,"H",(function(){return x.a})),n.d(t,"I",(function(){return V})),n.d(t,"J",(function(){return q})),n.d(t,"K",(function(){return G})),n.d(t,"L",(function(){return H})),n.d(t,"M",(function(){return K.a})),n.d(t,"N",(function(){return Y.a})),n.d(t,"O",(function(){return X.a})),n.d(t,"P",(function(){return Z.a})),n.d(t,"Q",(function(){return ne})),n.d(t,"R",(function(){return re.a})),n.d(t,"S",(function(){return oe.a})),n.d(t,"U",(function(){return ae.a})),n.d(t,"V",(function(){return ie.a})),n.d(t,"W",(function(){return se.a})),n.d(t,"X",(function(){return ce.a})),n.d(t,"Y",(function(){return ue})),n.d(t,"Z",(function(){return le.a})),n.d(t,"ab",(function(){return de.a})),n.d(t,"bb",(function(){return pe.a})),n.d(t,"cb",(function(){return he})),n.d(t,"eb",(function(){return fe.a})),n.d(t,"fb",(function(){return me.a})),n.d(t,"hb",(function(){return ge.a})),n.d(t,"ib",(function(){return be.a})),n.d(t,"jb",(function(){return ye.a})),n.d(t,"kb",(function(){return Ae.a})),n.d(t,"lb",(function(){return ve.a})),n.d(t,"mb",(function(){return ke})),n.d(t,"ob",(function(){return we.a})),n.d(t,"pb",(function(){return Ce.a})),n.d(t,"qb",(function(){return Se.a})),n.d(t,"sb",(function(){return Oe.a})),n.d(t,"ub",(function(){return Ee.a})),n.d(t,"vb",(function(){return Ie.a})),n.d(t,"xb",(function(){return Te.a})),n.d(t,"Bb",(function(){return Ne})),n.d(t,"Cb",(function(){return Re})),n.d(t,"Db",(function(){return je.a})),n.d(t,"Eb",(function(){return Be.a})),n.d(t,"Fb",(function(){return _e.a})),n.d(t,"Gb",(function(){return De.a})),n.d(t,"Ib",(function(){return Me.a})),n.d(t,"Jb",(function(){return $e.a})),n.d(t,"Kb",(function(){return Pe.a})),n.d(t,"Lb",(function(){return Le.a})),n.d(t,"Mb",(function(){return We})),n.d(t,"Nb",(function(){return Ve.a})),n.d(t,"Ob",(function(){return Ye})),n.d(t,"Pb",(function(){return Xe.a})),n.d(t,"Qb",(function(){return Ze.a})),n.d(t,"Rb",(function(){return Qe.a})),n.d(t,"Sb",(function(){return et})),n.d(t,"Ub",(function(){return k.a})),n.d(t,"Vb",(function(){return Ge.a})),n.d(t,"Wb",(function(){return tt.a})),n.d(t,"Xb",(function(){return nt.a})),n.d(t,"Yb",(function(){return rt.a})),n.d(t,"Zb",(function(){return ot.a})),n.d(t,"ac",(function(){return at.a})),n.d(t,"bc",(function(){return ct})),n.d(t,"cc",(function(){return ut.a})),n.d(t,"dc",(function(){return lt.a})),n.d(t,"ec",(function(){return dt.a})),n.d(t,"fc",(function(){return pt.a})),n.d(t,"gc",(function(){return ft})),n.d(t,"ic",(function(){return w.a})),n.d(t,"jc",(function(){return mt})),n.d(t,"kc",(function(){return gt.a})),n.d(t,"lc",(function(){return ze.a})),n.d(t,"nc",(function(){return bt.a})),n.d(t,"oc",(function(){return yt.a})),n.d(t,"pc",(function(){return it.a})),n.d(t,"qc",(function(){return At.a})),n.d(t,"sc",(function(){return vt})),n.d(t,"tc",(function(){return xt.a})),n.d(t,"uc",(function(){return kt})),n.d(t,"vc",(function(){return wt})),n.d(t,"wc",(function(){return Ct})),n.d(t,"xc",(function(){return St})),n.d(t,"yc",(function(){return It})),n.d(t,"zc",(function(){return Tt.a})),n.d(t,"Ac",(function(){return Nt.a})),n.d(t,"Bc",(function(){return Rt.a})),n.d(t,"Cc",(function(){return jt.a})),n.d(t,"Dc",(function(){return Bt})),n.d(t,"Ec",(function(){return Dt})),n.d(t,"Fc",(function(){return Mt})),n.d(t,"Gc",(function(){return $t.a})),n.d(t,"Hc",(function(){return Pt.a})),n.d(t,"Ic",(function(){return Lt.a})),n.d(t,"Jc",(function(){return Ft.a})),n.d(t,"Kc",(function(){return zt.a})),n.d(t,"Lc",(function(){return Ut.a})),n.d(t,"Mc",(function(){return ee.a})),n.d(t,"Nc",(function(){return Wt.a})),n.d(t,"Oc",(function(){return Vt})),n.d(t,"Pc",(function(){return qt})),n.d(t,"Qc",(function(){return Gt})),n.d(t,"Rc",(function(){return Ht})),n.d(t,"Tc",(function(){return Kt.a})),n.d(t,"Uc",(function(){return Yt.a})),n.d(t,"Vc",(function(){return Xt.a})),n.d(t,"Xc",(function(){return Zt.a})),n.d(t,"Yc",(function(){return Qt})),n.d(t,"Zc",(function(){return Jt.a})),n.d(t,"ad",(function(){return S.a})),n.d(t,"bd",(function(){return en.a})),n.d(t,"dd",(function(){return tn.a})),n.d(t,"ed",(function(){return nn.a})),n.d(t,"fd",(function(){return O.a})),n.d(t,"gd",(function(){return rn})),n.d(t,"hd",(function(){return on})),n.d(t,"id",(function(){return an})),n.d(t,"jd",(function(){return sn})),n.d(t,"kd",(function(){return cn.a})),n.d(t,"ld",(function(){return Ue.a})),n.d(t,"md",(function(){return Et.a})),n.d(t,"nb",(function(){return un.a})),n.d(t,"wb",(function(){return ln.a})),n.d(t,"Ab",(function(){return dn.a})),n.d(t,"Sc",(function(){return pn.a})),n.d(t,"qd",(function(){return hn.a})),n.d(t,"rd",(function(){return fn.a})),n.d(t,"sd",(function(){return ht.a})),n.d(t,"td",(function(){return mn.a})),n.d(t,"ud",(function(){return gn.a})),n.d(t,"vd",(function(){return bn.a})),n.d(t,"wd",(function(){return yn.a})),n.d(t,"xd",(function(){return An.a})),n.d(t,"zd",(function(){return He.a})),n.d(t,"Ad",(function(){return Ke.a})),n.d(t,"Bd",(function(){return vn.a})),n.d(t,"Cd",(function(){return E.a})),n.d(t,"Dd",(function(){return xn.a})),n.d(t,"Ed",(function(){return kn.a})),n.d(t,"Fd",(function(){return Cn})),n.d(t,"Gd",(function(){return Sn.a})),n.d(t,"Hd",(function(){return On})),n.d(t,"Id",(function(){return En})),n.d(t,"Jd",(function(){return In})),n.d(t,"Kd",(function(){return xe.a})),n.d(t,"Ld",(function(){return Tn.a})),n.d(t,"Nd",(function(){return Nn.a})),n.d(t,"Od",(function(){return Rn.a})),n.d(t,"Pd",(function(){return jn})),n.d(t,"Qd",(function(){return Bn.a})),n.d(t,"Rd",(function(){return _n})),n.d(t,"Sd",(function(){return Dn.a})),n.d(t,"Td",(function(){return Mn.a})),n.d(t,"Ud",(function(){return $n.a})),n.d(t,"Vd",(function(){return Pn.a})),n.d(t,"y",(function(){return Ln})),n.d(t,"Md",(function(){return Fn.a})),n.d(t,"mc",(function(){return Un})),n.d(t,"hc",(function(){return Vn})),n.d(t,"Wc",(function(){return qn.a})),n.d(t,"od",(function(){return Gn.a})),n.d(t,"tb",(function(){return Hn.a})),n.d(t,"db",(function(){return Kn})),n.d(t,"gb",(function(){return Yn})),n.d(t,"T",(function(){return Xn})),n.d(t,"zb",(function(){return Zn})),n.d(t,"rc",(function(){return C.b})),n.d(t,"a",(function(){return C.a})),n.d(t,"yb",(function(){return Xr})),n.d(t,"Hb",(function(){return Zr})),n.d(t,"Tb",(function(){return Qr})),n.d(t,"pd",(function(){return Kr})),n.d(t,"rb",(function(){return r})),n.d(t,"cd",(function(){return Yr})),n.d(t,"nd",(function(){return Jr})),n.d(t,"yd",(function(){return eo}));var r={};n.r(r),n.d(r,"conv2d",(function(){return tr})),n.d(r,"depthwiseConv2d",(function(){return or})),n.d(r,"matMul",(function(){return ar}));var o=n(38),a=n(181),i=n(182),s=n(12),c=n(183),u=n(184),l=n(185),d=n(186),p=n(187),h=n(188),f=n(189),m=n(190),g=n(191),b=n(192),y=n(126),A=n(193),v=n(3),x=n(32),k=n(22),w=n(11),C=n(4),S=n(64),O=n(24),E=n(114);const I=Object(C.b)({basicLSTMCell_:function(e,t,n,r,o,a){const i=Object(v.a)(e,"forgetBias","basicLSTMCell"),c=Object(v.a)(t,"lstmKernel","basicLSTMCell"),u=Object(v.a)(n,"lstmBias","basicLSTMCell"),l=Object(v.a)(r,"data","basicLSTMCell"),d=Object(v.a)(o,"c","basicLSTMCell"),p=Object(v.a)(a,"h","basicLSTMCell"),h=Object(x.a)([l,p],1),f=Object(k.a)(h,c),m=Object(s.a)(f,u),g=m.shape[0],b=m.shape[1]/4,y=[g,b],A=Object(O.a)(m,[0,0],y),C=Object(O.a)(m,[0,b],y),I=Object(O.a)(m,[0,2*b],y),T=Object(O.a)(m,[0,3*b],y),N=Object(s.a)(Object(w.a)(Object(S.a)(A),Object(E.a)(C)),Object(w.a)(d,Object(S.a)(Object(s.a)(i,I))));return[N,Object(w.a)(Object(E.a)(N),Object(S.a)(T))]}});var T=n(127),N=n(79),R=n(8);const j=Object(C.b)({batchNorm2d_:function(e,t,n,r,o,a){const i=Object(v.a)(e,"x","batchNorm"),s=Object(v.a)(t,"mean","batchNorm"),c=Object(v.a)(n,"variance","batchNorm");let u,l;return null!=o&&(u=Object(v.a)(o,"scale","batchNorm")),null!=r&&(l=Object(v.a)(r,"offset","batchNorm")),R.b(2===i.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`)),R.b(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),R.b(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`)),null!=u&&R.b(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=l&&R.b(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`)),Object(N.a)(i,s,c,l,u,a)}});const B=Object(C.b)({batchNorm3d_:function(e,t,n,r,o,a){const i=Object(v.a)(e,"x","batchNorm"),s=Object(v.a)(t,"mean","batchNorm"),c=Object(v.a)(n,"variance","batchNorm");let u,l;return null!=o&&(u=Object(v.a)(o,"scale","batchNorm")),null!=r&&(l=Object(v.a)(r,"offset","batchNorm")),R.b(3===i.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`)),R.b(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),R.b(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`)),null!=u&&R.b(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=l&&R.b(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`)),Object(N.a)(i,s,c,l,u,a)}});const _=Object(C.b)({batchNorm4d_:function(e,t,n,r,o,a){const i=Object(v.a)(e,"x","batchNorm"),s=Object(v.a)(t,"mean","batchNorm"),c=Object(v.a)(n,"variance","batchNorm");let u,l;return null!=o&&(u=Object(v.a)(o,"scale","batchNorm")),null!=r&&(l=Object(v.a)(r,"offset","batchNorm")),R.b(4===i.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`)),R.b(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),R.b(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`)),null!=u&&R.b(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=l&&R.b(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`)),Object(N.a)(i,s,c,l,u,a)}});var D=n(128),M=n(194),$=n(106),P=n(41),L=n(21),F=n(195),z=n(196),U=n(53),W=n(48);const V=Object(C.b)({concat1d_:function(e){return Object(x.a)(e,0)}});const q=Object(C.b)({concat2d_:function(e,t){return Object(x.a)(e,t)}});const G=Object(C.b)({concat3d_:function(e,t){return Object(x.a)(e,t)}});const H=Object(C.b)({concat4d_:function(e,t){return Object(x.a)(e,t)}});var K=n(197),Y=n(76),X=n(198),Z=n(199),Q=n(5),J=n(6),ee=n(9);const te=Object(C.b)({conv3DBackpropInput_:function(e,t,n,r,o){R.b(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let a=e,i=t,s=!1;4===t.rank&&(s=!0,i=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const c=a[4],u=i.shape[4];R.b(5===a.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`)),R.b(5===i.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`)),R.b(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),R.b(c===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[3]}.`)),R.b(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const l={dy:i,filter:n},d={pad:o,strides:r,inputShape:a},p=Q.a.runKernel(J.I,l,d);return s?Object(ee.a)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const ne=Object(C.b)({conv3dTranspose_:function(e,t,n,r,o){const a=Object(v.a)(e,"x","conv3dTranspose"),i=Object(v.a)(t,"filter","conv3dTranspose");return te(n,a,i,r,o)}});var re=n(200),oe=n(201),ae=n(202),ie=n(203),se=n(204),ce=n(96);const ue=Object(C.b)({diag_:function(e){const t={x:Object(v.a)(e,"x","diag")};return Q.a.runKernel(J.S,t)}});var le=n(205),de=n(19),pe=n(206);const he=Object(C.b)({dot_:function(e,t){const n=Object(v.a)(e,"t1","dot"),r=Object(v.a)(t,"t2","dot");R.b(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(R.b(o===a,(()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${a}.`)),1===n.rank&&1===r.rank){const e=Object(ee.a)(n,[1,-1]),t=Object(ee.a)(r,[-1,1]),o=Object(k.a)(e,t);return Object(ee.a)(o,[])}if(1===n.rank&&2===r.rank){const e=Object(ee.a)(n,[1,-1]),t=Object(ee.a)(r,[r.shape[0],r.shape[1]]),o=Object(k.a)(e,t);return Object(ee.a)(o,[o.size])}if(2===n.rank&&1===r.rank){const e=Object(ee.a)(r,[-1,1]),t=Object(k.a)(n,e);return Object(ee.a)(t,[t.size])}{const e=Object(ee.a)(r,[r.shape[0],r.shape[1]]);return Object(k.a)(n,e)}}});var fe=n(207),me=n(130),ge=n(129),be=n(208),ye=n(55),Ae=n(72),ve=n(209),xe=n(80);const ke=Object(C.b)({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const o=Object(P.a)([e,t],r),a=e<=t?e:t;for(let e=0;e<a;++e)o.set(1,e,e);const i=Object(ee.a)(o.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return Object(xe.a)(Object(Ae.a)(i,0),[n[0],1,1]);if(2===n.length)return Object(xe.a)(Object(Ae.a)(Object(Ae.a)(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(xe.a)(Object(Ae.a)(Object(Ae.a)(Object(Ae.a)(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var we=n(75),Ce=n(131),Se=n(124),Oe=n(132),Ee=n(88),Ie=n(133),Te=n(97);const Ne=Object(C.b)({isFinite_:function(e){const t={x:Object(v.a)(e,"x","isFinite")};return Q.a.runKernel(J.ub,t)}});const Re=Object(C.b)({isInf_:function(e){const t={x:Object(v.a)(e,"x","isInf")};return Q.a.runKernel(J.vb,t)}});var je=n(210),Be=n(134),_e=n(211),De=n(98),Me=n(212),$e=n(213),Pe=n(68),Le=n(135),Fe=n(31),ze=n(44),Ue=n(136);const We=Object(C.b)({logSigmoid_:function(e){const t=Object(v.a)(e,"x","logSigmoid");return Object(Fe.a)((e=>({value:Object(ze.a)(Object(Ue.a)(Object(ze.a)(e))),gradFunc:t=>Object(w.a)(t,Object(S.a)(Object(ze.a)(e)))})))(t)}});var Ve=n(214),qe=n(61),Ge=n(65),He=n(13),Ke=n(25);const Ye=Object(C.b)({logSumExp_:function(e,t=null,n=!1){const r=Object(v.a)(e,"x","logSumExp"),o=Object(R.I)(t,r.shape),a=Object(Ge.a)(r,o,!0),i=Object(He.a)(r,a),c=Object(ye.a)(i),u=Object(Ke.a)(c,o),l=Object(Pe.a)(u),d=Object(s.a)(Object(ee.a)(a,l.shape),l);if(n){const e=Object(qe.e)(d.shape,o);return Object(ee.a)(d,e)}return d}});var Xe=n(89),Ze=n(137),Qe=n(138),Je=n(23);const et=Object(C.b)({logicalXor_:function(e,t){const n=Object(v.a)(e,"a","logicalXor","bool"),r=Object(v.a)(t,"b","logicalXor","bool");return Object(Je.a)(n.shape,r.shape),Object(Xe.a)(Object(Qe.a)(e,t),Object(Ze.a)(Object(Xe.a)(e,t)))}});var tt=n(139),nt=n(215),rt=n(216),ot=n(125),at=n(90),it=n(71),st=n(20);function ct(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=Object(v.a)(e,"x","meshgrid",e instanceof st.a?e.dtype:"float32");if(void 0===t)return[r];let o=Object(v.a)(t,"y","meshgrid",t instanceof st.a?t.dtype:"float32");const a=Object(R.O)(r.shape),i=Object(R.O)(o.shape);return"xy"===n?(r=Object(ee.a)(r,[1,-1]),o=Object(ee.a)(o,[-1,1]),[Object(k.a)(Object(it.a)([i,1],r.dtype),r),Object(k.a)(o,Object(it.a)([1,a],o.dtype))]):(r=Object(ee.a)(r,[-1,1]),o=Object(ee.a)(o,[1,-1]),[Object(k.a)(r,Object(it.a)([1,i],r.dtype)),Object(k.a)(Object(it.a)([a,1],o.dtype),o)])}var ut=n(115),lt=n(140),dt=n(217),pt=n(218),ht=n(37);const ft=Object(C.b)({moments_:function(e,t=null,n=!1){e=Object(v.a)(e,"x","moments");const r=Object(R.I)(t,e.shape),o=Object(at.a)(e,r,n);let a=o.shape;n||(a=Object(qe.e)(o.shape,r));const i=Object(ht.a)(Object(He.a)(Object(L.a)(e,"float32"),Object(ee.a)(o,a)));return{mean:o,variance:Object(at.a)(i,r,n)}}});const mt=Object(C.b)({multiRNNCell_:function(e,t,n,r){const o=Object(v.a)(t,"data","multiRNNCell"),a=Object(v.b)(n,"c","multiRNNCell"),i=Object(v.b)(r,"h","multiRNNCell");let s=o;const c=[];for(let t=0;t<e.length;t++){const n=e[t](s,a[t],i[t]);c.push(n[0]),c.push(n[1]),s=n[1]}const u=[],l=[];for(let e=0;e<c.length;e+=2)u.push(c[e]),l.push(c[e+1]);return[u,l]}});var gt=n(219),bt=n(141),yt=n(116),At=n(220);const vt=Object(C.b)({outerProduct_:function(e,t){const n=Object(v.a)(e,"v1","outerProduct"),r=Object(v.a)(t,"v2","outerProduct");R.b(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const o=Object(ee.a)(n,[-1,1]),a=Object(ee.a)(r,[1,-1]);return Object(k.a)(o,a)}});var xt=n(62);const kt=Object(C.b)({pad1d_:function(e,t,n=0){return Object(R.b)(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),Object(xt.a)(e,[t],n)}});const wt=Object(C.b)({pad2d_:function(e,t,n=0){return Object(R.b)(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Object(xt.a)(e,t,n)}});const Ct=Object(C.b)({pad3d_:function(e,t,n=0){return Object(R.b)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Object(xt.a)(e,t,n)}});const St=Object(C.b)({pad4d_:function(e,t,n=0){return Object(R.b)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Object(xt.a)(e,t,n)}});var Ot=n(34),Et=n(142);const It=Object(C.b)({pool_:function(e,t,n,r,o,a){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");const i=Object(v.a)(e,"x","maxPool");let s=i,c=!1;3===i.rank&&(c=!0,s=Object(ee.a)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),R.b(Ot.h(a,o),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${o}'`));const u=Ot.e(s.shape,t,a,o,r),l=[u.dilationHeight,u.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))).map((e=>e-1)),r=n.map((e=>Math.floor(e/2))),o=n.map(((e,t)=>e-r[t]));return n.map(((e,t)=>[r[t],o[t]]))}([u.filterHeight,u.filterWidth],l):[[0,0],[0,0]];const p=1===l[0]&&1===l[1],[h,f]=function(e,t,n){const r=n.map((e=>e[0])),o=n.map((e=>e[1])),a=e.concat(r,o),i=t.map(((e,t)=>(e-a[t]%e)%e)),s=o.map(((e,t)=>e+i[t])),c=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,i[t]]));return[c,u]}([u.inHeight,u.inWidth],l,d),m=p?r:"valid",g=p?s:Object(Et.a)(s,l,h),b=("avg"===n?()=>Object(y.a)(g,t,a,m):()=>Object(tt.a)(g,t,a,m))(),A=p?b:Object(T.a)(b,l,f);return c?Object(ee.a)(A,[A.shape[1],A.shape[2],A.shape[3]]):A}});var Tt=n(67),Nt=n(143),Rt=n(123),jt=n(221);const Bt=Object(C.b)({rand_:function(e,t,n){const r=Object(R.O)(e);let o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);o=new Uint8Array(r)}for(let e=0;e<r;e++)o[e]=t();return Q.a.makeTensor(o,e,n)}});var _t=n(81);const Dt=Object(C.b)({randomGamma_:function(e,t,n=1,r="float32",o){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const a=new _t.b(t,n,r,o),i=Object(P.a)(e,r);for(let e=0;e<i.values.length;e++)i.values[e]=a.nextValue();return i.toTensor()}});const Mt=Object(C.b)({randomNormal_:function(e,t=0,n=1,r,o){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const a=new _t.a(t,n,r,!1,o),i=Object(P.a)(e,r);for(let e=0;e<i.values.length;e++)i.values[e]=a.nextValue();return i.toTensor()}});var $t=n(144),Pt=n(82),Lt=n(91),Ft=n(222),zt=n(78),Ut=n(145),Wt=n(49);const Vt=Object(C.b)({reverse1d_:function(e){const t=Object(v.a)(e,"x","reverse");return R.b(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),Object(Wt.a)(t,0)}});const qt=Object(C.b)({reverse2d_:function(e,t){const n=Object(v.a)(e,"x","reverse");return R.b(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),Object(Wt.a)(n,t)}});const Gt=Object(C.b)({reverse3d_:function(e,t){const n=Object(v.a)(e,"x","reverse");return R.b(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),Object(Wt.a)(n,t)}});const Ht=Object(C.b)({reverse4d_:function(e,t){const n=Object(v.a)(e,"x","reverse");return R.b(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),Object(Wt.a)(n,t)}});var Kt=n(146),Yt=n(223),Xt=n(16),Zt=n(224);const Qt=Object(C.b)({separableConv2d_:function(e,t,n,r,o,a=[1,1],i="NHWC"){const s=Object(v.a)(e,"x","separableConv2d"),c=Object(v.a)(t,"depthwiseFilter","separableConv2d"),u=Object(v.a)(n,"pointwiseFilter","separableConv2d");let l=s,d=!1;if(3===s.rank&&(d=!0,l=Object(ee.a)(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");R.b(4===l.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`)),R.b(4===c.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`)),R.b(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`)),R.b(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),R.b(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const p=c.shape[2],h=c.shape[3];R.b(u.shape[2]===p*h,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${u.shape[2]}.`));const f=Object(ce.a)(l,c,r,o,i,a),m=Object(Y.a)(f,u,1,"valid",i);return d?Object(ee.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});var Jt=n(225),en=n(226),tn=n(227),nn=n(228);const rn=Object(C.b)({slice1d_:function(e,t,n){const r=Object(v.a)(e,"x","slice1d");return R.b(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),Object(O.a)(r,[t],[n])}});const on=Object(C.b)({slice2d_:function(e,t,n){const r=Object(v.a)(e,"x","slice2d");return R.b(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),Object(O.a)(r,t,n)}});const an=Object(C.b)({slice3d_:function(e,t,n){const r=Object(v.a)(e,"x","slice3d");return R.b(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),Object(O.a)(r,t,n)}});const sn=Object(C.b)({slice4d_:function(e,t,n){const r=Object(v.a)(e,"x","slice4d");return R.b(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),Object(O.a)(r,t,n)}});var cn=n(229),un=n(99),ln=n(92),dn=n(147),pn=n(100),hn=n(69),fn=n(54),mn=n(148),gn=n(101),bn=n(70),yn=n(149),An=n(230),vn=n(231),xn=n(63),kn=n(42),wn=n(43);function Cn(e,t,n){if(Object(R.d)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Object(v.c)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(wn.a)(e,t,r,n)}var Sn=n(150);function On(e,t,n){if(Object(R.d)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Object(v.c)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(wn.a)(e,t,r,n)}function En(e,t,n){if(Object(R.d)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Object(v.c)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(wn.a)(e,t,r,n)}function In(e,t,n){if(Object(R.d)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Object(v.c)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Object(wn.a)(e,t,r,n)}var Tn=n(232),Nn=n(233),Rn=n(234);const jn=Object(C.b)({unsortedSegmentSum_:function(e,t,n){const r=Object(v.a)(e,"x","unsortedSegmentSum"),o=Object(v.a)(t,"segmentIds","unsortedSegmentSum","int32");Object(R.b)(Object(R.v)(n),(()=>"numSegments must be of dtype int"));const a={x:r,segmentIds:o},i={numSegments:n};return Q.a.runKernel(J.id,a,i)}});var Bn=n(102);function _n(e,t=!0,n,r){return Q.a.makeVariable(e,t,n,r)}var Dn=n(57),Mn=n(151),$n=n(77),Pn=n(36);const Ln=async function(e,t,n){const r=Object(v.a)(e,"tensor","boolMask"),o=Object(v.a)(t,"mask","boolMask","bool"),a=null==n?0:n,i=o.rank,s=r.shape;R.b(i>0,(()=>"mask cannot be scalar")),R.e(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let e=a;e<a+i;e++)c*=s[e];const u=s.slice(0,a).concat([c],s.slice(a+i)),l=Object(ee.a)(r,u),d=Object(ee.a)(o,[-1]),p=await Object(Mn.a)(d),h=Object(gn.a)(p,[1]),f=Object(Oe.a)(l,h,a);return e!==r&&r.dispose(),t!==o&&o.dispose(),h.dispose(),l.dispose(),d.dispose(),p.dispose(),f};var Fn=n(93);function zn(e,t,n=null){if(0===e.rank)return Object(o.a)(e);if(1!==e.rank&&null===n)return zn(Object(ee.a)(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Object(Ke.a)(Object(o.a)(e),n);if(t===1/0)return Object(Ge.a)(Object(o.a)(e),n);if(t===-1/0)return Object(ut.a)(Object(o.a)(e),n);if("euclidean"===t||2===t)return Object(fn.a)(Object(Ke.a)(Object(Tt.a)(Object(o.a)(e),Object(Xt.a)(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return Object(Ge.a)(Object(Ke.a)(Object(o.a)(e),n[0]),n[1]-1);if(t===1/0)return Object(Ge.a)(Object(Ke.a)(Object(o.a)(e),n[1]),n[0]);if(t===-1/0)return Object(ut.a)(Object(Ke.a)(Object(o.a)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Object(fn.a)(Object(Ke.a)(Object(ht.a)(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Un=Object(C.b)({norm_:function(e,t="euclidean",n=null,r=!1){const o=zn(e=Object(v.a)(e,"x","norm"),t,n);let a=o.shape;if(r){const t=Object(R.I)(n,e.shape);a=qe.e(o.shape,t)}return Object(ee.a)(o,a)}});var Wn=n(15);const Vn=Object(C.b)({movingAverage_:function(e,t,n,r,o=!0){const a=Object(v.a)(e,"v","movingAverage"),i=Object(v.a)(t,"x","movingAverage"),c=Object(v.a)(n,"decay","movingAverage");Object(Wn.assertTypesMatch)(a,i),R.b(R.a(a.shape,i.shape),(()=>"Shape mismatch in v and x"));const u=Object(Xt.a)(1),l=Object(He.a)(u,c);let d=Object(w.a)(Object(He.a)(i,a),l);if(o){R.b(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=Object(v.a)(r,"step","movingAverage");d=Object(de.a)(d,Object(He.a)(u,Object(Tt.a)(c,e)))}return Object(s.a)(a,d)}});var qn=n(235),Gn=n(258),Hn=n(236);const Kn=Object(C.b)({dropout_:function(e,t,n,r){const o=Object(v.a)(e,"x","dropout");if(R.b("float32"===o.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`)),R.b(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof st.a?o.clone():o;const a=function(e,t){if(null==t)return e.shape.slice();if(R.a(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,c=Object(de.a)(Object(Ce.a)(Object(s.a)(Object($t.a)(a,0,1,"float32",r),i)),i);return Object(w.a)(o,c)}});function Yn(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Xn(e,t,n){const r=1-e%2,o=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return Object(kn.a)(o,"float32")}const Zn=async function(e,t,n=1){const r=Object(v.a)(e,"predictions","inTopK"),o=Object(v.a)(t,"targets","inTopK");Object(R.b)(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),Object(R.b)(r.rank-1===o.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`)),Object(R.e)(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Object(R.b)(n>0&&n<=a,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`));const i=await r.data(),s=await o.data(),[c,u]=[i.length/a,a],l=Object(R.o)("bool",c);for(let e=0;e<c;e++){const t=e*u,r=i.subarray(t,t+u),o=[];for(let e=0;e<r.length;e++)o.push({value:r[e],index:e});o.sort(((e,t)=>t.value-e.value)),l[e]=0;for(let t=0;t<n;t++)if(o[t].index===s[e]){l[e]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),Object(xn.a)(l,o.shape,"bool")};const Qn=Object(C.b)({conv2DBackpropFilter_:function(e,t,n,r,o,a="NHWC",i){let s=e;3===e.rank&&(s=Object(ee.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),R.b(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),R.b(4===c.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`)),R.b(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===a?s.shape[3]:s.shape[1],l="NHWC"===a?c.shape[3]:c.shape[1];R.b(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),R.b(l===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`)),null!=i&&R.b(R.v(o),(()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${i} but got pad ${o}.`));const d={x:s,dy:c},p={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:n};return Q.a.runKernel(J.E,d,p)}});var Jn=n(155),er=n(39);const tr=Object(C.b)({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:c,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(u=u||"linear",!1===Object(er.d)(Q.a.state.gradientDepth,u)){let p=Object(Y.a)(e,t,n,r,o,a,i);return null!=c&&(p=Object(s.a)(p,c)),Object(er.a)(p,u,l,d)}const p=Object(v.a)(e,"x","conv2d","float32"),h=Object(v.a)(t,"filter","conv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=Object(ee.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),R.b(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),R.b(4===h.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`)),null!=i&&R.b(R.v(r),(()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`)),R.b(f.shape[3]===h.shape[2],(()=>`Error in conv2d: depth of input (${f.shape[3]}) must match input depth for filter ${h.shape[2]}.`)),R.b(Ot.h(n,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),R.b("NHWC"===o,(()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`));const g=Ot.a(f.shape,h.shape,n,a,r,i);let b,y;null!=c&&(b=Object(v.a)(c,"bias","fused conv2d"),[b]=Object(Wn.makeTypesMatch)(b,p),Je.a(g.outShape,b.shape)),null!=l&&(y=Object(v.a)(l,"prelu weights","fused conv2d"));const A=(e,t)=>{const[o,i,s,c]=t,l=Object(er.c)(e,s,u);R.b(Ot.i(a),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`));const d=[Object(Jn.a)(i.shape,l,o,n,r),Qn(i,l,o.shape,n,r)];if(null!=c){const e=Object(er.b)(c,l);d.push(e)}return d},x={x:f,filter:h,bias:b,preluActivationWeights:y},k={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i,activation:u,leakyreluAlpha:d};if(null==c){return Object(Fe.a)(((e,t,n)=>{let r=Q.a.runKernel(J.lb,x,k);return n([t,e,r]),m&&(r=Object(ee.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:A}}))(f,h)}return Object(Fe.a)(((e,t,n,r)=>{let o=Q.a.runKernel(J.lb,x,k);return r([t,e,o,n]),m&&(o=Object(ee.a)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:A}}))(f,h,b)}});const nr=Object(C.b)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o,a=[1,1],i){let s=e;3===e.rank&&(s=Object(ee.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:c},l={strides:r,pad:o,dimRoundingMode:i,dilations:a,filterShape:n};return Q.a.runKernel(J.Q,u,l)}});const rr=Object(C.b)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o,a=[1,1],i){let s=t,c=!1;3===t.rank&&(c=!0,s=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},l={strides:r,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},d=Q.a.runKernel(J.R,u,l);return c?Object(ee.a)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const or=Object(C.b)({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:c,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(!1===Object(er.d)(Q.a.state.gradientDepth,u)){let p=Object(ce.a)(e,t,n,r,o,a,i);return null!=c&&(p=Object(s.a)(p,c)),Object(er.a)(p,u,l,d)}const p=Object(v.a)(e,"x","depthwiseConv2d","float32"),h=Object(v.a)(t,"filter","depthwiseConv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=Object(ee.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),R.b(4===f.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`)),R.b(4===h.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`)),R.b(f.shape[3]===h.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`)),null==a&&(a=[1,1]),R.b(Ot.h(n,a),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),null!=i&&R.b(R.v(r),(()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${i} but got pad ${r}.`));const g=Ot.a(f.shape,h.shape,n,a,r,i,!0);let b,y;null!=c&&(b=Object(v.a)(c,"bias","fused conv2d"),[b]=Object(Wn.makeTypesMatch)(b,p),Je.a(g.outShape,b.shape)),null!=l&&(y=Object(v.a)(l,"prelu weights","fused depthwiseConv2d"));const A=(e,t)=>{R.b(Ot.i(a),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`));const[o,s,c,l]=t,d=Object(er.c)(e,c,u),p=rr(s.shape,d,o,n,r,a,i),h=nr(s,d,o.shape,n,r,a,i);if(null!=l){return[p,h,Object(er.b)(b,d)]}return[p,h]},x={x:f,filter:h,bias:b,preluActivationWeights:y},k={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i,activation:u,leakyreluAlpha:d};if(null==c){return Object(Fe.a)(((e,t,n)=>{let r=Q.a.runKernel(J.mb,x,k);return n([t,e,r]),m&&(r=Object(ee.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:A}}))(f,h)}return Object(Fe.a)(((e,t,n,r)=>{let o=Q.a.runKernel(J.mb,x,k);return r([t,e,o,n]),m&&(o=Object(ee.a)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:A}}))(f,h,b)}});const ar=Object(C.b)({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:o,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:c}){if(!1===Object(er.d)(Q.a.state.gradientDepth,a)){let u=Object(k.a)(e,t,n,r);return null!=o&&(u=Object(s.a)(u,o)),Object(er.a)(u,a,i,c)}let u=Object(v.a)(e,"a","fused matMul"),l=Object(v.a)(t,"b","fused matMul");[u,l]=Object(Wn.makeTypesMatch)(u,l);const d=n?u.shape[u.rank-2]:u.shape[u.rank-1],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?u.shape[u.rank-1]:u.shape[u.rank-2],f=r?l.shape[l.rank-2]:l.shape[l.rank-1],m=u.shape.slice(0,-2),g=l.shape.slice(0,-2),b=R.O(m),y=R.O(g);R.b(u.rank>=2&&l.rank>=2&&u.rank===l.rank,(()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${u.rank} and ${l.rank}.`)),R.b(R.a(m,g),(()=>`Error in fused matMul: outer dimensions (${m}) and (${g}) of Tensors with shapes ${u.shape} and ${l.shape} must match.`)),R.b(d===p,(()=>`Error in fused matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`));const A=u.shape.slice(0,-2).concat([h,f]),x=n?Object(ee.a)(u,[b,d,h]):Object(ee.a)(u,[b,h,d]),w=r?Object(ee.a)(l,[y,f,p]):Object(ee.a)(l,[y,p,f]);let C,S;null!=o&&(C=Object(v.a)(o,"bias","fused matMul"),[C]=Object(Wn.makeTypesMatch)(C,u),Je.a(A,C.shape)),null!=i&&(S=Object(v.a)(i,"prelu weights","fused matMul"));const O=(e,t)=>{const[i,s,c,u]=t,l=Object(er.c)(Object(ee.a)(e,c.shape),c,a);let d,p;if(n||r?!n&&r?(d=Object(k.a)(l,s,!1,!1),p=Object(k.a)(l,i,!0,!1)):n&&!r?(d=Object(k.a)(s,l,!1,!0),p=Object(k.a)(i,l,!1,!1)):(d=Object(k.a)(s,l,!0,!0),p=Object(k.a)(l,i,!0,!0)):(d=Object(k.a)(l,s,!1,!0),p=Object(k.a)(i,l,!0,!1)),null!=o){return[d,p,Object(er.b)(u,l)]}return[d,p]},E={a:x,b:w,bias:C,preluActivationWeights:S},I={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:c};if(null==o){return Object(Fe.a)(((e,t,n)=>{const r=Q.a.runKernel(J.kd,E,I);return n([e,t,r]),{value:Object(ee.a)(r,A),gradFunc:O}}))(x,w)}return Object(Fe.a)(((e,t,n,r)=>{const o=Q.a.runKernel(J.kd,E,I);return r([e,t,o,n]),{value:Object(ee.a)(o,A),gradFunc:O}}))(x,w,C)}});const ir=Object(C.b)({hammingWindow_:function(e){return Xn(e,.54,.46)}});const sr=Object(C.b)({hannWindow_:function(e){return Xn(e,.5,.5)}});const cr=Object(C.b)({frame_:function(e,t,n,r=!1,o=0){let a=0;const i=[];for(;a+t<=e.size;)i.push(Object(O.a)(e,a,t)),a+=n;if(r)for(;a<e.size;){const r=a+t-e.size,s=Object(x.a)([Object(O.a)(e,a,t-r),Object(we.a)([r],o)]);i.push(s),a+=n}return 0===i.length?Cn([],[0,t]):Object(ee.a)(Object(x.a)(i),[i.length,t])}});const ur=Object(C.b)({stft_:function(e,t,n,r,o=sr){null==r&&(r=Yn(t));const a=cr(e,t,n),i=Object(w.a)(a,o(t));return Object(pn.a)(i,r)}});const lr=Object(C.b)({cropAndResize_:function(e,t,n,r,o="bilinear",a=0){const i=Object(v.a)(e,"image","cropAndResize"),s=Object(v.a)(t,"boxes","cropAndResize","float32"),c=Object(v.a)(n,"boxInd","cropAndResize","int32"),u=s.shape[0];R.b(4===i.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`)),R.b(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`)),R.b(1===c.rank&&c.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`)),R.b(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),R.b(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),R.b("bilinear"===o||"nearest"===o,(()=>`method must be bilinear or nearest, but was ${o}`));const l={image:i,boxes:s,boxInd:c},d={method:o,extrapolationValue:a,cropSize:r};return Q.a.runKernel(J.L,l,d)}});const dr=Object(C.b)({flipLeftRight_:function(e){const t=Object(v.a)(e,"image","flipLeftRight","float32");R.b(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return Q.a.runKernel(J.gb,n,{})}});const pr=Object(C.b)({grayscaleToRGB_:function(e){const t=Object(v.a)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];R.b(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),R.b(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Object(xe.a)(t,o)}});const hr=Object(C.b)({rotateWithOffset_:function(e,t,n=0,r=.5){const o=Object(v.a)(e,"image","rotateWithOffset","float32");R.b(4===o.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`));const a={image:o},i={radians:t,fillValue:n,center:r};return Q.a.runKernel(J.wc,a,i)}});function fr(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return n=Math.min(n,i),R.b(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),R.b(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),R.b(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),R.b(1===t.rank,(()=>"scores must be a 1D tensor")),R.b(t.shape[0]===i,(()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`)),R.b(0<=a&&a<=1,(()=>`softNmsSigma must be in [0, 1], but was '${a}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}const mr=Object(C.b)({nonMaxSuppression_:function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){const a=Object(v.a)(e,"boxes","nonMaxSuppression","float32"),i=Object(v.a)(t,"scores","nonMaxSuppression","float32"),s=fr(a,i,n,r,o),c={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:o=s.scoreThreshold};return Q.a.runKernel(J.Yb,{boxes:a,scores:i},c)}});var gr=n(60);const br=async function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){const a=Object(v.a)(e,"boxes","nonMaxSuppressionAsync"),i=Object(v.a)(t,"scores","nonMaxSuppressionAsync"),s=fr(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const c=await Promise.all([a.data(),i.data()]),u=c[0],l=c[1],{selectedIndices:d}=Object(gr.a)(u,l,n,r,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),Object(kn.a)(d,"int32")};const yr=Object(C.b)({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,a=0){const i=Object(v.a)(e,"boxes","nonMaxSuppression"),s=Object(v.a)(t,"scores","nonMaxSuppression"),c=fr(i,s,n,r,o,a),u={boxes:i,scores:s},l={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:o=c.scoreThreshold,softNmsSigma:a=c.softNmsSigma},d=Q.a.runKernel(J.ac,u,l);return{selectedIndices:d[0],selectedScores:d[1]}}});const Ar=async function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,a=0){const i=Object(v.a)(e,"boxes","nonMaxSuppressionAsync"),s=Object(v.a)(t,"scores","nonMaxSuppressionAsync"),c=fr(i,s,n,r,o,a);n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,a=c.softNmsSigma;const u=await Promise.all([i.data(),s.data()]),l=u[0],d=u[1],{selectedIndices:p,selectedScores:h}=Object(gr.c)(l,d,n,r,o,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Object(kn.a)(p,"int32"),selectedScores:Object(kn.a)(h)}};const vr=Object(C.b)({nonMaxSuppressionPadded_:function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,a=!1){const i=Object(v.a)(e,"boxes","nonMaxSuppression"),s=Object(v.a)(t,"scores","nonMaxSuppression"),c=fr(i,s,n,r,o,null),u={boxes:i,scores:s},l={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},d=Q.a.runKernel(J.Zb,u,l);return{selectedIndices:d[0],validOutputs:d[1]}}});const xr=async function(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,a=!1){const i=Object(v.a)(e,"boxes","nonMaxSuppressionAsync"),s=Object(v.a)(t,"scores","nonMaxSuppressionAsync"),c=fr(i,s,n,r,o,null),u=c.maxOutputSize,l=c.iouThreshold,d=c.scoreThreshold,[p,h]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:m}=Object(gr.b)(p,h,u,l,d,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Object(kn.a)(f,"int32"),validOutputs:Object(Xt.a)(m,"int32")}};const kr=Object(C.b)({resizeBilinear_:function(e,t,n=!1,r=!1){const o=Object(v.a)(e,"images","resizeBilinear");R.b(3===o.rank||4===o.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`)),R.b(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),R.b(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=Object(ee.a)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},c={alignCorners:n,halfPixelCenters:r,size:t},u=Q.a.runKernel(J.rc,s,c);return i?Object(ee.a)(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const wr=Object(C.b)({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const o=Object(v.a)(e,"images","resizeNearestNeighbor");R.b(3===o.rank||4===o.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`)),R.b(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),R.b("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),R.b(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=Object(ee.a)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},c={alignCorners:n,halfPixelCenters:r,size:t},u=Q.a.runKernel(J.tc,s,c);return i?Object(ee.a)(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Cr=Object(C.b)({threshold_:function(e,t="binary",n=!1,r=.5){const o=Object(v.a)(e,"image","threshold"),a=o.shape[0]*o.shape[1];let i,c,u,l,d=Object(w.a)(Object(kn.a)([r]),255);if(R.b(3===o.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`)),R.b(3===o.shape[2]||1===o.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`)),R.b("int32"===o.dtype||"float32"===o.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`)),R.b("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===o.shape[2]){[i,c,u]=Object(hn.a)(o,[1,1,1],-1);const e=Object(w.a)(i,.2989),t=Object(w.a)(c,.587),n=Object(w.a)(u,.114);l=Object(s.a)(Object(s.a)(e,t),n)}else l=e;if("otsu"===t){d=function(e,t){let n,r,o,a,i,c,u=Object(kn.a)([-1]),l=Object(kn.a)([0]),d=Object(kn.a)([0]);for(let p=0;p<e.size-1;p++){n=Object(O.a)(e,0,p+1),r=Object(O.a)(e,p+1),i=Object(de.a)(Object(Ke.a)(n),t),c=Object(de.a)(Object(Ke.a)(r),t);const h=Object(Ke.a)(Object(w.a)(n,Object(Pt.a)(0,n.size)));o=Object(de.a)(h,Object(Ke.a)(n));const f=Object(we.a)(r.shape,n.size),m=Object(s.a)(Object(Pt.a)(0,r.size),f),g=Object(w.a)(r,m);a=Object(de.a)(Object(Ke.a)(g),Object(Ke.a)(r));const b=Object(He.a)(o,a),y=Object(He.a)(o,a),A=Object(w.a)(i,c);d=Object(w.a)(Object(w.a)(A,b),y);const v=Object(Ee.a)(d,l);l=Object(Dn.a)(v,d,l),u=Object(Dn.a)(v,Object(kn.a)([p]),u)}return u}(Object(D.a)(Object(L.a)(Object(Kt.a)(l),"int32"),Object(xn.a)([]),256),a)}const p=n?Object(De.a)(l,d):Object(Ee.a)(l,d);return Object(L.a)(Object(w.a)(p,255),"int32")}});const Sr=Object(C.b)({transform_:function(e,t,n="nearest",r="constant",o=0,a){const i=Object(v.a)(e,"image","transform","float32"),s=Object(v.a)(t,"transforms","transform","float32");R.b(4===i.rank,(()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`)),R.b(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),R.b(null==a||2===a.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`));const c={image:i,transforms:s},u={interpolation:n,fillMode:r,fillValue:o,outputShape:a};return Q.a.runKernel(J.ed,c,u)}});const Or=Object(C.b)({bandPart_:function(e,t,n){Object(R.b)(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),Object(R.b)(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const r=Object(v.a)(e,"a","bandPart");Object(R.b)(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const o=r.shape,[a,i]=r.shape.slice(-2);if(!(t<=a))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=a),n<0&&(n=i);const s=Object(ee.a)(Object(Pt.a)(0,a,1,"int32"),[-1,1]),c=Object(Pt.a)(0,i,1,"int32"),u=Object(He.a)(s,c),l=Object(Xe.a)(Object(De.a)(u,Object(Xt.a)(+t,"int32")),Object(Ie.a)(u,Object(Xt.a)(-n,"int32"))),d=Object($n.a)([a,i],r.dtype);return Object(ee.a)(Object(bn.a)(Object(Bn.a)(Object(ee.a)(r,[-1,a,i])).map((e=>Object(Dn.a)(l,e,d)))),o)}});const Er=Object(C.b)({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Object(R.b)(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)Object(R.b)(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=Object(hn.a)(e,e.shape[0],0).map((e=>Object(gn.a)(e,[0])));Object(R.b)(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let t=0;t<e.length;++t)n.push(Q.a.tidy((()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){const t=Object(w.a)(Object(Ke.a)(Object(w.a)(n[r],e)),n[r]);e=Object(He.a)(e,t)}return Object(de.a)(e,Un(e,"euclidean"))})));return t?Object(bn.a)(n,0):n}});var Ir=n(17);function Tr(e,t=!1){return Q.a.tidy((()=>{Object(R.b)(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let o=ke(n),a=Object(U.a)(e);const i=Cn([[1]],[1,1]);let s=Object(U.a)(i);const c=n>=r?r:n;for(let e=0;e<c;++e){const t=a,c=s,u=o;[s,a,o]=Q.a.tidy((()=>{const t=Object(O.a)(a,[e,e],[n-e,1]),c=Un(t),u=Object(O.a)(a,[e,e],[1,1]),l=Object(Dn.a)(Object(Ee.a)(u,0),Cn([[-1]]),Cn([[1]])),d=Object(He.a)(u,Object(w.a)(l,c)),p=Object(de.a)(t,d);s=1===p.shape[0]?Object(U.a)(i):Object(x.a)([i,Object(O.a)(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const h=Object(ze.a)(Object(de.a)(Object(k.a)(l,d),c)),f=Object(O.a)(a,[e,0],[n-e,r]),m=Object(w.a)(h,s),g=Object(Fn.a)(s);if(0===e)a=Object(He.a)(f,Object(k.a)(m,Object(k.a)(g,f)));else{const t=Object(He.a)(f,Object(k.a)(m,Object(k.a)(g,f)));a=Object(x.a)([Object(O.a)(a,[0,0],[e,r]),t],0)}const b=Object(Fn.a)(m),y=Object(O.a)(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=Object(He.a)(y,Object(k.a)(Object(k.a)(y,s),b));else{const t=Object(He.a)(y,Object(k.a)(Object(k.a)(y,s),b));o=Object(x.a)([Object(O.a)(o,[0,0],[n,e]),t],1)}return[s,a,o]})),Object(Ir.d)([t,c,u])}return!t&&n>r&&(o=Object(O.a)(o,[0,0],[n,r]),a=Object(O.a)(a,[0,0],[r,r])),[o,a]}))}const Nr=Object(C.b)({qr_:function(e,t=!1){if(Object(R.b)(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return Tr(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=Object(Bn.a)(Object(ee.a)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];r.forEach((e=>{const[n,r]=Tr(e,t);o.push(n),a.push(r)}));return[Object(ee.a)(Object(bn.a)(o,0),e.shape),Object(ee.a)(Object(bn.a)(a,0),e.shape)]}}});var Rr=n(33);const jr=Object(C.b)({computeWeightedLoss_:function(e,t,n=Rr.a.SUM_BY_NONZERO_WEIGHTS){const r=Object(v.a)(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=Object(v.a)(t,"weights","computeWeightedLoss"));const a=null==o?r:Object(w.a)(r,o);if(n===Rr.a.NONE)return a;if(n===Rr.a.SUM)return Object(Ke.a)(a);if(n===Rr.a.MEAN){if(null==o)return Object(at.a)(a);{const e=r.size/o.size,t=Object(de.a)(Object(Ke.a)(a),Object(Ke.a)(o));return e>1?Object(de.a)(t,Object(Xt.a)(e)):t}}if(n===Rr.a.SUM_BY_NONZERO_WEIGHTS){if(null==o)return Object(de.a)(Object(Ke.a)(a),Object(Xt.a)(r.size));{const e=Object(w.a)(o,Object(it.a)(r.shape)),t=Object(L.a)(Object(Ke.a)(Object(bt.a)(e,Object(Xt.a)(0))),"float32");return Object(de.a)(Object(Ke.a)(a),t)}}throw Error(`Unknown reduction: ${n}`)}});const Br=Object(C.b)({absoluteDifference_:function(e,t,n,r=Rr.a.SUM_BY_NONZERO_WEIGHTS){const a=Object(v.a)(e,"labels","absoluteDifference"),i=Object(v.a)(t,"predictions","absoluteDifference");let s=null;null!=n&&(s=Object(v.a)(n,"weights","absoluteDifference")),Object(R.e)(a.shape,i.shape,"Error in absoluteDifference: ");const c=Object(o.a)(Object(He.a)(a,i));return jr(c,s,r)}});const _r=Object(C.b)({cosineDistance_:function(e,t,n,r,o=Rr.a.SUM_BY_NONZERO_WEIGHTS){const a=Object(v.a)(e,"labels","cosineDistance"),i=Object(v.a)(t,"predictions","cosineDistance");let s=null;null!=r&&(s=Object(v.a)(r,"weights","cosineDistance")),Object(R.e)(a.shape,i.shape,"Error in cosineDistance: ");const c=Object(Xt.a)(1),u=Object(He.a)(c,Object(Ke.a)(Object(w.a)(a,i),n,!0));return jr(u,s,o)}});const Dr=Object(C.b)({hingeLoss_:function(e,t,n,r=Rr.a.SUM_BY_NONZERO_WEIGHTS){let o=Object(v.a)(e,"labels","hingeLoss");const a=Object(v.a)(t,"predictions","hingeLoss");let i=null;null!=n&&(i=Object(v.a)(n,"weights","hingeLoss")),Object(R.e)(o.shape,a.shape,"Error in hingeLoss: ");const s=Object(Xt.a)(1);o=Object(He.a)(Object(w.a)(Object(Xt.a)(2),o),s);const c=Object(zt.a)(Object(He.a)(s,Object(w.a)(o,a)));return jr(c,i,r)}});const Mr=Object(C.b)({huberLoss_:function(e,t,n,r=1,a=Rr.a.SUM_BY_NONZERO_WEIGHTS){const i=Object(v.a)(e,"labels","huberLoss"),c=Object(v.a)(t,"predictions","huberLoss");let u=null;null!=n&&(u=Object(v.a)(n,"weights","huberLoss")),Object(R.e)(i.shape,c.shape,"Error in huberLoss: ");const l=Object(Xt.a)(r),d=Object(o.a)(Object(He.a)(c,i)),p=Object(lt.a)(d,l),h=Object(He.a)(d,p),f=Object(s.a)(Object(w.a)(Object(Xt.a)(.5),Object(ht.a)(p)),Object(w.a)(l,h));return jr(f,u,a)}});const $r=Object(C.b)({logLoss_:function(e,t,n,r=1e-7,o=Rr.a.SUM_BY_NONZERO_WEIGHTS){const a=Object(v.a)(e,"labels","logLoss"),i=Object(v.a)(t,"predictions","logLoss");let c=null;null!=n&&(c=Object(v.a)(n,"weights","logLoss")),Object(R.e)(a.shape,i.shape,"Error in logLoss: ");const u=Object(Xt.a)(1),l=Object(Xt.a)(r),d=Object(ze.a)(Object(w.a)(a,Object(Pe.a)(Object(s.a)(i,l)))),p=Object(w.a)(Object(He.a)(u,a),Object(Pe.a)(Object(s.a)(Object(He.a)(u,i),l))),h=Object(He.a)(d,p);return jr(h,c,o)}});const Pr=Object(C.b)({meanSquaredError_:function(e,t,n,r=Rr.a.SUM_BY_NONZERO_WEIGHTS){const o=Object(v.a)(e,"labels","meanSquaredError"),a=Object(v.a)(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=Object(v.a)(n,"weights","meanSquaredError")),Object(R.e)(o.shape,a.shape,"Error in meanSquaredError: ");const s=Object(mn.a)(o,a);return jr(s,i,r)}});const Lr=Object(C.b)({sigmoidCrossEntropy_:function(e,t,n,r=0,a=Rr.a.SUM_BY_NONZERO_WEIGHTS){let i=Object(v.a)(e,"multiClassLabels","sigmoidCrossEntropy");const c=Object(v.a)(t,"logits","sigmoidCrossEntropy");let u=null;if(null!=n&&(u=Object(v.a)(n,"weights","sigmoidCrossEntropy")),Object(R.e)(i.shape,c.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Object(Xt.a)(r),t=Object(Xt.a)(1),n=Object(Xt.a)(.5);i=Object(s.a)(Object(w.a)(i,Object(He.a)(t,e)),Object(w.a)(n,e))}const l=function(e,t){const n=Object(v.a)(e,"labels","sigmoidCrossEntropyWithLogits"),r=Object(v.a)(t,"logits","sigmoidCrossEntropyWithLogits");Object(R.e)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Object(zt.a)(r),i=Object(w.a)(r,n),c=Object(Le.a)(Object(ye.a)(Object(ze.a)(Object(o.a)(r))));return Object(s.a)(Object(He.a)(a,i),c)}(i,c);return jr(l,u,a)}});const Fr=Object(C.b)({softmaxCrossEntropy_:function(e,t,n,r=0,o=Rr.a.SUM_BY_NONZERO_WEIGHTS){let a=Object(v.a)(e,"onehotLabels","softmaxCrossEntropy");const i=Object(v.a)(t,"logits","softmaxCrossEntropy");let c=null;if(null!=n&&(c=Object(v.a)(n,"weights","softmaxCrossEntropy")),Object(R.e)(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Object(Xt.a)(r),t=Object(Xt.a)(1),n=Object(Xt.a)(a.shape[1]);a=Object(s.a)(Object(w.a)(a,Object(He.a)(t,e)),Object(de.a)(e,n))}const u=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Object(Fe.a)(((e,t,r)=>{const o=Ye(t,[n],!0),a=Object(He.a)(Object(L.a)(t,"float32"),o);r([e,a]);const i=Object(ze.a)(Object(w.a)(a,e));return{value:Object(Ke.a)(i,[n]),gradFunc:(e,t)=>{const[r,o]=t,a=Object(qe.e)(e.shape,[n]);return[Object(w.a)(Object(ee.a)(e,a),Object(He.a)(Object(L.a)(r,"float32"),Object(ye.a)(o))),Object(w.a)(Object(ee.a)(e,a),Object(He.a)(Object(ye.a)(o),Object(L.a)(r,"float32")))]}}}))(e,t)}(a,i);return jr(u,c,o)}});const zr=Object(C.b)({sparseFillEmptyRows_:function(e,t,n,r){const o=Object(v.a)(e,"indices","sparseFillEmptyRows"),a=Object(v.a)(t,"values","sparseFillEmptyRows"),i=Object(v.a)(n,"denseShape","sparseFillEmptyRows"),s=Object(v.a)(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==o.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${o.shape}`);if(1!==a.rank)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(1!==i.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==s.rank)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const c={indices:o,values:a,denseShape:i,defaultValue:s},u=Q.a.runKernel(J.Kc,c);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});const Ur=Object(C.b)({sparseReshape_:function(e,t,n){const r=Object(v.a)(e,"inputIndices","sparseReshape"),o=Object(v.a)(t,"inputShape","sparseReshape"),a=Object(v.a)(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==o.rank)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(1!==a.rank)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:r,inputShape:o,newShape:a},s=Q.a.runKernel(J.Lc,i);return{outputIndices:s[0],outputShape:s[1]}}});const Wr=Object(C.b)({sparseSegmentMean_:function(e,t,n){const r=Object(v.a)(e,"data","sparseSegmentMean"),o=Object(v.a)(t,"indices","sparseSegmentMean"),a=Object(v.a)(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${o.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${a.shape}`);const i={data:r,indices:o,segmentIds:a};return Q.a.runKernel(J.Mc,i)}});const Vr=Object(C.b)({sparseSegmentSum_:function(e,t,n){const r=Object(v.a)(e,"data","sparseSegmentSum"),o=Object(v.a)(t,"indices","sparseSegmentSum"),a=Object(v.a)(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${o.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${a.shape}`);const i={data:r,indices:o,segmentIds:a};return Q.a.runKernel(J.Nc,i)}});const qr=Object(C.b)({stringNGrams_:function(e,t,n,r,o,a,i,s){const c=Object(v.a)(e,"data","stringNGrams","string");if("string"!==c.dtype)throw new Error("Data must be of datatype string");if(1!==c.shape.length)throw new Error(`Data must be a vector, saw: ${c.shape}`);const u=Object(v.a)(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const l={separator:n,nGramWidths:r,leftPad:o,rightPad:a,padWidth:i,preserveShortSequences:s},d={data:c,dataSplits:u},p=Q.a.runKernel(J.Vc,d,l);return{nGrams:p[0],nGramsSplits:p[1]}}});const Gr=Object(C.b)({stringSplit_:function(e,t,n=!0){const r=Object(v.a)(e,"input","stringSplit","string"),o=Object(v.a)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==o.rank)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const a={skipEmpty:n},i={input:r,delimiter:o},s=Q.a.runKernel(J.Wc,i,a);return{indices:s[0],values:s[1],shape:s[2]}}});const Hr=Object(C.b)({stringToHashBucketFast_:function(e,t){const n=Object(v.a)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return Q.a.runKernel(J.Xc,o,r)}}),Kr={fft:un.a,ifft:ln.a,rfft:pn.a,irfft:dn.a},Yr={hammingWindow:ir,hannWindow:sr,frame:cr,stft:ur},Xr={flipLeftRight:dr,grayscaleToRGB:pr,resizeNearestNeighbor:wr,resizeBilinear:kr,rotateWithOffset:hr,cropAndResize:lr,nonMaxSuppression:mr,nonMaxSuppressionAsync:br,nonMaxSuppressionWithScore:yr,nonMaxSuppressionWithScoreAsync:Ar,nonMaxSuppressionPadded:vr,nonMaxSuppressionPaddedAsync:xr,threshold:Cr,transform:Sr},Zr={bandPart:Or,gramSchmidt:Er,qr:Nr},Qr={absoluteDifference:Br,computeWeightedLoss:jr,cosineDistance:_r,hingeLoss:Dr,huberLoss:Mr,logLoss:$r,meanSquaredError:Pr,sigmoidCrossEntropy:Lr,softmaxCrossEntropy:Fr},Jr={sparseFillEmptyRows:zr,sparseReshape:Ur,sparseSegmentMean:Wr,sparseSegmentSum:Vr},eo={stringNGrams:qr,stringSplit:Gr,stringToHashBucketFast:Hr}},function(e,t,n){"use strict";let r;function o(e){r=e}function a(e){if(void 0!==r)return r;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function i(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}n.r(t),n.d(t,"mockIsMobile",(function(){return o})),n.d(t,"isMobile",(function(){return a})),n.d(t,"isBrowser",(function(){return i}))},function(e,t,n){"use strict";function r(e,t=!1){console.log(e.toString(t))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({floorDiv_:function(e,t){let n=Object(i.a)(e,"a","floorDiv"),s=Object(i.a)(t,"b","floorDiv");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.ib,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(21),u=n(4);const l=Object(u.b)({maximum_:function(e,t){let n=Object(i.a)(e,"a","maximum"),u=Object(i.a)(t,"b","maximum");[n,u]=Object(a.makeTypesMatch)(n,u),"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),u=Object(c.a)(u,"int32")),Object(s.a)(n.shape,u.shape);const l={a:n,b:u};return r.a.runKernel(o.Pb,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(21),c=n(34),u=n(4),l=n(9);const d=Object(u.b)({avgPool_:function(e,t,n,u,d){const p=Object(a.a)(e,"x","avgPool","float32");i.b(c.h(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let h=p,f=!1;3===p.rank&&(f=!0,h=Object(l.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),i.b(4===h.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${h.rank}.`)),null!=d&&i.b(i.v(u),(()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${d} but got pad ${u}.`));const m={x:h},g={filterSize:t,strides:n,pad:u,dimRoundingMode:d};let b=r.a.runKernel(o.o,m,g);return b=Object(s.a)(b,p.dtype),f?Object(l.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({batchToSpaceND_:function(e,t,n){const s=Object(a.a)(e,"x","batchToSpaceND"),c=t.reduce(((e,t)=>e*t));i.b(s.rank>=1+t.length,(()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`)),i.b(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),i.b(s.shape[0]%c==0,(()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${c}`));const u={x:s},l={blockShape:t,crops:n};return r.a.runKernel(o.t,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({bincount_:function(e,t,n){const s=Object(a.a)(e,"x","bincount"),c=Object(a.a)(t,"weights","bincount");i.b("int32"===s.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`)),i.b(n>=0,(()=>`size must be non-negative, but got ${n}.`)),i.b(c.size===s.size||0===c.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${c.shape}.`));const u={x:s,weights:c},l={size:n};return r.a.runKernel(o.u,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({equal_:function(e,t){let n=Object(i.a)(e,"a","equal","string_or_numeric"),c=Object(i.a)(t,"b","equal","string_or_numeric");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.Z,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({elu_:function(e){const t={x:Object(a.a)(e,"x","elu","float32")};return r.a.runKernel(o.X,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({floor_:function(e){const t={x:Object(a.a)(e,"x","floor","float32")};return r.a.runKernel(o.hb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({gather_:function(e,t,n=0,i=0){const s={x:Object(a.a)(e,"x","gather"),indices:Object(a.a)(t,"indices","gather","int32")},c={axis:n,batchDims:i};return r.a.runKernel(o.ob,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({greaterEqual_:function(e,t){let n=Object(i.a)(e,"a","greaterEqual","string_or_numeric"),c=Object(i.a)(t,"b","greaterEqual","string_or_numeric");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.qb,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({leakyRelu_:function(e,t=.2){const n={x:Object(a.a)(e,"x","leakyRelu")},i={alpha:t};return r.a.runKernel(o.zb,n,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({log1p_:function(e){const t={x:Object(a.a)(e,"x","log1p")};return r.a.runKernel(o.Eb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({softplus_:function(e){const t={x:Object(a.a)(e,"x","softplus")};return r.a.runKernel(o.Ic,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({logicalNot_:function(e){const t={x:Object(a.a)(e,"x","logicalNot","bool")};return r.a.runKernel(o.Hb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(23),s=n(4);const c=Object(s.b)({logicalOr_:function(e,t){const n=Object(a.a)(e,"a","logicalOr","bool"),s=Object(a.a)(t,"b","logicalOr","bool");Object(i.a)(n.shape,s.shape);const c={a:n,b:s};return r.a.runKernel(o.Ib,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(34),c=n(4),u=n(9);const l=Object(c.b)({maxPool_:function(e,t,n,c,l){const d=Object(a.a)(e,"x","maxPool");let p=d,h=!1;3===d.rank&&(h=!0,p=Object(u.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),i.b(4===p.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${p.rank}.`)),i.b(s.h(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),null!=l&&i.b(i.v(c),(()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`));const f={x:p},m={filterSize:t,strides:n,pad:c,dimRoundingMode:l},g=r.a.runKernel(o.Kb,f,m);return h?Object(u.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(21),u=n(4);const l=Object(u.b)({minimum_:function(e,t){let n=Object(i.a)(e,"a","minimum"),u=Object(i.a)(t,"b","minimum");[n,u]=Object(a.makeTypesMatch)(n,u),"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),u=Object(c.a)(u,"int32")),Object(s.a)(n.shape,u.shape);const l={a:n,b:u};return r.a.runKernel(o.Sb,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({notEqual_:function(e,t){let n=Object(i.a)(e,"a","notEqual","string_or_numeric"),c=Object(i.a)(t,"b","notEqual","string_or_numeric");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.bc,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({spaceToBatchND_:function(e,t,n){const s=Object(a.a)(e,"x","spaceToBatchND");i.b(s.rank>=1+t.length,(()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`)),i.b(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),i.b(s.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e),!0),(()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const c={x:s},u={blockShape:t,paddings:n};return r.a.runKernel(o.Jc,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({prelu_:function(e,t){const n={x:Object(a.a)(e,"x","prelu"),alpha:Object(a.a)(t,"alpha","prelu")};return r.a.runKernel(o.ic,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(41),o=n(4),a=n(81);const i=Object(o.b)({randomUniform_:function(e,t=0,n=1,o="float32",i){const s=Object(r.a)(e,o),c=new a.c(t,n,null,i);for(let e=0;e<s.values.length;e++)s.values[e]=c.nextValue();return s.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({relu6_:function(e){const t={x:Object(a.a)(e,"x","relu6")};return r.a.runKernel(o.pc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({round_:function(e){const t={x:Object(a.a)(e,"x","round")};return r.a.runKernel(o.xc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(48),o=n(32),a=n(97),i=n(11),s=n(4),c=n(91),u=n(9),l=n(49),d=n(16),p=n(24),h=n(92);const f=Object(s.b)({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let s;if(t<=2){const r=Object(u.a)(e,[n,t]);s=Object(h.a)(r)}else{const f=[n,2*(t-1)],m=Object(u.a)(Object(c.a)(e),[n,t]),g=Object(u.a)(Object(a.a)(e),[n,t]),b=Object(l.a)(Object(p.a)(m,[0,1],[n,t-2]),1),y=Object(i.a)(Object(l.a)(Object(p.a)(g,[0,1],[n,t-2]),1),Object(d.a)(-1)),A=Object(o.a)([m,b],1),v=Object(o.a)([g,y],1),x=Object(u.a)(Object(r.a)(A,v),[f[0],f[1]]);s=Object(h.a)(x)}if(s=Object(c.a)(s),3===e.rank&&0!==e.shape[0]){const t=s,n=e.shape[0];s=Object(u.a)(s,[n,s.shape[0]/n,s.shape[1]]),t.dispose()}return s}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({squaredDifference_:function(e,t){let n=Object(i.a)(e,"a","squaredDifference"),c=Object(i.a)(t,"b","squaredDifference");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.Sc,u,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({step_:function(e,t=0){const n={x:Object(a.a)(e,"x","step")},i={alpha:t};return r.a.runKernel(o.Tc,n,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(8),a=n(43);function i(e,t,n){if(Object(o.d)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const i=Object(r.c)(e,n);if(3!==i.length&&1!==i.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===i.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(a.a)(e,t,i,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(152),o=n(3);const a=async function(e){const t=Object(o.a)(e,"condition","whereAsync","bool"),n=await t.data(),a=Object(r.a)(t.shape,n);return e!==t&&t.dispose(),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(41);function o(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const o=Object(r.a)(e,"int32"),a=Object(r.a)([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const r=o.indexToLoc(n[t]),i=t*e.length;a.values.set(r,i)}return a.toTensor()}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__153__},function(e,t,n){var r=n(300),o=n(301),a=n(302),i=n(304);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||i()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(8),i=n(4),s=n(9);const c=Object(i.b)({conv2DBackpropInput_:function(e,t,n,i,c,u="NHWC",l){a.b(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let d=e,p=t,h=!1;3===t.rank&&(h=!0,p=Object(s.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),d=[1,e[0],e[1],e[2]]),a.b(4===d.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${d.length}.`)),a.b(4===p.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${p.rank}`)),a.b(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const f="NHWC"===u?d[3]:d[1],m="NHWC"===u?p.shape[3]:p.shape[1];a.b(f===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`)),a.b(m===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${m}) must match output depth for filter ${n.shape[3]}.`)),null!=l&&a.b(a.v(c),(()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`));const g={dy:p,filter:n},b={strides:i,pad:c,dataFormat:u,dimRoundingMode:l,inputShape:d},y=r.a.runKernel(o.F,g,b);return h?Object(s.a)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}})},function(e,t,n){n(159);var r=n(18),o=r.Service,a=r.apiLoader;a.services.s3={},r.S3=o.defineService("s3",["2006-03-01"]),n(383),Object.defineProperty(a.services.s3,"2006-03-01",{get:function(){var e=n(386);return e.paginators=n(387).pagination,e.waiters=n(388).waiters,e},enumerable:!0,configurable:!0}),e.exports=r.S3},function(e,t,n){(function(r){var o;if("function"==typeof fetch&&(void 0!==r&&r.fetch?o=r.fetch:"undefined"!=typeof window&&window.fetch&&(o=window.fetch)),"undefined"==typeof window||void 0===window.document){var a=o||n(296);a.default&&(a=a.default),t.default=a,e.exports=t.default}}).call(this,n(73))},,function(e,t,n){var r=n(35);r.crypto.lib=n(352),r.Buffer=n(84).Buffer,r.url=n(357),r.querystring=n(256),r.realClock=n(362),r.environment="js",r.createEventStream=n(363).createEventStream,r.isBrowser=function(){return!0},r.isNode=function(){return!1};var o=n(18);if(e.exports=o,n(249),n(250),n(369),n(373),n(374),n(375),n(379),o.XML.Parser=n(380),n(381),void 0===a)var a={browser:!0}},function(e,t,n){var r=n(35),o=n(161),a=n(162),i=n(163).populateHostPrefix;e.exports={buildRequest:function(e){var t=e.httpRequest,n=e.service.api,r=n.targetPrefix+"."+n.operations[e.operation].name,a=n.jsonVersion||"1.0",s=n.operations[e.operation].input,c=new o;1===a&&(a="1.0"),t.body=c.build(e.params||{},s),t.headers["Content-Type"]="application/x-amz-json-"+a,t.headers["X-Amz-Target"]=r,i(e)},extractError:function(e){var t={},n=e.httpResponse;if(t.code=n.headers["x-amzn-errortype"]||"UnknownError","string"==typeof t.code&&(t.code=t.code.split(":")[0]),n.body.length>0)try{var o=JSON.parse(n.body.toString()),a=o.__type||o.code||o.Code;a&&(t.code=a.split("#").pop()),"RequestEntityTooLarge"===t.code?t.message="Request body must be less than 1 MB":t.message=o.message||o.Message||null}catch(o){t.statusCode=n.statusCode,t.message=n.statusMessage}else t.statusCode=n.statusCode,t.message=n.statusCode.toString();e.error=r.error(new Error,t)},extractData:function(e){var t=e.httpResponse.body.toString()||"{}";if(!1===e.request.service.config.convertResponseTypes)e.data=JSON.parse(t);else{var n=e.request.service.api.operations[e.request.operation].output||{},r=new a;e.data=r.parse(t,n)}}}},function(e,t,n){var r=n(35);function o(){}function a(e,t){if(t&&null!=e)switch(t.type){case"structure":return function(e,t){if(t.isDocument)return e;var n={};return r.each(e,(function(e,r){var o=t.members[e];if(o){if("body"!==o.location)return;var i=o.isLocationName?o.name:e,s=a(r,o);void 0!==s&&(n[i]=s)}})),n}(e,t);case"map":return function(e,t){var n={};return r.each(e,(function(e,r){var o=a(r,t.value);void 0!==o&&(n[e]=o)})),n}(e,t);case"list":return function(e,t){var n=[];return r.arrayEach(e,(function(e){var r=a(e,t.member);void 0!==r&&n.push(r)})),n}(e,t);default:return function(e,t){return t.toWireFormat(e)}(e,t)}}o.prototype.build=function(e,t){return JSON.stringify(a(e,t))},e.exports=o},function(e,t,n){var r=n(35);function o(){}function a(e,t){if(t&&void 0!==e)switch(t.type){case"structure":return function(e,t){if(null==e)return;if(t.isDocument)return e;var n={},o=t.members;return r.each(o,(function(t,r){var o=r.isLocationName?r.name:t;if(Object.prototype.hasOwnProperty.call(e,o)){var i=a(e[o],r);void 0!==i&&(n[t]=i)}})),n}(e,t);case"map":return function(e,t){if(null==e)return;var n={};return r.each(e,(function(e,r){var o=a(r,t.value);n[e]=void 0===o?null:o})),n}(e,t);case"list":return function(e,t){if(null==e)return;var n=[];return r.arrayEach(e,(function(e){var r=a(e,t.member);void 0===r?n.push(null):n.push(r)})),n}(e,t);default:return function(e,t){return t.toType(e)}(e,t)}}o.prototype.parse=function(e,t){return a(JSON.parse(e),t)},e.exports=o},function(e,t,n){var r=n(35),o=n(18);e.exports={populateHostPrefix:function(e){if(!e.service.config.hostPrefixEnabled)return e;var t,n,a,i=e.service.api.operations[e.operation];if(function(e){var t=e.service.api,n=t.operations[e.operation],o=t.endpointOperation&&t.endpointOperation===r.string.lowerFirst(n.name);return"NULL"!==n.endpointDiscoveryRequired||!0===o}(e))return e;if(i.endpoint&&i.endpoint.hostPrefix){var s=function(e,t,n){return r.each(n.members,(function(n,o){if(!0===o.hostLabel){if("string"!=typeof t[n]||""===t[n])throw r.error(new Error,{message:"Parameter "+n+" should be a non-empty string.",code:"InvalidParameter"});var a=new RegExp("\\{"+n+"\\}","g");e=e.replace(a,t[n])}})),e}(i.endpoint.hostPrefix,e.params,i.input);!function(e,t){e.host&&(e.host=t+e.host);e.hostname&&(e.hostname=t+e.hostname)}(e.httpRequest.endpoint,s),t=e.httpRequest.endpoint.hostname,n=t.split("."),a=/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/,r.arrayEach(n,(function(e){if(!e.length||e.length<1||e.length>63)throw r.error(new Error,{code:"ValidationError",message:"Hostname label length should be between 1 to 63 characters, inclusive."});if(!a.test(e))throw o.util.error(new Error,{code:"ValidationError",message:e+" is not hostname compatible."})}))}return e}}},function(e,t,n){var r=n(35),o=n(331);function a(e){var t=e.config.region,n=function(e){if(!e)return null;if(s(e))return function(e){return e&&e.startsWith("fips-cn-")||e.startsWith("cn-")&&e.endsWith("-fips")}(e)?"fips-cn-*":function(e){return e&&e.startsWith("fips-us-gov-")||e.startsWith("us-gov-")&&e.endsWith("-fips")}(e)?"fips-us-gov-*":e.startsWith("fips-accesspoint-")?"fips-accesspoint-*":"fips-*";var t=e.split("-");return t.length<3?null:t.slice(0,t.length-2).join("-")+"-*"}(t),r=e.api.endpointPrefix;return[[t,r],[n,r],[t,"*"],[n,"*"],["*",r],["*","*"]].map((function(e){return e[0]&&e[1]?e.join("/"):null}))}function i(e,t){r.each(t,(function(t,n){"globalEndpoint"!==t&&(void 0!==e.config[t]&&null!==e.config[t]||(e.config[t]=n))}))}function s(e){return e&&(e.startsWith("fips-")||e.endsWith("-fips"))}function c(e){return s(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":"fips-aws-us-gov-global"===e?"us-gov-west-1":e.replace(/fips-(dkr-|prod-|accesspoint-)?|-fips/,""):e}e.exports={configureEndpoint:function(e){for(var t=a(e),n=0;n<t.length;n++){var u=t[n];if(u&&Object.prototype.hasOwnProperty.call(o.rules,u)){var l=o.rules[u];return"string"==typeof l&&(l=o.patterns[l]),e.config.useDualstack&&r.isDualstackAvailable(e)&&((l=r.copy(l)).endpoint=l.endpoint.replace(/{service}\.({region}\.)?/,"{service}.dualstack.{region}.")),s(e.config.region)&&(l=r.copy(l),e.signingRegion=c(e.config.region)),e.isGlobalEndpoint=!!l.globalEndpoint,l.signingRegion&&(e.signingRegion=l.signingRegion),l.signatureVersion||(l.signatureVersion="v4"),void i(e,l)}}},getEndpointSuffix:function(e){for(var t={"^(us|eu|ap|sa|ca|me)\\-\\w+\\-\\d+$":"amazonaws.com","^cn\\-\\w+\\-\\d+$":"amazonaws.com.cn","^us\\-gov\\-\\w+\\-\\d+$":"amazonaws.com","^us\\-iso\\-\\w+\\-\\d+$":"c2s.ic.gov","^us\\-isob\\-\\w+\\-\\d+$":"sc2s.sgov.gov"},n=Object.keys(t),r=0;r<n.length;r++){var o=RegExp(n[r]),a=t[n[r]];if(o.test(e))return a}return"amazonaws.com"},getRealRegion:c}},function(e,t,n){!function(e){"use strict";function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,o){if(e===o)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(o))return!1;if(!0===t(e)){if(e.length!==o.length)return!1;for(var a=0;a<e.length;a++)if(!1===r(e[a],o[a]))return!1;return!0}if(!0===n(e)){var i={};for(var s in e)if(hasOwnProperty.call(e,s)){if(!1===r(e[s],o[s]))return!1;i[s]=!0}for(var c in o)if(hasOwnProperty.call(o,c)&&!0!==i[c])return!1;return!0}return!1}function o(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(n(e)){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}return!1}var a;a="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var i=0,s=2,c="EOF",u="UnquotedIdentifier",l="QuotedIdentifier",d="Rbracket",p="Rparen",h="Comma",f="Colon",m="Rbrace",g="Number",b="Current",y="Expref",A="Pipe",v="Or",x="And",k="EQ",w="GT",C="LT",S="GTE",O="LTE",E="NE",I="Flatten",T="Star",N="Filter",R="Dot",j="Not",B="Lbrace",_="Lbracket",D="Lparen",M="Literal",$={".":R,"*":T,",":h,":":f,"{":B,"}":m,"]":d,"(":D,")":p,"@":b},P={"<":!0,">":!0,"=":!0,"!":!0},L={" ":!0,"\t":!0,"\n":!0};function F(e){return e>="0"&&e<="9"||"-"===e}function z(){}z.prototype={tokenize:function(e){var t,n,r,o,a=[];for(this._current=0;this._current<e.length;)if((o=e[this._current])>="a"&&o<="z"||o>="A"&&o<="Z"||"_"===o)t=this._current,n=this._consumeUnquotedIdentifier(e),a.push({type:u,value:n,start:t});else if(void 0!==$[e[this._current]])a.push({type:$[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(F(e[this._current]))r=this._consumeNumber(e),a.push(r);else if("["===e[this._current])r=this._consumeLBracket(e),a.push(r);else if('"'===e[this._current])t=this._current,n=this._consumeQuotedIdentifier(e),a.push({type:l,value:n,start:t});else if("'"===e[this._current])t=this._current,n=this._consumeRawStringLiteral(e),a.push({type:M,value:n,start:t});else if("`"===e[this._current]){t=this._current;var i=this._consumeLiteral(e);a.push({type:M,value:i,start:t})}else if(void 0!==P[e[this._current]])a.push(this._consumeOperator(e));else if(void 0!==L[e[this._current]])this._current++;else if("&"===e[this._current])t=this._current,this._current++,"&"===e[this._current]?(this._current++,a.push({type:x,value:"&&",start:t})):a.push({type:y,value:"&",start:t});else{if("|"!==e[this._current]){var s=new Error("Unknown character:"+e[this._current]);throw s.name="LexerError",s}t=this._current,this._current++,"|"===e[this._current]?(this._current++,a.push({type:v,value:"||",start:t})):a.push({type:A,value:"|",start:t})}return a},_consumeUnquotedIdentifier:function(e){var t,n=this._current;for(this._current++;this._current<e.length&&((t=e[this._current])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t);)this._current++;return e.slice(n,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var n=e.length;'"'!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&'"'!==e[r+1]?r++:r+=2,this._current=r}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var n=e.length;"'"!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&"'"!==e[r+1]?r++:r+=2,this._current=r}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var n=e.length;F(e[this._current])&&this._current<n;)this._current++;var r=parseInt(e.slice(t,this._current));return{type:g,value:r,start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:N,value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:I,value:"[]",start:t}):{type:_,value:"[",start:t}},_consumeOperator:function(e){var t=this._current,n=e[t];return this._current++,"!"===n?"="===e[this._current]?(this._current++,{type:E,value:"!=",start:t}):{type:j,value:"!",start:t}:"<"===n?"="===e[this._current]?(this._current++,{type:O,value:"<=",start:t}):{type:C,value:"<",start:t}:">"===n?"="===e[this._current]?(this._current++,{type:S,value:">=",start:t}):{type:w,value:">",start:t}:"="===n&&"="===e[this._current]?(this._current++,{type:k,value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,n=this._current,r=e.length;"`"!==e[this._current]&&this._current<r;){var o=this._current;"\\"!==e[o]||"\\"!==e[o+1]&&"`"!==e[o+1]?o++:o+=2,this._current=o}var i=a(e.slice(n,this._current));return i=i.replace("\\`","`"),t=this._looksLikeJSON(i)?JSON.parse(i):JSON.parse('"'+i+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if('[{"'.indexOf(e[0])>=0)return!0;if(["true","false","null"].indexOf(e)>=0)return!0;if(!("-0123456789".indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}};var U={};function W(){}function V(e){this.runtime=e}function q(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[i]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[i]}]},contains:{_func:this._functionContains,_signature:[{types:[s,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[s]},{types:[s]}]},floor:{_func:this._functionFloor,_signature:[{types:[i]}]},length:{_func:this._functionLength,_signature:[{types:[s,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[s]},{types:[s]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[s]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[s,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}U.EOF=0,U.UnquotedIdentifier=0,U.QuotedIdentifier=0,U.Rbracket=0,U.Rparen=0,U.Comma=0,U.Rbrace=0,U.Number=0,U.Current=0,U.Expref=0,U.Pipe=1,U.Or=2,U.And=3,U.EQ=5,U.GT=5,U.LT=5,U.GTE=5,U.LTE=5,U.NE=5,U.Flatten=9,U.Star=20,U.Filter=21,U.Dot=40,U.Not=45,U.Lbrace=50,U.Lbracket=55,U.Lparen=60,W.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if(this._lookahead(0)!==c){var n=this._lookaheadToken(0),r=new Error("Unexpected token type: "+n.type+", value: "+n.value);throw r.name="ParserError",r}return t},_loadTokens:function(e){var t=(new z).tokenize(e);t.push({type:c,value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var n=this.nud(t),r=this._lookahead(0);e<U[r];)this._advance(),n=this.led(r,n),r=this._lookahead(0);return n},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,n;switch(e.type){case M:return{type:"Literal",value:e.value};case u:return{type:"Field",name:e.value};case l:var r={type:"Field",name:e.value};if(this._lookahead(0)===D)throw new Error("Quoted identifier not allowed for function names.");return r;case j:return{type:"NotExpression",children:[t=this.expression(U.Not)]};case T:return t=null,{type:"ValueProjection",children:[{type:"Identity"},t=this._lookahead(0)===d?{type:"Identity"}:this._parseProjectionRHS(U.Star)]};case N:return this.led(e.type,{type:"Identity"});case B:return this._parseMultiselectHash();case I:return{type:"Projection",children:[{type:I,children:[{type:"Identity"}]},t=this._parseProjectionRHS(U.Flatten)]};case _:return this._lookahead(0)===g||this._lookahead(0)===f?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):this._lookahead(0)===T&&this._lookahead(1)===d?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(U.Star)]}):this._parseMultiselectList();case b:return{type:b};case y:return{type:"ExpressionReference",children:[n=this.expression(U.Expref)]};case D:for(var o=[];this._lookahead(0)!==p;)this._lookahead(0)===b?(n={type:b},this._advance()):n=this.expression(0),o.push(n);return this._match(p),o[0];default:this._errorToken(e)}},led:function(e,t){var n;switch(e){case R:var r=U.Dot;return this._lookahead(0)!==T?{type:"Subexpression",children:[t,n=this._parseDotRHS(r)]}:(this._advance(),{type:"ValueProjection",children:[t,n=this._parseProjectionRHS(r)]});case A:return n=this.expression(U.Pipe),{type:A,children:[t,n]};case v:return{type:"OrExpression",children:[t,n=this.expression(U.Or)]};case x:return{type:"AndExpression",children:[t,n=this.expression(U.And)]};case D:for(var o,a=t.name,i=[];this._lookahead(0)!==p;)this._lookahead(0)===b?(o={type:b},this._advance()):o=this.expression(0),this._lookahead(0)===h&&this._match(h),i.push(o);return this._match(p),{type:"Function",name:a,children:i};case N:var s=this.expression(0);return this._match(d),{type:"FilterProjection",children:[t,n=this._lookahead(0)===I?{type:"Identity"}:this._parseProjectionRHS(U.Filter),s]};case I:return{type:"Projection",children:[{type:I,children:[t]},this._parseProjectionRHS(U.Flatten)]};case k:case E:case w:case S:case C:case O:return this._parseComparator(t,e);case _:var c=this._lookaheadToken(0);return c.type===g||c.type===f?(n=this._parseIndexExpression(),this._projectIfSlice(t,n)):(this._match(T),this._match(d),{type:"Projection",children:[t,n=this._parseProjectionRHS(U.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),n=new Error("Expected "+e+", got: "+t.type);throw n.name="ParserError",n}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if(this._lookahead(0)===f||this._lookahead(1)===f)return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(d),e},_projectIfSlice:function(e,t){var n={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[n,this._parseProjectionRHS(U.Star)]}:n},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,n=this._lookahead(0);n!==d&&t<3;){if(n===f)t++,this._advance();else{if(n!==g){var r=this._lookahead(0),o=new Error("Syntax error, unexpected token: "+r.value+"("+r.type+")");throw o.name="Parsererror",o}e[t]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(d),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(U[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return[u,l,T].indexOf(t)>=0?this.expression(e):t===_?(this._match(_),this._parseMultiselectList()):t===B?(this._match(B),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(U[this._lookahead(0)]<10)t={type:"Identity"};else if(this._lookahead(0)===_)t=this.expression(e);else if(this._lookahead(0)===N)t=this.expression(e);else{if(this._lookahead(0)!==R){var n=this._lookaheadToken(0),r=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")");throw r.name="ParserError",r}this._match(R),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];this._lookahead(0)!==d;){var t=this.expression(0);if(e.push(t),this._lookahead(0)===h&&(this._match(h),this._lookahead(0)===d))throw new Error("Unexpected token Rbracket")}return this._match(d),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,n,r=[],o=[u,l];;){if(e=this._lookaheadToken(0),o.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match(f),n={type:"KeyValuePair",name:t,value:this.expression(0)},r.push(n),this._lookahead(0)===h)this._match(h);else if(this._lookahead(0)===m){this._match(m);break}}return{type:"MultiSelectHash",children:r}}},V.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,a){var i,s,c,u,l,d,p,h,f;switch(e.type){case"Field":return null===a?null:n(a)?void 0===(d=a[e.name])?null:d:null;case"Subexpression":for(c=this.visit(e.children[0],a),f=1;f<e.children.length;f++)if(null===(c=this.visit(e.children[1],c)))return null;return c;case"IndexExpression":return p=this.visit(e.children[0],a),this.visit(e.children[1],p);case"Index":if(!t(a))return null;var m=e.value;return m<0&&(m=a.length+m),void 0===(c=a[m])&&(c=null),c;case"Slice":if(!t(a))return null;var g=e.children.slice(0),v=this.computeSliceParams(a.length,g),x=v[0],T=v[1],N=v[2];if(c=[],N>0)for(f=x;f<T;f+=N)c.push(a[f]);else for(f=x;f>T;f+=N)c.push(a[f]);return c;case"Projection":var R=this.visit(e.children[0],a);if(!t(R))return null;for(h=[],f=0;f<R.length;f++)null!==(s=this.visit(e.children[1],R[f]))&&h.push(s);return h;case"ValueProjection":if(!n(R=this.visit(e.children[0],a)))return null;h=[];var j=function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}(R);for(f=0;f<j.length;f++)null!==(s=this.visit(e.children[1],j[f]))&&h.push(s);return h;case"FilterProjection":if(!t(R=this.visit(e.children[0],a)))return null;var B=[],_=[];for(f=0;f<R.length;f++)o(i=this.visit(e.children[2],R[f]))||B.push(R[f]);for(var D=0;D<B.length;D++)null!==(s=this.visit(e.children[1],B[D]))&&_.push(s);return _;case"Comparator":switch(u=this.visit(e.children[0],a),l=this.visit(e.children[1],a),e.name){case k:c=r(u,l);break;case E:c=!r(u,l);break;case w:c=u>l;break;case S:c=u>=l;break;case C:c=u<l;break;case O:c=u<=l;break;default:throw new Error("Unknown comparator: "+e.name)}return c;case I:var M=this.visit(e.children[0],a);if(!t(M))return null;var $=[];for(f=0;f<M.length;f++)t(s=M[f])?$.push.apply($,s):$.push(s);return $;case"Identity":return a;case"MultiSelectList":if(null===a)return null;for(h=[],f=0;f<e.children.length;f++)h.push(this.visit(e.children[f],a));return h;case"MultiSelectHash":if(null===a)return null;var P;for(h={},f=0;f<e.children.length;f++)h[(P=e.children[f]).name]=this.visit(P.value,a);return h;case"OrExpression":return o(i=this.visit(e.children[0],a))&&(i=this.visit(e.children[1],a)),i;case"AndExpression":return!0===o(u=this.visit(e.children[0],a))?u:this.visit(e.children[1],a);case"NotExpression":return o(u=this.visit(e.children[0],a));case"Literal":return e.value;case A:return p=this.visit(e.children[0],a),this.visit(e.children[1],p);case b:return a;case"Function":var L=[];for(f=0;f<e.children.length;f++)L.push(this.visit(e.children[f],a));return this.runtime.callFunction(e.name,L);case"ExpressionReference":var F=e.children[0];return F.jmespathType=y,F;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var n=t[0],r=t[1],o=t[2],a=[null,null,null];if(null===o)o=1;else if(0===o){var i=new Error("Invalid slice, step cannot be 0");throw i.name="RuntimeError",i}var s=o<0;return n=null===n?s?e-1:0:this.capSliceRange(e,n,o),r=null===r?s?-1:e:this.capSliceRange(e,r,o),a[0]=n,a[1]=r,a[2]=o,a},capSliceRange:function(e,t,n){return t<0?(t+=e)<0&&(t=n<0?-1:0):t>=e&&(t=n<0?e-1:e),t}},q.prototype={callFunction:function(e,t){var n=this.functionTable[e];if(void 0===n)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,n._signature),n._func.call(this,t)},_validateArgs:function(e,t,n){var r,o,a,i;if(n[n.length-1].variadic){if(t.length<n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+n.length+r+" but received "+t.length)}else if(t.length!==n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+n.length+r+" but received "+t.length);for(var s=0;s<n.length;s++){i=!1,o=n[s].types,a=this._getTypeName(t[s]);for(var c=0;c<o.length;c++)if(this._typeMatches(a,o[c],t[s])){i=!0;break}if(!i)throw new Error("TypeError: "+e+"() expected argument "+(s+1)+" to be type "+o+" but received type "+a+" instead.")}},_typeMatches:function(e,t,n){if(1===t)return!0;if(9!==t&&8!==t&&3!==t)return e===t;if(3===t)return 3===e;if(3===e){var r;8===t?r=i:9===t&&(r=s);for(var o=0;o<n.length;o++)if(!this._typeMatches(this._getTypeName(n[o]),r,n[o]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return s;case"[object Number]":return i;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return e.jmespathType===y?6:4}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],n=e[1];return-1!==t.indexOf(n,t.length-n.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===s){for(var t=e[0],n="",r=t.length-1;r>=0;r--)n+=t[r];return n}var o=e[0].slice(0);return o.reverse(),o},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t/n.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return n(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],n=this._interpreter,r=e[0],o=e[1],a=0;a<o.length;a++)t.push(n.visit(r,o[a]));return t},_functionMerge:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in r)t[o]=r[o]}return t},_functionMax:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===i)return Math.max.apply(Math,e[0]);for(var t=e[0],n=t[0],r=1;r<t.length;r++)n.localeCompare(t[r])<0&&(n=t[r]);return n}return null},_functionMin:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===i)return Math.min.apply(Math,e[0]);for(var t=e[0],n=t[0],r=1;r<t.length;r++)t[r].localeCompare(n)<0&&(n=t[r]);return n}return null},_functionSum:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case i:return"number";case s:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],n=Object.keys(t),r=[],o=0;o<n.length;o++)r.push(t[n[o]]);return r},_functionJoin:function(e){var t=e[0];return e[1].join(t)},_functionToArray:function(e){return 3===this._getTypeName(e[0])?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===s?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,n=this._getTypeName(e[0]);return n===i?e[0]:n!==s||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var n=this._interpreter,r=e[1],o=this._getTypeName(n.visit(r,t[0]));if([i,s].indexOf(o)<0)throw new Error("TypeError");for(var a=this,c=[],u=0;u<t.length;u++)c.push([u,t[u]]);c.sort((function(e,t){var i=n.visit(r,e[1]),s=n.visit(r,t[1]);if(a._getTypeName(i)!==o)throw new Error("TypeError: expected "+o+", received "+a._getTypeName(i));if(a._getTypeName(s)!==o)throw new Error("TypeError: expected "+o+", received "+a._getTypeName(s));return i>s?1:i<s?-1:e[0]-t[0]}));for(var l=0;l<c.length;l++)t[l]=c[l][1];return t},_functionMaxBy:function(e){for(var t,n,r=e[1],o=e[0],a=this.createKeyFunction(r,[i,s]),c=-1/0,u=0;u<o.length;u++)(n=a(o[u]))>c&&(c=n,t=o[u]);return t},_functionMinBy:function(e){for(var t,n,r=e[1],o=e[0],a=this.createKeyFunction(r,[i,s]),c=1/0,u=0;u<o.length;u++)(n=a(o[u]))<c&&(c=n,t=o[u]);return t},createKeyFunction:function(e,t){var n=this,r=this._interpreter;return function(o){var a=r.visit(e,o);if(t.indexOf(n._getTypeName(a))<0){var i="TypeError: expected one of "+t+", received "+n._getTypeName(a);throw new Error(i)}return a}}},e.tokenize=function(e){return(new z).tokenize(e)},e.compile=function(e){return(new W).parse(e)},e.search=function(e,t){var n=new W,r=new q,o=new V(r);r._interpreter=o;var a=n.parse(t);return o.search(a,e)},e.strictDeepEqual=r}(t)},function(e,t){},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a),s=n(50),c=n.n(s),u=n(261),l=n(262),d=n(263),p=n(264),h=n(265),f=i()(o.a),m=c()(u.a),g=c()(l.a),b=c()(d.a),y=c()(p.a),A=c()(h.a);f.push([e.i,'/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n.control-bar {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n}\n.stream-chooser-header {\n  display: flex;\n  position: relative;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n  flex: none;\n  width: 100%;\n  border-bottom: solid 1px rgba(170, 170, 170, 0.3);\n  z-index: 3;\n}\n.background {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  background: black;\n}\n.background svg {\n  transform: translateX(216px) translateY(136px) rotate(540deg) scale(1.3);\n  opacity: 0.8;\n}\n.divider {\n  width: 1px;\n  position: relative;\n  top: 20%;\n  height: 60%;\n  background: rgba(255, 255, 255, 0.3);\n}\n.input-stream-category {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  cursor: pointer;\n  user-select: none;\n  transition: background-color 0.1s;\n}\n.input-stream-category:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.input-stream-category.selected {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.input-stream-category.disabled {\n  background-color: transparent;\n  opacity: 0.5;\n  cursor: default;\n}\n.category-button {\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.category-button svg {\n  height: 50%;\n  width: 50%;\n  fill: rgba(255, 255, 255, 0.9);\n}\n.category-button .label {\n  color: white;\n  font-size: calc(12px + 0.5vh);\n}\n.stream-chooser-container {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-evenly;\n  height: 100%;\n}\n.stream-chooser-container .no-devices {\n  max-width: 580px;\n  margin: 6vmin;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  padding: 2vmin;\n  color: rgba(255, 255, 255, 0.8);\n  user-select: none;\n}\n.stream-chooser-container .no-devices .columns {\n  display: flex;\n}\n.stream-chooser-container .no-devices .columns .material-icons {\n  align-self: center;\n  margin-right: 1vmin;\n  font-size: 20vmin;\n  color: rgba(255, 255, 255, 0.2);\n}\n.stream-chooser-container .no-devices .columns .rows {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  padding: 2vmin;\n}\n.stream-chooser-container .no-devices .columns .rows .title {\n  margin: 1vmin 0;\n  font-size: calc(16px + 1vmin);\n}\n.stream-chooser-container .no-devices .columns .rows .subtitle {\n  margin: 1vmin 0;\n  font-size: calc(12px + 0.6vmin);\n}\n.stream-chooser-container.hidden {\n  display: none;\n}\n.stream-chooser-item {\n  position: relative;\n  width: 350px;\n  height: 0;\n  padding-top: calc(56.25% - 12px);\n  margin: 10px;\n  background: rgba(255, 255, 255, 0.1);\n  border: solid 1px rgba(255, 255, 255, 0.3);\n  box-sizing: border-box;\n  border-radius: 1px;\n  box-shadow: 2px 2px 5px 1px rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n}\n.stream-chooser-item video {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.stream-chooser-item .selected-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  color: white;\n  text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10vh;\n  user-select: none;\n  opacity: 0;\n}\n.stream-chooser-item.selected:not(:hover):not(:focus-within) .selected-overlay {\n  opacity: 1;\n}\n.stream-chooser-item .button-container {\n  display: flex;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  color: white;\n  background: rgba(0, 0, 0, 0.7);\n  opacity: 0;\n}\n.stream-chooser-item .button-container:hover,\n.stream-chooser-item .button-container:focus-within {\n  opacity: 1;\n}\n.stream-chooser-item .button-container .button {\n  position: relative;\n  flex: 1;\n  padding: 1vmin;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.stream-chooser-item .button-container .button:hover::after {\n  content: "";\n  position: absolute;\n  top: 1vmin;\n  right: 1vmin;\n  bottom: 1vmin;\n  left: 1vmin;\n  background: rgba(255, 255, 255, 0.2);\n}\n.stream-chooser-item .button-container .button .material-icons {\n  width: 100%;\n  text-align: center;\n  font-size: 7vmin;\n}\n.stream-chooser-item .button-container .button .label {\n  width: 100%;\n  text-align: center;\n  font-size: calc(12px + 0.5vmin);\n}\n.stream-chooser-item .audio-item-container {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  padding: 10px;\n  display: flex;\n}\n.stream-chooser-item .audio-item-container canvas {\n  width: 16px;\n  height: 100%;\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.stream-chooser-item .audio-item-container canvas.inactive {\n  display: none;\n}\n.stream-chooser-item .audio-item-container .label {\n  margin-left: 10px;\n  font-size: 16px;\n  color: white;\n}\n.stream-chooser-item .audio-item-container .label.unknown {\n  font-style: italic;\n}\n.stream-chooser-item .item-error {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n.stream-chooser-item .item-error .item-name,\n.stream-chooser-item .item-error .error-text {\n  position: absolute;\n  left: 10px;\n  right: 10px;\n  text-align: center;\n  font-size: 16px;\n}\n.stream-chooser-item .item-error .item-name {\n  top: 10px;\n  line-height: normal;\n}\n.stream-chooser-item .item-error .error-icon {\n  font-size: 64px;\n}\n.stream-chooser-item .item-error .error-text {\n  bottom: 10px;\n}\n.stream-chooser-item .item-error .error-text a {\n  color: white;\n  margin-left: 5px;\n}\n.stage-container.stage-2-shown .post-record .panopto-logo {\n  opacity: 1;\n  transition: none;\n  animation: spin 1s ease;\n}\n.stage-container.stage-2-shown .post-record .progress-container {\n  visibility: visible;\n}\n.stage-container.stage-2-shown .post-record .return-to-record-buttons {\n  visibility: visible;\n}\n.stage-container.stage-2-shown .post-record .post-record-backdrop {\n  visibility: visible;\n  opacity: 1;\n}\n@keyframes spin {\n  100% {\n    transform: rotate(-360deg);\n  }\n}\n.post-record {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  color: rgba(255, 255, 255, 0.8);\n}\n.post-record .post-record-backdrop {\n  background: url('+m+");\n  background-size: cover;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  transition: opacity 1s;\n  filter: brightness(1.4);\n}\n.post-record .header {\n  flex: 15;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.post-record .header .logo-region {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n  height: 15vh;\n  flex: 1;\n  margin: 0 12px;\n  box-sizing: border-box;\n  min-width: 350px;\n}\n.post-record .header .panopto-logo {\n  flex: none;\n  margin-left: calc(3vh - 12px);\n  opacity: 0;\n  transition: opacity 1s;\n}\n.post-record .header .panopto-logo.processing {\n  animation: spin 5s linear infinite reverse;\n}\n.post-record .header a.panopto-logo:hover svg {\n  fill: rgba(255, 255, 255, 0.6);\n}\n.post-record .header .progress-container {\n  flex: auto;\n  padding: 0 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  visibility: hidden;\n}\n.post-record .header .progress-container .progress-message {\n  font-size: calc(14px + 0.5vh);\n}\n.post-record .header .progress-container .progress-subhead {\n  font-size: calc(12px + 0.3vh);\n  margin-top: 0.5vh;\n}\n.post-record .header .progress-track {\n  height: 8px;\n  margin-top: 1.5vh;\n  background: rgba(48, 115, 63, 0.3);\n  border-radius: 4px;\n  overflow: hidden;\n}\n.post-record .header .progress-track .progress-bar {\n  height: 100%;\n  width: 0;\n  transition: width 0.25s linear;\n  background: linear-gradient(#83b76d, #177b40);\n}\n.post-record .header .return-to-record-buttons {\n  flex: 1;\n  min-width: 350px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n  margin: 0 12px;\n  color: white;\n  z-index: 1;\n}\n.post-record .header .return-to-record-buttons > .button {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 6px;\n  height: 4vh;\n  min-height: 30px;\n  min-width: 125px;\n  box-sizing: border-box;\n  background-color: rgba(255, 255, 255, 0.1);\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  border-radius: 3px;\n  padding: 2px 6px 3px;\n  font-size: calc(12px + 0.4vh);\n  transition: background-color 0.1s;\n  cursor: pointer;\n}\n.post-record .header .return-to-record-buttons > .button:first-child {\n  margin-left: 0;\n}\n.post-record .header .return-to-record-buttons > .button:last-child {\n  margin-right: 0;\n}\n.post-record .header .return-to-record-buttons > .button:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.post-record .header .return-to-record-buttons > .button:active {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.post-record .header .return-to-record-buttons > .button.disabled {\n  opacity: 0.5;\n  cursor: default;\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.post-record .header .return-to-record-buttons .help-menu {\n  position: relative;\n}\n.post-record .header .return-to-record-buttons .help-menu .help-button {\n  width: 3vh;\n  height: 3vh;\n  padding: 0.4vh;\n  border-radius: calc((3vh / 2) + 0.4vh);\n  transition-property: color, background-color;\n  transition-duration: 0.1s;\n  color: rgba(255, 255, 255, 0.8);\n  user-select: none;\n  cursor: pointer;\n}\n.post-record .header .return-to-record-buttons .help-menu .help-button i {\n  font-size: 3vh;\n  pointer-events: none;\n}\n.post-record .header .return-to-record-buttons .help-menu .help-button.active,\n.post-record .header .return-to-record-buttons .help-menu .help-button:hover {\n  background-color: #626262;\n  color: white;\n}\n.post-record .header .return-to-record-buttons .help-menu .popup-menu {\n  position: absolute;\n  top: calc(3vh + (2 * 0.4vh) + 4px);\n  right: 0;\n  padding: 3px 0;\n  background: #ffffff;\n  min-width: 120px;\n  border-radius: 3px;\n}\n.post-record .header .return-to-record-buttons .help-menu .popup-menu > div {\n  padding: 6px 12px;\n  background-color: #ffffff;\n  font-size: 14px;\n  white-space: nowrap;\n  color: #464646;\n  transition: background-color 0.2s;\n  user-select: none;\n  cursor: pointer;\n}\n.post-record .header .return-to-record-buttons .help-menu .popup-menu > div:hover {\n  background-color: rgba(0, 0, 0, 0.1);\n  color: black;\n}\n.post-record .header .return-to-record-buttons .help-menu {\n  margin: 0 4px;\n}\n.post-record .section-splitter {\n  flex: 45;\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n}\n.post-record .preview-container,\n.post-record .control-container {\n  flex: 1;\n  padding: 12px;\n  min-width: 350px;\n  min-height: 150px;\n}\n.post-record .preview-container .preview-video {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: black;\n  box-shadow: 0 2px 9px 0 rgba(0, 0, 0, 0.5);\n}\n.post-record .preview-container .preview-video video {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.post-record .control-container {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.post-record .control-container .name-input,\n.post-record .control-container .description-input,\n.post-record .control-container .tags-input-capture,\n.post-record .control-container .folder-picker-wrapper input {\n  width: 100%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 8px;\n  box-sizing: border-box;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  outline: none;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 16px;\n  transition: background-color 0.1s, color 0.1s;\n}\n.post-record .control-container .name-input::placeholder,\n.post-record .control-container .description-input::placeholder,\n.post-record .control-container .tags-input-capture::placeholder,\n.post-record .control-container .folder-picker-wrapper input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.post-record .control-container .name-input::-ms-input-placeholder,\n.post-record .control-container .description-input::-ms-input-placeholder,\n.post-record .control-container .tags-input-capture::-ms-input-placeholder,\n.post-record .control-container .folder-picker-wrapper input::-ms-input-placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.post-record .control-container .name-input:-ms-input-placeholder,\n.post-record .control-container .description-input:-ms-input-placeholder,\n.post-record .control-container .tags-input-capture:-ms-input-placeholder,\n.post-record .control-container .folder-picker-wrapper input:-ms-input-placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.post-record .control-container .name-input:focus,\n.post-record .control-container .description-input:focus,\n.post-record .control-container .tags-input-capture:focus,\n.post-record .control-container .folder-picker-wrapper input:focus {\n  background: white;\n  color: #464646;\n}\n.post-record .control-container .name-input:focus::placeholder,\n.post-record .control-container .description-input:focus::placeholder,\n.post-record .control-container .tags-input-capture:focus::placeholder,\n.post-record .control-container .folder-picker-wrapper input:focus::placeholder {\n  color: #999999;\n}\n.post-record .control-container .name-input:focus::-ms-input-placeholder,\n.post-record .control-container .description-input:focus::-ms-input-placeholder,\n.post-record .control-container .tags-input-capture:focus::-ms-input-placeholder,\n.post-record .control-container .folder-picker-wrapper input:focus::-ms-input-placeholder {\n  color: #999999;\n}\n.post-record .control-container .name-input:focus:-ms-input-placeholder,\n.post-record .control-container .description-input:focus:-ms-input-placeholder,\n.post-record .control-container .tags-input-capture:focus:-ms-input-placeholder,\n.post-record .control-container .folder-picker-wrapper input:focus:-ms-input-placeholder {\n  color: #999999;\n}\n.post-record .control-container .name-input {\n  font-size: calc(16px + 0.7vh);\n  font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n  font-weight: 100;\n}\n.post-record .control-container .name-input,\n.post-record .control-container .description-input {\n  padding-right: 8px;\n}\n.post-record .control-container .name-input,\n.post-record .control-container .tags-input-capture,\n.post-record .control-container .folder-row {\n  flex: none;\n  margin-bottom: 10px;\n}\n.post-record .control-container .tags-input-capture {\n  background: none;\n  padding: 0;\n}\n.post-record .control-container .folder-row {\n  display: flex;\n}\n.post-record .control-container .folder-picker-wrapper {\n  flex: auto;\n}\n.post-record .control-container .folder-picker-wrapper,\n.post-record .control-container .folder-picker-wrapper input {\n  height: 35px;\n}\n.post-record .control-container .folder-picker-wrapper .folder-spinner {\n  visibility: hidden;\n}\n.post-record .control-container .folder-picker-wrapper .dropdown-open-icon {\n  color: rgba(255, 255, 255, 0.8);\n}\n.post-record .control-container .folder-picker-wrapper.dropdown-visible input {\n  background: white;\n  color: #464646;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.post-record .control-container .folder-picker-wrapper.dropdown-visible input::placeholder {\n  color: #999;\n}\n.post-record .control-container .folder-picker-wrapper.dropdown-visible input::-ms-input-placeholder {\n  color: #999;\n}\n.post-record .control-container .folder-picker-wrapper.dropdown-visible input:-ms-input-placeholder {\n  color: #999;\n}\n.post-record .control-container .folder-picker-wrapper.dropdown-visible .folder-spinner {\n  visibility: visible;\n}\n.post-record .control-container .folder-picker-wrapper.dropdown-visible .dropdown-open-icon {\n  color: #626262;\n}\n.post-record .control-container .folder-picker-wrapper .dropdown-list {\n  min-width: 100%;\n}\n.post-record .control-container .folder-breakout-link {\n  flex: none;\n  height: 100%;\n  padding: 0 0.4vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 12px;\n  background: rgba(255, 255, 255, 0.1);\n  transition: background-color 0.2s;\n  cursor: pointer;\n  font-size: 32px;\n}\n.post-record .control-container .folder-breakout-link:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n  color: white;\n}\n.post-record .control-container .folder-breakout-link:active {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.post-record .control-container .description-input {\n  flex: auto;\n  margin-bottom: 10px;\n}\n.post-record .control-container .session-buttons {\n  flex: none;\n  height: 5vh;\n  min-height: 35px;\n  display: flex;\n  align-items: center;\n}\n.post-record .control-container .session-buttons > div {\n  flex: 1;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  background-color: rgba(255, 255, 255, 0.1);\n  transition: color 0.1s, opacity 0.2s;\n  cursor: pointer;\n}\n.post-record .control-container .session-buttons > div.disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n.post-record .control-container .session-buttons > div .material-icons {\n  margin-right: 6px;\n  color: rgba(255, 255, 255, 0.8);\n}\n.post-record .control-container .session-buttons > div .label {\n  font-size: calc(14px + 0.4vh);\n  color: white;\n}\n.post-record .control-container .session-buttons > div:not(.disabled):hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.post-record .control-container .session-buttons > div:not(.disabled):hover .material-icons {\n  color: white;\n}\n.post-record .control-container .session-buttons > div:not(.disabled):active {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.post-record .control-container .session-buttons .edit {\n  margin-right: 12px;\n}\n.post-record .share {\n  flex: 40;\n  position: relative;\n  padding: 12px;\n}\n.post-record .share .bounding-box {\n  height: 100%;\n  padding: 12px;\n  box-sizing: border-box;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n}\n.post-record .share .share-message {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(0.7vmin + 14px);\n}\n.post-record.standalone .header {\n  flex-wrap: nowrap;\n}\n.post-record.standalone .header .logo-region {\n  flex: 8;\n}\n.post-record.standalone .header .logo-region .progress-container {\n  margin-right: 5%;\n}\n.post-record.standalone .header .return-to-record-buttons {\n  flex: 2;\n  min-width: 0;\n  justify-content: flex-end;\n}\n.post-record.standalone .header .return-to-record-buttons > .button {\n  flex: auto;\n  padding-left: 15px;\n  padding-right: 15px;\n}\n.post-record.standalone .section-splitter {\n  flex: 65;\n  flex-wrap: nowrap;\n  flex-direction: column;\n}\n.post-record.standalone .preview-container {\n  min-width: 100%;\n  padding: 0 0 12px 0;\n}\n.post-record.standalone .control-container {\n  flex: none;\n  min-height: 0;\n  padding: 0 12px;\n  flex-direction: row;\n}\n.post-record.standalone .control-container .name-input {\n  flex: auto;\n  margin-bottom: 0;\n}\n.post-record.standalone .control-container .download-button {\n  flex: none;\n  height: 100%;\n  padding: 0 0.4vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 12px;\n  background: rgba(255, 255, 255, 0.1);\n  transition: background-color 0.2s;\n  cursor: pointer;\n  font-size: calc(16px + 2vh);\n  color: inherit;\n}\n.post-record.standalone .control-container .download-button:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n  color: white;\n}\n.post-record.standalone .control-container .download-button:active {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.post-record.standalone .control-container .folder-row,\n.post-record.standalone .control-container .description-input,\n.post-record.standalone .control-container .session-buttons {\n  display: none;\n}\n.post-record.standalone .button-footer {\n  flex: 20;\n  position: relative;\n  display: flex;\n  margin: 6px;\n}\n.post-record.standalone .button-footer > div {\n  flex: 1;\n  margin: 6px;\n  min-height: 50px;\n  background-color: rgba(255, 255, 255, 0.1);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-evenly;\n  transition: background-color 0.2s;\n  cursor: pointer;\n}\n.post-record.standalone .button-footer > div:hover:not(.disabled) {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.post-record.standalone .button-footer > div:hover:not(.disabled) .logo {\n  opacity: 1;\n}\n.post-record.standalone .button-footer > div:hover:not(.disabled) .label {\n  color: white;\n}\n.post-record.standalone .button-footer > div:active:not(.disabled) {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.post-record.standalone .button-footer > div.disabled {\n  cursor: default;\n}\n.post-record.standalone .button-footer > div.disabled .logo,\n.post-record.standalone .button-footer > div.disabled .label {\n  opacity: 0.5;\n}\n.post-record.standalone .button-footer > div.throb {\n  animation: pulse 500ms ease-in-out infinite alternate;\n}\n@keyframes pulse {\n  to {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n}\n.post-record.standalone .button-footer .logo {\n  width: 9vh;\n  height: 9vh;\n  transition: opacity 0.2s;\n  opacity: 0.8;\n}\n.post-record.standalone .button-footer .label {\n  font-size: calc(12px + 0.8vh);\n  text-align: center;\n  transition: color 0.2s, opacity 0.2s;\n}\n.post-record.standalone .button-footer .panopto-upload-button svg {\n  width: 100%;\n  height: 100%;\n  fill: white;\n}\n.post-record.standalone .button-footer .youtube-upload-button .logo {\n  background: url("+g+") no-repeat center;\n  background-size: contain;\n}\n.post-record.standalone .button-footer .classroom-upload-button .logo {\n  background: url("+b+") no-repeat center;\n  background-size: contain;\n}\n.post-record #timelineControls .control-layer {\n  background: linear-gradient(#000, #0001 40%, #0001 60%, #000);\n}\n.post-record #timelineControls .playback-rate-menu {\n  background: rgba(0, 0, 0, 0.8);\n}\n.post-record #pipPlayer {\n  width: 33%;\n  height: 33%;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n.post-record #gridPlayers {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n}\n.post-record #gridPlayers > div {\n  width: 50%;\n  height: 50%;\n}\n.post-record #gridPlayers .hls-stream-player-video {\n  position: static;\n}\n.stage-container.wide-layout-only .post-record {\n  min-width: 748px;\n}\n.stage-container.wide-layout-only .post-record .header,\n.stage-container.wide-layout-only .post-record .section-splitter {\n  flex-wrap: nowrap;\n}\n.mobile .stage-2 {\n  overflow: auto;\n}\n.mobile .post-record .header {\n  flex-wrap: nowrap;\n  padding-bottom: 10px;\n  position: relative;\n}\n.mobile .post-record .header .logo-region {\n  min-width: 0;\n  margin-right: 0;\n}\n.mobile .post-record .header .logo-region .progress-container {\n  padding-right: 0;\n}\n.mobile .post-record .header .logo-region .progress-message {\n  font-size: 16px;\n}\n.mobile .post-record .header .logo-region .progress-subhead {\n  font-size: 12px;\n}\n.mobile .post-record .header .return-to-record-buttons {\n  flex: none;\n  min-width: 0;\n}\n.mobile .post-record .header .return-to-record-buttons > .button {\n  display: inline-block;\n  width: 3vh;\n  height: 3vh;\n  padding: 0;\n  margin: 0 8px;\n  min-width: 0;\n  min-height: 0;\n  color: rgba(255, 255, 255, 0.8);\n  user-select: none;\n  border: none;\n  background: none;\n}\n.mobile .post-record .header .return-to-record-buttons > .button i {\n  padding-top: 0.1vh;\n  font-size: 3vh;\n  pointer-events: none;\n}\n.mobile .post-record .header .mobile-progress-bar-container {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  right: 10px;\n}\n.mobile .post-record .preview-container {\n  padding: 0;\n}\n.mobile .post-record .share .mobile-roll-up {\n  font-size: 16px;\n  color: rgba(255, 255, 255, 0.5);\n  display: flex;\n  align-items: center;\n}\n.mobile .post-record .share .mobile-roll-up .text {\n  margin-right: auto;\n}\n.mobile .post-record .share .mobile-roll-up .material-icons {\n  color: rgba(255, 255, 255, 0.8);\n}\n.mobile .post-record .section-splitter {\n  flex: 80;\n}\n.mobile .post-record .session-buttons,\n.mobile .post-record .folder-breakout-link {\n  display: none;\n}\n.mobile .post-record .metadata-rollup {\n  display: none;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  width: 100%;\n  padding: 0 50px 0 10px;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  border-radius: 8px;\n  box-sizing: border-box;\n  margin: 12px;\n  margin-bottom: 0;\n  cursor: pointer;\n  font-size: 16px;\n}\n.mobile .post-record .metadata-rollup .name {\n  font-size: calc(16px + 0.7vh);\n}\n.mobile .post-record .metadata-rollup .name .name-placeholder {\n  font-style: italic;\n}\n.mobile .post-record .metadata-rollup .arrow {\n  position: absolute;\n  right: 22px;\n  font-size: 36px;\n}\n.mobile .post-record .control-container {\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  border-radius: 8px;\n  box-sizing: border-box;\n  margin: 12px;\n  margin-bottom: 0;\n}\n.mobile .post-record .share {\n  flex: 5;\n}\n.mobile .post-record .share .bounding-box {\n  border-radius: 8px;\n}\n.mobile .post-record .share .mobile-roll-up {\n  display: flex;\n}\n.mobile .post-record .share .share-container {\n  display: none;\n}\n.mobile .post-record .share .share-container .heading,\n.mobile .post-record .share .share-container .manage-access-button {\n  display: none;\n}\n.mobile .post-record .share .button-block {\n  display: flex;\n  justify-content: center;\n  height: 10vh;\n  position: relative;\n}\n.mobile .post-record .share .button-block .send-button {\n  position: absolute;\n  width: 10vh;\n  height: 10vh;\n  border-radius: 50%;\n}\n.mobile .post-record .share .button-block .send-button .label {\n  display: none;\n}\n.mobile .post-record .share .button-block .send-button .material-icons {\n  margin: 0;\n  margin-left: 0.5vh;\n  font-size: 6vh;\n}\n.mobile .post-record .share .button-block .cancel-button {\n  display: none;\n}\n.mobile .post-record.share-expanded .metadata-rollup {\n  display: flex;\n}\n.mobile .post-record.share-expanded .control-container {\n  display: none;\n}\n.mobile .post-record.share-expanded .section-splitter {\n  flex: 45;\n}\n.mobile .post-record.share-expanded .share {\n  flex: 40;\n}\n.mobile .post-record.share-expanded .share .mobile-roll-up {\n  display: none;\n}\n.mobile .post-record.share-expanded .share .share-container {\n  display: block;\n}\n#webRecorder {\n  font-weight: 400;\n}\n.button-footer .logo {\n  padding: 0;\n}\nbody {\n  font-family: Segoe UI, Helvetica, sans-serif;\n  height: 100%;\n}\n#browserNotSupported {\n  height: 100%;\n  padding: 20px;\n  padding-top: 130px;\n  box-sizing: border-box;\n  background: #222;\n  color: #ffffff;\n  text-align: center;\n}\n#browserNotSupported img {\n  height: 26px;\n  margin-bottom: 26px;\n}\n#browserNotSupported h1 {\n  font-family: 'Droid Sans', arial, serif;\n  font-size: 25px;\n  font-weight: bold;\n  color: white;\n}\n#browserNotSupported .subhead {\n  margin-top: 16px;\n  font-size: 18px;\n}\n#browserNotSupported a {\n  color: white;\n}\n#webRecorder {\n  height: 100%;\n  width: 100%;\n  margin: 0px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: #222;\n}\n.stage-container {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.stage-container .stage {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  transition: transform 1s;\n}\n.stage-container .stage-2 {\n  transform: translateY(-15%);\n}\n.stage-container.stage-1-shown .stage-2,\n.stage-container.stage-2-shown .stage-1 {\n  visibility: hidden;\n  transition: visibility 0s 1s, transform 1s;\n}\n.stage-container.stage-2-shown .stage-1 {\n  transform: translateY(-85%);\n}\n.stage-container.stage-2-shown .stage-2 {\n  transform: translateY(-100%);\n}\n.record-controls {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n.visualizer-container {\n  flex: auto;\n  min-height: 0;\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  background: black;\n  transition: filter 200ms;\n}\n.visualizer-container .graph-renderers {\n  position: absolute;\n  top: 0px;\n}\n.visualizer-container .graph-renderers img,\n.visualizer-container .graph-renderers canvas,\n.visualizer-container .graph-renderers video {\n  width: 2px;\n  height: 2px;\n}\n.visualizer-container .graph-renderers.visible {\n  position: relative;\n}\n.visualizer-container .graph-renderers.visible img,\n.visualizer-container .graph-renderers.visible canvas,\n.visualizer-container .graph-renderers.visible video {\n  width: 192px;\n  height: 108px;\n}\n.visualizer-container.blur {\n  filter: blur(5px);\n}\n.record-overlay {\n  position: absolute;\n  top: 15%;\n  height: 70%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(3px);\n  visibility: hidden;\n  transform: translateY(-100%);\n  transition: transform 0.2s, visibility 0s 0.2s;\n  overflow: hidden;\n  z-index: 2;\n}\n.record-overlay.bottom-anchored {\n  transform: translateY(100%);\n}\n.record-overlay.visible {\n  visibility: visible;\n  transform: translateY(0);\n  transition: transform 0.2s, visibility 0s;\n}\n.record-overlay.settings-overlay {\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.stream-visualizer-container {\n  flex: auto;\n  width: 100%;\n  height: 100%;\n  min-height: 0;\n  background: black;\n  position: relative;\n}\n.stream-visualizer-container .tile-container {\n  position: absolute;\n  display: flex;\n  flex-wrap: wrap;\n  height: 100%;\n  width: 100%;\n}\n.stream-visualizer-container .pip-container {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 33.3%;\n  height: 100%;\n  pointer-events: none;\n}\n.stream-visualizer-container .pip-container .stream-visual {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  padding-top: 56.25%;\n  pointer-events: auto;\n}\n.stream-visualizer-container .pip-container .stream-visual:hover {\n  box-shadow: 0px 0px 14px 0px rgba(0, 0, 0, 0.8);\n}\n.stream-visualizer-container .pip-container .stream-visual video {\n  position: absolute;\n  top: 0;\n}\n.stream-visualizer-container .stream-visual {\n  position: relative;\n  width: 100%;\n}\n.stream-visualizer-container .stream-visual video {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.stream-visualizer-container .stream-visual .smart-cam-loading {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.5);\n  user-select: none;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.1s, visibility 0s 0.1s;\n}\n.stream-visualizer-container .stream-visual .smart-cam-loading.visible {\n  visibility: visible;\n  opacity: 1;\n  transition: opacity 0.1s;\n}\n.stream-visualizer-container .stream-visual .smart-cam-loading svg {\n  width: 50%;\n  height: 50%;\n  opacity: 0.8;\n}\n.stream-visualizer-container .stream-visual .action-overlay {\n  opacity: 0;\n  position: absolute;\n  top: 1vh;\n  right: 1vh;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 1vh;\n  z-index: 1;\n  cursor: pointer;\n  transition: opacity 0.1s;\n  user-select: none;\n  display: flex;\n  align-items: center;\n}\n.stream-visualizer-container .stream-visual .action-overlay svg {\n  padding: 1vh;\n  width: calc(24px + 3vh);\n  height: calc(24px + 3vh);\n  color: rgba(255, 255, 255, 0.8);\n  transition: color 0.1s;\n}\n.stream-visualizer-container .stream-visual .action-overlay svg:hover {\n  color: white;\n}\n.stream-visualizer-container .stream-visual .action-overlay .background-image {\n  margin: calc(1.5vh - 1px);\n  width: calc(24px + 2vh);\n  height: calc(24px + 2vh);\n  border: solid 1px rgba(255, 255, 255, 0.8);\n  border-radius: 0.5vh;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n.stream-visualizer-container .stream-visual .divider {\n  width: 2px;\n  margin: 1vh;\n  height: calc(24px + 3vh);\n  background: rgba(255, 255, 255, 0.8);\n}\n.stream-visualizer-container .stream-visual:hover .action-overlay,\n.stream-visualizer-container .stream-visual:focus-within .action-overlay {\n  opacity: 1;\n}\n.stream-visualizer-container .stream-visual .screen-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  opacity: 0.5;\n}\n.stream-visualizer-container .no-video-streams-container {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stream-visualizer-container .no-video-streams-container .material-icons {\n  font-size: 25vh;\n  color: rgba(255, 255, 255, 0.2);\n  margin-bottom: calc(12px + 4vh);\n}\n.stream-visualizer-container .no-video-streams-container .call-to-action {\n  position: absolute;\n  font-size: calc(14px + 1vh);\n  padding: 2vh;\n  border-radius: 0.4vh;\n  background: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.8);\n}\n.stream-visualizer-container .no-video-streams-container .call-to-action.camera {\n  top: 4vh;\n}\n.stream-visualizer-container .no-video-streams-container .call-to-action.record {\n  bottom: calc(12px + 8vh);\n}\n.stream-visualizer-container .no-video-streams-container .call-to-action::before {\n  content: \"\";\n  position: absolute;\n  left: calc(50% - 2.5vh);\n  border-left: 2.5vh solid transparent;\n  border-right: 2.5vh solid transparent;\n}\n.stream-visualizer-container .no-video-streams-container .call-to-action.camera::before {\n  border-bottom: 2.2vh solid rgba(255, 255, 255, 0.2);\n  top: -2.2vh;\n}\n.stream-visualizer-container .no-video-streams-container .call-to-action.record::before {\n  border-top: 2.2vh solid rgba(255, 255, 255, 0.2);\n  bottom: -2.2vh;\n}\n.bottom-controls {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n  justify-content: center;\n  width: 100%;\n  flex: none;\n  background: #333;\n  border-top: solid 1px rgba(170, 170, 170, 0.3);\n  z-index: 2;\n}\n.logo-region {\n  position: absolute;\n  left: 0;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.logo-region .panopto-logo {\n  height: 60%;\n  margin-left: 3vh;\n}\n.logo-region .panopto-logo svg {\n  height: 100%;\n  fill: rgba(255, 255, 255, 0.4);\n}\n.logo-region a.panopto-logo:hover #glyph {\n  fill-opacity: 0.5;\n}\n.center-button-container {\n  position: relative;\n  top: -50%;\n  height: calc(24px + 8vh);\n  width: calc(24px + 8vh);\n}\n.record-button {\n  position: absolute;\n  top: -3px;\n  left: -3px;\n  height: 100%;\n  width: 100%;\n  border: 3px solid white;\n  border-radius: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  box-shadow: 0 2px 9px 0px rgba(0, 0, 0, 0.5);\n  transition: top 0.1s, left 0.1s, border-width 0.1s, opacity 0.2s;\n  cursor: pointer;\n}\n.record-button .glyph {\n  width: 80%;\n  height: 80%;\n  position: relative;\n  top: 10%;\n  left: 10%;\n  border-radius: 100%;\n  background-color: #ed2f02;\n  transition-property: width, height, top, left, border-radius, opacity;\n  transition-duration: 0.5s;\n}\n.record-button:hover:not(.disabled) {\n  border-width: 5px;\n  top: -5px;\n  left: -5px;\n}\n.record-button.disabled {\n  cursor: default;\n}\n.record-button.disabled .glyph {\n  opacity: 0.5;\n}\n.record-controls.recording .record-button .glyph {\n  width: 60%;\n  height: 60%;\n  top: 20%;\n  left: 20%;\n  border-radius: 10%;\n}\n.record-controls.overlay-open .record-button {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.2s, visibility 0s 0.2s;\n}\n.menu-close-button {\n  position: absolute;\n  top: -3px;\n  left: -3px;\n  height: 100%;\n  width: 100%;\n  border: solid 3px #626262;\n  border-radius: 100%;\n  background: #626262;\n  box-shadow: 0 2px 9px 0px rgba(0, 0, 0, 0.5);\n  opacity: 0;\n  visibility: hidden;\n  transition: visibility 0s 0.2s, opacity 0.2s;\n  cursor: pointer;\n}\n.menu-close-button span {\n  position: absolute;\n  top: 25%;\n  left: 25%;\n  font-size: calc(12px + 4vh);\n  color: rgba(255, 255, 255, 0.8);\n}\n.menu-close-button:hover span {\n  color: white;\n}\n.record-controls.overlay-open .menu-close-button {\n  opacity: 1;\n  visibility: visible;\n  transition: opacity 0.2s, visibility 0s;\n}\n.right-controls {\n  position: absolute;\n  right: 2vh;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.right-controls .error-icon {\n  margin-right: 1vh;\n  font-size: 9vh;\n  color: #ed2f02;\n  cursor: pointer;\n}\n.right-controls .settings-button {\n  font-size: 9vh;\n  padding: 1vh;\n  border-radius: 50%;\n  opacity: 1;\n  color: rgba(255, 255, 255, 0.8);\n  transition: opacity 0.5s, background-color 0.2s;\n  user-select: none;\n  cursor: pointer;\n}\n.right-controls .settings-button:hover:not(.disabled) {\n  color: white;\n}\n.right-controls .settings-button.active {\n  background: rgba(255, 255, 255, 0.2);\n}\n.right-controls .settings-button.disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n.right-controls .camera-flip-button {\n  margin-right: 1vh;\n  font-size: 5vh;\n  color: rgba(255, 255, 255, 0.8);\n  opacity: 1;\n  transition: opacity 0.5s;\n}\n.right-controls .time {\n  position: absolute;\n  right: 0;\n  margin-right: 1vh;\n  align-items: center;\n  color: #ffffff;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.5s, visibility 0s 0.5s;\n  font-size: 5vh;\n  font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n  font-weight: 100;\n}\n.record-controls.recording .settings-button,\n.record-controls.recording .camera-flip-button {\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.5s, visibility 0s 0.5s;\n}\n.record-controls.recording .time {\n  visibility: visible;\n  opacity: 1;\n  transition: opacity 0.5s;\n}\n.oscilloscope-container {\n  display: none;\n  position: absolute;\n  top: -50%;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.oscilloscope-container canvas {\n  width: 100%;\n  height: 100%;\n}\n.stage-container.stage-1-shown .oscilloscope-container {\n  display: block;\n}\n@font-face {\n  font-family: RainyHearts;\n  src: url("+y+') format("truetype");\n}\n@font-face {\n  font-family: Pixel;\n  src: url('+A+') format("truetype");\n}\n.countdown {\n  visibility: collapse;\n  opacity: 0;\n  transition: opacity 0.2s;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.5);\n  outline: none;\n  z-index: 3;\n  cursor: pointer;\n}\n.countdown.shown {\n  visibility: visible;\n  opacity: 1;\n}\n.countdown .digit {\n  font-family: "RainyHearts";\n  color: white;\n  text-shadow: 0 0 10px;\n}\n.countdown .footer {\n  position: absolute;\n  bottom: 0;\n  font-size: 3vmin;\n  display: flex;\n  width: 100%;\n  font-family: "Pixel";\n  color: rgba(255, 255, 255, 0.8);\n  text-shadow: 0 0 2vmin rgba(255, 255, 255, 0.5);\n  text-transform: uppercase;\n}\n.countdown .footer > div {\n  flex: 1;\n}\n.countdown .footer > div .button {\n  display: inline-block;\n  padding: 3vh 4vmin;\n}\n.countdown .footer > div .button:hover {\n  color: #ffffff;\n  text-shadow: 0 0 2vmin rgba(255, 255, 255, 0.7);\n}\n.countdown .footer > div:first-child {\n  text-align: right;\n}\n',"",{version:3,sources:["webpack://./lib/WebRecorderBase.less","webpack://./../../WebCore/css/Assets/Assets.less","webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./lib/Shared.less","webpack://./lib/Components/Record/InputStreamChooser.less","webpack://./lib/Components/PostRecord.less","webpack://./lib/Components/ProgressBar.less","webpack://./lib/Components/HelpMenu.less","webpack://./lib/Components/PostRecordMobile.less","webpack://./lib/Components/Record/SmartCamLoading.less","webpack://./lib/Components/Record/StreamActionOverlay.less","webpack://./lib/Components/Record/Countdown.less"],names:[],mappings:"AAAA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC4NX;EACI,WAAA;AD1NJ;AC6NA;EACI,aAAA;AD3NJ;AEmKA;EACI,cAAA;EACA,YAAA;AFjKJ;AEoKA;EACI,WAAA;EACA,WAAA;AFlKJ;AEuSA;EACI,yBAAA;AFrSJ;AEwSA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AFtSJ;AEuTA;EACI,iBAAA;AFrTJ;AEuWA;EFrWE,yBAAyB;EEuWvB,qBAAA;EFrWF,YAAY;EEsWV,wBAAA;EFpWF,WAAW;AACb;AEiWI;EAAuB,aAAA;AF9V3B;AG5CuC;EAE/B,kBAAA;EACQ,aAAA;EACN,mBAAA;EACK,WAAA;EACgB,gBAAA;EACF,iBAAA;AH6C7B;AI7DA;EACI,aAAA;EACA,kBAAA;EACA,WAAA;EACA,gBAAA;EACA,iBAAA;EACA,UAAA;EACA,WAAA;EACA,iDAAA;EACA,UAAA;AJ+DJ;AI5DA;EACI,kBAAA;EACA,YAAA;EACA,WAAA;EACA,gBAAA;EACA,iBAAA;AJ8DJ;AInEA;EAQQ,wEAAA;EACA,YAAA;AJ8DR;AI1DA;EACI,UAAA;EACA,kBAAA;EACA,QAAA;EACA,WAAA;EACA,oCAAA;AJ4DJ;AIzDA;EACI,OAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,kBAAA;EACA,eAAA;EAEA,iBAAA;EACA,iCAAA;AJ0DJ;AIxDI;EACI,0CAAA;AJ0DR;AIvDI;EACI,0CAAA;AJyDR;AItDI;EACI,6BAAA;EACA,YAAA;EACA,eAAA;AJwDR;AIpDA;EACI,YAAA;EACA,WAAA;EACA,sBAAA;EACA,aAAA;EACA,sBAAA;EACA,mBAAA;EACA,uBAAA;AJsDJ;AI7DA;EAUQ,WAAA;EACA,UAAA;EACA,8BAAA;AJsDR;AIlEA;EAgBQ,YAAA;EACA,6BAAA;AJqDR;AIjDA;EACI,aAAA;EACA,eAAA;EACA,mBAAA;EACA,6BAAA;EACA,YAAA;AJmDJ;AIxDA;EAQQ,gBAAA;EACA,aAAA;EACA,0CAAA;EACA,oCAAA;EACA,cAAA;EACA,+BAAA;EACA,iBAAA;AJmDR;AIjEA;EAiBY,aAAA;AJmDZ;AIpEA;EAoBgB,kBAAA;EACA,mBAAA;EACA,iBAAA;EACA,+BAAA;AJmDhB;AI1EA;EA2BgB,aAAA;EACA,sBAAA;EACA,6BAAA;EACA,cAAA;AJkDhB;AIhFA;EAiCoB,eAAA;EACA,6BAAA;AJkDpB;AIpFA;EAqCoB,eAAA;EACA,+BAAA;AJkDpB;AI3CA;EACI,aAAA;AJ6CJ;AI1CA;EAGI,kBAAA;EACA,YAAA;EACA,SAAA;EACA,gCAAA;EACA,YAAA;EACA,oCAAA;EACA,0CAAA;EACA,sBAAA;EACA,kBAAA;EACA,8CAAA;EACA,eAAA;AJ0CJ;AIvDA;EAgBQ,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;AJ0CR;AIhEA;EA0BQ,kBAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,YAAA;EACA,uCAAA;EACA,8BAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,eAAA;EACA,iBAAA;EACA,UAAA;AJyCR;AIvCI;EACI,UAAA;AJyCR;AInFA;EA8CQ,aAAA;EACA,kBAAA;EACA,MAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,8BAAA;EACA,UAAA;AJwCR;AItCQ;;EAEI,UAAA;AJwCZ;AIjGA;EA6DY,kBAAA;EACA,OAAA;EACA,cAAA;EACA,aAAA;EACA,sBAAA;EACA,uBAAA;AJuCZ;AIrCY;EACI,WAAA;EACA,kBAAA;EACA,UAAA;EACA,YAAA;EACA,aAAA;EACA,WAAA;EACA,oCAAA;AJuChB;AIlHA;EA+EgB,WAAA;EACA,kBAAA;EACA,gBAAA;AJsChB;AIvHA;EAqFgB,WAAA;EACA,kBAAA;EACA,+BAAA;AJqChB;AI5HA;EA6FQ,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,aAAA;EACA,aAAA;AJkCR;AIrIA;EAsGY,WAAA;EACA,YAAA;EACA,0CAAA;AJkCZ;AI/BY;EACI,aAAA;AJiChB;AI7IA;EAiHY,iBAAA;EACA,eAAA;EACA,YAAA;AJ+BZ;AI7BY;EAAY,kBAAA;AJgCxB;AIrJA;EA0HQ,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,YAAA;AJ8BR;AIhKA;;EAsIY,kBAAA;EACA,UAAA;EACA,WAAA;EACA,kBAAA;EACA,eAAA;AJ8BZ;AIxKA;EA8IY,SAAA;EAEA,mBAAA;AJ4BZ;AI5KA;EAoJY,eAAA;AJ2BZ;AI/KA;EAwJY,YAAA;AJ0BZ;AIlLA;EA2JgB,YAAA;EACA,gBAAA;AJ0BhB;AKlTA;EAIQ,UAAA;EACA,gBAAA;EAEA,uBAAA;ALgTR;AKvTA;EAYQ,mBAAA;AL8SR;AK1TA;EAiBQ,mBAAA;AL4SR;AK7TA;EAsBQ,mBAAA;EACA,UAAA;AL0SR;AKtSA;EACI;IAAO,0BAAA;ELyST;AACF;AKvSA;EACI,YAAA;EACA,aAAA;EACA,sBAAA;EACA,kBAAA;EACA,+BAAA;ALySJ;AK9SA;EAQQ,mDAAA;EACA,sBAAA;EACA,kBAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,UAAA;EAEA,sBAAA;EACA,uBAAA;ALwSR;AK1TA;EAsBQ,QAAA;EACA,aAAA;EACA,mBAAA;EACA,eAAA;ALuSR;AKhUA;EFzBQ,kBAAA;EACQ,aAAA;EACN,mBAAA;EACK,WAAA;EACgB,gBAAA;EACF,iBAAA;EEiDjB,YAAA;EACA,OAAA;EACA,cAAA;EACA,sBAAA;EACA,gBAAA;AL4SZ;AK7UA;EAqCY,UAAA;EACA,6BAAA;EACA,UAAA;EAEA,sBAAA;AL0SZ;AKxSY;EAEI,0CAAA;ALyShB;AKtVA;EAiDY,8BAAA;ALwSZ;AKzVA;EAqDY,UAAA;EACA,eAAA;EACA,YAAA;EACA,aAAA;EACA,sBAAA;EACA,uBAAA;EACA,kBAAA;ALuSZ;AKlWA;EA8DgB,6BAAA;ALuShB;AKrWA;EAkEgB,6BAAA;EACA,iBAAA;ALsShB;AKzWA;EC/BY,WAAA;EACA,iBAAA;EACA,kCAAA;EACA,kBAAA;EACA,gBAAA;AN2YZ;AKhXA;ECxBgB,YAAA;EACA,QAAA;EAEA,8BAAA;EAEA,6CAAA;ANyYhB;AKtXA;EA0EY,OAAA;EACA,gBAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,cAAA;EACA,YAAA;EACA,UAAA;AL+SZ;AK7SY;EACI,OAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,WAAA;EACA,WAAA;EACA,gBAAA;EACA,gBAAA;EACA,sBAAA;EACA,0CAAA;EACA,0CAAA;EACA,kBAAA;EACA,oBAAA;EACA,6BAAA;EACA,iCAAA;EACA,eAAA;AL+ShB;AK7SgB;EACI,cAAA;AL+SpB;AK7SgB;EACI,eAAA;AL+SpB;AK5SgB;EACI,0CAAA;AL8SpB;AK5SgB;EACI,0CAAA;AL8SpB;AK3SgB;EACI,YAAA;EACA,eAAA;EACA,0CAAA;AL6SpB;AKnaA;EEhCY,kBAAA;APscZ;AKtaA;EE7BgB,UAAA;EACA,WAAA;EACA,cAAA;EACA,sCAAA;EACA,4CAAA;EACA,yBAAA;EACA,+BAAA;EACA,iBAAA;EACA,eAAA;APschB;AKjbA;EElBoB,cAAA;EACA,oBAAA;APscpB;AOncgB;;EAEI,yBAAA;EACA,YAAA;APqcpB;AK1bA;EEJgB,kBAAA;EACA,kCAAA;EACA,QAAA;EACA,cAAA;EACA,mBAAA;EACA,gBAAA;EACA,kBAAA;APichB;AO/bgB;EACI,iBAAA;EACA,yBAAA;EACA,eAAA;EACA,mBAAA;EACA,cAAA;EACA,iCAAA;EACA,iBAAA;EACA,eAAA;APicpB;AO/boB;EACI,oCAAA;EACA,YAAA;APicxB;AKjdA;EA6HgB,aAAA;ALuVhB;AKpdA;EAmIQ,QAAA;EAEA,kBAAA;EACA,aAAA;EACA,eAAA;ALmVR;AK1dA;;EA4IQ,OAAA;EACA,aAAA;EACA,gBAAA;EACA,iBAAA;ALkVR;AKjeA;EAoJY,kBAAA;EACA,WAAA;EACA,YAAA;EACA,iBAAA;EACA,0CAAA;ALgVZ;AKxeA;EA2JgB,kBAAA;EACA,MAAA;EACA,WAAA;EACA,YAAA;EACA,aAAA;ALgVhB;AK/eA;EAqKQ,kBAAA;EACA,aAAA;EACA,sBAAA;AL6UR;AKpfA;;;;EA6KY,WAAA;EAEA,gBAAA;EACA,mBAAA;EACA,iBAAA;EACA,sBAAA;EACA,oCAAA;EACA,YAAA;EACA,aAAA;EACA,+BAAA;EACA,eAAA;EACA,6CAAA;AL4UZ;AEmTI;;;;EG1nBY,+BAAA;AL6UhB;AEiTI;;;;EG9nBY,+BAAA;ALmVhB;AE+SI;;;;EGloBY,+BAAA;ALyVhB;AKtVY;;;;EACI,iBAAA;EACA,cAAA;AL2VhB;AE0RI;;;;EGlnBgB,cAAA;AL8VpB;AEwRI;;;;EGtnBgB,cAAA;ALoWpB;AEsRI;;;;EG1nBgB,cAAA;AL0WpB;AK/iBA;EA0MY,6BAAA;EJxOR,iFAAA;EACA,gBAAA;ADilBJ;AKpjBA;;EA+MY,kBAAA;ALyWZ;AKxjBA;;;EAoNY,UAAA;EACA,mBAAA;ALyWZ;AK9jBA;EAwNY,gBAAA;EACA,UAAA;ALyWZ;AKlkBA;EA4NY,aAAA;ALyWZ;AKrkBA;EA+NY,UAAA;ALyWZ;AKvWY;;EACI,YAAA;AL0WhB;AK5kBA;EAsOgB,kBAAA;ALyWhB;AK/kBA;EAyOgB,+BAAA;ALyWhB;AKvWY;EAEQ,iBAAA;EACA,cAAA;EAOA,4BAAA;EACA,6BAAA;ALkWpB;AE+NI;EGtkBoB,WAAA;AL0WxB;AEgOI;EG1kBoB,WAAA;AL6WxB;AEiOI;EG9kBoB,WAAA;ALgXxB;AKtXY;EAcQ,mBAAA;AL2WpB;AKzXY;EAiBQ,cAAA;AL2WpB;AKvmBA;EAiQgB,eAAA;ALyWhB;AK1mBA;EFqBsD,UAAA;EAEpD,YAAA;EAGM,gBAAA;EAAsB,aAAA;EACd,mBAAA;EAEX,uBAAA;EACM,iBAAA;EACa,oCAAA;EAErB,iCAAA;EACK,eAAA;EEoOI,eAAA;ALiXZ;AGrlB8B;EAClB,0CAAA;EAEX,YAAA;AHslBD;AGplBQ;EAAmB,0CAAA;AHulB3B;AK9nBA;EAyQY,UAAA;EACA,mBAAA;ALwXZ;AKloBA;EA8QY,UAAA;EACA,WAAA;EACA,gBAAA;EACA,aAAA;EACA,mBAAA;ALuXZ;AKzoBA;EFhBc,OAAA;EAAa,YAAA;EAE3B,sBAAA;EACS,aAAA;EAAmB,mBAAA;EAExB,uBAAA;EACG,0CAAA;EACO,kBAAA;EACd,0CAAA;EACgB,oCAAA;EACA,eAAA;AH4pBhB;AG5pBsC;EACtB,YAAA;EAEF,eAAA;AH6pBd;AK1pBA;EFAC,iBAAA;EAGU,+BAAA;AH2pBX;AK9pBA;EFI2B,6BAAA;EAIxB,YAAA;AH0pBH;AGzpBe;EAGV,0CAAA;AHypBL;AG5pBe;EAKqC,YAAA;AH0pBpD;AGvpBS;EACR,0CAAA;AHypBD;AK3qBA;EAyRgB,kBAAA;ALqZhB;AK9qBA;EA+RQ,QAAA;EACA,kBAAA;EACA,aAAA;ALkZR;AKnrBA;EAoSY,YAAA;EACA,aAAA;EACA,sBAAA;EACA,0CAAA;ALkZZ;AKzrBA;EA2SY,WAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,+BAAA;ALiZZ;AK7YI;EAEQ,iBAAA;AL8YZ;AKhZI;EAKY,OAAA;AL8YhB;AKnZI;EAQgB,gBAAA;AL8YpB;AKtZI;EAaY,OAAA;EACA,YAAA;EACA,yBAAA;AL4YhB;AK3ZI;EAkBgB,UAAA;EACA,kBAAA;EACA,mBAAA;AL4YpB;AKhaI;EA0BQ,QAAA;EACA,iBAAA;EACA,sBAAA;ALyYZ;AKraI;EAiCQ,eAAA;EACA,mBAAA;ALuYZ;AKzaI;EAsCQ,UAAA;EACA,aAAA;EACA,eAAA;EACA,mBAAA;ALsYZ;AK/aI;EA4CY,UAAA;EACA,gBAAA;ALsYhB;AKnbI;EF/RkD,UAAA;EAEpD,YAAA;EAGM,gBAAA;EAAsB,aAAA;EACd,mBAAA;EAEX,uBAAA;EACM,iBAAA;EACa,oCAAA;EAErB,iCAAA;EACK,eAAA;EEoUQ,2BAAA;EACA,cAAA;AL8YhB;AGntB8B;EAClB,0CAAA;EAEX,YAAA;AHotBD;AGltBQ;EAAmB,0CAAA;AHqtB3B;AKxcI;;;EAyDY,aAAA;ALoZhB;AK7cI;EA8DQ,QAAA;EACA,kBAAA;EACA,aAAA;EACA,WAAA;ALkZZ;AKndI;EAoEY,OAAA;EACA,WAAA;EACA,gBAAA;EACA,0CAAA;EACA,aAAA;EACA,sBAAA;EACA,mBAAA;EACA,6BAAA;EACA,iCAAA;EACA,eAAA;ALkZhB;AKhZgB;EACI,0CAAA;ALkZpB;AKnZgB;EAIQ,UAAA;ALkZxB;AKtZgB;EAOQ,YAAA;ALkZxB;AK/YgB;EACI,0CAAA;ALiZpB;AK/YgB;EACI,eAAA;ALiZpB;AKlZgB;;EAKQ,YAAA;ALiZxB;AK9YgB;EACI,qDAAA;ALgZpB;AK/YoB;EACI;IACI,0CAAA;ELiZ1B;AACF;AK1fI;EA+GY,UAAA;EACA,WAAA;EACA,wBAAA;EACA,YAAA;AL8YhB;AKhgBI;EAsHY,6BAAA;EACA,kBAAA;EACA,oCAAA;AL6YhB;AKrgBI;EA4HY,WAAA;EACA,YAAA;EACA,WAAA;AL4YhB;AK1gBI;EAmIgB,oEAAA;EACA,wBAAA;AL0YpB;AK9gBI;EA0IgB,oEAAA;EACA,wBAAA;ALuYpB;AKt0BA;EAucY,6DAAA;ALkYZ;AKz0BA;EA2cY,8BAAA;ALiYZ;AK50BA;EAgdQ,UAAA;EACA,WAAA;EACA,kBAAA;EACA,SAAA;EACA,QAAA;AL+XR;AKn1BA;EAwdQ,kBAAA;EACA,MAAA;EACA,SAAA;EACA,OAAA;EACA,QAAA;EAEA,aAAA;EACA,mBAAA;AL6XR;AK51BA;EAkeY,UAAA;EACA,WAAA;AL6XZ;AKh2BA;EAueY,gBAAA;AL4XZ;AKvXA;EAEI,gBAAA;ALwXJ;AK1XA;;EAMQ,iBAAA;ALwXR;AQ74BA;EACI,cAAA;AR+4BJ;AQ54BA;EAEQ,iBAAA;EACA,oBAAA;EACA,kBAAA;AR64BR;AQj5BA;EAOY,YAAA;EACA,eAAA;AR64BZ;AQr5BA;EAUkC,gBAAA;AR84BlC;AQx5BA;EAWgC,eAAA;ARg5BhC;AQ35BA;EAYgC,eAAA;ARk5BhC;AQ95BA;EAgBY,UAAA;EACA,YAAA;ARi5BZ;AQl6BA;EAuBgB,qBAAA;EACA,UAAA;EACA,WAAA;EACA,UAAA;EACA,aAAA;EACA,YAAA;EACA,aAAA;EACA,+BAAA;EACA,iBAAA;EACA,YAAA;EACA,gBAAA;AR84BhB;AQ/6BA;EAoCoB,kBAAA;EACA,cAAA;EACA,oBAAA;AR84BpB;AQp7BA;EA4CY,kBAAA;EACA,YAAA;EACA,UAAA;EACA,WAAA;AR24BZ;AQ17BA;EAmDyB,UAAA;AR04BzB;AQ77BA;EAuDY,eAAA;EACA,+BAAA;EACA,aAAA;EACA,mBAAA;ARy4BZ;AQn8BA;EA4DoB,kBAAA;AR04BpB;AQt8BA;EA8D8B,+BAAA;AR24B9B;AQz8BA;EAkEwB,QAAA;AR04BxB;AQ58BA;;EAqE4B,aAAA;AR24B5B;AQh9BA;EAwEQ,aAAA;EACA,sBAAA;EACA,uBAAA;EACA,6BAAA;EACA,WAAA;EACA,sBAAA;EACA,0CAAA;EACA,kBAAA;EACA,sBAAA;EACA,YAAA;EACA,gBAAA;EACA,eAAA;EACA,eAAA;AR24BR;AQ/9BA;EAuFY,6BAAA;AR24BZ;AQl+BA;EA0FgB,kBAAA;AR24BhB;AQr+BA;EA+FY,kBAAA;EACA,WAAA;EACA,eAAA;ARy4BZ;AQ1+BA;EAsGQ,0CAAA;EACA,kBAAA;EACA,sBAAA;EACA,YAAA;EACA,gBAAA;ARu4BR;AQj/BA;EA8GQ,OAAA;ARs4BR;AQp/BA;EAgHwB,kBAAA;ARu4BxB;AQv/BA;EAkH0B,aAAA;ARw4B1B;AQ1/BA;EAqHY,aAAA;ARw4BZ;AQ7/BA;;EAwHoC,aAAA;ARy4BpC;AQjgCA;EA4HY,aAAA;EACA,uBAAA;EACA,YAAA;EACA,kBAAA;ARw4BZ;AQvgCA;EAkIgB,kBAAA;EACA,WAAA;EACA,YAAA;EACA,kBAAA;ARw4BhB;AQ7gCA;EAuIyB,aAAA;ARy4BzB;AQhhCA;EAyIoB,SAAA;EACA,kBAAA;EACA,cAAA;AR04BpB;AQrhCA;EAgJgB,aAAA;ARw4BhB;AQn4BI;EACuB,aAAA;ARq4B3B;AQt4BI;EAGyB,aAAA;ARs4B7B;AQz4BI;EAKwB,QAAA;ARu4B5B;AQ54BI;EAQQ,QAAA;ARu4BZ;AQ/4BI;EAU0B,aAAA;ARw4B9B;AQl5BI;EAY2B,cAAA;ARy4B/B;AAhiCA;EAAe,gBAAA;AAmiCf;AAliCA;EAAuB,UAAA;AAqiCvB;AAniCA;EACI,4CAAA;EACA,YAAA;AAqiCJ;AAliCA;EACI,YAAA;EACA,aAAA;EACA,kBAAA;EACA,sBAAA;EACA,gBAAA;EACA,cAAA;EACA,kBAAA;AAoiCJ;AA3iCA;EAWQ,YAAA;EAEA,mBAAA;AAkiCR;AA/iCA;EAiBQ,uCAAA;EACA,eAAA;EACA,iBAAA;EACA,YAAA;AAiiCR;AArjCA;EAwBQ,gBAAA;EACA,eAAA;AAgiCR;AAzjCA;EA6BQ,YAAA;AA+hCR;AA3hCA;EACI,YAAA;EACA,WAAA;EACA,WAAA;EACA,aAAA;EACA,sBAAA;EACA,mBAAA;EACA,uBAAA;EACA,sBAAA;AA6hCJ;AA1hCA;EACI,kBAAA;EACA,gBAAA;EACA,YAAA;EACA,WAAA;EACA,iBAAA;EACA,cAAA;AA4hCJ;AAliCA;EASQ,kBAAA;EACA,WAAA;EACA,YAAA;EACA,wBAAA;AA4hCR;AAxiCA;EAgBQ,2BAAA;AA2hCR;AAxhCI;;EAEI,kBAAA;EACA,0CAAA;AA0hCR;AArhCI;EACe,2BAAA;AAuhCnB;AAxhCI;EAEe,4BAAA;AAyhCnB;AArhCA;EACI,aAAA;EACA,sBAAA;EACA,mBAAA;EACA,uBAAA;EACA,WAAA;EACA,YAAA;AAuhCJ;AAphCA;EACI,UAAA;EACA,aAAA;EACA,aAAA;EACA,kBAAA;EACA,sBAAA;EACA,uBAAA;EACA,mBAAA;EACA,WAAA;EACA,iBAAA;EAuBA,wBAAA;AAggCJ;AAhiCA;EAYQ,kBAAA;EACA,QAAA;AAuhCR;AApiCA;;;EAgBY,UAAA;EACA,WAAA;AAyhCZ;AAthCQ;EACI,kBAAA;AAwhCZ;AAzhCQ;;;EAIQ,YAAA;EACA,aAAA;AA0hChB;AAlhCI;EACI,iBAAA;AAohCR;AAhhCA;EACI,kBAAA;EACA,QAAA;EACA,WAAA;EACA,WAAA;EACA,oCAAA;EACA,0BAAA;EAEA,kBAAA;EACA,4BAAA;EACA,8CAAA;EAGA,gBAAA;EAEA,UAAA;AA8gCJ;AA3gCI;EACI,2BAAA;AA6gCR;AAzgCI;EACI,mBAAA;EACA,wBAAA;EACA,yCAAA;AA2gCR;AAtgCI;EACI,oCAAA;AAwgCR;AApgCA;EACI,UAAA;EACA,WAAA;EACA,YAAA;EACA,aAAA;EACA,iBAAA;EACA,kBAAA;AAsgCJ;AA5gCA;EASQ,kBAAA;EACA,aAAA;EACA,eAAA;EACA,YAAA;EACA,WAAA;AAsgCR;AAnhCA;EAiBQ,kBAAA;EACA,SAAA;EACA,QAAA;EACA,YAAA;EACA,YAAA;EAEA,oBAAA;AAogCR;AA3hCA;EA0BY,kBAAA;EACA,SAAA;EACA,WAAA;EACA,mBAAA;EAEA,oBAAA;AAmgCZ;AAjgCY;EACI,+CAAA;AAmgChB;AAriCA;EAsCgB,kBAAA;EACA,MAAA;AAkgChB;AAziCA;EA6CQ,kBAAA;EACA,WAAA;AA+/BR;AA7iCA;EAiDY,kBAAA;EACA,WAAA;EACA,YAAA;AA+/BZ;AAljCA;ESpLY,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,8BAAA;EACA,iBAAA;EACA,kBAAA;EACA,UAAA;EACA,4CAAA;ATyuCZ;ASruCY;EACI,mBAAA;EACA,UAAA;EACA,wBAAA;ATuuChB;AAtkCA;ES7JgB,UAAA;EACA,WAAA;EACA,YAAA;ATsuChB;AA3kCA;EUnLY,UAAA;EACA,kBAAA;EACA,QAAA;EACA,UAAA;EACA,8BAAA;EACA,kBAAA;EACA,UAAA;EACA,eAAA;EACA,wBAAA;EACA,iBAAA;EAEA,aAAA;EACA,mBAAA;AVgwCZ;AAzlCA;EUpKgB,YAAA;EACA,uBAAA;EACA,wBAAA;EACA,+BAAA;EACA,sBAAA;AVgwChB;AU9vCgB;EACI,YAAA;AVgwCpB;AAnmCA;EUxJgB,yBAAA;EACA,uBAAA;EACA,wBAAA;EACA,0CAAA;EACA,oBAAA;EACA,sBAAA;EACA,2BAAA;EACA,4BAAA;AV8vChB;AA7mCA;EU5IY,UAAA;EACA,WAAA;EACA,wBAAA;EACA,oCAAA;AV4vCZ;AUzvCQ;;EAEI,UAAA;AV2vCZ;AAvnCA;EA6DY,kBAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,uBAAA;EACA,YAAA;AA6jCZ;AAhoCA;EAwEQ,kBAAA;EACA,YAAA;EACA,WAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;AA2jCR;AAxoCA;EAgFY,eAAA;EACA,+BAAA;EAEA,+BAAA;AA0jCZ;AA7oCA;EAuFY,kBAAA;EACA,2BAAA;EACA,YAAA;EACA,oBAAA;EACA,oCAAA;EACA,+BAAA;AAyjCZ;AAvjCY;EAAW,QAAA;AA0jCvB;AAzjCY;EAEI,wBAAA;AA0jChB;AApjCY;EACI,WAAA;EACA,kBAAA;EACA,uBAAA;EACA,oCAAA;EACA,qCAAA;AAsjChB;AApjCY;EACI,mDAAA;EACA,WAAA;AAsjChB;AApjCY;EACI,gDAAA;EACA,cAAA;AAsjChB;AAhjCA;EGtSQ,kBAAA;EACQ,aAAA;EACN,mBAAA;EACK,WAAA;EACgB,gBAAA;EACF,iBAAA;EHmSzB,uBAAA;EACA,WAAA;EACA,UAAA;EACA,gBAAA;EACA,8CAAA;EACA,UAAA;AAujCJ;AApjCA;EACI,kBAAA;EACA,OAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;AAsjCJ;AA3jCA;EAQQ,WAAA;EACA,gBAAA;AAsjCR;AA/jCA;EAYY,YAAA;EACA,8BAAA;AAsjCZ;AAnkCA;EAiBQ,iBAAA;AAqjCR;AAjjCA;EACI,kBAAA;EACA,SAAA;EACA,wBAAA;EACA,uBAAA;AAmjCJ;AAhjCA;EAII,kBAAA;EACA,SAAA;EACA,UAAA;EACA,YAAA;EACA,WAAA;EACA,uBAAA;EACA,mBAAA;EACA,8BAAA;EACA,4CAAA;EACA,gEAAA;EAKA,eAAA;AA2iCJ;AA7jCA;EAsBQ,UAAA;EACA,WAAA;EACA,kBAAA;EACA,QAAA;EACA,SAAA;EACA,mBAAA;EACA,yBAAA;EACA,qEAAA;EAOA,yBAAA;AAoiCR;AAjiCI;EAGI,iBAAA;EACA,SAAA;EACA,UAAA;AAiiCR;AA9hCI;EACI,eAAA;AAgiCR;AAjiCI;EAGa,YAAA;AAiiCjB;AA9hCA;EAGQ,UAAA;EACA,WAAA;EACA,QAAA;EACA,SAAA;EACA,kBAAA;AA8hCR;AA3hCA;EAEI,UAAA;EAEA,kBAAA;EACA,4CAAA;AA2hCJ;AArhCA;EAII,kBAAA;EACA,SAAA;EACA,UAAA;EACA,YAAA;EACA,WAAA;EAEA,yBAAA;EACA,mBAAA;EACA,mBAAA;EACA,4CAAA;EACA,UAAA;EACA,kBAAA;EACA,4CAAA;EAIA,eAAA;AAghCJ;AApiCA;EAuBQ,kBAAA;EACA,QAAA;EACA,SAAA;EACA,2BAAA;EACA,+BAAA;AAghCR;AA9gCI;EACI,YAAA;AAghCR;AA7gCA;EACI,UAAA;EACA,mBAAA;EACA,uCAAA;AA+gCJ;AA1gCA;EACI,kBAAA;EACA,UAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;AA4gCJ;AAjhCA;EAQQ,iBAAA;EACA,cAAA;EACA,cAAA;EACA,eAAA;AA4gCR;AAvhCA;EAeQ,cAAA;EACA,YAAA;EACA,kBAAA;EACA,UAAA;EACA,+BAAA;EACA,+CAAA;EAIA,iBAAA;EACA,eAAA;AAwgCR;AAtgCQ;EACI,YAAA;AAwgCZ;AArgCQ;EACI,oCAAA;AAugCZ;AApgCQ;EACI,YAAA;EACA,eAAA;AAsgCZ;AA3iCA;EA0CQ,iBAAA;EACA,cAAA;EACA,+BAAA;EACA,UAAA;EAEA,wBAAA;AAmgCR;AAljCA;EAmDQ,kBAAA;EACA,QAAA;EAEA,iBAAA;EACA,mBAAA;EACA,cAAA;EACA,kBAAA;EACA,UAAA;EAEA,4CAAA;EAGA,cAAA;ECngBJ,iFAAA;EACA,gBAAA;ADkgDJ;AA3/BA;;EAGQ,kBAAA;EACA,UAAA;EAEA,4CAAA;AA2/BR;AAjgCA;EAWQ,mBAAA;EACA,UAAA;EAEA,wBAAA;AAw/BR;AAp/BA;EACI,aAAA;EACA,kBAAA;EACA,SAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,oBAAA;AAs/BJ;AA7/BA;EAgBQ,WAAA;EACA,YAAA;AAg/BR;AA7+BA;EACI,cAAA;AA++BJ;AWjiDQ;EACI,wBAAA;EACA,+DAAA;AXmiDZ;AWjiDQ;EACI,kBAAA;EACA,+DAAA;AXmiDZ;AWhiDQ;EACI,oBAAA;EACA,UAAA;EACA,wBAAA;EACA,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,8BAAA;EACA,aAAA;EACA,UAAA;EACA,eAAA;AXkiDZ;AWhiDY;EACI,mBAAA;EACA,UAAA;AXkiDhB;AWrjDQ;EAuBQ,0BAAA;EACA,YAAA;EACA,qBAAA;AXiiDhB;AW1jDQ;EA6BQ,kBAAA;EACA,SAAA;EACA,gBAAA;EACA,aAAA;EACA,WAAA;EACA,oBAAA;EACA,+BAAA;EACA,+CAAA;EACA,yBAAA;AXgiDhB;AWrkDQ;EAwCY,OAAA;AXgiDpB;AWxkDQ;EA2CgB,qBAAA;EACA,kBAAA;AXgiDxB;AW9hDwB;EACI,cAAA;EACA,+CAAA;AXgiD5B;AW5hDoB;EACI,iBAAA;AX8hDxB",sourcesContent:['@import "../../../WebCore/css/Assets/Assets.less";\n@import "../../../WebCore/css/Assets/Mixins.less";\n@import "Shared.less";\n@import "Components/Record/InputStreamChooser.less";\n@import "Components/PostRecord.less";\n@import "Components/PostRecordMobile.less";\n@import "Components/Record/Countdown.less";\n@import "Components/Record/StreamActionOverlay.less";\n@import "Components/Record/SmartCamLoading.less";\n\n// This should be kept in sync with @fade-duration in Modal.less.\n@modal-transition-duration: 200ms;\n@record-button-glyph-transition-duration: 0.5s;\n\n// Temporary: override cascading styles from landing page in Express.\n#webRecorder { font-weight: 400; }\n.button-footer .logo { padding: 0; }\n\nbody {\n    font-family: Segoe UI,Helvetica,sans-serif;\n    height: 100%;\n}\n\n#browserNotSupported {\n    height: 100%;\n    padding: 20px;\n    padding-top: 130px;\n    box-sizing: border-box;\n    background: #222;\n    color: fadein(white, 80%);\n    text-align: center;\n\n    img {\n        @height: 26px;\n        height: @height;\n        // Marketing guidelines call for margins at least as tall as the logo.\n        margin-bottom: @height;\n    }\n\n    h1 {\n        font-family: \'Droid Sans\' , arial, serif;\n        font-size: 25px;\n        font-weight: bold;\n        color: white;\n    }\n\n    .subhead {\n        margin-top: 16px;\n        font-size: 18px;\n    }\n\n    a {\n        color: white;\n    }\n}\n\n#webRecorder {\n    height: 100%;\n    width: 100%;\n    margin: 0px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: #222;\n}\n\n.stage-container {\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    width: 100%;\n    max-width: 1200px;\n    margin: 0 auto;\n\n    .stage {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        transition: transform @stage-transition-duration;\n    }\n    // PostRecord overlaps Record by the height of the bottom bar (which transitions to the header of PostRecord).\n    .stage-2 {\n        transform: translateY(-@control-bar-relative-height);\n    }\n\n    &.stage-1-shown .stage-2,\n    &.stage-2-shown .stage-1 {\n        visibility: hidden;\n        transition:\n            visibility 0s @stage-transition-duration,\n            transform @stage-transition-duration;\n    }\n\n    &.stage-2-shown {\n        .stage-1 { transform: translateY(@control-bar-relative-height - 100%); }\n        .stage-2 { transform: translateY(-100%); }\n    }\n}\n\n.record-controls {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n}\n\n.visualizer-container {\n    flex: auto;\n    min-height: 0;\n    display: flex;\n    position: relative;  // to allow absolute positioning of children\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    background: black;\n\n    .graph-renderers {\n        position: absolute;\n        top: 0px;\n\n        img, canvas, video {\n            width: 2px;\n            height: 2px;\n        }\n\n        &.visible {\n            position: relative;\n\n            img, canvas, video {\n                width: 192px;\n                height: 108px;\n            }\n        }\n    }\n\n    // Blur the main UI when the Share modal is displayed.\n    // [BUGBUG 74309]: Ideally we would use `backdrop-filter` on the modal itself, but x-browser support is limited.\n    transition: filter @modal-transition-duration;\n    &.blur {\n        filter: blur(5px);\n    }\n}\n\n.record-overlay {\n    position: absolute;\n    top: @control-bar-relative-height;\n    height: 100% - (2 * @control-bar-relative-height);\n    width: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n    backdrop-filter: blur(3px);\n    // Hide "above the fold" when not visible (or "below the fold", for .bottom-anchored).\n    visibility: hidden;\n    transform: translateY(-100%);\n    transition:\n        transform 0.2s,\n        visibility 0s 0.2s;\n    overflow: hidden;\n    // Overlay bottom controls but sit under the top bar.\n    z-index: 2;\n\n    // Option to slide up from the bottom instead of down from the top.\n    &.bottom-anchored {\n        transform: translateY(100%);\n    }\n\n    // Slide into content area when shown.\n    &.visible {\n        visibility: visible;\n        transform: translateY(0);\n        transition:\n            transform 0.2s,\n            visibility 0s;\n    }\n\n    &.settings-overlay {\n        background-color: rgba(0, 0, 0, 0.8);\n    }\n}\n\n.stream-visualizer-container {\n    flex: auto;\n    width: 100%;\n    height: 100%;\n    min-height: 0;\n    background: black;\n    position: relative;\n\n    .tile-container {\n        position: absolute;\n        display: flex;\n        flex-wrap: wrap;\n        height: 100%;\n        width: 100%;\n    }\n\n    .pip-container {\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        width: 33.3%;\n        height: 100%;\n        // Allow hovers on the tile behind the PIP region.\n        pointer-events: none;\n\n        .stream-visual {\n            position: absolute;\n            bottom: 0;\n            width: 100%;\n            padding-top: 56.25%;\n            // Re-enable pointer events on the PIP region (disabled above for the overall PIP canvas).\n            pointer-events: auto;\n\n            &:hover {\n                box-shadow: 0px 0px 14px 0px rgba(0, 0, 0, 0.8);\n            }\n\n            video {\n                position: absolute;\n                top: 0;\n            }\n        }\n    }\n    \n    .stream-visual {\n        position: relative;\n        width: 100%;\n\n        video {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n        }\n\n        // Import Smart Cam loading overlay mixin in #webRecorder namespace (from SmartCamLoading.less).\n        #webRecorder.smart-cam-loading();\n\n        // Import action overlay mixin in #webRecorder namespace (from StreamActionOverlay.less).\n        #webRecorder.stream-action-overlay();\n\n        .screen-overlay {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: black;\n            opacity: 0.5;\n        }\n    }\n\n    .no-video-streams-container {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .material-icons {\n            font-size: 25vh;\n            color: @contrast-background-color-dark-theme;\n            // Shift the icon up to center between the two calls to action (baseline is half the height of .record-button).\n            margin-bottom: calc(12px + 4vh);\n        }\n\n        .call-to-action {\n            position: absolute;\n            font-size: calc(14px + 1vh);\n            padding: 2vh;\n            border-radius: 0.4vh;\n            background: @contrast-background-color-dark-theme;\n            color: @font-color-secondary-dark-theme;\n\n            &.camera { top: 4vh; }\n            &.record {\n                // 4vh + half the height of .record-button (12px + 4vh).\n                bottom: calc(12px + 8vh);\n            }\n\n            @arrow-height: 2.2vh;\n            @arrow-width: 5vh;\n            @arrow-half-width: @arrow-width / 2;\n            &::before {\n                content: "";\n                position: absolute;\n                left: calc(50% - @arrow-half-width);\n                border-left: @arrow-half-width solid transparent;\n                border-right: @arrow-half-width solid transparent;\n            }\n            &.camera::before {\n                border-bottom: @arrow-height solid rgba(255, 255, 255, 0.2);\n                top: -@arrow-height;\n            }\n            &.record::before {\n                border-top: @arrow-height solid rgba(255, 255, 255, 0.2);\n                bottom: -@arrow-height;\n            }\n        }\n    }\n}\n\n.bottom-controls {\n    .control-bar();\n    justify-content: center;\n    width: 100%;\n    flex: none;\n    background: #333;\n    border-top: solid 1px rgba(170, 170, 170, 0.3);\n    z-index: 2;\n}\n\n.logo-region {\n    position: absolute;\n    left: 0;\n    height: 100%;\n    display: flex;\n    align-items: center;\n\n    .panopto-logo {\n        height: 60%;\n        margin-left: 3vh;\n\n        svg {\n            height: 100%;\n            fill: rgba(255, 255, 255, 0.4);\n        }\n    }\n    a.panopto-logo:hover #glyph {\n        fill-opacity: 0.5;\n    }\n}\n\n.center-button-container {\n    position: relative;\n    top: -50%;\n    height: calc(24px + 8vh);\n    width: calc(24px + 8vh);\n}\n\n.record-button {\n    @border-width: 3px;\n    @border-width-transition-duration: 0.1s;\n\n    position: absolute;\n    top: -@border-width;\n    left: -@border-width;\n    height: 100%;\n    width: 100%;\n    border: @border-width solid white;\n    border-radius: 100%;\n    background: rgba(0, 0, 0, 0.8);\n    box-shadow: 0 2px 9px 0px rgba(0, 0, 0, 0.5);\n    transition:\n        top @border-width-transition-duration,\n        left @border-width-transition-duration,\n        border-width @border-width-transition-duration,\n        opacity 0.2s;\n    cursor: pointer;\n\n    .glyph {\n        @size: 80%;\n        width: @size;\n        height: @size;\n        position: relative;\n        top: (100% - @size) / 2;\n        left: (100% - @size) / 2;\n        border-radius: 100%;\n        background-color: #ed2f02;\n        transition-property:\n            width,\n            height,\n            top,\n            left,\n            border-radius,\n            opacity;\n        transition-duration: @record-button-glyph-transition-duration;\n    }\n\n    &:hover:not(.disabled) {\n        @border-width: 5px;\n\n        border-width: @border-width;\n        top: -@border-width;\n        left: -@border-width;\n    }\n\n    &.disabled {\n        cursor: default;\n\n        .glyph { opacity: 0.5; }\n    }\n}\n.record-controls.recording .record-button {\n    .glyph {\n        @size: 60%;\n        width: @size;\n        height: @size;\n        top: (100% - @size) / 2;\n        left: (100% - @size) / 2;\n        border-radius: 10%;\n    }\n}\n.record-controls.overlay-open .record-button {\n    // Fade out when hidden (transition on main class).\n    opacity: 0;\n    // Hide via visibility to prevent clicks on transparent icon.\n    visibility: hidden;\n    transition:\n        opacity 0.2s,\n        // Wait for opacity transition (0.2s) before hiding.\n        visibility 0s 0.2s;\n}\n\n.menu-close-button {\n    // Match border size of resting state of Record / Stop button for layout purposes.\n    @border-width: 3px;\n\n    position: absolute;\n    top: -@border-width;\n    left: -@border-width;\n    height: 100%;\n    width: 100%;\n    // Match border color to background.\n    border: solid 3px @icon-color;\n    border-radius: 100%;\n    background: @icon-color;\n    box-shadow: 0 2px 9px 0px rgba(0, 0, 0, 0.5);\n    opacity: 0;\n    visibility: hidden;\n    transition:\n        // Wait for opacity transition (0.2s) before hiding.\n        visibility 0s 0.2s,\n        opacity 0.2s;\n    cursor: pointer;\n\n    span {\n        position: absolute;\n        top: 25%;\n        left: 25%;\n        font-size: calc(12px + 4vh);\n        color: rgba(255, 255, 255, 0.8);\n    }\n    &:hover span {\n        color: white;\n    }\n}\n.record-controls.overlay-open .menu-close-button {\n    opacity: 1;\n    visibility: visible;\n    transition:\n        opacity 0.2s,\n        visibility 0s;\n}\n\n.right-controls {\n    position: absolute;\n    right: 2vh;\n    height: 100%;\n    display: flex;\n    align-items: center;\n\n    .error-icon {\n        margin-right: 1vh;\n        font-size: 9vh;\n        color: #ed2f02;\n        cursor: pointer;\n    }\n\n    .settings-button {\n        font-size: 9vh;\n        padding: 1vh;\n        border-radius: 50%;\n        opacity: 1;\n        color: @icon-color-dark-theme;\n        transition:\n            // Match duration of Record button glyph transition.\n            opacity @record-button-glyph-transition-duration,\n            background-color 0.2s;\n        user-select: none;\n        cursor: pointer;\n\n        &:hover:not(.disabled) {\n            color: @icon-color-active-dark-theme;\n        }\n\n        &.active {\n            background: fadeout(white, 80%);\n        }\n\n        &.disabled {\n            opacity: 0.5;\n            cursor: default;\n        }\n    }\n\n    .camera-flip-button {\n        margin-right: 1vh;\n        font-size: 5vh;\n        color: @icon-color-dark-theme;\n        opacity: 1;\n        // Match duration of Record button glyph transition.\n        transition: opacity @record-button-glyph-transition-duration;\n    }\n\n    .time {\n        position: absolute;\n        right: 0;\n        // Match padding inset from Settings button (combines with .right-controls position to match Panopto logo margin).\n        margin-right: 1vh;\n        align-items: center;\n        color: @font-color-dark-theme;\n        visibility: hidden;\n        opacity: 0;\n        // Match duration of Record button glyph transition.\n        transition:\n            opacity @record-button-glyph-transition-duration,\n            visibility 0s @record-button-glyph-transition-duration;\n        font-size: 5vh;\n        .font-light();\n    }\n}\n\n.record-controls.recording {\n    .settings-button,\n    .camera-flip-button {\n        visibility: hidden;\n        opacity: 0;\n        // Match duration of Record button glyph transition.\n        transition:\n            opacity @record-button-glyph-transition-duration,\n            visibility 0s @record-button-glyph-transition-duration;\n    }\n    .time {\n        visibility: visible;\n        opacity: 1;\n        // Match duration of Record button glyph transition.\n        transition: opacity @record-button-glyph-transition-duration;\n    }\n}\n\n.oscilloscope-container {\n    display: none;\n    position: absolute;\n    top: -50%;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n\n    // border-bottom-width: 1px;\n    // border-top-width: 2px;\n    // border-style: solid;\n    // border-image: linear-gradient( to right, rgba(0,0,0,0) 25%, rgba(255,255,255,.7) 50%, rgba(0,0,0,0) 75%) 1 1 100%;\n    // margin-top: -2px;\n    \n    canvas {\n        width: 100%;\n        height: 100%;\n    }\n}\n.stage-container.stage-1-shown .oscilloscope-container {\n    display: block;\n}\n\n// Import countdown mixin in #webRecorder namespace (from Record/Countdown.less).\n#webRecorder.countdown();\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n','@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n',"@control-bar-relative-height: 15%;\r\n@control-bar-min-height: 50px;\r\n@control-bar-max-height: 200px;\r\n@stage-transition-duration: 1s;\r\n@stage-padding: 12px;\r\n\r\n@border-color: fadeout(white, 80%);\r\n@background-color: fadeout(white, 90%);\r\n@background-color-hover: fadeout(white, 80%);\r\n@background-color-active: fadeout(white, 70%);\r\n\r\n.control-bar {\r\n    position: relative;\r\n    display: flex;\r\n    align-items: center;\r\n    height: @control-bar-relative-height;\r\n    min-height: @control-bar-min-height;\r\n    max-height: @control-bar-max-height;\r\n}\r\n\r\n.post-record-large-button() {\r\n    flex: 1;\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: solid 1px @border-color;\r\n    border-radius: 5px;\r\n    background-color: @background-color;\r\n    transition: color 0.1s, opacity 0.2s;\r\n    cursor: pointer;\r\n\r\n    &.disabled {\r\n        opacity: 0.5;\r\n        cursor: default;\r\n    }\r\n\r\n    .material-icons {\r\n        margin-right: @stage-padding / 2;\r\n        color: @icon-color-dark-theme;\r\n    }\r\n\r\n    .label {\r\n        font-size: calc(14px + 0.4vh);\r\n        color: white;\r\n    }\r\n\r\n    &:not(.disabled) {\r\n        &:hover {\r\n            background-color: @background-color-hover;\r\n\r\n            .material-icons {\r\n                color: white;\r\n            }\r\n        }\r\n        &:active {\r\n            background-color: @background-color-active;\r\n        }\r\n    }\r\n}\r\n\r\n.post-record-sidecar-button() {\r\n    flex: none;\r\n    height: 100%;\r\n    padding: 0 0.4vh;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-left: @stage-padding;\r\n    background: @background-color;\r\n    transition: background-color 0.2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: @background-color-hover;\r\n        color: white;\r\n    }\r\n    &:active {\r\n        background-color: @background-color-active;\r\n    }\r\n}\r\n",'.stream-chooser-header {\n    display: flex;\n    position: relative;\n    height: @control-bar-relative-height;\n    min-height: @control-bar-min-height;\n    max-height: @control-bar-max-height;\n    flex: none;\n    width: 100%;\n    border-bottom: solid 1px rgba(170, 170, 170, 0.3);\n    z-index: 3;\n}\n\n.background {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    background: black;\n\n    svg {\n        transform: translateX(216px) translateY(136px) rotate(540deg) scale(1.3);\n        opacity: 0.8;\n    }\n}\n\n.divider {\n    width: 1px;\n    position: relative;\n    top: 20%;\n    height: 60%;\n    background: rgba(255, 255, 255, 0.3);\n}\n\n.input-stream-category {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    cursor: pointer;\n    // Prevent unintended selection behavior if toggled rapidly enough to count as a double-click.\n    user-select: none;\n    transition: background-color 0.1s;\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.1);\n    }\n\n    &.selected {\n        background-color: rgba(255, 255, 255, 0.2);\n    }\n\n    &.disabled {\n        background-color: transparent;\n        opacity: 0.5;\n        cursor: default;\n    }\n}\n\n.category-button {\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    svg {\n        height: 50%;\n        width: 50%;\n        fill: rgba(255, 255, 255, 0.9);\n    }\n\n    .label {\n        color: white;\n        font-size: calc(12px + 0.5vh);\n    }\n}\n\n.stream-chooser-container {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: space-evenly;\n    height: 100%;\n\n    .no-devices {\n        max-width: 580px;\n        margin: 6vmin;\n        border: solid 1px @border-color-dark-theme;\n        background: rgba(255, 255, 255, 0.1);\n        padding: 2vmin;\n        color: @font-color-secondary-dark-theme;\n        user-select: none;\n\n        .columns {\n            display: flex;\n\n            .material-icons {\n                align-self: center;\n                margin-right: 1vmin;\n                font-size: 20vmin;\n                color: @contrast-background-color-dark-theme;\n            }\n\n            .rows {\n                display: flex;\n                flex-direction: column;\n                justify-content: space-evenly;\n                padding: 2vmin;\n\n                .title {\n                    margin: 1vmin 0;\n                    font-size: calc(16px + 1vmin);\n                }\n                .subtitle {\n                    margin: 1vmin 0;\n                    font-size: calc(12px + 0.6vmin);\n                }\n            }\n        }\n    }\n}\n\n.stream-chooser-container.hidden {\n    display: none;\n}\n\n.stream-chooser-item {\n    @icon-size: 64px;\n\n    position: relative;\n    width: 350px;\n    height: 0;\n    padding-top: calc(56.25% - 12px);\n    margin: 10px;\n    background: rgba(255, 255, 255, 0.1);\n    border: solid 1px rgba(255, 255, 255, 0.3);\n    box-sizing: border-box;\n    border-radius: 1px;\n    box-shadow: 2px 2px 5px 1px rgba(0, 0, 0, 0.5);\n    cursor: pointer;\n\n    video {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n\n    .selected-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        color: white;\n        text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n        background: rgba(0, 0, 0, 0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 10vh;\n        user-select: none;\n        opacity: 0;\n    }\n    &.selected:not(:hover):not(:focus-within) .selected-overlay {\n        opacity: 1;\n    }\n\n    .button-container {\n        display: flex;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        color: white;\n        background: rgba(0, 0, 0, 0.7);\n        opacity: 0;\n\n        &:hover,\n        &:focus-within {\n            opacity: 1;\n        }\n\n        .button {\n            position: relative;\n            flex: 1;\n            padding: 1vmin;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n\n            &:hover::after {\n                content: "";\n                position: absolute;\n                top: 1vmin;\n                right: 1vmin;\n                bottom: 1vmin;\n                left: 1vmin;\n                background: rgba(255, 255, 255, 0.2);\n            }\n\n            .material-icons {\n                width: 100%;\n                text-align: center;\n                font-size: 7vmin;\n            }\n\n            .label {\n                width: 100%;\n                text-align: center;\n                font-size: calc(12px + 0.5vmin);\n            }\n        }\n    }\n\n    .audio-item-container {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        padding: 10px;\n        display: flex;\n\n        canvas {\n            width: 16px;\n            height: 100%;\n            background-color: rgba(255, 255, 255, 0.2);\n\n            // VU may become paused if multi-stream audio preview is not possible (e.g. Firefox), hide it in this case.\n            &.inactive {\n                display: none;\n            }\n        }\n\n        .label {\n            margin-left: 10px;\n            font-size: 16px;\n            color: white;\n\n            &.unknown { font-style: italic; }\n        }\n    }\n\n    .item-error {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n\n        .item-name,\n        .error-text {\n            position: absolute;\n            left: 10px;\n            right: 10px;\n            text-align: center;\n            font-size: 16px;\n        }\n\n        .item-name {\n            top: 10px;\n            // This element gets .ellipsis which includes overflow: hidden. This prevents clipping of descenders.\n            line-height: normal;\n        }\n\n        .error-icon {\n            font-size: @icon-size;\n        }\n\n        .error-text {\n            bottom: 10px;\n\n            a {\n                color: white;\n                margin-left: 5px;\n            }\n        }\n    }\n}\n','@import "../Shared.less";\n@import "./HelpMenu.less";\n@import "./ProgressBar.less";\n\n// Handle transitions to PostRecord.\n.stage-container.stage-2-shown .post-record {\n    // Spin Panopto logo\n    .panopto-logo {\n        // Show PostRecord copy of logo immediately on transition to PostRecord (replaces copy from Record).\n        opacity: 1;\n        transition: none;\n        // Spin the logo counterclockwise once ("climbs" the left edge of the screen like a gear).\n        animation: spin @stage-transition-duration ease;\n    }\n\n    // Show progress controls immediately.\n    .progress-container {\n        visibility: visible;\n    }\n\n    // Show the "return to record" buttons immediately, replacing the time display from Record.\n    .return-to-record-buttons {\n        visibility: visible;\n    }\n\n    // Fade in the tesselated backdrop to PostRecord.\n    .post-record-backdrop {\n        visibility: visible;\n        opacity: 1;\n    }\n}\n// Panopto logo spin animation used above.\n@keyframes spin {\n    100% { transform: rotate(-360deg); }\n}\n\n.post-record {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    color: rgba(255, 255, 255, 0.8);\n\n    .post-record-backdrop {\n        background: url(../Images/post-record-background.svg);\n        background-size: cover;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        // Fade the backdrop in/out when transitioning between PostRecord and Record.\n        transition: opacity @stage-transition-duration;\n        filter: brightness(1.4);\n    }\n\n    .header {\n        flex: 15;\n        display: flex;\n        align-items: center;\n        flex-wrap: wrap;\n\n        .logo-region {\n            .control-bar();\n            height: 15vh;\n            flex: 1;\n            margin: 0 @stage-padding;\n            box-sizing: border-box;\n            min-width: 350px;\n        }\n\n        .panopto-logo {\n            flex: none;\n            margin-left: calc(3vh - @stage-padding);\n            opacity: 0;\n            // Fade the logo out when transitioning back to Record (balance out backdrop opacity obscuring logo from Record).\n            transition: opacity @stage-transition-duration;\n\n            &.processing {\n                // Infinitely spin the logo clockwise at a slower rate than the initial animation.\n                animation: spin 5s linear infinite reverse;\n            }\n        }\n        a.panopto-logo:hover svg {\n            fill: rgba(255, 255, 255, 0.6);\n        }\n\n        .progress-container {\n            flex: auto;\n            padding: 0 20px;\n            height: 100%;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            visibility: hidden;\n\n            .progress-message {\n                font-size: calc(14px + 0.5vh);\n            }\n\n            .progress-subhead {\n                font-size: calc(12px + 0.3vh);\n                margin-top: 0.5vh;\n            }\n        }\n\n        #webRecorder.progress-bar();\n\n        .return-to-record-buttons {\n            flex: 1;\n            min-width: 350px;\n            display: flex;\n            align-items: center;\n            visibility: hidden;\n            margin: 0 @stage-padding;\n            color: white;\n            z-index: 1;\n\n            & > .button {\n                flex: 1;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                margin: @stage-padding / 2;\n                height: 4vh;\n                min-height: 30px;\n                min-width: 125px;\n                box-sizing: border-box;\n                background-color: @background-color;\n                border: solid 1px @border-color;\n                border-radius: 3px;\n                padding: 2px 6px 3px;\n                font-size: calc(12px + 0.4vh);\n                transition: background-color 0.1s;\n                cursor: pointer;\n\n                &:first-child {\n                    margin-left: 0;\n                }\n                &:last-child {\n                    margin-right: 0;\n                }\n\n                &:hover {\n                    background-color: @background-color-hover;\n                }\n                &:active {\n                    background-color: @background-color-active;\n                }\n\n                &.disabled {\n                    opacity: 0.5;\n                    cursor: default;\n                    background-color: @background-color;\n                }\n            }\n\n            #webRecorder.help-menu(@button-size: 3vh, @button-padding: 0.4vh);\n\n            .help-menu {\n                margin: 0 4px;\n            }\n        }\n    }\n\n    .section-splitter {\n        flex: 45;\n        // Needed to ensure this floats over .post-record-backdrop.\n        position: relative;\n        display: flex;\n        flex-wrap: wrap;\n    }\n\n    .preview-container,\n    .control-container {\n        flex: 1;\n        padding: @stage-padding;\n        min-width: 350px;\n        min-height: 150px;\n    }\n\n    .preview-container {\n        .preview-video {\n            position: relative;\n            width: 100%;\n            height: 100%;\n            background: black;\n            box-shadow: 0 2px 9px 0 rgba(0, 0, 0, 0.5);\n\n            video {\n                position: absolute;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                outline: none;\n            }\n        }\n    }\n\n    .control-container {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n\n        .name-input,\n        .description-input,\n        .tags-input-capture,\n        .folder-picker-wrapper input {\n            width: 100%;\n            // Specify T/B/L padding, but don\'t override folder picker right padding (space reserved for spinner / arrow).\n            padding-top: 4px;\n            padding-bottom: 4px;\n            padding-left: 8px;\n            box-sizing: border-box;\n            background: @background-color;\n            border: none;\n            outline: none;\n            color: rgba(255, 255, 255, 0.9);\n            font-size: 16px;\n            transition:\n                background-color 0.1s,\n                color 0.1s;\n\n            .placeholder({\n                color: rgba(255, 255, 255, 0.5);\n            });\n\n            &:focus {\n                background: white;\n                color: @font-color;\n\n                .placeholder({\n                    color: @font-color-lightest;\n                });\n            }\n        }\n        .name-input {\n            font-size: calc(16px + 0.7vh);\n            .font-light();\n        }\n        .name-input,\n        .description-input {\n            padding-right: 8px;\n        }\n        .name-input,\n        .tags-input-capture,\n        .folder-row {\n            flex: none;\n            margin-bottom: 10px;\n        }\n        .tags-input-capture {\n            background: none;\n            padding: 0;\n        }\n        .folder-row {\n            display: flex;\n        }\n        .folder-picker-wrapper {\n            flex: auto;\n\n            &, input {\n                height: 35px;\n            }\n            // Hide the folder spinner when the drop-down is closed, since we don\'t have a "dark theme"-compatible version.\n            .folder-spinner {\n                visibility: hidden;\n            }\n            .dropdown-open-icon {\n                color: @icon-color-dark-theme;\n            }\n            &.dropdown-visible {\n                input {\n                    background: white;\n                    color: @font-color;\n\n                    .placeholder({\n                        color: #999;\n                    });\n\n                    // Straighten bottom corners when drop-down is open to align edges.\n                    border-bottom-left-radius: 0;\n                    border-bottom-right-radius: 0;\n                }\n                .folder-spinner {\n                    visibility: visible;\n                }\n                .dropdown-open-icon {\n                    color: @icon-color;\n                }\n            }\n\n            .dropdown-list {\n                min-width: 100%;\n            }\n        }\n        .folder-breakout-link {\n            .post-record-sidecar-button();\n            font-size: 32px;\n        }\n        .description-input {\n            flex: auto;\n            margin-bottom: 10px;\n        }\n\n        .session-buttons {\n            flex: none;\n            height: 5vh;\n            min-height: 35px;\n            display: flex;\n            align-items: center;\n\n            > div {\n                .post-record-large-button();\n            }\n\n            .edit {\n                margin-right: @stage-padding;\n            }\n        }\n    }\n\n    .share {\n        flex: 40;\n        position: relative;\n        padding: @stage-padding;\n\n        .bounding-box {\n            height: 100%;\n            padding: @stage-padding;\n            box-sizing: border-box;\n            border: solid 1px @border-color;\n        }\n\n        .share-message {\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: calc(0.7vmin + 14px);\n        }\n    }\n\n    &.standalone {\n        .header {\n            flex-wrap: nowrap;\n\n            .logo-region {\n                flex: 8;\n\n                .progress-container {\n                    margin-right: 5%;\n                }\n            }\n\n            .return-to-record-buttons {\n                flex: 2;\n                min-width: 0;\n                justify-content: flex-end;\n\n                > .button {\n                    flex: auto;\n                    padding-left: 15px;\n                    padding-right: 15px;\n                }\n            }\n        }\n\n        .section-splitter {\n            flex: 65;\n            flex-wrap: nowrap;\n            flex-direction: column;\n        }\n\n        // Force video preview to use full width.\n        .preview-container {\n            min-width: 100%;\n            padding: 0 0 @stage-padding 0;\n        }\n\n        .control-container {\n            flex: none;\n            min-height: 0;\n            padding: 0 @stage-padding;\n            flex-direction: row;\n\n            .name-input {\n                flex: auto;\n                margin-bottom: 0;\n            }\n\n            .download-button {\n                .post-record-sidecar-button();\n                font-size: calc(16px + 2vh);\n                color: inherit;\n            }\n\n            .folder-row,\n            .description-input,\n            .session-buttons {\n                display: none;\n            }\n        }\n\n        .button-footer {\n            flex: 20;\n            position: relative;\n            display: flex;\n            margin: @stage-padding / 2;\n\n            > div {\n                flex: 1;\n                margin: @stage-padding / 2;\n                min-height: 50px;\n                background-color: @background-color;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: space-evenly;\n                transition: background-color 0.2s;\n                cursor: pointer;\n\n                &:hover:not(.disabled) {\n                    background-color: @background-color-hover;\n\n                    .logo {\n                        opacity: 1;\n                    }\n                    .label {\n                        color: white;\n                    }\n                }\n                &:active:not(.disabled) {\n                    background-color: @background-color-active;\n                }\n                &.disabled {\n                    cursor: default;\n\n                    .logo,\n                    .label {\n                        opacity: 0.5;\n                    }\n                }\n                &.throb {\n                    animation: pulse 500ms ease-in-out infinite alternate;\n                    @keyframes pulse {\n                        to {\n                            background-color: @background-color-hover;\n                        }\n                    }\n                }\n            }\n\n            .logo {\n                width: 9vh;\n                height: 9vh;\n                transition: opacity 0.2s;\n                opacity: 0.8;\n            }\n\n            .label {\n                font-size: calc(12px + 0.8vh);\n                text-align: center;\n                transition: color 0.2s, opacity 0.2s;\n            }\n\n            .panopto-upload-button svg {\n                width: 100%;\n                height: 100%;\n                fill: white;\n            }\n\n            .youtube-upload-button {\n                .logo {\n                    background: url(../Images/youtube.svg) no-repeat center;\n                    background-size: contain;\n                }\n            }\n\n            .classroom-upload-button {\n                .logo {\n                    background: url(../Images/google-classroom.png) no-repeat center;\n                    background-size: contain;\n                }\n            }\n        }\n    }\n\n    #timelineControls {\n        .control-layer {\n            background: linear-gradient(#000, #0001 40%, #0001 60%, #000);\n        }\n\n        .playback-rate-menu {\n            background: rgba(0, 0, 0, 0.8);\n        }\n    }\n\n    #pipPlayer {\n        width: 33%;\n        height: 33%;\n        position: absolute;\n        bottom: 0;\n        right: 0;\n    }\n\n    #gridPlayers {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n\n        display: flex;\n        align-items: center;\n\n        > div {\n            width: 50%;\n            height: 50%;\n        }\n\n        .hls-stream-player-video {\n            position: static;\n        }\n    }\n}\n\n.stage-container.wide-layout-only .post-record {\n    // (350px columns + (12px * 2) column L/R padding) * 2 columns\n    min-width: 748px;\n\n    .header,\n    .section-splitter {\n        flex-wrap: nowrap;\n    }\n}\n',"// Namespace styles within #webRecorder.\n#webRecorder {\n    .progress-bar() {\n        .progress-track {\n            @track-height: 8px;\n            height: @track-height;\n            margin-top: 1.5vh;\n            background: fadeout(#30733F, 70%);\n            border-radius: (@track-height / 2);\n            overflow: hidden;\n\n            .progress-bar {\n                height: 100%;\n                width: 0;\n                // Use linear easing to smoothly string together updates (which are throttled at 250msec intervals).\n                transition: width 0.25s linear;\n                // [BUGBUG 70035]: Get the correct colors to use here.\n                background: linear-gradient(#83b76d, #177b40);\n            }\n        }\n    }\n}\n","// Namespace styles within #webRecorder.\n#webRecorder {\n    .help-menu(@button-size, @button-padding) {\n        .help-menu {\n            position: relative;\n\n            .help-button {\n                width: @button-size;\n                height: @button-size;\n                padding: @button-padding;\n                border-radius: calc((@button-size / 2) + @button-padding);\n                transition-property: color, background-color;\n                transition-duration: 0.1s;\n                color: @icon-color-dark-theme;\n                user-select: none;\n                cursor: pointer;\n\n                i {\n                    font-size: @button-size;\n                    pointer-events: none;\n                }\n\n                &.active,\n                &:hover {\n                    background-color: @icon-color;\n                    color: @icon-color-active-dark-theme;\n                }\n            }\n\n            .popup-menu {\n                @menu-top-margin: 4px;\n\n                position: absolute;\n                top: calc(@button-size + (2 * @button-padding) + @menu-top-margin);\n                right: 0;\n                padding: (@stage-padding / 4) 0;\n                background: @pure-white;\n                min-width: 120px;\n                border-radius: 3px;\n\n                & > div {\n                    padding: (@stage-padding / 2) @stage-padding;\n                    background-color: @pure-white;\n                    font-size: 14px;\n                    white-space: nowrap;\n                    color: @font-color;\n                    transition: background-color 0.2s;\n                    user-select: none;\n                    cursor: pointer;\n\n                    &:hover {\n                        background-color: rgba(0, 0, 0, 0.1);\n                        color: black;\n                    }\n                }\n            }\n        }\n    }\n}\n","// Provide a scroll container for explicitly-sized .post-record on mobile (deal with keyboard impacting viewport).\n.mobile .stage-2 {\n    overflow: auto;\n}\n\n.mobile .post-record {\n    .header {\n        flex-wrap: nowrap;\n        padding-bottom: 10px;\n        position: relative;\n\n        .logo-region {\n            min-width: 0;\n            margin-right: 0;\n\n            .progress-container { padding-right: 0; }\n            .progress-message { font-size: 16px; }\n            .progress-subhead { font-size: 12px; }\n        }\n\n        .return-to-record-buttons {\n            flex: none;\n            min-width: 0;\n\n            @button-size: 3vh;\n            @button-padding: 0.4vh;\n\n            > .button {\n                display: inline-block;\n                width: @button-size;\n                height: @button-size;\n                padding: 0;\n                margin: 0 8px;\n                min-width: 0;\n                min-height: 0;\n                color: @icon-color-dark-theme;\n                user-select: none;\n                border: none;\n                background: none;\n\n                i {\n                    padding-top: 0.1vh;\n                    font-size: @button-size;\n                    pointer-events: none;\n                }\n            }\n        }\n\n        .mobile-progress-bar-container {\n            position: absolute;\n            bottom: 10px;\n            left: 10px;\n            right: 10px;\n        }\n    }\n\n    .preview-container { padding: 0; }\n\n    .share {\n        .mobile-roll-up {\n            font-size: 16px;\n            color: rgba(255, 255, 255, 0.5);\n            display: flex;\n            align-items: center;\n\n            .text { margin-right: auto; }\n\n            .material-icons { color: @icon-color-dark-theme; }\n        }\n    }\n\n    .section-splitter { flex: 80; }\n\n    .session-buttons,\n    .folder-breakout-link { display: none; }\n\n    .metadata-rollup {\n        display: none;\n        flex-direction: column;\n        align-items: flex-start;\n        justify-content: space-evenly;\n        width: 100%;\n        padding: 0 50px 0 10px;\n        border: solid 1px rgba(255, 255, 255, 0.2);\n        border-radius: 8px;\n        box-sizing: border-box;\n        margin: 12px;\n        margin-bottom: 0;\n        cursor: pointer;\n        font-size: 16px;\n\n        .name {\n            font-size: calc(16px + 0.7vh);\n\n            .name-placeholder {\n                font-style: italic;\n            }\n        }\n\n        .arrow {\n            position: absolute;\n            right: 22px;\n            font-size: 36px;\n        }\n    }\n\n    .control-container {\n        border: solid 1px rgba(255, 255, 255, 0.2);\n        border-radius: 8px;\n        box-sizing: border-box;\n        margin: 12px;\n        margin-bottom: 0;\n    }\n\n    .share {\n        flex: 5;\n\n        .bounding-box { border-radius: 8px; }\n\n        .mobile-roll-up { display: flex; }\n\n        .share-container {\n            display: none;\n\n            .heading,\n            .manage-access-button { display: none; }\n        }\n\n        .button-block {\n            display: flex;\n            justify-content: center;\n            height: 10vh;\n            position: relative;\n\n            .send-button {\n                position: absolute;\n                width: 10vh;\n                height: 10vh;\n                border-radius: 50%;\n\n                .label { display: none; }\n                .material-icons {\n                    margin: 0;\n                    margin-left: 0.5vh;\n                    font-size: 6vh;\n                }\n            }\n\n            .cancel-button {\n                display: none;\n            }\n        }\n    }\n\n    &.share-expanded {\n        .metadata-rollup { display: flex; }\n\n        .control-container { display: none; }\n\n        .section-splitter { flex: 45; }\n\n        .share {\n            flex: 40;\n\n            .mobile-roll-up { display: none; }\n\n            .share-container { display: block; }\n        }\n    }\n}\n","#webRecorder {\n    .smart-cam-loading() {\n        .smart-cam-loading {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            background: rgba(0, 0, 0, 0.5);\n            user-select: none;\n            visibility: hidden;\n            opacity: 0;\n            transition:\n                opacity 0.1s,\n                visibility 0s 0.1s;\n\n            &.visible {\n                visibility: visible;\n                opacity: 1;\n                transition: opacity 0.1s;\n            }\n\n            svg {\n                width: 50%;\n                height: 50%;\n                opacity: 0.8;\n            }\n        }\n    }\n}\n","// Namespace styles within #webRecorder.\n#webRecorder {\n    .stream-action-overlay() {\n        .action-overlay {\n            opacity: 0;\n            position: absolute;\n            top: 1vh;\n            right: 1vh;\n            background: rgba(0, 0, 0, 0.5);\n            border-radius: 1vh;\n            z-index: 1;\n            cursor: pointer;\n            transition: opacity 0.1s;\n            user-select: none;\n\n            display: flex;\n            align-items: center;\n\n            svg {\n                padding: 1vh;\n                width: calc(24px + 3vh);\n                height: calc(24px + 3vh);\n                color: rgba(255, 255, 255, 0.8);\n                transition: color 0.1s;\n\n                &:hover {\n                    color: white;\n                }\n            }\n\n            .background-image {\n                margin: calc(1.5vh - 1px); // Deduct 1px from margin to accomodate border width.\n                width: calc(24px + 2vh);\n                height: calc(24px + 2vh);\n                border: solid 1px rgba(255, 255, 255, 0.8);\n                border-radius: 0.5vh;\n                background-size: cover;\n                background-position: center;\n                background-repeat: no-repeat;\n            }\n        }\n\n        .divider {\n            width: 2px;\n            margin: 1vh;\n            height: calc(24px + 3vh);\n            background: rgba(255, 255, 255, 0.8);\n        }\n\n        &:hover .action-overlay,\n        &:focus-within .action-overlay {\n            opacity: 1;\n        }\n    }\n}\n",'// Namespace styles within #webRecorder.\n#webRecorder {\n    .countdown() {\n        @font-face {\n            font-family: RainyHearts;\n            src: url("../../Fonts/rainyhearts.ttf") format("truetype");\n        }\n        @font-face {\n            font-family: Pixel;\n            src: url("../../Fonts/Pixel.ttf") format("truetype");\n        }\n\n        .countdown {\n            visibility: collapse;\n            opacity: 0;\n            transition: opacity 0.2s;\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            background: rgba(0, 0, 0, 0.5);\n            outline: none;\n            z-index: 3;\n            cursor: pointer;\n\n            &.shown {\n                visibility: visible;\n                opacity: 1;\n            }\n\n            .digit {\n                font-family: "RainyHearts";\n                color: white;\n                text-shadow: 0 0 10px;\n            }\n\n            .footer {\n                position: absolute;\n                bottom: 0;\n                font-size: 3vmin;\n                display: flex;\n                width: 100%;\n                font-family: "Pixel";\n                color: @font-color-secondary-dark-theme;\n                text-shadow: 0 0 2vmin rgba(255, 255, 255, 0.5);\n                text-transform: uppercase;\n\n                > div {\n                    flex: 1;\n\n                    .button {\n                        display: inline-block;\n                        padding: 3vh 4vmin;\n\n                        &:hover {\n                            color: @font-color-dark-theme;\n                            text-shadow: 0 0 2vmin rgba(255, 255, 255, 0.7);\n                        }\n                    }\n\n                    &:first-child {\n                        text-align: right;\n                    }\n\n                }\n            }\n        }\n    }\n}\n'],sourceRoot:""}]),t.a=f},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,".rating-selector {\n  display: flex;\n}\n.rating-selector.active {\n  color: white;\n}\n","",{version:3,sources:["webpack://./../react-components/lib/Input/RatingSelector.less"],names:[],mappings:"AAAA;EACI,aAAA;AACJ;AACI;EACI,YAAA;AACR",sourcesContent:[".rating-selector {\n    display: flex;\n\n    &.active {\n        color: white;\n    }\n}\n"],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'.rating-star::before {\n  content: "star_border";\n}\n.rating-star.filled::before {\n  content: "star";\n}\n',"",{version:3,sources:["webpack://./../react-components/lib/Input/RatingStar.less"],names:[],mappings:"AACI;EACI,sBAAA;AAAR;AAEI;EACI,eAAA;AAAR",sourcesContent:['.rating-star {\n    &::before {\n        content: "star_border";\n    }\n    &.filled::before {\n        content: "star";\n    }\n}\n'],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a),s=n(50),c=n.n(s),u=n(266),l=n(267),d=n(268),p=n(269),h=n(270),f=n(271),m=i()(o.a),g=c()(u.a),b=c()(l.a),y=c()(d.a),A=c()(p.a),v=c()(h.a),x=c()(f.a);m.push([e.i,"/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* \"Dark Theme\" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n/* Panopto.UI.Components.folderPicker */\n.editable-setting .edit-controls {\n  display: inline-block;\n  padding: 2px;\n  bottom: 0px;\n  right: 0px;\n  z-index: 1;\n  background-color: white;\n  padding-left: 0px;\n}\n.editable-setting .edit-controls > div {\n  color: #0099CC;\n  text-decoration: none;\n  display: inline-block;\n  padding: 3px 8px 4px 8px;\n  border: 1px solid #cccccc;\n  background-color: white;\n}\n.editable-setting .edit-controls > div:hover,\n.editable-setting .edit-controls > div:focus {\n  cursor: pointer;\n  text-decoration: underline;\n}\n.editable-setting .edit-controls .save-edit,\n.editable-setting .edit-controls .cancel-edit {\n  display: inline-block;\n}\n.editable-setting .default-block {\n  display: inline-block;\n  margin-top: 6px;\n}\n.editable-setting .default-block .edit-controls {\n  width: auto;\n}\n.editable-setting .default-block .default-label-and-value,\n.editable-setting .default-block .default-value-display,\n.editable-setting .default-block .default-label,\n.editable-setting .default-block .revert-to-default-setting {\n  display: inline-block;\n}\n.editable-setting .default-block .default-value {\n  display: none;\n}\n.editable-setting input[type='text'],\n.editable-setting textarea {\n  width: 100%;\n  min-width: 350px;\n  overflow: auto;\n}\n.editable-setting input[type='text'],\n.editable-setting textarea,\n.editable-setting select {\n  border: transparent solid 1px;\n  background: transparent;\n}\n.editable-setting input[type='text']:focus,\n.editable-setting textarea:focus,\n.editable-setting select:focus {\n  border: black solid 1px;\n  background: white;\n}\n.editable-setting select {\n  margin: 0px;\n}\n.editable-setting textarea.value-edit.prompt:focus {\n  padding: 5px;\n}\n.auto-play-detector {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 1px;\n  height: 1px;\n  z-index: 10000000;\n}\n.screenreader {\n  position: absolute !important;\n  /* Outside the DOM flow */\n  height: 1px;\n  width: 1px;\n  /* Nearly collapsed */\n  overflow: hidden;\n  clip: rect(1px, 1px, 1px, 1px);\n  /* All other browsers */\n}\n.folder-picker-wrapper {\n  height: 28px;\n  /* 16px = icon width */\n  display: block;\n  font-size: 13px;\n}\n.folder-picker-wrapper .input-controls {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.folder-picker-wrapper .input-controls input {\n  border: solid 1px #d6d6d6;\n  height: 28px;\n  line-height: 26px;\n  width: 400px;\n  box-sizing: border-box;\n  padding: 0px 46px 0px 5px;\n  font-family: Segoe UI, Helvetica, sans-serif;\n  font-size: 13px;\n  color: #464646;\n  cursor: default;\n  outline: none;\n}\n.folder-picker-wrapper .input-controls input:-ms-input-placeholder {\n  color: #999999;\n}\n.folder-picker-wrapper .input-controls input::-ms-clear {\n  display: none;\n}\n.folder-picker-wrapper .input-controls .folder-spinner {\n  width: 16px;\n  height: 16px;\n  overflow: hidden;\n  margin-left: -46px;\n  pointer-events: none;\n  padding: 5px;\n}\n.folder-picker-wrapper .input-controls .folder-spinner .branding-color-holders {\n  display: block;\n  position: absolute;\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n  width: 15px;\n  height: 15px;\n}\n.folder-picker-wrapper .input-controls .folder-spinner .loading-indicator {\n  position: relative;\n  background-image: url("+g+");\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 16px;\n  height: 16px;\n  left: -10px;\n  top: -10px;\n  border: 10px solid white;\n}\n.folder-picker-wrapper .input-controls .folder-spinner .loading-indicator.branded-animation {\n  background-image: url("+b+');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n  animation: rotate 2s linear infinite;\n  -webkit-animation: rotate 2s linear infinite;\n}\n@keyframes rotate {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n.folder-picker-wrapper .input-controls .folder-spinner .loading-block {\n  display: none;\n}\n.folder-picker-wrapper .input-controls .dropdown-open-icon {\n  position: relative;\n  overflow: hidden;\n  width: 20px;\n  height: 20px;\n  color: #626262;\n}\n.folder-picker-wrapper .input-controls .dropdown-open-icon::after {\n  content: "arrow_drop_down";\n  position: absolute;\n  top: -2px;\n  left: -2px;\n}\n.folder-picker-wrapper.dropdown-visible input {\n  cursor: text;\n}\n.folder-picker-wrapper.header {\n  background-image: url('+y+");\n  background-repeat: no-repeat;\n  background-position: left center;\n  width: auto;\n  height: auto;\n  background-size: 24px;\n  padding-left: 24px;\n  overflow: hidden;\n}\n.folder-picker-wrapper.header input {\n  font-size: 1.2em;\n  background-color: transparent;\n  border-color: transparent;\n}\n.folder-picker-wrapper.header input:hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.folder-picker-wrapper.header.dropdown-visible input {\n  background-color: inherit;\n  border-color: #d6d6d6;\n  text-decoration: none;\n  cursor: text;\n}\n.folder-picker-wrapper.inline {\n  vertical-align: top;\n  display: inline-block;\n}\n.folder-picker-wrapper.modal-setting-picker {\n  vertical-align: top;\n  display: inline-block;\n  position: relative;\n  width: 100%;\n}\n.folder-picker-wrapper.modal-setting-picker input {\n  width: 100%;\n}\n.folder-picker-wrapper.modal-setting-picker .dropdown-list {\n  min-width: 100%;\n}\n.folder-picker-wrapper.box {\n  border: 1px inset #e0e0e0;\n  background-image: url("+y+");\n  background-repeat: no-repeat;\n  background-position: 5px center;\n  width: auto;\n  height: auto;\n  padding-left: 25px;\n  width: 230px;\n}\n.folder-picker-wrapper.box input {\n  border: none;\n  width: 200px;\n}\n.folder-picker-wrapper .dropdown-list {\n  position: absolute;\n  z-index: 10;\n  margin-top: -1px;\n  box-sizing: border-box;\n  border: 1px solid #cccccc;\n  min-width: 400px;\n  max-height: 500px;\n  overflow: auto;\n  background-color: white;\n  color: #464646;\n}\n.folder-picker-wrapper .dropdown-list .tree-subtitle {\n  border-top: solid 1px #f5f5f5;\n  padding: 5px;\n  font-style: italic;\n  color: #999999;\n}\n.folder-picker-wrapper .dropdown-list .tree-subtitle * {\n  display: inline-block;\n  vertical-align: middle;\n}\n.folder-picker-wrapper .dropdown-list .tree-subtitle i {\n  margin-left: 2px;\n  margin-right: 3px;\n}\n.folder-picker-wrapper .dropdown-list .message {\n  padding: 5px;\n  color: #999999;\n  font-style: italic;\n}\n.folder-picker-wrapper .dropdown-list .search-match {\n  font-weight: bold;\n}\n.folder-picker-wrapper .dropdown-list .folder {\n  width: 100%;\n  box-sizing: border-box;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.folder-picker-wrapper .dropdown-list .folder.selected,\n.folder-picker-wrapper .dropdown-list .folder.selected:hover {\n  background-color: #cccccc;\n  color: #000000;\n}\n.folder-picker-wrapper .dropdown-list .folder.selected .parent-folder-text,\n.folder-picker-wrapper .dropdown-list .folder.selected:hover .parent-folder-text {\n  color: #777777;\n}\n.folder-picker-wrapper .dropdown-list .folder:hover,\n.folder-picker-wrapper .dropdown-list .folder.highlighted {\n  background-color: #f0f0f0;\n}\n.folder-picker-wrapper .dropdown-list .folder:hover .parent-folder-text,\n.folder-picker-wrapper .dropdown-list .folder.highlighted .parent-folder-text {\n  color: #999999;\n}\n.folder-picker-wrapper .dropdown-list .folder:hover.selected,\n.folder-picker-wrapper .dropdown-list .folder.highlighted.selected {\n  background-color: #cccccc;\n}\n.folder-picker-wrapper .dropdown-list .folder.disabled:hover {\n  cursor: default;\n}\n.folder-picker-wrapper .dropdown-list .folder.disabled .folder-title {\n  opacity: 0.7;\n}\n.folder-picker-wrapper .dropdown-list .folder.no-selection .expand-spacer {\n  display: none;\n}\n.folder-picker-wrapper .dropdown-list .folder.no-selection .folder-title {\n  background-image: none;\n  padding-left: 5px;\n}\n.folder-picker-wrapper .dropdown-list .folder.no-selection.no-selection-everything .folder-title {\n  background-image: url("+A+");\n  background-repeat: no-repeat;\n  background-position: 8px;\n  width: auto;\n  height: 28px;\n  padding-left: 30px;\n}\n@-moz-document url-prefix() {\n  .folder-picker-wrapper .dropdown-list .folder .dropdown-list .folder:focus:not(.clicked) {\n    outline: 1px dotted;\n  }\n}\n.folder-picker-wrapper .dropdown-list .folder > div {\n  display: inline-block;\n  vertical-align: middle;\n  box-sizing: border-box;\n  height: 28px;\n  padding: 5px;\n  padding-top: 6px;\n}\n.folder-picker-wrapper .dropdown-list .folder .expand-spacer {\n  margin-left: 5px;\n  width: 20px;\n  height: 28px;\n  padding: 0;\n}\n.folder-picker-wrapper .dropdown-list .folder .expand-spacer.expandable {\n  background-image: url("+v+");\n  background-repeat: no-repeat;\n  background-position: 7px;\n  width: 20px;\n  height: 28px;\n  cursor: default;\n}\n.folder-picker-wrapper .dropdown-list .folder .expand-spacer.expandable.showing-children {\n  background-position: -17px;\n}\n.folder-picker-wrapper .dropdown-list .folder .folder-title {\n  background-image: url("+x+");\n  background-repeat: no-repeat;\n  background-position: 0px -1px;\n  width: auto;\n  height: 28px;\n  padding-left: 27px;\n}\n.folder-picker-wrapper .dropdown-list .folder .folder-title.creator {\n  background-position: 0px -31px;\n}\n.folder-picker-wrapper .dropdown-list .folder .folder-title.myFolder {\n  background-position: 0px -121px;\n}\n.folder-picker-wrapper .dropdown-list .folder .parent-folder-text {\n  padding-left: 0;\n  font-style: italic;\n  color: #aaaaaa;\n}\n.folder-picker-wrapper .dropdown-list .tree-list,\n.folder-picker-wrapper .dropdown-list .search-list {\n  display: inline-block;\n  min-width: 100%;\n}\n.folder-picker-wrapper .dropdown-list.search-view .tree-list,\n.folder-picker-wrapper .dropdown-list.tree-view .search-list {\n  display: none;\n}\n","",{version:3,sources:["webpack://./../webpack/React/Shared/Components/FolderPickerWrapper.less","webpack://./../../WebCore/css/Assets/Assets.less","webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./../../WebCore/css/Assets/Components.less"],names:[],mappings:"AAAA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC4NX;EACI,WAAA;AD1NJ;AC6NA;EACI,aAAA;AD3NJ;AEmKA;EACI,cAAA;EACA,YAAA;AFjKJ;AEoKA;EACI,WAAA;EACA,WAAA;AFlKJ;AEuSA;EACI,yBAAA;AFrSJ;AEwSA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AFtSJ;AEuTA;EACI,iBAAA;AFrTJ;AEuWA;EFrWE,yBAAyB;EEuWvB,qBAAA;EFrWF,YAAY;EEsWV,wBAAA;EFpWF,WAAW;AACb;AEiWI;EAAuB,aAAA;AF9V3B;AACA,uCAAuC;AGs8BvC;EAGQ,qBAAA;EDtmBJ,YAAA;EACA,WAAA;EACA,UAAA;EACA,UAAA;EACA,uBAAA;EComBI,iBAAA;AHl8BR;AG67BA;ED3oBI,cAAA;EACA,qBAAA;EA+CI,qBAAA;EACA,wBAAA;EACA,yBAAA;EACA,uBAAA;AF7VR;AE6SI;;EACI,eAAA;EACA,0BAAA;AF1SR;AGg7BA;;EAOY,qBAAA;AHn7BZ;AG46BA;EAYQ,qBAAA;EACA,eAAA;AHr7BR;AGw6BA;EAgBY,WAAA;AHr7BZ;AGq6BA;;;;EAoBY,qBAAA;AHn7BZ;AG+5BA;EAwBY,aAAA;AHp7BZ;AG45BA;;EA6BQ,WAAA;EACA,gBAAA;EACA,cAAA;AHr7BR;AGs5BA;;;EAmCQ,6BAAA;EACA,uBAAA;AHp7BR;AGs7BQ;;;EACI,uBAAA;EACA,iBAAA;AHl7BZ;AG04BA;EA6CQ,WAAA;AHp7BR;AGu4BA;EAiDQ,YAAA;AHr7BR;AGmhCA;EACI,kBAAA;EACA,MAAA;EACA,OAAA;EACA,UAAA;EACA,WAAA;EACA,iBAAA;AHjhCJ;AGshCA;EACI,6BAAA;EHphCF,yBAAyB;EGqhCvB,WAAA;EAAa,UAAA;EHlhCf,qBAAqB;EGmhCnB,gBAAA;EACA,8BAAA;EHjhCF,uBAAuB;AACzB;AApIA;EAEI,YAAA;EAqIF,sBAAsB;EGqapB,cAAA;EACA,eAAA;AHnaJ;AA1IA;EGgjBQ,kBAAA;EACA,aAAA;EACA,mBAAA;AHnaR;AA/IA;EGqjBY,yBAAA;EACA,YAAA;EAEA,iBAAA;EACA,YAAA;EACA,sBAAA;EAEA,yBAAA;EACA,4CAAA;EACA,eAAA;EACA,cAAA;EACA,eAAA;EACA,aAAA;AHraZ;AGuaY;EACI,cAAA;AHrahB;AGwaY;EACI,aAAA;AHtahB;AAlKA;EEgQI,WAAA;EACA,YAAA;EACA,gBAAA;EC6UQ,kBAAA;EAEA,oBAAA;EACA,YAAA;AHxaZ;AA1KA;EEqQQ,cAAA;EAnBJ,kBAAA;EAzOA,0BAAA;EACA,uBAAA;EACA,kBAAA;EAyOA,WAAA;EACA,YAAA;AFlEJ;AAnLA;EE0QQ,kBAAA;EA7HJ,yDAAA;EACA,4BAAA;EACA,2BAAA;EAKA,WAAA;EACA,YAAA;EAoGA,WAAA;EACA,UAAA;EACA,wBAAA;AF7DJ;AEgFQ;EAjIJ,yDAAA;EACA,4BAAA;EACA,2BAAA;EAKA,WAAA;EACA,YAAA;EAwFA,oCAAA;EACA,4CAAA;AFvCJ;AEmBI;EACI;IACI,uBAAA;EFjBV;EEmBM;IACI,yBAAA;EFjBV;AACF;AEqBI;EACI;IACI,+BAAA;EFnBV;EEqBM;IACI,iCAAA;EFnBV;AACF;AAvNA;EGolBgB,aAAA;AH1XhB;AA1NA;EGylBY,kBAAA;EACA,gBAAA;EACA,WAAA;EACA,YAAA;EACA,cAAA;AH5XZ;AG8XY;EAII,0BAAA;EACA,kBAAA;EACA,SAAA;EACA,UAAA;AH/XhB;AGoYI;EAEQ,YAAA;AHnYZ;AGuYI;EDpeA,yDAAA;EACA,4BAAA;EACA,gCAAA;EAKA,WAAA;EACA,YAAA;EC8dI,qBAAA;EACA,kBAAA;EAGA,gBAAA;AHnYR;AG6XI;EASQ,gBAAA;EACA,6BAAA;EACA,yBAAA;AHnYZ;AGqYY;EACI,0BAAA;EACA,eAAA;AHnYhB;AGwYQ;EAEQ,yBAAA;EACA,qBAAA;EACA,qBAAA;EACA,YAAA;AHvYhB;AG4YI;EACI,mBAAA;EACA,qBAAA;AH1YR;AG6YI;EACI,mBAAA;EACA,qBAAA;EACA,kBAAA;EACA,WAAA;AH3YR;AGuYI;EAOQ,WAAA;AH3YZ;AGoYI;EAWQ,eAAA;AH5YZ;AGgZI;EACI,yBAAA;EDvhBJ,yDAAA;EACA,4BAAA;EACA,+BAAA;EAKA,WAAA;EACA,YAAA;ECihBI,kBAAA;EACA,YAAA;AH1YR;AGsYI;EAOQ,YAAA;EACA,YAAA;AH1YZ;AAjSA;EGirBQ,kBAAA;EACA,WAAA;EAIA,gBAAA;EACA,sBAAA;EACA,yBAAA;EACA,gBAAA;EACA,iBAAA;EACA,cAAA;EACA,uBAAA;EACA,cAAA;AHhZR;AA7SA;EGgsBY,6BAAA;EACA,YAAA;EACA,kBAAA;EACA,cAAA;AHhZZ;AAnTA;EGusBgB,qBAAA;EACA,sBAAA;AHjZhB;AAvTA;EG6sBgB,gBAAA;EACA,iBAAA;AHnZhB;AA3TA;EGmtBY,YAAA;EACA,cAAA;EACA,kBAAA;AHrZZ;AAhUA;EGytBY,iBAAA;AHtZZ;AAnUA;EG+tBY,WAAA;EACA,sBAAA;EACA,mBAAA;EACA,eAAA;AHzZZ;AG2ZY;;EAEI,yBAAA;EACA,cAAA;AHzZhB;AGsZY;;EAMQ,cAAA;AHxZpB;AG4ZY;;EAEI,yBAAA;AH1ZhB;AGwZY;;EAKQ,cAAA;AHzZpB;AG4ZgB;;EACI,yBAAA;AHzZpB;AG8ZgB;EACI,eAAA;AH5ZpB;AG0ZY;EAKQ,YAAA;AH5ZpB;AGiaY;EAEQ,aAAA;AHhapB;AG8ZY;EAMQ,sBAAA;EACA,iBAAA;AHjapB;AGoagB;EDloBZ,yDAAA;EACA,4BAAA;EACA,wBAAA;EAKA,WAAA;EACA,YAAA;EC4nBgB,kBAAA;AH9ZpB;AGmaY;EAAA;IAEQ,mBAAA;EHjalB;AACF;AAxXA;EG6xBgB,qBAAA;EACA,sBAAA;EACA,sBAAA;EACA,YAAA;EACA,YAAA;EACA,gBAAA;AHlahB;AAhYA;EGuyBgB,gBAAA;EACA,WAAA;EACA,YAAA;EACA,UAAA;AHpahB;AGsagB;ED/pBZ,yDAAA;EACA,4BAAA;EACA,wBAAA;EAKA,WAAA;EACA,YAAA;ECypBgB,eAAA;AHhapB;AGkaoB;EAEI,0BAAA;AHjaxB;AAjZA;EE6II,yDAAA;EACA,4BAAA;EACA,6BAAA;EAKA,WAAA;EACA,YAAA;ECsqBY,kBAAA;AHlahB;AGoagB;EAEI,8BAAA;AHnapB;AGsagB;EAEI,+BAAA;AHrapB;AA/ZA;EGy0BgB,eAAA;EACA,kBAAA;EACA,cAAA;AHvahB;AApaA;;EGk1BY,qBAAA;EAEA,eAAA;AH3aZ;AG+aQ;;EAEI,aAAA;AH7aZ",sourcesContent:['@import "../../../../../WebCore/css/Assets/Assets.less";\n@import "../../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../../WebCore/css/Assets/Components.less";\n\n@image-path: "../../../../../WebUI/Styles/Less/Application/Images/";\n\n.folder-picker-wrapper\n{\n    height: 28px;\n    .folder-picker("./Widgets/");\n}','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n','@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n','// This holds larger mix-in components that require specific assets so cannot be part of WebCore\'s Core.less file\n\n.star-rating(@asset-path, @image-src: "star_rating_sprite_list.png", @y-offset: 0) {\n    @star-width: 16px;\n    // Height is one pixel short to fix an issue where the background appears when zooming\n    @star-height: 15px;\n    position: relative;\n    width: 80px;\n    height: @star-height;\n\n    .empty-stars, .filled-stars, .hovering-stars {\n        @padding: 1px;\n        position: absolute;\n        left: -@padding;\n        top: -@padding;\n        overflow: hidden;\n        white-space: nowrap;\n        height: @star-height;\n        padding: @padding; // Padding so that chrome outline has more space\n\n        .star {\n            display: inline-block;\n            width: @star-width;\n            height: @star-height;\n            vertical-align: top;\n        }\n    }\n\n    .empty-stars, .filled-stars {\n        .star {\n            .icon(@asset-path, @image-src, @star-width, @star-height, no-repeat, 0 @y-offset);\n        }\n    }\n\n    .empty-stars {\n        .star {\n            background-position: -@star-width @y-offset;\n        }\n    }\n\n    .filled-stars {\n        .star {\n            background-color: @icon-color;\n        }\n    }\n}\n\n.carousel-wrapper(@height) {\n    @button-width: 35px;\n    position: relative;\n    // So you don\'t highlight while dragging\n    .user-select(none);\n    .viewable-area {\n        display: inline-block;\n        overflow: hidden;\n        height: @height;\n\n        .carousel {\n            position: relative;\n            left: 0px;\n            &.active {\n                cursor: pointer;\n            }\n\n            .selection {\n                @selection-margin: 5px;\n                @icon-length: 35px;\n                @border-sides: 2px;\n                @border-top: 10px;\n                @title-background: @gray-light;\n                @title-height: 18px;\n                @inner-text-margin: 5px;\n                position: relative;\n                float: left;\n                .user-select(none);\n                margin: 0 @selection-margin;\n                cursor: pointer;\n                font-size: @font-size-small;\n\n                &.selected {\n                    // Show all the selected things\n                    .icon-container {\n                        .material-icons,\n                        .material-fallback {\n                            display: block;\n                        }\n                    }\n                }\n\n                // Keep the first img flush on the left side\n                &:first-child {\n                    margin-left: 0px;\n                }\n\n                // No reason to have margin-right on the last child\n                // Could cause the right side to drag a little extra\n                &:last-child {\n                    margin-right: 0px;\n                }\n\n                .selection-title {\n                    height: @title-height;\n                    background-color: @title-background;\n                    color: @font-color;\n                    padding-left: @inner-text-margin;\n                }\n\n                // <img>s render borders outside the container and we want it within\n                // So we have this container for greater control\n                .border-container {\n                    position: relative;\n                    top: -@height + @title-height;\n                    height: @height - @title-height - @border-top - @border-sides;\n                    border: @border-sides solid transparent;\n                    border-top: @border-top solid transparent;\n                }\n\n                // The arrow icon that appears in the top border\n                .icon-container {\n                    width: @icon-length;\n                    margin: auto;\n\n                    .material-icons,\n                    .material-fallback {\n                        display: none;\n                        position: absolute;\n                        font-size: @icon-length;\n                        top: 3px;\n                        color: @title-background;\n                    }\n\n                    .material-fallback {\n                        width: @icon-length;\n                        height: @icon-length;\n                    }\n                }\n\n                .selection-image {\n                    display: block;\n                    height: @height - @title-height;\n                    cursor: pointer;\n                }\n\n                .selection-label {\n                    position: absolute;\n                    top: 10px + @title-height;\n                    left: @inner-text-margin;\n                    font-weight: 500;\n                    color: white;\n                    text-shadow: 0 0 5px black;\n                }\n            }\n        }\n    }\n\n    .right-button,\n    .left-button {\n        @icon-size: 85px;\n\n        position: absolute;\n        z-index: 2;\n        width: @button-width;\n        height: @height;\n        padding: 0px;\n        opacity: 0.7;\n        visibility: hidden;\n        display: inline-block;\n        vertical-align: top;\n        .user-select(none);\n        // So that we have a fixed space for the buttons\n        background-color: @gray-hint;\n        cursor: pointer;\n        &.shown {\n            visibility: visible;\n        }\n        &:hover,\n        &:focus {\n            background-color: @gray-future;\n        }\n\n        &:active .material-icons {\n            color: black;\n        }\n\n        .material-icons,\n        .material-fallback {\n            position: relative;\n            // Center the icon vertically\n            top: (@height - @icon-size) / 2;\n            // Center the icon horizontally\n            left: (@button-width - @icon-size) / 2;\n            font-size: @icon-size;\n        }\n        .material-fallback {\n            width: @icon-size;\n            height: @icon-size;\n        }\n    }\n\n    .right-button {\n        margin-left: -@button-width;\n    }\n}\n\n// Styles a session list with the given asset path for action icons\n.session-list(@asset-path, @row-width: 320px, @thumbnail-width: 90px) {\n    font-family: @font;\n    font-size: @font-size-base;\n    color: @font-color;\n\n    .session-row {\n        .table-row(@row-width);\n        table-layout: fixed;\n        margin-bottom: 10px;\n\n        .thumbnail-cell {\n            width: @thumbnail-width;\n            padding-top: 6px; // this is so the thumbnail appears to align with the top of the text in the title\n\n            .thumbnail-wrapper {\n                width: 100%;\n                position: relative;\n\n                .thumbnail {\n                    width: 100%;\n                    display: block;\n                }\n\n                .session-duration {\n                    position: absolute;\n                    bottom: 5px;\n                    right: 5px;\n                    color: white;\n                    font-size: @font-size-subtitle;\n                }\n            }\n        }\n\n        .session-data {\n            color: @font-color-lightest;\n            @padding: 10px;\n            padding: 0px @padding;\n            width: @row-width - @thumbnail-width - 2 * @padding;\n\n            .session-name {\n                font-size: @font-size-header;\n                display: block;\n            }\n\n            .session-folder {\n                font-size: @font-size-option;\n            }\n\n            .session-date {\n                font-size: @font-size-option;\n            }\n\n            .session-description {\n                font-size: @font-size-option;\n                color: @font-color;\n                margin-top: 5px;\n            }\n\n            .session-misc {\n                margin-top: 5px;\n\n                .session-inline-duration {\n                    display: inline-block;\n                    font-size: @font-size-subtitle;\n                }\n\n                .session-rating {\n                    display: inline-block;\n                    margin-left: 5px;\n                    .star-rating(@asset-path);\n                }\n            }\n\n            .session-actions {\n                color: @font-color-light;\n                font-size: @font-size-option;\n                margin-top: 5px;\n\n                .session-action {\n                    @icon-width: 15px;\n                    @action-padding: 5px;\n                    @icon-padding: 2px;\n                    display: inline-block;\n                    .hoverable(@gray-button-hover, @gray-press, pointer);\n                    padding: @action-padding;\n                    background-size: @icon-width;\n                    padding-left: @icon-width + @action-padding;\n\n                    &.resume {\n                        .icon(@asset-path, "resume_icon.png", auto, auto, no-repeat, @icon-padding);\n                    }\n\n                    &.upload {\n                        .icon(@asset-path, "upload_icon.png", auto, auto, no-repeat, @icon-padding);\n                    }\n\n                    &.delete {\n                        .icon(@asset-path, "delete_icon.png", auto, auto, no-repeat, @icon-padding);\n                    }\n\n                    &.more {\n                        .icon(@asset-path, "more_icon.png", auto, auto, no-repeat, @icon-padding);\n                    }\n                }\n            }\n\n            .extra-actions {\n                background-color: white;\n                border: 1px solid @gray-border;\n                z-index: 1;\n                position: absolute;\n\n                .session-extra-action {\n                    @option-padding: 3px;\n                    font-size: @font-size-option;\n                    color: @font-color;\n                    .hoverable(@gray-button-hover, @gray-press, pointer);\n                    padding: @option-padding 2 * @option-padding;\n                }\n            }\n\n            .session-upload {\n                .upload-indicator;\n            }\n        }\n    }\n}\n\n.volume-preview() {\n    @radius: 5px;\n    @extremes-height: 41px;\n    @scale-height: 171px;\n    @scale-width: 8px;\n    @scale-left: 85px;\n    @warnings-margin: 5px;\n    @legends-height: @scale-height + @warnings-margin * 2;\n    @warning-height: @extremes-height + @warnings-margin;\n\n    .scale-inset() {\n        .box-shadow-inset(black, 0, 0, 1px, 0);\n    }\n\n    .volume-fade() {\n        -webkit-transition: background-color 0.5s ease;\n        transition: background-color 0.5s ease;\n    }\n\n    .horizontal {\n        @bulb-size: 12px;\n\n        .bulb(@margin-top) {\n            width: @bulb-size;\n            height: @bulb-size;\n            .border-radius(@bulb-size);\n            margin-top: @margin-top;\n        }\n\n        .mercury {\n            position: absolute;\n            .bulb(9px);\n            background-color: @neutral-color;\n            line-height: 100%;\n\n            &.area-loud {\n                background-color: @loud-color;\n            }\n\n            &.area-quiet {\n                background-color: @quiet-color;\n            }\n\n            &.area-goldilocks {\n                background-color: @neutral-color;\n            }\n        }\n\n        .scale {\n            @horizontal-height: 4px;\n            @extreme-width: 49px;\n            width: 200px;\n            .quiet {\n                display: inline-block;\n                height: @horizontal-height;\n                width: @extreme-width;\n                background-color: @quiet-color;\n\n                .bulb {\n                    position: absolute;\n                    background-color: @quiet-color;\n                    .bulb(-4px);\n                }\n            }\n\n            .goldilocks {\n                display: inline-block;\n                width: 95px;\n                height: @horizontal-height;\n                background-color: @neutral-color;\n            }\n\n            .loud {\n                display: inline-block;\n                height: @horizontal-height;\n                width: @extreme-width;\n                background-color: @loud-color;\n\n                .bulb {\n                    position: absolute;\n                    margin-left: @extreme-width - @bulb-size;\n                    background-color: @loud-color;\n                    .bulb(-4px);\n                }\n            }\n\n            .volume-space {\n                display: inline-block;\n                width: 3px;\n                height: @horizontal-height;\n            }\n        }\n    }\n\n    .vertical {\n\n        .mercury {\n            position: absolute;\n            margin-left: @scale-left;\n            height: 17px;\n\n            .level {\n                display: inline-block;\n                width: @scale-width;\n                height: 3px;\n                background-color: white;\n                .scale-inset;\n            }\n\n            .mic-name {\n                display: inline-block;\n                font-size: @font-size-option;\n                margin-left: 14px;\n                vertical-align: middle;\n                color: @neutral-text-color;\n            }\n\n            // Helper function for setting mic color\n            .mic-color(@mic-color) {\n                .mic-name {\n                    color: @mic-color;\n                }\n            }\n\n            &.area-loud {\n                .mic-color(@loud-text-color);\n            }\n\n            &.area-quiet {\n                .mic-color(@quiet-text-color);\n            }\n\n            &.area-goldilocks {\n                .mic-color(@neutral-text-color); \n            }\n        }\n\n        .legend {\n            // 6 is an aesthetic choice. It\'s the amount the  \n            // legend extends to the right of the scale\n            width: @scale-left + @scale-width + 6;\n            height: @legends-height;\n\n            .volume-text(@line-height, @volume-color) {\n                width: 100%;\n                height: 100%;\n                line-height: @line-height;\n                font-size: @font-size-option;\n                color: @volume-color;\n                margin-left: 13px;\n            }\n\n            .volume-extreme(@background-color, @text-color) {\n                width: 100%;\n                height: @warning-height;\n                .volume-fade;\n                > div {\n                    .volume-text(@warning-height, @text-color);\n                }\n                &.current-volume {\n                    background-color: @background-color\n                }\n            }\n\n            .volume-loud {\n                .volume-extreme(@loud-warning-color, @loud-text-color);\n            }\n\n            .volume-adjusted {\n                // 1 is the amount of border\n                @adjusted-height: @legends-height - (2 * @warning-height - 1);\n                width: 100%;\n                height: @adjusted-height;\n                div {\n                    .volume-text(@adjusted-height, @neutral-text-color);\n                }\n            }\n\n            .volume-quiet {\n                .volume-extreme(@quiet-warning-color, @quiet-text-color);\n            }\n        }\n\n        .scale {\n            position: absolute;\n            width: @scale-width;\n            height: @scale-height;\n            background-color: @neutral-color;\n            margin-top: @warnings-margin;\n            margin-left: @scale-left;\n            .border-radius(@radius);\n            .scale-inset;\n            \n            .extreme(@background-color) {\n                background-color: @background-color;\n                width: 100%;\n                height: @extremes-height;\n                .scale-inset;\n            }\n\n            .loud {\n                .extreme(@loud-color);\n                border-bottom: 1px solid @loud-border;\n                .border-radius(@radius @radius 0 0);\n            }\n\n            .quiet {\n                .extreme(@quiet-color);\n                margin-top: @scale-height - 2 * @extremes-height;\n                border-top: 1px solid @quiet-warning-color;\n                .border-radius(0 0 @radius @radius);\n            }\n        }\n    }\n}\n\n/* Panopto.UI.Components.folderPicker */\n\n.folder-picker(@asset-path, @z-index: 10, @input-width: 400px) {\n    @input-border-width: 1px;\n    @input-height: 28px;\n    @input-padding: 5px;\n    @dropdown-icon-size: 20px;\n    @spinner-icon-region: 16px + 2 * @input-padding; /* 16px = icon width */\n    @spinner-icon-margin: @dropdown-icon-size + @spinner-icon-region;\n    @dropdown-max-height: 500px;\n    @dropdown-border-width: 1px;\n    @dropdown-padding: 5px;\n\n    display: block;\n    font-size: @font-size-website-base;\n\n    .input-controls {\n        position: relative;\n        display: flex;\n        align-items: center;\n\n        input {\n            border: solid @input-border-width @gray-light;\n            height: @input-height;\n            // Fix vertical alignment of input text in older IE\n            line-height: @input-height - (2 * @input-border-width);\n            width: @input-width;\n            box-sizing: border-box;\n            // Reserve space for the dropdown expand (down arrow) and cancel (X) icons\n            padding: 0px @spinner-icon-margin 0px @input-padding;\n            font-family: @font;\n            font-size: @font-size-website-base;\n            color: @font-color;\n            cursor: default;\n            outline: none;\n            // Use gray for IE placeholder color as in other browsers\n            &:-ms-input-placeholder {\n                color: @gray-dark;\n            }\n            // Suppress extra "x" in IE10+ when text is present\n            &::-ms-clear {\n                display: none;\n            }\n        }\n\n        .folder-spinner {\n            .small-loading-indicator(@spinner-small-white, @spinner-small-white-themable, white);\n            // Shift the icon into the text box padding region, while maintaining ability to vertical-align: middle\n            margin-left: -@spinner-icon-margin;\n            // Don\'t interfere with clicks / cursor in input region\n            pointer-events: none;\n            padding: @input-padding;\n           .loading-block {\n                display: none;\n           }\n        }\n\n        .dropdown-open-icon {\n            position: relative;\n            overflow: hidden;\n            width: @dropdown-icon-size;\n            height: @dropdown-icon-size;\n            color: @icon-color;\n\n            &::after {\n                @material-icon-size: 24px;\n                @icon-offset: (@dropdown-icon-size - @material-icon-size) / 2;\n\n                content: "arrow_drop_down";\n                position: absolute;\n                top: @icon-offset;\n                left: @icon-offset;\n            }\n        }\n    }\n\n    &.dropdown-visible {\n        input {\n            cursor: text;\n        }\n    }\n\n    &.header {\n        .icon("ClientList/", "icon_folder.svg", auto, auto, no-repeat, left center);\n        background-size: @icon-size-without-text;\n        padding-left: @icon-size-without-text;\n\n        // Prevent long folder name from overflowing into header buttons when drop-down is closed\n        overflow: hidden;\n\n        input {\n            font-size: @font-size-header;\n            background-color: transparent;\n            border-color: transparent;\n\n            &:hover {\n                text-decoration: underline;\n                cursor: pointer;\n            }\n        }\n\n        // Revert header style tweaks to input control when drop-down is opened\n        &.dropdown-visible {\n            input {\n                background-color: inherit;\n                border-color: @gray-light;\n                text-decoration: none;\n                cursor: text;\n            }\n        }\n    }\n\n    &.inline {\n        vertical-align: top;\n        display: inline-block;\n    }\n\n    &.modal-setting-picker {\n        vertical-align: top;\n        display: inline-block;\n        position: relative;\n        width: 100%;\n\n        input {\n            width: 100%;\n        }\n\n        .dropdown-list {\n            min-width: 100%;\n        }\n    }\n\n    &.box {\n        border: 1px inset @gray-border;\n        .icon("ClientList/", "icon_folder.svg", auto, auto, no-repeat, @input-padding center);\n        padding-left: 25px;\n        width: 230px;\n\n        input {\n            border: none;\n            width: 200px;\n        }\n    }\n\n    // The dropdown has the same styles in all locations\n    .dropdown-list {\n        position: absolute;\n        z-index: @z-index;\n        // Overlap input control by 1px to collapse borders.\n        // We can\'t just omit one border since either the input or the drop down may be longer in header mode.\n        // Since we\'re positioned relative to an ancestor outside the control, we can\'t use e.g. top: -1\n        margin-top: -1px;\n        box-sizing: border-box;\n        border: @header-dropdown-border;\n        min-width: @input-width;\n        max-height: @dropdown-max-height;\n        overflow: auto;\n        background-color: white;\n        color: @font-color;\n\n        .tree-subtitle {\n            border-top: solid 1px @header-color;\n            padding: @dropdown-padding;\n            font-style: italic;\n            color: @font-color-lightest;\n\n            // Vertically align icon and text\n            * {\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Icon L/R margin\n            i {\n                margin-left: 2px;\n                margin-right: 3px;\n            }\n        }\n\n        .message {\n            padding: @dropdown-padding;\n            color: @font-color-lightest;\n            font-style: italic;\n        }\n\n        .search-match {\n            font-weight: bold;\n        }\n\n        .folder {\n            @expander-width: 20px;\n            @folder-row-height: 28px;\n            width: 100%;\n            box-sizing: border-box;\n            white-space: nowrap;\n            cursor: pointer;\n\n            &.selected,\n            &.selected:hover {\n                background-color: @gray-press;\n                color: @font-color-dark;\n\n                .parent-folder-text {\n                    color: @font-color-light;\n                }\n            }\n\n            &:hover,\n            &.highlighted {\n                background-color: @gray-hover;\n\n                .parent-folder-text {\n                    color: @font-color-lightest;\n                }\n\n                &.selected {\n                    background-color: @gray-press;\n                }\n            }\n\n            &.disabled {\n                &:hover {\n                    cursor: default;\n                }\n                .folder-title {\n                    opacity: 0.7;\n                }\n            }\n\n            // Hide the folder icon and expander region for the "no selection" item (e.g. "All Sessions", etc.)\n            &.no-selection {\n                .expand-spacer {\n                    display: none;\n                }\n                // Default "No selection" item has no icon\n                .folder-title {\n                    background-image: none;\n                    padding-left: @dropdown-padding;\n                }\n                // "Everything" icon\n                &.no-selection-everything .folder-title {\n                    .icon(@asset-path, "icon_all_sessions.png", auto, @folder-row-height, no-repeat, 8px);\n                    padding-left: 30px;\n                }\n            }\n\n            // Work around focus outline bug in Firefox without clobbering other browsers\' standard focus outlines\n            @-moz-document url-prefix() {\n                .dropdown-list .folder:focus:not(.clicked) {\n                    outline: 1px dotted;\n                }\n            }\n\n            > div {\n                display: inline-block;\n                vertical-align: middle;\n                box-sizing: border-box;\n                height: @folder-row-height;\n                padding: @dropdown-padding;\n                padding-top: 6px;\n            }\n\n            .expand-spacer {\n                // Baseline padding on row content (.folder row padding is set programmatically)\n                margin-left: @dropdown-padding;\n                width: @expander-width;\n                height: @folder-row-height;\n                padding: 0;\n\n                &.expandable {\n                    .icon(@asset-path, "icon_folder_arrow.png", @expander-width, @folder-row-height, no-repeat, 7px);\n                    cursor: default;\n\n                    &.showing-children {\n                        // Display the second item in this horizontal sprite (downward pointing arrow)\n                        background-position: -17px;\n                    }\n                }\n            }\n\n            .folder-title {\n                .icon(@asset-path, "icon_folder_tree.png", auto, @folder-row-height, no-repeat, 0px -1px);\n\n                // Reserve space for the folder icon\n                padding-left: 27px;\n\n                &.creator {\n                    // Display the second icon in this horizontal sprite (folder w/red dot)\n                    background-position: 0px -31px;\n                }\n\n                &.myFolder {\n                    // Display the fifth icon in this horizontal sprite (folder w/star)\n                    background-position: 0px -121px;\n                }\n            }\n\n            .parent-folder-text {\n                padding-left: 0;\n                font-style: italic;\n                color: @font-light-gray;\n            }\n        }\n\n        .tree-list,\n        .search-list {\n            // Enable all rows to expand to match the longest title so that highlights render correctly\n            display: inline-block;\n            // Ensure that highlights always fill the drop-down\'s bounding box\n            min-width: 100%;\n        }\n\n        // Hide the list if it\'s not in the current view\n        &.search-view .tree-list,\n        &.tree-view .search-list {\n            display: none;\n        }\n    }\n}\n\n.upload-indicator () {\n    .indicator-box {\n        display: inline-block;\n        width: 120px;\n        height: 13px;\n        background-color: @gray-press;\n        margin-right: 7px;\n    }\n\n    .progress {\n        width: 0%;\n        height: 100%;\n        background-color: @font-color-link;\n    }\n\n    .pause-link, .done-text {\n        display: inline-block;\n        color: @font-color-link;\n        font-size: @font-size-option;\n        padding: 3px;\n        padding-top: 1px;\n        vertical-align: top;\n    }\n\n    .pause-link {\n        .link;\n    }\n}\n\n.confirm-dialog (@z-index, @width: 400px) {\n    // Vertically center a dialog: http://stackoverflow.com/questions/396145/whats-the-best-way-of-centering-a-div-vertically-with-css\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    display: table;\n    z-index: @z-index;\n    background-color: transparent;\n\n    .confirm-wrapper {\n        display: table-cell;\n        vertical-align: middle;\n\n        .confirm-dialog {\n            @dialog-padding: 10px;\n            width: @width;\n            margin: auto;\n            background-color: white;\n            border: 2px solid @gray-border;\n\n            .confirm-content {\n                padding: @dialog-padding;\n            }\n\n            .confirm-buttons {\n                padding: 0px @dialog-padding @dialog-padding 0px;\n                text-align: right;\n\n                .confirm-button {\n                    margin-left: @dialog-padding;\n                    .standard-button;\n                }\n            }\n        }\n    }\n}\n\n.filtering-popup () {\n    .filtering-popup {\n        position: absolute;\n        background: white;\n        padding: 20px;\n        .box-shadow(@gray-dark, 1px, 1px, 4px, 0px);\n\n        input {\n            float: left;\n            // Vertical align doesn\'t work because of float\n            // this is kind of a hack, using margin-top instead\n            margin-top: 1px;\n        }\n\n        .filter-name {\n            margin-left: 20px;\n            cursor: pointer;\n        }\n\n        .filter-row {\n            display: inline-block;\n            height: 25px;\n            min-width: 190px;\n        }\n\n        .buttons-container {\n            width: 175px;\n            margin: auto;\n            margin-top: 20px;\n            text-align: center;\n\n            .submit, .cancel {\n                .standard-button;\n            }\n\n            // By floating these we can be sure no matter how long the text is\n            // that they will be positioned on either end of the .button-container\n            .submit {\n                float: left;\n            }\n\n            .cancel {\n                float: right;\n            }\n\n            .clear-floats {\n                clear: both;\n            }\n        }\n    }\n}\n\n.volume-slider () {\n    @height: 16px;\n    @bar-height: 10px;\n    height: @height;\n    width: 150px;\n    position: relative;\n    vertical-align: middle;\n    @border: @height / 2 solid transparent;\n    border-left: @border;\n    border-right: @border;\n\n    .volume-background {\n        background-color: @gray-hover;\n        .border-radius(5px);\n        height: @bar-height;\n    }\n\n    .ui-slider-handle {\n        @border-width: 4px;\n        @side: @height - 2 * @border-width;\n        border: @border-width solid @gray-dark;\n        .border-radius(@height / 2);\n        height: @side;\n        width: @side;\n        background-color: white;\n        display: block;\n        position: absolute;\n        margin-left: 0px - @side;\n        outline: none;\n        top: @border-width;\n    }\n}\n\n.editable-setting {\n\n    .edit-controls {\n        display: inline-block;\n        .edit-control();\n        padding-left: 0px; // Override \n        .save-edit, .cancel-edit {\n            display: inline-block;\n        }\n    }\n\n    .default-block {\n        display: inline-block;\n        margin-top: 6px;\n\n        .edit-controls {\n            width: auto; // Overriding the default\n        }\n\n        .default-label-and-value, .default-value-display, .default-label, .revert-to-default-setting {\n            display: inline-block;\n        }\n\n        .default-value {\n            display: none;  // Used for storing the actual value, not the display value\n        }\n    }\n\n    input[type=\'text\'], textarea {\n        width: 100%;\n        min-width: 350px;\n        overflow: auto;\n    }\n\n    input[type=\'text\'], textarea, select {\n        border: transparent solid 1px;\n        background: transparent;\n\n        &:focus {\n            border: black solid 1px;\n            background: white;\n        }\n    }\n\n    select {\n        margin: 0px;\n    }\n\n    textarea.value-edit.prompt:focus {\n        padding: 5px;\n    }\n}\n\n.access-list (@margin, @width) {\n    @access-padding: 20px;\n    a.add-folder-button.modal-commit-button-block {\n        margin-left: 0px;\n    }\n    .tag-search-container {\n        width: @width - 11px; // 11 is about the padding on the tag-search\n        margin-top: 10px;\n        margin-left: @access-padding;\n    }\n    .access-table-wrapper {\n        max-height: 200px;\n        overflow-y: auto;\n        border-bottom: 1px solid @gray-border;\n        margin-left: @modal-margin;\n        width: @width;\n        .compact-table {\n            padding-right: 0px;\n        }\n        tr {\n            td:first-child {\n                width: 345px;\n            }\n            a {\n                margin: 0;\n            }\n        }\n        .error-list {\n            list-style: none;\n        }\n    }\n    .submit-container {\n        .cancel {\n            margin-left: @button-spacing;\n        }\n        margin-top: 10px;\n        margin-left: @access-padding;\n    }\n    .message-list {\n        margin-left: @access-padding;\n    }\n    select {\n        margin-left: @access-padding;\n        .role-select(200px, 10px);\n    }\n    .access-title {\n        margin-left: @access-padding;\n        color: @font-color-lightest;\n    }\n    .access-icon {\n       .access-icons(15px);\n       display: inline-block;\n       margin: 0 10px 0 5px;\n    }\n}\n\n.date-filter-component(@asset-path, @spacing) {\n    font-size: @font-size-website-base;\n    .date-row,\n    .label {\n        display: inline-block;\n        width: auto;\n        margin-right: 10px;\n        margin-left: 0px;\n    }\n    .second-row {\n        margin-left: @spacing;\n    }\n}\n\n.editable-label() {\n    .box-sizing(border-box);\n    border: 1px solid transparent;\n    background-color: transparent;\n    resize: none;\n    color: inherit;\n    overflow-y: hidden; // Prevent scroll bar toggle from interfering with resize behavior\n\n    &:hover {\n        border: @input-border-hover;\n    }\n\n    &:focus {\n        border: @input-border-edit;\n        background-color: white;\n    }\n}\n\n// Style a <video> element to be visible in the viewport, but as unobtrusive as possible (1px X 1px in top corner).\n// Used in the Viewer and Embed for detecting ability to autoplay using a dummy <video> element.\n.auto-play-detector {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 1px;\n    height: 1px;\n    z-index: 10000000;\n}\n\n// A hack if you need a text area that only screen readers can see\n// Taken from https://stackoverflow.com/a/26032207\n.screenreader {\n    position: absolute !important; /* Outside the DOM flow */\n    height: 1px; width: 1px; /* Nearly collapsed */\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px); /* All other browsers */\n}'],sourceRoot:""}]),t.a=m},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.react-modal {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.6);\n  font-size: 16px;\n  color: #ffffff;\n  z-index: 2;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 200ms, visibility 0s 200ms;\n}\n.react-modal.visible {\n  visibility: visible;\n  opacity: 1;\n  transition: opacity 200ms, visibility 0s;\n}\n.react-modal .close-button {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  font-size: 36px;\n  color: rgba(255, 255, 255, 0.8);\n  transition: color 0.1s;\n  z-index: 1;\n  cursor: pointer;\n}\n.react-modal .close-button:hover {\n  color: white;\n}\n',"",{version:3,sources:["webpack://./../webpack/React/Shared/Components/Modal.less","webpack://./../../WebCore/css/Assets/Assets.less"],names:[],mappings:"AAAA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC4NX;EACI,WAAA;AD1NJ;AC6NA;EACI,aAAA;AD3NJ;AAtBA;EAII,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,OAAA;EACA,8BAAA;EACA,eAAA;EACA,cAAA;EACA,UAAA;EAEA,kBAAA;EACA,UAAA;EAEA,8CAAA;AAmBJ;AAjBI;EACI,mBAAA;EACA,UAAA;EAEA,wCAAA;AAkBR;AAzCA;EA2BQ,kBAAA;EACA,QAAA;EACA,UAAA;EACA,eAAA;EACA,+BAAA;EACA,sBAAA;EACA,UAAA;EACA,eAAA;AAiBR;AAfQ;EACI,YAAA;AAiBZ",sourcesContent:['@import "../../../../../WebCore/css/Assets/Assets.less";\n\n.react-modal {\n    @fade-duration: 200ms;\n    @modal-background-color: rgba(0, 0, 0, 0.6);\n\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background: @modal-background-color;\n    font-size: @font-size-base;\n    color: @font-color-dark-theme;\n    z-index: 2;\n\n    visibility: hidden;\n    opacity: 0;\n    // Fade out over a short period and then hide via `visibility: hidden`.\n    transition: opacity @fade-duration, visibility 0s @fade-duration;\n\n    &.visible {\n        visibility: visible;\n        opacity: 1;\n        // Unhide (transparent) via `visibility: visible` and then fade in over a short period.\n        transition: opacity @fade-duration, visibility 0s;\n    }\n\n    .close-button {\n        position: absolute;\n        top: 8px;\n        right: 8px;\n        font-size: 36px;\n        color: @icon-color-dark-theme;\n        transition: color 0.1s;\n        z-index: 1;\n        cursor: pointer;\n\n        &:hover {\n            color: @icon-color-active-dark-theme;\n        }\n    }\n}\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n'],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.tags-container {\n  min-height: 26px;\n  max-width: 500px;\n  font-size: 14px;\n  color: #464646;\n  margin-left: -3px;\n  position: relative;\n  outline: none;\n}\n.tags-container a,\n.tags-container a:hover {\n  text-decoration: none;\n}\n.tags-container .tags-input {\n  display: inline-block;\n}\n.tags-container .tag-list {\n  display: inline-flex;\n  flex-wrap: wrap;\n}\n.tags-container .tag-create-new {\n  display: inline-flex;\n  border-radius: 13px;\n  border: 1px solid #cccccc;\n  padding: 2px 9px 2px 6px;\n  margin: 2px;\n  align-items: center;\n  cursor: pointer;\n}\n.tags-container .tag-create-new.disabled {\n  opacity: 0.5;\n}\n.tags-container .tag-create-new .tag-add-icon {\n  font-size: 12px;\n  color: #626262;\n  margin-top: 1px;\n}\n.tags-container .tags-container-undo {\n  position: absolute;\n  top: -50px;\n  z-index: 1;\n  height: 48px;\n  background-color: #464646;\n  color: white;\n  border-radius: 3px;\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.2);\n}\n.tags-container .tags-container-undo .tag-undo-text {\n  display: inline-flex;\n  height: 48px;\n  align-items: center;\n  padding: 0 16px;\n}\n.tags-container .tags-container-undo .tag-undo-text .deleted-tag {\n  font-weight: 500;\n}\n.tags-container .tags-container-undo .tag-undo-text .undo-tag-button {\n  padding: 0 16px;\n  font-weight: 600;\n  cursor: pointer;\n  color: #0099CC;\n}\n.tags-container .tags-container-undo .tag-undo-text .tag-undo-close {\n  font-size: 14px;\n  padding-top: 2px;\n  cursor: pointer;\n}\n.tags-container.tags-dark-mode .tag-create-new {\n  color: #f5f5f5;\n  border-color: #999999;\n  padding-top: 3px;\n  padding-bottom: 4px;\n}\n.tags-container.tags-dark-mode .tag-create-new .tag-add-icon {\n  color: #f5f5f5;\n}\n',"",{version:3,sources:["webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./../webpack/React/Tags/TagsContainer.less","webpack://./../../WebCore/css/Assets/Assets.less"],names:[],mappings:"AA2LA;EACI,cAAA;EACA,YAAA;AC1LJ;AD6LA;EACI,WAAA;EACA,WAAA;AC3LJ;ADgUA;EACI,yBAAA;AC9TJ;ADiUA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AC/TJ;ADgVA;EACI,iBAAA;AC9UJ;ADgYA;EC9XE,yBAAyB;EDgYvB,qBAAA;EC9XF,YAAY;ED+XV,wBAAA;EC7XF,WAAW;AACb;AD0XI;EAAuB,aAAA;ACvX3B;AACA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC+LX;EACI,WAAA;AD7LJ;ACgMA;EACI,aAAA;AD9LJ;AAjDA;EACI,gBAAA;EACA,gBAAA;EACA,eAAA;EACA,cAAA;EACA,iBAAA;EACA,kBAAA;EACA,aAAA;AAmDJ;AA1DA;;EAUQ,qBAAA;AAoDR;AA9DA;EAcQ,qBAAA;AAmDR;AAjEA;EAkBQ,oBAAA;EACA,eAAA;AAkDR;AArEA;EAuBQ,oBAAA;EACA,mBAAA;EACA,yBAAA;EACA,wBAAA;EACA,WAAA;EACA,mBAAA;EACA,eAAA;AAiDR;AA/CQ;EACI,YAAA;AAiDZ;AAjFA;EAoCY,eAAA;EACA,cAAA;EACA,eAAA;AAgDZ;AAtFA;EA2CQ,kBAAA;EACA,UAAA;EACA,UAAA;EACA,YAAA;EACA,yBAAA;EACA,YAAA;EACA,kBAAA;EACA,iHAAA;AA8CR;AAhGA;EAqDY,oBAAA;EACA,YAAA;EACA,mBAAA;EACA,eAAA;AA8CZ;AAtGA;EA2DgB,gBAAA;AA8ChB;AAzGA;EA+DgB,eAAA;EACA,gBAAA;EACA,eAAA;EACA,cAAA;AA6ChB;AA/GA;EAsEgB,eAAA;EACA,gBAAA;EACA,eAAA;AA4ChB;AAvCI;EAEQ,cAAA;EACA,qBAAA;EACA,gBAAA;EACA,mBAAA;AAwCZ;AA7CI;EAQY,cAAA;AAwChB",sourcesContent:['@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n','@import "../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../WebCore/css/Assets/Assets.less";\n\n@tag-left-margin: 3px;\n.tags-container {\n    min-height: 26px;\n    max-width: 500px;\n    font-size: 14px;\n    color: @font-color;\n    margin-left: -@tag-left-margin;\n    position: relative;\n    outline: none;\n\n    a, a:hover {\n        text-decoration: none;\n    }\n    \n    .tags-input {\n        display: inline-block;\n    }\n    \n    .tag-list {\n        display: inline-flex;\n        flex-wrap: wrap;\n    }\n\n    .tag-create-new {\n        display: inline-flex;\n        border-radius: 13px;\n        border: @header-dropdown-border;\n        padding: 2px 9px 2px 6px;\n        margin: 2px;\n        align-items: center;\n        cursor: pointer;\n\n        &.disabled {\n            opacity: 0.5;\n        }\n\n        .tag-add-icon {\n            font-size: 12px;\n            color: @icon-color;\n            margin-top: 1px;\n        }\n    }\n\n    .tags-container-undo {\n        position: absolute;\n        top: -50px;\n        z-index: 1;\n        height: 48px;\n        background-color: @font-color;\n        color: white;\n        border-radius: 3px;\n        box-shadow: @material-box-shadow;\n\n        .tag-undo-text {\n            display: inline-flex;\n            height: 48px;\n            align-items: center;\n            padding: 0 16px;\n\n            .deleted-tag {\n                font-weight: 500;\n            }\n\n            .undo-tag-button {\n                padding: 0 16px;\n                font-weight: 600;\n                cursor: pointer;\n                color: @font-color-link;\n            }\n\n            .tag-undo-close {\n                font-size: 14px;\n                padding-top: 2px;\n                cursor: pointer;\n            }\n        }\n    }\n\n    &.tags-dark-mode {\n        .tag-create-new {\n            color: @gray-hint;\n            border-color:@font-color-lightest;\n            padding-top: 3px;\n            padding-bottom: 4px;\n\n            .tag-add-icon {\n                color: @gray-hint;\n            }\n        }\n    }\n}\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n'],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.control-bar {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n}\n.tags-container {\n  min-height: 26px;\n  max-width: 500px;\n  font-size: 14px;\n  color: #464646;\n  margin-left: -3px;\n  position: relative;\n  outline: none;\n}\n.tags-container a,\n.tags-container a:hover {\n  text-decoration: none;\n}\n.tags-container .tags-input {\n  display: inline-block;\n}\n.tags-container .tag-list {\n  display: inline-flex;\n  flex-wrap: wrap;\n}\n.tags-container .tag-create-new {\n  display: inline-flex;\n  border-radius: 13px;\n  border: 1px solid #cccccc;\n  padding: 2px 9px 2px 6px;\n  margin: 2px;\n  align-items: center;\n  cursor: pointer;\n}\n.tags-container .tag-create-new.disabled {\n  opacity: 0.5;\n}\n.tags-container .tag-create-new .tag-add-icon {\n  font-size: 12px;\n  color: #626262;\n  margin-top: 1px;\n}\n.tags-container .tags-container-undo {\n  position: absolute;\n  top: -50px;\n  z-index: 1;\n  height: 48px;\n  background-color: #464646;\n  color: white;\n  border-radius: 3px;\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.2);\n}\n.tags-container .tags-container-undo .tag-undo-text {\n  display: inline-flex;\n  height: 48px;\n  align-items: center;\n  padding: 0 16px;\n}\n.tags-container .tags-container-undo .tag-undo-text .deleted-tag {\n  font-weight: 500;\n}\n.tags-container .tags-container-undo .tag-undo-text .undo-tag-button {\n  padding: 0 16px;\n  font-weight: 600;\n  cursor: pointer;\n  color: #0099CC;\n}\n.tags-container .tags-container-undo .tag-undo-text .tag-undo-close {\n  font-size: 14px;\n  padding-top: 2px;\n  cursor: pointer;\n}\n.tags-container.tags-dark-mode .tag-create-new {\n  color: #f5f5f5;\n  border-color: #999999;\n  padding-top: 3px;\n  padding-bottom: 4px;\n}\n.tags-container.tags-dark-mode .tag-create-new .tag-add-icon {\n  color: #f5f5f5;\n}\n.tag-hover-container {\n  position: relative;\n}\n.tag-hover-container .tag {\n  border-radius: 13px;\n  background-color: #f5f5f5;\n  height: 20px;\n  padding: 2px 9px;\n  border: 1px solid #f5f5f5;\n  margin: 2px 3px;\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  cursor: default;\n}\n.tag-hover-container .tag .tag-text {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.tag-hover-container .tag .tag-text .tag-hashtag {\n  font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n}\n.tag-hover-container .tag .delete {\n  font-size: 14px;\n  color: #999999;\n  margin: 2px -2px 0 0;\n  cursor: pointer;\n}\n.tag-hover-container .tag.tag-dark-mode {\n  background-color: rgba(255, 255, 255, 0.1);\n  border: none;\n  color: white;\n  padding: 3px 9px;\n}\n.tag-hover-container .tag:hover {\n  background-color: #e8e8e8;\n}\n.tag-hover-container .tag:hover.tag-dark-mode {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n',"",{version:3,sources:["webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./../webpack/React/Tags/Tag.less","webpack://./../../WebCore/css/Assets/Assets.less","webpack://./lib/Shared.less","webpack://./../webpack/React/Tags/TagsContainer.less"],names:[],mappings:"AAmLK;EACF,cAAA;EAAoB,YAAA;ACjLvB;ADiLyC;EAAa,WAAA;EACtD,WAAA;AC9KA;AD4SwB;EAEtB,yBAAA;AC3SF;AD8Se;EAEP,mBAAA;EACO,gBAAA;EACG,uBAAA;AC7SlB;ADuUS;EAAiB,iBAAA;ACpU1B;ADiXC;EC/WC,yBAAyB;EDiX1B,qBAAA;EC/WC,YAAY;ED+W4B,wBAAA;EC7WxC,WAAW;AACb;AD0WyB;EACtB,aAAA;ACxWH;AACA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;ACoLX;EAAW,WAAA;ADjLX;ACiL2B;EAClB,aAAA;AD/KT;AE1CA;EACI,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,WAAA;EACA,gBAAA;EACA,iBAAA;AF4CJ;AGzDA;EACI,gBAAA;EACA,gBAAA;EACA,eAAA;EACA,cAAA;EACA,iBAAA;EACA,kBAAA;EACA,aAAA;AH2DJ;AGlEA;;EAUQ,qBAAA;AH4DR;AGtEA;EAcQ,qBAAA;AH2DR;AGzEA;EAkBQ,oBAAA;EACA,eAAA;AH0DR;AG7EA;EAuBQ,oBAAA;EACA,mBAAA;EACA,yBAAA;EACA,wBAAA;EACA,WAAA;EACA,mBAAA;EACA,eAAA;AHyDR;AGvDQ;EACI,YAAA;AHyDZ;AGzFA;EAoCY,eAAA;EACA,cAAA;EACA,eAAA;AHwDZ;AG9FA;EA2CQ,kBAAA;EACA,UAAA;EACA,UAAA;EACA,YAAA;EACA,yBAAA;EACA,YAAA;EACA,kBAAA;EACA,iHAAA;AHsDR;AGxGA;EAqDY,oBAAA;EACA,YAAA;EACA,mBAAA;EACA,eAAA;AHsDZ;AG9GA;EA2DgB,gBAAA;AHsDhB;AGjHA;EA+DgB,eAAA;EACA,gBAAA;EACA,eAAA;EACA,cAAA;AHqDhB;AGvHA;EAsEgB,eAAA;EACA,gBAAA;EACA,eAAA;AHoDhB;AG/CI;EAEQ,cAAA;EACA,qBAAA;EACA,gBAAA;EACA,mBAAA;AHgDZ;AGrDI;EAQY,cAAA;AHgDhB;AApIA;EACI,kBAAA;AAsIJ;AAvIA;EAIQ,mBAAA;EACA,yBAAA;EACA,YAAA;EACA,gBAAA;EACA,yBAAA;EACA,eAAA;EACA,kBAAA;EACA,oBAAA;EACA,mBAAA;EACA,eAAA;AAsIR;AAnJA;EAgBY,mBAAA;EACA,uBAAA;EACA,gBAAA;AAsIZ;AAxJA;EAqBgB,+EAAA;AAsIhB;AA3JA;EA0BY,eAAA;EACA,cAAA;EACA,oBAAA;EACA,eAAA;AAoIZ;AAjIQ;EACI,0CAAA;EACA,YAAA;EACA,YAAA;EACA,gBAAA;AAmIZ;AAvKA;EAyCQ,yBAAA;AAiIR;AA/HQ;EACI,0CAAA;AAiIZ",sourcesContent:['@small-loading-indicator-length: 16px;\r\n\r\n.ie-only (@rules) {\r\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\r\n        @rules();\r\n    }\r\n}\r\n\r\n.edge-only (@rules) {\r\n    @supports (-ms-ime-align: auto) {\r\n        @rules();\r\n    }\r\n}\r\n\r\n.border-radius (@radius) {\r\n    -webkit-border-radius: @radius;\r\n    -moz-border-radius: @radius;\r\n    border-radius: @radius;\r\n}\r\n\r\n.box-sizing (@sizing) {\r\n    box-sizing: @sizing;\r\n    -moz-box-sizing: @sizing;\r\n}\r\n\r\n// Prevents anti aliasing\r\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\r\n.prevent-anti-aliasing () {\r\n    // The browser will ignore the lines it can\'t understand\r\n    // and so it works to have the same property listed multiple times\r\n    image-rendering: optimizeSpeed;\r\n    image-rendering: -moz-crisp-edges;\r\n    image-rendering: -o-crisp-edges;\r\n    image-rendering: -webkit-optimize-contrast;\r\n    image-rendering: pixelated;\r\n    image-rendering: optimize-contrast;\r\n    -ms-interpolation-mode: nearest-neighbor;\r\n}\r\n\r\n.user-select(@select) {\r\n    -webkit-touch-callout: @select;\r\n    -webkit-user-select: @select;\r\n    -khtml-user-select: @select;\r\n    -moz-user-select: @select;\r\n    -ms-user-select: @select;\r\n    user-select: @select;\r\n}\r\n\r\n.background-image-gradient (@deg, @color-bottom, @color-top) {\r\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\r\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\r\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\r\n}\r\n\r\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\r\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\r\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\r\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\r\n}\r\n\r\n// Block-level elements with known dimensions can be centered within positioned parents.\r\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\r\n    margin-left: -(@width / 2) + @h-offset;\r\n    margin-top: -(@height / 2) + @v-offset;\r\n    width: @width;\r\n    height: @height;\r\n}\r\n\r\n.clickable () {\r\n    &:hover {\r\n        cursor: pointer;\r\n    }\r\n}\r\n\r\n.access-icons(@length) {\r\n    .access-item-icon(@image) {\r\n        .icon("Share/", @image, @length, @length);\r\n    }\r\n\r\n    &.invite {\r\n        .access-item-icon("icon_email.png");\r\n    }\r\n\r\n    &.group {\r\n        .access-item-icon("icon_group.png");\r\n    }\r\n\r\n    &.user {\r\n        .access-item-icon("icon_user.png");\r\n    }\r\n}\r\n\r\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\r\n    &:hover {\r\n        background-color: @background-highlight;\r\n        cursor: @cursor;\r\n    }\r\n    &:focus {\r\n        background-color: @background-highlight;\r\n    }\r\n    &:active {\r\n        background-color: @background-pressed;\r\n    }\r\n}\r\n\r\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\r\n    .transition(background-color .15s);\r\n    &:hover {\r\n        background-color: @background-highlight;\r\n        cursor: @cursor;\r\n        .transition(background-color .15s);\r\n    }\r\n    &:active {\r\n        background-color: @background-pressed;\r\n        .transition(background-color .15s);\r\n    }\r\n}\r\n\r\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\r\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\r\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\r\n    &:hover .@{child-class-string} {\r\n        background-color: @background-parent-highlight;\r\n        .transition(background-color .15s);\r\n    }\r\n    .@{child-class-string} {\r\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\r\n    }\r\n}\r\n\r\n.hoverable-opacity() {\r\n    opacity: @button-opacity;\r\n\r\n    &:hover, &:focus {\r\n        opacity: @button-hover-opacity;\r\n    }\r\n\r\n    &:active {\r\n        opacity: @button-active-opacity;\r\n    }\r\n}\r\n\r\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\r\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\r\n    background-repeat: @repeat;\r\n    background-position: @align;\r\n}\r\n\r\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\r\n    .background-image(@root, @image, @repeat, @align);\r\n    width: @width;\r\n    height: @height;\r\n}\r\n\r\n.transition(@params) {\r\n    -webkit-transition: @params;\r\n    -moz-transition: @params;\r\n    -ms-transition: @params;\r\n    -o-transition: @params;\r\n    transition: @params;\r\n}\r\n\r\n.transform(@params) {\r\n    transform: @params;\r\n    -ms-transform: @params;\r\n    -webkit-transform: @params;\r\n}\r\n\r\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\r\n    .icon(@root, @image, @width, @height, @repeat, @align);\r\n\r\n    &:hover {\r\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\r\n        cursor: default;\r\n    }\r\n    &:focus {\r\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\r\n    }\r\n    &:active {\r\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\r\n    }\r\n}\r\n\r\n.break {\r\n    display: block;\r\n    height:  15px;\r\n}\r\n\r\n.clear {\r\n    clear: both;\r\n    height: 0px;\r\n}\r\n\r\n.box-shadow(none) {\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\n\r\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\r\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\r\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\r\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\r\n}\r\n\r\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\r\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\r\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\r\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\r\n}\r\n\r\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\r\n    border-top:1px solid @top-color;\r\n    border-right: 1px solid @right-color;\r\n    border-bottom:1px solid @bottom-color;\r\n    border-left:1px solid @left-color;\r\n}\r\n\r\n.rotating-animation() {\r\n    // IE and FF support the w3 standard keyframes\r\n    @keyframes rotate {\r\n        0% {\r\n            transform: rotate(0deg);\r\n        }\r\n        100% {\r\n            transform: rotate(360deg);\r\n        }\r\n    }\r\n\r\n    // Chrome and Safari need special webkit\r\n    @-webkit-keyframes rotate {\r\n        0% {\r\n            -webkit-transform: rotate(0deg);\r\n        }\r\n        100% {\r\n            -webkit-transform: rotate(360deg);\r\n        }\r\n    }\r\n\r\n    animation: rotate 2s linear infinite;\r\n    -webkit-animation: rotate 2s linear infinite;\r\n}\r\n\r\n.color-holder(@diameter) {\r\n    position: absolute;\r\n    .border-radius(50%); // Circle\r\n    width: @diameter;\r\n    height: @diameter;\r\n}\r\n\r\n.indicator-border(@border-size, @color){\r\n    left: -@border-size;\r\n    top: -@border-size;\r\n    border: @border-size solid @color;\r\n}\r\n\r\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\r\n    @small-length: @small-loading-indicator-length;\r\n    width: @small-length;\r\n    height: @small-length;\r\n    overflow: hidden;\r\n\r\n    .branding-color-holders {\r\n        display: block;\r\n       .color-holder(15px);\r\n    }\r\n\r\n    .loading-indicator {\r\n        position: relative;\r\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\r\n        .indicator-border(10px, @border-color);\r\n\r\n        &.branded-animation {\r\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\r\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\r\n            .rotating-animation();\r\n        }\r\n    }\r\n}\r\n\r\n.opacity(@opacity) {\r\n    opacity: @opacity;\r\n    @percent: @opacity * 100;\r\n    // IE8 and below\r\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\r\n    filter: alpha(opacity=@percent);\r\n}\r\n\r\n.horizontal-rule(@color) {\r\n    display: block;\r\n    border-bottom: 1px solid @color;\r\n}\r\n\r\n.popup(@z-index) {\r\n    z-index: @z-index;\r\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\r\n    border: @header-dropdown-border;\r\n    background-color: @header-dropdown-background-color;\r\n    position: absolute;\r\n    text-align: left;\r\n\r\n    .popup-title {\r\n        color: @font-color;\r\n        font-weight: bold;\r\n    }\r\n}\r\n\r\n.header-dropdown() {\r\n    .popup(100003);\r\n\r\n    > a, > div {\r\n        &:hover {\r\n            background-color: @gray-hover;\r\n            cursor: default;\r\n        }\r\n        &:active {\r\n            background-color: @gray-press;\r\n        }\r\n        text-decoration: none;\r\n        display: block;\r\n    }\r\n}\r\n\r\n.error {\r\n    color: @font-color-error !important;\r\n}\r\n\r\n.ellipsis {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n// @lines is honored on WebKit.\r\n// @max-height provides a fallback on other browsers (simple vertical truncation).\r\n.multiline-ellipsis (@lines, @max-height) {\r\n    // On WebKit, show ellipsis after two lines if text is longer.\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: @lines;\r\n    -webkit-box-orient: vertical;\r\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\r\n    max-height: @max-height;\r\n    overflow: hidden;\r\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\r\n    white-space: normal;\r\n}\r\n\r\n.attention {\r\n    font-weight: bold;\r\n}\r\n\r\n\r\n// Styles a div as a table row, with direct div children as cells\r\n.table-row (@width: 100%, @align: top) {\r\n    display: table;\r\n    width: @width;\r\n\r\n    > div, > a, > img, > i {\r\n        display: table-cell;\r\n        vertical-align: @align;\r\n    }\r\n}\r\n\r\n// Styles any element to look and behavior like a link\r\n.link (@cursor: pointer, @color: @font-color-link) {\r\n    color: @color;\r\n    text-decoration: none;\r\n\r\n    &:hover, &:focus {\r\n        cursor: @cursor;\r\n        text-decoration: underline;\r\n    }\r\n}\r\n\r\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\r\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\r\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\r\n// Webkit thumb will have a 5px border-radius (others will have square edges).\r\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\r\n.custom-scrollbar(@thumb-color, @track-color) {\r\n    scrollbar-width: thin;\r\n    scrollbar-color: @thumb-color @track-color;\r\n\r\n    -ms-scrollbar-face-color: @thumb-color;\r\n    -ms-scrollbar-highlight-color: @track-color;\r\n    -ms-scrollbar-shadow-color: @track-color;\r\n    -ms-scrollbar-arrow-color: @track-color;\r\n\r\n    &::-webkit-scrollbar {\r\n        background-color: @track-color;\r\n        width: 8px;\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n        background-color: @thumb-color;\r\n        border-radius: 5px;\r\n    }\r\n}\r\n\r\n.hidden-scrollbar {\r\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\r\n    scrollbar-width: none; /* Firefox */\r\n    -ms-overflow-style: none; /* IE 10+ */\r\n}\r\n\r\n.edit-control() {\r\n    padding: 2px;\r\n    bottom: 0px;\r\n    right: 0px;\r\n    z-index: 1;\r\n    background-color: white;\r\n\r\n    > div {\r\n        .link;\r\n        display: inline-block;\r\n        padding: 3px 8px 4px 8px;\r\n        border: 1px solid @gray-press;\r\n        background-color: white;\r\n    }\r\n}\r\n\r\n.viewer-message() {\r\n    margin: 20px auto 0px auto;\r\n    text-align: center;\r\n    // This is the size used in Viewer.less\r\n    // repeated here to make this consistent between pages\r\n    font-size: medium;\r\n\r\n    #messageText {\r\n        padding: 10px;\r\n    }\r\n\r\n    #messageLink {\r\n        padding: 0px 10px 10px 10px;\r\n    }\r\n}\r\n\r\n.role-select(@width, @margin-top) {\r\n    font-family: @font;\r\n    width: @width;\r\n    height: 38px;\r\n    margin-top: @margin-top;\r\n    padding: 6px;\r\n    font-size: @font-size-base;\r\n    .border-radius(4px);\r\n    color: @font-color-light;\r\n    display: block;\r\n    vertical-align: top;\r\n}\r\n\r\n// Shared thumbnail styles\r\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\r\n    // This is necessary to surface these params in the enclosing scope of the mixin.\r\n    @thumbnail-width: @thumbnail-width-param;\r\n    @thumbnail-height: @thumbnail-height-param;\r\n    @thumbnail-border: 1px;\r\n    @overlay-margin: 2px;\r\n\r\n    .thumbnail-container {\r\n        // Provide a positioning context for thumbnail overlays\r\n        position: relative;\r\n        width: @thumbnail-width;\r\n        height: @thumbnail-height;\r\n        border: @thumbnail-border solid @gray-border;\r\n        .border-radius(3px);\r\n        background: @gray-very-light;\r\n        // Prevent child image from bleeding out of the rounded corners\r\n        overflow: hidden;\r\n\r\n        // Give linked thumbnails a darkened border on hover\r\n        &.viewable:hover {\r\n            border: @thumbnail-border solid @gray-dark;\r\n        }\r\n\r\n        // Show link or span depending on "viewable" class on container\r\n        .thumbnail-span,\r\n        &.viewable .thumbnail-link {\r\n            display: block;\r\n        }\r\n        .thumbnail-link,\r\n        &.viewable .thumbnail-span {\r\n            display: none;\r\n        }\r\n\r\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\r\n        .thumbnail-link,\r\n        .thumbnail-span {\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n\r\n        .thumbnail-img,\r\n        .thumbnail-failed-load {\r\n            // Necessary for horizontal centering, correct focus outlines, etc.\r\n            display: block;\r\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\r\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\r\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\r\n            width: auto;\r\n            height: 100%;\r\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\r\n            margin: auto;\r\n            // Prevent image link border in older IE\r\n            border: none;\r\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\r\n            pointer-events: none;\r\n        }\r\n\r\n        // Show duration in an overlay at the bottom right of the thumbnail\r\n        .duration {\r\n            .overlay();\r\n            .border-radius(1px);\r\n            bottom: @overlay-margin;\r\n            right: @overlay-margin;\r\n            font-size: @font-size-subtitle;\r\n        }\r\n\r\n        .playlist {\r\n            .overlay();\r\n            .border-radius(1px);\r\n            top: 0;\r\n            right: 0;\r\n            height: @thumbnail-height;\r\n            line-height: @thumbnail-height;\r\n            text-align: center;\r\n            padding: 0 5px;\r\n\r\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\r\n            min-width: 40%;\r\n\r\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\r\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\r\n            &::before,\r\n            &::after {\r\n                content: \'\';\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n            }\r\n\r\n            // Handle vertical centering of text;\r\n            .playlist-text {\r\n                @height-adjustment: 10px;\r\n                display: inline-block;\r\n                vertical-align: middle;\r\n                // Adjust the height between the icon and text\r\n                line-height: @height-adjustment;\r\n                // Fix the vertical centering of the text\r\n                margin-top: -@height-adjustment;\r\n                font-size: @font-size-website-base;\r\n            }\r\n        }\r\n\r\n        .completion-overlay {\r\n            position: absolute;\r\n            bottom: 0;\r\n            height: 4px;\r\n            width: 100%;\r\n            background: @gray-press;\r\n\r\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\r\n            // Color is set to brand color via .accent-background.\r\n            .progress {\r\n                height: 100%;\r\n            }\r\n        }\r\n\r\n        .archived-overlay {\r\n            position: absolute;\r\n            width: 100%;\r\n            height: 100%;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-around;\r\n            align-content: space-around;\r\n            // Control opacity through the backgroun so the text is fully opaque.\r\n            background: rgba(255, 255, 255, 0.8);\r\n            color: @icon-color;\r\n            pointer-events: none;\r\n        }\r\n    }\r\n\r\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\r\n    .overlay() {\r\n        position: absolute;\r\n        // IE8 fallback (doesn\'t support rgba)\r\n        background: black;\r\n        background: rgba(0, 0, 0, 0.7);\r\n        padding: 1px 3px;\r\n        color: white;\r\n        cursor: default;\r\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\r\n        pointer-events: none;\r\n    }\r\n}\r\n\r\n// Shared caption option styles\r\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\r\n    .user-select(none);\r\n\r\n    li {\r\n        // override box-sizing: border-box set on fullscreen options\r\n        box-sizing: content-box;\r\n        display: block;\r\n        float: left;\r\n        margin-left: 5px;\r\n        width: @item-size;\r\n        height: @item-size;\r\n        // Line height needs to consider padding to align with the width\r\n        line-height: @item-size - (2 * @item-padding);\r\n        text-align: center;\r\n        cursor: pointer;\r\n        padding: @item-padding;\r\n\r\n        // Use a transparent border when not selected to avoid reflow on selection\r\n        border-width: @item-border;\r\n        border-style: solid;\r\n        border-color: transparent;\r\n    }\r\n\r\n    // Color samples have a border color to display as well\r\n    li .color-sample {\r\n        border-width: 1px;\r\n        border-style: solid;\r\n    }\r\n\r\n    .transparent-background {\r\n        .icon(@asset-path, "checker.png");\r\n        background-position: left top;\r\n    }\r\n\r\n    .placement-option {\r\n        // Override the default explicit size to the image\r\n        width: auto;\r\n        height: auto;\r\n    }\r\n\r\n    // Docked image icon\r\n    .Docked div {\r\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\r\n    }\r\n\r\n    // Overlay image icon\r\n    .Overlay div {\r\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\r\n    }\r\n}\r\n\r\n.dialog-triangle() {\r\n    // These are styles to position and scale unicode triangle character for a dialog\r\n    position: absolute;\r\n    display: block;\r\n    color: white;\r\n    z-index: 1000;\r\n    margin-left: -10px;\r\n    margin-top: -11px;\r\n    font-size: 1.5em;\r\n    .transform(scaleX(1.5));\r\n    cursor: default;\r\n}\r\n\r\n// Used to place an opaque overlay on the screen\r\n.screen-overlay() {\r\n    display: none;\r\n    position: fixed;\r\n    top: 0; left: 0; right: 0; bottom: 0;\r\n    background-color: black;\r\n    @opacity: 70;\r\n    opacity: @opacity / 100;\r\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\r\n    z-index: 999;\r\n}\r\n\r\n// Used to vertically align material icons nicely beside text\r\n.material-icon-beside-text() {\r\n    // Align the material icon with the text\r\n    vertical-align: middle;\r\n    // Underlining material design icons doesn\'t render nicely\r\n    text-decoration: none;\r\n    // Give the icon a little space from the title\r\n    padding-right: 3px;\r\n}\r\n\r\n.folder-header-icon(@width, @height, @icon) {\r\n    .icon(@asset-path, @icon, @width, @height);\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n// Used for close buttons that use the "close"/x material icon\r\n.close-button (@size) {\r\n    display: block;\r\n    text-decoration: none;\r\n    color: @font-color-light;\r\n    font-size: @size;\r\n\r\n    .hoverable(@gray-transparent, @gray-transparent-dark);\r\n\r\n    &:active {\r\n        color: white;\r\n    }\r\n}\r\n\r\n.speech-bubble() {\r\n    @padding: 10px;\r\n    @border-width: 1px;\r\n    @background-color: white;\r\n    position: relative;\r\n    background-color: @background-color;\r\n    border: @border-width solid @gray-border;\r\n    border-radius: 3px;\r\n    border-bottom-left-radius: 0px;\r\n    padding: @padding;\r\n\r\n    &:before {\r\n        content: "";\r\n        position: absolute;\r\n        top: 100%;\r\n        left: 0px - @border-width;\r\n        width: 0px;\r\n        display: block;\r\n        border-width: 20px 20px 0 0;\r\n        border-style: solid;\r\n        border-color: @gray-border transparent;\r\n    }\r\n\r\n    &:after {\r\n        content: "";\r\n        position: absolute;\r\n        top: 100%;\r\n        left: 0px;\r\n        width: 0px;\r\n        display: block;\r\n        border-width: 17px 17px 0 0;\r\n        border-style: solid;\r\n        border-color: @background-color transparent;\r\n    }\r\n}\r\n\r\n.flat-button() {\r\n    display: inline-block;\r\n    padding: 6px 9px 8px 9px;\r\n    .border-radius(3px);\r\n    background-color: @header-color;\r\n    cursor: pointer;\r\n    text-decoration: none;\r\n    font-weight: 600;\r\n    color: @font-color;\r\n    text-align: center;\r\n    border: 1px solid @gray-light;\r\n\r\n    &.safety-background {\r\n        color: white;\r\n        border: 0px;\r\n        padding: 7px 10px 9px 10px;\r\n    }\r\n\r\n    &:hover, &:active {\r\n        text-decoration: none;\r\n    }\r\n}\r\n\r\n.copyright-warning() {\r\n    font-size: @font-size-small;\r\n    color: @font-color-light-white-background;\r\n    text-align: center;\r\n    padding: 20px;\r\n}\r\n\r\n.material-checkbox(\r\n    @color: @icon-color,\r\n    @background: rgba(255, 255, 255, 0.85)\r\n) {\r\n    -webkit-appearance: unset;\r\n    -moz-appearance: none;\r\n    position: relative;\r\n    color: @color;\r\n\r\n    // Remove border and background color as they still show up on Mobile Safari\r\n    // even with appearance unset\r\n    border: none;\r\n    background-color: transparent;\r\n\r\n    &::before {\r\n        content: "";\r\n        position: absolute;\r\n        top: @checkbox-glyph-inset;\r\n        right: @checkbox-glyph-inset;\r\n        bottom: @checkbox-glyph-inset;\r\n        left: @checkbox-glyph-inset;\r\n        border-radius: 3px;\r\n        background: @background;\r\n    }\r\n\r\n    &::after {\r\n        content: "check_box_outline_blank";\r\n        position: absolute;\r\n    }\r\n    &:checked::after {\r\n        content: "check_box";\r\n    }\r\n\r\n    @ms-cruft: {\r\n        left: 3px;\r\n        top: 3px;\r\n        width: 18px;\r\n        height: 18px;\r\n    };\r\n    .ie-only(@ms-cruft);\r\n    .edge-only(@ms-cruft);\r\n}\r\n\r\n.material-radio(\r\n    @color: @icon-color,\r\n    @background: rgba(255, 255, 255, 0.85)\r\n) {\r\n    -webkit-appearance: unset;\r\n    -moz-appearance: none;\r\n    position: relative;\r\n    color: @color;\r\n\r\n    // Remove border and background color as they still show up on Mobile Safari\r\n    // even with appearance unset\r\n    border: none;\r\n    background-color: transparent;\r\n\r\n    &::before {\r\n        content: "";\r\n        position: absolute;\r\n        top: @checkbox-glyph-inset;\r\n        right: @checkbox-glyph-inset;\r\n        bottom: @checkbox-glyph-inset;\r\n        left: @checkbox-glyph-inset;\r\n        border-radius: 3px;\r\n        background: @background;\r\n    }\r\n\r\n    &::after {\r\n        content: "radio_button_unchecked";\r\n        position: absolute;\r\n    }\r\n    &:checked::after {\r\n        content: "radio_button_checked";\r\n    }\r\n\r\n    @ms-cruft: {\r\n        left: 3px;\r\n        top: 3px;\r\n        width: 18px;\r\n        height: 18px;\r\n    };\r\n    .ie-only(@ms-cruft);\r\n    .edge-only(@ms-cruft);\r\n}\r\n\r\n\r\n.placeholder(@rules) {\r\n    &::placeholder {\r\n        @rules();\r\n    }\r\n\r\n    &::-ms-input-placeholder {\r\n        @rules();\r\n    }\r\n\r\n    &:-ms-input-placeholder {\r\n        @rules();\r\n    }\r\n}\r\n\r\n.material-select() {\r\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\r\n    -moz-appearance: none; \r\n    -webkit-appearance: none; \r\n    appearance: none;\r\n}\r\n\r\n.clear-search-icon() {\r\n    @icon-size: 18px;\r\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\r\n    background-size: @icon-size;\r\n}\r\n','@import "../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../WebCore/css/Assets/Assets.less";\n@import "../../../webrecorder/lib/Shared.less";\n@import "./TagsContainer.less";\n\n.tag-hover-container {\n    position: relative;\n\n    .tag {\n        border-radius: 13px;\n        background-color: @gray-hint;\n        height: 20px;\n        padding: 2px 9px;\n        border: 1px solid @gray-hint;\n        margin: 2px @tag-left-margin;\n        position: relative;\n        display: inline-flex;\n        align-items: center;\n        cursor: default;\n    \n        .tag-text {\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n\n            .tag-hashtag {\n                font-family: @font-semibold;\n            }\n        }\n    \n        .delete {\n            font-size: 14px;\n            color: @font-color-lightest;\n            margin: 2px -2px 0 0;\n            cursor: pointer;\n        }\n\n        &.tag-dark-mode {\n            background-color: @background-color;\n            border: none;\n            color: white;\n            padding: 3px 9px;\n        }\n    }\n\n    .tag:hover {\n        background-color: @focused-background-color;\n        \n        &.tag-dark-mode {\n            background-color: @background-color;\n        }\n    }\n}\n','/* Constants / styles used across the product */\r\n\r\n/* Fonts */\r\n@font: Segoe UI, Helvetica, sans-serif;\r\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\r\n.font-light() {\r\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\r\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\r\n}\r\n.font-semibold() {\r\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\r\n    font-weight: 600;\r\n}\r\n\r\n@font-size-base: 16px;\r\n@font-size-medium: 1.45em;\r\n@font-size-large: 1.5em;\r\n@font-size-big-title: 1.7em;\r\n@font-size-small: .8em;\r\n@font-size-xsmall: .7em;\r\n@font-size-extra-large: 2.1em;\r\n@font-size-huge: 3.0em;\r\n// Our website uses this as its base\r\n@font-size-website-base: 13px;\r\n// These are basic font sizes used by the recorder. We should start making all of these consistent\r\n@font-size-title: 1.3em;\r\n@font-size-header: 1.2em;\r\n@font-size-command-button: 1.1em;\r\n@font-size-subtitle: .9em;\r\n@font-size-option: .8em;\r\n@font-size-button: .7em;\r\n\r\n@icon-size-without-text: 24px;\r\n@icon-size-with-text: 18px;\r\n\r\n/* Sizes */\r\n@site-min-width: 1004px;\r\n\r\n@small-logo-max-width: 265px;\r\n@small-logo-max-height: 23px;\r\n@large-logo-max-width: 340px;\r\n@large-logo-max-height: 50px;\r\n\r\n// Preferred hit target size for touch interfaces.\r\n@touch-target-size: 48px;\r\n// Smaller touch target size for tightly constrained contexts.\r\n@touch-target-size-small: 40px;\r\n\r\n@button-spacing: 10px;\r\n\r\n/* Font Colors */\r\n@font-color-primary: #009900;\r\n@font-color-secondary: #466c2c;\r\n@font-color-link: #0099CC;\r\n\r\n@font-color-error: #990000;\r\n@font-color-dark: #000000;\r\n@font-color: #464646;\r\n@font-color-light: #777777;\r\n@font-color-lightest: #999999;\r\n@font-color-light-background: #b8b8b8;\r\n@font-light-gray: #aaaaaa;\r\n\r\n/* Font Colors (Accessibility) */\r\n@font-color-light-white-background: #767676;\r\n\r\n/* "Dark Theme" Colors */\r\n@overlay-background-color: rgba(0, 0, 0, 0.8);\r\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\r\n@icon-color-active-dark-theme: white;\r\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\r\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\r\n@font-color-dark-theme: rgba(255, 255, 255, 1);\r\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\r\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\r\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\r\n\r\n/* Colors */\r\n@blue-selected: #aedcf1;\r\n\r\n@white-bright: #e6e6e6;\r\n@pure-white: #ffffff;\r\n\r\n@red: #bd4f4f;\r\n@red-medium: #a04242;\r\n@red-dark: #8c3939;\r\n@red-light: #ebcaca;\r\n@red-bright: #dd3217;\r\n\r\n@green: #54bf6d;\r\n@green-medium: #1d8f37;\r\n@green-dark: #185e0d;\r\n@green-light: #92c88a;\r\n@green-background: #eef5f0;\r\n@green-sunny: #719f46;\r\n@green-shady: #48761d;\r\n\r\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\r\n@panopto-green: #30733F;\r\n\r\n@icon-color: #626262;\r\n@header-color: #f5f5f5;\r\n@header-dropdown-background-color: White;\r\n@focused-background-color: #e8e8e8;\r\n@gray-border: #e0e0e0;\r\n@gray-light: #d6d6d6;\r\n@gray-hover: #f0f0f0;\r\n@gray-very-light: #f2f2f2;\r\n@gray-hint: #f5f5f5;\r\n@gray-press: #cccccc;\r\n@gray-dark: #999999;\r\n@gray-header: #666;\r\n@gray-shadow: #888;\r\n@gray-future: #f2f2f2;\r\n@dark-selected: #8b8b8b;\r\n@gray-divider: #989898;\r\n@light-selected: #dbdbdb;\r\n@gray-silver: #e7e7e7;\r\n@gray-disabled: #ebebe4;\r\n@gray-button-hover: #e5e5e5;\r\n@gray-transparent: rgba(0,0,0,0.2);\r\n@gray-transparent-subtle: rgba(0,0,0,0.1);\r\n@gray-transparent-light: rgba(0,0,0,0.3);\r\n@gray-transparent-medium: rgba(0,0,0,0.5);\r\n@gray-transparent-dark: rgba(0,0,0,0.6);\r\n@gray-dark-shadow: rgba(0,0,0,0.7);\r\n@gray-darker-shadow: rgba(0,0,0,0.8);\r\n@gray-watermark: gray;\r\n@letterbox-color: black;\r\n@rr-letterbox-color: #3f3f3f;\r\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\r\n                      0 1px 18px 0 rgba(0,0,0,.12),\r\n                      0 3px 5px -1px rgba(0,0,0,.20);\r\n\r\n@background-warning: orange;\r\n\r\n@yellow: #feffc9;\r\n\r\n@stored-quota-foreground: #B56F90;\r\n@stored-quota-background: #B56F90;\r\n@delivered-quota-foreground: #4798D0;\r\n@delivered-quota-background: #4798D0;\r\n\r\n@drop-target-background: rgba(231, 239, 254, 0.5);\r\n@drop-target-background-invalid: fadeout(white, 20%);\r\n@drop-target-border: fadeout(#4384f4, 57%);\r\n\r\n/* For gradient buttons */\r\n\r\n/* Small Thumbnail */\r\n@small-thumbnail-cell-width: 120px;\r\n@small-thumbnail-height: 60px;\r\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\r\n\r\n/* Volume preview specific colors */\r\n@neutral-color: #0098cc;\r\n@loud-color: #9d0b0b;\r\n@quiet-color: #ffa900;\r\n@neutral-text-color: #019acd;\r\n@loud-text-color: #8a1d1d;\r\n@quiet-text-color: #d08e0b;\r\n@loud-warning-color: #cf8787;\r\n@quiet-warning-color: #ffd57f;\r\n@loud-border: #7fcce6;\r\n\r\n/* Opacities */\r\n@button-opacity: .6;\r\n@button-hover-opacity: .8;\r\n@button-active-opacity: 1.0;\r\n@button-disabled: .3;\r\n\r\n/* Borders */\r\n@input-border-edit: 1px solid #959595;\r\n@input-border-hover: 1px solid #cdcdcd;\r\n@input-border-white: 1px solid White;\r\n@header-dropdown-border: 1px solid #cccccc;\r\n@input-border-light: 1px solid #cccccc;\r\n@input-border-extra-light: 1px solid @gray-border;\r\n\r\n/* Common measurements */\r\n\r\n// The height of most of our modal inputs\r\n@input-height: 28px;\r\n\r\n/* Images */\r\n@spinner-path: "Spinner/";\r\n@spinner-large: "large-comet-animation-grey.gif";\r\n@spinner-small-white: "spinner_small_white.gif";\r\n@spinner-small-beige: "spinner_small_eee.gif";\r\n\r\n@spinner-large-themable: "spinner_large_themable.png";\r\n@spinner-small-white-themable: "spinner_small_themable_white.png";\r\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\r\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\r\n\r\n/* Transitions */\r\n@viewer-transition: all .125s ease-in-out;\r\n\r\n/* Mobile */\r\n\r\n// Google recommends a base of 16px\r\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\r\n@mobile-base-size: 16px;\r\n\r\n// Maybe we want to change this to a hex code later\r\n// so for now use yellow and we can change it easier\r\n@mobile-font-warning: yellow;\r\n@mobile-background-disabled: rgb(187, 187, 187);\r\n\r\n// Mobile query constants\r\n\r\n// "almost" is one less then actual width,\r\n// "almost" queries should be used for max-width \r\n// actual queries should be used for min-width\r\n// By keeping those consistent we can be sure that the layout\r\n// doesn\'t do funky things on the pixel between the two\r\n// and we won\'t need to consider which media query comes first\r\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\r\n@ipad4-portrait-width: 320px;\r\n@iphone5-landscape-width: 568px;\r\n@iphone6-portrait-width: 375px;\r\n\r\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\r\n\r\n@ipad-mini-portrait-width: 768px;\r\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\r\n\r\n@nexus7-landscape-width: 960px;\r\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\r\n\r\n/* Embed */\r\n@defaultEmbedWidth: 720px;\r\n@defaultEmbedHeight: 405px;\r\n\r\n/* Material icons */\r\n@checkbox-glyph-inset: 3px;\r\n\r\n/* Resets */\r\nbody {\r\n    margin: 0px;\r\n}\r\n\r\n.clicked {\r\n    outline: none;\r\n}\r\n',"@control-bar-relative-height: 15%;\n@control-bar-min-height: 50px;\n@control-bar-max-height: 200px;\n@stage-transition-duration: 1s;\n@stage-padding: 12px;\n\n@border-color: fadeout(white, 80%);\n@background-color: fadeout(white, 90%);\n@background-color-hover: fadeout(white, 80%);\n@background-color-active: fadeout(white, 70%);\n\n.control-bar {\n    position: relative;\n    display: flex;\n    align-items: center;\n    height: @control-bar-relative-height;\n    min-height: @control-bar-min-height;\n    max-height: @control-bar-max-height;\n}\n\n.post-record-large-button() {\n    flex: 1;\n    height: 100%;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: solid 1px @border-color;\n    border-radius: 5px;\n    background-color: @background-color;\n    transition: color 0.1s, opacity 0.2s;\n    cursor: pointer;\n\n    &.disabled {\n        opacity: 0.5;\n        cursor: default;\n    }\n\n    .material-icons {\n        margin-right: @stage-padding / 2;\n        color: @icon-color-dark-theme;\n    }\n\n    .label {\n        font-size: calc(14px + 0.4vh);\n        color: white;\n    }\n\n    &:not(.disabled) {\n        &:hover {\n            background-color: @background-color-hover;\n\n            .material-icons {\n                color: white;\n            }\n        }\n        &:active {\n            background-color: @background-color-active;\n        }\n    }\n}\n\n.post-record-sidecar-button() {\n    flex: none;\n    height: 100%;\n    padding: 0 0.4vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: @stage-padding;\n    background: @background-color;\n    transition: background-color 0.2s;\n    cursor: pointer;\n\n    &:hover {\n        background-color: @background-color-hover;\n        color: white;\n    }\n    &:active {\n        background-color: @background-color-active;\n    }\n}\n",'@import "../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../WebCore/css/Assets/Assets.less";\n\n@tag-left-margin: 3px;\n.tags-container {\n    min-height: 26px;\n    max-width: 500px;\n    font-size: 14px;\n    color: @font-color;\n    margin-left: -@tag-left-margin;\n    position: relative;\n    outline: none;\n\n    a, a:hover {\n        text-decoration: none;\n    }\n    \n    .tags-input {\n        display: inline-block;\n    }\n    \n    .tag-list {\n        display: inline-flex;\n        flex-wrap: wrap;\n    }\n\n    .tag-create-new {\n        display: inline-flex;\n        border-radius: 13px;\n        border: @header-dropdown-border;\n        padding: 2px 9px 2px 6px;\n        margin: 2px;\n        align-items: center;\n        cursor: pointer;\n\n        &.disabled {\n            opacity: 0.5;\n        }\n\n        .tag-add-icon {\n            font-size: 12px;\n            color: @icon-color;\n            margin-top: 1px;\n        }\n    }\n\n    .tags-container-undo {\n        position: absolute;\n        top: -50px;\n        z-index: 1;\n        height: 48px;\n        background-color: @font-color;\n        color: white;\n        border-radius: 3px;\n        box-shadow: @material-box-shadow;\n\n        .tag-undo-text {\n            display: inline-flex;\n            height: 48px;\n            align-items: center;\n            padding: 0 16px;\n\n            .deleted-tag {\n                font-weight: 500;\n            }\n\n            .undo-tag-button {\n                padding: 0 16px;\n                font-weight: 600;\n                cursor: pointer;\n                color: @font-color-link;\n            }\n\n            .tag-undo-close {\n                font-size: 14px;\n                padding-top: 2px;\n                cursor: pointer;\n            }\n        }\n    }\n\n    &.tags-dark-mode {\n        .tag-create-new {\n            color: @gray-hint;\n            border-color:@font-color-lightest;\n            padding-top: 3px;\n            padding-bottom: 4px;\n\n            .tag-add-icon {\n                color: @gray-hint;\n            }\n        }\n    }\n}\n'],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.tags-editor {\n  position: relative;\n  margin: 2px;\n  padding: 1px 0;\n  min-width: 130px;\n  border-radius: 13px;\n  border: 1px solid #cccccc;\n}\n.tags-editor .tag-editor-close {\n  display: inline-flex;\n  font-size: 16px;\n  float: right;\n  padding: 4px 5px 0 0;\n  cursor: pointer;\n  color: #464646;\n  opacity: 0.5;\n}\n.tags-editor .input-size-controller {\n  display: inline-block;\n  padding-left: 8px;\n}\n.tags-editor .input-size-controller.input-style-display {\n  border-radius: 13px 0 0 13px;\n}\n.tags-editor .input-size-controller input {\n  height: 20px;\n  border: none;\n  background: none;\n  outline: none;\n  width: auto;\n  padding-left: 1px;\n}\n.tags-editor .input-size-controller span {\n  display: inline;\n}\n.tags-editor .input-size-check {\n  position: absolute;\n  top: 0;\n  left: 0;\n  visibility: hidden;\n}\n.tags-editor.tags-dark-mode {\n  background-color: #f5f5f5;\n}\n.tags-editor.tags-dark-mode .input-size-controller input {\n  height: 22px;\n}\n',"",{version:3,sources:["webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./../webpack/React/Tags/TagsEditor.less","webpack://./../../WebCore/css/Assets/Assets.less"],names:[],mappings:"AA2LA;EACI,cAAA;EACA,YAAA;AC1LJ;AD6LA;EACI,WAAA;EACA,WAAA;AC3LJ;ADgUA;EACI,yBAAA;AC9TJ;ADiUA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AC/TJ;ADgVA;EACI,iBAAA;AC9UJ;ADgYA;EC9XE,yBAAyB;EDgYvB,qBAAA;EC9XF,YAAY;ED+XV,wBAAA;EC7XF,WAAW;AACb;AD0XI;EAAuB,aAAA;ACvX3B;AACA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC+LX;EACI,WAAA;AD7LJ;ACgMA;EACI,aAAA;AD9LJ;AAlDA;EACI,kBAAA;EACA,WAAA;EACA,cAAA;EACA,gBAAA;EACA,mBAAA;EACA,yBAAA;AAoDJ;AA1DA;EASQ,oBAAA;EACA,eAAA;EACA,YAAA;EACA,oBAAA;EACA,eAAA;EACA,cAAA;EACA,YAAA;AAoDR;AAnEA;EAmBQ,qBAAA;EACA,iBAAA;AAmDR;AAjDQ;EACI,4BAAA;AAmDZ;AA1EA;EA2BY,YAAA;EACA,YAAA;EACA,gBAAA;EACA,aAAA;EACA,WAAA;EACA,iBAAA;AAkDZ;AAlFA;EAoCY,eAAA;AAiDZ;AArFA;EAyCQ,kBAAA;EACA,MAAA;EACA,OAAA;EACA,kBAAA;AA+CR;AA5CI;EACI,yBAAA;AA8CR;AA/CI;EAIQ,YAAA;AA8CZ",sourcesContent:['@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n','@import "../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../WebCore/css/Assets/Assets.less";\n\n.tags-editor {\n    position: relative;\n    margin: 2px;\n    padding: 1px 0;\n    min-width: 130px;\n    border-radius: 13px;\n    border: @input-border-light;\n\n    .tag-editor-close {\n        display: inline-flex;\n        font-size: 16px;\n        float: right;\n        padding: 4px 5px 0 0;\n        cursor: pointer;\n        color: @font-color;\n        opacity: 0.5;\n    }\n\n    .input-size-controller {\n        display: inline-block;\n        padding-left: 8px;\n        \n        &.input-style-display {\n            border-radius: 13px 0 0 13px;\n        }\n\n        input {\n            height: 20px;\n            border: none;\n            background: none;\n            outline: none;\n            width: auto;\n            padding-left: 1px;\n        }\n\n        span {\n            display: inline;\n        }\n    }\n\n    .input-size-check {\n        position: absolute;\n        top: 0;\n        left: 0;\n        visibility: hidden;\n    }\n\n    &.tags-dark-mode {\n        background-color: @gray-hint;\n\n        .input-size-controller input {\n            height: 22px;\n        }\n    }\n}\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n'],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.tags-popup {\n  position: absolute;\n  width: 240px;\n  font-size: 14px;\n  margin: 4px 4px 4px 0;\n  box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n  background-color: white;\n  overflow: hidden;\n  border-radius: 3px;\n  padding-bottom: 6px;\n}\n.tags-popup .tag-autocomplete-item {\n  padding: 10px 16px;\n  display: flex;\n  justify-content: space-between;\n}\n.tags-popup .tag-autocomplete-item .tag-merge-mode {\n  display: flex;\n}\n.tags-popup .tag-autocomplete-item .tag-autocomplete-info {\n  max-width: 150px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.tags-popup .tag-autocomplete-item .tag-item {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n}\n.tags-popup .tag-autocomplete-item .tag-item.tag-merge-mode {\n  justify-content: normal;\n}\n.tags-popup .tag-autocomplete-item .tag-item.tag-merge-mode .tag-occurance {\n  padding-left: 8px;\n}\n.tags-popup .tag-autocomplete-item.tag-used {\n  opacity: 0.5;\n}\n.tags-popup .tag-autocomplete-item.tag-used .tag-used-checkmark {\n  font-size: 18px;\n  vertical-align: bottom;\n  padding-left: 5px;\n}\n.tags-popup .tag-autocomplete-item:hover,\n.tags-popup .tag-autocomplete-item.tag-focused {\n  background-color: #f5f5f5;\n}\n',"",{version:3,sources:["webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./../webpack/React/Tags/TagAutocomplete.less","webpack://./../../WebCore/css/Assets/Assets.less"],names:[],mappings:"AA2LA;EACI,cAAA;EACA,YAAA;AC1LJ;AD6LA;EACI,WAAA;EACA,WAAA;AC3LJ;ADgUA;EACI,yBAAA;AC9TJ;ADiUA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AC/TJ;ADgVA;EACI,iBAAA;AC9UJ;ADgYA;EC9XE,yBAAyB;EDgYvB,qBAAA;EC9XF,YAAY;ED+XV,wBAAA;EC7XF,WAAW;AACb;AD0XI;EAAuB,aAAA;ACvX3B;AACA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC+LX;EACI,WAAA;AD7LJ;ACgMA;EACI,aAAA;AD9LJ;AAlDA;EACI,kBAAA;EACA,YAAA;EACA,eAAA;EACA,qBAAA;EACA,iHAAA;EACA,UAAA;EACA,uBAAA;EACA,gBAAA;EACA,kBAAA;EACA,mBAAA;AAoDJ;AA9DA;EAaQ,kBAAA;EACA,aAAA;EACA,8BAAA;AAoDR;AAnEA;EAkBY,aAAA;AAoDZ;AAtEA;EAsBY,gBAAA;EACA,mBAAA;EACA,gBAAA;EACA,uBAAA;AAmDZ;AA5EA;EA6BY,aAAA;EACA,WAAA;EACA,8BAAA;AAkDZ;AAhDY;EACI,uBAAA;AAkDhB;AAnDY;EAIQ,iBAAA;AAkDpB;AA7CQ;EACI,YAAA;AA+CZ;AAhDQ;EAIQ,eAAA;EACA,sBAAA;EACA,iBAAA;AA+ChB;AA3CQ;;EAEI,yBAAA;AA6CZ",sourcesContent:['@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n','@import "../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../WebCore/css/Assets/Assets.less";\n\n.tags-popup {\n    position: absolute;\n    width: 240px;\n    font-size: 14px;\n    margin: 4px 4px 4px 0;\n    box-shadow: @material-box-shadow;\n    z-index: 1;\n    background-color: white;\n    overflow: hidden;\n    border-radius: 3px;\n    padding-bottom: 6px;\n\n    .tag-autocomplete-item {\n        padding: 10px 16px;\n        display: flex;\n        justify-content: space-between;\n\n        .tag-merge-mode {\n            display: flex;\n        }\n\n        .tag-autocomplete-info {\n            max-width: 150px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        .tag-item {\n            display: flex;\n            width: 100%;\n            justify-content: space-between;\n\n            &.tag-merge-mode {\n                justify-content: normal;\n\n                .tag-occurance {\n                    padding-left: 8px;\n                }\n            }\n        }\n\n        &.tag-used {\n            opacity: .5;\n\n            .tag-used-checkmark {\n                font-size: 18px;\n                vertical-align: bottom;\n                padding-left: 5px;\n            }\n        }\n\n        &:hover,\n        &.tag-focused {\n            background-color: @gray-hint;\n        }\n    }\n}\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n'],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n.control-bar {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n}\n.dropbox-message {\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  padding: 16px;\n  display: flex;\n}\n.share-container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.share-container .heading {\n  font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n  font-weight: 100;\n  font-size: 22px;\n  margin-bottom: 6px;\n}\n.share-container .center-controls {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.share-container #shareControlContainer {\n  flex: auto;\n  display: flex;\n  flex-direction: column;\n}\n.share-container #shareControlContainer .share-add-input {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  border: none;\n  border-radius: 3px;\n  background: rgba(255, 255, 255, 0.1);\n  min-height: 40px;\n  box-sizing: border-box;\n}\n.share-container #shareControlContainer .share-add-input .tagit-new {\n  padding: 0 4px 0 0;\n}\n.share-container #shareControlContainer .share-add-input .tagit-new input {\n  background: none;\n  color: #ffffff;\n}\n.share-container #shareControlContainer .share-add-input .tagit-new input::placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n.share-container #shareControlContainer .share-add-input .tagit-new input:focus::placeholder {\n  color: transparent;\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice {\n  display: flex;\n  align-items: center;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  border-radius: 15px;\n  background: rgba(255, 255, 255, 0.2);\n  padding: 0.2em 28px 0.2em 0.5em;\n  height: 30px;\n  box-sizing: border-box;\n  color: white;\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice .tagit-label {\n  white-space: nowrap;\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice .tagit-close {\n  top: auto;\n  right: 0;\n  margin: 0;\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice .tagit-close .text-icon {\n  display: inline;\n  padding-right: 7px;\n  font-size: 18px;\n  color: rgba(255, 255, 255, 0.8);\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice .tagit-close .ui-icon-close {\n  display: none;\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice.error-tag {\n  background: rgba(237, 47, 2, 0.5);\n}\n.share-container #shareControlContainer .share-add-input .tagit-choice.error-tag .tagit-label {\n  color: rgba(255, 255, 255, 0.6);\n}\n.share-container #shareControlContainer .email-status {\n  padding-top: 12px;\n}\n.share-container #shareControlContainer .share-spinner {\n  display: none;\n}\n.share-container #shareControlContainer .share-note {\n  flex: auto;\n  margin-top: 10px;\n}\n.share-container #shareControlContainer .share-note .share-notify {\n  display: none;\n}\n.share-container #shareControlContainer .share-note .share-note-input {\n  display: block;\n  width: 100%;\n  height: 100%;\n  min-height: 100px;\n  margin: 0;\n  padding: 8px 10px 10px 10px;\n  box-sizing: border-box;\n  border: 0;\n  border-radius: 3px;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n}\n.share-container #shareControlContainer .share-note .share-note-input::placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n.share-container #shareControlContainer .share-note .share-note-input:focus::placeholder {\n  color: transparent;\n}\n.share-container #shareControlContainer #invitationWarning {\n  display: none !important;\n}\n.share-container .button-block {\n  margin-top: 12px;\n  height: 5vh;\n  min-height: 35px;\n}\n.share-container .button-block .button {\n  flex: 1;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: solid 1px rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  background-color: rgba(255, 255, 255, 0.1);\n  transition: color 0.1s, opacity 0.2s;\n  cursor: pointer;\n  width: calc(25% - (1.5 * 12px));\n}\n.share-container .button-block .button.disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n.share-container .button-block .button .material-icons {\n  margin-right: 6px;\n  color: rgba(255, 255, 255, 0.8);\n}\n.share-container .button-block .button .label {\n  font-size: calc(14px + 0.4vh);\n  color: white;\n}\n.share-container .button-block .button:not(.disabled):hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.share-container .button-block .button:not(.disabled):hover .material-icons {\n  color: white;\n}\n.share-container .button-block .button:not(.disabled):active {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.share-container .button-block .button.manage-access-button {\n  float: left;\n  min-width: 170px;\n}\n.share-container .button-block .button.send-button,\n.share-container .button-block .button.cancel-button {\n  float: right;\n}\n.share-container .button-block .button.cancel-button,\n.share-container .button-block .button.cancel-button:hover,\n.share-container .button-block .button.cancel-button:active {\n  border: none;\n  background: none;\n}\n.share-container .send-success-message {\n  height: 100%;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  font-size: 28px;\n}\n.share-container.show-success .send-success-message {\n  display: flex;\n}\n.share-container.show-success .center-controls {\n  display: none;\n}\n.share-container.mobile-app {\n  height: 100%;\n  box-sizing: border-box;\n  padding: 16px;\n}\n.share-container.mobile-app .heading {\n  margin-bottom: 16px;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input {\n  background: transparent;\n  border: 1px solid #e0e0e0;\n  border-radius: 3px;\n  max-height: 125px;\n  overflow-y: auto;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-new input {\n  color: #464646;\n  border-color: #e0e0e0;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-new input::placeholder {\n  color: #999999;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-new input:focus::placeholder {\n  color: transparent;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-choice {\n  border-color: #e0e0e0;\n  background: transparent;\n  color: #464646;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-choice .tagit-close .text-icon {\n  color: #626262;\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-choice.error-tag {\n  background: rgba(237, 47, 2, 0.5);\n}\n.share-container.mobile-app #shareControlContainer .share-add-input .tagit-choice.error-tag .tagit-label {\n  color: #464646;\n}\n.share-container.mobile-app #shareControlContainer .share-note {\n  display: flex;\n  flex-direction: column;\n}\n.share-container.mobile-app #shareControlContainer .share-note .share-note-input {\n  background: transparent;\n  color: #464646;\n  border: 1px solid #e0e0e0;\n  border-radius: 3px;\n  resize: none;\n  -webkit-appearance: none;\n  height: auto;\n  flex-grow: 1;\n}\n.share-container.mobile-app #shareControlContainer .share-note .share-note-input::placeholder {\n  color: #999999;\n}\n.share-container.mobile-app #shareControlContainer .share-note .share-note-input:focus::placeholder {\n  color: transparent;\n}\n.share-container.mobile-app #shareControlContainer .share-note .share-include-events {\n  padding: 10px 0px;\n}\n.share-container.mobile-app #shareControlContainer .share-note .share-include-events .share-include-events-checkbox {\n  margin-right: 5px;\n}\n.share-container.mobile-app .button-block {\n  display: flex;\n  flex-direction: row;\n  height: auto;\n}\n.share-container.mobile-app .button-block .button {\n  border-color: #e0e0e0;\n  background-color: transparent;\n  width: auto;\n  height: auto;\n  float: none;\n}\n.share-container.mobile-app .button-block .button .material-icons {\n  color: #626262;\n}\n.share-container.mobile-app .button-block .button .label {\n  color: #464646;\n}\n.share-container.mobile-app .button-block .button:not(.disabled):hover {\n  background-color: #f0f0f0;\n}\n.share-container.mobile-app .button-block .button:not(.disabled):hover .material-icons {\n  color: #626262;\n}\n.share-container.mobile-app .button-block .button:not(.disabled):active {\n  background-color: #cccccc;\n}\n.share-container.mobile-app .button-block .button.manage-access-button {\n  margin-right: 16px;\n}\n.share-container.mobile-app .send-success-message {\n  color: #777777;\n}\n.tagit-autocomplete.ui-autocomplete {\n  border: none;\n  padding: 0;\n  background: #3d3d3d;\n  -webkit-box-shadow: rgba(0, 0, 0, 0.3) 0 2px 4px 0;\n  -moz-box-shadow: rgba(0, 0, 0, 0.3) 0 2px 4px 0;\n  box-shadow: rgba(0, 0, 0, 0.3) 0 2px 4px 0;\n}\n.tagit-autocomplete.ui-autocomplete .ui-menu-item a {\n  margin: 0;\n  padding: 6px 10px;\n  border: none;\n  background: none;\n  color: rgba(255, 255, 255, 0.8);\n}\n.tagit-autocomplete.ui-autocomplete .ui-menu-item a.selected {\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n}\n.tagit-autocomplete.ui-autocomplete .ui-menu-item a .suggest-icon {\n  width: auto;\n  height: auto;\n  background: none;\n  font-family: "Material Icons";\n  font-size: 18px;\n  line-height: 1;\n  position: relative;\n  top: 3px;\n}\n.tagit-autocomplete.ui-autocomplete .ui-menu-item a .suggest-icon.user::before {\n  content: "person";\n}\n.tagit-autocomplete.ui-autocomplete .ui-menu-item a .suggest-icon.invite::before {\n  content: "email";\n}\n.tagit-autocomplete.ui-autocomplete .ui-menu-item a .suggest-icon.group::before {\n  content: "people";\n}\n.tagit-autocomplete.ui-autocomplete.mobile-app {\n  background: white;\n}\n.tagit-autocomplete.ui-autocomplete.mobile-app .ui-menu-item a {\n  color: #464646;\n  -webkit-text-size-adjust: 100%;\n}\n.tagit-autocomplete.ui-autocomplete.mobile-app .ui-menu-item a.selected {\n  background: #f0f0f0;\n  color: #464646;\n}\n',"",{version:3,sources:["webpack://./../webpack/React/Shared/Components/Share.less","webpack://./../../WebCore/css/Assets/Assets.less","webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./lib/Shared.less"],names:[],mappings:"AAAA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC4NX;EACI,WAAA;AD1NJ;AC6NA;EACI,aAAA;AD3NJ;AEmKA;EACI,cAAA;EACA,YAAA;AFjKJ;AEoKA;EACI,WAAA;EACA,WAAA;AFlKJ;AEuSA;EACI,yBAAA;AFrSJ;AEwSA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AFtSJ;AEuTA;EACI,iBAAA;AFrTJ;AEuWA;EFrWE,yBAAyB;EEuWvB,qBAAA;EFrWF,YAAY;EEsWV,wBAAA;EFpWF,WAAW;AACb;AEiWI;EAAuB,aAAA;AF9V3B;AG1CA;EACI,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,WAAA;EACA,gBAAA;EACA,iBAAA;AH4CJ;AAvDA;EACI,YAAA;EACA,mBAAA;EACA,uBAAA;EACA,eAAA;EACA,aAAA;EACA,aAAA;AAyDJ;AAtDA;EAKI,aAAA;EACA,sBAAA;EACA,YAAA;AAoDJ;AA3DA;ECTI,iFAAA;EACA,gBAAA;EDmBI,eAAA;EACA,kBAAA;AAqDR;AAjEA;EAgBQ,YAAA;EACA,aAAA;EACA,sBAAA;AAoDR;AAtEA;EAsBQ,UAAA;EACA,aAAA;EACA,sBAAA;AAmDR;AA3EA;EA2BY,aAAA;EACA,mBAAA;EACA,eAAA;EACA,YAAA;EACA,kBAAA;EACA,oCAAA;EACA,gBAAA;EAEA,sBAAA;AAkDZ;AArFA;EAuCgB,kBAAA;AAiDhB;AAxFA;EA0CoB,gBAAA;EACA,cAAA;AAiDpB;AA/CoB;EACI,+BAAA;AAiDxB;AA9CoB;EACI,kBAAA;AAgDxB;AAlGA;EAyDgB,aAAA;EACA,mBAAA;EACA,0CAAA;EACA,mBAAA;EACA,oCAAA;EACA,+BAAA;EACA,YAAA;EACA,sBAAA;EACA,YAAA;AA4ChB;AA7GA;EAoEoB,mBAAA;AA4CpB;AAhHA;EAwEoB,SAAA;EACA,QAAA;EACA,SAAA;AA2CpB;AArHA;EA6EwB,eAAA;EACA,kBAAA;EACA,eAAA;EACA,+BAAA;AA2CxB;AA3HA;EAmFwB,aAAA;AA2CxB;AAvCgB;EACI,iCAAA;AAyCpB;AA1CgB;EAIQ,+BAAA;AAyCxB;AApIA;EAkGY,iBAAA;AAqCZ;AAvIA;EAuGY,aAAA;AAmCZ;AA1IA;EA2GY,UAAA;EACA,gBAAA;AAkCZ;AA9IA;EA+GgB,aAAA;AAkChB;AAjJA;EAoHgB,cAAA;EACA,WAAA;EACA,YAAA;EACA,iBAAA;EACA,SAAA;EACA,2BAAA;EACA,sBAAA;EACA,SAAA;EACA,kBAAA;EACA,oCAAA;EACA,YAAA;AAgChB;AA9BgB;EACI,+BAAA;AAgCpB;AA7BgB;EACI,kBAAA;AA+BpB;AApKA;EA4IY,wBAAA;AA2BZ;AAvKA;EAiJQ,gBAAA;EACA,WAAA;EACA,gBAAA;AAyBR;AA5KA;EGMI,OAAA;EACA,YAAA;EACA,sBAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,0CAAA;EACA,kBAAA;EACA,0CAAA;EACA,oCAAA;EACA,eAAA;EHwIQ,+BAAA;AAkCZ;AGxKI;EACI,YAAA;EACA,eAAA;AH0KR;AA9LA;EGwBQ,iBAAA;EACA,+BAAA;AHyKR;AAlMA;EG6BQ,6BAAA;EACA,YAAA;AHwKR;AGpKQ;EACI,0CAAA;AHsKZ;AGvKQ;EAIQ,YAAA;AHsKhB;AGnKQ;EACI,0CAAA;AHqKZ;AArDY;EACI,WAAA;EACA,gBAAA;AAuDhB;AArDY;;EAEI,YAAA;AAuDhB;AAlDgB;;;EACI,YAAA;EACA,gBAAA;AAsDpB;AA7NA;EA8KQ,YAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,eAAA;AAkDR;AA/CI;EAEQ,aAAA;AAgDZ;AAlDI;EAKQ,aAAA;AAgDZ;AA5CI;EACI,YAAA;EACA,sBAAA;EACA,aAAA;AA8CR;AAjDI;EAMQ,mBAAA;AA8CZ;AApDI;EAWY,uBAAA;EACA,yBAAA;EACA,kBAAA;EACA,iBAAA;EACA,gBAAA;AA4ChB;AA3DI;EAmBoB,cAAA;EACA,qBAAA;AA2CxB;AAzCwB;EACI,cAAA;AA2C5B;AAxCwB;EACI,kBAAA;AA0C5B;AArEI;EAiCgB,qBAAA;EACA,uBAAA;EACA,cAAA;AAuCpB;AA1EI;EAuCwB,cAAA;AAsC5B;AAlCoB;EACI,iCAAA;AAoCxB;AArCoB;EAIQ,cAAA;AAoC5B;AAnFI;EAsDY,aAAA;EACA,sBAAA;AAgChB;AAvFI;EA0DgB,uBAAA;EACA,cAAA;EACA,yBAAA;EACA,kBAAA;EACA,YAAA;EACA,wBAAA;EACA,YAAA;EACA,YAAA;AAgCpB;AA9BoB;EACI,cAAA;AAgCxB;AA7BoB;EACI,kBAAA;AA+BxB;AAvGI;EA6EgB,iBAAA;AA6BpB;AA1GI;EAgFoB,iBAAA;AA6BxB;AA7GI;EAuFQ,aAAA;EACA,mBAAA;EACA,YAAA;AAyBZ;AAlHI;EA4FY,qBAAA;EACA,6BAAA;EACA,WAAA;EACA,YAAA;EACA,WAAA;AAyBhB;AAzHI;EAmGgB,cAAA;AAyBpB;AA5HI;EAuGgB,cAAA;AAwBpB;AApBoB;EACI,yBAAA;AAsBxB;AAvBoB;EAIQ,cAAA;AAsB5B;AAnBoB;EACI,yBAAA;AAqBxB;AAjBgB;EACI,kBAAA;AAmBpB;AA3II;EA8HQ,cAAA;AAgBZ;AAXA;EAGI,YAAA;EACA,UAAA;EAGA,mBAAA;EE3IA,kDAAA;EACA,+CAAA;EACA,0CAAA;AFqJJ;AAnBA;EAgBQ,SAAA;EACA,iBAAA;EACA,YAAA;EACA,gBAAA;EACA,+BAAA;AAMR;AAJQ;EACI,oCAAA;EACA,YAAA;AAMZ;AA9BA;EA4BY,WAAA;EACA,YAAA;EACA,gBAAA;EACA,6BAAA;EACA,eAAA;EACA,cAAA;EACA,kBAAA;EACA,QAAA;AAKZ;AAHY;EAAiB,iBAAA;AAM7B;AALY;EAAmB,gBAAA;AAQ/B;AAPY;EAAkB,iBAAA;AAU9B;AANI;EACI,iBAAA;AAQR;AATI;EAIQ,cAAA;EACA,8BAAA;AAQZ;AANY;EACI,mBAAA;EACA,cAAA;AAQhB",sourcesContent:['@import "../../../../../WebCore/css/Assets/Assets.less";\n@import "../../../../../WebCore/css/Assets/Mixins.less";\n@import "../../../../webrecorder/lib/Shared.less";\n\n@background-color: fadeout(white, 90%);\n\n.dropbox-message {\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    font-size: @font-size-base;\n    padding: 16px;\n    display: flex;\n}\n\n.share-container {\n    @placeholder-color: rgba(255, 255, 255, 0.6);\n    @error-tag-background: rgba(237, 47, 2, 0.5);\n    @input-control-border-radius: 3px;\n\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n\n    .heading {\n        .font-light();\n        font-size: 22px;\n        margin-bottom: 6px;\n    }\n\n    .center-controls {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n    }\n\n    #shareControlContainer {\n        flex: auto;\n        display: flex;\n        flex-direction: column;\n\n        .share-add-input {\n            display: flex;\n            align-items: center;\n            flex-wrap: wrap;\n            border: none;\n            border-radius: @input-control-border-radius;\n            background: @background-color;\n            min-height: 40px;\n            // Prevent padding added elsewhere from interfering with min-height.\n            box-sizing: border-box;\n\n            .tagit-new {\n                // Override control padding.\n                padding: 0 4px 0 0;\n\n                input {\n                    background: none;\n                    color: @font-color-dark-theme;\n\n                    &::placeholder {\n                        color: @placeholder-color;\n                    }\n\n                    &:focus::placeholder {\n                        color: transparent;\n                    }\n                }\n            }\n\n            .tagit-choice {\n                @height: 30px;\n                display: flex;\n                align-items: center;\n                border: solid 1px @border-color-dark-theme;\n                border-radius: @height / 2;\n                background: @contrast-background-color-dark-theme;\n                padding: .2em 28px .2em .5em;\n                height: @height;\n                box-sizing: border-box;\n                color: white;\n\n                .tagit-label {\n                    white-space: nowrap;\n                }\n\n                .tagit-close {\n                    top: auto;\n                    right: 0;\n                    margin: 0;\n\n                    .text-icon {\n                        display: inline;\n                        padding-right: 7px;\n                        font-size: 18px;\n                        color: @icon-color-dark-theme;\n                    }\n                    .ui-icon-close {\n                        display: none;\n                    }\n                }\n\n                &.error-tag {\n                    background: @error-tag-background;\n\n                    .tagit-label {\n                        color: @placeholder-color;\n                    }\n                }\n            }\n        }\n\n        .email-status {\n            padding-top: 12px;\n        }\n\n        .share-spinner {\n            // Hide for now since the spinner assets only work on white / grey backgrounds.\n            display: none;\n        }\n\n        .share-note {\n            flex: auto;\n            margin-top: 10px;\n\n            .share-notify {\n                display: none;\n            }\n\n            .share-note-input {\n                // Prevent space from being reserved for descenders (textarea is an inline element by default).\n                display: block;\n                width: 100%;\n                height: 100%;\n                min-height: 100px;\n                margin: 0;\n                padding: 8px 10px 10px 10px;\n                box-sizing: border-box;\n                border: 0;\n                border-radius: @input-control-border-radius;\n                background: @background-color;\n                color: white;\n\n                &::placeholder {\n                    color: @placeholder-color;\n                }\n\n                &:focus::placeholder {\n                    color: transparent;\n                }\n            }\n        }\n\n        #invitationWarning {\n            // Force hide this element (ignore inline styles from $.show()).\n            display: none !important;\n        }\n    }\n\n    .button-block {\n        margin-top: @stage-padding;\n        height: 5vh;\n        min-height: 35px;\n\n        .button {\n            .post-record-large-button();\n            // Align "Send" button with left edge of "View" button further up the page.\n            width: calc(25% - (1.5 * @stage-padding));\n\n            &.manage-access-button {\n                float: left;\n                min-width: 170px;\n            }\n            &.send-button,\n            &.cancel-button {\n                float: right;\n            }\n\n            // "Unbox" the Cancel button to give it less prominence.\n            &.cancel-button {\n                &, &:hover, &:active {\n                    border: none;\n                    background: none;\n                }\n            }\n        }\n    }\n\n    .send-success-message {\n        height: 100%;\n        display: none;\n        align-items: center;\n        justify-content: center;\n        font-size: 28px;\n    }\n\n    &.show-success {\n        .send-success-message {\n            display: flex;\n        }\n        .center-controls {\n            display: none;\n        }\n    }\n\n    &.mobile-app {\n        height: 100%;\n        box-sizing: border-box;\n        padding: 16px;\n\n        .heading {\n            margin-bottom: 16px;\n        }\n\n        #shareControlContainer {\n            .share-add-input {\n                background: transparent;\n                border: 1px solid @gray-border;\n                border-radius: @input-control-border-radius;\n                max-height: 125px;\n                overflow-y: auto;\n\n                .tagit-new {\n                    input {\n                        color: @font-color;\n                        border-color: @gray-border;\n\n                        &::placeholder {\n                            color: @font-color-lightest;\n                        }\n    \n                        &:focus::placeholder {\n                            color: transparent;\n                        }\n                    }\n                }\n\n                .tagit-choice {\n                    border-color: @gray-border;\n                    background: transparent;\n                    color: @font-color;\n\n                    .tagit-close {\n                        .text-icon {\n                            color: @icon-color;\n                        }\n                    }\n\n                    &.error-tag {\n                        background: @error-tag-background;\n    \n                        .tagit-label {\n                            color: @font-color;\n                        }\n                    }\n                }\n            }\n\n            .share-note {\n                display: flex;\n                flex-direction: column;\n\n                .share-note-input {\n                    background: transparent;\n                    color: @font-color;\n                    border: 1px solid @gray-border;\n                    border-radius: @input-control-border-radius;\n                    resize: none;\n                    -webkit-appearance: none;\n                    height: auto;\n                    flex-grow: 1;\n\n                    &::placeholder {\n                        color: @font-color-lightest;\n                    }\n    \n                    &:focus::placeholder {\n                        color: transparent;\n                    }\n                }\n\n                .share-include-events {\n                    padding: 10px 0px;\n\n                    .share-include-events-checkbox {\n                        margin-right: 5px;\n                    }\n                }\n            }\n        }\n\n        .button-block {\n            display: flex;\n            flex-direction: row;\n            height: auto;\n\n            .button {\n                border-color: @gray-border;\n                background-color: transparent;\n                width: auto;\n                height: auto;\n                float: none;\n\n                .material-icons {\n                    color: @icon-color;\n                }\n            \n                .label {\n                    color: @font-color;\n                }\n            \n                &:not(.disabled) {\n                    &:hover {\n                        background-color: @gray-hover;\n            \n                        .material-icons {\n                            color: @icon-color;\n                        }\n                    }\n                    &:active {\n                        background-color: @gray-press;\n                    }\n                }\n\n                &.manage-access-button {\n                    margin-right: 16px;\n                }\n            }\n        }\n\n        .send-success-message {\n            color: @font-color-light;\n        }\n    }\n}\n\n.tagit-autocomplete.ui-autocomplete {\n    @selected-item-background: rgba(255, 255, 255, 0.1);\n\n    border: none;\n    padding: 0;\n    // [BUGBUG 74309]: This matches the translucent input area, but we should find a way to reconcile with HIG greys.\n    // This needs to be opaque to occlude controls behind the menu.\n    background: #3d3d3d;\n    .box-shadow(\n        @color: rgba(0, 0, 0, 0.3),\n        @h-shadow: 0,\n        @v-shadow: 2px,\n        @blur: 4px,\n        @spread: 0);\n\n    .ui-menu-item a {\n        margin: 0;\n        padding: 6px 10px;\n        border: none;\n        background: none;\n        color: @font-color-secondary-dark-theme;\n\n        &.selected {\n            background: @selected-item-background;\n            color: white;\n        }\n\n        .suggest-icon {\n            width: auto;\n            height: auto;\n            background: none;\n            font-family: "Material Icons";\n            font-size: 18px;\n            line-height: 1;\n            position: relative;\n            top: 3px;\n\n            &.user::before { content: "person"; }\n            &.invite::before { content: "email"; }\n            &.group::before { content: "people"; }\n        }\n    }\n\n    &.mobile-app {\n        background: white;\n\n        .ui-menu-item a {\n            color: @font-color;\n            -webkit-text-size-adjust: 100%;\n\n            &.selected {\n                background: @gray-hover;\n                color: @font-color;\n            }\n        }\n    }\n}\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n','@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n',"@control-bar-relative-height: 15%;\n@control-bar-min-height: 50px;\n@control-bar-max-height: 200px;\n@stage-transition-duration: 1s;\n@stage-padding: 12px;\n\n@border-color: fadeout(white, 80%);\n@background-color: fadeout(white, 90%);\n@background-color-hover: fadeout(white, 80%);\n@background-color-active: fadeout(white, 70%);\n\n.control-bar {\n    position: relative;\n    display: flex;\n    align-items: center;\n    height: @control-bar-relative-height;\n    min-height: @control-bar-min-height;\n    max-height: @control-bar-max-height;\n}\n\n.post-record-large-button() {\n    flex: 1;\n    height: 100%;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: solid 1px @border-color;\n    border-radius: 5px;\n    background-color: @background-color;\n    transition: color 0.1s, opacity 0.2s;\n    cursor: pointer;\n\n    &.disabled {\n        opacity: 0.5;\n        cursor: default;\n    }\n\n    .material-icons {\n        margin-right: @stage-padding / 2;\n        color: @icon-color-dark-theme;\n    }\n\n    .label {\n        font-size: calc(14px + 0.4vh);\n        color: white;\n    }\n\n    &:not(.disabled) {\n        &:hover {\n            background-color: @background-color-hover;\n\n            .material-icons {\n                color: white;\n            }\n        }\n        &:active {\n            background-color: @background-color-active;\n        }\n    }\n}\n\n.post-record-sidecar-button() {\n    flex: none;\n    height: 100%;\n    padding: 0 0.4vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: @stage-padding;\n    background: @background-color;\n    transition: background-color 0.2s;\n    cursor: pointer;\n\n    &:hover {\n        background-color: @background-color-hover;\n        color: white;\n    }\n    &:active {\n        background-color: @background-color-active;\n    }\n}\n"],sourceRoot:""}]),t.a=i},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var a={},i={};function s(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function c(e,t){if(isNaN(e))return t?y:b;if(t){if(e<0)return y;if(e>=f)return w}else{if(e<=-m)return C;if(e+1>=m)return k}return e<0?c(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=c,r.fromBits=u;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var o=c(l(n,8)),a=b,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),u=parseInt(e.substring(i,i+s),n);if(s<8){var p=c(l(n,s));a=a.mul(p).add(c(u))}else a=(a=a.mul(o)).add(c(u))}return a.unsigned=t,a}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=p;var h=4294967296,f=h*h,m=f/2,g=s(1<<24),b=s(0);r.ZERO=b;var y=s(0,!0);r.UZERO=y;var A=s(1);r.ONE=A;var v=s(1,!0);r.UONE=v;var x=s(-1);r.NEG_ONE=x;var k=u(-1,2147483647,!1);r.MAX_VALUE=k;var w=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=w;var C=u(0,-2147483648,!1);r.MIN_VALUE=C;var S=r.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=c(l(e,6),this.unsigned),a=this,i="";;){var s=a.div(o),u=(a.sub(s.mul(o)).toInt()>>>0).toString(e);if((a=s).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return o(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(o(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(A)},S.neg=S.negate,S.add=function(e){o(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,i=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=a+(65535&e.low))>>>16,d+=(h+=r+c)>>>16,l+=(d+=n+s)>>>16,l+=t+i,u((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return o(e)||(e=p(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return b;if(o(e)||(e=p(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(C))return e.isOdd()?C:b;if(e.eq(C))return this.isOdd()?C:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,a=this.low>>>16,i=65535&this.low,s=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,m=0,y=0,A=0;return y+=(A+=i*h)>>>16,m+=(y+=a*h)>>>16,y&=65535,m+=(y+=i*d)>>>16,f+=(m+=r*h)>>>16,m&=65535,f+=(m+=a*d)>>>16,m&=65535,f+=(m+=i*l)>>>16,f+=t*h+r*d+a*l+i*s,u((y&=65535)<<16|(A&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(o(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,r,a;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;a=y}else{if(this.eq(C))return e.eq(A)||e.eq(x)?C:e.eq(C)?A:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?A:x:(r=this.sub(e.mul(t)),a=t.add(r.div(e)));if(e.eq(C))return this.unsigned?y:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),s=i<=48?1:l(2,i-48),d=c(t),h=d.mul(e);h.isNegative()||h.gt(r);)h=(d=c(t-=s,this.unsigned)).mul(e);d.isZero()&&(d=A),a=a.add(d),r=r.sub(h)}return a},S.div=S.divide,S.modulo=function(e){return o(e)||(e=p(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(e){return o(e)||(e=p(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return o(e)||(e=p(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return o(e)||(e=p(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,'/* Constants / styles used across the product */\n/* Fonts */\n/* Sizes */\n/* Font Colors */\n/* Font Colors (Accessibility) */\n/* "Dark Theme" Colors */\n/* Colors */\n/* For gradient buttons */\n/* Small Thumbnail */\n/* Volume preview specific colors */\n/* Opacities */\n/* Borders */\n/* Common measurements */\n/* Images */\n/* Transitions */\n/* Mobile */\n/* Embed */\n/* Material icons */\n/* Resets */\nbody {\n  margin: 0px;\n}\n.clicked {\n  outline: none;\n}\n.break {\n  display: block;\n  height: 15px;\n}\n.clear {\n  clear: both;\n  height: 0px;\n}\n.error {\n  color: #990000 !important;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.attention {\n  font-weight: bold;\n}\n.hidden-scrollbar {\n  /* Chrome/Safari/Webkit */\n  scrollbar-width: none;\n  /* Firefox */\n  -ms-overflow-style: none;\n  /* IE 10+ */\n}\n.hidden-scrollbar::-webkit-scrollbar {\n  display: none;\n}\n.control-bar {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 15%;\n  min-height: 50px;\n  max-height: 200px;\n}\n.settings-container {\n  position: relative;\n  height: 100%;\n  padding: 3vh 3vw;\n  box-sizing: border-box;\n  font-size: 16px;\n  color: white;\n  overflow: auto;\n  scrollbar-width: thin;\n  scrollbar-color: #464646 black;\n  -ms-scrollbar-face-color: #464646;\n  -ms-scrollbar-highlight-color: black;\n  -ms-scrollbar-shadow-color: black;\n  -ms-scrollbar-arrow-color: black;\n}\n.settings-container::-webkit-scrollbar {\n  background-color: black;\n  width: 8px;\n}\n.settings-container::-webkit-scrollbar-thumb {\n  background-color: #464646;\n  border-radius: 5px;\n}\n.settings-container .section {\n  margin-bottom: 40px;\n}\n.settings-container .header {\n  font-size: 22px;\n  margin-bottom: 24px;\n}\n.settings-container .contents {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.settings-container .contents.has-image-radio-button {\n  margin-bottom: -12px;\n}\n.settings-container .contents.has-image-radio-button .column {\n  margin-right: 12px;\n  margin-bottom: 12px;\n}\n.settings-container .contents .column {\n  margin-right: 24px;\n}\n.settings-container label {\n  display: flex;\n  align-items: center;\n}\n.settings-container input.material-icons {\n  width: 1em;\n  height: 1em;\n}\n.settings-container .disabled {\n  opacity: 0.5;\n}\n.settings-container input[type=checkbox],\n.settings-container input[type=radio] {\n  flex: none;\n  margin-right: 8px;\n}\n.settings-container input[type=checkbox] {\n  -webkit-appearance: unset;\n  -moz-appearance: none;\n  position: relative;\n  color: rgba(255, 255, 255, 0.8);\n  border: none;\n  background-color: transparent;\n}\n.settings-container input[type=checkbox]::before {\n  content: "";\n  position: absolute;\n  top: 3px;\n  right: 3px;\n  bottom: 3px;\n  left: 3px;\n  border-radius: 3px;\n  background: none;\n}\n.settings-container input[type=checkbox]::after {\n  content: "check_box_outline_blank";\n  position: absolute;\n}\n.settings-container input[type=checkbox]:checked::after {\n  content: "check_box";\n}\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  .settings-container input[type=checkbox] {\n    left: 3px;\n    top: 3px;\n    width: 18px;\n    height: 18px;\n  }\n}\n@supports (-ms-ime-align: auto) {\n  .settings-container input[type=checkbox] {\n    left: 3px;\n    top: 3px;\n    width: 18px;\n    height: 18px;\n  }\n}\n.settings-container input[type=radio] {\n  -webkit-appearance: unset;\n  -moz-appearance: none;\n  position: relative;\n  color: rgba(255, 255, 255, 0.8);\n  border: none;\n  background-color: transparent;\n}\n.settings-container input[type=radio]::before {\n  content: "";\n  position: absolute;\n  top: 3px;\n  right: 3px;\n  bottom: 3px;\n  left: 3px;\n  border-radius: 3px;\n  background: none;\n}\n.settings-container input[type=radio]::after {\n  content: "radio_button_unchecked";\n  position: absolute;\n}\n.settings-container input[type=radio]:checked::after {\n  content: "radio_button_checked";\n}\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  .settings-container input[type=radio] {\n    left: 3px;\n    top: 3px;\n    width: 18px;\n    height: 18px;\n  }\n}\n@supports (-ms-ime-align: auto) {\n  .settings-container input[type=radio] {\n    left: 3px;\n    top: 3px;\n    width: 18px;\n    height: 18px;\n  }\n}\n.settings-container .smart-camera-activate-button {\n  display: inline-block;\n  margin: 24px;\n  margin-left: 0;\n  padding: 8px 10px;\n  background: rgba(255, 255, 255, 0.9);\n  color: black;\n  border-radius: 3px;\n  cursor: pointer;\n}\n.settings-container .loading-spinner {\n  display: inline-block;\n  vertical-align: middle;\n  position: relative;\n  left: -8px;\n  margin-right: -4px;\n}\n.settings-container .course-select-text {\n  font-size: 3vh;\n  padding: 8px;\n  padding-bottom: 32px;\n}\n.settings-container .course-item {\n  font-size: 2vh;\n  padding: 12px;\n  border: solid 1px rgba(255, 255, 255, 0.3);\n  border-radius: 5px;\n  cursor: pointer;\n}\n.settings-container .course-item:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n.settings-container .no-courses-message {\n  font-size: calc(16px + 1vh);\n  font-style: italic;\n  color: rgba(255, 255, 255, 0.8);\n  padding: 36px;\n}\n.settings-container .background-label {\n  display: flex;\n}\n.settings-container .background-label .beta-label {\n  font-size: 12px;\n  margin-left: 8px;\n}\n.help-menu-container {\n  position: absolute;\n  top: 1vh;\n  right: 1vh;\n}\n.help-menu-container .help-menu {\n  position: relative;\n}\n.help-menu-container .help-menu .help-button {\n  width: 27px;\n  height: 27px;\n  padding: 3px;\n  border-radius: calc((27px / 2) + 3px);\n  transition-property: color, background-color;\n  transition-duration: 0.1s;\n  color: rgba(255, 255, 255, 0.8);\n  user-select: none;\n  cursor: pointer;\n}\n.help-menu-container .help-menu .help-button i {\n  font-size: 27px;\n  pointer-events: none;\n}\n.help-menu-container .help-menu .help-button.active,\n.help-menu-container .help-menu .help-button:hover {\n  background-color: #626262;\n  color: white;\n}\n.help-menu-container .help-menu .popup-menu {\n  position: absolute;\n  top: calc(27px + (2 * 3px) + 4px);\n  right: 0;\n  padding: 3px 0;\n  background: #ffffff;\n  min-width: 120px;\n  border-radius: 3px;\n}\n.help-menu-container .help-menu .popup-menu > div {\n  padding: 6px 12px;\n  background-color: #ffffff;\n  font-size: 14px;\n  white-space: nowrap;\n  color: #464646;\n  transition: background-color 0.2s;\n  user-select: none;\n  cursor: pointer;\n}\n.help-menu-container .help-menu .popup-menu > div:hover {\n  background-color: rgba(0, 0, 0, 0.1);\n  color: black;\n}\n',"",{version:3,sources:["webpack://./lib/Components/Settings.less","webpack://./../../WebCore/css/Assets/Assets.less","webpack://./../../WebCore/css/Assets/Mixins.less","webpack://./lib/Shared.less","webpack://./lib/Components/HelpMenu.less"],names:[],mappings:"AAAA,+CAA+C;AAC/C,UAAU;AACV,UAAU;AACV,gBAAgB;AAChB,gCAAgC;AAChC,wBAAwB;AACxB,WAAW;AACX,yBAAyB;AACzB,oBAAoB;AACpB,mCAAmC;AACnC,cAAc;AACd,YAAY;AACZ,wBAAwB;AACxB,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,UAAU;AACV,mBAAmB;AACnB,WAAW;AC4NX;EACI,WAAA;AD1NJ;AC6NA;EACI,aAAA;AD3NJ;AEmKA;EACI,cAAA;EACA,YAAA;AFjKJ;AEoKA;EACI,WAAA;EACA,WAAA;AFlKJ;AEuSA;EACI,yBAAA;AFrSJ;AEwSA;EACI,mBAAA;EACA,gBAAA;EACA,uBAAA;AFtSJ;AEuTA;EACI,iBAAA;AFrTJ;AEuWA;EFrWE,yBAAyB;EEuWvB,qBAAA;EFrWF,YAAY;EEsWV,wBAAA;EFpWF,WAAW;AACb;AEiWI;EAAuB,aAAA;AF9V3B;AG1CA;EACI,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,WAAA;EACA,gBAAA;EACA,iBAAA;AH4CJ;AAxDA;EACI,kBAAA;EACA,YAAA;EACA,gBAAA;EACA,sBAAA;EACA,eAAA;EACA,YAAA;EAEA,cAAA;EEmXA,qBAAA;EACA,8BAAA;EAEA,iCAAA;EACA,oCAAA;EACA,iCAAA;EACA,gCAAA;AF1TJ;AE4TI;EACI,uBAAA;EACA,UAAA;AF1TR;AE4TI;EACI,yBAAA;EACA,kBAAA;AF1TR;AA/EA;EAaQ,mBAAA;AAqER;AAlFA;EAiBQ,eAAA;EACA,mBAAA;AAoER;AAtFA;EAsBQ,aAAA;EACA,mBAAA;EACA,eAAA;AAmER;AAjEQ;EAMI,oBAAA;AA8DZ;AApEQ;EAEQ,kBAAA;EACA,mBAAA;AAqEhB;AAlGA;EAoCY,kBAAA;AAiEZ;AArGA;EAyCQ,aAAA;EACA,mBAAA;AA+DR;AAzGA;EA8CQ,UAAA;EACA,WAAA;AA8DR;AA7GA;EAoDQ,YAAA;AA4DR;AAhHA;;EAyDQ,UAAA;EACA,iBAAA;AA2DR;AArHA;EEkwBI,yBAAA;EACA,qBAAA;EACA,kBAAA;EACA,+BAAA;EAIA,YAAA;EACA,6BAAA;AF7oBJ;AE+oBI;EACI,WAAA;EACA,kBAAA;EACA,QAAA;EACA,UAAA;EACA,WAAA;EACA,SAAA;EACA,kBAAA;EACA,gBAAA;AF7oBR;AEgpBI;EACI,kCAAA;EACA,kBAAA;AF9oBR;AEgpBI;EACI,oBAAA;AF9oBR;AEhJI;EAAA;IAkyBI,SAAA;IACA,QAAA;IACA,WAAA;IACA,YAAA;EF9oBN;AACF;AElJI;EAAA;IA4xBI,SAAA;IACA,QAAA;IACA,WAAA;IACA,YAAA;EFtoBN;AACF;AA9JA;EE6yBI,yBAAA;EACA,qBAAA;EACA,kBAAA;EACA,+BAAA;EAIA,YAAA;EACA,6BAAA;AF/oBJ;AEipBI;EACI,WAAA;EACA,kBAAA;EACA,QAAA;EACA,UAAA;EACA,WAAA;EACA,SAAA;EACA,kBAAA;EACA,gBAAA;AF/oBR;AEkpBI;EACI,iCAAA;EACA,kBAAA;AFhpBR;AEkpBI;EACI,+BAAA;AFhpBR;AEzLI;EAAA;IA60BI,SAAA;IACA,QAAA;IACA,WAAA;IACA,YAAA;EFhpBN;AACF;AE3LI;EAAA;IAu0BI,SAAA;IACA,QAAA;IACA,WAAA;IACA,YAAA;EFxoBN;AACF;AAvMA;EAoEQ,qBAAA;EACA,YAAA;EACA,cAAA;EACA,iBAAA;EACA,oCAAA;EACA,YAAA;EACA,kBAAA;EACA,eAAA;AAsIR;AAjNA;EA+EQ,qBAAA;EACA,sBAAA;EACA,kBAAA;EACA,UAAA;EACA,kBAAA;AAqIR;AAxNA;EAuFQ,cAAA;EACA,YAAA;EACA,oBAAA;AAoIR;AA7NA;EA6FQ,cAAA;EACA,aAAA;EACA,0CAAA;EACA,kBAAA;EACA,eAAA;AAmIR;AAjIQ;EACI,oCAAA;AAmIZ;AAvOA;EAyGQ,2BAAA;EACA,kBAAA;EACA,+BAAA;EACA,aAAA;AAiIR;AA7OA;EAgHQ,aAAA;AAgIR;AAhPA;EAmHY,eAAA;EACA,gBAAA;AAgIZ;AA3HA;EAEI,kBAAA;EACA,QAAA;EACA,UAAA;AA4HJ;AAhIA;EI1HY,kBAAA;AJ6PZ;AAnIA;EIvHgB,WAAA;EACA,YAAA;EACA,YAAA;EACA,qCAAA;EACA,4CAAA;EACA,yBAAA;EACA,+BAAA;EACA,iBAAA;EACA,eAAA;AJ6PhB;AA9IA;EI5GoB,eAAA;EACA,oBAAA;AJ6PpB;AI1PgB;;EAEI,yBAAA;EACA,YAAA;AJ4PpB;AAvJA;EI9FgB,kBAAA;EACA,iCAAA;EACA,QAAA;EACA,cAAA;EACA,mBAAA;EACA,gBAAA;EACA,kBAAA;AJwPhB;AItPgB;EACI,iBAAA;EACA,yBAAA;EACA,eAAA;EACA,mBAAA;EACA,cAAA;EACA,iCAAA;EACA,iBAAA;EACA,eAAA;AJwPpB;AItPoB;EACI,oCAAA;EACA,YAAA;AJwPxB",sourcesContent:['@import "../../../../WebCore/css/Assets/Assets.less";\n@import "../../../../WebCore/css/Assets/Mixins.less";\n@import "../Shared.less";\n@import "./HelpMenu.less";\n\n.settings-container {\n    position: relative;\n    height: 100%;\n    padding: 3vh 3vw;\n    box-sizing: border-box;\n    font-size: 16px;\n    color: white;\n    // Scroll if needed.\n    overflow: auto;\n    // Use a custom "dark theme" scroll bar.\n    .custom-scrollbar(@thumb-color: @font-color, @track-color: black);\n\n    .section {\n        margin-bottom: 40px;\n    }\n\n    .header {\n        font-size: 22px;\n        margin-bottom: 24px;\n    }\n\n    .contents {\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n\n        &.has-image-radio-button {\n            .column {\n                margin-right: 12px;\n                margin-bottom: 12px;\n            }\n\n            margin-bottom: -12px;\n        }\n\n        .column {\n            margin-right: 24px;\n        }\n    }\n\n    label {\n        display: flex;\n        align-items: center;\n    }\n\n    input.material-icons {\n        width: 1em;\n        height: 1em;\n    }\n\n    .disabled\n    {\n        opacity: 0.5;\n    }\n\n    input[type=checkbox],\n    input[type=radio] {\n        flex: none;\n        margin-right: 8px;\n    }\n    input[type=checkbox] {\n        .material-checkbox(@color: @icon-color-dark-theme, @background: none);\n    }\n    input[type=radio] {\n        .material-radio(@color: @icon-color-dark-theme, @background: none);\n    }\n\n    .smart-camera-activate-button {\n        display: inline-block;\n        margin: 24px;\n        margin-left: 0;\n        padding: 8px 10px;\n        background: rgba(255,255,255,0.9);\n        color: black;\n        border-radius: 3px;\n        cursor: pointer;\n    }\n\n    .loading-spinner {\n        display: inline-block;\n        vertical-align: middle;\n        position: relative;\n        left: -8px;\n        margin-right: -4px;\n    }\n\n    .course-select-text {\n        font-size: 3vh;\n        padding: 8px;\n        padding-bottom: 32px;\n    }\n\n    .course-item {\n        font-size: 2vh;\n        padding: 12px;\n        border: solid 1px rgba(255, 255, 255, 0.3);\n        border-radius: 5px;\n        cursor: pointer;\n\n        &:hover {\n            background: rgba(255, 255, 255, 0.1);\n        }\n    }\n\n    .no-courses-message {\n        font-size: calc(16px + 1vh);\n        font-style: italic;\n        color: rgba(255, 255, 255, 0.8);\n        padding: 36px;\n    }\n\n    .background-label {\n        display: flex;\n\n        .beta-label {\n            font-size: 12px;\n            margin-left: 8px;\n        }\n    }\n}\n\n.help-menu-container\n{\n    position: absolute;\n    top: 1vh;\n    right: 1vh;\n\n    #webRecorder.help-menu(@button-size: 27px, @button-padding: 3px);\n}\n','/* Constants / styles used across the product */\n\n/* Fonts */\n@font: Segoe UI, Helvetica, sans-serif;\n@font-semibold: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n.font-light() {\n    font-family: Segoe UI Light, HelveticaNeue-Light, Segoe UI, Helvetica, sans-serif;\n    font-weight: 100; // FF doesn\'t include Segoe UI Light, font-weight lighter approximates it.\n}\n.font-semibold() {\n    font-family: Segoe UI Semibold, Helvetica Neue, Segoe UI, Helvetica, sans-serif;\n    font-weight: 600;\n}\n\n@font-size-base: 16px;\n@font-size-medium: 1.45em;\n@font-size-large: 1.5em;\n@font-size-big-title: 1.7em;\n@font-size-small: .8em;\n@font-size-xsmall: .7em;\n@font-size-extra-large: 2.1em;\n@font-size-huge: 3.0em;\n// Our website uses this as its base\n@font-size-website-base: 13px;\n// These are basic font sizes used by the recorder. We should start making all of these consistent\n@font-size-title: 1.3em;\n@font-size-header: 1.2em;\n@font-size-command-button: 1.1em;\n@font-size-subtitle: .9em;\n@font-size-option: .8em;\n@font-size-button: .7em;\n\n@icon-size-without-text: 24px;\n@icon-size-with-text: 18px;\n\n/* Sizes */\n@site-min-width: 1004px;\n\n@small-logo-max-width: 265px;\n@small-logo-max-height: 23px;\n@large-logo-max-width: 340px;\n@large-logo-max-height: 50px;\n\n// Preferred hit target size for touch interfaces.\n@touch-target-size: 48px;\n// Smaller touch target size for tightly constrained contexts.\n@touch-target-size-small: 40px;\n\n@button-spacing: 10px;\n\n/* Font Colors */\n@font-color-primary: #009900;\n@font-color-secondary: #466c2c;\n@font-color-link: #0099CC;\n\n@font-color-error: #990000;\n@font-color-dark: #000000;\n@font-color: #464646;\n@font-color-light: #777777;\n@font-color-lightest: #999999;\n@font-color-light-background: #b8b8b8;\n@font-light-gray: #aaaaaa;\n\n/* Font Colors (Accessibility) */\n@font-color-light-white-background: #767676;\n\n/* "Dark Theme" Colors */\n@overlay-background-color: rgba(0, 0, 0, 0.8);\n@icon-color-dark-theme: rgba(255, 255, 255, 0.8);\n@icon-color-active-dark-theme: white;\n@tab-highlight-color-dark-theme: rgba(255, 255, 255, 0.8);\n@border-color-dark-theme: rgba(255, 255, 255, 0.2);\n@font-color-dark-theme: rgba(255, 255, 255, 1);\n@font-color-secondary-dark-theme: rgba(255, 255, 255, 0.8);\n@hover-background-color-dark-theme: rgba(255, 255, 255, 0.1);\n@contrast-background-color-dark-theme: rgba(255, 255, 255, 0.2);\n\n/* Colors */\n@blue-selected: #aedcf1;\n\n@white-bright: #e6e6e6;\n@pure-white: #ffffff;\n\n@red: #bd4f4f;\n@red-medium: #a04242;\n@red-dark: #8c3939;\n@red-light: #ebcaca;\n@red-bright: #dd3217;\n\n@green: #54bf6d;\n@green-medium: #1d8f37;\n@green-dark: #185e0d;\n@green-light: #92c88a;\n@green-background: #eef5f0;\n@green-sunny: #719f46;\n@green-shady: #48761d;\n\n// Branded Panopto Green. Do _NOT_ use this for areas that should be affected by branding\n@panopto-green: #30733F;\n\n@icon-color: #626262;\n@header-color: #f5f5f5;\n@header-dropdown-background-color: White;\n@focused-background-color: #e8e8e8;\n@gray-border: #e0e0e0;\n@gray-light: #d6d6d6;\n@gray-hover: #f0f0f0;\n@gray-very-light: #f2f2f2;\n@gray-hint: #f5f5f5;\n@gray-press: #cccccc;\n@gray-dark: #999999;\n@gray-header: #666;\n@gray-shadow: #888;\n@gray-future: #f2f2f2;\n@dark-selected: #8b8b8b;\n@gray-divider: #989898;\n@light-selected: #dbdbdb;\n@gray-silver: #e7e7e7;\n@gray-disabled: #ebebe4;\n@gray-button-hover: #e5e5e5;\n@gray-transparent: rgba(0,0,0,0.2);\n@gray-transparent-subtle: rgba(0,0,0,0.1);\n@gray-transparent-light: rgba(0,0,0,0.3);\n@gray-transparent-medium: rgba(0,0,0,0.5);\n@gray-transparent-dark: rgba(0,0,0,0.6);\n@gray-dark-shadow: rgba(0,0,0,0.7);\n@gray-darker-shadow: rgba(0,0,0,0.8);\n@gray-watermark: gray;\n@letterbox-color: black;\n@rr-letterbox-color: #3f3f3f;\n@material-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14),\n                      0 1px 18px 0 rgba(0,0,0,.12),\n                      0 3px 5px -1px rgba(0,0,0,.20);\n\n@background-warning: orange;\n\n@yellow: #feffc9;\n\n@stored-quota-foreground: #B56F90;\n@stored-quota-background: #B56F90;\n@delivered-quota-foreground: #4798D0;\n@delivered-quota-background: #4798D0;\n\n@drop-target-background: rgba(231, 239, 254, 0.5);\n@drop-target-background-invalid: fadeout(white, 20%);\n@drop-target-border: fadeout(#4384f4, 57%);\n\n/* For gradient buttons */\n\n/* Small Thumbnail */\n@small-thumbnail-cell-width: 120px;\n@small-thumbnail-height: 60px;\n@small-thumbnail-width: (16 / 9) * @small-thumbnail-height;\n\n/* Volume preview specific colors */\n@neutral-color: #0098cc;\n@loud-color: #9d0b0b;\n@quiet-color: #ffa900;\n@neutral-text-color: #019acd;\n@loud-text-color: #8a1d1d;\n@quiet-text-color: #d08e0b;\n@loud-warning-color: #cf8787;\n@quiet-warning-color: #ffd57f;\n@loud-border: #7fcce6;\n\n/* Opacities */\n@button-opacity: .6;\n@button-hover-opacity: .8;\n@button-active-opacity: 1.0;\n@button-disabled: .3;\n\n/* Borders */\n@input-border-edit: 1px solid #959595;\n@input-border-hover: 1px solid #cdcdcd;\n@input-border-white: 1px solid White;\n@header-dropdown-border: 1px solid #cccccc;\n@input-border-light: 1px solid #cccccc;\n@input-border-extra-light: 1px solid @gray-border;\n\n/* Common measurements */\n\n// The height of most of our modal inputs\n@input-height: 28px;\n\n/* Images */\n@spinner-path: "Spinner/";\n@spinner-large: "large-comet-animation-grey.gif";\n@spinner-small-white: "spinner_small_white.gif";\n@spinner-small-beige: "spinner_small_eee.gif";\n\n@spinner-large-themable: "spinner_large_themable.png";\n@spinner-small-white-themable: "spinner_small_themable_white.png";\n@spinner-small-beige-themable: "spinner_small_themable_eee.png";\n@spinner-small-gray-themable: "spinner_small_themable_e0e0e0.png";\n\n/* Transitions */\n@viewer-transition: all .125s ease-in-out;\n\n/* Mobile */\n\n// Google recommends a base of 16px\n// https://developers.google.com/speed/docs/insights/UseLegibleFontSizes?hl=en\n@mobile-base-size: 16px;\n\n// Maybe we want to change this to a hex code later\n// so for now use yellow and we can change it easier\n@mobile-font-warning: yellow;\n@mobile-background-disabled: rgb(187, 187, 187);\n\n// Mobile query constants\n\n// "almost" is one less then actual width,\n// "almost" queries should be used for max-width \n// actual queries should be used for min-width\n// By keeping those consistent we can be sure that the layout\n// doesn\'t do funky things on the pixel between the two\n// and we won\'t need to consider which media query comes first\n// NOTE: The parens around the following bits are necessary, LESS generates invalid CSS without them.\n@ipad4-portrait-width: 320px;\n@iphone5-landscape-width: 568px;\n@iphone6-portrait-width: 375px;\n\n@almost-iphone6-portrait-width: (@iphone6-portrait-width - 1);\n\n@ipad-mini-portrait-width: 768px;\n@almost-ipad-mini-portrait-width: (@ipad-mini-portrait-width - 1);\n\n@nexus7-landscape-width: 960px;\n@almost-nexus7-landscape-width: (@nexus7-landscape-width - 1);\n\n/* Embed */\n@defaultEmbedWidth: 720px;\n@defaultEmbedHeight: 405px;\n\n/* Material icons */\n@checkbox-glyph-inset: 3px;\n\n/* Resets */\nbody {\n    margin: 0px;\n}\n\n.clicked {\n    outline: none;\n}\n','@small-loading-indicator-length: 16px;\n\n.ie-only (@rules) {\n    @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n        @rules();\n    }\n}\n\n.edge-only (@rules) {\n    @supports (-ms-ime-align: auto) {\n        @rules();\n    }\n}\n\n.border-radius (@radius) {\n    -webkit-border-radius: @radius;\n    -moz-border-radius: @radius;\n    border-radius: @radius;\n}\n\n.box-sizing (@sizing) {\n    box-sizing: @sizing;\n    -moz-box-sizing: @sizing;\n}\n\n// Prevents anti aliasing\n// http://stackoverflow.com/questions/14068103/disable-antialising-when-scaling-images\n.prevent-anti-aliasing () {\n    // The browser will ignore the lines it can\'t understand\n    // and so it works to have the same property listed multiple times\n    image-rendering: optimizeSpeed;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: -o-crisp-edges;\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: pixelated;\n    image-rendering: optimize-contrast;\n    -ms-interpolation-mode: nearest-neighbor;\n}\n\n.user-select(@select) {\n    -webkit-touch-callout: @select;\n    -webkit-user-select: @select;\n    -khtml-user-select: @select;\n    -moz-user-select: @select;\n    -ms-user-select: @select;\n    user-select: @select;\n}\n\n.background-image-gradient (@deg, @color-bottom, @color-top) {\n    background-image: -webkit-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -ms-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n    background-image: -moz-linear-gradient(@deg, @color-bottom 0%, @color-top 100%);\n}\n\n.background-complex-gradient (@deg, @color-first, @color-second, @color-third, @color-fourth) {\n    background-image: -webkit-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -ms-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n    background-image: -moz-linear-gradient(@deg, @color-first, @color-second, @color-third, @color-fourth);\n}\n\n// Block-level elements with known dimensions can be centered within positioned parents.\n.center-block(@width, @height, @h-offset: 0, @v-offset: 0) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    // Block origin is centered by the above, shift by half height / width to align block center with container center.\n    margin-left: -(@width / 2) + @h-offset;\n    margin-top: -(@height / 2) + @v-offset;\n    width: @width;\n    height: @height;\n}\n\n.clickable () {\n    &:hover {\n        cursor: pointer;\n    }\n}\n\n.access-icons(@length) {\n    .access-item-icon(@image) {\n        .icon("Share/", @image, @length, @length);\n    }\n\n    &.invite {\n        .access-item-icon("icon_email.png");\n    }\n\n    &.group {\n        .access-item-icon("icon_group.png");\n    }\n\n    &.user {\n        .access-item-icon("icon_user.png");\n    }\n}\n\n.pressable (@background-highlight, @background-pressed, @cursor: default) {\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n    }\n    &:focus {\n        background-color: @background-highlight;\n    }\n    &:active {\n        background-color: @background-pressed;\n    }\n}\n\n.hoverable (@background-highlight, @background-pressed, @cursor: default) {\n    .transition(background-color .15s);\n    &:hover {\n        background-color: @background-highlight;\n        cursor: @cursor;\n        .transition(background-color .15s);\n    }\n    &:active {\n        background-color: @background-pressed;\n        .transition(background-color .15s);\n    }\n}\n\n// @child-class-string needs to the the class selector without the \'.\', LESS allows us to pass strings but not complete selectors\n// http://stackoverflow.com/questions/19602812/less-mixin-a-variable-class-name\n.hoverable-child (@child-class-string, @background-parent-highlight, @background-child-highlight, @background-pressed, @cursor: default) {\n    &:hover .@{child-class-string} {\n        background-color: @background-parent-highlight;\n        .transition(background-color .15s);\n    }\n    .@{child-class-string} {\n        .hoverable(@background-child-highlight, @background-pressed, @cursor);\n    }\n}\n\n.hoverable-opacity() {\n    opacity: @button-opacity;\n\n    &:hover, &:focus {\n        opacity: @button-hover-opacity;\n    }\n\n    &:active {\n        opacity: @button-active-opacity;\n    }\n}\n\n.background-image(@root, @image, @repeat: no-repeat, @align: center) {\n    background-image: ~"url(\'@{image-path}@{root}@{image}\')";\n    background-repeat: @repeat;\n    background-position: @align;\n}\n\n.icon (@root, @image, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .background-image(@root, @image, @repeat, @align);\n    width: @width;\n    height: @height;\n}\n\n.transition(@params) {\n    -webkit-transition: @params;\n    -moz-transition: @params;\n    -ms-transition: @params;\n    -o-transition: @params;\n    transition: @params;\n}\n\n.transform(@params) {\n    transform: @params;\n    -ms-transform: @params;\n    -webkit-transform: @params;\n}\n\n.pressable-icon(@root, @image, @image-hover, @image-press, @width: auto, @height: auto, @repeat: no-repeat, @align: center) {\n    .icon(@root, @image, @width, @height, @repeat, @align);\n\n    &:hover {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n        cursor: default;\n    }\n    &:focus {\n        .icon(@root, @image-hover, @width, @height, @repeat, @align);\n    }\n    &:active {\n        .icon(@root, @image-press, @width, @height, @repeat, @align);\n    }\n}\n\n.break {\n    display: block;\n    height:  15px;\n}\n\n.clear {\n    clear: both;\n    height: 0px;\n}\n\n.box-shadow(none) {\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n    box-shadow: none;\n}\n\n.box-shadow(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread;\n}\n\n.box-shadow-inset(@color, @h-shadow, @v-shadow, @blur, @spread) {\n    -webkit-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    -moz-box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n    box-shadow: @color @h-shadow @v-shadow @blur @spread inset;\n}\n\n.borders(@top-color, @right-color, @bottom-color, @left-color) {\n    border-top:1px solid @top-color;\n    border-right: 1px solid @right-color;\n    border-bottom:1px solid @bottom-color;\n    border-left:1px solid @left-color;\n}\n\n.rotating-animation() {\n    // IE and FF support the w3 standard keyframes\n    @keyframes rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n    // Chrome and Safari need special webkit\n    @-webkit-keyframes rotate {\n        0% {\n            -webkit-transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n        }\n    }\n\n    animation: rotate 2s linear infinite;\n    -webkit-animation: rotate 2s linear infinite;\n}\n\n.color-holder(@diameter) {\n    position: absolute;\n    .border-radius(50%); // Circle\n    width: @diameter;\n    height: @diameter;\n}\n\n.indicator-border(@border-size, @color){\n    left: -@border-size;\n    top: -@border-size;\n    border: @border-size solid @color;\n}\n\n.small-loading-indicator(@image-grey, @image-themed, @border-color) {\n    @small-length: @small-loading-indicator-length;\n    width: @small-length;\n    height: @small-length;\n    overflow: hidden;\n\n    .branding-color-holders {\n        display: block;\n       .color-holder(15px);\n    }\n\n    .loading-indicator {\n        position: relative;\n        .icon(@spinner-path, @image-grey, @small-length, @small-length);\n        .indicator-border(10px, @border-color);\n\n        &.branded-animation {\n            // The "- 1" fixes a samll issue in Chrome where the when zoomed to 90% you could see a second spinner\n            .icon(@spinner-path, @image-themed, @small-length - 1, @small-length - 1);\n            .rotating-animation();\n        }\n    }\n}\n\n.opacity(@opacity) {\n    opacity: @opacity;\n    @percent: @opacity * 100;\n    // IE8 and below\n    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=@percent)";\n    filter: alpha(opacity=@percent);\n}\n\n.horizontal-rule(@color) {\n    display: block;\n    border-bottom: 1px solid @color;\n}\n\n.popup(@z-index) {\n    z-index: @z-index;\n    .box-shadow(@gray-dark, 2px, 3px, 5px, 0);\n    border: @header-dropdown-border;\n    background-color: @header-dropdown-background-color;\n    position: absolute;\n    text-align: left;\n\n    .popup-title {\n        color: @font-color;\n        font-weight: bold;\n    }\n}\n\n.header-dropdown() {\n    .popup(100003);\n\n    > a, > div {\n        &:hover {\n            background-color: @gray-hover;\n            cursor: default;\n        }\n        &:active {\n            background-color: @gray-press;\n        }\n        text-decoration: none;\n        display: block;\n    }\n}\n\n.error {\n    color: @font-color-error !important;\n}\n\n.ellipsis {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n// @lines is honored on WebKit.\n// @max-height provides a fallback on other browsers (simple vertical truncation).\n.multiline-ellipsis (@lines, @max-height) {\n    // On WebKit, show ellipsis after two lines if text is longer.\n    display: -webkit-box;\n    -webkit-line-clamp: @lines;\n    -webkit-box-orient: vertical;\n    // For non-WebKit browsers, just crop lines beyond the second (no ellipsis).\n    max-height: @max-height;\n    overflow: hidden;\n    // Override "nowrap" behavior of .ellipsis (typically also present for tooltips) to enable wrapping to additional lines.\n    white-space: normal;\n}\n\n.attention {\n    font-weight: bold;\n}\n\n\n// Styles a div as a table row, with direct div children as cells\n.table-row (@width: 100%, @align: top) {\n    display: table;\n    width: @width;\n\n    > div, > a, > img, > i {\n        display: table-cell;\n        vertical-align: @align;\n    }\n}\n\n// Styles any element to look and behavior like a link\n.link (@cursor: pointer, @color: @font-color-link) {\n    color: @color;\n    text-decoration: none;\n\n    &:hover, &:focus {\n        cursor: @cursor;\n        text-decoration: underline;\n    }\n}\n\n// Creates a thin, two-tone scrollbar (plain thumb on plain track), where supported by the browser.\n// Currently ignored by Edge (hopefully the new Chromium-based Edge will gain full Chrome functionality).\n// Width is 8px on Webkit, "thin" on FF (works out to similar), and full width on other browsers.\n// Webkit thumb will have a 5px border-radius (others will have square edges).\n// On IE, arrows are hidden but still consume space, so the scrollbar will not reach the edges of the bounding box.\n.custom-scrollbar(@thumb-color, @track-color) {\n    scrollbar-width: thin;\n    scrollbar-color: @thumb-color @track-color;\n\n    -ms-scrollbar-face-color: @thumb-color;\n    -ms-scrollbar-highlight-color: @track-color;\n    -ms-scrollbar-shadow-color: @track-color;\n    -ms-scrollbar-arrow-color: @track-color;\n\n    &::-webkit-scrollbar {\n        background-color: @track-color;\n        width: 8px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: @thumb-color;\n        border-radius: 5px;\n    }\n}\n\n.hidden-scrollbar {\n    &::-webkit-scrollbar { display: none; } /* Chrome/Safari/Webkit */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n}\n\n.edit-control() {\n    padding: 2px;\n    bottom: 0px;\n    right: 0px;\n    z-index: 1;\n    background-color: white;\n\n    > div {\n        .link;\n        display: inline-block;\n        padding: 3px 8px 4px 8px;\n        border: 1px solid @gray-press;\n        background-color: white;\n    }\n}\n\n.viewer-message() {\n    margin: 20px auto 0px auto;\n    text-align: center;\n    // This is the size used in Viewer.less\n    // repeated here to make this consistent between pages\n    font-size: medium;\n\n    #messageText {\n        padding: 10px;\n    }\n\n    #messageLink {\n        padding: 0px 10px 10px 10px;\n    }\n}\n\n.role-select(@width, @margin-top) {\n    font-family: @font;\n    width: @width;\n    height: 38px;\n    margin-top: @margin-top;\n    padding: 6px;\n    font-size: @font-size-base;\n    .border-radius(4px);\n    color: @font-color-light;\n    display: block;\n    vertical-align: top;\n}\n\n// Shared thumbnail styles\n.thumbnail(@thumbnail-width-param: 196px, @thumbnail-height-param: 110px) {\n    // This is necessary to surface these params in the enclosing scope of the mixin.\n    @thumbnail-width: @thumbnail-width-param;\n    @thumbnail-height: @thumbnail-height-param;\n    @thumbnail-border: 1px;\n    @overlay-margin: 2px;\n\n    .thumbnail-container {\n        // Provide a positioning context for thumbnail overlays\n        position: relative;\n        width: @thumbnail-width;\n        height: @thumbnail-height;\n        border: @thumbnail-border solid @gray-border;\n        .border-radius(3px);\n        background: @gray-very-light;\n        // Prevent child image from bleeding out of the rounded corners\n        overflow: hidden;\n\n        // Give linked thumbnails a darkened border on hover\n        &.viewable:hover {\n            border: @thumbnail-border solid @gray-dark;\n        }\n\n        // Show link or span depending on "viewable" class on container\n        .thumbnail-span,\n        &.viewable .thumbnail-link {\n            display: block;\n        }\n        .thumbnail-link,\n        &.viewable .thumbnail-span {\n            display: none;\n        }\n\n        // Needed to enable "height/width: 100%" to work on ".thumbnail-img/-failed-load" below\n        .thumbnail-link,\n        .thumbnail-span {\n            width: 100%;\n            height: 100%;\n        }\n\n        .thumbnail-img,\n        .thumbnail-failed-load {\n            // Necessary for horizontal centering, correct focus outlines, etc.\n            display: block;\n            // Start by fitting height and allowing width to scale with thumbnail aspect ratio.\n            // Aspect ratios wider than 16:9 are handled in JS by Panopto.Util.fitThumbnailWidth().\n            // Once we drop IE8 we can use background-size: contain for a pure CSS solution.\n            width: auto;\n            height: 100%;\n            // Center the thumbnail horizontally within the container if it\'s narrower than 16:9\n            margin: auto;\n            // Prevent image link border in older IE\n            border: none;\n            // Prevent browser default behavior for dragging images to enable session drag from thumb.\n            pointer-events: none;\n        }\n\n        // Show duration in an overlay at the bottom right of the thumbnail\n        .duration {\n            .overlay();\n            .border-radius(1px);\n            bottom: @overlay-margin;\n            right: @overlay-margin;\n            font-size: @font-size-subtitle;\n        }\n\n        .playlist {\n            .overlay();\n            .border-radius(1px);\n            top: 0;\n            right: 0;\n            height: @thumbnail-height;\n            line-height: @thumbnail-height;\n            text-align: center;\n            padding: 0 5px;\n\n            // Give the playlist overlay a bit of default width so shorter languages don\'t look goofy\n            min-width: 40%;\n\n            // This works around issues with our "line-height"-based vertical centering hack when on a page with an\n            // XHTML 1.0 doctype (resulting in "Almost Standards Mode").\n            &::before,\n            &::after {\n                content: \'\';\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            // Handle vertical centering of text;\n            .playlist-text {\n                @height-adjustment: 10px;\n                display: inline-block;\n                vertical-align: middle;\n                // Adjust the height between the icon and text\n                line-height: @height-adjustment;\n                // Fix the vertical centering of the text\n                margin-top: -@height-adjustment;\n                font-size: @font-size-website-base;\n            }\n        }\n\n        .completion-overlay {\n            position: absolute;\n            bottom: 0;\n            height: 4px;\n            width: 100%;\n            background: @gray-press;\n\n            // Width is set in script in `itemRendered` callbacks in SessionList.ts and HomeUtils.ts.\n            // Color is set to brand color via .accent-background.\n            .progress {\n                height: 100%;\n            }\n        }\n\n        .archived-overlay {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            align-content: space-around;\n            // Control opacity through the backgroun so the text is fully opaque.\n            background: rgba(255, 255, 255, 0.8);\n            color: @icon-color;\n            pointer-events: none;\n        }\n    }\n\n    // Mixin for info overlays on .thumbnail-container (white text on translucent black background)\n    .overlay() {\n        position: absolute;\n        // IE8 fallback (doesn\'t support rgba)\n        background: black;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 1px 3px;\n        color: white;\n        cursor: default;\n        // Enable mouse events to pass through to the underlying thumbnail link / span (NOTE: not supported on IE10-)\n        pointer-events: none;\n    }\n}\n\n// Shared caption option styles\n.caption-options(@asset-path, @item-size, @item-padding, @item-border, @docked-icon-size) {\n    .user-select(none);\n\n    li {\n        // override box-sizing: border-box set on fullscreen options\n        box-sizing: content-box;\n        display: block;\n        float: left;\n        margin-left: 5px;\n        width: @item-size;\n        height: @item-size;\n        // Line height needs to consider padding to align with the width\n        line-height: @item-size - (2 * @item-padding);\n        text-align: center;\n        cursor: pointer;\n        padding: @item-padding;\n\n        // Use a transparent border when not selected to avoid reflow on selection\n        border-width: @item-border;\n        border-style: solid;\n        border-color: transparent;\n    }\n\n    // Color samples have a border color to display as well\n    li .color-sample {\n        border-width: 1px;\n        border-style: solid;\n    }\n\n    .transparent-background {\n        .icon(@asset-path, "checker.png");\n        background-position: left top;\n    }\n\n    .placement-option {\n        // Override the default explicit size to the image\n        width: auto;\n        height: auto;\n    }\n\n    // Docked image icon\n    .Docked div {\n        .icon(@asset-path, "icon_position_Docked.png", @docked-icon-size, @docked-icon-size);\n    }\n\n    // Overlay image icon\n    .Overlay div {\n        .icon(@asset-path, "icon_position_Overlay.png", @docked-icon-size, @docked-icon-size);\n    }\n}\n\n.dialog-triangle() {\n    // These are styles to position and scale unicode triangle character for a dialog\n    position: absolute;\n    display: block;\n    color: white;\n    z-index: 1000;\n    margin-left: -10px;\n    margin-top: -11px;\n    font-size: 1.5em;\n    .transform(scaleX(1.5));\n    cursor: default;\n}\n\n// Used to place an opaque overlay on the screen\n.screen-overlay() {\n    display: none;\n    position: fixed;\n    top: 0; left: 0; right: 0; bottom: 0;\n    background-color: black;\n    @opacity: 70;\n    opacity: @opacity / 100;\n    filter: alpha(opacity=@opacity); // IE8 hack. "opacity" supported in IE9+\n    z-index: 999;\n}\n\n// Used to vertically align material icons nicely beside text\n.material-icon-beside-text() {\n    // Align the material icon with the text\n    vertical-align: middle;\n    // Underlining material design icons doesn\'t render nicely\n    text-decoration: none;\n    // Give the icon a little space from the title\n    padding-right: 3px;\n}\n\n.folder-header-icon(@width, @height, @icon) {\n    .icon(@asset-path, @icon, @width, @height);\n    float: left;\n    margin-right: 10px;\n}\n\n// Used for close buttons that use the "close"/x material icon\n.close-button (@size) {\n    display: block;\n    text-decoration: none;\n    color: @font-color-light;\n    font-size: @size;\n\n    .hoverable(@gray-transparent, @gray-transparent-dark);\n\n    &:active {\n        color: white;\n    }\n}\n\n.speech-bubble() {\n    @padding: 10px;\n    @border-width: 1px;\n    @background-color: white;\n    position: relative;\n    background-color: @background-color;\n    border: @border-width solid @gray-border;\n    border-radius: 3px;\n    border-bottom-left-radius: 0px;\n    padding: @padding;\n\n    &:before {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px - @border-width;\n        width: 0px;\n        display: block;\n        border-width: 20px 20px 0 0;\n        border-style: solid;\n        border-color: @gray-border transparent;\n    }\n\n    &:after {\n        content: "";\n        position: absolute;\n        top: 100%;\n        left: 0px;\n        width: 0px;\n        display: block;\n        border-width: 17px 17px 0 0;\n        border-style: solid;\n        border-color: @background-color transparent;\n    }\n}\n\n.flat-button() {\n    display: inline-block;\n    padding: 6px 9px 8px 9px;\n    .border-radius(3px);\n    background-color: @header-color;\n    cursor: pointer;\n    text-decoration: none;\n    font-weight: 600;\n    color: @font-color;\n    text-align: center;\n    border: 1px solid @gray-light;\n\n    &.safety-background {\n        color: white;\n        border: 0px;\n        padding: 7px 10px 9px 10px;\n    }\n\n    &:hover, &:active {\n        text-decoration: none;\n    }\n}\n\n.copyright-warning() {\n    font-size: @font-size-small;\n    color: @font-color-light-white-background;\n    text-align: center;\n    padding: 20px;\n}\n\n.material-checkbox(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "check_box_outline_blank";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "check_box";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n.material-radio(\n    @color: @icon-color,\n    @background: rgba(255, 255, 255, 0.85)\n) {\n    -webkit-appearance: unset;\n    -moz-appearance: none;\n    position: relative;\n    color: @color;\n\n    // Remove border and background color as they still show up on Mobile Safari\n    // even with appearance unset\n    border: none;\n    background-color: transparent;\n\n    &::before {\n        content: "";\n        position: absolute;\n        top: @checkbox-glyph-inset;\n        right: @checkbox-glyph-inset;\n        bottom: @checkbox-glyph-inset;\n        left: @checkbox-glyph-inset;\n        border-radius: 3px;\n        background: @background;\n    }\n\n    &::after {\n        content: "radio_button_unchecked";\n        position: absolute;\n    }\n    &:checked::after {\n        content: "radio_button_checked";\n    }\n\n    @ms-cruft: {\n        left: 3px;\n        top: 3px;\n        width: 18px;\n        height: 18px;\n    };\n    .ie-only(@ms-cruft);\n    .edge-only(@ms-cruft);\n}\n\n\n.placeholder(@rules) {\n    &::placeholder {\n        @rules();\n    }\n\n    &::-ms-input-placeholder {\n        @rules();\n    }\n\n    &:-ms-input-placeholder {\n        @rules();\n    }\n}\n\n.material-select() {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1ICg3ODA3NikgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+CiAgICA8dGl0bGU+aWNfRG93bkFycm93PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImljX0Rvd25BcnJvdyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0zLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUGF0aCI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjNjI2MjYyIiBwb2ludHM9IjcuMDAwMDAwMDMgMTAgMTIuMDAwMDAwMSAxNS4wMDAwMDAxIDE3LjAwMDAwMDEgMTAiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIDI0LjAwMDAwMDEgMCAyNC4wMDAwMDAxIj48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==) no-repeat right 2px center;\n    -moz-appearance: none; \n    -webkit-appearance: none; \n    appearance: none;\n}\n\n.clear-search-icon() {\n    @icon-size: 18px;\n    .icon("Widgets/", "icon_cancel.svg", @icon-size, @icon-size, no-repeat);\n    background-size: @icon-size;\n}\n',"@control-bar-relative-height: 15%;\n@control-bar-min-height: 50px;\n@control-bar-max-height: 200px;\n@stage-transition-duration: 1s;\n@stage-padding: 12px;\n\n@border-color: fadeout(white, 80%);\n@background-color: fadeout(white, 90%);\n@background-color-hover: fadeout(white, 80%);\n@background-color-active: fadeout(white, 70%);\n\n.control-bar {\n    position: relative;\n    display: flex;\n    align-items: center;\n    height: @control-bar-relative-height;\n    min-height: @control-bar-min-height;\n    max-height: @control-bar-max-height;\n}\n\n.post-record-large-button() {\n    flex: 1;\n    height: 100%;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: solid 1px @border-color;\n    border-radius: 5px;\n    background-color: @background-color;\n    transition: color 0.1s, opacity 0.2s;\n    cursor: pointer;\n\n    &.disabled {\n        opacity: 0.5;\n        cursor: default;\n    }\n\n    .material-icons {\n        margin-right: @stage-padding / 2;\n        color: @icon-color-dark-theme;\n    }\n\n    .label {\n        font-size: calc(14px + 0.4vh);\n        color: white;\n    }\n\n    &:not(.disabled) {\n        &:hover {\n            background-color: @background-color-hover;\n\n            .material-icons {\n                color: white;\n            }\n        }\n        &:active {\n            background-color: @background-color-active;\n        }\n    }\n}\n\n.post-record-sidecar-button() {\n    flex: none;\n    height: 100%;\n    padding: 0 0.4vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: @stage-padding;\n    background: @background-color;\n    transition: background-color 0.2s;\n    cursor: pointer;\n\n    &:hover {\n        background-color: @background-color-hover;\n        color: white;\n    }\n    &:active {\n        background-color: @background-color-active;\n    }\n}\n","// Namespace styles within #webRecorder.\n#webRecorder {\n    .help-menu(@button-size, @button-padding) {\n        .help-menu {\n            position: relative;\n\n            .help-button {\n                width: @button-size;\n                height: @button-size;\n                padding: @button-padding;\n                border-radius: calc((@button-size / 2) + @button-padding);\n                transition-property: color, background-color;\n                transition-duration: 0.1s;\n                color: @icon-color-dark-theme;\n                user-select: none;\n                cursor: pointer;\n\n                i {\n                    font-size: @button-size;\n                    pointer-events: none;\n                }\n\n                &.active,\n                &:hover {\n                    background-color: @icon-color;\n                    color: @icon-color-active-dark-theme;\n                }\n            }\n\n            .popup-menu {\n                @menu-top-margin: 4px;\n\n                position: absolute;\n                top: calc(@button-size + (2 * @button-padding) + @menu-top-margin);\n                right: 0;\n                padding: (@stage-padding / 4) 0;\n                background: @pure-white;\n                min-width: 120px;\n                border-radius: 3px;\n\n                & > div {\n                    padding: (@stage-padding / 2) @stage-padding;\n                    background-color: @pure-white;\n                    font-size: 14px;\n                    white-space: nowrap;\n                    color: @font-color;\n                    transition: background-color 0.2s;\n                    user-select: none;\n                    cursor: pointer;\n\n                    &:hover {\n                        background-color: rgba(0, 0, 0, 0.1);\n                        color: black;\n                    }\n                }\n            }\n        }\n    }\n}\n"],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";var r=n(28),o=n.n(r),a=n(29),i=n.n(a)()(o.a);i.push([e.i,".settings-button-container {\n  cursor: default;\n}\n.settings-button-container .selected {\n  padding: 6px;\n  border: solid rgba(255, 255, 255, 0.8) 3px;\n  border-radius: 16px;\n}\n.settings-button-container .not-selected {\n  padding: 6px;\n  border: solid #00000000 3px;\n}\n.settings-button-container .image-container-full {\n  width: 118px;\n  height: 96px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.settings-button-container .image-container {\n  width: 118px;\n  height: 66px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 8px 8px 0 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.settings-button-container .image-container .image {\n  border-radius: 8px 8px 0 0;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  width: 118px;\n  height: 66px;\n}\n.settings-button-container .text-container {\n  width: 118px;\n  height: 30px;\n  font-size: 14px;\n  background: rgba(0, 0, 0, 0.8);\n  border-radius: 0 0 8px 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.settings-button-container .text-container .label-container {\n  flex: 1;\n  text-align: center;\n}\n.settings-button-container .text-container .delete-container {\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.settings-button-container .text-container .delete-container svg {\n  width: 20px;\n  height: 20px;\n}\n.settings-button-container .text-container .delete-container:hover {\n  background: rgba(255, 255, 255, 0.3);\n  border-bottom-right-radius: 8px;\n}\n","",{version:3,sources:["webpack://./lib/Components/SettingsButton.less"],names:[],mappings:"AAAA;EAEI,eAAA;AAAJ;AAFA;EAKQ,YAAA;EAEA,0CAAA;EACA,mBAAA;AADR;AAPA;EAYQ,YAAA;EAEA,2BAAA;AAHR;AAXA;EAkBQ,YAAA;EACA,YAAA;EAEA,8BAAA;EACA,kBAAA;EAEA,aAAA;EACA,uBAAA;EACA,mBAAA;AANR;AApBA;EA8BQ,YAAA;EACA,YAAA;EAEA,8BAAA;EACA,0BAAA;EAEA,aAAA;EACA,uBAAA;EACA,mBAAA;AATR;AA7BA;EAyCY,0BAAA;EACA,sBAAA;EACA,2BAAA;EACA,4BAAA;EAEA,YAAA;EACA,YAAA;AAVZ;AArCA;EAoDQ,YAAA;EACA,YAAA;EAEA,eAAA;EACA,8BAAA;EACA,0BAAA;EAEA,aAAA;EACA,uBAAA;EACA,mBAAA;AAdR;AA/CA;EAgEY,OAAA;EACA,kBAAA;AAdZ;AAnDA;EAqEY,WAAA;EACA,YAAA;EAEA,aAAA;EACA,mBAAA;EACA,uBAAA;AAhBZ;AA1DA;EA6EgB,WAAA;EACA,YAAA;AAhBhB;AAmBY;EACI,oCAAA;EACA,+BAAA;AAjBhB",sourcesContent:[".settings-button-container {\n\n    cursor: default;\n\n    .selected {\n        padding: 6px;\n\n        border: solid rgba(255, 255, 255, 0.8) 3px;\n        border-radius: 16px;\n    }\n\n    .not-selected {\n        padding: 6px;\n\n        border: solid #00000000 3px;\n    }\n\n    .image-container-full {\n        width: 118px;\n        height: 96px;\n\n        background: rgba(0, 0, 0, 0.5);\n        border-radius: 8px;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .image-container {\n        width: 118px;\n        height: 66px;\n\n        background: rgba(0, 0, 0, 0.5);\n        border-radius: 8px 8px 0 0;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .image {\n            border-radius: 8px 8px 0 0;\n            background-size: cover;\n            background-position: center;\n            background-repeat: no-repeat;\n\n            width: 118px;\n            height: 66px;\n        }\n    }\n\n    .text-container {\n        width: 118px;\n        height: 30px;\n\n        font-size: 14px;\n        background: rgba(0, 0, 0, 0.8);\n        border-radius: 0 0 8px 8px;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .label-container {\n            flex: 1;\n            text-align: center;\n        }\n\n        .delete-container {\n            width: 30px;\n            height: 30px;\n\n            display: flex;\n            align-items: center;\n            justify-content: center;\n\n            svg {\n                width: 20px;\n                height: 20px;\n            }\n\n            &:hover {\n                background: rgba(255, 255, 255, 0.3);\n                border-bottom-right-radius: 8px;\n            }\n        }\n    }\n}\n"],sourceRoot:""}]),t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({acos_:function(e){const t={x:Object(a.a)(e,"x","acos")};return r.a.runKernel(o.b,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({acosh_:function(e){const t={x:Object(a.a)(e,"x","acosh")};return r.a.runKernel(o.c,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({addN_:function(e){i.b(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),i.b(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>Object(a.a)(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!i.a(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const s=t;return r.a.runKernel(o.e,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({all_:function(e,t=null,n=!1){const i={x:Object(a.a)(e,"x","all","bool")},s={axis:t,keepDims:n};return r.a.runKernel(o.f,i,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({any_:function(e,t=null,n=!1){const i={x:Object(a.a)(e,"x","any","bool")},s={axis:t,keepDims:n};return r.a.runKernel(o.g,i,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({argMax_:function(e,t=0){const n={x:Object(a.a)(e,"x","argMax")},i={axis:t};return r.a.runKernel(o.h,n,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({argMin_:function(e,t=0){const n={x:Object(a.a)(e,"x","argMin")},i={axis:t};return r.a.runKernel(o.i,n,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({asin_:function(e){const t={x:Object(a.a)(e,"x","asin")};return r.a.runKernel(o.j,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({asinh_:function(e){const t={x:Object(a.a)(e,"x","asinh")};return r.a.runKernel(o.k,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({atan_:function(e){const t={x:Object(a.a)(e,"x","atan")};return r.a.runKernel(o.l,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({atan2_:function(e,t){let n=Object(i.a)(e,"a","atan2"),s=Object(i.a)(t,"b","atan2");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.m,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({atanh_:function(e){const t={x:Object(a.a)(e,"x","atanh")};return r.a.runKernel(o.n,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(21),c=n(4),u=n(9);const l=Object(c.b)({avgPool3d_:function(e,t,n,c,l,d="NDHWC"){const p=Object(a.a)(e,"x","avgPool3d","float32");let h=p,f=!1;4===p.rank&&(f=!0,h=Object(u.a)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),i.b(5===h.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${h.rank}.`)),i.b("NDHWC"===d,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${d}`)),null!=l&&i.b(i.v(c),(()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`));const m={x:h},g={filterSize:t,strides:n,pad:c,dimRoundingMode:l,dataFormat:d};let b=r.a.runKernel(o.p,m,g);return b=Object(s.a)(b,h.dtype),f?Object(u.a)(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({broadcastArgs_:function(e,t){const n=Object(a.a)(e,"s0","broadcastArgs","int32"),i=Object(a.a)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==i.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${i.rank}`);const s={s0:n,s1:i};return r.a.runKernel(o.v,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({ceil_:function(e){const t={x:Object(a.a)(e,"x","ceil","float32")};return r.a.runKernel(o.y,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({clipByValue_:function(e,t,n){const s=Object(a.a)(e,"x","clipByValue");i.b(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`));const c={x:s},u={clipValueMin:t,clipValueMax:n};return r.a.runKernel(o.z,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),o=n(8),a=n(76),i=n(34),s=n(4),c=n(9);const u=Object(s.b)({conv1d_:function(e,t,n,s,u="NWC",l=1,d){const p=Object(r.a)(e,"x","conv1d"),h=Object(r.a)(t,"filter","conv1d");let f=p,m=!1;2===p.rank&&(m=!0,f=Object(c.a)(p,[1,p.shape[0],p.shape[1]])),o.b(3===f.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`)),o.b(3===h.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${h.rank}.`)),null!=d&&o.b(o.v(s),(()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${s}.`)),o.b(f.shape[2]===h.shape[1],(()=>`Error in conv1d: depth of input (${f.shape[2]}) must match input depth for filter ${h.shape[1]}.`)),o.b(i.h(n,l),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${l}'`)),o.b("NWC"===u,(()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`));const g=Object(c.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),b=Object(c.a)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),y=[1,n],A=[1,l],v=Object(a.a)(b,g,y,s,"NHWC",A,d);return m?Object(c.a)(v,[v.shape[2],v.shape[3]]):Object(c.a)(v,[v.shape[0],v.shape[2],v.shape[3]])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),o=n(155),a=n(4);const i=Object(a.b)({conv2dTranspose_:function(e,t,n,a,i,s){const c=Object(r.a)(e,"x","conv2dTranspose"),u=Object(r.a)(t,"filter","conv2dTranspose");return Object(o.a)(n,c,u,a,i,"NHWC",s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(34),c=n(4),u=n(9);const l=Object(c.b)({conv3d_:function(e,t,n,c,l="NDHWC",d=[1,1,1]){const p=Object(a.a)(e,"x","conv3d"),h=Object(a.a)(t,"filter","conv3d");let f=p,m=!1;4===p.rank&&(m=!0,f=Object(u.a)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),i.b(5===f.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${f.rank}.`)),i.b(5===h.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${h.rank}.`)),i.b(f.shape[4]===h.shape[3],(()=>`Error in conv3d: depth of input (${f.shape[4]}) must match input depth for filter ${h.shape[3]}.`)),i.b(Object(s.h)(n,d),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`)),i.b("NDHWC"===l,(()=>`Error in conv3d: got dataFormat of ${l} but only NDHWC is currently supported.`));const g={x:f,filter:h},b={strides:n,pad:c,dataFormat:l,dilations:d},y=r.a.runKernel(o.G,g,b);return m?Object(u.a)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({cos_:function(e){const t={x:Object(a.a)(e,"x","cos","float32")};return r.a.runKernel(o.J,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({cosh_:function(e){const t={x:Object(a.a)(e,"x","cosh","float32")};return r.a.runKernel(o.K,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({cumsum_:function(e,t=0,n=!1,i=!1){const s={x:Object(a.a)(e,"x","cumsum")},c={axis:t,exclusive:n,reverse:i};return r.a.runKernel(o.M,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({denseBincount_:function(e,t,n,s=!1){const c=Object(a.a)(e,"x","denseBincount"),u=Object(a.a)(t,"weights","denseBincount");i.b("int32"===c.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${c.dtype}`)),i.b(c.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${c.rank}.`)),i.b(n>=0,(()=>`size must be non-negative, but got ${n}.`)),i.b(u.size===c.size||0===u.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${c.shape}, weights shape: ${u.shape}.`));const l={x:c,weights:u},d={size:n,binaryOutput:s};return r.a.runKernel(o.N,l,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({depthToSpace_:function(e,t,n="NHWC"){const s=Object(a.a)(e,"x","depthToSpace","float32"),c="NHWC"===n?s.shape[1]:s.shape[2],u="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];i.b(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),i.b(c*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${c} and ${t}  for depthToSpace with input shape\n    ${s.shape}`)),i.b(u*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${t} for depthToSpace with input shape\n        ${s.shape}`)),i.b(l%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${l} for depthToSpace with input shape ${s.shape}`));const d={x:s},p={blockSize:t,dataFormat:n};return r.a.runKernel(o.O,d,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4),c=n(9);const u=Object(s.b)({dilation2d_:function(e,t,n,s,u=[1,1],l="NHWC"){const d=Object(a.a)(e,"x","dilation2d"),p=Object(a.a)(t,"filter","dilation2d");i.b(3===d.rank||4===d.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${d.rank}.`)),i.b(3===p.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${p.rank}.`)),i.b("NHWC"===l,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${l}`));let h=d,f=!1;3===d.rank&&(h=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),f=!0);const m={x:h,filter:p},g={strides:n,pad:s,dilations:u},b=r.a.runKernel(o.T,m,g);return f?Object(c.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(15),o=n(3),a=n(19),i=n(129),s=n(4),c=n(57),u=n(36);const l=Object(s.b)({divNoNan_:function(e,t){let n=Object(o.a)(e,"a","div"),s=Object(o.a)(t,"b","div");[n,s]=Object(r.makeTypesMatch)(n,s);const l=Object(a.a)(n,s),d=Object(u.a)(l),p=Object(i.a)(s,d);return Object(c.a)(p,d,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({einsum_:function(e,...t){const n=t.map(((e,t)=>Object(a.a)(e,`tensors${t}`,"einsum"))),i={equation:e};return r.a.runKernel(o.W,n,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(21),c=n(4);const u=Object(c.b)({erf_:function(e){let t=Object(a.a)(e,"x","erf");i.b("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=Object(s.a)(t,"float32"));const n={x:t};return r.a.runKernel(o.ab,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({expm1_:function(e){const t={x:Object(a.a)(e,"x","expm1")};return r.a.runKernel(o.db,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({isNaN_:function(e){const t={x:Object(a.a)(e,"x","isNaN")};return r.a.runKernel(o.wb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(23),c=n(4);const u=Object(c.b)({less_:function(e,t){let n=Object(i.a)(e,"a","less","string_or_numeric"),c=Object(i.a)(t,"b","less","string_or_numeric");[n,c]=Object(a.makeTypesMatch)(n,c),Object(s.a)(n.shape,c.shape);const u={a:n,b:c};return r.a.runKernel(o.Ab,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),o=n(6);function a(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const a={start:e,stop:t,num:n};return r.a.runKernel(o.Cb,{},a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4),c=n(9);const u=Object(s.b)({localResponseNormalization_:function(e,t=5,n=1,s=1,u=.5){const l=Object(a.a)(e,"x","localResponseNormalization");i.b(4===l.rank||3===l.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`)),i.b(i.v(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let d=l,p=!1;3===l.rank&&(p=!0,d=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const h={x:d},f={depthRadius:t,bias:n,alpha:s,beta:u},m=r.a.runKernel(o.xb,h,f);return p?Object(c.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(31),o=n(3),a=n(21),i=n(55),s=n(68),c=n(65),u=n(11),l=n(4),d=n(13),p=n(25);const h=Object(l.b)({logSoftmax_:function(e,t=-1){const n=Object(o.a)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Object(r.a)(((e,n)=>{const r=Object(c.a)(e,t,!0),o=Object(d.a)(e,r),l=Object(d.a)(Object(a.a)(o,"float32"),Object(s.a)(Object(p.a)(Object(i.a)(o),t,!0)));n([l]);return{value:l,gradFunc:(e,n)=>{const[r]=n,o=Object(i.a)(r);return Object(d.a)(e,Object(u.a)(Object(p.a)(e,t,!0),o))}}}))(n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4),c=n(9);const u=Object(s.b)({maxPool3d_:function(e,t=[1,1,1],n,s,u,l="NDHWC"){const d=Object(a.a)(e,"x","maxPool3d");let p=d,h=!1;4===d.rank&&(h=!0,p=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),i.b(5===p.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${p.rank}.`)),i.b("NDHWC"===l,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${l}`)),null!=u&&i.b(i.v(s),(()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${u} but got pad ${s}.`));const f={x:p},m={filterSize:t,strides:n,pad:s,dimRoundingMode:u,dataFormat:l},g=r.a.runKernel(o.Lb,f,m);return h?Object(c.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({maxPoolWithArgmax_:function(e,t,n,i,s=!1){const c={x:Object(a.a)(e,"x","maxPoolWithArgmax")},u={filterSize:t,strides:n,pad:i,includeBatchInIndex:s},l=r.a.runKernel(o.Ob,c,u);return{result:l[0],indexes:l[1]}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({mirrorPad_:function(e,t,n){i.b("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const s=Object(a.a)(e,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");i.b(t.length===s.rank,(()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`));const c="reflect"===n?1:0;for(let e=0;e<s.rank;e++)i.b(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),i.b(t[e][0]>=0&&t[e][0]<=s.shape[e]-c&&t[e][1]>=0&&t[e][1]<=s.shape[e]-c,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${s.shape[e]-c} or less than 0 for input of shape ${s.shape}`));const u={paddings:t,mode:n},l={x:s};return r.a.runKernel(o.Tb,l,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(15),i=n(3),s=n(4);const c=Object(s.b)({mod_:function(e,t){let n=Object(i.a)(e,"a","mod"),s=Object(i.a)(t,"b","mod");[n,s]=Object(a.makeTypesMatch)(n,s);const c={a:n,b:s};return r.a.runKernel(o.Ub,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(4),s=n(9);const c=Object(i.b)({multinomial_:function(e,t,n,i=!1){const c=Object(a.a)(e,"logits","multinomial"),u=c.size,l=c.rank;if(u<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${u}.`);if(l>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${l}`);n=n||Math.random();const d={logits:1===l?Object(s.a)(c,[1,-1]):c},p={numSamples:t,seed:n,normalized:i},h=r.a.runKernel(o.Vb,d,p);return 1===l?Object(s.a)(h,[h.size]):h}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({onesLike_:function(e){const t={x:Object(a.a)(e,"x","onesLike")};return r.a.runKernel(o.dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(21),s=n(4);const c=Object(s.b)({prod_:function(e,t=null,n=!1){let s=Object(a.a)(e,"x","prod");"bool"===s.dtype&&(s=Object(i.a)(s,"int32"));const c={x:s},u={axis:t,keepDims:n};return r.a.runKernel(o.jc,c,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({reciprocal_:function(e){const t={x:Object(a.a)(e,"x","reciprocal")};return r.a.runKernel(o.nc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({rsqrt_:function(e){const t={x:Object(a.a)(e,"x","rsqrt","float32")};return r.a.runKernel(o.yc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({selu_:function(e){const t={x:Object(a.a)(e,"x","selu")};return r.a.runKernel(o.Bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),o=n(3),a=n(8);const i=async function(e,t){const n=Object(o.a)(e,"x","setdiff1d"),i=Object(o.a)(t,"y","setdiff1d");a.b(n.dtype===i.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${i.dtype}).`)),a.b(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),a.b(1===i.rank,(()=>`y should be 1D tensor, but got y (${i.shape}).`));const s=await n.data(),c=await i.data(),u=new Set(c);let l=0;for(let e=0;e<s.length;e++)u.has(s[e])||l++;const d=new r.b([l],n.dtype),p=new r.b([l],"int32");for(let e=0,t=0;e<s.length;e++)u.has(s[e])||(d.values[t]=s[e],p.values[t]=e,t++);return[d.toTensor(),p.toTensor()]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({sign_:function(e){const t={x:Object(a.a)(e,"x","sign")};return r.a.runKernel(o.Dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({sin_:function(e){const t={x:Object(a.a)(e,"x","sin","float32")};return r.a.runKernel(o.Ec,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({sinh_:function(e){const t={x:Object(a.a)(e,"x","sinh")};return r.a.runKernel(o.Fc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({softmax_:function(e,t=-1){const n=Object(a.a)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const i={logits:n},s={dim:t};return r.a.runKernel(o.Hc,i,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({stridedSlice_:function(e,t,n,i,s=0,c=0,u=0,l=0,d=0){const p={x:Object(a.a)(e,"x","stridedSlice","string_or_numeric")},h={begin:t,end:n,strides:i,beginMask:s,endMask:c,ellipsisMask:u,newAxisMask:l,shrinkAxisMask:d};return r.a.runKernel(o.Uc,p,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({tan_:function(e){const t={x:Object(a.a)(e,"x","tan","float32")};return r.a.runKernel(o.ad,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({topk_:function(e,t=1,n=!0){const i=Object(a.a)(e,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=i.shape[i.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${t}`);const c={x:i},u={k:t,sorted:n},[l,d]=r.a.runKernel(o.dd,c,u);return{values:l,indices:d}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(41),o=n(4),a=n(81);const i=Object(o.b)({truncatedNormal_:function(e,t=0,n=1,o,i){if(null!=o&&"bool"===o)throw new Error("Unsupported data type $ { dtype }");const s=new a.a(t,n,o,!0,i),c=Object(r.a)(e,o);for(let e=0;e<c.values.length;e++)c.values[e]=s.nextValue();return c.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(8),s=n(4);const c=Object(s.b)({unique_:function(e,t=0){const n=Object(a.a)(e,"x","unique","string_or_numeric");Object(i.b)(n.rank>0,(()=>"The input tensor must be at least 1D"));const s={x:n},c={axis:t},[u,l]=r.a.runKernel(o.gd,s,c);return{values:u,indices:l}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),o=n(6),a=n(3),i=n(4),s=n(95);const c=Object(i.b)({scatterND_:function(e,t,n){const i=Object(a.a)(e,"indices","scatterND","int32"),c=Object(a.a)(t,"updates","scatterND");s.validateInput(c,i,n);const u={indices:i,updates:c},l={shape:n};return r.a.runKernel(o.zc,u,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6),a=n(3),i=n(4);const s=Object(i.b)({gatherND_:function(e,t){const n=Object(a.a)(t,"indices","gatherND","int32"),i={params:Object(a.a)(e,"x","gatherND","string_or_numeric"),indices:n};return r.a.runKernel(o.nb,i)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));const r="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:void 0!==e?e:e=>e();function o(){return new Promise((e=>r((()=>e()))))}}).call(this,n(238).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(320),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(73))},function(e,t,n){var r=n(18),o=n(35),a=n(321),i=n(111),s=n(163).populateHostPrefix;e.exports={buildRequest:function(e){var t=e.service.api.operations[e.operation],n=e.httpRequest;n.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",n.params={Version:e.service.api.apiVersion,Action:t.name},(new a).serialize(e.params,t.input,(function(e,t){n.params[e]=t})),n.body=o.queryParamsToString(n.params),s(e)},extractError:function(e){var t,n=e.httpResponse.body.toString();if(n.match("<UnknownOperationException"))t={Code:"UnknownOperation",Message:"Unknown operation "+e.request.operation};else try{t=(new r.XML.Parser).parse(n)}catch(n){t={Code:e.httpResponse.statusCode,Message:e.httpResponse.statusMessage}}t.requestId&&!e.requestId&&(e.requestId=t.requestId),t.Errors&&(t=t.Errors),t.Error&&(t=t.Error),t.Code?e.error=o.error(new Error,{code:t.Code,message:t.Message}):e.error=o.error(new Error,{code:e.httpResponse.statusCode,message:null})},extractData:function(e){var t=e.request,n=t.service.api.operations[t.operation].output||{},a=n;if(a.resultWrapper){var s=i.create({type:"structure"});s.members[a.resultWrapper]=n,s.memberNames=[a.resultWrapper],o.property(n,"name",n.resultWrapper),n=s}var c=new r.XML.Parser;if(n&&n.members&&!n.members._XAMZRequestId){var u=i.create({type:"string"},{api:{protocol:"query"}},"requestId");n.members._XAMZRequestId=u}var l=c.parse(e.httpResponse.body.toString(),n);e.requestId=l._XAMZRequestId||l.requestId,l._XAMZRequestId&&delete l._XAMZRequestId,a.resultWrapper&&l[a.resultWrapper]&&(o.update(l,l[a.resultWrapper]),delete l[a.resultWrapper]),e.data=l}}},function(e,t,n){var r=n(35).memoizedProperty;function o(e,t,n,o){r(this,o(e),(function(){return n(e,t)}))}e.exports=function(e,t,n,r,a){for(var i in r=r||String,e)Object.prototype.hasOwnProperty.call(e,i)&&(o.call(this,i,e[i],n,r),a&&a(i,e[i]))}},function(e,t,n){var r=n(35),o=n(119),a=n(160),i=n(161),s=n(162);function c(e,t){if(!e.httpRequest.headers["Content-Type"]){var n=t?"binary/octet-stream":"application/json";e.httpRequest.headers["Content-Type"]=n}}e.exports={buildRequest:function(e){o.buildRequest(e),["GET","HEAD","DELETE"].indexOf(e.httpRequest.method)<0&&function(e){var t=new i,n=e.service.api.operations[e.operation].input;if(n.payload){var r,o=n.members[n.payload];r=e.params[n.payload],"structure"===o.type?(e.httpRequest.body=t.build(r||{},o),c(e)):void 0!==r&&(e.httpRequest.body=r,("binary"===o.type||o.isStreaming)&&c(e,!0))}else e.httpRequest.body=t.build(e.params,n),c(e)}(e)},extractError:function(e){a.extractError(e)},extractData:function(e){o.extractData(e);var t=e.request,n=t.service.api.operations[t.operation],i=t.service.api.operations[t.operation].output||{};if(n.hasEventOutput,i.payload){var c=i.members[i.payload],u=e.httpResponse.body;if(c.isEventStream)l=new s,e.data[payload]=r.createEventStream(2===AWS.HttpClient.streamsApiVersion?e.httpResponse.stream:u,l,c);else if("structure"===c.type||"list"===c.type){var l=new s;e.data[i.payload]=l.parse(u,c)}else"binary"===c.type||c.isStreaming?e.data[i.payload]=u:e.data[i.payload]=c.toType(u)}else{var d=e.data;a.extractData(e),e.data=r.merge(d,e.data)}}}},function(e,t,n){var r=n(18),o=n(35),a=n(119);e.exports={buildRequest:function(e){a.buildRequest(e),["GET","HEAD"].indexOf(e.httpRequest.method)<0&&function(e){var t=e.service.api.operations[e.operation].input,n=new r.XML.Builder,a=e.params,i=t.payload;if(i){var s=t.members[i];if(void 0===(a=a[i]))return;if("structure"===s.type){var c=s.name;e.httpRequest.body=n.toXML(a,s,c,!0)}else e.httpRequest.body=a}else e.httpRequest.body=n.toXML(a,t,t.name||t.shape||o.string.upperFirst(e.operation)+"Request")}(e)},extractError:function(e){var t;a.extractError(e);try{t=(new r.XML.Parser).parse(e.httpResponse.body.toString())}catch(n){t={Code:e.httpResponse.statusCode,Message:e.httpResponse.statusMessage}}t.Errors&&(t=t.Errors),t.Error&&(t=t.Error),t.Code?e.error=o.error(new Error,{code:t.Code,message:t.Message}):e.error=o.error(new Error,{code:e.httpResponse.statusCode,message:null})},extractData:function(e){var t;a.extractData(e);var n=e.request,i=e.httpResponse.body,s=n.service.api.operations[n.operation],c=s.output,u=(s.hasEventOutput,c.payload);if(u){var l=c.members[u];l.isEventStream?(t=new r.XML.Parser,e.data[u]=o.createEventStream(2===r.HttpClient.streamsApiVersion?e.httpResponse.stream:e.httpResponse.body,t,l)):"structure"===l.type?(t=new r.XML.Parser,e.data[u]=t.parse(i.toString(),l)):"binary"===l.type||l.isStreaming?e.data[u]=i:e.data[u]=l.toType(i)}else if(i.length>0){var d=(t=new r.XML.Parser).parse(i.toString(),c);o.update(e.data,d)}}}},function(e,t,n){var r=n(240),o=n(244),a=n(111),i=n(245),s=n(246),c=n(247),u=n(35),l=u.property,d=u.memoizedProperty;e.exports=function(e,t){var n=this;e=e||{},(t=t||{}).api=this,e.metadata=e.metadata||{};var p=t.serviceIdentifier;delete t.serviceIdentifier,l(this,"isApi",!0,!1),l(this,"apiVersion",e.metadata.apiVersion),l(this,"endpointPrefix",e.metadata.endpointPrefix),l(this,"signingName",e.metadata.signingName),l(this,"globalEndpoint",e.metadata.globalEndpoint),l(this,"signatureVersion",e.metadata.signatureVersion),l(this,"jsonVersion",e.metadata.jsonVersion),l(this,"targetPrefix",e.metadata.targetPrefix),l(this,"protocol",e.metadata.protocol),l(this,"timestampFormat",e.metadata.timestampFormat),l(this,"xmlNamespaceUri",e.metadata.xmlNamespace),l(this,"abbreviation",e.metadata.serviceAbbreviation),l(this,"fullName",e.metadata.serviceFullName),l(this,"serviceId",e.metadata.serviceId),p&&c[p]&&l(this,"xmlNoDefaultLists",c[p].xmlNoDefaultLists,!1),d(this,"className",(function(){var t=e.metadata.serviceAbbreviation||e.metadata.serviceFullName;return t?("ElasticLoadBalancing"===(t=t.replace(/^Amazon|AWS\s*|\(.*|\s+|\W+/g,""))&&(t="ELB"),t):null})),l(this,"operations",new r(e.operations,t,(function(e,n){return new o(e,n,t)}),u.string.lowerFirst,(function(e,t){!0===t.endpointoperation&&l(n,"endpointOperation",u.string.lowerFirst(e)),t.endpointdiscovery&&!n.hasRequiredEndpointDiscovery&&l(n,"hasRequiredEndpointDiscovery",!0===t.endpointdiscovery.required)}))),l(this,"shapes",new r(e.shapes,t,(function(e,n){return a.create(n,t)}))),l(this,"paginators",new r(e.paginators,t,(function(e,n){return new i(e,n,t)}))),l(this,"waiters",new r(e.waiters,t,(function(e,n){return new s(e,n,t)}),u.string.lowerFirst)),t.documentation&&(l(this,"documentation",e.documentation),l(this,"documentationUrl",e.documentationUrl))}},function(e,t,n){var r=n(111),o=n(35),a=o.property,i=o.memoizedProperty;e.exports=function(e,t,n){var o=this;n=n||{},a(this,"name",t.name||e),a(this,"api",n.api,!1),t.http=t.http||{},a(this,"endpoint",t.endpoint),a(this,"httpMethod",t.http.method||"POST"),a(this,"httpPath",t.http.requestUri||"/"),a(this,"authtype",t.authtype||""),a(this,"endpointDiscoveryRequired",t.endpointdiscovery?t.endpointdiscovery.required?"REQUIRED":"OPTIONAL":"NULL"),a(this,"httpChecksumRequired",t.httpChecksumRequired,!1),i(this,"input",(function(){return t.input?r.create(t.input,n):new r.create({type:"structure"},n)})),i(this,"output",(function(){return t.output?r.create(t.output,n):new r.create({type:"structure"},n)})),i(this,"errors",(function(){var e=[];if(!t.errors)return null;for(var o=0;o<t.errors.length;o++)e.push(r.create(t.errors[o],n));return e})),i(this,"paginator",(function(){return n.api.paginators[e]})),n.documentation&&(a(this,"documentation",t.documentation),a(this,"documentationUrl",t.documentationUrl)),i(this,"idempotentMembers",(function(){var e=[],t=o.input,n=t.members;if(!t.members)return e;for(var r in n)n.hasOwnProperty(r)&&!0===n[r].isIdempotent&&e.push(r);return e})),i(this,"hasEventOutput",(function(){return function(e){var t=e.members,n=e.payload;if(!e.members)return!1;if(n){return t[n].isEventStream}for(var r in t)if(!t.hasOwnProperty(r)&&!0===t[r].isEventStream)return!0;return!1}(o.output)}))}},function(e,t,n){var r=n(35).property;e.exports=function(e,t){r(this,"inputToken",t.input_token),r(this,"limitKey",t.limit_key),r(this,"moreResults",t.more_results),r(this,"outputToken",t.output_token),r(this,"resultKey",t.result_key)}},function(e,t,n){var r=n(35),o=r.property;e.exports=function(e,t,n){n=n||{},o(this,"name",e),o(this,"api",n.api,!1),t.operation&&o(this,"operation",r.string.lowerFirst(t.operation));var a=this;["type","description","delay","maxAttempts","acceptors"].forEach((function(e){var n=t[e];n&&o(a,e,n)}))}},function(e){e.exports=JSON.parse('{"acm":{"name":"ACM","cors":true},"apigateway":{"name":"APIGateway","cors":true},"applicationautoscaling":{"prefix":"application-autoscaling","name":"ApplicationAutoScaling","cors":true},"appstream":{"name":"AppStream"},"autoscaling":{"name":"AutoScaling","cors":true},"batch":{"name":"Batch"},"budgets":{"name":"Budgets"},"clouddirectory":{"name":"CloudDirectory","versions":["2016-05-10*"]},"cloudformation":{"name":"CloudFormation","cors":true},"cloudfront":{"name":"CloudFront","versions":["2013-05-12*","2013-11-11*","2014-05-31*","2014-10-21*","2014-11-06*","2015-04-17*","2015-07-27*","2015-09-17*","2016-01-13*","2016-01-28*","2016-08-01*","2016-08-20*","2016-09-07*","2016-09-29*","2016-11-25*","2017-03-25*","2017-10-30*","2018-06-18*","2018-11-05*","2019-03-26*"],"cors":true},"cloudhsm":{"name":"CloudHSM","cors":true},"cloudsearch":{"name":"CloudSearch"},"cloudsearchdomain":{"name":"CloudSearchDomain"},"cloudtrail":{"name":"CloudTrail","cors":true},"cloudwatch":{"prefix":"monitoring","name":"CloudWatch","cors":true},"cloudwatchevents":{"prefix":"events","name":"CloudWatchEvents","versions":["2014-02-03*"],"cors":true},"cloudwatchlogs":{"prefix":"logs","name":"CloudWatchLogs","cors":true},"codebuild":{"name":"CodeBuild","cors":true},"codecommit":{"name":"CodeCommit","cors":true},"codedeploy":{"name":"CodeDeploy","cors":true},"codepipeline":{"name":"CodePipeline","cors":true},"cognitoidentity":{"prefix":"cognito-identity","name":"CognitoIdentity","cors":true},"cognitoidentityserviceprovider":{"prefix":"cognito-idp","name":"CognitoIdentityServiceProvider","cors":true},"cognitosync":{"prefix":"cognito-sync","name":"CognitoSync","cors":true},"configservice":{"prefix":"config","name":"ConfigService","cors":true},"cur":{"name":"CUR","cors":true},"datapipeline":{"name":"DataPipeline"},"devicefarm":{"name":"DeviceFarm","cors":true},"directconnect":{"name":"DirectConnect","cors":true},"directoryservice":{"prefix":"ds","name":"DirectoryService"},"discovery":{"name":"Discovery"},"dms":{"name":"DMS"},"dynamodb":{"name":"DynamoDB","cors":true},"dynamodbstreams":{"prefix":"streams.dynamodb","name":"DynamoDBStreams","cors":true},"ec2":{"name":"EC2","versions":["2013-06-15*","2013-10-15*","2014-02-01*","2014-05-01*","2014-06-15*","2014-09-01*","2014-10-01*","2015-03-01*","2015-04-15*","2015-10-01*","2016-04-01*","2016-09-15*"],"cors":true},"ecr":{"name":"ECR","cors":true},"ecs":{"name":"ECS","cors":true},"efs":{"prefix":"elasticfilesystem","name":"EFS","cors":true},"elasticache":{"name":"ElastiCache","versions":["2012-11-15*","2014-03-24*","2014-07-15*","2014-09-30*"],"cors":true},"elasticbeanstalk":{"name":"ElasticBeanstalk","cors":true},"elb":{"prefix":"elasticloadbalancing","name":"ELB","cors":true},"elbv2":{"prefix":"elasticloadbalancingv2","name":"ELBv2","cors":true},"emr":{"prefix":"elasticmapreduce","name":"EMR","cors":true},"es":{"name":"ES"},"elastictranscoder":{"name":"ElasticTranscoder","cors":true},"firehose":{"name":"Firehose","cors":true},"gamelift":{"name":"GameLift","cors":true},"glacier":{"name":"Glacier"},"health":{"name":"Health"},"iam":{"name":"IAM","cors":true},"importexport":{"name":"ImportExport"},"inspector":{"name":"Inspector","versions":["2015-08-18*"],"cors":true},"iot":{"name":"Iot","cors":true},"iotdata":{"prefix":"iot-data","name":"IotData","cors":true},"kinesis":{"name":"Kinesis","cors":true},"kinesisanalytics":{"name":"KinesisAnalytics"},"kms":{"name":"KMS","cors":true},"lambda":{"name":"Lambda","cors":true},"lexruntime":{"prefix":"runtime.lex","name":"LexRuntime","cors":true},"lightsail":{"name":"Lightsail"},"machinelearning":{"name":"MachineLearning","cors":true},"marketplacecommerceanalytics":{"name":"MarketplaceCommerceAnalytics","cors":true},"marketplacemetering":{"prefix":"meteringmarketplace","name":"MarketplaceMetering"},"mturk":{"prefix":"mturk-requester","name":"MTurk","cors":true},"mobileanalytics":{"name":"MobileAnalytics","cors":true},"opsworks":{"name":"OpsWorks","cors":true},"opsworkscm":{"name":"OpsWorksCM"},"organizations":{"name":"Organizations"},"pinpoint":{"name":"Pinpoint"},"polly":{"name":"Polly","cors":true},"rds":{"name":"RDS","versions":["2014-09-01*"],"cors":true},"redshift":{"name":"Redshift","cors":true},"rekognition":{"name":"Rekognition","cors":true},"resourcegroupstaggingapi":{"name":"ResourceGroupsTaggingAPI"},"route53":{"name":"Route53","cors":true},"route53domains":{"name":"Route53Domains","cors":true},"s3":{"name":"S3","dualstackAvailable":true,"cors":true},"s3control":{"name":"S3Control","dualstackAvailable":true,"xmlNoDefaultLists":true},"servicecatalog":{"name":"ServiceCatalog","cors":true},"ses":{"prefix":"email","name":"SES","cors":true},"shield":{"name":"Shield"},"simpledb":{"prefix":"sdb","name":"SimpleDB"},"sms":{"name":"SMS"},"snowball":{"name":"Snowball"},"sns":{"name":"SNS","cors":true},"sqs":{"name":"SQS","cors":true},"ssm":{"name":"SSM","cors":true},"storagegateway":{"name":"StorageGateway","cors":true},"stepfunctions":{"prefix":"states","name":"StepFunctions"},"sts":{"name":"STS","cors":true},"support":{"name":"Support"},"swf":{"name":"SWF"},"xray":{"name":"XRay","cors":true},"waf":{"name":"WAF","cors":true},"wafregional":{"prefix":"waf-regional","name":"WAFRegional"},"workdocs":{"name":"WorkDocs","cors":true},"workspaces":{"name":"WorkSpaces"},"codestar":{"name":"CodeStar"},"lexmodelbuildingservice":{"prefix":"lex-models","name":"LexModelBuildingService","cors":true},"marketplaceentitlementservice":{"prefix":"entitlement.marketplace","name":"MarketplaceEntitlementService"},"athena":{"name":"Athena","cors":true},"greengrass":{"name":"Greengrass"},"dax":{"name":"DAX"},"migrationhub":{"prefix":"AWSMigrationHub","name":"MigrationHub"},"cloudhsmv2":{"name":"CloudHSMV2","cors":true},"glue":{"name":"Glue"},"mobile":{"name":"Mobile"},"pricing":{"name":"Pricing","cors":true},"costexplorer":{"prefix":"ce","name":"CostExplorer","cors":true},"mediaconvert":{"name":"MediaConvert"},"medialive":{"name":"MediaLive"},"mediapackage":{"name":"MediaPackage"},"mediastore":{"name":"MediaStore"},"mediastoredata":{"prefix":"mediastore-data","name":"MediaStoreData","cors":true},"appsync":{"name":"AppSync"},"guardduty":{"name":"GuardDuty"},"mq":{"name":"MQ"},"comprehend":{"name":"Comprehend","cors":true},"iotjobsdataplane":{"prefix":"iot-jobs-data","name":"IoTJobsDataPlane"},"kinesisvideoarchivedmedia":{"prefix":"kinesis-video-archived-media","name":"KinesisVideoArchivedMedia","cors":true},"kinesisvideomedia":{"prefix":"kinesis-video-media","name":"KinesisVideoMedia","cors":true},"kinesisvideo":{"name":"KinesisVideo","cors":true},"sagemakerruntime":{"prefix":"runtime.sagemaker","name":"SageMakerRuntime"},"sagemaker":{"name":"SageMaker"},"translate":{"name":"Translate","cors":true},"resourcegroups":{"prefix":"resource-groups","name":"ResourceGroups","cors":true},"alexaforbusiness":{"name":"AlexaForBusiness"},"cloud9":{"name":"Cloud9"},"serverlessapplicationrepository":{"prefix":"serverlessrepo","name":"ServerlessApplicationRepository"},"servicediscovery":{"name":"ServiceDiscovery"},"workmail":{"name":"WorkMail"},"autoscalingplans":{"prefix":"autoscaling-plans","name":"AutoScalingPlans"},"transcribeservice":{"prefix":"transcribe","name":"TranscribeService"},"connect":{"name":"Connect","cors":true},"acmpca":{"prefix":"acm-pca","name":"ACMPCA"},"fms":{"name":"FMS"},"secretsmanager":{"name":"SecretsManager","cors":true},"iotanalytics":{"name":"IoTAnalytics","cors":true},"iot1clickdevicesservice":{"prefix":"iot1click-devices","name":"IoT1ClickDevicesService"},"iot1clickprojects":{"prefix":"iot1click-projects","name":"IoT1ClickProjects"},"pi":{"name":"PI"},"neptune":{"name":"Neptune"},"mediatailor":{"name":"MediaTailor"},"eks":{"name":"EKS"},"macie":{"name":"Macie"},"dlm":{"name":"DLM"},"signer":{"name":"Signer"},"chime":{"name":"Chime"},"pinpointemail":{"prefix":"pinpoint-email","name":"PinpointEmail"},"ram":{"name":"RAM"},"route53resolver":{"name":"Route53Resolver"},"pinpointsmsvoice":{"prefix":"sms-voice","name":"PinpointSMSVoice"},"quicksight":{"name":"QuickSight"},"rdsdataservice":{"prefix":"rds-data","name":"RDSDataService"},"amplify":{"name":"Amplify"},"datasync":{"name":"DataSync"},"robomaker":{"name":"RoboMaker"},"transfer":{"name":"Transfer"},"globalaccelerator":{"name":"GlobalAccelerator"},"comprehendmedical":{"name":"ComprehendMedical","cors":true},"kinesisanalyticsv2":{"name":"KinesisAnalyticsV2"},"mediaconnect":{"name":"MediaConnect"},"fsx":{"name":"FSx"},"securityhub":{"name":"SecurityHub"},"appmesh":{"name":"AppMesh","versions":["2018-10-01*"]},"licensemanager":{"prefix":"license-manager","name":"LicenseManager"},"kafka":{"name":"Kafka"},"apigatewaymanagementapi":{"name":"ApiGatewayManagementApi"},"apigatewayv2":{"name":"ApiGatewayV2"},"docdb":{"name":"DocDB"},"backup":{"name":"Backup"},"worklink":{"name":"WorkLink"},"textract":{"name":"Textract"},"managedblockchain":{"name":"ManagedBlockchain"},"mediapackagevod":{"prefix":"mediapackage-vod","name":"MediaPackageVod"},"groundstation":{"name":"GroundStation"},"iotthingsgraph":{"name":"IoTThingsGraph"},"iotevents":{"name":"IoTEvents"},"ioteventsdata":{"prefix":"iotevents-data","name":"IoTEventsData"},"personalize":{"name":"Personalize","cors":true},"personalizeevents":{"prefix":"personalize-events","name":"PersonalizeEvents","cors":true},"personalizeruntime":{"prefix":"personalize-runtime","name":"PersonalizeRuntime","cors":true},"applicationinsights":{"prefix":"application-insights","name":"ApplicationInsights"},"servicequotas":{"prefix":"service-quotas","name":"ServiceQuotas"},"ec2instanceconnect":{"prefix":"ec2-instance-connect","name":"EC2InstanceConnect"},"eventbridge":{"name":"EventBridge"},"lakeformation":{"name":"LakeFormation"},"forecastservice":{"prefix":"forecast","name":"ForecastService","cors":true},"forecastqueryservice":{"prefix":"forecastquery","name":"ForecastQueryService","cors":true},"qldb":{"name":"QLDB"},"qldbsession":{"prefix":"qldb-session","name":"QLDBSession"},"workmailmessageflow":{"name":"WorkMailMessageFlow"},"codestarnotifications":{"prefix":"codestar-notifications","name":"CodeStarNotifications"},"savingsplans":{"name":"SavingsPlans"},"sso":{"name":"SSO"},"ssooidc":{"prefix":"sso-oidc","name":"SSOOIDC"},"marketplacecatalog":{"prefix":"marketplace-catalog","name":"MarketplaceCatalog"},"dataexchange":{"name":"DataExchange"},"sesv2":{"name":"SESV2"},"migrationhubconfig":{"prefix":"migrationhub-config","name":"MigrationHubConfig"},"connectparticipant":{"name":"ConnectParticipant"},"appconfig":{"name":"AppConfig"},"iotsecuretunneling":{"name":"IoTSecureTunneling"},"wafv2":{"name":"WAFV2"},"elasticinference":{"prefix":"elastic-inference","name":"ElasticInference"},"imagebuilder":{"name":"Imagebuilder"},"schemas":{"name":"Schemas"},"accessanalyzer":{"name":"AccessAnalyzer"},"codegurureviewer":{"prefix":"codeguru-reviewer","name":"CodeGuruReviewer"},"codeguruprofiler":{"name":"CodeGuruProfiler"},"computeoptimizer":{"prefix":"compute-optimizer","name":"ComputeOptimizer"},"frauddetector":{"name":"FraudDetector"},"kendra":{"name":"Kendra"},"networkmanager":{"name":"NetworkManager"},"outposts":{"name":"Outposts"},"augmentedairuntime":{"prefix":"sagemaker-a2i-runtime","name":"AugmentedAIRuntime"},"ebs":{"name":"EBS"},"kinesisvideosignalingchannels":{"prefix":"kinesis-video-signaling","name":"KinesisVideoSignalingChannels","cors":true},"detective":{"name":"Detective"},"codestarconnections":{"prefix":"codestar-connections","name":"CodeStarconnections"},"synthetics":{"name":"Synthetics"},"iotsitewise":{"name":"IoTSiteWise"},"macie2":{"name":"Macie2"},"codeartifact":{"name":"CodeArtifact"},"honeycode":{"name":"Honeycode"},"ivs":{"name":"IVS"},"braket":{"name":"Braket"},"identitystore":{"name":"IdentityStore"},"appflow":{"name":"Appflow"},"redshiftdata":{"prefix":"redshift-data","name":"RedshiftData"},"ssoadmin":{"prefix":"sso-admin","name":"SSOAdmin"},"timestreamquery":{"prefix":"timestream-query","name":"TimestreamQuery"},"timestreamwrite":{"prefix":"timestream-write","name":"TimestreamWrite"},"s3outposts":{"name":"S3Outposts"},"databrew":{"name":"DataBrew"},"servicecatalogappregistry":{"prefix":"servicecatalog-appregistry","name":"ServiceCatalogAppRegistry"},"networkfirewall":{"prefix":"network-firewall","name":"NetworkFirewall"},"mwaa":{"name":"MWAA"},"amplifybackend":{"name":"AmplifyBackend"},"appintegrations":{"name":"AppIntegrations"},"connectcontactlens":{"prefix":"connect-contact-lens","name":"ConnectContactLens"},"devopsguru":{"prefix":"devops-guru","name":"DevOpsGuru"},"ecrpublic":{"prefix":"ecr-public","name":"ECRPUBLIC"},"lookoutvision":{"name":"LookoutVision"},"sagemakerfeaturestoreruntime":{"prefix":"sagemaker-featurestore-runtime","name":"SageMakerFeatureStoreRuntime"},"customerprofiles":{"prefix":"customer-profiles","name":"CustomerProfiles"},"auditmanager":{"name":"AuditManager"},"emrcontainers":{"prefix":"emr-containers","name":"EMRcontainers"},"healthlake":{"name":"HealthLake"},"sagemakeredge":{"prefix":"sagemaker-edge","name":"SagemakerEdge"},"amp":{"name":"Amp"},"greengrassv2":{"name":"GreengrassV2"},"iotdeviceadvisor":{"name":"IotDeviceAdvisor"},"iotfleethub":{"name":"IoTFleetHub"},"iotwireless":{"name":"IoTWireless"},"location":{"name":"Location","cors":true},"wellarchitected":{"name":"WellArchitected"},"lexmodelsv2":{"prefix":"models.lex.v2","name":"LexModelsV2"},"lexruntimev2":{"prefix":"runtime.lex.v2","name":"LexRuntimeV2","cors":true},"fis":{"name":"Fis"},"lookoutmetrics":{"name":"LookoutMetrics"},"mgn":{"name":"Mgn"},"lookoutequipment":{"name":"LookoutEquipment"},"nimble":{"name":"Nimble"},"finspace":{"name":"Finspace"},"finspacedata":{"prefix":"finspace-data","name":"Finspacedata"},"ssmcontacts":{"prefix":"ssm-contacts","name":"SSMContacts"},"ssmincidents":{"prefix":"ssm-incidents","name":"SSMIncidents"},"applicationcostprofiler":{"name":"ApplicationCostProfiler"},"apprunner":{"name":"AppRunner"},"proton":{"name":"Proton"},"route53recoverycluster":{"prefix":"route53-recovery-cluster","name":"Route53RecoveryCluster"},"route53recoverycontrolconfig":{"prefix":"route53-recovery-control-config","name":"Route53RecoveryControlConfig"},"route53recoveryreadiness":{"prefix":"route53-recovery-readiness","name":"Route53RecoveryReadiness"},"chimesdkidentity":{"prefix":"chime-sdk-identity","name":"ChimeSDKIdentity"},"chimesdkmessaging":{"prefix":"chime-sdk-messaging","name":"ChimeSDKMessaging"},"snowdevicemanagement":{"prefix":"snow-device-management","name":"SnowDeviceManagement"},"memorydb":{"name":"MemoryDB"},"opensearch":{"name":"OpenSearch"},"kafkaconnect":{"name":"KafkaConnect"},"voiceid":{"prefix":"voice-id","name":"VoiceID"},"wisdom":{"name":"Wisdom"},"account":{"name":"Account"},"cloudcontrol":{"name":"CloudControl"},"grafana":{"name":"Grafana"},"panorama":{"name":"Panorama"}}')},function(e,t,n){var r=n(18);r.SequentialExecutor=r.util.inherit({constructor:function(){this._events={}},listeners:function(e){return this._events[e]?this._events[e].slice(0):[]},on:function(e,t,n){return this._events[e]?n?this._events[e].unshift(t):this._events[e].push(t):this._events[e]=[t],this},onAsync:function(e,t,n){return t._isAsync=!0,this.on(e,t,n)},removeListener:function(e,t){var n=this._events[e];if(n){for(var r=n.length,o=-1,a=0;a<r;++a)n[a]===t&&(o=a);o>-1&&n.splice(o,1)}return this},removeAllListeners:function(e){return e?delete this._events[e]:this._events={},this},emit:function(e,t,n){n||(n=function(){});var r=this.listeners(e),o=r.length;return this.callListeners(r,t,n),o>0},callListeners:function(e,t,n,o){var a=this,i=o||null;function s(o){if(o&&(i=r.util.error(i||new Error,o),a._haltHandlersOnError))return n.call(a,i);a.callListeners(e,t,n,i)}for(;e.length>0;){var c=e.shift();if(c._isAsync)return void c.apply(a,t.concat([s]));try{c.apply(a,t)}catch(e){i=r.util.error(i||new Error,e)}if(i&&a._haltHandlersOnError)return void n.call(a,i)}n.call(a,i)},addListeners:function(e){var t=this;return e._events&&(e=e._events),r.util.each(e,(function(e,n){"function"==typeof n&&(n=[n]),r.util.arrayEach(n,(function(n){t.on(e,n)}))})),t},addNamedListener:function(e,t,n,r){return this[e]=n,this.addListener(t,n,r),this},addNamedAsyncListener:function(e,t,n,r){return n._isAsync=!0,this.addNamedListener(e,t,n,r)},addNamedListeners:function(e){var t=this;return e((function(){t.addNamedListener.apply(t,arguments)}),(function(){t.addNamedAsyncListener.apply(t,arguments)})),this}}),r.SequentialExecutor.prototype.addListener=r.SequentialExecutor.prototype.on,e.exports=r.SequentialExecutor},function(e,t,n){var r=n(18);r.Credentials=r.util.inherit({constructor:function(){if(r.util.hideProperties(this,["secretAccessKey"]),this.expired=!1,this.expireTime=null,this.refreshCallbacks=[],1===arguments.length&&"object"==typeof arguments[0]){var e=arguments[0].credentials||arguments[0];this.accessKeyId=e.accessKeyId,this.secretAccessKey=e.secretAccessKey,this.sessionToken=e.sessionToken}else this.accessKeyId=arguments[0],this.secretAccessKey=arguments[1],this.sessionToken=arguments[2]},expiryWindow:15,needsRefresh:function(){var e=r.util.date.getDate().getTime(),t=new Date(e+1e3*this.expiryWindow);return!!(this.expireTime&&t>this.expireTime)||(this.expired||!this.accessKeyId||!this.secretAccessKey)},get:function(e){var t=this;this.needsRefresh()?this.refresh((function(n){n||(t.expired=!1),e&&e(n)})):e&&e()},refresh:function(e){this.expired=!1,e()},coalesceRefresh:function(e,t){var n=this;1===n.refreshCallbacks.push(e)&&n.load((function(e){r.util.arrayEach(n.refreshCallbacks,(function(n){t?n(e):r.util.defer((function(){n(e)}))})),n.refreshCallbacks.length=0}))},load:function(e){e()}}),r.Credentials.addPromisesToClass=function(e){this.prototype.getPromise=r.util.promisifyMethod("get",e),this.prototype.refreshPromise=r.util.promisifyMethod("refresh",e)},r.Credentials.deletePromisesFromClass=function(){delete this.prototype.getPromise,delete this.prototype.refreshPromise},r.util.addPromises(r.Credentials)},function(e,t,n){var r=n(18);r.CredentialProviderChain=r.util.inherit(r.Credentials,{constructor:function(e){this.providers=e||r.CredentialProviderChain.defaultProviders.slice(0),this.resolveCallbacks=[]},resolve:function(e){var t=this;if(0===t.providers.length)return e(new Error("No providers")),t;if(1===t.resolveCallbacks.push(e)){var n=0,o=t.providers.slice(0);!function e(a,i){if(!a&&i||n===o.length)return r.util.arrayEach(t.resolveCallbacks,(function(e){e(a,i)})),void(t.resolveCallbacks.length=0);var s=o[n++];(i="function"==typeof s?s.call():s).get?i.get((function(t){e(t,t?null:i)})):e(null,i)}()}return t}}),r.CredentialProviderChain.defaultProviders=[],r.CredentialProviderChain.addPromisesToClass=function(e){this.prototype.resolvePromise=r.util.promisifyMethod("resolve",e)},r.CredentialProviderChain.deletePromisesFromClass=function(){delete this.prototype.resolvePromise},r.util.addPromises(r.CredentialProviderChain)},function(e,t,n){var r=n(18),o=r.util.inherit;r.Endpoint=o({constructor:function(e,t){if(r.util.hideProperties(this,["slashes","auth","hash","search","query"]),null==e)throw new Error("Invalid endpoint: "+e);if("string"!=typeof e)return r.util.copy(e);e.match(/^http/)||(e=((t&&void 0!==t.sslEnabled?t.sslEnabled:r.config.sslEnabled)?"https":"http")+"://"+e);r.util.update(this,r.util.urlParse(e)),this.port?this.port=parseInt(this.port,10):this.port="https:"===this.protocol?443:80}}),r.HttpRequest=o({constructor:function(e,t){e=new r.Endpoint(e),this.method="POST",this.path=e.path||"/",this.headers={},this.body="",this.endpoint=e,this.region=t,this._userAgent="",this.setUserAgent()},setUserAgent:function(){this._userAgent=this.headers[this.getUserAgentHeaderName()]=r.util.userAgent()},getUserAgentHeaderName:function(){return(r.util.isBrowser()?"X-Amz-":"")+"User-Agent"},appendToUserAgent:function(e){"string"==typeof e&&e&&(this._userAgent+=" "+e),this.headers[this.getUserAgentHeaderName()]=this._userAgent},getUserAgent:function(){return this._userAgent},pathname:function(){return this.path.split("?",1)[0]},search:function(){var e=this.path.split("?",2)[1];return e?(e=r.util.queryStringParse(e),r.util.queryParamsToString(e)):""},updateEndpoint:function(e){var t=new r.Endpoint(e);this.endpoint=t,this.path=t.path||"/",this.headers.Host&&(this.headers.Host=t.host)}}),r.HttpResponse=o({constructor:function(){this.statusCode=void 0,this.headers={},this.body=void 0,this.streaming=!1,this.stream=null},createUnbufferedStream:function(){return this.streaming=!0,this.stream}}),r.HttpClient=o({}),r.HttpClient.getInstance=function(){return void 0===this.singleton&&(this.singleton=new this),this.singleton}},function(e,t,n){var r=n(18),o=r.util.inherit;r.Signers.V3=o(r.Signers.RequestSigner,{addAuthorization:function(e,t){var n=r.util.date.rfc822(t);this.request.headers["X-Amz-Date"]=n,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken),this.request.headers["X-Amzn-Authorization"]=this.authorization(e,n)},authorization:function(e){return"AWS3 AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,SignedHeaders="+this.signedHeaders()+",Signature="+this.signature(e)},signedHeaders:function(){var e=[];return r.util.arrayEach(this.headersToSign(),(function(t){e.push(t.toLowerCase())})),e.sort().join(";")},canonicalHeaders:function(){var e=this.request.headers,t=[];return r.util.arrayEach(this.headersToSign(),(function(n){t.push(n.toLowerCase().trim()+":"+String(e[n]).trim())})),t.sort().join("\n")+"\n"},headersToSign:function(){var e=[];return r.util.each(this.request.headers,(function(t){("Host"===t||"Content-Encoding"===t||t.match(/^X-Amz/i))&&e.push(t)})),e},signature:function(e){return r.util.crypto.hmac(e.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var e=[];return e.push(this.request.method),e.push("/"),e.push(""),e.push(this.canonicalHeaders()),e.push(this.request.body),r.util.crypto.sha256(e.join("\n"))}}),e.exports=r.Signers.V3},function(e,t,n){var r=n(18),o={},a=[],i="aws4_request";e.exports={createScope:function(e,t,n){return[e.substr(0,8),t,n,i].join("/")},getSigningKey:function(e,t,n,s,c){var u=[r.util.crypto.hmac(e.secretAccessKey,e.accessKeyId,"base64"),t,n,s].join("_");if((c=!1!==c)&&u in o)return o[u];var l=r.util.crypto.hmac("AWS4"+e.secretAccessKey,t,"buffer"),d=r.util.crypto.hmac(l,n,"buffer"),p=r.util.crypto.hmac(d,s,"buffer"),h=r.util.crypto.hmac(p,i,"buffer");return c&&(o[u]=h,a.push(u),a.length>50&&delete o[a.shift()]),h},emptyCache:function(){o={},a=[]}}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t,n){"use strict";t.decode=t.parse=n(360),t.encode=t.stringify=n(361)},function(e,t,n){(function(t){var r=n(18);function o(e,t){if("string"==typeof e){if(["legacy","regional"].indexOf(e.toLowerCase())>=0)return e.toLowerCase();throw r.util.error(new Error,t)}}e.exports=function(e,n){var a;if((e=e||{})[n.clientConfig]&&(a=o(e[n.clientConfig],{code:"InvalidConfiguration",message:'invalid "'+n.clientConfig+'" configuration. Expect "legacy"  or "regional". Got "'+e[n.clientConfig]+'".'})))return a;if(!r.util.isNode())return a;if(Object.prototype.hasOwnProperty.call(t.env,n.env)&&(a=o(t.env[n.env],{code:"InvalidEnvironmentalVariable",message:"invalid "+n.env+' environmental variable. Expect "legacy"  or "regional". Got "'+t.env[n.env]+'".'})))return a;var i={};try{i=r.util.getProfilesFromSharedConfig(r.util.iniLoader)[t.env.AWS_PROFILE||r.util.defaultProfile]}catch(e){}return i&&Object.prototype.hasOwnProperty.call(i,n.sharedConfig)&&(a=o(i[n.sharedConfig],{code:"InvalidConfiguration",message:"invalid "+n.sharedConfig+' profile config. Expect "legacy"  or "regional". Got "'+i[n.sharedConfig]+'".'})),a}}).call(this,n(51))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),o=n(6);var a=n(3),i=n(4);const s=Object(i.b)({sparseToDense_:function(e,t,n,i=0){const s=Object(a.a)(e,"sparseIndices","sparseToDense","int32"),c=Object(a.a)(t,"sparseValues","sparseToDense"),u=Object(a.a)(i,"defaultValue","sparseToDense",c.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,c,n,u);const l={sparseIndices:s,sparseValues:c,defaultValue:u},d={outputShape:n};return r.a.runKernel(o.Oc,l,d)}})},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";(function(e){var r,o,a,i=n(83),s=n(157),c=n.n(s);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof fetch&&(void 0!==e&&e.fetch?r=e.fetch:"undefined"!=typeof window&&window.fetch&&(r=window.fetch)),i.b&&(void 0!==e&&e.XMLHttpRequest?o=e.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(o=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&(void 0!==e&&e.ActiveXObject?a=e.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(a=window.ActiveXObject)),r||!s||o||a||(r=c.a||s),"function"!=typeof r&&(r=void 0);var l=function(e,t){if(t&&"object"===u(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e};t.a=function(e,t,n,s){return"function"==typeof n&&(s=n,n=void 0),s=s||function(){},r?function(e,t,n,o){e.queryStringParams&&(t=l(t,e.queryStringParams));var a=Object(i.a)({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);n&&(a["Content-Type"]="application/json"),r(t,Object(i.a)({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:a},"function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions)).then((function(e){if(!e.ok)return o(e.statusText||"Error",{status:e.status});e.text().then((function(t){o(null,{status:e.status,data:t})})).catch(o)})).catch(o)}(e,t,n,s):i.b||"function"==typeof ActiveXObject?function(e,t,n,r){n&&"object"===u(n)&&(n=l("",n).slice(1)),e.queryStringParams&&(t=l(t,e.queryStringParams));try{var i;(i=o?new o:new a("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var s=e.customHeaders;if(s="function"==typeof s?s():s)for(var c in s)i.setRequestHeader(c,s[c]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(e){console&&console.log(e)}}(e,t,n,s):void 0}}).call(this,n(73))},function(e,t,n){"use strict";t.a=n.p+"post-record-background-1da7e4b038a8687709702232fb209d8f.svg"},function(e,t,n){"use strict";t.a=n.p+"youtube-963faa7dbacceea02945f9569fd76204.svg"},function(e,t,n){"use strict";t.a=n.p+"google-classroom-8893e03c16d9af334967057b480c89ff.png"},function(e,t,n){"use strict";t.a=n.p+"rainyhearts-2f088ce263e644a4a5a65b954aca24d9.ttf"},function(e,t,n){"use strict";t.a=n.p+"Pixel-133ca106f990709dc70f8592a235ca95.ttf"},function(e,t,n){"use strict";t.a=n.p+"spinner_small_white-fcef4cea6556e6909a39e7544f1fab8b.gif"},function(e,t,n){"use strict";t.a=n.p+"spinner_small_themable_white-c3c80787a621844f6c9c13f571fa26c6.png"},function(e,t,n){"use strict";t.a=n.p+"icon_folder-eba24ffa8161be3250e784bc8c88744d.svg"},function(e,t,n){"use strict";t.a=n.p+"icon_all_sessions-063e40f20e927918eaecb5277bb237ce.png"},function(e,t,n){"use strict";t.a=n.p+"icon_folder_arrow-e18f3eaaa9ebe441dca23ba137312415.png"},function(e,t,n){"use strict";t.a=n.p+"icon_folder_tree-9853341a94c0d2368ad36459aeada13d.png"},function(e,t,n){var r=n(305);e.exports=function(e,t){if(null==e)return{};var n,o,a=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]},,,function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,i="ArrayBuffer"in e;if(i)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=l(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(e,t){var n,r,o=(t=t||{}).body;if(e instanceof A){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},b.call(A.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];x.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,n){return new Promise((function(r,a){var i=new A(e,n);if(i.signal&&i.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new x(o,n))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",c)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}w.polyfill=!0,e.fetch||(e.fetch=w,e.Headers=p,e.Request=A,e.Response=x),t.Headers=p,t.Request=A,t.Response=x,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},function(e,t,n){e.exports=n(298)()},function(e,t,n){"use strict";var r=n(299);function o(){}e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(303);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=u(e),r=n[0],i=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,i)),c=0,l=i>0?r-4:r,d=0;d<l;d+=4)t=o[e.charCodeAt(d)]<<18|o[e.charCodeAt(d+1)]<<12|o[e.charCodeAt(d+2)]<<6|o[e.charCodeAt(d+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;2===i&&(t=o[e.charCodeAt(d)]<<2|o[e.charCodeAt(d+1)]>>4,s[c++]=255&t);1===i&&(t=o[e.charCodeAt(d)]<<10|o[e.charCodeAt(d+1)]<<4|o[e.charCodeAt(d+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],i=16383,s=0,c=n-o;s<c;s+=i)a.push(l(e,s,s+i>c?c:s+i));1===o?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=i.length;s<c;++s)r[s]=i[s],o[i.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,a,i=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(r[(a=o)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var a,i,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?o-1:0,p=n?-1:1,h=e[t+d];for(d+=p,a=h&(1<<-l)-1,h>>=-l,l+=s;l>0;a=256*a+e[t+d],d+=p,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=r;l>0;i=256*i+e[t+d],d+=p,l-=8);if(0===a)a=1-u;else{if(a===c)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),a-=u}return(h?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,s,c,u=8*a-o-1,l=(1<<u)-1,d=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(i++,c/=2),i+d>=l?(s=0,i=l):i+d>=1?(s=(t*c-1)*Math.pow(2,o),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+h]=255&s,h+=f,s/=256,o-=8);for(i=i<<o|s,u+=o;u>0;e[n+h]=255&i,h+=f,i/=256,u-=8);e[n+h-f]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){var t=n(14);const r=()=>n(310);let o;class a{constructor(){this.util=n(311),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=Object(t.c)().global.fetch?Object(t.c)().global.fetch(e,n):(null==o&&(o=r()),o(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}Object(t.c)().get("IS_NODE")&&Object(t.c)().setPlatform("node",new a)}).call(this,n(51))},function(e,t){},function(e,t){},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new i(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n(52)&&n(86)?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.alea=c}(0,e,n(52))}).call(this,n(85)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n(52)&&n(86)?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xor128=c}(0,e,n(52))}).call(this,n(85)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n(52)&&n(86)?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xorwow=c}(0,e,n(52))}).call(this,n(85)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n(52)&&n(86)?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xorshift7=c}(0,e,n(52))}).call(this,n(85)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),o=0,a=-32;a<c;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n(52)&&n(86)?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xor4096=c}(0,e,n(52))}).call(this,n(85)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n(52)&&n(86)?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.tychei=c}(0,e,n(52))}).call(this,n(85)(e))},function(e,t,n){var r;!function(o,a){var i,s=this,c=256,u=a.pow(c,6),l=a.pow(2,52),d=2*l,p=255;function h(e,t,n){var r=[],p=b(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(c):(e=new Uint8Array(c),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(o)]}}():e,3),r),h=new f(r),A=function(){for(var e=h.g(6),t=u,n=0;e<l;)e=(e+n)*c,t*=c,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return A.int32=function(){return 0|h.g(4)},A.quick=function(){return h.g(4)/4294967296},A.double=A,b(y(h.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(a.random=e,t):e})(A,p,"global"in t?t.global:this==a,t.state)}function f(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);o<c;)i[o]=o++;for(o=0;o<c;o++)i[o]=i[a=p&a+e[o%n]+(t=i[o])],i[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,i=r.S;e--;)t=i[o=p&o+1],n=n*c+i[p&(i[o]=i[a=p&a+t])+(i[a]=t)];return r.i=o,r.j=a,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==o?e:e+"\0"}function b(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(a.seedrandom=h,b(a.random(),o),e.exports){e.exports=h;try{i=n(319)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,a,i,s,c=1,u={},l=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(f,0,e)}:(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(i+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[c]=o,r(c),c++},p.clearImmediate=h}function h(e){delete u[e]}function f(e){if(l)setTimeout(f,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(73),n(51))},function(e,t,n){var r=n(35);function o(){}function a(e){return e.isQueryName||"ec2"!==e.api.protocol?e.name:e.name[0].toUpperCase()+e.name.substr(1)}function i(e,t,n,o){r.each(n.members,(function(n,r){var i=t[n];if(null!=i){var c=a(r);s(c=e?e+"."+c:c,i,r,o)}}))}function s(e,t,n,o){null!=t&&("structure"===n.type?i(e,t,n,o):"list"===n.type?function(e,t,n,o){var i=n.member||{};0!==t.length?r.arrayEach(t,(function(t,r){var c="."+(r+1);if("ec2"===n.api.protocol)c+="";else if(n.flattened){if(i.name){var u=e.split(".");u.pop(),u.push(a(i)),e=u.join(".")}}else c="."+(i.name?i.name:"member")+c;s(e+c,t,i,o)})):o.call(this,e,null)}(e,t,n,o):"map"===n.type?function(e,t,n,o){var a=1;r.each(t,(function(t,r){var i=(n.flattened?".":".entry.")+a+++".",c=i+(n.key.name||"key"),u=i+(n.value.name||"value");s(e+c,t,n.key,o),s(e+u,r,n.value,o)}))}(e,t,n,o):o(e,n.toWireFormat(t).toString()))}o.prototype.serialize=function(e,t,n){i("",e,t,n)},e.exports=o},function(e,t,n){var r=n(35),o=n(323).XmlNode,a=n(325).XmlText;function i(){}function s(e,t,n){switch(n.type){case"structure":return function(e,t,n){r.arrayEach(n.memberNames,(function(r){var a=n.members[r];if("body"===a.location){var i=t[r],u=a.name;if(null!=i)if(a.isXmlAttribute)e.addAttribute(u,i);else if(a.flattened)s(e,i,a);else{var l=new o(u);e.addChildNode(l),c(l,a),s(l,i,a)}}}))}(e,t,n);case"map":return function(e,t,n){var a=n.key.name||"key",i=n.value.name||"value";r.each(t,(function(t,r){var c=new o(n.flattened?n.name:"entry");e.addChildNode(c);var u=new o(a),l=new o(i);c.addChildNode(u),c.addChildNode(l),s(u,t,n.key),s(l,r,n.value)}))}(e,t,n);case"list":return function(e,t,n){n.flattened?r.arrayEach(t,(function(t){var r=n.member.name||n.name,a=new o(r);e.addChildNode(a),s(a,t,n.member)})):r.arrayEach(t,(function(t){var r=n.member.name||"member",a=new o(r);e.addChildNode(a),s(a,t,n.member)}))}(e,t,n);default:return function(e,t,n){e.addChildNode(new a(n.toWireFormat(t)))}(e,t,n)}}function c(e,t,n){var r,o="xmlns";t.xmlNamespaceUri?(r=t.xmlNamespaceUri,t.xmlNamespacePrefix&&(o+=":"+t.xmlNamespacePrefix)):n&&t.api.xmlNamespaceUri&&(r=t.api.xmlNamespaceUri),r&&e.addAttribute(o,r)}i.prototype.toXML=function(e,t,n,r){var a=new o(n);return c(a,t,!0),s(a,e,t),a.children.length>0||r?a.toString():""},e.exports=i},function(e,t,n){var r=n(324).escapeAttribute;function o(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}o.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},o.prototype.addChildNode=function(e){return this.children.push(e),this},o.prototype.removeAttribute=function(e){return delete this.attributes[e],this},o.prototype.toString=function(){for(var e=Boolean(this.children.length),t="<"+this.name,n=this.attributes,o=0,a=Object.keys(n);o<a.length;o++){var i=a[o],s=n[i];null!=s&&(t+=" "+i+'="'+r(""+s)+'"')}return t+(e?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e.exports={XmlNode:o}},function(e,t){e.exports={escapeAttribute:function(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}},function(e,t,n){var r=n(326).escapeElement;function o(e){this.value=e}o.prototype.toString=function(){return r(""+this.value)},e.exports={XmlText:o}},function(e,t){e.exports={escapeElement:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}}},function(e,t){function n(e,t){if(!n.services.hasOwnProperty(e))throw new Error("InvalidService: Failed to load api for "+e);return n.services[e][t]}n.services={},e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(329),o=function(){function e(e){void 0===e&&(e=1e3),this.maxSize=e,this.cache=new r.LRUCache(e)}return Object.defineProperty(e.prototype,"size",{get:function(){return this.cache.length},enumerable:!0,configurable:!0}),e.prototype.put=function(t,n){var r="string"!=typeof t?e.getKeyString(t):t,o=this.populateValue(n);this.cache.put(r,o)},e.prototype.get=function(t){var n="string"!=typeof t?e.getKeyString(t):t,r=Date.now(),o=this.cache.get(n);if(o){for(var a=o.length-1;a>=0;a--){o[a].Expire<r&&o.splice(a,1)}if(0===o.length)return void this.cache.remove(n)}return o},e.getKeyString=function(e){for(var t=[],n=Object.keys(e).sort(),r=0;r<n.length;r++){var o=n[r];void 0!==e[o]&&t.push(e[o])}return t.join(" ")},e.prototype.populateValue=function(e){var t=Date.now();return e.map((function(e){return{Address:e.Address||"",Expire:t+60*(e.CachePeriodInMinutes||1)*1e3}}))},e.prototype.empty=function(){this.cache.empty()},e.prototype.remove=function(t){var n="string"!=typeof t?e.getKeyString(t):t;this.cache.remove(n)},e}();t.EndpointCache=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.key=e,this.value=t},o=function(){function e(e){if(this.nodeMap={},this.size=0,"number"!=typeof e||e<1)throw new Error("Cache size can only be positive number");this.sizeLimit=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),e.prototype.prependToList=function(e){this.headerNode?(this.headerNode.prev=e,e.next=this.headerNode):this.tailNode=e,this.headerNode=e,this.size++},e.prototype.removeFromTail=function(){if(this.tailNode){var e=this.tailNode,t=e.prev;return t&&(t.next=void 0),e.prev=void 0,this.tailNode=t,this.size--,e}},e.prototype.detachFromList=function(e){this.headerNode===e&&(this.headerNode=e.next),this.tailNode===e&&(this.tailNode=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.next=void 0,e.prev=void 0,this.size--},e.prototype.get=function(e){if(this.nodeMap[e]){var t=this.nodeMap[e];return this.detachFromList(t),this.prependToList(t),t.value}},e.prototype.remove=function(e){if(this.nodeMap[e]){var t=this.nodeMap[e];this.detachFromList(t),delete this.nodeMap[e]}},e.prototype.put=function(e,t){if(this.nodeMap[e])this.remove(e);else if(this.size===this.sizeLimit){var n=this.removeFromTail().key;delete this.nodeMap[n]}var o=new r(e,t);this.nodeMap[e]=o,this.prependToList(o)},e.prototype.empty=function(){for(var e=Object.keys(this.nodeMap),t=0;t<e.length;t++){var n=e[t],r=this.nodeMap[n];this.detachFromList(r),delete this.nodeMap[n]}},e}();t.LRUCache=o},function(e,t,n){(function(t){var r=n(18),o=n(243),a=n(164),i=r.util.inherit,s=0;r.Service=i({constructor:function(e){if(!this.loadServiceClass)throw r.util.error(new Error,"Service must be constructed with `new' operator");var t=this.loadServiceClass(e||{});if(t){var n=r.util.copy(e),o=new t(e);return Object.defineProperty(o,"_originalConfig",{get:function(){return n},enumerable:!1,configurable:!0}),o._clientId=++s,o}this.initialize(e)},initialize:function(e){var n=r.config[this.serviceIdentifier];if(this.config=new r.Config(r.config),n&&this.config.update(n,!0),e&&this.config.update(e,!0),this.validateService(),this.config.endpoint||a.configureEndpoint(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint),r.SequentialExecutor.call(this),r.Service.addDefaultMonitoringListeners(this),(this.config.clientSideMonitoring||r.Service._clientSideMonitoring)&&this.publisher){var o=this.publisher;this.addNamedListener("PUBLISH_API_CALL","apiCall",(function(e){t.nextTick((function(){o.eventHandler(e)}))})),this.addNamedListener("PUBLISH_API_ATTEMPT","apiCallAttempt",(function(e){t.nextTick((function(){o.eventHandler(e)}))}))}},validateService:function(){},loadServiceClass:function(e){var t=e;if(r.util.isEmpty(this.api)){if(t.apiConfig)return r.Service.defineServiceApi(this.constructor,t.apiConfig);if(this.constructor.services){(t=new r.Config(r.config)).update(e,!0);var n=t.apiVersions[this.constructor.serviceIdentifier];return n=n||t.apiVersion,this.getLatestServiceClass(n)}return null}return null},getLatestServiceClass:function(e){return e=this.getLatestServiceVersion(e),null===this.constructor.services[e]&&r.Service.defineServiceApi(this.constructor,e),this.constructor.services[e]},getLatestServiceVersion:function(e){if(!this.constructor.services||0===this.constructor.services.length)throw new Error("No services defined on "+this.constructor.serviceIdentifier);if(e?r.util.isType(e,Date)&&(e=r.util.date.iso8601(e).split("T")[0]):e="latest",Object.hasOwnProperty(this.constructor.services,e))return e;for(var t=Object.keys(this.constructor.services).sort(),n=null,o=t.length-1;o>=0;o--)if("*"!==t[o][t[o].length-1]&&(n=t[o]),t[o].substr(0,10)<=e)return n;throw new Error("Could not find "+this.constructor.serviceIdentifier+" API to satisfy version constraint `"+e+"'")},api:{},defaultRetryCount:3,customizeRequests:function(e){if(e){if("function"!=typeof e)throw new Error("Invalid callback type '"+typeof e+"' provided in customizeRequests");this.customRequestHandler=e}else this.customRequestHandler=null},makeRequest:function(e,t,n){if("function"==typeof t&&(n=t,t=null),t=t||{},this.config.params){var o=this.api.operations[e];o&&(t=r.util.copy(t),r.util.each(this.config.params,(function(e,n){o.input.members[e]&&(void 0!==t[e]&&null!==t[e]||(t[e]=n))})))}var a=new r.Request(this,e,t);return this.addAllRequestListeners(a),this.attachMonitoringEmitter(a),n&&a.send(n),a},makeUnauthenticatedRequest:function(e,t,n){"function"==typeof t&&(n=t,t={});var r=this.makeRequest(e,t).toUnauthenticated();return n?r.send(n):r},waitFor:function(e,t,n){return new r.ResourceWaiter(this,e).wait(t,n)},addAllRequestListeners:function(e){for(var t=[r.events,r.EventListeners.Core,this.serviceInterface(),r.EventListeners.CorePost],n=0;n<t.length;n++)t[n]&&e.addListeners(t[n]);this.config.paramValidation||e.removeListener("validate",r.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&e.addListeners(r.EventListeners.Logger),this.setupRequestListeners(e),"function"==typeof this.constructor.prototype.customRequestHandler&&this.constructor.prototype.customRequestHandler(e),Object.prototype.hasOwnProperty.call(this,"customRequestHandler")&&"function"==typeof this.customRequestHandler&&this.customRequestHandler(e)},apiCallEvent:function(e){var t=e.service.api.operations[e.operation],n={Type:"ApiCall",Api:t?t.name:e.operation,Version:1,Service:e.service.api.serviceId||e.service.api.endpointPrefix,Region:e.httpRequest.region,MaxRetriesExceeded:0,UserAgent:e.httpRequest.getUserAgent()},r=e.response;if(r.httpResponse.statusCode&&(n.FinalHttpStatusCode=r.httpResponse.statusCode),r.error){var o=r.error;r.httpResponse.statusCode>299?(o.code&&(n.FinalAwsException=o.code),o.message&&(n.FinalAwsExceptionMessage=o.message)):((o.code||o.name)&&(n.FinalSdkException=o.code||o.name),o.message&&(n.FinalSdkExceptionMessage=o.message))}return n},apiAttemptEvent:function(e){var t=e.service.api.operations[e.operation],n={Type:"ApiCallAttempt",Api:t?t.name:e.operation,Version:1,Service:e.service.api.serviceId||e.service.api.endpointPrefix,Fqdn:e.httpRequest.endpoint.hostname,UserAgent:e.httpRequest.getUserAgent()},r=e.response;return r.httpResponse.statusCode&&(n.HttpStatusCode=r.httpResponse.statusCode),!e._unAuthenticated&&e.service.config.credentials&&e.service.config.credentials.accessKeyId&&(n.AccessKey=e.service.config.credentials.accessKeyId),r.httpResponse.headers?(e.httpRequest.headers["x-amz-security-token"]&&(n.SessionToken=e.httpRequest.headers["x-amz-security-token"]),r.httpResponse.headers["x-amzn-requestid"]&&(n.XAmznRequestId=r.httpResponse.headers["x-amzn-requestid"]),r.httpResponse.headers["x-amz-request-id"]&&(n.XAmzRequestId=r.httpResponse.headers["x-amz-request-id"]),r.httpResponse.headers["x-amz-id-2"]&&(n.XAmzId2=r.httpResponse.headers["x-amz-id-2"]),n):n},attemptFailEvent:function(e){var t=this.apiAttemptEvent(e),n=e.response,r=n.error;return n.httpResponse.statusCode>299?(r.code&&(t.AwsException=r.code),r.message&&(t.AwsExceptionMessage=r.message)):((r.code||r.name)&&(t.SdkException=r.code||r.name),r.message&&(t.SdkExceptionMessage=r.message)),t},attachMonitoringEmitter:function(e){var t,n,o,a,i,s,c=0,u=this;e.on("validate",(function(){a=r.util.realClock.now(),s=Date.now()}),true),e.on("sign",(function(){n=r.util.realClock.now(),t=Date.now(),i=e.httpRequest.region,c++}),true),e.on("validateResponse",(function(){o=Math.round(r.util.realClock.now()-n)})),e.addNamedListener("API_CALL_ATTEMPT","success",(function(){var n=u.apiAttemptEvent(e);n.Timestamp=t,n.AttemptLatency=o>=0?o:0,n.Region=i,u.emit("apiCallAttempt",[n])})),e.addNamedListener("API_CALL_ATTEMPT_RETRY","retry",(function(){var a=u.attemptFailEvent(e);a.Timestamp=t,o=o||Math.round(r.util.realClock.now()-n),a.AttemptLatency=o>=0?o:0,a.Region=i,u.emit("apiCallAttempt",[a])})),e.addNamedListener("API_CALL","complete",(function(){var t=u.apiCallEvent(e);if(t.AttemptCount=c,!(t.AttemptCount<=0)){t.Timestamp=s;var n=Math.round(r.util.realClock.now()-a);t.Latency=n>=0?n:0;var o=e.response;o.error&&o.error.retryable&&"number"==typeof o.retryCount&&"number"==typeof o.maxRetries&&o.retryCount>=o.maxRetries&&(t.MaxRetriesExceeded=1),u.emit("apiCall",[t])}}))},setupRequestListeners:function(e){},getSigningName:function(){return this.api.signingName||this.api.endpointPrefix},getSignerClass:function(e){var t,n=null,o="";e&&(o=(n=(e.service.api.operations||{})[e.operation]||null)?n.authtype:"");return t=this.config.signatureVersion?this.config.signatureVersion:"v4"===o||"v4-unsigned-body"===o?"v4":this.api.signatureVersion,r.Signers.RequestSigner.getVersion(t)},serviceInterface:function(){switch(this.api.protocol){case"ec2":case"query":return r.EventListeners.Query;case"json":return r.EventListeners.Json;case"rest-json":return r.EventListeners.RestJson;case"rest-xml":return r.EventListeners.RestXml}if(this.api.protocol)throw new Error("Invalid service `protocol' "+this.api.protocol+" in API config")},successfulResponse:function(e){return e.httpResponse.statusCode<300},numRetries:function(){return void 0!==this.config.maxRetries?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(e,t){return r.util.calculateRetryDelay(e,this.config.retryDelayOptions,t)},retryableError:function(e){return!!this.timeoutError(e)||(!!this.networkingError(e)||(!!this.expiredCredentialsError(e)||(!!this.throttledError(e)||e.statusCode>=500)))},networkingError:function(e){return"NetworkingError"===e.code},timeoutError:function(e){return"TimeoutError"===e.code},expiredCredentialsError:function(e){return"ExpiredTokenException"===e.code},clockSkewError:function(e){switch(e.code){case"RequestTimeTooSkewed":case"RequestExpired":case"InvalidSignatureException":case"SignatureDoesNotMatch":case"AuthFailure":case"RequestInTheFuture":return!0;default:return!1}},getSkewCorrectedDate:function(){return new Date(Date.now()+this.config.systemClockOffset)},applyClockOffset:function(e){e&&(this.config.systemClockOffset=e-Date.now())},isClockSkewed:function(e){if(e)return Math.abs(this.getSkewCorrectedDate().getTime()-e)>=3e5},throttledError:function(e){if(429===e.statusCode)return!0;switch(e.code){case"ProvisionedThroughputExceededException":case"Throttling":case"ThrottlingException":case"RequestLimitExceeded":case"RequestThrottled":case"RequestThrottledException":case"TooManyRequestsException":case"TransactionInProgressException":case"EC2ThrottledException":return!0;default:return!1}},endpointFromTemplate:function(e){if("string"!=typeof e)return e;var t=e;return t=(t=(t=t.replace(/\{service\}/g,this.api.endpointPrefix)).replace(/\{region\}/g,a.getRealRegion(this.config.region))).replace(/\{scheme\}/g,this.config.sslEnabled?"https":"http")},setEndpoint:function(e){this.endpoint=new r.Endpoint(e,this.config)},paginationConfig:function(e,t){var n=this.api.operations[e].paginator;if(!n){if(t){var o=new Error;throw r.util.error(o,"No pagination configuration for "+e)}return null}return n}}),r.util.update(r.Service,{defineMethods:function(e){r.util.each(e.prototype.api.operations,(function(t){e.prototype[t]||("none"===e.prototype.api.operations[t].authtype?e.prototype[t]=function(e,n){return this.makeUnauthenticatedRequest(t,e,n)}:e.prototype[t]=function(e,n){return this.makeRequest(t,e,n)})}))},defineService:function(e,t,n){r.Service._serviceMap[e]=!0,Array.isArray(t)||(n=t,t=[]);var o=i(r.Service,n||{});if("string"==typeof e){r.Service.addVersions(o,t);var a=o.serviceIdentifier||e;o.serviceIdentifier=a}else o.prototype.api=e,r.Service.defineMethods(o);if(r.SequentialExecutor.call(this.prototype),!this.prototype.publisher&&r.util.clientSideMonitoring){var s=r.util.clientSideMonitoring.Publisher,c=(0,r.util.clientSideMonitoring.configProvider)();this.prototype.publisher=new s(c),c.enabled&&(r.Service._clientSideMonitoring=!0)}return r.SequentialExecutor.call(o.prototype),r.Service.addDefaultMonitoringListeners(o.prototype),o},addVersions:function(e,t){Array.isArray(t)||(t=[t]),e.services=e.services||{};for(var n=0;n<t.length;n++)void 0===e.services[t[n]]&&(e.services[t[n]]=null);e.apiVersions=Object.keys(e.services).sort()},defineServiceApi:function(e,t,n){var a=i(e,{serviceIdentifier:e.serviceIdentifier});function s(t){t.isApi?a.prototype.api=t:a.prototype.api=new o(t,{serviceIdentifier:e.serviceIdentifier})}if("string"==typeof t){if(n)s(n);else try{s(r.apiLoader(e.serviceIdentifier,t))}catch(n){throw r.util.error(n,{message:"Could not find API configuration "+e.serviceIdentifier+"-"+t})}Object.prototype.hasOwnProperty.call(e.services,t)||(e.apiVersions=e.apiVersions.concat(t).sort()),e.services[t]=a}else s(t);return r.Service.defineMethods(a),a},hasService:function(e){return Object.prototype.hasOwnProperty.call(r.Service._serviceMap,e)},addDefaultMonitoringListeners:function(e){e.addNamedListener("MONITOR_EVENTS_BUBBLE","apiCallAttempt",(function(t){var n=Object.getPrototypeOf(e);n._events&&n.emit("apiCallAttempt",[t])})),e.addNamedListener("CALL_EVENTS_BUBBLE","apiCall",(function(t){var n=Object.getPrototypeOf(e);n._events&&n.emit("apiCall",[t])}))},_serviceMap:{}}),r.util.mixin(r.Service,r.SequentialExecutor),e.exports=r.Service}).call(this,n(51))},function(e){e.exports=JSON.parse('{"rules":{"*/*":{"endpoint":"{service}.{region}.amazonaws.com"},"fips-*/*":"fipsStandard","fips-us-gov-*/*":"fipsStandard","fips-cn-*/*":{"endpoint":"{service}-fips.{region}.amazonaws.com.cn"},"cn-*/*":{"endpoint":"{service}.{region}.amazonaws.com.cn"},"us-iso-*/*":{"endpoint":"{service}.{region}.c2s.ic.gov"},"us-isob-*/*":{"endpoint":"{service}.{region}.sc2s.sgov.gov"},"*/budgets":"globalSSL","*/cloudfront":"globalSSL","*/sts":"globalSSL","*/importexport":{"endpoint":"{service}.amazonaws.com","signatureVersion":"v2","globalEndpoint":true},"*/route53":"globalSSL","cn-*/route53":{"endpoint":"{service}.amazonaws.com.cn","globalEndpoint":true,"signingRegion":"cn-northwest-1"},"us-gov-*/route53":"globalGovCloud","*/waf":"globalSSL","*/iam":"globalSSL","cn-*/iam":{"endpoint":"{service}.cn-north-1.amazonaws.com.cn","globalEndpoint":true,"signingRegion":"cn-north-1"},"us-gov-*/iam":"globalGovCloud","us-gov-*/sts":{"endpoint":"{service}.{region}.amazonaws.com"},"us-gov-west-1/s3":"s3signature","us-west-1/s3":"s3signature","us-west-2/s3":"s3signature","eu-west-1/s3":"s3signature","ap-southeast-1/s3":"s3signature","ap-southeast-2/s3":"s3signature","ap-northeast-1/s3":"s3signature","sa-east-1/s3":"s3signature","us-east-1/s3":{"endpoint":"{service}.amazonaws.com","signatureVersion":"s3"},"us-east-1/sdb":{"endpoint":"{service}.amazonaws.com","signatureVersion":"v2"},"*/sdb":{"endpoint":"{service}.{region}.amazonaws.com","signatureVersion":"v2"},"fips-*/api.ecr":"fips.api.ecr","fips-us-gov-*/api.ecr":"fips.api.ecr","fips-*/api.sagemaker":"fips.api.sagemaker","fips-us-gov-*/api.sagemaker":"fips.api.sagemaker","fips-*/batch":"fipsDotPrefix","fips-*/eks":"fipsDotPrefix","fips-*/models.lex":"fips.models.lex","fips-us-gov-*/models.lex":"fips.models.lex","fips-*/runtime.lex":"fips.runtime.lex","fips-us-gov-*/runtime.lex":"fips.runtime.lex","fips-*/runtime.sagemaker":{"endpoint":"runtime-fips.sagemaker.{region}.amazonaws.com"},"fips-*/streams.dynamodb":{"endpoint":"dynamodb-fips.{region}.amazonaws.com"},"fips-*/route53":"fipsWithoutRegion","fips-*/transcribe":"fipsDotPrefix","fips-us-gov-*/transcribe":"fipsDotPrefix","fips-*/waf":"fipsWithoutRegion","fips-accesspoint-*/*":{"endpoint":"{service}-accesspoint-fips.{region}.amazonaws.com"},"fips-us-gov-*/acm-pca":"fipsWithServiceOnly","fips-us-gov-*/batch":"fipsWithServiceOnly","fips-us-gov-*/config":"fipsWithServiceOnly","fips-us-gov-*/eks":"fipsWithServiceOnly","fips-us-gov-*/elasticmapreduce":"fipsWithServiceOnly","fips-us-gov-*/identitystore":"fipsWithServiceOnly","fips-us-gov-*/dynamodb":"fipsWithServiceOnly","fips-us-gov-*/elasticloadbalancing":"fipsWithServiceOnly","fips-us-gov-*/guardduty":"fipsWithServiceOnly","fips-us-gov-*/monitoring":"fipsWithServiceOnly","fips-aws-us-gov-global/organizations":"fipsWithServiceOnly","fips-us-gov-*/resource-groups":"fipsWithServiceOnly","fips-aws-us-gov-global/route53":{"endpoint":"route53.us-gov.amazonaws.com"},"fips-us-gov-*/runtime.sagemaker":"fipsWithServiceOnly","fips-us-gov-*/servicecatalog-appregistry":"fipsWithServiceOnly","fips-us-gov-*/servicequotas":"fipsWithServiceOnly","fips-us-gov-*/ssm":"fipsWithServiceOnly","fips-us-gov-*/sts":"fipsWithServiceOnly","fips-us-gov-west-1/states":"fipsWithServiceOnly","fips-us-gov-*/support":"fipsWithServiceOnly","fips-us-gov-*/streams.dynamodb":{"endpoint":"dynamodb.{region}.amazonaws.com"},"fips-us-iso-east-1/elasticfilesystem":{"endpoint":"elasticfilesystem-fips.{region}.c2s.ic.gov"}},"patterns":{"globalSSL":{"endpoint":"https://{service}.amazonaws.com","globalEndpoint":true,"signingRegion":"us-east-1"},"globalGovCloud":{"endpoint":"{service}.us-gov.amazonaws.com","globalEndpoint":true,"signingRegion":"us-gov-west-1"},"s3signature":{"endpoint":"{service}.{region}.amazonaws.com","signatureVersion":"s3"},"fipsStandard":{"endpoint":"{service}-fips.{region}.amazonaws.com"},"fipsDotPrefix":{"endpoint":"fips.{service}.{region}.amazonaws.com"},"fipsWithoutRegion":{"endpoint":"{service}-fips.amazonaws.com"},"fips.api.ecr":{"endpoint":"ecr-fips.{region}.amazonaws.com"},"fips.api.sagemaker":{"endpoint":"api-fips.sagemaker.{region}.amazonaws.com"},"fips.models.lex":{"endpoint":"models-fips.lex.{region}.amazonaws.com"},"fips.runtime.lex":{"endpoint":"runtime-fips.lex.{region}.amazonaws.com"},"fipsWithServiceOnly":{"endpoint":"{service}.{region}.amazonaws.com"}}}')},function(e,t,n){var r,o=n(18);n(249),n(250),o.Config=o.util.inherit({constructor:function(e){void 0===e&&(e={}),e=this.extractCredentials(e),o.util.each.call(this,this.keys,(function(t,n){this.set(t,e[t],n)}))},getCredentials:function(e){var t,n=this;function r(t){e(t,t?null:n.credentials)}function a(e,t){return new o.util.error(t||new Error,{code:"CredentialsError",message:e,name:"CredentialsError"})}n.credentials?"function"==typeof n.credentials.get?n.credentials.get((function(e){e&&(e=a("Could not load credentials from "+n.credentials.constructor.name,e)),r(e)})):(t=null,n.credentials.accessKeyId&&n.credentials.secretAccessKey||(t=a("Missing credentials")),r(t)):n.credentialProvider?n.credentialProvider.resolve((function(e,t){e&&(e=a("Could not load credentials from any providers",e)),n.credentials=t,r(e)})):r(a("No credentials to load"))},update:function(e,t){t=t||!1,e=this.extractCredentials(e),o.util.each.call(this,e,(function(e,n){(t||Object.prototype.hasOwnProperty.call(this.keys,e)||o.Service.hasService(e))&&this.set(e,n)}))},loadFromPath:function(e){this.clear();var t=JSON.parse(o.util.readFileSync(e)),n=new o.FileSystemCredentials(e),r=new o.CredentialProviderChain;return r.providers.unshift(n),r.resolve((function(e,n){if(e)throw e;t.credentials=n})),this.constructor(t),this},clear:function(){o.util.each.call(this,this.keys,(function(e){delete this[e]})),this.set("credentials",void 0),this.set("credentialProvider",void 0)},set:function(e,t,n){void 0===t?(void 0===n&&(n=this.keys[e]),this[e]="function"==typeof n?n.call(this):n):"httpOptions"===e&&this[e]?this[e]=o.util.merge(this[e],t):this[e]=t},keys:{credentials:null,credentialProvider:null,region:null,logger:null,apiVersions:{},apiVersion:null,endpoint:void 0,httpOptions:{timeout:12e4},maxRetries:void 0,maxRedirects:10,paramValidation:!0,sslEnabled:!0,s3ForcePathStyle:!1,s3BucketEndpoint:!1,s3DisableBodySigning:!0,s3UsEast1RegionalEndpoint:"legacy",s3UseArnRegion:void 0,computeChecksums:!0,convertResponseTypes:!0,correctClockSkew:!1,customUserAgent:null,dynamoDbCrc32:!0,systemClockOffset:0,signatureVersion:null,signatureCache:!0,retryDelayOptions:{},useAccelerateEndpoint:!1,clientSideMonitoring:!1,endpointDiscoveryEnabled:void 0,endpointCacheSize:1e3,hostPrefixEnabled:!0,stsRegionalEndpoints:"legacy"},extractCredentials:function(e){return e.accessKeyId&&e.secretAccessKey&&((e=o.util.copy(e)).credentials=new o.Credentials(e)),e},setPromisesDependency:function(e){r=e,null===e&&"function"==typeof Promise&&(r=Promise);var t=[o.Request,o.Credentials,o.CredentialProviderChain];o.S3&&(t.push(o.S3),o.S3.ManagedUpload&&t.push(o.S3.ManagedUpload)),o.util.addPromises(t,r)},getPromisesDependency:function(){return r}}),o.config=new o.Config},function(e,t,n){var r=n(18),o=n(248),a=n(334).discoverEndpoint;r.EventListeners={Core:{}},r.EventListeners={Core:(new o).addNamedListeners((function(e,t){t("VALIDATE_CREDENTIALS","validate",(function(e,t){if(!e.service.api.signatureVersion&&!e.service.config.signatureVersion)return t();e.service.config.getCredentials((function(n){n&&(e.response.error=r.util.error(n,{code:"CredentialsError",message:"Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1"})),t()}))})),e("VALIDATE_REGION","validate",(function(e){if(!e.service.isGlobalEndpoint){var t=new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);e.service.config.region?t.test(e.service.config.region)||(e.response.error=r.util.error(new Error,{code:"ConfigError",message:"Invalid region in config"})):e.response.error=r.util.error(new Error,{code:"ConfigError",message:"Missing region in config"})}})),e("BUILD_IDEMPOTENCY_TOKENS","validate",(function(e){if(e.service.api.operations){var t=e.service.api.operations[e.operation];if(t){var n=t.idempotentMembers;if(n.length){for(var o=r.util.copy(e.params),a=0,i=n.length;a<i;a++)o[n[a]]||(o[n[a]]=r.util.uuid.v4());e.params=o}}}})),e("VALIDATE_PARAMETERS","validate",(function(e){if(e.service.api.operations){var t=e.service.api.operations[e.operation].input,n=e.service.config.paramValidation;new r.ParamValidator(n).validate(t,e.params)}})),e("COMPUTE_CHECKSUM","afterBuild",(function(e){if(e.service.api.operations){var t=e.service.api.operations[e.operation];if(t){var n=e.httpRequest.body,o=n&&(r.util.Buffer.isBuffer(n)||"string"==typeof n),a=e.httpRequest.headers;if(t.httpChecksumRequired&&e.service.config.computeChecksums&&o&&!a["Content-MD5"]){var i=r.util.crypto.md5(n,"base64");a["Content-MD5"]=i}}}})),t("COMPUTE_SHA256","afterBuild",(function(e,t){if(e.haltHandlersOnError(),e.service.api.operations){var n=e.service.api.operations[e.operation],o=n?n.authtype:"";if(!e.service.api.signatureVersion&&!o&&!e.service.config.signatureVersion)return t();if(e.service.getSignerClass(e)===r.Signers.V4){var a=e.httpRequest.body||"";if(o.indexOf("unsigned-body")>=0)return e.httpRequest.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",t();r.util.computeSha256(a,(function(n,r){n?t(n):(e.httpRequest.headers["X-Amz-Content-Sha256"]=r,t())}))}else t()}})),e("SET_CONTENT_LENGTH","afterBuild",(function(e){var t=function(e){if(!e.service.api.operations)return"";var t=e.service.api.operations[e.operation];return t?t.authtype:""}(e),n=r.util.getRequestPayloadShape(e);if(void 0===e.httpRequest.headers["Content-Length"])try{var o=r.util.string.byteLength(e.httpRequest.body);e.httpRequest.headers["Content-Length"]=o}catch(r){if(n&&n.isStreaming){if(n.requiresLength)throw r;if(t.indexOf("unsigned-body")>=0)return void(e.httpRequest.headers["Transfer-Encoding"]="chunked");throw r}throw r}})),e("SET_HTTP_HOST","afterBuild",(function(e){e.httpRequest.headers.Host=e.httpRequest.endpoint.host})),e("RESTART","restart",(function(){var e=this.response.error;e&&e.retryable&&(this.httpRequest=new r.HttpRequest(this.service.endpoint,this.service.region),this.response.retryCount<this.service.config.maxRetries?this.response.retryCount++:this.response.error=null)}));t("DISCOVER_ENDPOINT","sign",a,!0),t("SIGN","sign",(function(e,t){var n=e.service,r=(e.service.api.operations||{})[e.operation],o=r?r.authtype:"";if(!n.api.signatureVersion&&!o&&!n.config.signatureVersion)return t();n.config.getCredentials((function(o,a){if(o)return e.response.error=o,t();try{var i=n.getSkewCorrectedDate(),s=new(n.getSignerClass(e))(e.httpRequest,n.getSigningName(e),{signatureCache:n.config.signatureCache,operation:r,signatureVersion:n.api.signatureVersion});s.setServiceClientId(n._clientId),delete e.httpRequest.headers.Authorization,delete e.httpRequest.headers.Date,delete e.httpRequest.headers["X-Amz-Date"],s.addAuthorization(a,i),e.signedAt=i}catch(t){e.response.error=t}t()}))})),e("VALIDATE_RESPONSE","validateResponse",(function(e){this.service.successfulResponse(e,this)?(e.data={},e.error=null):(e.data=null,e.error=r.util.error(new Error,{code:"UnknownError",message:"An unknown error occurred."}))})),t("SEND","send",(function(e,t){function n(n){e.httpResponse.stream=n;var o=e.request.httpRequest.stream,a=e.request.service,i=a.api,s=e.request.operation,c=i.operations[s]||{};n.on("headers",(function(o,i,s){if(e.request.emit("httpHeaders",[o,i,e,s]),!e.httpResponse.streaming)if(2===r.HttpClient.streamsApiVersion){if(c.hasEventOutput&&a.successfulResponse(e))return e.request.emit("httpDone"),void t();n.on("readable",(function(){var t=n.read();null!==t&&e.request.emit("httpData",[t,e])}))}else n.on("data",(function(t){e.request.emit("httpData",[t,e])}))})),n.on("end",(function(){if(!o||!o.didCallback){if(2===r.HttpClient.streamsApiVersion&&c.hasEventOutput&&a.successfulResponse(e))return;e.request.emit("httpDone"),t()}}))}function o(n){if("RequestAbortedError"!==n.code){var o="TimeoutError"===n.code?n.code:"NetworkingError";n=r.util.error(n,{code:o,region:e.request.httpRequest.region,hostname:e.request.httpRequest.endpoint.hostname,retryable:!0})}e.error=n,e.request.emit("httpError",[e.error,e],(function(){t()}))}function a(){var t,a=r.HttpClient.getInstance(),i=e.request.service.config.httpOptions||{};try{var s=a.handleRequest(e.request.httpRequest,i,n,o);(t=s).on("sendProgress",(function(t){e.request.emit("httpUploadProgress",[t,e])})),t.on("receiveProgress",(function(t){e.request.emit("httpDownloadProgress",[t,e])}))}catch(e){o(e)}}e.httpResponse._abortCallback=t,e.error=null,e.data=null,(e.request.service.getSkewCorrectedDate()-this.signedAt)/1e3>=600?this.emit("sign",[this],(function(e){e?t(e):a()})):a()})),e("HTTP_HEADERS","httpHeaders",(function(e,t,n,o){n.httpResponse.statusCode=e,n.httpResponse.statusMessage=o,n.httpResponse.headers=t,n.httpResponse.body=r.util.buffer.toBuffer(""),n.httpResponse.buffers=[],n.httpResponse.numBytes=0;var a=t.date||t.Date,i=n.request.service;if(a){var s=Date.parse(a);i.config.correctClockSkew&&i.isClockSkewed(s)&&i.applyClockOffset(s)}})),e("HTTP_DATA","httpData",(function(e,t){if(e){if(r.util.isNode()){t.httpResponse.numBytes+=e.length;var n=t.httpResponse.headers["content-length"],o={loaded:t.httpResponse.numBytes,total:n};t.request.emit("httpDownloadProgress",[o,t])}t.httpResponse.buffers.push(r.util.buffer.toBuffer(e))}})),e("HTTP_DONE","httpDone",(function(e){if(e.httpResponse.buffers&&e.httpResponse.buffers.length>0){var t=r.util.buffer.concat(e.httpResponse.buffers);e.httpResponse.body=t}delete e.httpResponse.numBytes,delete e.httpResponse.buffers})),e("FINALIZE_ERROR","retry",(function(e){e.httpResponse.statusCode&&(e.error.statusCode=e.httpResponse.statusCode,void 0===e.error.retryable&&(e.error.retryable=this.service.retryableError(e.error,this)))})),e("INVALIDATE_CREDENTIALS","retry",(function(e){if(e.error)switch(e.error.code){case"RequestExpired":case"ExpiredTokenException":case"ExpiredToken":e.error.retryable=!0,e.request.service.config.credentials.expired=!0}})),e("EXPIRED_SIGNATURE","retry",(function(e){var t=e.error;t&&"string"==typeof t.code&&"string"==typeof t.message&&t.code.match(/Signature/)&&t.message.match(/expired/)&&(e.error.retryable=!0)})),e("CLOCK_SKEWED","retry",(function(e){e.error&&this.service.clockSkewError(e.error)&&this.service.config.correctClockSkew&&(e.error.retryable=!0)})),e("REDIRECT","retry",(function(e){e.error&&e.error.statusCode>=300&&e.error.statusCode<400&&e.httpResponse.headers.location&&(this.httpRequest.endpoint=new r.Endpoint(e.httpResponse.headers.location),this.httpRequest.headers.Host=this.httpRequest.endpoint.host,e.error.redirect=!0,e.error.retryable=!0)})),e("RETRY_CHECK","retry",(function(e){e.error&&(e.error.redirect&&e.redirectCount<e.maxRedirects?e.error.retryDelay=0:e.retryCount<e.maxRetries&&(e.error.retryDelay=this.service.retryDelays(e.retryCount,e.error)||0))})),t("RESET_RETRY_STATE","afterRetry",(function(e,t){var n,r=!1;e.error&&(n=e.error.retryDelay||0,e.error.retryable&&e.retryCount<e.maxRetries?(e.retryCount++,r=!0):e.error.redirect&&e.redirectCount<e.maxRedirects&&(e.redirectCount++,r=!0)),r&&n>=0?(e.error=null,setTimeout(t,n)):t()}))})),CorePost:(new o).addNamedListeners((function(e){e("EXTRACT_REQUEST_ID","extractData",r.util.extractRequestId),e("EXTRACT_REQUEST_ID","extractError",r.util.extractRequestId),e("ENOTFOUND_ERROR","httpError",(function(e){if("NetworkingError"===e.code&&function(e){return"ENOTFOUND"===e.errno||"number"==typeof e.errno&&"function"==typeof r.util.getSystemErrorName&&["EAI_NONAME","EAI_NODATA"].indexOf(r.util.getSystemErrorName(e.errno)>=0)}(e)){var t="Inaccessible host: `"+e.hostname+"' at port `"+e.port+"'. This service may not be available in the `"+e.region+"' region.";this.response.error=r.util.error(new Error(t),{code:"UnknownEndpoint",region:e.region,hostname:e.hostname,retryable:!0,originalError:e})}}))})),Logger:(new o).addNamedListeners((function(e){e("LOG_REQUEST","complete",(function(e){var t=e.request,o=t.service.config.logger;if(o){var a=function(){var a=(e.request.service.getSkewCorrectedDate().getTime()-t.startTime.getTime())/1e3,s=!!o.isTTY,c=e.httpResponse.statusCode,u=t.params;t.service.api.operations&&t.service.api.operations[t.operation]&&t.service.api.operations[t.operation].input&&(u=i(t.service.api.operations[t.operation].input,t.params));var l=n(335).inspect(u,!0,null),d="";return s&&(d+="[33m"),d+="[AWS "+t.service.serviceIdentifier+" "+c,d+=" "+a.toString()+"s "+e.retryCount+" retries]",s&&(d+="[0;1m"),d+=" "+r.util.string.lowerFirst(t.operation),d+="("+l+")",s&&(d+="[0m"),d}();"function"==typeof o.log?o.log(a):"function"==typeof o.write&&o.write(a+"\n")}function i(e,t){if(!t)return t;if(e.isSensitive)return"***SensitiveInformation***";switch(e.type){case"structure":var n={};return r.util.each(t,(function(t,r){Object.prototype.hasOwnProperty.call(e.members,t)?n[t]=i(e.members[t],r):n[t]=r})),n;case"list":var o=[];return r.util.arrayEach(t,(function(t,n){o.push(i(e.member,t))})),o;case"map":var a={};return r.util.each(t,(function(t,n){a[t]=i(e.value,n)})),a;default:return t}}}))})),Json:(new o).addNamedListeners((function(e){var t=n(160);e("BUILD","build",t.buildRequest),e("EXTRACT_DATA","extractData",t.extractData),e("EXTRACT_ERROR","extractError",t.extractError)})),Rest:(new o).addNamedListeners((function(e){var t=n(119);e("BUILD","build",t.buildRequest),e("EXTRACT_DATA","extractData",t.extractData),e("EXTRACT_ERROR","extractError",t.extractError)})),RestJson:(new o).addNamedListeners((function(e){var t=n(241);e("BUILD","build",t.buildRequest),e("EXTRACT_DATA","extractData",t.extractData),e("EXTRACT_ERROR","extractError",t.extractError)})),RestXml:(new o).addNamedListeners((function(e){var t=n(242);e("BUILD","build",t.buildRequest),e("EXTRACT_DATA","extractData",t.extractData),e("EXTRACT_ERROR","extractError",t.extractError)})),Query:(new o).addNamedListeners((function(e){var t=n(239);e("BUILD","build",t.buildRequest),e("EXTRACT_DATA","extractData",t.extractData),e("EXTRACT_ERROR","extractError",t.extractError)}))}},function(e,t,n){(function(t){var r=n(18),o=n(35),a=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"];function i(e){var t=e.service,n=t.api||{},r=(n.operations,{});return t.config.region&&(r.region=t.config.region),n.serviceId&&(r.serviceId=n.serviceId),t.config.credentials.accessKeyId&&(r.accessKeyId=t.config.credentials.accessKeyId),r}function s(e,t,n){n&&null!=t&&"structure"===n.type&&n.required&&n.required.length>0&&o.arrayEach(n.required,(function(r){var o=n.members[r];if(!0===o.endpointDiscoveryId){var a=o.isLocationName?o.name:r;e[a]=String(t[r])}else s(e,t[r],o)}))}function c(e,t){var n={};return s(n,e.params,t),n}function u(e){var t=e.service,n=t.api,a=n.operations?n.operations[e.operation]:void 0,s=c(e,a?a.input:void 0),u=i(e);Object.keys(s).length>0&&(u=o.update(u,s),a&&(u.operation=a.name));var l=r.endpointCache.get(u);if(!l||1!==l.length||""!==l[0].Address)if(l&&l.length>0)e.httpRequest.updateEndpoint(l[0].Address);else{var d=t.makeRequest(n.endpointOperation,{Operation:a.name,Identifiers:s});p(d),d.removeListener("validate",r.EventListeners.Core.VALIDATE_PARAMETERS),d.removeListener("retry",r.EventListeners.Core.RETRY_CHECK),r.endpointCache.put(u,[{Address:"",CachePeriodInMinutes:1}]),d.send((function(e,t){t&&t.Endpoints?r.endpointCache.put(u,t.Endpoints):e&&r.endpointCache.put(u,[{Address:"",CachePeriodInMinutes:1}])}))}}var l={};function d(e,t){var n=e.service,a=n.api,s=a.operations?a.operations[e.operation]:void 0,u=s?s.input:void 0,d=c(e,u),h=i(e);Object.keys(d).length>0&&(h=o.update(h,d),s&&(h.operation=s.name));var f=r.EndpointCache.getKeyString(h),m=r.endpointCache.get(f);if(m&&1===m.length&&""===m[0].Address)return l[f]||(l[f]=[]),void l[f].push({request:e,callback:t});if(m&&m.length>0)e.httpRequest.updateEndpoint(m[0].Address),t();else{var g=n.makeRequest(a.endpointOperation,{Operation:s.name,Identifiers:d});g.removeListener("validate",r.EventListeners.Core.VALIDATE_PARAMETERS),p(g),r.endpointCache.put(f,[{Address:"",CachePeriodInMinutes:60}]),g.send((function(n,a){if(n){if(e.response.error=o.error(n,{retryable:!1}),r.endpointCache.remove(h),l[f]){var i=l[f];o.arrayEach(i,(function(e){e.request.response.error=o.error(n,{retryable:!1}),e.callback()})),delete l[f]}}else if(a&&(r.endpointCache.put(f,a.Endpoints),e.httpRequest.updateEndpoint(a.Endpoints[0].Address),l[f])){i=l[f];o.arrayEach(i,(function(e){e.request.httpRequest.updateEndpoint(a.Endpoints[0].Address),e.callback()})),delete l[f]}t()}))}}function p(e){var t=e.service.api.apiVersion;t&&!e.httpRequest.headers["x-amz-api-version"]&&(e.httpRequest.headers["x-amz-api-version"]=t)}function h(e){var t=e.error,n=e.httpResponse;if(t&&("InvalidEndpointException"===t.code||421===n.statusCode)){var a=e.request,s=a.service.api.operations||{},u=c(a,s[a.operation]?s[a.operation].input:void 0),l=i(a);Object.keys(u).length>0&&(l=o.update(l,u),s[a.operation]&&(l.operation=s[a.operation].name)),r.endpointCache.remove(l)}}function f(e){return["false","0"].indexOf(e)>=0}e.exports={discoverEndpoint:function(e,n){var i=e.service||{};if(function(e){if(e._originalConfig&&e._originalConfig.endpoint&&!0===e._originalConfig.endpointDiscoveryEnabled)throw o.error(new Error,{code:"ConfigurationException",message:"Custom endpoint is supplied; endpointDiscoveryEnabled must not be true."});var t=r.config[e.serviceIdentifier]||{};return Boolean(r.config.endpoint||t.endpoint||e._originalConfig&&e._originalConfig.endpoint)}(i)||e.isPresigned())return n();var s=(i.api.operations||{})[e.operation],c=s?s.endpointDiscoveryRequired:"NULL",l=function(e){var n=e.service||{};if(void 0!==n.config.endpointDiscoveryEnabled)return n.config.endpointDiscoveryEnabled;if(!o.isBrowser()){for(var i=0;i<a.length;i++){var s=a[i];if(Object.prototype.hasOwnProperty.call(t.env,s)){if(""===t.env[s]||void 0===t.env[s])throw o.error(new Error,{code:"ConfigurationException",message:"environmental variable "+s+" cannot be set to nothing"});return!f(t.env[s])}}var c={};try{c=r.util.iniLoader?r.util.iniLoader.loadFrom({isConfig:!0,filename:t.env[r.util.sharedConfigFileEnv]}):{}}catch(e){}var u=c[t.env.AWS_PROFILE||r.util.defaultProfile]||{};if(Object.prototype.hasOwnProperty.call(u,"endpoint_discovery_enabled")){if(void 0===u.endpoint_discovery_enabled)throw o.error(new Error,{code:"ConfigurationException",message:"config file entry 'endpoint_discovery_enabled' cannot be set to nothing"});return!f(u.endpoint_discovery_enabled)}}}(e),p=i.api.hasRequiredEndpointDiscovery;switch((l||p)&&e.httpRequest.appendToUserAgent("endpoint-discovery"),c){case"OPTIONAL":(l||p)&&(u(e),e.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",h)),n();break;case"REQUIRED":if(!1===l){e.response.error=o.error(new Error,{code:"ConfigurationException",message:"Endpoint Discovery is disabled but "+i.api.className+"."+e.operation+"() requires it. Please check your configurations."}),n();break}e.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",h),d(e,n);break;case"NULL":default:n()}},requiredDiscoverEndpoint:d,optionalDiscoverEndpoint:u,marshallCustomIdentifiers:c,getCacheKey:i,invalidateCachedEndpoint:h}}).call(this,n(51))},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,i=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<a;c=r[++n])m(c)||!v(c)?i+=" "+c:i+=" "+s(c);return i},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var a,i={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&w(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return b(o)||(o=l(e,o,r)),o}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(a)return a;var i=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),k(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return d(n);if(0===i.length){if(w(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(A(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return d(n)}var u,v="",C=!1,S=["{","}"];(h(n)&&(C=!0,S=["[","]"]),w(n))&&(v=" [Function"+(n.name?": "+n.name:"")+"]");return A(n)&&(v=" "+RegExp.prototype.toString.call(n)),x(n)&&(v=" "+Date.prototype.toUTCString.call(n)),k(n)&&(v=" "+d(n)),0!==i.length||C&&0!=n.length?r<0?A(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=C?function(e,t,n,r,o){for(var a=[],i=0,s=t.length;i<s;++i)I(t,String(i))?a.push(p(e,t,n,r,String(i),!0)):a.push("");return o.forEach((function(o){o.match(/^\d+$/)||a.push(p(e,t,n,r,o,!0))})),a}(e,n,r,s,i):i.map((function(t){return p(e,n,r,s,t,C)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,v,S)):S[0]+v+S[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o,a){var i,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),I(r,o)||(i="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=m(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(i)){if(a&&o.match(/^\d+$/))return s;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function A(e){return v(e)&&"[object RegExp]"===C(e)}function v(e){return"object"==typeof e&&null!==e}function x(e){return v(e)&&"[object Date]"===C(e)}function k(e){return v(e)&&("[object Error]"===C(e)||e instanceof Error)}function w(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!i[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;i[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else i[n]=function(){};return i[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=A,t.isObject=v,t.isDate=x,t.isError=k,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(336);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",E(),t.format.apply(t,arguments))},t.inherits=n(337),t._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return o.apply(a,arguments)};t.apply(this,n).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(N,t,i)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(51))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){var t=n(18),r=n(339),o=t.util.inherit,a=t.util.domain,i=n(165),s={success:1,error:1,complete:1};var c=new r;c.setupStates=function(){var e=function(e,t){var n=this;n._haltHandlersOnError=!1,n.emit(n._asm.currentState,(function(e){if(e)if(r=n,Object.prototype.hasOwnProperty.call(s,r._asm.currentState)){if(!(a&&n.domain instanceof a.Domain))throw e;e.domainEmitter=n,e.domain=n.domain,e.domainThrown=!1,n.domain.emit("error",e)}else n.response.error=e,t(e);else t(n.response.error);var r}))};this.addState("validate","build","error",e),this.addState("build","afterBuild","restart",e),this.addState("afterBuild","sign","restart",e),this.addState("sign","send","retry",e),this.addState("retry","afterRetry","afterRetry",e),this.addState("afterRetry","sign","error",e),this.addState("send","validateResponse","retry",e),this.addState("validateResponse","extractData","extractError",e),this.addState("extractError","extractData","retry",e),this.addState("extractData","success","retry",e),this.addState("restart","build","error",e),this.addState("success","complete","complete",e),this.addState("error","complete","complete",e),this.addState("complete",null,null,e)},c.setupStates(),t.Request=o({constructor:function(e,n,o){var i=e.endpoint,s=e.config.region,u=e.config.customUserAgent;e.signingRegion?s=e.signingRegion:e.isGlobalEndpoint&&(s="us-east-1"),this.domain=a&&a.active,this.service=e,this.operation=n,this.params=o||{},this.httpRequest=new t.HttpRequest(i,s),this.httpRequest.appendToUserAgent(u),this.startTime=e.getSkewCorrectedDate(),this.response=new t.Response(this),this._asm=new r(c.states,"validate"),this._haltHandlersOnError=!1,t.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(e){return e&&(this.httpRequest.appendToUserAgent("callback"),this.on("complete",(function(t){e.call(t,t.error,t.data)}))),this.runTo(),this.response},build:function(e){return this.runTo("send",e)},runTo:function(e,t){return this._asm.runTo(e,t,this),this},abort:function(){return this.removeAllListeners("validateResponse"),this.removeAllListeners("extractError"),this.on("validateResponse",(function(e){e.error=t.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1})})),this.httpRequest.stream&&!this.httpRequest.stream.didCallback&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners("send")),this},eachPage:function(e){e=t.util.fn.makeAsync(e,3),this.on("complete",(function n(r){e.call(r,r.error,r.data,(function(o){!1!==o&&(r.hasNextPage()?r.nextPage().on("complete",n).send():e.call(r,null,null,t.util.fn.noop))}))})).send()},eachItem:function(e){var n=this;this.eachPage((function(r,o){if(r)return e(r,null);if(null===o)return e(null,null);var a=n.service.paginationConfig(n.operation).resultKey;Array.isArray(a)&&(a=a[0]);var s=i.search(o,a),c=!0;return t.util.arrayEach(s,(function(n){if(!1===(c=e(null,n)))return t.util.abort})),c}))},isPageable:function(){return!!this.service.paginationConfig(this.operation)},createReadStream:function(){var n=t.util.stream,r=this,o=null;return 2===t.HttpClient.streamsApiVersion?(o=new n.PassThrough,e.nextTick((function(){r.send()}))):((o=new n.Stream).readable=!0,o.sent=!1,o.on("newListener",(function(t){o.sent||"data"!==t||(o.sent=!0,e.nextTick((function(){r.send()})))}))),this.on("error",(function(e){o.emit("error",e)})),this.on("httpHeaders",(function(e,a,i){if(e<300){r.removeListener("httpData",t.EventListeners.Core.HTTP_DATA),r.removeListener("httpError",t.EventListeners.Core.HTTP_ERROR),r.on("httpError",(function(e){i.error=e,i.error.retryable=!1}));var s,c=!1;if("HEAD"!==r.httpRequest.method&&(s=parseInt(a["content-length"],10)),void 0!==s&&!isNaN(s)&&s>=0){c=!0;var u=0}var l=function(){c&&u!==s?o.emit("error",t.util.error(new Error("Stream content length mismatch. Received "+u+" of "+s+" bytes."),{code:"StreamContentLengthMismatch"})):2===t.HttpClient.streamsApiVersion?o.end():o.emit("end")},d=i.httpResponse.createUnbufferedStream();if(2===t.HttpClient.streamsApiVersion)if(c){var p=new n.PassThrough;p._write=function(e){return e&&e.length&&(u+=e.length),n.PassThrough.prototype._write.apply(this,arguments)},p.on("end",l),o.on("error",(function(e){c=!1,d.unpipe(p),p.emit("end"),p.end()})),d.pipe(p).pipe(o,{end:!1})}else d.pipe(o);else c&&d.on("data",(function(e){e&&e.length&&(u+=e.length)})),d.on("data",(function(e){o.emit("data",e)})),d.on("end",l);d.on("error",(function(e){c=!1,o.emit("error",e)}))}})),o},emitEvent:function(e,n,r){"function"==typeof n&&(r=n,n=null),r||(r=function(){}),n||(n=this.eventParameters(e,this.response)),t.SequentialExecutor.prototype.emit.call(this,e,n,(function(e){e&&(this.response.error=e),r.call(this,e)}))},eventParameters:function(e){switch(e){case"restart":case"validate":case"sign":case"build":case"afterValidate":case"afterBuild":return[this];case"error":return[this.response.error,this.response];default:return[this.response]}},presign:function(e,n){return n||"function"!=typeof e||(n=e,e=null),(new t.Signers.Presign).sign(this.toGet(),e,n)},isPresigned:function(){return Object.prototype.hasOwnProperty.call(this.httpRequest.headers,"presigned-expires")},toUnauthenticated:function(){return this._unAuthenticated=!0,this.removeListener("validate",t.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener("sign",t.EventListeners.Core.SIGN),this},toGet:function(){return"query"!==this.service.api.protocol&&"ec2"!==this.service.api.protocol||(this.removeListener("build",this.buildAsGet),this.addListener("build",this.buildAsGet)),this},buildAsGet:function(e){e.httpRequest.method="GET",e.httpRequest.path=e.service.endpoint.path+"?"+e.httpRequest.body,e.httpRequest.body="",delete e.httpRequest.headers["Content-Length"],delete e.httpRequest.headers["Content-Type"]},haltHandlersOnError:function(){this._haltHandlersOnError=!0}}),t.Request.addPromisesToClass=function(e){this.prototype.promise=function(){var t=this;return this.httpRequest.appendToUserAgent("promise"),new e((function(e,n){t.on("complete",(function(t){t.error?n(t.error):e(Object.defineProperty(t.data||{},"$response",{value:t}))})),t.runTo()}))}},t.Request.deletePromisesFromClass=function(){delete this.prototype.promise},t.util.addPromises(t.Request),t.util.mixin(t.Request,t.SequentialExecutor)}).call(this,n(51))},function(e,t){function n(e,t){this.currentState=t||null,this.states=e||{}}n.prototype.runTo=function(e,t,n,r){"function"==typeof e&&(r=n,n=t,t=e,e=null);var o=this,a=o.states[o.currentState];a.fn.call(n||o,r,(function(r){if(r){if(!a.fail)return t?t.call(n,r):null;o.currentState=a.fail}else{if(!a.accept)return t?t.call(n):null;o.currentState=a.accept}if(o.currentState===e)return t?t.call(n,r):null;o.runTo(e,t,n,r)}))},n.prototype.addState=function(e,t,n,r){return"function"==typeof t?(r=t,t=null,n=null):"function"==typeof n&&(r=n,n=null),this.currentState||(this.currentState=e),this.states[e]={accept:t,fail:n,fn:r},this},e.exports=n},function(e,t,n){var r=n(18),o=r.util.inherit,a=n(165);r.Response=o({constructor:function(e){this.request=e,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new r.HttpResponse,e&&(this.maxRetries=e.service.numRetries(),this.maxRedirects=e.service.config.maxRedirects)},nextPage:function(e){var t,n=this.request.service,o=this.request.operation;try{t=n.paginationConfig(o,!0)}catch(e){this.error=e}if(!this.hasNextPage()){if(e)e(this.error,null);else if(this.error)throw this.error;return null}var a=r.util.copy(this.request.params);if(this.nextPageTokens){var i=t.inputToken;"string"==typeof i&&(i=[i]);for(var s=0;s<i.length;s++)a[i[s]]=this.nextPageTokens[s];return n.makeRequest(this.request.operation,a,e)}return e?e(null,null):null},hasNextPage:function(){return this.cacheNextPageTokens(),!!this.nextPageTokens||void 0===this.nextPageTokens&&void 0},cacheNextPageTokens:function(){if(Object.prototype.hasOwnProperty.call(this,"nextPageTokens"))return this.nextPageTokens;this.nextPageTokens=void 0;var e=this.request.service.paginationConfig(this.request.operation);if(!e)return this.nextPageTokens;if(this.nextPageTokens=null,e.moreResults&&!a.search(this.data,e.moreResults))return this.nextPageTokens;var t=e.outputToken;return"string"==typeof t&&(t=[t]),r.util.arrayEach.call(this,t,(function(e){var t=a.search(this.data,e);t&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(t))})),this.nextPageTokens}})},function(e,t,n){var r=n(18),o=r.util.inherit,a=n(165);function i(e){var t=e.request._waiter,n=t.config.acceptors,r=!1,o="retry";n.forEach((function(n){if(!r){var a=t.matchers[n.matcher];a&&a(e,n.expected,n.argument)&&(r=!0,o=n.state)}})),!r&&e.error&&(o="failure"),"success"===o?t.setSuccess(e):t.setError(e,"retry"===o)}r.ResourceWaiter=o({constructor:function(e,t){this.service=e,this.state=t,this.loadWaiterConfig(this.state)},service:null,state:null,config:null,matchers:{path:function(e,t,n){try{var r=a.search(e.data,n)}catch(e){return!1}return a.strictDeepEqual(r,t)},pathAll:function(e,t,n){try{var r=a.search(e.data,n)}catch(e){return!1}Array.isArray(r)||(r=[r]);var o=r.length;if(!o)return!1;for(var i=0;i<o;i++)if(!a.strictDeepEqual(r[i],t))return!1;return!0},pathAny:function(e,t,n){try{var r=a.search(e.data,n)}catch(e){return!1}Array.isArray(r)||(r=[r]);for(var o=r.length,i=0;i<o;i++)if(a.strictDeepEqual(r[i],t))return!0;return!1},status:function(e,t){var n=e.httpResponse.statusCode;return"number"==typeof n&&n===t},error:function(e,t){return"string"==typeof t&&e.error?t===e.error.code:t===!!e.error}},listeners:(new r.SequentialExecutor).addNamedListeners((function(e){e("RETRY_CHECK","retry",(function(e){var t=e.request._waiter;e.error&&"ResourceNotReady"===e.error.code&&(e.error.retryDelay=1e3*(t.config.delay||0))})),e("CHECK_OUTPUT","extractData",i),e("CHECK_ERROR","extractError",i)})),wait:function(e,t){"function"==typeof e&&(t=e,e=void 0),e&&e.$waiter&&("number"==typeof(e=r.util.copy(e)).$waiter.delay&&(this.config.delay=e.$waiter.delay),"number"==typeof e.$waiter.maxAttempts&&(this.config.maxAttempts=e.$waiter.maxAttempts),delete e.$waiter);var n=this.service.makeRequest(this.config.operation,e);return n._waiter=this,n.response.maxRetries=this.config.maxAttempts,n.addListeners(this.listeners),t&&n.send(t),n},setSuccess:function(e){e.error=null,e.data=e.data||{},e.request.removeAllListeners("extractData")},setError:function(e,t){e.data=null,e.error=r.util.error(e.error||new Error,{code:"ResourceNotReady",message:"Resource is not in the state "+this.state,retryable:t})},loadWaiterConfig:function(e){if(!this.service.api.waiters[e])throw new r.util.error(new Error,{code:"StateNotFoundError",message:"State "+e+" not found."});this.config=r.util.copy(this.service.api.waiters[e])}})},function(e,t,n){var r=n(18),o=r.util.inherit;r.Signers.RequestSigner=o({constructor:function(e){this.request=e},setServiceClientId:function(e){this.serviceClientId=e},getServiceClientId:function(){return this.serviceClientId}}),r.Signers.RequestSigner.getVersion=function(e){switch(e){case"v2":return r.Signers.V2;case"v3":return r.Signers.V3;case"s3v4":case"v4":return r.Signers.V4;case"s3":return r.Signers.S3;case"v3https":return r.Signers.V3Https}throw new Error("Unknown signing version "+e)},n(343),n(252),n(344),n(345),n(346),n(347)},function(e,t,n){var r=n(18),o=r.util.inherit;r.Signers.V2=o(r.Signers.RequestSigner,{addAuthorization:function(e,t){t||(t=r.util.date.getDate());var n=this.request;n.params.Timestamp=r.util.date.iso8601(t),n.params.SignatureVersion="2",n.params.SignatureMethod="HmacSHA256",n.params.AWSAccessKeyId=e.accessKeyId,e.sessionToken&&(n.params.SecurityToken=e.sessionToken),delete n.params.Signature,n.params.Signature=this.signature(e),n.body=r.util.queryParamsToString(n.params),n.headers["Content-Length"]=n.body.length},signature:function(e){return r.util.crypto.hmac(e.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var e=[];return e.push(this.request.method),e.push(this.request.endpoint.host.toLowerCase()),e.push(this.request.pathname()),e.push(r.util.queryParamsToString(this.request.params)),e.join("\n")}}),e.exports=r.Signers.V2},function(e,t,n){var r=n(18),o=r.util.inherit;n(252),r.Signers.V3Https=o(r.Signers.V3,{authorization:function(e){return"AWS3-HTTPS AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,Signature="+this.signature(e)},stringToSign:function(){return this.request.headers["X-Amz-Date"]}}),e.exports=r.Signers.V3Https},function(e,t,n){var r=n(18),o=n(253),a=r.util.inherit,i="presigned-expires";r.Signers.V4=a(r.Signers.RequestSigner,{constructor:function(e,t,n){r.Signers.RequestSigner.call(this,e),this.serviceName=t,n=n||{},this.signatureCache="boolean"!=typeof n.signatureCache||n.signatureCache,this.operation=n.operation,this.signatureVersion=n.signatureVersion},algorithm:"AWS4-HMAC-SHA256",addAuthorization:function(e,t){var n=r.util.date.iso8601(t).replace(/[:\-]|\.\d{3}/g,"");this.isPresigned()?this.updateForPresigned(e,n):this.addHeaders(e,n),this.request.headers.Authorization=this.authorization(e,n)},addHeaders:function(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken)},updateForPresigned:function(e,t){var n=this.credentialString(t),o={"X-Amz-Date":t,"X-Amz-Algorithm":this.algorithm,"X-Amz-Credential":e.accessKeyId+"/"+n,"X-Amz-Expires":this.request.headers[i],"X-Amz-SignedHeaders":this.signedHeaders()};e.sessionToken&&(o["X-Amz-Security-Token"]=e.sessionToken),this.request.headers["Content-Type"]&&(o["Content-Type"]=this.request.headers["Content-Type"]),this.request.headers["Content-MD5"]&&(o["Content-MD5"]=this.request.headers["Content-MD5"]),this.request.headers["Cache-Control"]&&(o["Cache-Control"]=this.request.headers["Cache-Control"]),r.util.each.call(this,this.request.headers,(function(e,t){if(e!==i&&this.isSignableHeader(e)){var n=e.toLowerCase();0===n.indexOf("x-amz-meta-")?o[n]=t:0===n.indexOf("x-amz-")&&(o[e]=t)}}));var a=this.request.path.indexOf("?")>=0?"&":"?";this.request.path+=a+r.util.queryParamsToString(o)},authorization:function(e,t){var n=[],r=this.credentialString(t);return n.push(this.algorithm+" Credential="+e.accessKeyId+"/"+r),n.push("SignedHeaders="+this.signedHeaders()),n.push("Signature="+this.signature(e,t)),n.join(", ")},signature:function(e,t){var n=o.getSigningKey(e,t.substr(0,8),this.request.region,this.serviceName,this.signatureCache);return r.util.crypto.hmac(n,this.stringToSign(t),"hex")},stringToSign:function(e){var t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")},canonicalString:function(){var e=[],t=this.request.pathname();return"s3"!==this.serviceName&&"s3v4"!==this.signatureVersion&&(t=r.util.uriEscapePath(t)),e.push(this.request.method),e.push(t),e.push(this.request.search()),e.push(this.canonicalHeaders()+"\n"),e.push(this.signedHeaders()),e.push(this.hexEncodedBodyHash()),e.join("\n")},canonicalHeaders:function(){var e=[];r.util.each.call(this,this.request.headers,(function(t,n){e.push([t,n])})),e.sort((function(e,t){return e[0].toLowerCase()<t[0].toLowerCase()?-1:1}));var t=[];return r.util.arrayEach.call(this,e,(function(e){var n=e[0].toLowerCase();if(this.isSignableHeader(n)){var o=e[1];if(null==o||"function"!=typeof o.toString)throw r.util.error(new Error("Header "+n+" contains invalid value"),{code:"InvalidHeader"});t.push(n+":"+this.canonicalHeaderValues(o.toString()))}})),t.join("\n")},canonicalHeaderValues:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},signedHeaders:function(){var e=[];return r.util.each.call(this,this.request.headers,(function(t){t=t.toLowerCase(),this.isSignableHeader(t)&&e.push(t)})),e.sort().join(";")},credentialString:function(e){return o.createScope(e.substr(0,8),this.request.region,this.serviceName)},hexEncodedHash:function(e){return r.util.crypto.sha256(e,"hex")},hexEncodedBodyHash:function(){var e=this.request;return this.isPresigned()&&["s3","s3-object-lambda"].indexOf(this.serviceName)>-1&&!e.body?"UNSIGNED-PAYLOAD":e.headers["X-Amz-Content-Sha256"]?e.headers["X-Amz-Content-Sha256"]:this.hexEncodedHash(this.request.body||"")},unsignableHeaders:["authorization","content-type","content-length","user-agent",i,"expect","x-amzn-trace-id"],isSignableHeader:function(e){return 0===e.toLowerCase().indexOf("x-amz-")||this.unsignableHeaders.indexOf(e)<0},isPresigned:function(){return!!this.request.headers[i]}}),e.exports=r.Signers.V4},function(e,t,n){var r=n(18),o=r.util.inherit;r.Signers.S3=o(r.Signers.RequestSigner,{subResources:{acl:1,accelerate:1,analytics:1,cors:1,lifecycle:1,delete:1,inventory:1,location:1,logging:1,metrics:1,notification:1,partNumber:1,policy:1,requestPayment:1,replication:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(e,t){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=r.util.date.rfc822(t)),e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken);var n=this.sign(e.secretAccessKey,this.stringToSign()),o="AWS "+e.accessKeyId+":"+n;this.request.headers.Authorization=o},stringToSign:function(){var e=this.request,t=[];t.push(e.method),t.push(e.headers["Content-MD5"]||""),t.push(e.headers["Content-Type"]||""),t.push(e.headers["presigned-expires"]||"");var n=this.canonicalizedAmzHeaders();return n&&t.push(n),t.push(this.canonicalizedResource()),t.join("\n")},canonicalizedAmzHeaders:function(){var e=[];r.util.each(this.request.headers,(function(t){t.match(/^x-amz-/i)&&e.push(t)})),e.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1}));var t=[];return r.util.arrayEach.call(this,e,(function(e){t.push(e.toLowerCase()+":"+String(this.request.headers[e]))})),t.join("\n")},canonicalizedResource:function(){var e=this.request,t=e.path.split("?"),n=t[0],o=t[1],a="";if(e.virtualHostedBucket&&(a+="/"+e.virtualHostedBucket),a+=n,o){var i=[];r.util.arrayEach.call(this,o.split("&"),(function(e){var t=e.split("=")[0],n=e.split("=")[1];if(this.subResources[t]||this.responseHeaders[t]){var r={name:t};void 0!==n&&(this.subResources[t]?r.value=n:r.value=decodeURIComponent(n)),i.push(r)}})),i.sort((function(e,t){return e.name<t.name?-1:1})),i.length&&(o=[],r.util.arrayEach(i,(function(e){void 0===e.value?o.push(e.name):o.push(e.name+"="+e.value)})),a+="?"+o.join("&"))}return a},sign:function(e,t){return r.util.crypto.hmac(e,t,"base64","sha1")}}),e.exports=r.Signers.S3},function(e,t,n){var r=n(18),o=r.util.inherit,a="presigned-expires";function i(e){var t=e.httpRequest.headers[a],n=e.service.getSignerClass(e);if(delete e.httpRequest.headers["User-Agent"],delete e.httpRequest.headers["X-Amz-User-Agent"],n===r.Signers.V4){if(t>604800){throw r.util.error(new Error,{code:"InvalidExpiryTime",message:"Presigning does not support expiry time greater than a week with SigV4 signing.",retryable:!1})}e.httpRequest.headers[a]=t}else{if(n!==r.Signers.S3)throw r.util.error(new Error,{message:"Presigning only supports S3 or SigV4 signing.",code:"UnsupportedSigner",retryable:!1});var o=e.service?e.service.getSkewCorrectedDate():r.util.date.getDate();e.httpRequest.headers[a]=parseInt(r.util.date.unixTimestamp(o)+t,10).toString()}}function s(e){var t=e.httpRequest.endpoint,n=r.util.urlParse(e.httpRequest.path),o={};n.search&&(o=r.util.queryStringParse(n.search.substr(1)));var i=e.httpRequest.headers.Authorization.split(" ");if("AWS"===i[0])i=i[1].split(":"),o.Signature=i.pop(),o.AWSAccessKeyId=i.join(":"),r.util.each(e.httpRequest.headers,(function(e,t){e===a&&(e="Expires"),0===e.indexOf("x-amz-meta-")&&(delete o[e],e=e.toLowerCase()),o[e]=t})),delete e.httpRequest.headers[a],delete o.Authorization,delete o.Host;else if("AWS4-HMAC-SHA256"===i[0]){i.shift();var s=i.join(" ").match(/Signature=(.*?)(?:,|\s|\r?\n|$)/)[1];o["X-Amz-Signature"]=s,delete o.Expires}t.pathname=n.pathname,t.search=r.util.queryParamsToString(o)}r.Signers.Presign=o({sign:function(e,t,n){if(e.httpRequest.headers[a]=t||3600,e.on("build",i),e.on("sign",s),e.removeListener("afterBuild",r.EventListeners.Core.SET_CONTENT_LENGTH),e.removeListener("afterBuild",r.EventListeners.Core.COMPUTE_SHA256),e.emit("beforePresign",[e]),!n){if(e.build(),e.response.error)throw e.response.error;return r.util.urlFormat(e.httpRequest.endpoint)}e.build((function(){this.response.error?n(this.response.error):n(null,r.util.urlFormat(e.httpRequest.endpoint))}))}}),e.exports=r.Signers.Presign},function(e,t,n){var r=n(18);r.ParamValidator=r.util.inherit({constructor:function(e){!0!==e&&void 0!==e||(e={min:!0}),this.validation=e},validate:function(e,t,n){if(this.errors=[],this.validateMember(e,t||{},n||"params"),this.errors.length>1){var o=this.errors.join("\n* ");throw o="There were "+this.errors.length+" validation errors:\n* "+o,r.util.error(new Error(o),{code:"MultipleValidationErrors",errors:this.errors})}if(1===this.errors.length)throw this.errors[0];return!0},fail:function(e,t){this.errors.push(r.util.error(new Error(t),{code:e}))},validateStructure:function(e,t,n){var r;this.validateType(t,n,["object"],"structure");for(var o=0;e.required&&o<e.required.length;o++){var a=t[r=e.required[o]];null==a&&this.fail("MissingRequiredParameter","Missing required key '"+r+"' in "+n)}for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r],s=e.members[r];if(void 0!==s){var c=[n,r].join(".");this.validateMember(s,i,c)}else null!=i&&this.fail("UnexpectedParameter","Unexpected key '"+r+"' found in "+n)}return!0},validateMember:function(e,t,n){switch(e.type){case"structure":return this.validateStructure(e,t,n);case"list":return this.validateList(e,t,n);case"map":return this.validateMap(e,t,n);default:return this.validateScalar(e,t,n)}},validateList:function(e,t,n){if(this.validateType(t,n,[Array])){this.validateRange(e,t.length,n,"list member count");for(var r=0;r<t.length;r++)this.validateMember(e.member,t[r],n+"["+r+"]")}},validateMap:function(e,t,n){if(this.validateType(t,n,["object"],"map")){var r=0;for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(this.validateMember(e.key,o,n+"[key='"+o+"']"),this.validateMember(e.value,t[o],n+"['"+o+"']"),r++);this.validateRange(e,r,n,"map member count")}},validateScalar:function(e,t,n){switch(e.type){case null:case void 0:case"string":return this.validateString(e,t,n);case"base64":case"binary":return this.validatePayload(t,n);case"integer":case"float":return this.validateNumber(e,t,n);case"boolean":return this.validateType(t,n,["boolean"]);case"timestamp":return this.validateType(t,n,[Date,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/,"number"],"Date object, ISO-8601 string, or a UNIX timestamp");default:return this.fail("UnkownType","Unhandled type "+e.type+" for "+n)}},validateString:function(e,t,n){var r=["string"];e.isJsonValue&&(r=r.concat(["number","object","boolean"])),null!==t&&this.validateType(t,n,r)&&(this.validateEnum(e,t,n),this.validateRange(e,t.length,n,"string length"),this.validatePattern(e,t,n),this.validateUri(e,t,n))},validateUri:function(e,t,n){"uri"===e.location&&0===t.length&&this.fail("UriParameterError",'Expected uri parameter to have length >= 1, but found "'+t+'" for '+n)},validatePattern:function(e,t,n){this.validation.pattern&&void 0!==e.pattern&&(new RegExp(e.pattern).test(t)||this.fail("PatternMatchError",'Provided value "'+t+'" does not match regex pattern /'+e.pattern+"/ for "+n))},validateRange:function(e,t,n,r){this.validation.min&&void 0!==e.min&&t<e.min&&this.fail("MinRangeError","Expected "+r+" >= "+e.min+", but found "+t+" for "+n),this.validation.max&&void 0!==e.max&&t>e.max&&this.fail("MaxRangeError","Expected "+r+" <= "+e.max+", but found "+t+" for "+n)},validateEnum:function(e,t,n){this.validation.enum&&void 0!==e.enum&&-1===e.enum.indexOf(t)&&this.fail("EnumError","Found string value of "+t+", but expected "+e.enum.join("|")+" for "+n)},validateType:function(e,t,n,o){if(null==e)return!1;for(var a=!1,i=0;i<n.length;i++){if("string"==typeof n[i]){if(typeof e===n[i])return!0}else if(n[i]instanceof RegExp){if((e||"").toString().match(n[i]))return!0}else{if(e instanceof n[i])return!0;if(r.util.isType(e,n[i]))return!0;o||a||(n=n.slice()),n[i]=r.util.typeName(n[i])}a=!0}var s=o;s||(s=n.join(", ").replace(/,([^,]+)$/,", or$1"));var c=s.match(/^[aeiou]/i)?"n":"";return this.fail("InvalidParameterType","Expected "+t+" to be a"+c+" "+s),!1},validateNumber:function(e,t,n){if(null!=t){if("string"==typeof t){var r=parseFloat(t);r.toString()===t&&(t=r)}this.validateType(t,n,["number"])&&this.validateRange(e,t,n,"numeric value")}},validatePayload:function(e,t){if(null!=e&&"string"!=typeof e&&(!e||"number"!=typeof e.byteLength)){if(r.util.isNode()){var n=r.util.stream.Stream;if(r.util.Buffer.isBuffer(e)||e instanceof n)return}else if(void 0!==typeof Blob&&e instanceof Blob)return;var o=["Buffer","Stream","File","Blob","ArrayBuffer","DataView"];if(e)for(var a=0;a<o.length;a++){if(r.util.isType(e,o[a]))return;if(r.util.typeName(e.constructor)===o[a])return}this.fail("InvalidParameterType","Expected "+t+" to be a string, Buffer, Stream, Blob, or typed array object")}}})},function(e,t,n){var r=n(350),o=n(351),a=o;a.v1=r,a.v4=o,e.exports=a},function(e,t,n){var r,o,a=n(254),i=n(255),s=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var h=a();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-s+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||f>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=m,o=p;var b=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;l[u++]=b>>>24&255,l[u++]=b>>>16&255,l[u++]=b>>>8&255,l[u++]=255&b;var y=f/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=p>>>8|128,l[u++]=255&p;for(var A=0;A<6;++A)l[u+A]=d[A];return t||i(l)}},function(e,t,n){var r=n(254),o=n(255);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}},function(e,t,n){var r=n(353),o=n(354),a=n(355),i=n(356);e.exports={createHash:function(e){if("md5"===(e=e.toLowerCase()))return new o;if("sha256"===e)return new i;if("sha1"===e)return new a;throw new Error("Hash algorithm "+e+" is not supported in the browser SDK")},createHmac:function(e,t){if("md5"===(e=e.toLowerCase()))return new r(o,t);if("sha256"===e)return new r(i,t);if("sha1"===e)return new r(a,t);throw new Error("HMAC algorithm "+e+" is not supported in the browser SDK")},createSign:function(){throw new Error("createSign is not implemented in the browser")}}},function(e,t,n){var r=n(120);function o(e,t){this.hash=new e,this.outer=new e;var n=function(e,t){var n=r.convertToBuffer(t);if(n.byteLength>e.BLOCK_SIZE){var o=new e;o.update(n),n=o.digest()}var a=new Uint8Array(e.BLOCK_SIZE);return a.set(n),a}(e,t),o=new Uint8Array(e.BLOCK_SIZE);o.set(n);for(var a=0;a<e.BLOCK_SIZE;a++)n[a]^=54,o[a]^=92;this.hash.update(n),this.outer.update(o);for(a=0;a<n.byteLength;a++)n[a]=0}e.exports=o,o.prototype.update=function(e){if(r.isEmptyData(e)||this.error)return this;try{this.hash.update(r.convertToBuffer(e))}catch(e){this.error=e}return this},o.prototype.digest=function(e){return this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest(e)}},function(e,t,n){var r=n(120),o=n(84).Buffer,a=64;function i(){this.state=[1732584193,4023233417,2562383102,271733878],this.buffer=new DataView(new ArrayBuffer(a)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}function s(e,t,n,r,o,a){return((t=(t+e&4294967295)+(r+a&4294967295)&4294967295)<<o|t>>>32-o)+n&4294967295}function c(e,t,n,r,o,a,i){return s(t&n|~t&r,e,t,o,a,i)}function u(e,t,n,r,o,a,i){return s(t&r|n&~r,e,t,o,a,i)}function l(e,t,n,r,o,a,i){return s(t^n^r,e,t,o,a,i)}function d(e,t,n,r,o,a,i){return s(n^(t|~r),e,t,o,a,i)}e.exports=i,i.BLOCK_SIZE=a,i.prototype.update=function(e){if(r.isEmptyData(e))return this;if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=r.convertToBuffer(e),n=0,o=t.byteLength;for(this.bytesHashed+=o;o>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),o--,this.bufferLength===a&&(this.hashBuffer(),this.bufferLength=0);return this},i.prototype.digest=function(e){if(!this.finished){var t=this,n=t.buffer,r=t.bufferLength,i=8*t.bytesHashed;if(n.setUint8(this.bufferLength++,128),r%a>=56){for(var s=this.bufferLength;s<a;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)n.setUint8(s,0);n.setUint32(56,i>>>0,!0),n.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}var c=new DataView(new ArrayBuffer(16));for(s=0;s<4;s++)c.setUint32(4*s,this.state[s],!0);var u=new o(c.buffer,c.byteOffset,c.byteLength);return e?u.toString(e):u},i.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],o=t[2],a=t[3];n=c(n,r,o,a,e.getUint32(0,!0),7,3614090360),a=c(a,n,r,o,e.getUint32(4,!0),12,3905402710),o=c(o,a,n,r,e.getUint32(8,!0),17,606105819),r=c(r,o,a,n,e.getUint32(12,!0),22,3250441966),n=c(n,r,o,a,e.getUint32(16,!0),7,4118548399),a=c(a,n,r,o,e.getUint32(20,!0),12,1200080426),o=c(o,a,n,r,e.getUint32(24,!0),17,2821735955),r=c(r,o,a,n,e.getUint32(28,!0),22,4249261313),n=c(n,r,o,a,e.getUint32(32,!0),7,1770035416),a=c(a,n,r,o,e.getUint32(36,!0),12,2336552879),o=c(o,a,n,r,e.getUint32(40,!0),17,4294925233),r=c(r,o,a,n,e.getUint32(44,!0),22,2304563134),n=c(n,r,o,a,e.getUint32(48,!0),7,1804603682),a=c(a,n,r,o,e.getUint32(52,!0),12,4254626195),o=c(o,a,n,r,e.getUint32(56,!0),17,2792965006),n=u(n,r=c(r,o,a,n,e.getUint32(60,!0),22,1236535329),o,a,e.getUint32(4,!0),5,4129170786),a=u(a,n,r,o,e.getUint32(24,!0),9,3225465664),o=u(o,a,n,r,e.getUint32(44,!0),14,643717713),r=u(r,o,a,n,e.getUint32(0,!0),20,3921069994),n=u(n,r,o,a,e.getUint32(20,!0),5,3593408605),a=u(a,n,r,o,e.getUint32(40,!0),9,38016083),o=u(o,a,n,r,e.getUint32(60,!0),14,3634488961),r=u(r,o,a,n,e.getUint32(16,!0),20,3889429448),n=u(n,r,o,a,e.getUint32(36,!0),5,568446438),a=u(a,n,r,o,e.getUint32(56,!0),9,3275163606),o=u(o,a,n,r,e.getUint32(12,!0),14,4107603335),r=u(r,o,a,n,e.getUint32(32,!0),20,1163531501),n=u(n,r,o,a,e.getUint32(52,!0),5,2850285829),a=u(a,n,r,o,e.getUint32(8,!0),9,4243563512),o=u(o,a,n,r,e.getUint32(28,!0),14,1735328473),n=l(n,r=u(r,o,a,n,e.getUint32(48,!0),20,2368359562),o,a,e.getUint32(20,!0),4,4294588738),a=l(a,n,r,o,e.getUint32(32,!0),11,2272392833),o=l(o,a,n,r,e.getUint32(44,!0),16,1839030562),r=l(r,o,a,n,e.getUint32(56,!0),23,4259657740),n=l(n,r,o,a,e.getUint32(4,!0),4,2763975236),a=l(a,n,r,o,e.getUint32(16,!0),11,1272893353),o=l(o,a,n,r,e.getUint32(28,!0),16,4139469664),r=l(r,o,a,n,e.getUint32(40,!0),23,3200236656),n=l(n,r,o,a,e.getUint32(52,!0),4,681279174),a=l(a,n,r,o,e.getUint32(0,!0),11,3936430074),o=l(o,a,n,r,e.getUint32(12,!0),16,3572445317),r=l(r,o,a,n,e.getUint32(24,!0),23,76029189),n=l(n,r,o,a,e.getUint32(36,!0),4,3654602809),a=l(a,n,r,o,e.getUint32(48,!0),11,3873151461),o=l(o,a,n,r,e.getUint32(60,!0),16,530742520),n=d(n,r=l(r,o,a,n,e.getUint32(8,!0),23,3299628645),o,a,e.getUint32(0,!0),6,4096336452),a=d(a,n,r,o,e.getUint32(28,!0),10,1126891415),o=d(o,a,n,r,e.getUint32(56,!0),15,2878612391),r=d(r,o,a,n,e.getUint32(20,!0),21,4237533241),n=d(n,r,o,a,e.getUint32(48,!0),6,1700485571),a=d(a,n,r,o,e.getUint32(12,!0),10,2399980690),o=d(o,a,n,r,e.getUint32(40,!0),15,4293915773),r=d(r,o,a,n,e.getUint32(4,!0),21,2240044497),n=d(n,r,o,a,e.getUint32(32,!0),6,1873313359),a=d(a,n,r,o,e.getUint32(60,!0),10,4264355552),o=d(o,a,n,r,e.getUint32(24,!0),15,2734768916),r=d(r,o,a,n,e.getUint32(52,!0),21,1309151649),n=d(n,r,o,a,e.getUint32(16,!0),6,4149444226),a=d(a,n,r,o,e.getUint32(44,!0),10,3174756917),o=d(o,a,n,r,e.getUint32(8,!0),15,718787259),r=d(r,o,a,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=o+t[2]&4294967295,t[3]=a+t[3]&4294967295}},function(e,t,n){var r=n(84).Buffer,o=n(120);new Uint32Array([1518500249,1859775393,-1894007588,-899497514]),Math.pow(2,53);function a(){this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=new Uint32Array(80),this.offset=0,this.shift=24,this.totalLength=0}e.exports=a,a.BLOCK_SIZE=64,a.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(o.isEmptyData(e))return this;var t=(e=o.convertToBuffer(e)).length;this.totalLength+=8*t;for(var n=0;n<t;n++)this.write(e[n]);return this},a.prototype.write=function(e){this.block[this.offset]|=(255&e)<<this.shift,this.shift?this.shift-=8:(this.offset++,this.shift=24),16===this.offset&&this.processBlock()},a.prototype.digest=function(e){this.write(128),(this.offset>14||14===this.offset&&this.shift<24)&&this.processBlock(),this.offset=14,this.shift=24,this.write(0),this.write(0),this.write(this.totalLength>0xffffffffff?this.totalLength/1099511627776:0),this.write(this.totalLength>4294967295?this.totalLength/4294967296:0);for(var t=24;t>=0;t-=8)this.write(this.totalLength>>t);var n=new r(20),o=new DataView(n.buffer);return o.setUint32(0,this.h0,!1),o.setUint32(4,this.h1,!1),o.setUint32(8,this.h2,!1),o.setUint32(12,this.h3,!1),o.setUint32(16,this.h4,!1),e?n.toString(e):n},a.prototype.processBlock=function(){for(var e=16;e<80;e++){var t=this.block[e-3]^this.block[e-8]^this.block[e-14]^this.block[e-16];this.block[e]=t<<1|t>>>31}var n,r,o=this.h0,a=this.h1,i=this.h2,s=this.h3,c=this.h4;for(e=0;e<80;e++){e<20?(n=s^a&(i^s),r=1518500249):e<40?(n=a^i^s,r=1859775393):e<60?(n=a&i|s&(a|i),r=2400959708):(n=a^i^s,r=3395469782);var u=(o<<5|o>>>27)+n+c+r+(0|this.block[e]);c=s,s=i,i=a<<30|a>>>2,a=o,o=u}for(this.h0=this.h0+o|0,this.h1=this.h1+a|0,this.h2=this.h2+i|0,this.h3=this.h3+s|0,this.h4=this.h4+c|0,this.offset=0,e=0;e<16;e++)this.block[e]=0}},function(e,t,n){var r=n(84).Buffer,o=n(120),a=64,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=Math.pow(2,53)-1;function c(){this.state=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}e.exports=c,c.BLOCK_SIZE=a,c.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(o.isEmptyData(e))return this;var t=0,n=(e=o.convertToBuffer(e)).byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>s)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===a&&(this.hashBuffer(),this.bufferLength=0);return this},c.prototype.digest=function(e){if(!this.finished){var t=8*this.bytesHashed,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(n.setUint8(this.bufferLength++,128),o%a>=56){for(var i=this.bufferLength;i<a;i++)n.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<56;i++)n.setUint8(i,0);n.setUint32(56,Math.floor(t/4294967296),!0),n.setUint32(60,t),this.hashBuffer(),this.finished=!0}var s=new r(32);for(i=0;i<8;i++)s[4*i]=this.state[i]>>>24&255,s[4*i+1]=this.state[i]>>>16&255,s[4*i+2]=this.state[i]>>>8&255,s[4*i+3]=this.state[i]>>>0&255;return e?s.toString(e):s},c.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],o=t[2],s=t[3],c=t[4],u=t[5],l=t[6],d=t[7],p=0;p<a;p++){if(p<16)this.temp[p]=(255&e[4*p])<<24|(255&e[4*p+1])<<16|(255&e[4*p+2])<<8|255&e[4*p+3];else{var h=this.temp[p-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,m=((h=this.temp[p-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[p]=(f+this.temp[p-7]|0)+(m+this.temp[p-16]|0)}var g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&l)|0)+(d+(i[p]+this.temp[p]|0)|0)|0,b=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&o^r&o)|0;d=l,l=u,u=c,c=s+g|0,s=o,o=r,r=n,n=g+b|0}t[0]+=n,t[1]+=r,t[2]+=o,t[3]+=s,t[4]+=c,t[5]+=u,t[6]+=l,t[7]+=d}},function(e,t,n){"use strict";var r=n(358),o=n(359);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=A,t.resolve=function(e,t){return A(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?A(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=A(e));return e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var i=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(256);function A(e,t,n){if(e&&o.isObject(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,n),r}a.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var A=e=u.join(s);if(A=A.trim(),!n&&1===e.split("#").length){var v=c.exec(A);if(v)return this.path=A,this.href=A,this.pathname=v[1],v[2]?(this.search=v[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=i.exec(A);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,A=A.substr(x.length)}if(n||x||A.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===A.substr(0,2);!w||x&&g[x]||(A=A.substr(2),this.slashes=!0)}if(!g[x]&&(w||x&&!b[x])){for(var C,S,O=-1,E=0;E<p.length;E++){-1!==(I=A.indexOf(p[E]))&&(-1===O||I<O)&&(O=I)}-1!==(S=-1===O?A.lastIndexOf("@"):A.lastIndexOf("@",O))&&(C=A.slice(0,S),A=A.slice(S+1),this.auth=decodeURIComponent(C)),O=-1;for(E=0;E<d.length;E++){var I;-1!==(I=A.indexOf(d[E]))&&(-1===O||I<O)&&(O=I)}-1===O&&(O=A.length),this.host=A.slice(0,O),A=A.slice(O),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var N=this.hostname.split(/\./),R=(E=0,N.length);E<R;E++){var j=N[E];if(j&&!j.match(h)){for(var B="",_=0,D=j.length;_<D;_++)j.charCodeAt(_)>127?B+="x":B+=j[_];if(!B.match(h)){var M=N.slice(0,E),$=N.slice(E+1),P=j.match(f);P&&(M.push(P[1]),$.unshift(P[2])),$.length&&(A="/"+$.join(".")+A),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var L=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+L,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==A[0]&&(A="/"+A))}if(!m[k])for(E=0,R=l.length;E<R;E++){var z=l[E];if(-1!==A.indexOf(z)){var U=encodeURIComponent(z);U===z&&(U=escape(z)),A=A.split(z).join(U)}}var W=A.indexOf("#");-1!==W&&(this.hash=A.substr(W),A=A.slice(0,W));var V=A.indexOf("?");if(-1!==V?(this.search=A.substr(V),this.query=A.substr(V+1),t&&(this.query=y.parse(this.query)),A=A.slice(0,V)):t&&(this.search="",this.query={}),A&&(this.pathname=A),b[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var q=this.search||"";this.path=L+q}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,i="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(i=y.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(e){return this.resolveObject(A(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(o.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!b[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var A=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=v||A||n.host&&e.pathname,k=x,w=n.pathname&&n.pathname.split("/")||[],C=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===w[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(C)n.hostname=n.host=w.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],O=(n.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,E=0,I=w.length;I>=0;I--)"."===(S=w[I])?w.splice(I,1):".."===S?(w.splice(I,1),E++):E&&(w.splice(I,1),E--);if(!x&&!k)for(;E--;E)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),O&&"/"!==w.join("/").substr(-1)&&w.push("");var T,N=""===w[0]||w[0]&&"/"===w[0].charAt(0);C&&(n.hostname=n.host=N?"":w.length?w.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(x=x||n.host&&w.length)&&!N&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var o;!function(a){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof r&&r;i.global!==i&&i.window!==i&&i.self;var s,c=2147483647,u=36,l=/^xn--/,d=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(h[e])}function b(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+b((e=e.replace(p,".")).split("."),t).join(".")}function A(e){for(var t,n,r=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function v(e){return b(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;r+=u)e=f(e/35);return f(r+36*e/(e+38))}function w(e){var t,n,r,o,a,i,s,l,d,p,h,m=[],b=e.length,y=0,A=128,x=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<b;){for(a=y,i=1,s=u;o>=b&&g("invalid-input"),((l=(h=e.charCodeAt(o++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:u)>=u||l>f((c-y)/i))&&g("overflow"),y+=l*i,!(l<(d=s<=x?1:s>=x+26?26:s-x));s+=u)i>f(c/(p=u-d))&&g("overflow"),i*=p;x=k(y-a,t=m.length+1,0==a),f(y/t)>c-A&&g("overflow"),A+=f(y/t),y%=t,m.splice(y++,0,A)}return v(m)}function C(e){var t,n,r,o,a,i,s,l,d,p,h,b,y,v,w,C=[];for(b=(e=A(e)).length,t=128,n=0,a=72,i=0;i<b;++i)(h=e[i])<128&&C.push(m(h));for(r=o=C.length,o&&C.push("-");r<b;){for(s=c,i=0;i<b;++i)(h=e[i])>=t&&h<s&&(s=h);for(s-t>f((c-n)/(y=r+1))&&g("overflow"),n+=(s-t)*y,t=s,i=0;i<b;++i)if((h=e[i])<t&&++n>c&&g("overflow"),h==t){for(l=n,d=u;!(l<(p=d<=a?1:d>=a+26?26:d-a));d+=u)w=l-p,v=u-p,C.push(m(x(p+w%v,0))),l=f(w/v);C.push(m(x(l,0))),a=k(n,y,r==o),n=0,++r}++n,++t}return C.join("")}s={version:"1.4.1",ucs2:{decode:A,encode:v},decode:w,encode:C,toASCII:function(e){return y(e,(function(e){return d.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return s}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(85)(e),n(73))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,a){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,p,h,f,m=e[l].replace(s,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),p=m.substr(g+1)):(d=m,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),r(i,h)?o(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(i(e),(function(i){var s=encodeURIComponent(r(i))+n;return o(e[i])?a(e[i],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[i]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t){e.exports={now:function(){return"undefined"!=typeof performance&&"function"==typeof performance.now?performance.now():Date.now()}}},function(e,t,n){var r=n(364).eventMessageChunker,o=n(365).parseEvent;e.exports={createEventStream:function(e,t,n){for(var a=r(e),i=[],s=0;s<a.length;s++)i.push(o(t,a[s],n));return i}}},function(e,t){e.exports={eventMessageChunker:function(e){for(var t=[],n=0;n<e.length;){var r=e.readInt32BE(n),o=e.slice(n,r+n);n+=r,t.push(o)}return t}}},function(e,t,n){var r=n(366).parseMessage;e.exports={parseEvent:function(e,t,n){var o=r(t),a=o.headers[":message-type"];if(a){if("error"===a.value)throw function(e){var t=e.headers[":error-code"],n=e.headers[":error-message"],r=new Error(n.value||n);return r.code=r.name=t.value||t,r}(o);if("event"!==a.value)return}var i=o.headers[":event-type"],s=n.members[i.value];if(s){var c={},u=s.eventPayloadMemberName;if(u){var l=s.members[u];"binary"===l.type?c[u]=o.body:c[u]=e.parse(o.body.toString(),l)}for(var d=s.eventHeaderMemberNames,p=0;p<d.length;p++){var h=d[p];o.headers[h]&&(c[h]=s.members[h].toType(o.headers[h].value))}var f={};return f[i.value]=c,f}}}},function(e,t,n){var r=n(367).Int64,o=n(368).splitMessage,a="boolean";function i(e){for(var t={},n=0;n<e.length;){var o=e.readUInt8(n++),i=e.slice(n,n+o).toString();switch(n+=o,e.readUInt8(n++)){case 0:t[i]={type:a,value:!0};break;case 1:t[i]={type:a,value:!1};break;case 2:t[i]={type:"byte",value:e.readInt8(n++)};break;case 3:t[i]={type:"short",value:e.readInt16BE(n)},n+=2;break;case 4:t[i]={type:"integer",value:e.readInt32BE(n)},n+=4;break;case 5:t[i]={type:"long",value:new r(e.slice(n,n+8))},n+=8;break;case 6:var s=e.readUInt16BE(n);n+=2,t[i]={type:"binary",value:e.slice(n,n+s)},n+=s;break;case 7:var c=e.readUInt16BE(n);n+=2,t[i]={type:"string",value:e.slice(n,n+c).toString()},n+=c;break;case 8:t[i]={type:"timestamp",value:new Date(new r(e.slice(n,n+8)).valueOf())},n+=8;break;case 9:var u=e.slice(n,n+16).toString("hex");n+=16,t[i]={type:"uuid",value:u.substr(0,8)+"-"+u.substr(8,4)+"-"+u.substr(12,4)+"-"+u.substr(16,4)+"-"+u.substr(20)};break;default:throw new Error("Unrecognized header type tag")}}return t}e.exports={parseMessage:function(e){var t=o(e);return{headers:i(t.headers),body:t.body}}}},function(e,t,n){var r=n(18).util,o=r.buffer.toBuffer;function a(e){if(8!==e.length)throw new Error("Int64 buffers must be exactly 8 bytes");r.Buffer.isBuffer(e)||(e=o(e)),this.bytes=e}function i(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}a.fromNumber=function(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));n>-1&&r>0;n--,r/=256)t[n]=r;return e<0&&i(t),new a(t)},a.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&i(e),parseInt(e.toString("hex"),16)*(t?-1:1)},a.prototype.toString=function(){return String(this.valueOf())},e.exports={Int64:a}},function(e,t,n){var r=n(18).util,o=r.buffer.toBuffer;e.exports={splitMessage:function(e){if(r.Buffer.isBuffer(e)||(e=o(e)),e.length<16)throw new Error("Provided message too short to accommodate event stream message overhead");if(e.length!==e.readUInt32BE(0))throw new Error("Reported message length does not match received message length");var t=e.readUInt32BE(8);if(t!==r.crypto.crc32(e.slice(0,8)))throw new Error("The prelude checksum specified in the message ("+t+") does not match the calculated CRC32 checksum.");var n=e.readUInt32BE(e.length-4);if(n!==r.crypto.crc32(e.slice(0,e.length-4)))throw new Error("The message checksum did not match the expected value of "+n);var a=12+e.readUInt32BE(4);return{headers:e.slice(12,a),body:e.slice(a,e.length-4)}}}},function(e,t,n){var r=n(18),o=n(112);r.TemporaryCredentials=r.util.inherit(r.Credentials,{constructor:function(e,t){r.Credentials.call(this),this.loadMasterCredentials(t),this.expired=!0,this.params=e||{},this.params.RoleArn&&(this.params.RoleSessionName=this.params.RoleSessionName||"temporary-credentials")},refresh:function(e){this.coalesceRefresh(e||r.util.fn.callback)},load:function(e){var t=this;t.createClients(),t.masterCredentials.get((function(){t.service.config.credentials=t.masterCredentials,(t.params.RoleArn?t.service.assumeRole:t.service.getSessionToken).call(t.service,(function(n,r){n||t.service.credentialsFrom(r,t),e(n)}))}))},loadMasterCredentials:function(e){for(this.masterCredentials=e||r.config.credentials;this.masterCredentials.masterCredentials;)this.masterCredentials=this.masterCredentials.masterCredentials;"function"!=typeof this.masterCredentials.get&&(this.masterCredentials=new r.Credentials(this.masterCredentials))},createClients:function(){this.service=this.service||new o({params:this.params})}})},function(e,t,n){var r=n(18),o=n(257);r.util.update(r.STS.prototype,{credentialsFrom:function(e,t){return e?(t||(t=new r.TemporaryCredentials),t.expired=!1,t.accessKeyId=e.Credentials.AccessKeyId,t.secretAccessKey=e.Credentials.SecretAccessKey,t.sessionToken=e.Credentials.SessionToken,t.expireTime=e.Credentials.Expiration,t):null},assumeRoleWithWebIdentity:function(e,t){return this.makeUnauthenticatedRequest("assumeRoleWithWebIdentity",e,t)},assumeRoleWithSAML:function(e,t){return this.makeUnauthenticatedRequest("assumeRoleWithSAML",e,t)},setupRequestListeners:function(e){e.addListener("validate",this.optInRegionalEndpoint,!0)},optInRegionalEndpoint:function(e){var t=e.service,n=t.config;if(n.stsRegionalEndpoints=o(t._originalConfig,{env:"AWS_STS_REGIONAL_ENDPOINTS",sharedConfig:"sts_regional_endpoints",clientConfig:"stsRegionalEndpoints"}),"regional"===n.stsRegionalEndpoints&&t.isGlobalEndpoint){if(!n.region)throw r.util.error(new Error,{code:"ConfigError",message:"Missing region in config"});var a=n.endpoint.indexOf(".amazonaws.com"),i=n.endpoint.substring(0,a)+"."+n.region+n.endpoint.substring(a);e.httpRequest.updateEndpoint(i),e.httpRequest.region=n.region}}})},function(e){e.exports=JSON.parse('{"version":"2.0","metadata":{"apiVersion":"2011-06-15","endpointPrefix":"sts","globalEndpoint":"sts.amazonaws.com","protocol":"query","serviceAbbreviation":"AWS STS","serviceFullName":"AWS Security Token Service","serviceId":"STS","signatureVersion":"v4","uid":"sts-2011-06-15","xmlNamespace":"https://sts.amazonaws.com/doc/2011-06-15/"},"operations":{"AssumeRole":{"input":{"type":"structure","required":["RoleArn","RoleSessionName"],"members":{"RoleArn":{},"RoleSessionName":{},"PolicyArns":{"shape":"S4"},"Policy":{},"DurationSeconds":{"type":"integer"},"Tags":{"shape":"S8"},"TransitiveTagKeys":{"type":"list","member":{}},"ExternalId":{},"SerialNumber":{},"TokenCode":{},"SourceIdentity":{}}},"output":{"resultWrapper":"AssumeRoleResult","type":"structure","members":{"Credentials":{"shape":"Si"},"AssumedRoleUser":{"shape":"Sn"},"PackedPolicySize":{"type":"integer"},"SourceIdentity":{}}}},"AssumeRoleWithSAML":{"input":{"type":"structure","required":["RoleArn","PrincipalArn","SAMLAssertion"],"members":{"RoleArn":{},"PrincipalArn":{},"SAMLAssertion":{},"PolicyArns":{"shape":"S4"},"Policy":{},"DurationSeconds":{"type":"integer"}}},"output":{"resultWrapper":"AssumeRoleWithSAMLResult","type":"structure","members":{"Credentials":{"shape":"Si"},"AssumedRoleUser":{"shape":"Sn"},"PackedPolicySize":{"type":"integer"},"Subject":{},"SubjectType":{},"Issuer":{},"Audience":{},"NameQualifier":{},"SourceIdentity":{}}}},"AssumeRoleWithWebIdentity":{"input":{"type":"structure","required":["RoleArn","RoleSessionName","WebIdentityToken"],"members":{"RoleArn":{},"RoleSessionName":{},"WebIdentityToken":{},"ProviderId":{},"PolicyArns":{"shape":"S4"},"Policy":{},"DurationSeconds":{"type":"integer"}}},"output":{"resultWrapper":"AssumeRoleWithWebIdentityResult","type":"structure","members":{"Credentials":{"shape":"Si"},"SubjectFromWebIdentityToken":{},"AssumedRoleUser":{"shape":"Sn"},"PackedPolicySize":{"type":"integer"},"Provider":{},"Audience":{},"SourceIdentity":{}}}},"DecodeAuthorizationMessage":{"input":{"type":"structure","required":["EncodedMessage"],"members":{"EncodedMessage":{}}},"output":{"resultWrapper":"DecodeAuthorizationMessageResult","type":"structure","members":{"DecodedMessage":{}}}},"GetAccessKeyInfo":{"input":{"type":"structure","required":["AccessKeyId"],"members":{"AccessKeyId":{}}},"output":{"resultWrapper":"GetAccessKeyInfoResult","type":"structure","members":{"Account":{}}}},"GetCallerIdentity":{"input":{"type":"structure","members":{}},"output":{"resultWrapper":"GetCallerIdentityResult","type":"structure","members":{"UserId":{},"Account":{},"Arn":{}}}},"GetFederationToken":{"input":{"type":"structure","required":["Name"],"members":{"Name":{},"Policy":{},"PolicyArns":{"shape":"S4"},"DurationSeconds":{"type":"integer"},"Tags":{"shape":"S8"}}},"output":{"resultWrapper":"GetFederationTokenResult","type":"structure","members":{"Credentials":{"shape":"Si"},"FederatedUser":{"type":"structure","required":["FederatedUserId","Arn"],"members":{"FederatedUserId":{},"Arn":{}}},"PackedPolicySize":{"type":"integer"}}}},"GetSessionToken":{"input":{"type":"structure","members":{"DurationSeconds":{"type":"integer"},"SerialNumber":{},"TokenCode":{}}},"output":{"resultWrapper":"GetSessionTokenResult","type":"structure","members":{"Credentials":{"shape":"Si"}}}}},"shapes":{"S4":{"type":"list","member":{"type":"structure","members":{"arn":{}}}},"S8":{"type":"list","member":{"type":"structure","required":["Key","Value"],"members":{"Key":{},"Value":{}}}},"Si":{"type":"structure","required":["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],"members":{"AccessKeyId":{},"SecretAccessKey":{},"SessionToken":{},"Expiration":{"type":"timestamp"}}},"Sn":{"type":"structure","required":["AssumedRoleId","Arn"],"members":{"AssumedRoleId":{},"Arn":{}}}}}')},function(e){e.exports=JSON.parse('{"pagination":{}}')},function(e,t,n){var r=n(18),o=n(112);r.ChainableTemporaryCredentials=r.util.inherit(r.Credentials,{constructor:function(e){r.Credentials.call(this),e=e||{},this.errorCode="ChainableTemporaryCredentialsProviderFailure",this.expired=!0,this.tokenCodeFn=null;var t=r.util.copy(e.params)||{};if(t.RoleArn&&(t.RoleSessionName=t.RoleSessionName||"temporary-credentials"),t.SerialNumber){if(!e.tokenCodeFn||"function"!=typeof e.tokenCodeFn)throw new r.util.error(new Error("tokenCodeFn must be a function when params.SerialNumber is given"),{code:this.errorCode});this.tokenCodeFn=e.tokenCodeFn}var n=r.util.merge({params:t,credentials:e.masterCredentials||r.config.credentials},e.stsConfig||{});this.service=new o(n)},refresh:function(e){this.coalesceRefresh(e||r.util.fn.callback)},load:function(e){var t=this,n=t.service.config.params.RoleArn?"assumeRole":"getSessionToken";this.getTokenCode((function(r,o){var a={};r?e(r):(o&&(a.TokenCode=o),t.service[n](a,(function(n,r){n||t.service.credentialsFrom(r,t),e(n)})))}))},getTokenCode:function(e){var t=this;this.tokenCodeFn?this.tokenCodeFn(this.service.config.params.SerialNumber,(function(n,o){if(n){var a=n;return n instanceof Error&&(a=n.message),void e(r.util.error(new Error("Error fetching MFA token: "+a),{code:t.errorCode}))}e(null,o)})):e(null)}})},function(e,t,n){var r=n(18),o=n(112);r.WebIdentityCredentials=r.util.inherit(r.Credentials,{constructor:function(e,t){r.Credentials.call(this),this.expired=!0,this.params=e,this.params.RoleSessionName=this.params.RoleSessionName||"web-identity",this.data=null,this._clientConfig=r.util.copy(t||{})},refresh:function(e){this.coalesceRefresh(e||r.util.fn.callback)},load:function(e){var t=this;t.createClients(),t.service.assumeRoleWithWebIdentity((function(n,r){t.data=null,n||(t.data=r,t.service.credentialsFrom(r,t)),e(n)}))},createClients:function(){if(!this.service){var e=r.util.merge({},this._clientConfig);e.params=this.params,this.service=new o(e)}}})},function(e,t,n){var r=n(18),o=n(376),a=n(112);r.CognitoIdentityCredentials=r.util.inherit(r.Credentials,{localStorageKey:{id:"aws.cognito.identity-id.",providers:"aws.cognito.identity-providers."},constructor:function(e,t){r.Credentials.call(this),this.expired=!0,this.params=e,this.data=null,this._identityId=null,this._clientConfig=r.util.copy(t||{}),this.loadCachedId();var n=this;Object.defineProperty(this,"identityId",{get:function(){return n.loadCachedId(),n._identityId||n.params.IdentityId},set:function(e){n._identityId=e}})},refresh:function(e){this.coalesceRefresh(e||r.util.fn.callback)},load:function(e){var t=this;t.createClients(),t.data=null,t._identityId=null,t.getId((function(n){n?(t.clearIdOnNotAuthorized(n),e(n)):t.params.RoleArn?t.getCredentialsFromSTS(e):t.getCredentialsForIdentity(e)}))},clearCachedId:function(){this._identityId=null,delete this.params.IdentityId;var e=this.params.IdentityPoolId,t=this.params.LoginId||"";delete this.storage[this.localStorageKey.id+e+t],delete this.storage[this.localStorageKey.providers+e+t]},clearIdOnNotAuthorized:function(e){"NotAuthorizedException"==e.code&&this.clearCachedId()},getId:function(e){var t=this;if("string"==typeof t.params.IdentityId)return e(null,t.params.IdentityId);t.cognito.getId((function(n,r){!n&&r.IdentityId?(t.params.IdentityId=r.IdentityId,e(null,r.IdentityId)):e(n)}))},loadCredentials:function(e,t){e&&t&&(t.expired=!1,t.accessKeyId=e.Credentials.AccessKeyId,t.secretAccessKey=e.Credentials.SecretKey,t.sessionToken=e.Credentials.SessionToken,t.expireTime=e.Credentials.Expiration)},getCredentialsForIdentity:function(e){var t=this;t.cognito.getCredentialsForIdentity((function(n,r){n?t.clearIdOnNotAuthorized(n):(t.cacheId(r),t.data=r,t.loadCredentials(t.data,t)),e(n)}))},getCredentialsFromSTS:function(e){var t=this;t.cognito.getOpenIdToken((function(n,r){n?(t.clearIdOnNotAuthorized(n),e(n)):(t.cacheId(r),t.params.WebIdentityToken=r.Token,t.webIdentityCredentials.refresh((function(n){n||(t.data=t.webIdentityCredentials.data,t.sts.credentialsFrom(t.data,t)),e(n)})))}))},loadCachedId:function(){var e=this;if(r.util.isBrowser()&&!e.params.IdentityId){var t=e.getStorage("id");if(t&&e.params.Logins){var n=Object.keys(e.params.Logins);0!==(e.getStorage("providers")||"").split(",").filter((function(e){return-1!==n.indexOf(e)})).length&&(e.params.IdentityId=t)}else t&&(e.params.IdentityId=t)}},createClients:function(){var e=this._clientConfig;if(this.webIdentityCredentials=this.webIdentityCredentials||new r.WebIdentityCredentials(this.params,e),!this.cognito){var t=r.util.merge({},e);t.params=this.params,this.cognito=new o(t)}this.sts=this.sts||new a(e)},cacheId:function(e){this._identityId=e.IdentityId,this.params.IdentityId=this._identityId,r.util.isBrowser()&&(this.setStorage("id",e.IdentityId),this.params.Logins&&this.setStorage("providers",Object.keys(this.params.Logins).join(",")))},getStorage:function(e){return this.storage[this.localStorageKey[e]+this.params.IdentityPoolId+(this.params.LoginId||"")]},setStorage:function(e,t){try{this.storage[this.localStorageKey[e]+this.params.IdentityPoolId+(this.params.LoginId||"")]=t}catch(e){}},storage:function(){try{var e=r.util.isBrowser()&&null!==window.localStorage&&"object"==typeof window.localStorage?window.localStorage:{};return e["aws.test-storage"]="foobar",delete e["aws.test-storage"],e}catch(e){return{}}}()})},function(e,t,n){n(159);var r=n(18),o=r.Service,a=r.apiLoader;a.services.cognitoidentity={},r.CognitoIdentity=o.defineService("cognitoidentity",["2014-06-30"]),Object.defineProperty(a.services.cognitoidentity,"2014-06-30",{get:function(){var e=n(377);return e.paginators=n(378).pagination,e},enumerable:!0,configurable:!0}),e.exports=r.CognitoIdentity},function(e){e.exports=JSON.parse('{"version":"2.0","metadata":{"apiVersion":"2014-06-30","endpointPrefix":"cognito-identity","jsonVersion":"1.1","protocol":"json","serviceFullName":"Amazon Cognito Identity","serviceId":"Cognito Identity","signatureVersion":"v4","targetPrefix":"AWSCognitoIdentityService","uid":"cognito-identity-2014-06-30"},"operations":{"CreateIdentityPool":{"input":{"type":"structure","required":["IdentityPoolName","AllowUnauthenticatedIdentities"],"members":{"IdentityPoolName":{},"AllowUnauthenticatedIdentities":{"type":"boolean"},"AllowClassicFlow":{"type":"boolean"},"SupportedLoginProviders":{"shape":"S5"},"DeveloperProviderName":{},"OpenIdConnectProviderARNs":{"shape":"S9"},"CognitoIdentityProviders":{"shape":"Sb"},"SamlProviderARNs":{"shape":"Sg"},"IdentityPoolTags":{"shape":"Sh"}}},"output":{"shape":"Sk"}},"DeleteIdentities":{"input":{"type":"structure","required":["IdentityIdsToDelete"],"members":{"IdentityIdsToDelete":{"type":"list","member":{}}}},"output":{"type":"structure","members":{"UnprocessedIdentityIds":{"type":"list","member":{"type":"structure","members":{"IdentityId":{},"ErrorCode":{}}}}}}},"DeleteIdentityPool":{"input":{"type":"structure","required":["IdentityPoolId"],"members":{"IdentityPoolId":{}}}},"DescribeIdentity":{"input":{"type":"structure","required":["IdentityId"],"members":{"IdentityId":{}}},"output":{"shape":"Sv"}},"DescribeIdentityPool":{"input":{"type":"structure","required":["IdentityPoolId"],"members":{"IdentityPoolId":{}}},"output":{"shape":"Sk"}},"GetCredentialsForIdentity":{"input":{"type":"structure","required":["IdentityId"],"members":{"IdentityId":{},"Logins":{"shape":"S10"},"CustomRoleArn":{}}},"output":{"type":"structure","members":{"IdentityId":{},"Credentials":{"type":"structure","members":{"AccessKeyId":{},"SecretKey":{},"SessionToken":{},"Expiration":{"type":"timestamp"}}}}},"authtype":"none"},"GetId":{"input":{"type":"structure","required":["IdentityPoolId"],"members":{"AccountId":{},"IdentityPoolId":{},"Logins":{"shape":"S10"}}},"output":{"type":"structure","members":{"IdentityId":{}}},"authtype":"none"},"GetIdentityPoolRoles":{"input":{"type":"structure","required":["IdentityPoolId"],"members":{"IdentityPoolId":{}}},"output":{"type":"structure","members":{"IdentityPoolId":{},"Roles":{"shape":"S1c"},"RoleMappings":{"shape":"S1e"}}}},"GetOpenIdToken":{"input":{"type":"structure","required":["IdentityId"],"members":{"IdentityId":{},"Logins":{"shape":"S10"}}},"output":{"type":"structure","members":{"IdentityId":{},"Token":{}}},"authtype":"none"},"GetOpenIdTokenForDeveloperIdentity":{"input":{"type":"structure","required":["IdentityPoolId","Logins"],"members":{"IdentityPoolId":{},"IdentityId":{},"Logins":{"shape":"S10"},"PrincipalTags":{"shape":"S1s"},"TokenDuration":{"type":"long"}}},"output":{"type":"structure","members":{"IdentityId":{},"Token":{}}}},"GetPrincipalTagAttributeMap":{"input":{"type":"structure","required":["IdentityPoolId","IdentityProviderName"],"members":{"IdentityPoolId":{},"IdentityProviderName":{}}},"output":{"type":"structure","members":{"IdentityPoolId":{},"IdentityProviderName":{},"UseDefaults":{"type":"boolean"},"PrincipalTags":{"shape":"S1s"}}}},"ListIdentities":{"input":{"type":"structure","required":["IdentityPoolId","MaxResults"],"members":{"IdentityPoolId":{},"MaxResults":{"type":"integer"},"NextToken":{},"HideDisabled":{"type":"boolean"}}},"output":{"type":"structure","members":{"IdentityPoolId":{},"Identities":{"type":"list","member":{"shape":"Sv"}},"NextToken":{}}}},"ListIdentityPools":{"input":{"type":"structure","required":["MaxResults"],"members":{"MaxResults":{"type":"integer"},"NextToken":{}}},"output":{"type":"structure","members":{"IdentityPools":{"type":"list","member":{"type":"structure","members":{"IdentityPoolId":{},"IdentityPoolName":{}}}},"NextToken":{}}}},"ListTagsForResource":{"input":{"type":"structure","required":["ResourceArn"],"members":{"ResourceArn":{}}},"output":{"type":"structure","members":{"Tags":{"shape":"Sh"}}}},"LookupDeveloperIdentity":{"input":{"type":"structure","required":["IdentityPoolId"],"members":{"IdentityPoolId":{},"IdentityId":{},"DeveloperUserIdentifier":{},"MaxResults":{"type":"integer"},"NextToken":{}}},"output":{"type":"structure","members":{"IdentityId":{},"DeveloperUserIdentifierList":{"type":"list","member":{}},"NextToken":{}}}},"MergeDeveloperIdentities":{"input":{"type":"structure","required":["SourceUserIdentifier","DestinationUserIdentifier","DeveloperProviderName","IdentityPoolId"],"members":{"SourceUserIdentifier":{},"DestinationUserIdentifier":{},"DeveloperProviderName":{},"IdentityPoolId":{}}},"output":{"type":"structure","members":{"IdentityId":{}}}},"SetIdentityPoolRoles":{"input":{"type":"structure","required":["IdentityPoolId","Roles"],"members":{"IdentityPoolId":{},"Roles":{"shape":"S1c"},"RoleMappings":{"shape":"S1e"}}}},"SetPrincipalTagAttributeMap":{"input":{"type":"structure","required":["IdentityPoolId","IdentityProviderName"],"members":{"IdentityPoolId":{},"IdentityProviderName":{},"UseDefaults":{"type":"boolean"},"PrincipalTags":{"shape":"S1s"}}},"output":{"type":"structure","members":{"IdentityPoolId":{},"IdentityProviderName":{},"UseDefaults":{"type":"boolean"},"PrincipalTags":{"shape":"S1s"}}}},"TagResource":{"input":{"type":"structure","required":["ResourceArn","Tags"],"members":{"ResourceArn":{},"Tags":{"shape":"Sh"}}},"output":{"type":"structure","members":{}}},"UnlinkDeveloperIdentity":{"input":{"type":"structure","required":["IdentityId","IdentityPoolId","DeveloperProviderName","DeveloperUserIdentifier"],"members":{"IdentityId":{},"IdentityPoolId":{},"DeveloperProviderName":{},"DeveloperUserIdentifier":{}}}},"UnlinkIdentity":{"input":{"type":"structure","required":["IdentityId","Logins","LoginsToRemove"],"members":{"IdentityId":{},"Logins":{"shape":"S10"},"LoginsToRemove":{"shape":"Sw"}}},"authtype":"none"},"UntagResource":{"input":{"type":"structure","required":["ResourceArn","TagKeys"],"members":{"ResourceArn":{},"TagKeys":{"type":"list","member":{}}}},"output":{"type":"structure","members":{}}},"UpdateIdentityPool":{"input":{"shape":"Sk"},"output":{"shape":"Sk"}}},"shapes":{"S5":{"type":"map","key":{},"value":{}},"S9":{"type":"list","member":{}},"Sb":{"type":"list","member":{"type":"structure","members":{"ProviderName":{},"ClientId":{},"ServerSideTokenCheck":{"type":"boolean"}}}},"Sg":{"type":"list","member":{}},"Sh":{"type":"map","key":{},"value":{}},"Sk":{"type":"structure","required":["IdentityPoolId","IdentityPoolName","AllowUnauthenticatedIdentities"],"members":{"IdentityPoolId":{},"IdentityPoolName":{},"AllowUnauthenticatedIdentities":{"type":"boolean"},"AllowClassicFlow":{"type":"boolean"},"SupportedLoginProviders":{"shape":"S5"},"DeveloperProviderName":{},"OpenIdConnectProviderARNs":{"shape":"S9"},"CognitoIdentityProviders":{"shape":"Sb"},"SamlProviderARNs":{"shape":"Sg"},"IdentityPoolTags":{"shape":"Sh"}}},"Sv":{"type":"structure","members":{"IdentityId":{},"Logins":{"shape":"Sw"},"CreationDate":{"type":"timestamp"},"LastModifiedDate":{"type":"timestamp"}}},"Sw":{"type":"list","member":{}},"S10":{"type":"map","key":{},"value":{}},"S1c":{"type":"map","key":{},"value":{}},"S1e":{"type":"map","key":{},"value":{"type":"structure","required":["Type"],"members":{"Type":{},"AmbiguousRoleResolution":{},"RulesConfiguration":{"type":"structure","required":["Rules"],"members":{"Rules":{"type":"list","member":{"type":"structure","required":["Claim","MatchType","Value","RoleARN"],"members":{"Claim":{},"MatchType":{},"Value":{},"RoleARN":{}}}}}}}}},"S1s":{"type":"map","key":{},"value":{}}}}')},function(e){e.exports=JSON.parse('{"pagination":{"ListIdentityPools":{"input_token":"NextToken","limit_key":"MaxResults","output_token":"NextToken","result_key":"IdentityPools"}}}')},function(e,t,n){var r=n(18),o=n(112);r.SAMLCredentials=r.util.inherit(r.Credentials,{constructor:function(e){r.Credentials.call(this),this.expired=!0,this.params=e},refresh:function(e){this.coalesceRefresh(e||r.util.fn.callback)},load:function(e){var t=this;t.createClients(),t.service.assumeRoleWithSAML((function(n,r){n||t.service.credentialsFrom(r,t),e(n)}))},createClients:function(){this.service=this.service||new o({params:this.params})}})},function(e,t,n){var r=n(35),o=n(111);function a(){}function i(e,t){for(var n=e.getElementsByTagName(t),r=0,o=n.length;r<o;r++)if(n[r].parentNode===e)return n[r]}function s(e,t){switch(t||(t={}),t.type){case"structure":return c(e,t);case"map":return function(e,t){var n={},r=t.key.name||"key",o=t.value.name||"value",a=t.flattened?t.name:"entry",c=e.firstElementChild;for(;c;){if(c.nodeName===a){var u=i(c,r).textContent,l=i(c,o);n[u]=s(l,t.value)}c=c.nextElementSibling}return n}(e,t);case"list":return function(e,t){var n=[],r=t.flattened?t.name:t.member.name||"member",o=e.firstElementChild;for(;o;)o.nodeName===r&&n.push(s(o,t.member)),o=o.nextElementSibling;return n}(e,t);case void 0:case null:return function(e){if(null==e)return"";if(!e.firstElementChild)return null===e.parentNode.parentNode?{}:0===e.childNodes.length?"":e.textContent;var t={type:"structure",members:{}},n=e.firstElementChild;for(;n;){var r=n.nodeName;Object.prototype.hasOwnProperty.call(t.members,r)?t.members[r].type="list":t.members[r]={name:r},n=n.nextElementSibling}return c(e,t)}(e);default:return function(e,t){if(e.getAttribute){var n=e.getAttribute("encoding");"base64"===n&&(t=new o.create({type:n}))}var r=e.textContent;""===r&&(r=null);return"function"==typeof t.toType?t.toType(r):r}(e,t)}}function c(e,t){var n={};return null===e||r.each(t.members,(function(r,o){if(o.isXmlAttribute){if(Object.prototype.hasOwnProperty.call(e.attributes,o.name)){var a=e.attributes[o.name].value;n[r]=s({textContent:a},o)}}else{var c=o.flattened?e:i(e,o.name);c?n[r]=s(c,o):o.flattened||"list"!==o.type||t.api.xmlNoDefaultLists||(n[r]=o.defaultValue)}})),n}a.prototype.parse=function(e,t){if(""===e.replace(/^\s+/,""))return{};var n,o;try{if(window.DOMParser){try{n=(new DOMParser).parseFromString(e,"text/xml")}catch(e){throw r.error(new Error("Parse error in document"),{originalError:e,code:"XMLParserError",retryable:!0})}if(null===n.documentElement)throw r.error(new Error("Cannot parse empty document."),{code:"XMLParserError",retryable:!0});var a=n.getElementsByTagName("parsererror")[0];if(a&&(a.parentNode===n||"body"===a.parentNode.nodeName||a.parentNode.parentNode===n||"body"===a.parentNode.parentNode.nodeName)){var c=a.getElementsByTagName("div")[0]||a;throw r.error(new Error(c.textContent||"Parser error in document"),{code:"XMLParserError",retryable:!0})}}else{if(!window.ActiveXObject)throw new Error("Cannot load XML parser");if((n=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,!n.loadXML(e))throw r.error(new Error("Parse error in document"),{code:"XMLParserError",retryable:!0})}}catch(e){o=e}if(n&&n.documentElement&&!o){var u=s(n.documentElement,t),l=i(n.documentElement,"ResponseMetadata");return l&&(u.ResponseMetadata=s(l,{})),u}if(o)throw r.error(o||new Error,{code:"XMLParserError",retryable:!0});return{}},e.exports=a},function(e,t,n){var r=n(18),o=n(382).EventEmitter;n(251),r.XHRClient=r.util.inherit({handleRequest:function(e,t,n,a){var i=this,s=e.endpoint,c=new o,u=s.protocol+"//"+s.hostname;80!==s.port&&443!==s.port&&(u+=":"+s.port),u+=e.path;var l=new XMLHttpRequest,d=!1;e.stream=l,l.addEventListener("readystatechange",(function(){try{if(0===l.status)return}catch(e){return}this.readyState>=this.HEADERS_RECEIVED&&!d&&(c.statusCode=l.status,c.headers=i.parseHeaders(l.getAllResponseHeaders()),c.emit("headers",c.statusCode,c.headers,l.statusText),d=!0),this.readyState===this.DONE&&i.finishRequest(l,c)}),!1),l.upload.addEventListener("progress",(function(e){c.emit("sendProgress",e)})),l.addEventListener("progress",(function(e){c.emit("receiveProgress",e)}),!1),l.addEventListener("timeout",(function(){a(r.util.error(new Error("Timeout"),{code:"TimeoutError"}))}),!1),l.addEventListener("error",(function(){a(r.util.error(new Error("Network Failure"),{code:"NetworkingError"}))}),!1),l.addEventListener("abort",(function(){a(r.util.error(new Error("Request aborted"),{code:"RequestAbortedError"}))}),!1),n(c),l.open(e.method,u,!1!==t.xhrAsync),r.util.each(e.headers,(function(e,t){"Content-Length"!==e&&"User-Agent"!==e&&"Host"!==e&&l.setRequestHeader(e,t)})),t.timeout&&!1!==t.xhrAsync&&(l.timeout=t.timeout),t.xhrWithCredentials&&(l.withCredentials=!0);try{l.responseType="arraybuffer"}catch(e){}try{e.body?l.send(e.body):l.send()}catch(t){if(!e.body||"object"!=typeof e.body.buffer)throw t;l.send(e.body.buffer)}return c},parseHeaders:function(e){var t={};return r.util.arrayEach(e.split(/\r?\n/),(function(e){var n=e.split(":",1)[0],r=e.substring(n.length+2);n.length>0&&(t[n.toLowerCase()]=r)})),t},finishRequest:function(e,t){var n;if("arraybuffer"===e.responseType&&e.response){var o=e.response;n=new r.util.Buffer(o.byteLength);for(var a=new Uint8Array(o),i=0;i<n.length;++i)n[i]=a[i]}try{n||"string"!=typeof e.responseText||(n=new r.util.Buffer(e.responseText))}catch(e){}n&&t.emit("data",n),t.emit("end")}}),r.HttpClient.prototype=r.XHRClient.prototype,r.HttpClient.streamsApiVersion=1},function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,a,i,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=i.length,s=c,console&&console.warn&&console.warn(s)}return e}function d(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):m(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)a(c,this,t);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)a(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,a,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(o=a[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(18),o=n(253),a=n(257),i=n(384),s=n(164);n(385);var c={completeMultipartUpload:!0,copyObject:!0,uploadPartCopy:!0},u=["AuthorizationHeaderMalformed","BadRequest","PermanentRedirect",301],l="s3-object-lambda";r.util.update(r.S3.prototype,{getSignatureVersion:function(e){var t=this.api.signatureVersion,n=this._originalConfig?this._originalConfig.signatureVersion:null,r=this.config.signatureVersion,o=!!e&&e.isPresigned();return n?n="v2"===n?"s3":n:(!0!==o?t="v4":r&&(t=r),t)},getSigningName:function(e){if(e&&"writeGetObjectResponse"===e.operation)return l;var t=r.Service.prototype.getSigningName;return e&&e._parsedArn&&e._parsedArn.service?e._parsedArn.service:t.call(this)},getSignerClass:function(e){var t=this.getSignatureVersion(e);return r.Signers.RequestSigner.getVersion(t)},validateService:function(){var e,t=[];if(this.config.region||(this.config.region="us-east-1"),!this.config.endpoint&&this.config.s3BucketEndpoint&&t.push("An endpoint must be provided when configuring `s3BucketEndpoint` to true."),1===t.length?e=t[0]:t.length>1&&(e="Multiple configuration errors:\n"+t.join("\n")),e)throw r.util.error(new Error,{name:"InvalidEndpoint",message:e})},shouldDisableBodySigning:function(e){var t=this.getSignerClass();return!0===this.config.s3DisableBodySigning&&t===r.Signers.V4&&"https:"===e.httpRequest.endpoint.protocol},setupRequestListeners:function(e){if(e.addListener("validate",this.validateScheme),e.addListener("validate",this.validateBucketName,true),e.addListener("validate",this.optInUsEast1RegionalEndpoint,true),e.removeListener("validate",r.EventListeners.Core.VALIDATE_REGION),e.addListener("build",this.addContentType),e.addListener("build",this.computeContentMd5),e.addListener("build",this.computeSseCustomerKeyMd5),e.addListener("build",this.populateURI),e.addListener("afterBuild",this.addExpect100Continue),e.addListener("extractError",this.extractError),e.addListener("extractData",r.util.hoistPayloadMember),e.addListener("extractData",this.extractData),e.addListener("extractData",this.extractErrorFrom200Response),e.addListener("beforePresign",this.prepareSignedUrl),this.shouldDisableBodySigning(e)&&(e.removeListener("afterBuild",r.EventListeners.Core.COMPUTE_SHA256),e.addListener("afterBuild",this.disableBodySigning)),"createBucket"!==e.operation&&i.isArnInParam(e,"Bucket"))return e._parsedArn=r.util.ARN.parse(e.params.Bucket),e.removeListener("validate",this.validateBucketName),e.removeListener("build",this.populateURI),"s3"===e._parsedArn.service?(e.addListener("validate",i.validateS3AccessPointArn),e.addListener("validate",this.validateArnResourceType)):"s3-outposts"===e._parsedArn.service&&(e.addListener("validate",i.validateOutpostsAccessPointArn),e.addListener("validate",i.validateOutpostsArn)),e.addListener("validate",i.validateArnRegion),e.addListener("validate",i.validateArnAccount),e.addListener("validate",i.validateArnService),e.addListener("build",this.populateUriFromAccessPointArn),void e.addListener("build",i.validatePopulateUriFromArn);e.addListener("validate",this.validateBucketEndpoint),e.addListener("validate",this.correctBucketRegionFromCache),e.onAsync("extractError",this.requestBucketRegion),r.util.isBrowser()&&e.onAsync("retry",this.reqRegionForNetworkingError)},validateScheme:function(e){var t=e.params,n=e.httpRequest.endpoint.protocol;if((t.SSECustomerKey||t.CopySourceSSECustomerKey)&&"https:"!==n){throw r.util.error(new Error,{code:"ConfigError",message:"Cannot send SSE keys over HTTP. Set 'sslEnabled'to 'true' in your configuration"})}},validateBucketEndpoint:function(e){if(!e.params.Bucket&&e.service.config.s3BucketEndpoint){throw r.util.error(new Error,{code:"ConfigError",message:"Cannot send requests to root API with `s3BucketEndpoint` set."})}},validateArnResourceType:function(e){var t=e._parsedArn.resource;if(0!==t.indexOf("accesspoint:")&&0!==t.indexOf("accesspoint/"))throw r.util.error(new Error,{code:"InvalidARN",message:"ARN resource should begin with 'accesspoint/'"})},validateBucketName:function(e){var t=e.service.getSignatureVersion(e),n=e.params&&e.params.Bucket,o=e.params&&e.params.Key,a=n&&n.indexOf("/");if(n&&a>=0)if("string"==typeof o&&a>0){e.params=r.util.copy(e.params);var i=n.substr(a+1)||"";e.params.Key=i+"/"+o,e.params.Bucket=n.substr(0,a)}else if("v4"===t){var s="Bucket names cannot contain forward slashes. Bucket: "+n;throw r.util.error(new Error,{code:"InvalidBucket",message:s})}},isValidAccelerateOperation:function(e){return-1===["createBucket","deleteBucket","listBuckets"].indexOf(e)},optInUsEast1RegionalEndpoint:function(e){var t=e.service,n=t.config;if(n.s3UsEast1RegionalEndpoint=a(t._originalConfig,{env:"AWS_S3_US_EAST_1_REGIONAL_ENDPOINT",sharedConfig:"s3_us_east_1_regional_endpoint",clientConfig:"s3UsEast1RegionalEndpoint"}),!(t._originalConfig||{}).endpoint&&"us-east-1"===e.httpRequest.region&&"regional"===n.s3UsEast1RegionalEndpoint&&e.httpRequest.endpoint.hostname.indexOf("s3.amazonaws.com")>=0){var r=n.endpoint.indexOf(".amazonaws.com");regionalEndpoint=n.endpoint.substring(0,r)+".us-east-1"+n.endpoint.substring(r),e.httpRequest.updateEndpoint(regionalEndpoint)}},populateURI:function(e){var t=e.httpRequest,n=e.params.Bucket,r=e.service,o=t.endpoint;if(n&&!r.pathStyleBucketName(n)){r.config.useAccelerateEndpoint&&r.isValidAccelerateOperation(e.operation)?r.config.useDualstack?o.hostname=n+".s3-accelerate.dualstack.amazonaws.com":o.hostname=n+".s3-accelerate.amazonaws.com":r.config.s3BucketEndpoint||(o.hostname=n+"."+o.hostname);var a=o.port;o.host=80!==a&&443!==a?o.hostname+":"+o.port:o.hostname,t.virtualHostedBucket=n,r.removeVirtualHostedBucketFromPath(e)}},removeVirtualHostedBucketFromPath:function(e){var t=e.httpRequest,n=t.virtualHostedBucket;if(n&&t.path){if(e.params&&e.params.Key){var o="/"+r.util.uriEscapePath(e.params.Key);if(0===t.path.indexOf(o)&&(t.path.length===o.length||"?"===t.path[o.length]))return}t.path=t.path.replace(new RegExp("/"+n),""),"/"!==t.path[0]&&(t.path="/"+t.path)}},populateUriFromAccessPointArn:function(e){var t=e._parsedArn,n="s3-outposts"===t.service,o="s3-object-lambda"===t.service,a=n?"."+t.outpostId:"",i=n?"s3-outposts":"s3-accesspoint",c=!n&&e.service.config.useDualstack?".dualstack":"",u=e.httpRequest.endpoint,l=s.getEndpointSuffix(t.region),d=e.service.config.s3UseArnRegion;if(u.hostname=[t.accessPoint+"-"+t.accountId+a,i+c,d?t.region:e.service.config.region,l].join("."),o){i="s3-object-lambda";var p=t.resource.split("/")[1];u.hostname=[p+"-"+t.accountId,i,d?t.region:e.service.config.region,l].join(".")}u.host=u.hostname;var h=r.util.uriEscape(e.params.Bucket),f=e.httpRequest.path;e.httpRequest.path=f.replace(new RegExp("/"+h),""),"/"!==e.httpRequest.path[0]&&(e.httpRequest.path="/"+e.httpRequest.path),e.httpRequest.region=t.region},addExpect100Continue:function(e){var t=e.httpRequest.headers["Content-Length"];r.util.isNode()&&(t>=1048576||e.params.Body instanceof r.util.stream.Stream)&&(e.httpRequest.headers.Expect="100-continue")},addContentType:function(e){var t=e.httpRequest;if("GET"!==t.method&&"HEAD"!==t.method){t.headers["Content-Type"]||(t.headers["Content-Type"]="application/octet-stream");var n=t.headers["Content-Type"];if(r.util.isBrowser())if("string"!=typeof t.body||n.match(/;\s*charset=/)){t.headers["Content-Type"]=n.replace(/(;\s*charset=)(.+)$/,(function(e,t,n){return t+n.toUpperCase()}))}else{t.headers["Content-Type"]+="; charset=UTF-8"}}else delete t.headers["Content-Type"]},willComputeChecksums:function(e){var t=e.service.api.operations[e.operation].input.members,n=e.httpRequest.body,o=t.ContentMD5&&!e.params.ContentMD5&&n&&(r.util.Buffer.isBuffer(e.httpRequest.body)||"string"==typeof e.httpRequest.body);return!(!o||!e.service.shouldDisableBodySigning(e)||e.isPresigned())||!(!o||"s3"!==this.getSignatureVersion(e)||!e.isPresigned())},computeContentMd5:function(e){if(e.service.willComputeChecksums(e)){var t=r.util.crypto.md5(e.httpRequest.body,"base64");e.httpRequest.headers["Content-MD5"]=t}},computeSseCustomerKeyMd5:function(e){r.util.each({SSECustomerKey:"x-amz-server-side-encryption-customer-key-MD5",CopySourceSSECustomerKey:"x-amz-copy-source-server-side-encryption-customer-key-MD5"},(function(t,n){if(e.params[t]){var o=r.util.crypto.md5(e.params[t],"base64");e.httpRequest.headers[n]=o}}))},pathStyleBucketName:function(e){return!!this.config.s3ForcePathStyle||!this.config.s3BucketEndpoint&&(!i.dnsCompatibleBucketName(e)||!(!this.config.sslEnabled||!e.match(/\./)))},extractErrorFrom200Response:function(e){if(c[e.request.operation]){var t=e.httpResponse;if(t.body&&t.body.toString().match("<Error>"))throw e.data=null,(this.service?this.service:this).extractError(e),e.error;if(!t.body||!t.body.toString().match(/<[\w_]/))throw e.data=null,r.util.error(new Error,{code:"InternalError",message:"S3 aborted request"})}},retryableError:function(e,t){return!(!c[t.operation]||200!==e.statusCode)||(!t._requestRegionForBucket||!t.service.bucketRegionCache[t._requestRegionForBucket])&&(!(!e||"RequestTimeout"!==e.code)||(e&&-1!=u.indexOf(e.code)&&e.region&&e.region!=t.httpRequest.region?(t.httpRequest.region=e.region,301===e.statusCode&&t.service.updateReqBucketRegion(t),!0):r.Service.prototype.retryableError.call(this,e,t)))},updateReqBucketRegion:function(e,t){var n=e.httpRequest;if("string"==typeof t&&t.length&&(n.region=t),n.endpoint.host.match(/s3(?!-accelerate).*\.amazonaws\.com$/)){var o=e.service,a=o.config,i=a.s3BucketEndpoint;i&&delete a.s3BucketEndpoint;var s=r.util.copy(a);delete s.endpoint,s.region=n.region,n.endpoint=new r.S3(s).endpoint,o.populateURI(e),a.s3BucketEndpoint=i,n.headers.Host=n.endpoint.host,"validate"===e._asm.currentState&&(e.removeListener("build",o.populateURI),e.addListener("build",o.removeVirtualHostedBucketFromPath))}},extractData:function(e){var t=e.request;if("getBucketLocation"===t.operation){var n=e.httpResponse.body.toString().match(/>(.+)<\/Location/);delete e.data._,e.data.LocationConstraint=n?n[1]:""}var r=t.params.Bucket||null;if("deleteBucket"!==t.operation||"string"!=typeof r||e.error){var o=(e.httpResponse.headers||{})["x-amz-bucket-region"]||null;if(!o&&"createBucket"===t.operation&&!e.error){var a=t.params.CreateBucketConfiguration;o=a?"EU"===a.LocationConstraint?"eu-west-1":a.LocationConstraint:"us-east-1"}o&&r&&o!==t.service.bucketRegionCache[r]&&(t.service.bucketRegionCache[r]=o)}else t.service.clearBucketRegionCache(r);t.service.extractRequestIds(e)},extractError:function(e){var t,n={304:"NotModified",403:"Forbidden",400:"BadRequest",404:"NotFound"},o=e.request,a=e.httpResponse.statusCode,i=e.httpResponse.body||"",s=(e.httpResponse.headers||{})["x-amz-bucket-region"]||null,c=o.params.Bucket||null,u=o.service.bucketRegionCache;if(s&&c&&s!==u[c]&&(u[c]=s),n[a]&&0===i.length)c&&!s&&(t=u[c]||null)!==o.httpRequest.region&&(s=t),e.error=r.util.error(new Error,{code:n[a],message:null,region:s});else{var l=(new r.XML.Parser).parse(i.toString());l.Region&&!s?(s=l.Region,c&&s!==u[c]&&(u[c]=s)):!c||s||l.Region||(t=u[c]||null)!==o.httpRequest.region&&(s=t),e.error=r.util.error(new Error,{code:l.Code||a,message:l.Message||null,region:s})}o.service.extractRequestIds(e)},requestBucketRegion:function(e,t){var n=e.error,o=e.request,a=o.params.Bucket||null;if(!n||!a||n.region||"listObjects"===o.operation||r.util.isNode()&&"headBucket"===o.operation||400===n.statusCode&&"headObject"!==o.operation||-1===u.indexOf(n.code))return t();var i=r.util.isNode()?"headBucket":"listObjects",s={Bucket:a};"listObjects"===i&&(s.MaxKeys=0);var c=o.service[i](s);c._requestRegionForBucket=a,c.send((function(){var e=o.service.bucketRegionCache[a]||null;n.region=e,t()}))},reqRegionForNetworkingError:function(e,t){if(!r.util.isBrowser())return t();var n=e.error,o=e.request,a=o.params.Bucket;if(!n||"NetworkingError"!==n.code||!a||"us-east-1"===o.httpRequest.region)return t();var s=o.service,c=s.bucketRegionCache,u=c[a]||null;if(u&&u!==o.httpRequest.region)s.updateReqBucketRegion(o,u),t();else if(i.dnsCompatibleBucketName(a))if(o.httpRequest.virtualHostedBucket){var l=s.listObjects({Bucket:a,MaxKeys:0});s.updateReqBucketRegion(l,"us-east-1"),l._requestRegionForBucket=a,l.send((function(){var e=s.bucketRegionCache[a]||null;e&&e!==o.httpRequest.region&&s.updateReqBucketRegion(o,e),t()}))}else t();else s.updateReqBucketRegion(o,"us-east-1"),"us-east-1"!==c[a]&&(c[a]="us-east-1"),t()},bucketRegionCache:{},clearBucketRegionCache:function(e){var t=this.bucketRegionCache;e?"string"==typeof e&&(e=[e]):e=Object.keys(t);for(var n=0;n<e.length;n++)delete t[e[n]];return t},correctBucketRegionFromCache:function(e){var t=e.params.Bucket||null;if(t){var n=e.service,r=e.httpRequest.region,o=n.bucketRegionCache[t];o&&o!==r&&n.updateReqBucketRegion(e,o)}},extractRequestIds:function(e){var t=e.httpResponse.headers?e.httpResponse.headers["x-amz-id-2"]:null,n=e.httpResponse.headers?e.httpResponse.headers["x-amz-cf-id"]:null;e.extendedRequestId=t,e.cfId=n,e.error&&(e.error.requestId=e.requestId||null,e.error.extendedRequestId=t,e.error.cfId=n)},getSignedUrl:function(e,t,n){var o=(t=r.util.copy(t||{})).Expires||900;if("number"!=typeof o)throw r.util.error(new Error,{code:"InvalidParameterException",message:"The expiration must be a number, received "+typeof o});delete t.Expires;var a=this.makeRequest(e,t);if(!n)return a.presign(o,n);r.util.defer((function(){a.presign(o,n)}))},createPresignedPost:function(e,t){"function"==typeof e&&void 0===t&&(t=e,e=null),e=r.util.copy(e||{});var n=this.config.params||{},o=e.Bucket||n.Bucket,a=this,i=this.config,s=r.util.copy(this.endpoint);function c(){return{url:r.util.urlFormat(s),fields:a.preparePostFields(i.credentials,i.region,o,e.Fields,e.Conditions,e.Expires)}}if(i.s3BucketEndpoint||(s.pathname="/"+o),!t)return c();i.getCredentials((function(e){if(e)t(e);else try{t(null,c())}catch(e){t(e)}}))},preparePostFields:function(e,t,n,a,i,s){var c=this.getSkewCorrectedDate();if(!e||!t||!n)throw new Error("Unable to create a POST object policy without a bucket, region, and credentials");a=r.util.copy(a||{}),i=(i||[]).slice(0),s=s||3600;var u=r.util.date.iso8601(c).replace(/[:\-]|\.\d{3}/g,""),l=u.substr(0,8),d=o.createScope(l,t,"s3"),p=e.accessKeyId+"/"+d;for(var h in a.bucket=n,a["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",a["X-Amz-Credential"]=p,a["X-Amz-Date"]=u,e.sessionToken&&(a["X-Amz-Security-Token"]=e.sessionToken),a)if(a.hasOwnProperty(h)){var f={};f[h]=a[h],i.push(f)}return a.Policy=this.preparePostPolicy(new Date(c.valueOf()+1e3*s),i),a["X-Amz-Signature"]=r.util.crypto.hmac(o.getSigningKey(e,l,t,"s3",!0),a.Policy,"hex"),a},preparePostPolicy:function(e,t){return r.util.base64.encode(JSON.stringify({expiration:r.util.date.iso8601(e),conditions:t}))},prepareSignedUrl:function(e){e.addListener("validate",e.service.noPresignedContentLength),e.removeListener("build",e.service.addContentType),e.params.Body?e.addListener("afterBuild",r.EventListeners.Core.COMPUTE_SHA256):e.removeListener("build",e.service.computeContentMd5)},disableBodySigning:function(e){var t=e.httpRequest.headers;Object.prototype.hasOwnProperty.call(t,"presigned-expires")||(t["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD")},noPresignedContentLength:function(e){if(void 0!==e.params.ContentLength)throw r.util.error(new Error,{code:"UnexpectedParameter",message:"ContentLength is not supported in pre-signed URLs."})},createBucket:function(e,t){"function"!=typeof e&&e||(t=t||e,e={});var n=this.endpoint.hostname,o=r.util.copy(e);return n===this.api.globalEndpoint||e.CreateBucketConfiguration||(o.CreateBucketConfiguration={LocationConstraint:this.config.region}),this.makeRequest("createBucket",o,t)},writeGetObjectResponse:function(e,t){var n=this.makeRequest("writeGetObjectResponse",r.util.copy(e),t),o=this.endpoint.hostname;return o=-1!==o.indexOf(this.config.region)?o.replace("s3.","s3-object-lambda."):o.replace("s3.","s3-object-lambda."+this.config.region+"."),n.httpRequest.endpoint=new r.Endpoint(o,this.config),n},upload:function(e,t,n){"function"==typeof t&&void 0===n&&(n=t,t=null),t=t||{},t=r.util.merge(t||{},{service:this,params:e});var o=new r.S3.ManagedUpload(t);return"function"==typeof n&&o.send(n),o}}),r.S3.addPromisesToClass=function(e){this.prototype.getSignedUrlPromise=r.util.promisifyMethod("getSignedUrl",e)},r.S3.deletePromisesFromClass=function(){delete this.prototype.getSignedUrlPromise},r.util.addPromises(r.S3)},function(e,t,n){(function(t){var r=n(18),o=n(164),a={isArnInParam:function(e,t){var n=((e.service.api.operations[e.operation]||{}).input||{}).members||{};return!(!e.params[t]||!n[t])&&r.util.ARN.validate(e.params[t])},validateArnService:function(e){var t=e._parsedArn;if("s3"!==t.service&&"s3-outposts"!==t.service&&"s3-object-lambda"!==t.service)throw r.util.error(new Error,{code:"InvalidARN",message:"expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component"})},validateArnAccount:function(e){var t=e._parsedArn;if(!/[0-9]{12}/.exec(t.accountId))throw r.util.error(new Error,{code:"InvalidARN",message:'ARN accountID does not match regex "[0-9]{12}"'})},validateS3AccessPointArn:function(e){var t=e._parsedArn,n=t.resource["accesspoint".length];if(2!==t.resource.split(n).length)throw r.util.error(new Error,{code:"InvalidARN",message:"Access Point ARN should have one resource accesspoint/{accesspointName}"});var o=t.resource.split(n)[1],i=o+"-"+t.accountId;if(!a.dnsCompatibleBucketName(i)||i.match(/\./))throw r.util.error(new Error,{code:"InvalidARN",message:"Access point resource in ARN is not DNS compatible. Got "+o});e._parsedArn.accessPoint=o},validateOutpostsArn:function(e){var t=e._parsedArn;if(0!==t.resource.indexOf("outpost:")&&0!==t.resource.indexOf("outpost/"))throw r.util.error(new Error,{code:"InvalidARN",message:"ARN resource should begin with 'outpost/'"});var n=t.resource["outpost".length],o=t.resource.split(n)[1];if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(o))throw r.util.error(new Error,{code:"InvalidARN",message:"Outpost resource in ARN is not DNS compatible. Got "+o});e._parsedArn.outpostId=o},validateOutpostsAccessPointArn:function(e){var t=e._parsedArn,n=t.resource["outpost".length];if(4!==t.resource.split(n).length)throw r.util.error(new Error,{code:"InvalidARN",message:"Outposts ARN should have two resources outpost/{outpostId}/accesspoint/{accesspointName}"});var o=t.resource.split(n)[3],i=o+"-"+t.accountId;if(!a.dnsCompatibleBucketName(i)||i.match(/\./))throw r.util.error(new Error,{code:"InvalidARN",message:"Access point resource in ARN is not DNS compatible. Got "+o});e._parsedArn.accessPoint=o},validateArnRegion:function(e){var t=a.loadUseArnRegionConfig(e),n=e._parsedArn.region,i=e.service.config.region;if(!n)throw r.util.error(new Error,{code:"InvalidARN",message:"ARN region is empty"});if(i.indexOf("fips")>=0||n.indexOf("fips")>=0)throw r.util.error(new Error,{code:"InvalidConfiguration",message:"ARN endpoint is not compatible with FIPS region"});if(!t&&n!==i)throw r.util.error(new Error,{code:"InvalidConfiguration",message:"Configured region conflicts with access point region"});if(t&&o.getEndpointSuffix(n)!==o.getEndpointSuffix(i))throw r.util.error(new Error,{code:"InvalidConfiguration",message:"Configured region and access point region not in same partition"});if(e.service.config.useAccelerateEndpoint)throw r.util.error(new Error,{code:"InvalidConfiguration",message:"useAccelerateEndpoint config is not supported with access point ARN"});if("s3-outposts"===e._parsedArn.service&&e.service.config.useDualstack)throw r.util.error(new Error,{code:"InvalidConfiguration",message:"useDualstack config is not supported with outposts access point ARN"})},loadUseArnRegionConfig:function(e){var n="AWS_S3_USE_ARN_REGION",o="s3_use_arn_region",a=!0,i=e.service._originalConfig||{};if(void 0!==e.service.config.s3UseArnRegion)return e.service.config.s3UseArnRegion;if(void 0!==i.s3UseArnRegion)a=!0===i.s3UseArnRegion;else if(r.util.isNode())if(t.env[n]){var s=t.env[n].trim().toLowerCase();if(["false","true"].indexOf(s)<0)throw r.util.error(new Error,{code:"InvalidConfiguration",message:n+" only accepts true or false. Got "+t.env[n],retryable:!1});a="true"===s}else{var c={};try{c=r.util.getProfilesFromSharedConfig(r.util.iniLoader)[t.env.AWS_PROFILE||r.util.defaultProfile]}catch(e){}if(c[o]){if(["false","true"].indexOf(c[o].trim().toLowerCase())<0)throw r.util.error(new Error,{code:"InvalidConfiguration",message:o+" only accepts true or false. Got "+c[o],retryable:!1});a="true"===c[o].trim().toLowerCase()}}return e.service.config.s3UseArnRegion=a,a},validatePopulateUriFromArn:function(e){if(e.service._originalConfig&&e.service._originalConfig.endpoint)throw r.util.error(new Error,{code:"InvalidConfiguration",message:"Custom endpoint is not compatible with access point ARN"});if(e.service.config.s3ForcePathStyle)throw r.util.error(new Error,{code:"InvalidConfiguration",message:"Cannot construct path-style endpoint with access point"})},dnsCompatibleBucketName:function(e){var t=e,n=new RegExp(/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/),r=new RegExp(/(\d+\.){3}\d+/),o=new RegExp(/\.\./);return!(!t.match(n)||t.match(r)||t.match(o))}};e.exports=a}).call(this,n(51))},function(e,t,n){var r=n(18),o=r.util.string.byteLength,a=r.util.Buffer;r.S3.ManagedUpload=r.util.inherit({constructor:function(e){var t=this;r.SequentialExecutor.call(t),t.body=null,t.sliceFn=null,t.callback=null,t.parts={},t.completeInfo=[],t.fillQueue=function(){t.callback(new Error("Unsupported body payload "+typeof t.body))},t.configure(e)},configure:function(e){if(e=e||{},this.partSize=this.minPartSize,e.queueSize&&(this.queueSize=e.queueSize),e.partSize&&(this.partSize=e.partSize),e.leavePartsOnError&&(this.leavePartsOnError=!0),e.tags){if(!Array.isArray(e.tags))throw new Error("Tags must be specified as an array; "+typeof e.tags+" provided.");this.tags=e.tags}if(this.partSize<this.minPartSize)throw new Error("partSize must be greater than "+this.minPartSize);this.service=e.service,this.bindServiceObject(e.params),this.validateBody(),this.adjustTotalBytes()},leavePartsOnError:!1,queueSize:4,partSize:null,minPartSize:5242880,maxTotalParts:1e4,send:function(e){var t=this;t.failed=!1,t.callback=e||function(e){if(e)throw e};var n=!0;if(t.sliceFn)t.fillQueue=t.fillBuffer;else if(r.util.isNode()){var o=r.util.stream.Stream;t.body instanceof o&&(n=!1,t.fillQueue=t.fillStream,t.partBuffers=[],t.body.on("error",(function(e){t.cleanup(e)})).on("readable",(function(){t.fillQueue()})).on("end",(function(){t.isDoneChunking=!0,t.numParts=t.totalPartNumbers,t.fillQueue.call(t),t.isDoneChunking&&t.totalPartNumbers>=1&&t.doneParts===t.numParts&&t.finishMultiPart()})))}n&&t.fillQueue.call(t)},abort:function(){var e=this;!0===e.isDoneChunking&&1===e.totalPartNumbers&&e.singlePart?e.singlePart.abort():e.cleanup(r.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1}))},validateBody:function(){var e=this;if(e.body=e.service.config.params.Body,"string"==typeof e.body)e.body=r.util.buffer.toBuffer(e.body);else if(!e.body)throw new Error("params.Body is required");e.sliceFn=r.util.arraySliceFn(e.body)},bindServiceObject:function(e){e=e||{};var t=this;if(t.service){var n=t.service,o=r.util.copy(n.config);o.signatureVersion=n.getSignatureVersion(),t.service=new n.constructor.__super__(o),t.service.config.params=r.util.merge(t.service.config.params||{},e),Object.defineProperty(t.service,"_originalConfig",{get:function(){return n._originalConfig},enumerable:!1,configurable:!0})}else t.service=new r.S3({params:e})},adjustTotalBytes:function(){var e=this;try{e.totalBytes=o(e.body)}catch(e){}if(e.totalBytes){var t=Math.ceil(e.totalBytes/e.maxTotalParts);t>e.partSize&&(e.partSize=t)}else e.totalBytes=void 0},isDoneChunking:!1,partPos:0,totalChunkedBytes:0,totalUploadedBytes:0,totalBytes:void 0,numParts:0,totalPartNumbers:0,activeParts:0,doneParts:0,parts:null,completeInfo:null,failed:!1,multipartReq:null,partBuffers:null,partBufferLength:0,fillBuffer:function(){var e=this,t=o(e.body);if(0===t)return e.isDoneChunking=!0,e.numParts=1,void e.nextChunk(e.body);for(;e.activeParts<e.queueSize&&e.partPos<t;){var n=Math.min(e.partPos+e.partSize,t),r=e.sliceFn.call(e.body,e.partPos,n);e.partPos+=e.partSize,(o(r)<e.partSize||e.partPos===t)&&(e.isDoneChunking=!0,e.numParts=e.totalPartNumbers+1),e.nextChunk(r)}},fillStream:function(){var e=this;if(!(e.activeParts>=e.queueSize)){var t=e.body.read(e.partSize-e.partBufferLength)||e.body.read();if(t&&(e.partBuffers.push(t),e.partBufferLength+=t.length,e.totalChunkedBytes+=t.length),e.partBufferLength>=e.partSize){var n=1===e.partBuffers.length?e.partBuffers[0]:a.concat(e.partBuffers);if(e.partBuffers=[],e.partBufferLength=0,n.length>e.partSize){var r=n.slice(e.partSize);e.partBuffers.push(r),e.partBufferLength+=r.length,n=n.slice(0,e.partSize)}e.nextChunk(n)}e.isDoneChunking&&!e.isDoneSending&&(n=1===e.partBuffers.length?e.partBuffers[0]:a.concat(e.partBuffers),e.partBuffers=[],e.partBufferLength=0,e.totalBytes=e.totalChunkedBytes,e.isDoneSending=!0,(0===e.numParts||n.length>0)&&(e.numParts++,e.nextChunk(n))),e.body.read(0)}},nextChunk:function(e){var t=this;if(t.failed)return null;var n=++t.totalPartNumbers;if(t.isDoneChunking&&1===n){var o={Body:e};this.tags&&(o.Tagging=this.getTaggingHeader());var a=t.service.putObject(o);return a._managedUpload=t,a.on("httpUploadProgress",t.progress).send(t.finishSinglePart),t.singlePart=a,null}if(t.service.config.params.ContentMD5){var i=r.util.error(new Error("The Content-MD5 you specified is invalid for multi-part uploads."),{code:"InvalidDigest",retryable:!1});return t.cleanup(i),null}if(t.completeInfo[n]&&null!==t.completeInfo[n].ETag)return null;t.activeParts++,t.service.config.params.UploadId?t.uploadPart(e,n):t.multipartReq?t.queueChunks(e,n):(t.multipartReq=t.service.createMultipartUpload(),t.multipartReq.on("success",(function(e){t.service.config.params.UploadId=e.data.UploadId,t.multipartReq=null})),t.queueChunks(e,n),t.multipartReq.on("error",(function(e){t.cleanup(e)})),t.multipartReq.send())},getTaggingHeader:function(){for(var e=[],t=0;t<this.tags.length;t++)e.push(r.util.uriEscape(this.tags[t].Key)+"="+r.util.uriEscape(this.tags[t].Value));return e.join("&")},uploadPart:function(e,t){var n=this,o={Body:e,ContentLength:r.util.string.byteLength(e),PartNumber:t},a={ETag:null,PartNumber:t};n.completeInfo[t]=a;var i=n.service.uploadPart(o);n.parts[t]=i,i._lastUploadedBytes=0,i._managedUpload=n,i.on("httpUploadProgress",n.progress),i.send((function(e,i){if(delete n.parts[o.PartNumber],n.activeParts--,!(e||i&&i.ETag)){var s="No access to ETag property on response.";r.util.isBrowser()&&(s+=" Check CORS configuration to expose ETag header."),e=r.util.error(new Error(s),{code:"ETagMissing",retryable:!1})}return e?n.cleanup(e):n.completeInfo[t]&&null!==n.completeInfo[t].ETag?null:(a.ETag=i.ETag,n.doneParts++,void(n.isDoneChunking&&n.doneParts===n.numParts?n.finishMultiPart():n.fillQueue.call(n)))}))},queueChunks:function(e,t){var n=this;n.multipartReq.on("success",(function(){n.uploadPart(e,t)}))},cleanup:function(e){var t=this;t.failed||("function"==typeof t.body.removeAllListeners&&"function"==typeof t.body.resume&&(t.body.removeAllListeners("readable"),t.body.removeAllListeners("end"),t.body.resume()),t.multipartReq&&(t.multipartReq.removeAllListeners("success"),t.multipartReq.removeAllListeners("error"),t.multipartReq.removeAllListeners("complete"),delete t.multipartReq),t.service.config.params.UploadId&&!t.leavePartsOnError?t.service.abortMultipartUpload().send():t.leavePartsOnError&&(t.isDoneChunking=!1),r.util.each(t.parts,(function(e,t){t.removeAllListeners("complete"),t.abort()})),t.activeParts=0,t.partPos=0,t.numParts=0,t.totalPartNumbers=0,t.parts={},t.failed=!0,t.callback(e))},finishMultiPart:function(){var e=this,t={MultipartUpload:{Parts:e.completeInfo.slice(1)}};e.service.completeMultipartUpload(t,(function(t,n){if(t)return e.cleanup(t);if(n&&"string"==typeof n.Location&&(n.Location=n.Location.replace(/%2F/g,"/")),Array.isArray(e.tags)){for(var r=0;r<e.tags.length;r++)e.tags[r].Value=String(e.tags[r].Value);e.service.putObjectTagging({Tagging:{TagSet:e.tags}},(function(t,r){t?e.callback(t):e.callback(t,n)}))}else e.callback(t,n)}))},finishSinglePart:function(e,t){var n=this.request._managedUpload,r=this.request.httpRequest,o=r.endpoint;if(e)return n.callback(e);t.Location=[o.protocol,"//",o.host,r.path].join(""),t.key=this.request.params.Key,t.Key=this.request.params.Key,t.Bucket=this.request.params.Bucket,n.callback(e,t)},progress:function(e){var t=this._managedUpload;"putObject"===this.operation?(e.part=1,e.key=this.params.Key):(t.totalUploadedBytes+=e.loaded-this._lastUploadedBytes,this._lastUploadedBytes=e.loaded,e={loaded:t.totalUploadedBytes,total:t.totalBytes,part:this.params.PartNumber,key:this.params.Key}),t.emit("httpUploadProgress",[e])}}),r.util.mixin(r.S3.ManagedUpload,r.SequentialExecutor),r.S3.ManagedUpload.addPromisesToClass=function(e){this.prototype.promise=r.util.promisifyMethod("send",e)},r.S3.ManagedUpload.deletePromisesFromClass=function(){delete this.prototype.promise},r.util.addPromises(r.S3.ManagedUpload),e.exports=r.S3.ManagedUpload},function(e){e.exports=JSON.parse('{"version":"2.0","metadata":{"apiVersion":"2006-03-01","checksumFormat":"md5","endpointPrefix":"s3","globalEndpoint":"s3.amazonaws.com","protocol":"rest-xml","serviceAbbreviation":"Amazon S3","serviceFullName":"Amazon Simple Storage Service","serviceId":"S3","signatureVersion":"s3","uid":"s3-2006-03-01"},"operations":{"AbortMultipartUpload":{"http":{"method":"DELETE","requestUri":"/{Bucket}/{Key+}","responseCode":204},"input":{"type":"structure","required":["Bucket","Key","UploadId"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"UploadId":{"location":"querystring","locationName":"uploadId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"CompleteMultipartUpload":{"http":{"requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","Key","UploadId"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"MultipartUpload":{"locationName":"CompleteMultipartUpload","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"Parts":{"locationName":"Part","type":"list","member":{"type":"structure","members":{"ETag":{},"PartNumber":{"type":"integer"}}},"flattened":true}}},"UploadId":{"location":"querystring","locationName":"uploadId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"MultipartUpload"},"output":{"type":"structure","members":{"Location":{},"Bucket":{},"Key":{},"Expiration":{"location":"header","locationName":"x-amz-expiration"},"ETag":{},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"VersionId":{"location":"header","locationName":"x-amz-version-id"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"CopyObject":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","CopySource","Key"],"members":{"ACL":{"location":"header","locationName":"x-amz-acl"},"Bucket":{"location":"uri","locationName":"Bucket"},"CacheControl":{"location":"header","locationName":"Cache-Control"},"ContentDisposition":{"location":"header","locationName":"Content-Disposition"},"ContentEncoding":{"location":"header","locationName":"Content-Encoding"},"ContentLanguage":{"location":"header","locationName":"Content-Language"},"ContentType":{"location":"header","locationName":"Content-Type"},"CopySource":{"location":"header","locationName":"x-amz-copy-source"},"CopySourceIfMatch":{"location":"header","locationName":"x-amz-copy-source-if-match"},"CopySourceIfModifiedSince":{"location":"header","locationName":"x-amz-copy-source-if-modified-since","type":"timestamp"},"CopySourceIfNoneMatch":{"location":"header","locationName":"x-amz-copy-source-if-none-match"},"CopySourceIfUnmodifiedSince":{"location":"header","locationName":"x-amz-copy-source-if-unmodified-since","type":"timestamp"},"Expires":{"location":"header","locationName":"Expires","type":"timestamp"},"GrantFullControl":{"location":"header","locationName":"x-amz-grant-full-control"},"GrantRead":{"location":"header","locationName":"x-amz-grant-read"},"GrantReadACP":{"location":"header","locationName":"x-amz-grant-read-acp"},"GrantWriteACP":{"location":"header","locationName":"x-amz-grant-write-acp"},"Key":{"location":"uri","locationName":"Key"},"Metadata":{"shape":"S13","location":"headers","locationName":"x-amz-meta-"},"MetadataDirective":{"location":"header","locationName":"x-amz-metadata-directive"},"TaggingDirective":{"location":"header","locationName":"x-amz-tagging-directive"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"StorageClass":{"location":"header","locationName":"x-amz-storage-class"},"WebsiteRedirectLocation":{"location":"header","locationName":"x-amz-website-redirect-location"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"SSEKMSEncryptionContext":{"shape":"S1d","location":"header","locationName":"x-amz-server-side-encryption-context"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"CopySourceSSECustomerAlgorithm":{"location":"header","locationName":"x-amz-copy-source-server-side-encryption-customer-algorithm"},"CopySourceSSECustomerKey":{"shape":"S1f","location":"header","locationName":"x-amz-copy-source-server-side-encryption-customer-key"},"CopySourceSSECustomerKeyMD5":{"location":"header","locationName":"x-amz-copy-source-server-side-encryption-customer-key-MD5"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"Tagging":{"location":"header","locationName":"x-amz-tagging"},"ObjectLockMode":{"location":"header","locationName":"x-amz-object-lock-mode"},"ObjectLockRetainUntilDate":{"shape":"S1j","location":"header","locationName":"x-amz-object-lock-retain-until-date"},"ObjectLockLegalHoldStatus":{"location":"header","locationName":"x-amz-object-lock-legal-hold"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"},"ExpectedSourceBucketOwner":{"location":"header","locationName":"x-amz-source-expected-bucket-owner"}}},"output":{"type":"structure","members":{"CopyObjectResult":{"type":"structure","members":{"ETag":{},"LastModified":{"type":"timestamp"}}},"Expiration":{"location":"header","locationName":"x-amz-expiration"},"CopySourceVersionId":{"location":"header","locationName":"x-amz-copy-source-version-id"},"VersionId":{"location":"header","locationName":"x-amz-version-id"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"SSEKMSEncryptionContext":{"shape":"S1d","location":"header","locationName":"x-amz-server-side-encryption-context"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}},"payload":"CopyObjectResult"},"alias":"PutObjectCopy"},"CreateBucket":{"http":{"method":"PUT","requestUri":"/{Bucket}"},"input":{"type":"structure","required":["Bucket"],"members":{"ACL":{"location":"header","locationName":"x-amz-acl"},"Bucket":{"location":"uri","locationName":"Bucket"},"CreateBucketConfiguration":{"locationName":"CreateBucketConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"LocationConstraint":{}}},"GrantFullControl":{"location":"header","locationName":"x-amz-grant-full-control"},"GrantRead":{"location":"header","locationName":"x-amz-grant-read"},"GrantReadACP":{"location":"header","locationName":"x-amz-grant-read-acp"},"GrantWrite":{"location":"header","locationName":"x-amz-grant-write"},"GrantWriteACP":{"location":"header","locationName":"x-amz-grant-write-acp"},"ObjectLockEnabledForBucket":{"location":"header","locationName":"x-amz-bucket-object-lock-enabled","type":"boolean"}},"payload":"CreateBucketConfiguration"},"output":{"type":"structure","members":{"Location":{"location":"header","locationName":"Location"}}},"alias":"PutBucket"},"CreateMultipartUpload":{"http":{"requestUri":"/{Bucket}/{Key+}?uploads"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"ACL":{"location":"header","locationName":"x-amz-acl"},"Bucket":{"location":"uri","locationName":"Bucket"},"CacheControl":{"location":"header","locationName":"Cache-Control"},"ContentDisposition":{"location":"header","locationName":"Content-Disposition"},"ContentEncoding":{"location":"header","locationName":"Content-Encoding"},"ContentLanguage":{"location":"header","locationName":"Content-Language"},"ContentType":{"location":"header","locationName":"Content-Type"},"Expires":{"location":"header","locationName":"Expires","type":"timestamp"},"GrantFullControl":{"location":"header","locationName":"x-amz-grant-full-control"},"GrantRead":{"location":"header","locationName":"x-amz-grant-read"},"GrantReadACP":{"location":"header","locationName":"x-amz-grant-read-acp"},"GrantWriteACP":{"location":"header","locationName":"x-amz-grant-write-acp"},"Key":{"location":"uri","locationName":"Key"},"Metadata":{"shape":"S13","location":"headers","locationName":"x-amz-meta-"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"StorageClass":{"location":"header","locationName":"x-amz-storage-class"},"WebsiteRedirectLocation":{"location":"header","locationName":"x-amz-website-redirect-location"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"SSEKMSEncryptionContext":{"shape":"S1d","location":"header","locationName":"x-amz-server-side-encryption-context"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"Tagging":{"location":"header","locationName":"x-amz-tagging"},"ObjectLockMode":{"location":"header","locationName":"x-amz-object-lock-mode"},"ObjectLockRetainUntilDate":{"shape":"S1j","location":"header","locationName":"x-amz-object-lock-retain-until-date"},"ObjectLockLegalHoldStatus":{"location":"header","locationName":"x-amz-object-lock-legal-hold"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"AbortDate":{"location":"header","locationName":"x-amz-abort-date","type":"timestamp"},"AbortRuleId":{"location":"header","locationName":"x-amz-abort-rule-id"},"Bucket":{"locationName":"Bucket"},"Key":{},"UploadId":{},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"SSEKMSEncryptionContext":{"shape":"S1d","location":"header","locationName":"x-amz-server-side-encryption-context"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}},"alias":"InitiateMultipartUpload"},"DeleteBucket":{"http":{"method":"DELETE","requestUri":"/{Bucket}","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketAnalyticsConfiguration":{"http":{"method":"DELETE","requestUri":"/{Bucket}?analytics","responseCode":204},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketCors":{"http":{"method":"DELETE","requestUri":"/{Bucket}?cors","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketEncryption":{"http":{"method":"DELETE","requestUri":"/{Bucket}?encryption","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketIntelligentTieringConfiguration":{"http":{"method":"DELETE","requestUri":"/{Bucket}?intelligent-tiering","responseCode":204},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"}}}},"DeleteBucketInventoryConfiguration":{"http":{"method":"DELETE","requestUri":"/{Bucket}?inventory","responseCode":204},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketLifecycle":{"http":{"method":"DELETE","requestUri":"/{Bucket}?lifecycle","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketMetricsConfiguration":{"http":{"method":"DELETE","requestUri":"/{Bucket}?metrics","responseCode":204},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketOwnershipControls":{"http":{"method":"DELETE","requestUri":"/{Bucket}?ownershipControls","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketPolicy":{"http":{"method":"DELETE","requestUri":"/{Bucket}?policy","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketReplication":{"http":{"method":"DELETE","requestUri":"/{Bucket}?replication","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketTagging":{"http":{"method":"DELETE","requestUri":"/{Bucket}?tagging","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteBucketWebsite":{"http":{"method":"DELETE","requestUri":"/{Bucket}?website","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"DeleteObject":{"http":{"method":"DELETE","requestUri":"/{Bucket}/{Key+}","responseCode":204},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"MFA":{"location":"header","locationName":"x-amz-mfa"},"VersionId":{"location":"querystring","locationName":"versionId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"BypassGovernanceRetention":{"location":"header","locationName":"x-amz-bypass-governance-retention","type":"boolean"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"DeleteMarker":{"location":"header","locationName":"x-amz-delete-marker","type":"boolean"},"VersionId":{"location":"header","locationName":"x-amz-version-id"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"DeleteObjectTagging":{"http":{"method":"DELETE","requestUri":"/{Bucket}/{Key+}?tagging","responseCode":204},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"VersionId":{"location":"header","locationName":"x-amz-version-id"}}}},"DeleteObjects":{"http":{"requestUri":"/{Bucket}?delete"},"input":{"type":"structure","required":["Bucket","Delete"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Delete":{"locationName":"Delete","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","required":["Objects"],"members":{"Objects":{"locationName":"Object","type":"list","member":{"type":"structure","required":["Key"],"members":{"Key":{},"VersionId":{}}},"flattened":true},"Quiet":{"type":"boolean"}}},"MFA":{"location":"header","locationName":"x-amz-mfa"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"BypassGovernanceRetention":{"location":"header","locationName":"x-amz-bypass-governance-retention","type":"boolean"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"Delete"},"output":{"type":"structure","members":{"Deleted":{"type":"list","member":{"type":"structure","members":{"Key":{},"VersionId":{},"DeleteMarker":{"type":"boolean"},"DeleteMarkerVersionId":{}}},"flattened":true},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"},"Errors":{"locationName":"Error","type":"list","member":{"type":"structure","members":{"Key":{},"VersionId":{},"Code":{},"Message":{}}},"flattened":true}}},"alias":"DeleteMultipleObjects","httpChecksumRequired":true},"DeletePublicAccessBlock":{"http":{"method":"DELETE","requestUri":"/{Bucket}?publicAccessBlock","responseCode":204},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"GetBucketAccelerateConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?accelerate"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Status":{}}}},"GetBucketAcl":{"http":{"method":"GET","requestUri":"/{Bucket}?acl"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Owner":{"shape":"S37"},"Grants":{"shape":"S3a","locationName":"AccessControlList"}}}},"GetBucketAnalyticsConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?analytics"},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"AnalyticsConfiguration":{"shape":"S3j"}},"payload":"AnalyticsConfiguration"}},"GetBucketCors":{"http":{"method":"GET","requestUri":"/{Bucket}?cors"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"CORSRules":{"shape":"S3y","locationName":"CORSRule"}}}},"GetBucketEncryption":{"http":{"method":"GET","requestUri":"/{Bucket}?encryption"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"ServerSideEncryptionConfiguration":{"shape":"S4b"}},"payload":"ServerSideEncryptionConfiguration"}},"GetBucketIntelligentTieringConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?intelligent-tiering"},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"}}},"output":{"type":"structure","members":{"IntelligentTieringConfiguration":{"shape":"S4h"}},"payload":"IntelligentTieringConfiguration"}},"GetBucketInventoryConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?inventory"},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"InventoryConfiguration":{"shape":"S4r"}},"payload":"InventoryConfiguration"}},"GetBucketLifecycle":{"http":{"method":"GET","requestUri":"/{Bucket}?lifecycle"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Rules":{"shape":"S57","locationName":"Rule"}}},"deprecated":true},"GetBucketLifecycleConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?lifecycle"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Rules":{"shape":"S5m","locationName":"Rule"}}}},"GetBucketLocation":{"http":{"method":"GET","requestUri":"/{Bucket}?location"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"LocationConstraint":{}}}},"GetBucketLogging":{"http":{"method":"GET","requestUri":"/{Bucket}?logging"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"LoggingEnabled":{"shape":"S5w"}}}},"GetBucketMetricsConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?metrics"},"input":{"type":"structure","required":["Bucket","Id"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"MetricsConfiguration":{"shape":"S64"}},"payload":"MetricsConfiguration"}},"GetBucketNotification":{"http":{"method":"GET","requestUri":"/{Bucket}?notification"},"input":{"shape":"S68"},"output":{"shape":"S69"},"deprecated":true},"GetBucketNotificationConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?notification"},"input":{"shape":"S68"},"output":{"shape":"S6k"}},"GetBucketOwnershipControls":{"http":{"method":"GET","requestUri":"/{Bucket}?ownershipControls"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"OwnershipControls":{"shape":"S70"}},"payload":"OwnershipControls"}},"GetBucketPolicy":{"http":{"method":"GET","requestUri":"/{Bucket}?policy"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Policy":{}},"payload":"Policy"}},"GetBucketPolicyStatus":{"http":{"method":"GET","requestUri":"/{Bucket}?policyStatus"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"PolicyStatus":{"type":"structure","members":{"IsPublic":{"locationName":"IsPublic","type":"boolean"}}}},"payload":"PolicyStatus"}},"GetBucketReplication":{"http":{"method":"GET","requestUri":"/{Bucket}?replication"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"ReplicationConfiguration":{"shape":"S7d"}},"payload":"ReplicationConfiguration"}},"GetBucketRequestPayment":{"http":{"method":"GET","requestUri":"/{Bucket}?requestPayment"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Payer":{}}}},"GetBucketTagging":{"http":{"method":"GET","requestUri":"/{Bucket}?tagging"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","required":["TagSet"],"members":{"TagSet":{"shape":"S3p"}}}},"GetBucketVersioning":{"http":{"method":"GET","requestUri":"/{Bucket}?versioning"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Status":{},"MFADelete":{"locationName":"MfaDelete"}}}},"GetBucketWebsite":{"http":{"method":"GET","requestUri":"/{Bucket}?website"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"RedirectAllRequestsTo":{"shape":"S8g"},"IndexDocument":{"shape":"S8j"},"ErrorDocument":{"shape":"S8l"},"RoutingRules":{"shape":"S8m"}}}},"GetObject":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"IfMatch":{"location":"header","locationName":"If-Match"},"IfModifiedSince":{"location":"header","locationName":"If-Modified-Since","type":"timestamp"},"IfNoneMatch":{"location":"header","locationName":"If-None-Match"},"IfUnmodifiedSince":{"location":"header","locationName":"If-Unmodified-Since","type":"timestamp"},"Key":{"location":"uri","locationName":"Key"},"Range":{"location":"header","locationName":"Range"},"ResponseCacheControl":{"location":"querystring","locationName":"response-cache-control"},"ResponseContentDisposition":{"location":"querystring","locationName":"response-content-disposition"},"ResponseContentEncoding":{"location":"querystring","locationName":"response-content-encoding"},"ResponseContentLanguage":{"location":"querystring","locationName":"response-content-language"},"ResponseContentType":{"location":"querystring","locationName":"response-content-type"},"ResponseExpires":{"location":"querystring","locationName":"response-expires","type":"timestamp","timestampFormat":"rfc822"},"VersionId":{"location":"querystring","locationName":"versionId"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"PartNumber":{"location":"querystring","locationName":"partNumber","type":"integer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Body":{"streaming":true,"type":"blob"},"DeleteMarker":{"location":"header","locationName":"x-amz-delete-marker","type":"boolean"},"AcceptRanges":{"location":"header","locationName":"accept-ranges"},"Expiration":{"location":"header","locationName":"x-amz-expiration"},"Restore":{"location":"header","locationName":"x-amz-restore"},"LastModified":{"location":"header","locationName":"Last-Modified","type":"timestamp"},"ContentLength":{"location":"header","locationName":"Content-Length","type":"long"},"ETag":{"location":"header","locationName":"ETag"},"MissingMeta":{"location":"header","locationName":"x-amz-missing-meta","type":"integer"},"VersionId":{"location":"header","locationName":"x-amz-version-id"},"CacheControl":{"location":"header","locationName":"Cache-Control"},"ContentDisposition":{"location":"header","locationName":"Content-Disposition"},"ContentEncoding":{"location":"header","locationName":"Content-Encoding"},"ContentLanguage":{"location":"header","locationName":"Content-Language"},"ContentRange":{"location":"header","locationName":"Content-Range"},"ContentType":{"location":"header","locationName":"Content-Type"},"Expires":{"location":"header","locationName":"Expires","type":"timestamp"},"WebsiteRedirectLocation":{"location":"header","locationName":"x-amz-website-redirect-location"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"Metadata":{"shape":"S13","location":"headers","locationName":"x-amz-meta-"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"StorageClass":{"location":"header","locationName":"x-amz-storage-class"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"},"ReplicationStatus":{"location":"header","locationName":"x-amz-replication-status"},"PartsCount":{"location":"header","locationName":"x-amz-mp-parts-count","type":"integer"},"TagCount":{"location":"header","locationName":"x-amz-tagging-count","type":"integer"},"ObjectLockMode":{"location":"header","locationName":"x-amz-object-lock-mode"},"ObjectLockRetainUntilDate":{"shape":"S1j","location":"header","locationName":"x-amz-object-lock-retain-until-date"},"ObjectLockLegalHoldStatus":{"location":"header","locationName":"x-amz-object-lock-legal-hold"}},"payload":"Body"}},"GetObjectAcl":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}?acl"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Owner":{"shape":"S37"},"Grants":{"shape":"S3a","locationName":"AccessControlList"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"GetObjectLegalHold":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}?legal-hold"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"LegalHold":{"shape":"S9l"}},"payload":"LegalHold"}},"GetObjectLockConfiguration":{"http":{"method":"GET","requestUri":"/{Bucket}?object-lock"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"ObjectLockConfiguration":{"shape":"S9o"}},"payload":"ObjectLockConfiguration"}},"GetObjectRetention":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}?retention"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Retention":{"shape":"S9w"}},"payload":"Retention"}},"GetObjectTagging":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}?tagging"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"}}},"output":{"type":"structure","required":["TagSet"],"members":{"VersionId":{"location":"header","locationName":"x-amz-version-id"},"TagSet":{"shape":"S3p"}}}},"GetObjectTorrent":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}?torrent"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Body":{"streaming":true,"type":"blob"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}},"payload":"Body"}},"GetPublicAccessBlock":{"http":{"method":"GET","requestUri":"/{Bucket}?publicAccessBlock"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"PublicAccessBlockConfiguration":{"shape":"Sa3"}},"payload":"PublicAccessBlockConfiguration"}},"HeadBucket":{"http":{"method":"HEAD","requestUri":"/{Bucket}"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}}},"HeadObject":{"http":{"method":"HEAD","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"IfMatch":{"location":"header","locationName":"If-Match"},"IfModifiedSince":{"location":"header","locationName":"If-Modified-Since","type":"timestamp"},"IfNoneMatch":{"location":"header","locationName":"If-None-Match"},"IfUnmodifiedSince":{"location":"header","locationName":"If-Unmodified-Since","type":"timestamp"},"Key":{"location":"uri","locationName":"Key"},"Range":{"location":"header","locationName":"Range"},"VersionId":{"location":"querystring","locationName":"versionId"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"PartNumber":{"location":"querystring","locationName":"partNumber","type":"integer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"DeleteMarker":{"location":"header","locationName":"x-amz-delete-marker","type":"boolean"},"AcceptRanges":{"location":"header","locationName":"accept-ranges"},"Expiration":{"location":"header","locationName":"x-amz-expiration"},"Restore":{"location":"header","locationName":"x-amz-restore"},"ArchiveStatus":{"location":"header","locationName":"x-amz-archive-status"},"LastModified":{"location":"header","locationName":"Last-Modified","type":"timestamp"},"ContentLength":{"location":"header","locationName":"Content-Length","type":"long"},"ETag":{"location":"header","locationName":"ETag"},"MissingMeta":{"location":"header","locationName":"x-amz-missing-meta","type":"integer"},"VersionId":{"location":"header","locationName":"x-amz-version-id"},"CacheControl":{"location":"header","locationName":"Cache-Control"},"ContentDisposition":{"location":"header","locationName":"Content-Disposition"},"ContentEncoding":{"location":"header","locationName":"Content-Encoding"},"ContentLanguage":{"location":"header","locationName":"Content-Language"},"ContentType":{"location":"header","locationName":"Content-Type"},"Expires":{"location":"header","locationName":"Expires","type":"timestamp"},"WebsiteRedirectLocation":{"location":"header","locationName":"x-amz-website-redirect-location"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"Metadata":{"shape":"S13","location":"headers","locationName":"x-amz-meta-"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"StorageClass":{"location":"header","locationName":"x-amz-storage-class"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"},"ReplicationStatus":{"location":"header","locationName":"x-amz-replication-status"},"PartsCount":{"location":"header","locationName":"x-amz-mp-parts-count","type":"integer"},"ObjectLockMode":{"location":"header","locationName":"x-amz-object-lock-mode"},"ObjectLockRetainUntilDate":{"shape":"S1j","location":"header","locationName":"x-amz-object-lock-retain-until-date"},"ObjectLockLegalHoldStatus":{"location":"header","locationName":"x-amz-object-lock-legal-hold"}}}},"ListBucketAnalyticsConfigurations":{"http":{"method":"GET","requestUri":"/{Bucket}?analytics"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContinuationToken":{"location":"querystring","locationName":"continuation-token"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"IsTruncated":{"type":"boolean"},"ContinuationToken":{},"NextContinuationToken":{},"AnalyticsConfigurationList":{"locationName":"AnalyticsConfiguration","type":"list","member":{"shape":"S3j"},"flattened":true}}}},"ListBucketIntelligentTieringConfigurations":{"http":{"method":"GET","requestUri":"/{Bucket}?intelligent-tiering"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContinuationToken":{"location":"querystring","locationName":"continuation-token"}}},"output":{"type":"structure","members":{"IsTruncated":{"type":"boolean"},"ContinuationToken":{},"NextContinuationToken":{},"IntelligentTieringConfigurationList":{"locationName":"IntelligentTieringConfiguration","type":"list","member":{"shape":"S4h"},"flattened":true}}}},"ListBucketInventoryConfigurations":{"http":{"method":"GET","requestUri":"/{Bucket}?inventory"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContinuationToken":{"location":"querystring","locationName":"continuation-token"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"ContinuationToken":{},"InventoryConfigurationList":{"locationName":"InventoryConfiguration","type":"list","member":{"shape":"S4r"},"flattened":true},"IsTruncated":{"type":"boolean"},"NextContinuationToken":{}}}},"ListBucketMetricsConfigurations":{"http":{"method":"GET","requestUri":"/{Bucket}?metrics"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContinuationToken":{"location":"querystring","locationName":"continuation-token"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"IsTruncated":{"type":"boolean"},"ContinuationToken":{},"NextContinuationToken":{},"MetricsConfigurationList":{"locationName":"MetricsConfiguration","type":"list","member":{"shape":"S64"},"flattened":true}}}},"ListBuckets":{"http":{"method":"GET"},"output":{"type":"structure","members":{"Buckets":{"type":"list","member":{"locationName":"Bucket","type":"structure","members":{"Name":{},"CreationDate":{"type":"timestamp"}}}},"Owner":{"shape":"S37"}}},"alias":"GetService"},"ListMultipartUploads":{"http":{"method":"GET","requestUri":"/{Bucket}?uploads"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Delimiter":{"location":"querystring","locationName":"delimiter"},"EncodingType":{"location":"querystring","locationName":"encoding-type"},"KeyMarker":{"location":"querystring","locationName":"key-marker"},"MaxUploads":{"location":"querystring","locationName":"max-uploads","type":"integer"},"Prefix":{"location":"querystring","locationName":"prefix"},"UploadIdMarker":{"location":"querystring","locationName":"upload-id-marker"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Bucket":{},"KeyMarker":{},"UploadIdMarker":{},"NextKeyMarker":{},"Prefix":{},"Delimiter":{},"NextUploadIdMarker":{},"MaxUploads":{"type":"integer"},"IsTruncated":{"type":"boolean"},"Uploads":{"locationName":"Upload","type":"list","member":{"type":"structure","members":{"UploadId":{},"Key":{},"Initiated":{"type":"timestamp"},"StorageClass":{},"Owner":{"shape":"S37"},"Initiator":{"shape":"Sb4"}}},"flattened":true},"CommonPrefixes":{"shape":"Sb5"},"EncodingType":{}}}},"ListObjectVersions":{"http":{"method":"GET","requestUri":"/{Bucket}?versions"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Delimiter":{"location":"querystring","locationName":"delimiter"},"EncodingType":{"location":"querystring","locationName":"encoding-type"},"KeyMarker":{"location":"querystring","locationName":"key-marker"},"MaxKeys":{"location":"querystring","locationName":"max-keys","type":"integer"},"Prefix":{"location":"querystring","locationName":"prefix"},"VersionIdMarker":{"location":"querystring","locationName":"version-id-marker"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"IsTruncated":{"type":"boolean"},"KeyMarker":{},"VersionIdMarker":{},"NextKeyMarker":{},"NextVersionIdMarker":{},"Versions":{"locationName":"Version","type":"list","member":{"type":"structure","members":{"ETag":{},"Size":{"type":"integer"},"StorageClass":{},"Key":{},"VersionId":{},"IsLatest":{"type":"boolean"},"LastModified":{"type":"timestamp"},"Owner":{"shape":"S37"}}},"flattened":true},"DeleteMarkers":{"locationName":"DeleteMarker","type":"list","member":{"type":"structure","members":{"Owner":{"shape":"S37"},"Key":{},"VersionId":{},"IsLatest":{"type":"boolean"},"LastModified":{"type":"timestamp"}}},"flattened":true},"Name":{},"Prefix":{},"Delimiter":{},"MaxKeys":{"type":"integer"},"CommonPrefixes":{"shape":"Sb5"},"EncodingType":{}}},"alias":"GetBucketObjectVersions"},"ListObjects":{"http":{"method":"GET","requestUri":"/{Bucket}"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Delimiter":{"location":"querystring","locationName":"delimiter"},"EncodingType":{"location":"querystring","locationName":"encoding-type"},"Marker":{"location":"querystring","locationName":"marker"},"MaxKeys":{"location":"querystring","locationName":"max-keys","type":"integer"},"Prefix":{"location":"querystring","locationName":"prefix"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"IsTruncated":{"type":"boolean"},"Marker":{},"NextMarker":{},"Contents":{"shape":"Sbn"},"Name":{},"Prefix":{},"Delimiter":{},"MaxKeys":{"type":"integer"},"CommonPrefixes":{"shape":"Sb5"},"EncodingType":{}}},"alias":"GetBucket"},"ListObjectsV2":{"http":{"method":"GET","requestUri":"/{Bucket}?list-type=2"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Delimiter":{"location":"querystring","locationName":"delimiter"},"EncodingType":{"location":"querystring","locationName":"encoding-type"},"MaxKeys":{"location":"querystring","locationName":"max-keys","type":"integer"},"Prefix":{"location":"querystring","locationName":"prefix"},"ContinuationToken":{"location":"querystring","locationName":"continuation-token"},"FetchOwner":{"location":"querystring","locationName":"fetch-owner","type":"boolean"},"StartAfter":{"location":"querystring","locationName":"start-after"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"IsTruncated":{"type":"boolean"},"Contents":{"shape":"Sbn"},"Name":{},"Prefix":{},"Delimiter":{},"MaxKeys":{"type":"integer"},"CommonPrefixes":{"shape":"Sb5"},"EncodingType":{},"KeyCount":{"type":"integer"},"ContinuationToken":{},"NextContinuationToken":{},"StartAfter":{}}}},"ListParts":{"http":{"method":"GET","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","Key","UploadId"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"MaxParts":{"location":"querystring","locationName":"max-parts","type":"integer"},"PartNumberMarker":{"location":"querystring","locationName":"part-number-marker","type":"integer"},"UploadId":{"location":"querystring","locationName":"uploadId"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"AbortDate":{"location":"header","locationName":"x-amz-abort-date","type":"timestamp"},"AbortRuleId":{"location":"header","locationName":"x-amz-abort-rule-id"},"Bucket":{},"Key":{},"UploadId":{},"PartNumberMarker":{"type":"integer"},"NextPartNumberMarker":{"type":"integer"},"MaxParts":{"type":"integer"},"IsTruncated":{"type":"boolean"},"Parts":{"locationName":"Part","type":"list","member":{"type":"structure","members":{"PartNumber":{"type":"integer"},"LastModified":{"type":"timestamp"},"ETag":{},"Size":{"type":"integer"}}},"flattened":true},"Initiator":{"shape":"Sb4"},"Owner":{"shape":"S37"},"StorageClass":{},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"PutBucketAccelerateConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?accelerate"},"input":{"type":"structure","required":["Bucket","AccelerateConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"AccelerateConfiguration":{"locationName":"AccelerateConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"Status":{}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"AccelerateConfiguration"}},"PutBucketAcl":{"http":{"method":"PUT","requestUri":"/{Bucket}?acl"},"input":{"type":"structure","required":["Bucket"],"members":{"ACL":{"location":"header","locationName":"x-amz-acl"},"AccessControlPolicy":{"shape":"Sc5","locationName":"AccessControlPolicy","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"GrantFullControl":{"location":"header","locationName":"x-amz-grant-full-control"},"GrantRead":{"location":"header","locationName":"x-amz-grant-read"},"GrantReadACP":{"location":"header","locationName":"x-amz-grant-read-acp"},"GrantWrite":{"location":"header","locationName":"x-amz-grant-write"},"GrantWriteACP":{"location":"header","locationName":"x-amz-grant-write-acp"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"AccessControlPolicy"},"httpChecksumRequired":true},"PutBucketAnalyticsConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?analytics"},"input":{"type":"structure","required":["Bucket","Id","AnalyticsConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"AnalyticsConfiguration":{"shape":"S3j","locationName":"AnalyticsConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"AnalyticsConfiguration"}},"PutBucketCors":{"http":{"method":"PUT","requestUri":"/{Bucket}?cors"},"input":{"type":"structure","required":["Bucket","CORSConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"CORSConfiguration":{"locationName":"CORSConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","required":["CORSRules"],"members":{"CORSRules":{"shape":"S3y","locationName":"CORSRule"}}},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"CORSConfiguration"},"httpChecksumRequired":true},"PutBucketEncryption":{"http":{"method":"PUT","requestUri":"/{Bucket}?encryption"},"input":{"type":"structure","required":["Bucket","ServerSideEncryptionConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ServerSideEncryptionConfiguration":{"shape":"S4b","locationName":"ServerSideEncryptionConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"ServerSideEncryptionConfiguration"},"httpChecksumRequired":true},"PutBucketIntelligentTieringConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?intelligent-tiering"},"input":{"type":"structure","required":["Bucket","Id","IntelligentTieringConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"IntelligentTieringConfiguration":{"shape":"S4h","locationName":"IntelligentTieringConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}}},"payload":"IntelligentTieringConfiguration"}},"PutBucketInventoryConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?inventory"},"input":{"type":"structure","required":["Bucket","Id","InventoryConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"InventoryConfiguration":{"shape":"S4r","locationName":"InventoryConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"InventoryConfiguration"}},"PutBucketLifecycle":{"http":{"method":"PUT","requestUri":"/{Bucket}?lifecycle"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"LifecycleConfiguration":{"locationName":"LifecycleConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","required":["Rules"],"members":{"Rules":{"shape":"S57","locationName":"Rule"}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"LifecycleConfiguration"},"deprecated":true,"httpChecksumRequired":true},"PutBucketLifecycleConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?lifecycle"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"LifecycleConfiguration":{"locationName":"LifecycleConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","required":["Rules"],"members":{"Rules":{"shape":"S5m","locationName":"Rule"}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"LifecycleConfiguration"},"httpChecksumRequired":true},"PutBucketLogging":{"http":{"method":"PUT","requestUri":"/{Bucket}?logging"},"input":{"type":"structure","required":["Bucket","BucketLoggingStatus"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"BucketLoggingStatus":{"locationName":"BucketLoggingStatus","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"LoggingEnabled":{"shape":"S5w"}}},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"BucketLoggingStatus"},"httpChecksumRequired":true},"PutBucketMetricsConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?metrics"},"input":{"type":"structure","required":["Bucket","Id","MetricsConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Id":{"location":"querystring","locationName":"id"},"MetricsConfiguration":{"shape":"S64","locationName":"MetricsConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"MetricsConfiguration"}},"PutBucketNotification":{"http":{"method":"PUT","requestUri":"/{Bucket}?notification"},"input":{"type":"structure","required":["Bucket","NotificationConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"NotificationConfiguration":{"shape":"S69","locationName":"NotificationConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"NotificationConfiguration"},"deprecated":true,"httpChecksumRequired":true},"PutBucketNotificationConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?notification"},"input":{"type":"structure","required":["Bucket","NotificationConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"NotificationConfiguration":{"shape":"S6k","locationName":"NotificationConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"NotificationConfiguration"}},"PutBucketOwnershipControls":{"http":{"method":"PUT","requestUri":"/{Bucket}?ownershipControls"},"input":{"type":"structure","required":["Bucket","OwnershipControls"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"},"OwnershipControls":{"shape":"S70","locationName":"OwnershipControls","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}}},"payload":"OwnershipControls"},"httpChecksumRequired":true},"PutBucketPolicy":{"http":{"method":"PUT","requestUri":"/{Bucket}?policy"},"input":{"type":"structure","required":["Bucket","Policy"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ConfirmRemoveSelfBucketAccess":{"location":"header","locationName":"x-amz-confirm-remove-self-bucket-access","type":"boolean"},"Policy":{},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"Policy"},"httpChecksumRequired":true},"PutBucketReplication":{"http":{"method":"PUT","requestUri":"/{Bucket}?replication"},"input":{"type":"structure","required":["Bucket","ReplicationConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ReplicationConfiguration":{"shape":"S7d","locationName":"ReplicationConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"Token":{"location":"header","locationName":"x-amz-bucket-object-lock-token"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"ReplicationConfiguration"},"httpChecksumRequired":true},"PutBucketRequestPayment":{"http":{"method":"PUT","requestUri":"/{Bucket}?requestPayment"},"input":{"type":"structure","required":["Bucket","RequestPaymentConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"RequestPaymentConfiguration":{"locationName":"RequestPaymentConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","required":["Payer"],"members":{"Payer":{}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"RequestPaymentConfiguration"},"httpChecksumRequired":true},"PutBucketTagging":{"http":{"method":"PUT","requestUri":"/{Bucket}?tagging"},"input":{"type":"structure","required":["Bucket","Tagging"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"Tagging":{"shape":"Scu","locationName":"Tagging","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"Tagging"},"httpChecksumRequired":true},"PutBucketVersioning":{"http":{"method":"PUT","requestUri":"/{Bucket}?versioning"},"input":{"type":"structure","required":["Bucket","VersioningConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"MFA":{"location":"header","locationName":"x-amz-mfa"},"VersioningConfiguration":{"locationName":"VersioningConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"MFADelete":{"locationName":"MfaDelete"},"Status":{}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"VersioningConfiguration"},"httpChecksumRequired":true},"PutBucketWebsite":{"http":{"method":"PUT","requestUri":"/{Bucket}?website"},"input":{"type":"structure","required":["Bucket","WebsiteConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"WebsiteConfiguration":{"locationName":"WebsiteConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"ErrorDocument":{"shape":"S8l"},"IndexDocument":{"shape":"S8j"},"RedirectAllRequestsTo":{"shape":"S8g"},"RoutingRules":{"shape":"S8m"}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"WebsiteConfiguration"},"httpChecksumRequired":true},"PutObject":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"ACL":{"location":"header","locationName":"x-amz-acl"},"Body":{"streaming":true,"type":"blob"},"Bucket":{"location":"uri","locationName":"Bucket"},"CacheControl":{"location":"header","locationName":"Cache-Control"},"ContentDisposition":{"location":"header","locationName":"Content-Disposition"},"ContentEncoding":{"location":"header","locationName":"Content-Encoding"},"ContentLanguage":{"location":"header","locationName":"Content-Language"},"ContentLength":{"location":"header","locationName":"Content-Length","type":"long"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ContentType":{"location":"header","locationName":"Content-Type"},"Expires":{"location":"header","locationName":"Expires","type":"timestamp"},"GrantFullControl":{"location":"header","locationName":"x-amz-grant-full-control"},"GrantRead":{"location":"header","locationName":"x-amz-grant-read"},"GrantReadACP":{"location":"header","locationName":"x-amz-grant-read-acp"},"GrantWriteACP":{"location":"header","locationName":"x-amz-grant-write-acp"},"Key":{"location":"uri","locationName":"Key"},"Metadata":{"shape":"S13","location":"headers","locationName":"x-amz-meta-"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"StorageClass":{"location":"header","locationName":"x-amz-storage-class"},"WebsiteRedirectLocation":{"location":"header","locationName":"x-amz-website-redirect-location"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"SSEKMSEncryptionContext":{"shape":"S1d","location":"header","locationName":"x-amz-server-side-encryption-context"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"Tagging":{"location":"header","locationName":"x-amz-tagging"},"ObjectLockMode":{"location":"header","locationName":"x-amz-object-lock-mode"},"ObjectLockRetainUntilDate":{"shape":"S1j","location":"header","locationName":"x-amz-object-lock-retain-until-date"},"ObjectLockLegalHoldStatus":{"location":"header","locationName":"x-amz-object-lock-legal-hold"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"Body"},"output":{"type":"structure","members":{"Expiration":{"location":"header","locationName":"x-amz-expiration"},"ETag":{"location":"header","locationName":"ETag"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"VersionId":{"location":"header","locationName":"x-amz-version-id"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"SSEKMSEncryptionContext":{"shape":"S1d","location":"header","locationName":"x-amz-server-side-encryption-context"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"PutObjectAcl":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}?acl"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"ACL":{"location":"header","locationName":"x-amz-acl"},"AccessControlPolicy":{"shape":"Sc5","locationName":"AccessControlPolicy","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"GrantFullControl":{"location":"header","locationName":"x-amz-grant-full-control"},"GrantRead":{"location":"header","locationName":"x-amz-grant-read"},"GrantReadACP":{"location":"header","locationName":"x-amz-grant-read-acp"},"GrantWrite":{"location":"header","locationName":"x-amz-grant-write"},"GrantWriteACP":{"location":"header","locationName":"x-amz-grant-write-acp"},"Key":{"location":"uri","locationName":"Key"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"VersionId":{"location":"querystring","locationName":"versionId"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"AccessControlPolicy"},"output":{"type":"structure","members":{"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}},"httpChecksumRequired":true},"PutObjectLegalHold":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}?legal-hold"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"LegalHold":{"shape":"S9l","locationName":"LegalHold","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"VersionId":{"location":"querystring","locationName":"versionId"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"LegalHold"},"output":{"type":"structure","members":{"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}},"httpChecksumRequired":true},"PutObjectLockConfiguration":{"http":{"method":"PUT","requestUri":"/{Bucket}?object-lock"},"input":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ObjectLockConfiguration":{"shape":"S9o","locationName":"ObjectLockConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"Token":{"location":"header","locationName":"x-amz-bucket-object-lock-token"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"ObjectLockConfiguration"},"output":{"type":"structure","members":{"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}},"httpChecksumRequired":true},"PutObjectRetention":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}?retention"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"Retention":{"shape":"S9w","locationName":"Retention","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"VersionId":{"location":"querystring","locationName":"versionId"},"BypassGovernanceRetention":{"location":"header","locationName":"x-amz-bypass-governance-retention","type":"boolean"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"Retention"},"output":{"type":"structure","members":{"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}},"httpChecksumRequired":true},"PutObjectTagging":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}?tagging"},"input":{"type":"structure","required":["Bucket","Key","Tagging"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"Tagging":{"shape":"Scu","locationName":"Tagging","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"}},"payload":"Tagging"},"output":{"type":"structure","members":{"VersionId":{"location":"header","locationName":"x-amz-version-id"}}},"httpChecksumRequired":true},"PutPublicAccessBlock":{"http":{"method":"PUT","requestUri":"/{Bucket}?publicAccessBlock"},"input":{"type":"structure","required":["Bucket","PublicAccessBlockConfiguration"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"PublicAccessBlockConfiguration":{"shape":"Sa3","locationName":"PublicAccessBlockConfiguration","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"PublicAccessBlockConfiguration"},"httpChecksumRequired":true},"RestoreObject":{"http":{"requestUri":"/{Bucket}/{Key+}?restore"},"input":{"type":"structure","required":["Bucket","Key"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"VersionId":{"location":"querystring","locationName":"versionId"},"RestoreRequest":{"locationName":"RestoreRequest","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","members":{"Days":{"type":"integer"},"GlacierJobParameters":{"type":"structure","required":["Tier"],"members":{"Tier":{}}},"Type":{},"Tier":{},"Description":{},"SelectParameters":{"type":"structure","required":["InputSerialization","ExpressionType","Expression","OutputSerialization"],"members":{"InputSerialization":{"shape":"Sdk"},"ExpressionType":{},"Expression":{},"OutputSerialization":{"shape":"Sdz"}}},"OutputLocation":{"type":"structure","members":{"S3":{"type":"structure","required":["BucketName","Prefix"],"members":{"BucketName":{},"Prefix":{},"Encryption":{"type":"structure","required":["EncryptionType"],"members":{"EncryptionType":{},"KMSKeyId":{"shape":"Sk"},"KMSContext":{}}},"CannedACL":{},"AccessControlList":{"shape":"S3a"},"Tagging":{"shape":"Scu"},"UserMetadata":{"type":"list","member":{"locationName":"MetadataEntry","type":"structure","members":{"Name":{},"Value":{}}}},"StorageClass":{}}}}}}},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"RestoreRequest"},"output":{"type":"structure","members":{"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"},"RestoreOutputPath":{"location":"header","locationName":"x-amz-restore-output-path"}}},"alias":"PostObjectRestore"},"SelectObjectContent":{"http":{"requestUri":"/{Bucket}/{Key+}?select&select-type=2"},"input":{"locationName":"SelectObjectContentRequest","xmlNamespace":{"uri":"http://s3.amazonaws.com/doc/2006-03-01/"},"type":"structure","required":["Bucket","Key","Expression","ExpressionType","InputSerialization","OutputSerialization"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"Key":{"location":"uri","locationName":"Key"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"Expression":{},"ExpressionType":{},"RequestProgress":{"type":"structure","members":{"Enabled":{"type":"boolean"}}},"InputSerialization":{"shape":"Sdk"},"OutputSerialization":{"shape":"Sdz"},"ScanRange":{"type":"structure","members":{"Start":{"type":"long"},"End":{"type":"long"}}},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"output":{"type":"structure","members":{"Payload":{"type":"structure","members":{"Records":{"type":"structure","members":{"Payload":{"eventpayload":true,"type":"blob"}},"event":true},"Stats":{"type":"structure","members":{"Details":{"eventpayload":true,"type":"structure","members":{"BytesScanned":{"type":"long"},"BytesProcessed":{"type":"long"},"BytesReturned":{"type":"long"}}}},"event":true},"Progress":{"type":"structure","members":{"Details":{"eventpayload":true,"type":"structure","members":{"BytesScanned":{"type":"long"},"BytesProcessed":{"type":"long"},"BytesReturned":{"type":"long"}}}},"event":true},"Cont":{"type":"structure","members":{},"event":true},"End":{"type":"structure","members":{},"event":true}},"eventstream":true}},"payload":"Payload"}},"UploadPart":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","Key","PartNumber","UploadId"],"members":{"Body":{"streaming":true,"type":"blob"},"Bucket":{"location":"uri","locationName":"Bucket"},"ContentLength":{"location":"header","locationName":"Content-Length","type":"long"},"ContentMD5":{"location":"header","locationName":"Content-MD5"},"Key":{"location":"uri","locationName":"Key"},"PartNumber":{"location":"querystring","locationName":"partNumber","type":"integer"},"UploadId":{"location":"querystring","locationName":"uploadId"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}},"payload":"Body"},"output":{"type":"structure","members":{"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"ETag":{"location":"header","locationName":"ETag"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}}}},"UploadPartCopy":{"http":{"method":"PUT","requestUri":"/{Bucket}/{Key+}"},"input":{"type":"structure","required":["Bucket","CopySource","Key","PartNumber","UploadId"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"CopySource":{"location":"header","locationName":"x-amz-copy-source"},"CopySourceIfMatch":{"location":"header","locationName":"x-amz-copy-source-if-match"},"CopySourceIfModifiedSince":{"location":"header","locationName":"x-amz-copy-source-if-modified-since","type":"timestamp"},"CopySourceIfNoneMatch":{"location":"header","locationName":"x-amz-copy-source-if-none-match"},"CopySourceIfUnmodifiedSince":{"location":"header","locationName":"x-amz-copy-source-if-unmodified-since","type":"timestamp"},"CopySourceRange":{"location":"header","locationName":"x-amz-copy-source-range"},"Key":{"location":"uri","locationName":"Key"},"PartNumber":{"location":"querystring","locationName":"partNumber","type":"integer"},"UploadId":{"location":"querystring","locationName":"uploadId"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKey":{"shape":"S1b","location":"header","locationName":"x-amz-server-side-encryption-customer-key"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"CopySourceSSECustomerAlgorithm":{"location":"header","locationName":"x-amz-copy-source-server-side-encryption-customer-algorithm"},"CopySourceSSECustomerKey":{"shape":"S1f","location":"header","locationName":"x-amz-copy-source-server-side-encryption-customer-key"},"CopySourceSSECustomerKeyMD5":{"location":"header","locationName":"x-amz-copy-source-server-side-encryption-customer-key-MD5"},"RequestPayer":{"location":"header","locationName":"x-amz-request-payer"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"},"ExpectedSourceBucketOwner":{"location":"header","locationName":"x-amz-source-expected-bucket-owner"}}},"output":{"type":"structure","members":{"CopySourceVersionId":{"location":"header","locationName":"x-amz-copy-source-version-id"},"CopyPartResult":{"type":"structure","members":{"ETag":{},"LastModified":{"type":"timestamp"}}},"ServerSideEncryption":{"location":"header","locationName":"x-amz-server-side-encryption"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-server-side-encryption-customer-algorithm"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-server-side-encryption-customer-key-MD5"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-server-side-encryption-aws-kms-key-id"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"},"RequestCharged":{"location":"header","locationName":"x-amz-request-charged"}},"payload":"CopyPartResult"}},"WriteGetObjectResponse":{"http":{"requestUri":"/WriteGetObjectResponse"},"input":{"type":"structure","required":["RequestRoute","RequestToken"],"members":{"RequestRoute":{"hostLabel":true,"location":"header","locationName":"x-amz-request-route"},"RequestToken":{"location":"header","locationName":"x-amz-request-token"},"Body":{"streaming":true,"type":"blob"},"StatusCode":{"location":"header","locationName":"x-amz-fwd-status","type":"integer"},"ErrorCode":{"location":"header","locationName":"x-amz-fwd-error-code"},"ErrorMessage":{"location":"header","locationName":"x-amz-fwd-error-message"},"AcceptRanges":{"location":"header","locationName":"x-amz-fwd-header-accept-ranges"},"CacheControl":{"location":"header","locationName":"x-amz-fwd-header-Cache-Control"},"ContentDisposition":{"location":"header","locationName":"x-amz-fwd-header-Content-Disposition"},"ContentEncoding":{"location":"header","locationName":"x-amz-fwd-header-Content-Encoding"},"ContentLanguage":{"location":"header","locationName":"x-amz-fwd-header-Content-Language"},"ContentLength":{"location":"header","locationName":"Content-Length","type":"long"},"ContentRange":{"location":"header","locationName":"x-amz-fwd-header-Content-Range"},"ContentType":{"location":"header","locationName":"x-amz-fwd-header-Content-Type"},"DeleteMarker":{"location":"header","locationName":"x-amz-fwd-header-x-amz-delete-marker","type":"boolean"},"ETag":{"location":"header","locationName":"x-amz-fwd-header-ETag"},"Expires":{"location":"header","locationName":"x-amz-fwd-header-Expires","type":"timestamp"},"Expiration":{"location":"header","locationName":"x-amz-fwd-header-x-amz-expiration"},"LastModified":{"location":"header","locationName":"x-amz-fwd-header-Last-Modified","type":"timestamp"},"MissingMeta":{"location":"header","locationName":"x-amz-fwd-header-x-amz-missing-meta","type":"integer"},"Metadata":{"shape":"S13","location":"headers","locationName":"x-amz-meta-"},"ObjectLockMode":{"location":"header","locationName":"x-amz-fwd-header-x-amz-object-lock-mode"},"ObjectLockLegalHoldStatus":{"location":"header","locationName":"x-amz-fwd-header-x-amz-object-lock-legal-hold"},"ObjectLockRetainUntilDate":{"shape":"S1j","location":"header","locationName":"x-amz-fwd-header-x-amz-object-lock-retain-until-date"},"PartsCount":{"location":"header","locationName":"x-amz-fwd-header-x-amz-mp-parts-count","type":"integer"},"ReplicationStatus":{"location":"header","locationName":"x-amz-fwd-header-x-amz-replication-status"},"RequestCharged":{"location":"header","locationName":"x-amz-fwd-header-x-amz-request-charged"},"Restore":{"location":"header","locationName":"x-amz-fwd-header-x-amz-restore"},"ServerSideEncryption":{"location":"header","locationName":"x-amz-fwd-header-x-amz-server-side-encryption"},"SSECustomerAlgorithm":{"location":"header","locationName":"x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm"},"SSEKMSKeyId":{"shape":"Sk","location":"header","locationName":"x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id"},"SSECustomerKeyMD5":{"location":"header","locationName":"x-amz-fwd-header-x-amz-server-side-encryption-customer-key-MD5"},"StorageClass":{"location":"header","locationName":"x-amz-fwd-header-x-amz-storage-class"},"TagCount":{"location":"header","locationName":"x-amz-fwd-header-x-amz-tagging-count","type":"integer"},"VersionId":{"location":"header","locationName":"x-amz-fwd-header-x-amz-version-id"},"BucketKeyEnabled":{"location":"header","locationName":"x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled","type":"boolean"}},"payload":"Body"},"authtype":"v4-unsigned-body","endpoint":{"hostPrefix":"{RequestRoute}."}}},"shapes":{"Sk":{"type":"string","sensitive":true},"S13":{"type":"map","key":{},"value":{}},"S1b":{"type":"blob","sensitive":true},"S1d":{"type":"string","sensitive":true},"S1f":{"type":"blob","sensitive":true},"S1j":{"type":"timestamp","timestampFormat":"iso8601"},"S37":{"type":"structure","members":{"DisplayName":{},"ID":{}}},"S3a":{"type":"list","member":{"locationName":"Grant","type":"structure","members":{"Grantee":{"shape":"S3c"},"Permission":{}}}},"S3c":{"type":"structure","required":["Type"],"members":{"DisplayName":{},"EmailAddress":{},"ID":{},"Type":{"locationName":"xsi:type","xmlAttribute":true},"URI":{}},"xmlNamespace":{"prefix":"xsi","uri":"http://www.w3.org/2001/XMLSchema-instance"}},"S3j":{"type":"structure","required":["Id","StorageClassAnalysis"],"members":{"Id":{},"Filter":{"type":"structure","members":{"Prefix":{},"Tag":{"shape":"S3m"},"And":{"type":"structure","members":{"Prefix":{},"Tags":{"shape":"S3p","flattened":true,"locationName":"Tag"}}}}},"StorageClassAnalysis":{"type":"structure","members":{"DataExport":{"type":"structure","required":["OutputSchemaVersion","Destination"],"members":{"OutputSchemaVersion":{},"Destination":{"type":"structure","required":["S3BucketDestination"],"members":{"S3BucketDestination":{"type":"structure","required":["Format","Bucket"],"members":{"Format":{},"BucketAccountId":{},"Bucket":{},"Prefix":{}}}}}}}}}}},"S3m":{"type":"structure","required":["Key","Value"],"members":{"Key":{},"Value":{}}},"S3p":{"type":"list","member":{"shape":"S3m","locationName":"Tag"}},"S3y":{"type":"list","member":{"type":"structure","required":["AllowedMethods","AllowedOrigins"],"members":{"ID":{},"AllowedHeaders":{"locationName":"AllowedHeader","type":"list","member":{},"flattened":true},"AllowedMethods":{"locationName":"AllowedMethod","type":"list","member":{},"flattened":true},"AllowedOrigins":{"locationName":"AllowedOrigin","type":"list","member":{},"flattened":true},"ExposeHeaders":{"locationName":"ExposeHeader","type":"list","member":{},"flattened":true},"MaxAgeSeconds":{"type":"integer"}}},"flattened":true},"S4b":{"type":"structure","required":["Rules"],"members":{"Rules":{"locationName":"Rule","type":"list","member":{"type":"structure","members":{"ApplyServerSideEncryptionByDefault":{"type":"structure","required":["SSEAlgorithm"],"members":{"SSEAlgorithm":{},"KMSMasterKeyID":{"shape":"Sk"}}},"BucketKeyEnabled":{"type":"boolean"}}},"flattened":true}}},"S4h":{"type":"structure","required":["Id","Status","Tierings"],"members":{"Id":{},"Filter":{"type":"structure","members":{"Prefix":{},"Tag":{"shape":"S3m"},"And":{"type":"structure","members":{"Prefix":{},"Tags":{"shape":"S3p","flattened":true,"locationName":"Tag"}}}}},"Status":{},"Tierings":{"locationName":"Tiering","type":"list","member":{"type":"structure","required":["Days","AccessTier"],"members":{"Days":{"type":"integer"},"AccessTier":{}}},"flattened":true}}},"S4r":{"type":"structure","required":["Destination","IsEnabled","Id","IncludedObjectVersions","Schedule"],"members":{"Destination":{"type":"structure","required":["S3BucketDestination"],"members":{"S3BucketDestination":{"type":"structure","required":["Bucket","Format"],"members":{"AccountId":{},"Bucket":{},"Format":{},"Prefix":{},"Encryption":{"type":"structure","members":{"SSES3":{"locationName":"SSE-S3","type":"structure","members":{}},"SSEKMS":{"locationName":"SSE-KMS","type":"structure","required":["KeyId"],"members":{"KeyId":{"shape":"Sk"}}}}}}}}},"IsEnabled":{"type":"boolean"},"Filter":{"type":"structure","required":["Prefix"],"members":{"Prefix":{}}},"Id":{},"IncludedObjectVersions":{},"OptionalFields":{"type":"list","member":{"locationName":"Field"}},"Schedule":{"type":"structure","required":["Frequency"],"members":{"Frequency":{}}}}},"S57":{"type":"list","member":{"type":"structure","required":["Prefix","Status"],"members":{"Expiration":{"shape":"S59"},"ID":{},"Prefix":{},"Status":{},"Transition":{"shape":"S5e"},"NoncurrentVersionTransition":{"shape":"S5g"},"NoncurrentVersionExpiration":{"shape":"S5h"},"AbortIncompleteMultipartUpload":{"shape":"S5i"}}},"flattened":true},"S59":{"type":"structure","members":{"Date":{"shape":"S5a"},"Days":{"type":"integer"},"ExpiredObjectDeleteMarker":{"type":"boolean"}}},"S5a":{"type":"timestamp","timestampFormat":"iso8601"},"S5e":{"type":"structure","members":{"Date":{"shape":"S5a"},"Days":{"type":"integer"},"StorageClass":{}}},"S5g":{"type":"structure","members":{"NoncurrentDays":{"type":"integer"},"StorageClass":{}}},"S5h":{"type":"structure","members":{"NoncurrentDays":{"type":"integer"}}},"S5i":{"type":"structure","members":{"DaysAfterInitiation":{"type":"integer"}}},"S5m":{"type":"list","member":{"type":"structure","required":["Status"],"members":{"Expiration":{"shape":"S59"},"ID":{},"Prefix":{"deprecated":true},"Filter":{"type":"structure","members":{"Prefix":{},"Tag":{"shape":"S3m"},"And":{"type":"structure","members":{"Prefix":{},"Tags":{"shape":"S3p","flattened":true,"locationName":"Tag"}}}}},"Status":{},"Transitions":{"locationName":"Transition","type":"list","member":{"shape":"S5e"},"flattened":true},"NoncurrentVersionTransitions":{"locationName":"NoncurrentVersionTransition","type":"list","member":{"shape":"S5g"},"flattened":true},"NoncurrentVersionExpiration":{"shape":"S5h"},"AbortIncompleteMultipartUpload":{"shape":"S5i"}}},"flattened":true},"S5w":{"type":"structure","required":["TargetBucket","TargetPrefix"],"members":{"TargetBucket":{},"TargetGrants":{"type":"list","member":{"locationName":"Grant","type":"structure","members":{"Grantee":{"shape":"S3c"},"Permission":{}}}},"TargetPrefix":{}}},"S64":{"type":"structure","required":["Id"],"members":{"Id":{},"Filter":{"type":"structure","members":{"Prefix":{},"Tag":{"shape":"S3m"},"AccessPointArn":{},"And":{"type":"structure","members":{"Prefix":{},"Tags":{"shape":"S3p","flattened":true,"locationName":"Tag"},"AccessPointArn":{}}}}}}},"S68":{"type":"structure","required":["Bucket"],"members":{"Bucket":{"location":"uri","locationName":"Bucket"},"ExpectedBucketOwner":{"location":"header","locationName":"x-amz-expected-bucket-owner"}}},"S69":{"type":"structure","members":{"TopicConfiguration":{"type":"structure","members":{"Id":{},"Events":{"shape":"S6c","locationName":"Event"},"Event":{"deprecated":true},"Topic":{}}},"QueueConfiguration":{"type":"structure","members":{"Id":{},"Event":{"deprecated":true},"Events":{"shape":"S6c","locationName":"Event"},"Queue":{}}},"CloudFunctionConfiguration":{"type":"structure","members":{"Id":{},"Event":{"deprecated":true},"Events":{"shape":"S6c","locationName":"Event"},"CloudFunction":{},"InvocationRole":{}}}}},"S6c":{"type":"list","member":{},"flattened":true},"S6k":{"type":"structure","members":{"TopicConfigurations":{"locationName":"TopicConfiguration","type":"list","member":{"type":"structure","required":["TopicArn","Events"],"members":{"Id":{},"TopicArn":{"locationName":"Topic"},"Events":{"shape":"S6c","locationName":"Event"},"Filter":{"shape":"S6n"}}},"flattened":true},"QueueConfigurations":{"locationName":"QueueConfiguration","type":"list","member":{"type":"structure","required":["QueueArn","Events"],"members":{"Id":{},"QueueArn":{"locationName":"Queue"},"Events":{"shape":"S6c","locationName":"Event"},"Filter":{"shape":"S6n"}}},"flattened":true},"LambdaFunctionConfigurations":{"locationName":"CloudFunctionConfiguration","type":"list","member":{"type":"structure","required":["LambdaFunctionArn","Events"],"members":{"Id":{},"LambdaFunctionArn":{"locationName":"CloudFunction"},"Events":{"shape":"S6c","locationName":"Event"},"Filter":{"shape":"S6n"}}},"flattened":true}}},"S6n":{"type":"structure","members":{"Key":{"locationName":"S3Key","type":"structure","members":{"FilterRules":{"locationName":"FilterRule","type":"list","member":{"type":"structure","members":{"Name":{},"Value":{}}},"flattened":true}}}}},"S70":{"type":"structure","required":["Rules"],"members":{"Rules":{"locationName":"Rule","type":"list","member":{"type":"structure","required":["ObjectOwnership"],"members":{"ObjectOwnership":{}}},"flattened":true}}},"S7d":{"type":"structure","required":["Role","Rules"],"members":{"Role":{},"Rules":{"locationName":"Rule","type":"list","member":{"type":"structure","required":["Status","Destination"],"members":{"ID":{},"Priority":{"type":"integer"},"Prefix":{"deprecated":true},"Filter":{"type":"structure","members":{"Prefix":{},"Tag":{"shape":"S3m"},"And":{"type":"structure","members":{"Prefix":{},"Tags":{"shape":"S3p","flattened":true,"locationName":"Tag"}}}}},"Status":{},"SourceSelectionCriteria":{"type":"structure","members":{"SseKmsEncryptedObjects":{"type":"structure","required":["Status"],"members":{"Status":{}}},"ReplicaModifications":{"type":"structure","required":["Status"],"members":{"Status":{}}}}},"ExistingObjectReplication":{"type":"structure","required":["Status"],"members":{"Status":{}}},"Destination":{"type":"structure","required":["Bucket"],"members":{"Bucket":{},"Account":{},"StorageClass":{},"AccessControlTranslation":{"type":"structure","required":["Owner"],"members":{"Owner":{}}},"EncryptionConfiguration":{"type":"structure","members":{"ReplicaKmsKeyID":{}}},"ReplicationTime":{"type":"structure","required":["Status","Time"],"members":{"Status":{},"Time":{"shape":"S7z"}}},"Metrics":{"type":"structure","required":["Status"],"members":{"Status":{},"EventThreshold":{"shape":"S7z"}}}}},"DeleteMarkerReplication":{"type":"structure","members":{"Status":{}}}}},"flattened":true}}},"S7z":{"type":"structure","members":{"Minutes":{"type":"integer"}}},"S8g":{"type":"structure","required":["HostName"],"members":{"HostName":{},"Protocol":{}}},"S8j":{"type":"structure","required":["Suffix"],"members":{"Suffix":{}}},"S8l":{"type":"structure","required":["Key"],"members":{"Key":{}}},"S8m":{"type":"list","member":{"locationName":"RoutingRule","type":"structure","required":["Redirect"],"members":{"Condition":{"type":"structure","members":{"HttpErrorCodeReturnedEquals":{},"KeyPrefixEquals":{}}},"Redirect":{"type":"structure","members":{"HostName":{},"HttpRedirectCode":{},"Protocol":{},"ReplaceKeyPrefixWith":{},"ReplaceKeyWith":{}}}}}},"S9l":{"type":"structure","members":{"Status":{}}},"S9o":{"type":"structure","members":{"ObjectLockEnabled":{},"Rule":{"type":"structure","members":{"DefaultRetention":{"type":"structure","members":{"Mode":{},"Days":{"type":"integer"},"Years":{"type":"integer"}}}}}}},"S9w":{"type":"structure","members":{"Mode":{},"RetainUntilDate":{"shape":"S5a"}}},"Sa3":{"type":"structure","members":{"BlockPublicAcls":{"locationName":"BlockPublicAcls","type":"boolean"},"IgnorePublicAcls":{"locationName":"IgnorePublicAcls","type":"boolean"},"BlockPublicPolicy":{"locationName":"BlockPublicPolicy","type":"boolean"},"RestrictPublicBuckets":{"locationName":"RestrictPublicBuckets","type":"boolean"}}},"Sb4":{"type":"structure","members":{"ID":{},"DisplayName":{}}},"Sb5":{"type":"list","member":{"type":"structure","members":{"Prefix":{}}},"flattened":true},"Sbn":{"type":"list","member":{"type":"structure","members":{"Key":{},"LastModified":{"type":"timestamp"},"ETag":{},"Size":{"type":"integer"},"StorageClass":{},"Owner":{"shape":"S37"}}},"flattened":true},"Sc5":{"type":"structure","members":{"Grants":{"shape":"S3a","locationName":"AccessControlList"},"Owner":{"shape":"S37"}}},"Scu":{"type":"structure","required":["TagSet"],"members":{"TagSet":{"shape":"S3p"}}},"Sdk":{"type":"structure","members":{"CSV":{"type":"structure","members":{"FileHeaderInfo":{},"Comments":{},"QuoteEscapeCharacter":{},"RecordDelimiter":{},"FieldDelimiter":{},"QuoteCharacter":{},"AllowQuotedRecordDelimiter":{"type":"boolean"}}},"CompressionType":{},"JSON":{"type":"structure","members":{"Type":{}}},"Parquet":{"type":"structure","members":{}}}},"Sdz":{"type":"structure","members":{"CSV":{"type":"structure","members":{"QuoteFields":{},"QuoteEscapeCharacter":{},"RecordDelimiter":{},"FieldDelimiter":{},"QuoteCharacter":{}}},"JSON":{"type":"structure","members":{"RecordDelimiter":{}}}}}}}')},function(e){e.exports=JSON.parse('{"pagination":{"ListBuckets":{"result_key":"Buckets"},"ListMultipartUploads":{"input_token":["KeyMarker","UploadIdMarker"],"limit_key":"MaxUploads","more_results":"IsTruncated","output_token":["NextKeyMarker","NextUploadIdMarker"],"result_key":["Uploads","CommonPrefixes"]},"ListObjectVersions":{"input_token":["KeyMarker","VersionIdMarker"],"limit_key":"MaxKeys","more_results":"IsTruncated","output_token":["NextKeyMarker","NextVersionIdMarker"],"result_key":["Versions","DeleteMarkers","CommonPrefixes"]},"ListObjects":{"input_token":"Marker","limit_key":"MaxKeys","more_results":"IsTruncated","output_token":"NextMarker || Contents[-1].Key","result_key":["Contents","CommonPrefixes"]},"ListObjectsV2":{"input_token":"ContinuationToken","limit_key":"MaxKeys","output_token":"NextContinuationToken","result_key":["Contents","CommonPrefixes"]},"ListParts":{"input_token":"PartNumberMarker","limit_key":"MaxParts","more_results":"IsTruncated","output_token":"NextPartNumberMarker","result_key":"Parts"}}}')},function(e){e.exports=JSON.parse('{"version":2,"waiters":{"BucketExists":{"delay":5,"operation":"HeadBucket","maxAttempts":20,"acceptors":[{"expected":200,"matcher":"status","state":"success"},{"expected":301,"matcher":"status","state":"success"},{"expected":403,"matcher":"status","state":"success"},{"expected":404,"matcher":"status","state":"retry"}]},"BucketNotExists":{"delay":5,"operation":"HeadBucket","maxAttempts":20,"acceptors":[{"expected":404,"matcher":"status","state":"success"}]},"ObjectExists":{"delay":5,"operation":"HeadObject","maxAttempts":20,"acceptors":[{"expected":200,"matcher":"status","state":"success"},{"expected":404,"matcher":"status","state":"retry"}]},"ObjectNotExists":{"delay":5,"operation":"HeadObject","maxAttempts":20,"acceptors":[{"expected":404,"matcher":"status","state":"success"}]}}}')},function(e,t,n){"use strict";n.r(t);var r={};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){a(e,t,n[t])}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}n.r(r),n.d(r,"simpleAbsImpl",(function(){return Uo})),n.d(r,"addImpl",(function(){return Bo})),n.d(r,"bincountImpl",(function(){return Sa})),n.d(r,"bincountReduceImpl",(function(){return Oa})),n.d(r,"ceilImpl",(function(){return Ta})),n.d(r,"concatImpl",(function(){return Da})),n.d(r,"equalImpl",(function(){return bi})),n.d(r,"expImpl",(function(){return Ii})),n.d(r,"expm1Impl",(function(){return Bi})),n.d(r,"floorImpl",(function(){return Xi})),n.d(r,"gatherNdImpl",(function(){return os})),n.d(r,"gatherV2Impl",(function(){return is})),n.d(r,"greaterImpl",(function(){return cs})),n.d(r,"greaterEqualImpl",(function(){return ds})),n.d(r,"lessImpl",(function(){return xs})),n.d(r,"lessEqualImpl",(function(){return Cs})),n.d(r,"linSpaceImpl",(function(){return Es})),n.d(r,"logImpl",(function(){return Ts})),n.d(r,"maxImpl",(function(){return Vs})),n.d(r,"maximumImpl",(function(){return Hs})),n.d(r,"minimumImpl",(function(){return rc})),n.d(r,"multiplyImpl",(function(){return ui})),n.d(r,"negImpl",(function(){return fc})),n.d(r,"notEqualImpl",(function(){return kc})),n.d(r,"prodImpl",(function(){return Dc})),n.d(r,"rangeImpl",(function(){return $c})),n.d(r,"rsqrtImpl",(function(){return Yc})),n.d(r,"sigmoidImpl",(function(){return vo})),n.d(r,"sliceImpl",(function(){return xa})),n.d(r,"sparseFillEmptyRowsImpl",(function(){return mu})),n.d(r,"sparseReshapeImpl",(function(){return bu})),n.d(r,"sparseSegmentReductionImpl",(function(){return Au})),n.d(r,"sqrtImpl",(function(){return Cu})),n.d(r,"squaredDifferenceImpl",(function(){return Iu})),n.d(r,"stridedSliceImpl",(function(){return Bu})),n.d(r,"stringNGramsImpl",(function(){return Mu})),n.d(r,"stringSplitImpl",(function(){return Lu})),n.d(r,"stringToHashBucketFastImpl",(function(){return zu})),n.d(r,"subImpl",(function(){return Li})),n.d(r,"tileImpl",(function(){return Hu})),n.d(r,"topKImpl",(function(){return Zu})),n.d(r,"transposeImpl",(function(){return Yo})),n.d(r,"uniqueImpl",(function(){return ol}));var l=n(259),d=n.n(l);function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if(t&&("object"===d()(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}var b={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},y=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.init(t,n)}return u(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||b,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,i({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),A=function(){function e(){s(this,e),this.observers={}}return u(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var o=[].concat(this.observers[e]);o.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function v(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function x(e){return null==e?"":""+e}function k(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function w(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var a="string"!=typeof t?[].concat(t):t.split(".");a.length>1;){if(o())return{};var i=r(a.shift());!e[i]&&n&&(e[i]=new n),e=Object.prototype.hasOwnProperty.call(e,i)?e[i]:{}}return o()?{}:{obj:e,k:r(a.shift())}}function C(e,t,n){var r=w(e,t,Object);r.obj[r.k]=n}function S(e,t){var n=w(e,t),r=n.obj,o=n.k;if(r)return r[o]}function O(e,t,n){var r=S(e,n);return void 0!==r?r:S(t,n)}function E(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):E(e[r],t[r],n):e[r]=t[r]);return e}function I(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function N(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return T[e]})):e}var R="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),o=e,a=0;a<r.length;++a){if(!o)return;if("string"==typeof o[r[a]]&&a+1<r.length)return;if(void 0===o[r[a]]){for(var i=2,s=r.slice(a,a+i).join(n),c=o[s];void 0===c&&r.length>a+i;)i++,c=o[s=r.slice(a,a+i).join(n)];if(void 0===c)return;if("string"==typeof c)return c;if(s&&"string"==typeof c[s])return c[s];var u=r.slice(a+i).join(n);return u?j(c,u,n):void 0}o=o[r[a]]}return o}}var B=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return s(this,t),n=h(this,f(t).call(this)),R&&A.call(p(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return g(t,e),u(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,i=[e,t];n&&"string"!=typeof n&&(i=i.concat(n)),n&&"string"==typeof n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=e.split("."));var s=S(this.data,i);return s||!a||"string"!=typeof n?s:j(this.data&&this.data[e]&&this.data[e][t],n,o)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var i=[e,t];n&&(i=i.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(r=t,t=(i=e.split("."))[1]),this.addNamespaces(t),C(this.data,i,r),o.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var c=S(this.data,s)||{};r?E(c,n,o):c=i({},c,n),C(this.data,s,c),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?i({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(A),_={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var a=this;return e.forEach((function(e){a.processors[e]&&(t=a.processors[e].process(t,n,r,o))})),t}},D={},M=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,t),n=h(this,f(t).call(this)),R&&A.call(p(n)),k(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,p(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=y.create("translator"),n}return g(t,e),u(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:o};var i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,n,r){var a=this;if("object"!==o(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,c=this.extractFromKey(e[e.length-1],n),u=c.key,l=c.namespaces,d=l[l.length-1],p=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&"cimode"===p.toLowerCase()){if(h){var f=n.nsSeparator||this.options.nsSeparator;return d+f+u}return u}var m=this.resolve(e,n),g=m&&m.res,b=m&&m.usedKey||u,y=m&&m.exactUsedKey||u,A=Object.prototype.toString.apply(g),v=["[object Number]","[object Function]","[object RegExp]"],x=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,w="string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g;if(k&&g&&w&&v.indexOf(A)<0&&("string"!=typeof x||"[object Array]"!==A)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,g,i({},n,{ns:l})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");if(s){var C="[object Array]"===A,S=C?[]:{},O=C?y:b;for(var E in g)if(Object.prototype.hasOwnProperty.call(g,E)){var I="".concat(O).concat(s).concat(E);S[E]=this.translate(I,i({},n,{joinArrays:!1,ns:l})),S[E]===I&&(S[E]=g[E])}g=S}}else if(k&&"string"==typeof x&&"[object Array]"===A)(g=g.join(x))&&(g=this.extendTranslation(g,e,n,r));else{var T=!1,N=!1,R=void 0!==n.count&&"string"!=typeof n.count,j=t.hasDefaultValue(n),B=R?this.pluralResolver.getSuffix(p,n.count):"",_=n["defaultValue".concat(B)]||n.defaultValue;!this.isValidLookup(g)&&j&&(T=!0,g=_),this.isValidLookup(g)||(N=!0,g=u);var D=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,M=D&&N?void 0:g,$=j&&_!==g&&this.options.updateMissing;if(N||T||$){if(this.logger.log($?"updateKey":"missingKey",p,d,u,$?_:g),s){var P=this.resolve(u,i({},n,{keySeparator:!1}));P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var L=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var z=0;z<F.length;z++)L.push(F[z]);else"all"===this.options.saveMissingTo?L=this.languageUtils.toResolveHierarchy(n.lng||this.language):L.push(n.lng||this.language);var U=function(e,t,r){a.options.missingKeyHandler?a.options.missingKeyHandler(e,d,t,$?r:M,$,n):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(e,d,t,$?r:M,$,n),a.emit("missingKey",e,d,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?L.forEach((function(e){a.pluralResolver.getSuffixes(e).forEach((function(t){U([e],u+t,n["defaultValue".concat(t)]||_)}))})):U(L,u,_))}g=this.extendTranslation(g,e,n,m,r),N&&g===u&&this.options.appendNamespaceToMissingKey&&(g="".concat(d,":").concat(u)),(N||T)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(g))}return g}},{key:"extendTranslation",value:function(e,t,n,r,o){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(i({},n,{interpolation:i({},this.options.interpolation,n.interpolation)}));var s,c=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(c){var u=e.match(this.interpolator.nestingRegexp);s=u&&u.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=i({},this.options.interpolation.defaultVariables,l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),c){var d=e.match(this.interpolator.nestingRegexp);s<(d&&d.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return o&&o[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var p=n.postProcess||this.options.postProcess,h="string"==typeof p?[p]:p;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=_.handle(h,e,t,this.options&&this.options.postProcessPassResolved?i({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,o,a,i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!i.isValidLookup(t)){var c=i.extractFromKey(e,s),u=c.key;n=u;var l=c.namespaces;i.options.fallbackNS&&(l=l.concat(i.options.fallbackNS));var d=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:i.languageUtils.toResolveHierarchy(s.lng||i.language,s.fallbackLng);l.forEach((function(e){i.isValidLookup(t)||(a=e,!D["".concat(h[0],"-").concat(e)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(a)&&(D["".concat(h[0],"-").concat(e)]=!0,i.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!i.isValidLookup(t)){o=n;var a,c,l=u,h=[l];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(h,u,n,e,s);else d&&(a=i.pluralResolver.getSuffix(n,s.count)),d&&p&&h.push(l+a),p&&h.push(l+="".concat(i.options.contextSeparator).concat(s.context)),d&&h.push(l+=a);for(;c=h.pop();)i.isValidLookup(t)||(r=c,t=i.getResource(n,e,c,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:a}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}(A);function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}var L=function(){function e(t){s(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=y.create("languageUtils")}return u(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=P(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],a=function(e){e&&(n.isSupportedCode(e)?o.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(e))):"string"==typeof e&&a(this.formatLanguageCode(e)),r.forEach((function(e){o.indexOf(e)<0&&a(n.formatLanguageCode(e))})),o}}]),e}(),F=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],z={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function U(){var e={};return F.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:z[t.fc]}}))})),e}var W=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.languageUtils=t,this.options=n,this.logger=y.create("pluralResolver"),this.rules=U()}return u(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var o=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),a=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===a?a="plural":1===a&&(a=""));var i=function(){return n.options.prepend&&a.toString()?n.options.prepend+a.toString():a.toString()};return"v1"===this.options.compatibilityJSON?1===a?"":"number"==typeof a?"_plural_".concat(a.toString()):i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?i():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),V=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.logger=y.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return u(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:N,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?I(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?I(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?I(t.nestingPrefix):t.nestingPrefixEscaped||I("$t("),this.nestingSuffix=t.nestingSuffix?I(t.nestingSuffix):t.nestingSuffixEscaped||I(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var o,a,s,c=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}var d=function(e){if(e.indexOf(c.formatSeparator)<0){var o=O(t,u,e);return c.alwaysFormat?c.format(o,void 0,n,i({},r,t,{interpolationkey:e})):o}var a=e.split(c.formatSeparator),s=a.shift().trim(),l=a.join(c.formatSeparator).trim();return c.format(O(t,u,s),l,n,i({},r,t,{interpolationkey:s}))};this.resetRegExp();var p=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return l(e)}},{regex:this.regexp,safeValue:function(e){return c.escapeValue?l(c.escape(e)):l(e)}}].forEach((function(t){for(s=0;o=t.regex.exec(e);){if(void 0===(a=d(o[1].trim())))if("function"==typeof p){var n=p(e,o,r);a="string"==typeof n?n:""}else{if(h){a=o[0];continue}c.logger.warn("missed to pass in variable ".concat(o[1]," for interpolating ").concat(e)),a=""}else"string"==typeof a||c.useRawValueToEscape||(a=x(a));var i=t.safeValue(a);if(e=e.replace(o[0],i),h?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,++s>=c.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i({},a);function c(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0],o=(o=this.interpolate(o,s)).replace(/'/g,'"');try{s=JSON.parse(o),t&&(s=i({},t,s))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var u=[],l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=d.shift(),u=d,l=!0}if((r=t(c.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=x(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=u.reduce((function(e,t){return o.format(e,t,a.lng,i({},a,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var q=function(e){function t(e,n,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s(this,t),o=h(this,f(t).call(this)),R&&A.call(p(o)),o.backend=e,o.store=n,o.services=r,o.languageUtils=r.languageUtils,o.options=a,o.logger=y.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,a.backend,a),o}return g(t,e),u(t,[{key:"queueLoad",value:function(e,t,n,r){var o=this,a=[],i=[],s=[],c=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?i.indexOf(s)<0&&i.push(s):(o.state[s]=1,r=!1,i.indexOf(s)<0&&i.push(s),a.indexOf(s)<0&&a.push(s),c.indexOf(t)<0&&c.push(t)))})),r||s.push(e)})),(a.length||i.length)&&this.queue.push({pending:i,loaded:{},errors:[],callback:r}),{toLoad:a,pending:i,toLoadLanguages:s,toLoadNamespaces:c}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),o=r[0],a=r[1];t&&this.emit("failedLoading",o,a,t),n&&this.store.addResourceBundle(o,a,n),this.state[e]=t?-1:2;var i={};this.queue.forEach((function(n){!function(e,t,n,r){var o=w(e,t,Object),a=o.obj,i=o.k;a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}(n.loaded,[o],a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){i[e]||(i[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){i[e].indexOf(t)<0&&i[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,i=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,c){s&&c&&o<5?setTimeout((function(){r.read.call(r,e,t,n,o+1,2*a,i)}),a):i(s,c)})):i(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var a=this.queueLoad(e,t,r,o);if(!a.toLoad.length)return a.pending.length||o(),null;a.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=r[0],a=r[1];this.read(o,a,"read",void 0,void 0,(function(r,i){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(o," failed"),r),!r&&i&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(o),i),t.loaded(e,r,i)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,i({},a,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(A);function G(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===o(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===o(e[2])||"object"===o(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function H(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function K(){}var Y=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(s(this,t),e=h(this,f(t).call(this)),R&&A.call(p(e)),e.options=H(n),e.services={},e.logger=y,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),h(e,p(e));setTimeout((function(){e.init(n,r)}),0)}return e}return g(t,e),u(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=i({},G(),this.options,H(t)),this.format=this.options.interpolation.format,n||(n=K),!this.options.isClone){this.modules.logger?y.init(r(this.modules.logger),this.options):y.init(null,this.options);var o=new L(this.options);this.store=new B(this.options.resources,this.options);var a=this.services;a.logger=y,a.resourceStore=this.store,a.languageUtils=o,a.pluralResolver=new W(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new V(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new q(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new M(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.length>0&&"dev"!==s[0]&&(this.options.lng=s[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var u=["addResource","addResources","addResourceBundle","removeResourceBundle"];u.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var l=v(),d=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),l}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,r=n,o="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();var a=[],i=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(o)i(o);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return i(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return i(e)})),this.services.backendConnector.load(a,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=v();return e||(e=this.languages),t||(t=this.options.ns),n||(n=K),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&_.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=v();this.emit("languageChanging",e);var o=function(o){e||o||!n.services.languageDetector||(o=[]);var a="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,o){o?(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,a=function e(t,a){var s;if("object"!==o(a)){for(var c=arguments.length,u=new Array(c>2?c-2:0),l=2;l<c;l++)u[l-2]=arguments[l];s=r.options.overloadTranslationOptionHandler([t,a].concat(u))}else s=i({},a);s.lng=s.lng||e.lng,s.lngs=s.lngs||e.lngs,s.ns=s.ns||e.ns;var d=r.options.keySeparator||".",p=n?"".concat(n).concat(d).concat(t):t;return r.t(p,s)};return"string"==typeof e?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=n,a}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],o=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var i=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,i);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!i(r,e)||o&&!i(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=v();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=v();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter((function(e){return r.indexOf(e)<0}));return o.length?(this.options.preload=r.concat(o),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,o=i({},this.options,n,{isClone:!0}),a=new t(o),s=["store","services","language"];return s.forEach((function(t){a[t]=e[t]})),a.services=i({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new M(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(o,r),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}(A));function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=[],J=Q.forEach,ee=Q.slice;function te(e){return J.call(ee.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var ne=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,re=function(e,t,n){var r=n||{};r.path=r.path||"/";var o=e+"="+encodeURIComponent(t);if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!ne.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!ne.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},oe=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+60*n*1e3)),r&&(o.domain=r),document.cookie=re(e,encodeURIComponent(t),o)},ae=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null},ie={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=ae(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&oe(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},se={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),r=0;r<n.length;r++){var o=n[r].indexOf("=");if(o>0)n[r].substring(0,o)===e.lookupQuerystring&&(t=n[r].substring(o+1))}return t}},ce=null,ue=function(){if(null!==ce)return ce;try{ce="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){ce=!1}return ce},le={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&ue()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&ue()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},de=null,pe=function(){if(null!==de)return de;try{de="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){de=!1}return de},he={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&pe()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&pe()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},fe={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},me={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},ge={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},be={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}};var ye=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};X(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=te(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(ie),this.addDetector(se),this.addDetector(le),this.addDetector(he),this.addDetector(fe),this.addDetector(me),this.addDetector(ge),this.addDetector(be)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}])&&Z(t.prototype,n),r&&Z(t,r),e}();ye.type="languageDetector";var Ae=ye,ve=n(83),xe=n(260);function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ce=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n||"")},request:xe.a,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Se=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ke(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=Object(ve.a)(n,this.options||{},Ce()),this.allOptions=r,this.services&&this.options.reloadInterval&&setInterval((function(){return t.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,o){var a=this,i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(e,n)),(i=Object(ve.c)(i)).then((function(i){var s=a.services.interpolator.interpolate(i,{lng:e.join("+"),ns:n.join("+")});a.loadUrl(s,o,t,r)}))}},{key:"loadUrl",value:function(e,t,n,r){var o=this;this.options.request(this.options,e,void 0,(function(a,i){if(i&&(i.status>=500&&i.status<600||!i.status))return t("failed loading "+e+"; status code: "+i.status,!0);if(i&&i.status>=400&&i.status<500)return t("failed loading "+e+"; status code: "+i.status,!1);if(!i&&a&&a.message&&a.message.indexOf("Failed to fetch")>-1)return t("failed loading "+e+": "+a.message,!0);if(a)return t(a,!1);var s,c;try{s="string"==typeof i.data?o.options.parse(i.data,n,r):i.data}catch(t){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,s)}))}},{key:"create",value:function(e,t,n,r,o){var a=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var i=this.options.parsePayload(t,n,r),s=0,c=[],u=[];e.forEach((function(n){var r=a.options.addPath;"function"==typeof a.options.addPath&&(r=a.options.addPath(n,t));var l=a.services.interpolator.interpolate(r,{lng:n,ns:t});a.options.request(a.options,l,i,(function(t,n){s+=1,c.push(t),u.push(n),s===e.length&&o&&o(c,u)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,o=t.logger,a=n.language;if(!a||"cimode"!==a.toLowerCase()){var i=[],s=function(e){r.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};s(a),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return s(e)})),i.forEach((function(t){e.allOptions.ns.forEach((function(e){n.read(t,e,"read",null,null,(function(r,a){r&&o.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&a&&o.log("loaded namespace ".concat(e," for language ").concat(t),a),n.loaded("".concat(t,"|").concat(e),r,a)}))}))}))}}}])&&we(t.prototype,n),r&&we(t,r),e}();Se.type="backend";var Oe=Se,Ee=n(273),Ie=n.n(Ee),Te=n(274),Ne=n.n(Te),Re=n(104),je=n.n(Re),Be=n(1),_e=n.n(Be);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){je()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e,Pe={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Le=_e.a.createContext();function Fe(){return Pe}var ze=function(){function e(){Ie()(this,e),this.usedNamespaces={}}return Ne()(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function Ue(){return $e}var We={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pe=Me(Me({},Pe),e)}(e.options.react),function(e){$e=e}(e)}};var Ve=n(153);var qe={name:"panopto-navigator",lookup:()=>{const e=[];return"undefined"!=typeof navigator&&(navigator.languages?e.push(...navigator.languages):navigator.language&&e.push(navigator.language)),e.length>0?e.map((e=>function(e){const t=["Hans","CN","SG"],n=["Hant","HK","MO","TW"],r=e.split("-");let o=e;return"zh"===e?o="zh-Hans":r.length>1&&("zh"===r[0]&&t.indexOf(r[1])>-1?(r[1]="Hans",o=r.join("-")):"zh"===r[0]&&n.indexOf(r[1])>-1?(r[1]="Hant",o=r.join("-")):o=r[0]),o}(e))):void 0}},Ge=n(27),He=n.n(Ge),Ke=n(167),Ye={insert:"head",singleton:!1};He()(Ke.a,Ye),Ke.a.locals;function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t,n){var r=n.value;if("function"!=typeof r)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Xe(r)));var o=!1;return{configurable:!0,get:function(){if(o||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof r)return r;var n=r.bind(this);return o=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){r=e,delete this[t]}}),o=!1,n},set:function(e){r=e}}}var Qe=n(58),Je=n.n(Qe),et=n(154),tt=n.n(et),nt=n(272),rt=n.n(nt);function ot(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var at={};function it(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&at[t[0]]||("string"==typeof t[0]&&(at[t[0]]=new Date),ot.apply(void 0,t))}function st(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return it("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],o=!!t.options&&t.options.fallbackLng,a=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var i=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!i(r,e)||o&&!i(a,e))))}function ut(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){je()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=Object(Be.useContext)(Le)||{},o=r.i18n,a=r.defaultNS,i=n||o||Ue();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new ze),!i){it("You will need to pass in an i18next instance by using initReactI18next");var s=function(e){return Array.isArray(e)?e[e.length-1]:e},c=[s,{},!1];return c.t=s,c.i18n={},c.ready=!1,c}i.options.react&&void 0!==i.options.react.wait&&it("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var u=dt(dt(dt({},Fe()),i.options.react),t),l=u.useSuspense,d=u.keyPrefix,p=e||a||i.options&&i.options.defaultNS;p="string"==typeof p?[p]:p||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(p);var h=(i.isInitialized||i.initializedStoreOnce)&&p.every((function(e){return ct(e,i,u)}));function f(){return i.getFixedT(null,"fallback"===u.nsMode?p:p[0],d)}var m=Object(Be.useState)(f),g=tt()(m,2),b=g[0],y=g[1],A=Object(Be.useRef)(!0);Object(Be.useEffect)((function(){var e=u.bindI18n,t=u.bindI18nStore;function n(){A.current&&y(f)}return A.current=!0,h||l||st(i,p,(function(){A.current&&y(f)})),e&&i&&i.on(e,n),t&&i&&i.store.on(t,n),function(){A.current=!1,e&&i&&e.split(" ").forEach((function(e){return i.off(e,n)})),t&&i&&t.split(" ").forEach((function(e){return i.store.off(e,n)}))}}),[i,p.join()]);var v=Object(Be.useRef)(!0);Object(Be.useEffect)((function(){A.current&&!v.current&&y(f),v.current=!1}),[i]);var x=[b,i,h];if(x.t=b,x.i18n=i,x.ready=h,h)return x;if(!h&&!l)return x;throw new Promise((function(e){st(i,p,(function(){e()}))}))}var ht=["forwardedRef"];function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){je()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function r(r){var o=r.forwardedRef,a=rt()(r,ht),i=pt(e,a),s=tt()(i,3),c=s[0],u=s[1],l=s[2],d=mt(mt({},a),{},{t:c,i18n:u,tReady:l});return t.withRef&&o?d.ref=o:!t.withRef&&o&&(d.forwardedRef=o),_e.a.createElement(n,d)}r.displayName="withI18nextTranslation(".concat(ut(n),")"),r.WrappedComponent=n;return t.withRef?_e.a.forwardRef((function(e,t){return _e.a.createElement(r,Object.assign({},e,{forwardedRef:t}))})):r}}var bt=n(26),yt=n(7);class At extends Be.Component{constructor(e){super(e),this.handleHover=e=>{this.props.onHover&&this.props.onHover(e)},this.handleMouseLeave=e=>{this.props.onMouseLeave&&this.props.onMouseLeave(e)},this.handleFocus=e=>{this.props.onFocus&&this.props.onFocus(e)},this.handleBlur=e=>{this.setState({clicked:!1}),this.props.onBlur&&this.props.onBlur(e)},this.handleMouseDown=e=>{this.setState({clicked:!0}),this.props.onMouseDown&&this.props.onMouseDown(e)},this.handleClick=e=>{this.props.disabled||this.props.onActivate(e),e.stopPropagation()},this.handleKeyPress=e=>{"Enter"!==e.key&&" "!==e.key&&"Spacebar"!==e.key||(this.props.disabled||this.props.onActivate(e),e.preventDefault(),e.stopPropagation())},this.state={clicked:!1}}render(){const e=[];return this.props.className&&e.push(this.props.className),this.props.iconCode&&e.push("material-icons"),this.state.clicked&&e.push("clicked"),this.props.disabled&&e.push("disabled"),Be.createElement("div",{role:this.props.role||"button",title:this.props.title,"aria-label":this.props.ariaLabel,"aria-haspopup":this.props.isMenuButton,"aria-expanded":this.props.isMenuOpen,"aria-disabled":this.props.disabled,tabIndex:this.props.tabIndex||0,className:e.join(" "),onMouseOver:this.handleHover,onMouseLeave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyPress:this.handleKeyPress,ref:this.props.innerRef},this.props.iconCode?Be.createElement("span",{"aria-hidden":"true"},this.props.iconCode):this.props.children)}}function vt(e){this.message=e}vt.prototype=new Error,vt.prototype.name="InvalidCharacterError";var xt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new vt("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,a=0,i="";r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};function kt(e){this.message=e}kt.prototype=new Error,kt.prototype.name="InvalidTokenError";var wt,Ct=function(e,t){if("string"!=typeof e)throw new kt("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(xt(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return xt(t)}}(e.split(".")[n]))}catch(e){throw new kt("Invalid token specified: "+e.message)}},St=n(56);!function(e){e[e.All=0]="All",e[e.Today=1]="Today",e[e.Yesterday=2]="Yesterday",e[e.LastWeek=3]="LastWeek",e[e.LastMonth=4]="LastMonth",e[e.LastThreeMonths=5]="LastThreeMonths",e[e.LastSixMonths=6]="LastSixMonths",e[e.Custom=7]="Custom"}(wt||(wt={}));class Ot extends Be.Component{render(){const{className:e,style:t,title:n,downloadUrl:r,downloadFilename:o,onClick:a,iconCode:i}=this.props,s=[];e&&s.push(e),i&&s.push("material-icons");let c=t||{};return i&&(c=Object.assign(Object.assign({},c),{textDecoration:"none"})),Be.createElement("a",{className:s.join(" "),style:c,title:n,href:r,download:o,onClick:a},i?Be.createElement("span",{"aria-hidden":"true"},i):this.props.children)}}var Et=n(103),It=n.n(Et);class Tt extends Be.Component{render(){return Be.createElement(At,Object.assign({},this.props),Be.createElement(It.a,{path:this.props.path,size:this.props.size}))}}class Nt extends Be.Component{render(){return Be.createElement(Be.Fragment,null,Be.createElement("i",{className:"material-icons","aria-hidden":"true"},this.props.iconCode),Be.createElement("div",{className:"label"},this.props.text))}}var Rt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class jt extends Be.Component{constructor(){super(...arguments),this.ignoreNextMenuButtonClick=!1,this.handleMenuButtonActivate=e=>{const t=e.type;"click"===t&&this.ignoreNextMenuButtonClick||this.props.onToggleOpen(!0,(()=>this.focusMenu({keyboardInitiated:"click"!==t})))},this.focusMenu=({keyboardInitiated:e=!1})=>{if(!this.menuElement)return;const t=$(this.menuElement).find(":tabbable").first();t.focus(),e||t.addClass("clicked").one("blur",(()=>t.removeClass("clicked")))},this.handleMenuBlur=()=>{this.blurTimeoutId=window.setTimeout((()=>{this.props.onToggleOpen(!1)}))},this.handleMenuFocus=()=>{window.clearTimeout(this.blurTimeoutId)},this.handleMenuKeyDown=e=>{"Escape"===e.key&&(this.props.onToggleOpen(!1,(()=>{var e;return null===(e=this.buttonElement)||void 0===e?void 0:e.focus()})),e.preventDefault(),e.stopPropagation())}}handleMenuButtonMouseDown(){this.ignoreNextMenuButtonClick=this.props.isOpen}render(){return Be.createElement(Be.Fragment,null,Be.createElement(At,{className:"button",title:this.props.title,isMenuButton:!0,isMenuOpen:this.props.isOpen,iconCode:this.props.iconCode,onActivate:this.handleMenuButtonActivate,onMouseDown:this.handleMenuButtonMouseDown,innerRef:e=>this.buttonElement=e},!this.props.iconCode&&this.props.menuButtonContents),this.props.isOpen&&Be.createElement("div",{className:"popup-menu",role:"menu","aria-label":this.props.title,ref:e=>e&&(this.menuElement=e),onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyDown:this.handleMenuKeyDown},this.props.children))}}Rt([Ze],jt.prototype,"handleMenuButtonMouseDown",null);var Bt=n(168),_t={insert:"head",singleton:!1},Dt=(He()(Bt.a,_t),Bt.a.locals,n(169)),Mt={insert:"head",singleton:!1};He()(Dt.a,Mt),Dt.a.locals;class $t extends Be.Component{constructor(e){super(e),this.handleMouseDown=e=>{this.setState({clicked:!0}),e.button===$t.LeftMouseButton&&this.props.onSelect()},this.handleKeyPress=e=>{e.which!==Panopto.Core.Key.Enter&&e.which!==Panopto.Core.Key.Space||(this.props.onSelect(),e.preventDefault())},this.handleBlur=()=>{this.setState({clicked:!1})},this.state={clicked:!1}}render(){const e=["rating-star","material-icons"];return this.props.filled&&e.push("filled"),this.state.clicked&&e.push("clicked"),Be.createElement("div",{className:e.join(" "),role:"button",tabIndex:this.props.tabIndex||0,title:this.props.tooltip,"aria-current":this.props.selected,onMouseEnter:this.props.onHover,onFocus:this.props.onHover,onMouseDown:this.handleMouseDown,onKeyPress:this.handleKeyPress,onBlur:this.handleBlur})}}$t.LeftMouseButton=0;Be.Component;var Pt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Lt extends Be.Component{constructor(e){if(super(e),!this.props.allowEmpty&&!this.props.time)throw new Error("time is required if allowEmpty is false");if(!this.props.time&&!this.props.millisecondPrecision)throw new Error("One of time or millisecondPrecision is required");this.millisecondPrecision=this.props.time?this.props.time.millisecondPrecision:this.props.millisecondPrecision?this.props.millisecondPrecision:0,this.state=this.getInitialState()}render(){return Be.createElement("input",{placeholder:this.props.placeholderText,value:this.state.inputValue,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus})}handleChange(e){const t=e.currentTarget.value;let n=!1;if(t){const e=new yt.Models.Timestamp(0,this.millisecondPrecision);e.validate(t)?(e.setValueAsString(t),!this.props.maxTimeMillis||e.getNumericValue()<=this.props.maxTimeMillis?this.props.onChange(e):n=!0):n=!0}else this.props.allowEmpty?this.props.onChange(void 0):n=!0;this.setState({inputValue:t,invalidInputValue:n})}handleBlur(){this.state.invalidInputValue&&this.setState(this.getInitialState()),this.props.onBlur&&this.props.onBlur()}handleFocus(){this.props.onFocus&&this.props.onFocus()}getInitialState(){return{inputValue:this.props.time?this.props.time.getStringValue():"",invalidInputValue:!1}}}Pt([Ze],Lt.prototype,"handleChange",null),Pt([Ze],Lt.prototype,"handleBlur",null),Pt([Ze],Lt.prototype,"handleFocus",null);var Ft=n(108),zt=n(170),Ut={insert:"head",singleton:!1},Wt=(He()(zt.a,Ut),zt.a.locals,function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i});class Vt extends Be.Component{constructor(){super(...arguments),this.setDefaultFolder=()=>{this.props.folderServices.getDefaultFolder((e=>{e?(this.props.onFolderSelected(e.id,e.name),this.createFolderPicker(e.id,e.name)):this.createFolderPicker()}),(()=>this.createFolderPicker()),null)}}render(){return Be.createElement("div",{className:"folder-picker-wrapper",title:this.props.title})}componentDidMount(){this.props.initialFolderId?(this.props.onFolderSelected(this.props.initialFolderId,this.props.initialFolderName),this.createFolderPicker(this.props.initialFolderId,this.props.initialFolderName)):this.props.getDefaultFolderOnUnselected?this.setDefaultFolder():this.createFolderPicker()}componentDidUpdate(e){if(this.folderPicker&&e.disabled!==this.props.disabled){const e=!this.props.disabled;this.folderPicker.enabled(e)}}createFolderPicker(e,t){this.folderPicker=Panopto.Core.UI.Components.folderPicker($(".folder-picker-wrapper"),Panopto.UI.SharedResources.commonFolderPickerStrings,{selectedFolderId:void 0===e?this.props.initialFolderId:e,selectedFolderName:void 0===t?this.props.initialFolderName:t,excludedFolders:this.props.excludedFolders,pickerStyle:this.props.pickerStyle,onInitialFolderLoaded:this.handleInitialFolderLoaded,onChange:this.handleSelectedFolderChanged,childIndent:this.props.childIndent,allowNoSelection:this.props.allowNoSelection||!1,noSelectionClass:this.props.noSelectionClass||"",createSessionAccess:this.props.createSessionAccess||!1,createFolderAccess:this.props.createFolderAccess||!1,includeSandboxes:this.props.includeSandboxes||!1,includeMySandbox:this.props.includeMySandbox||!1}),this.props.disabled&&this.folderPicker.enabled(!1)}handleInitialFolderLoaded(e){this.props.onInitialFolderLoaded(e.id,e.name)}handleSelectedFolderChanged(e){this.props.onFolderSelected(e.id,e.name)}}Wt([Ze],Vt.prototype,"handleInitialFolderLoaded",null),Wt([Ze],Vt.prototype,"handleSelectedFolderChanged",null);var qt=n(171),Gt={insert:"head",singleton:!1};He()(qt.a,Gt),qt.a.locals;class Ht extends Be.Component{constructor(){super(...arguments),this.handleTransitionEnd=e=>{!this.props.isActive&&"opacity"===e.propertyName&&this.props.onHideTransitionComplete&&this.props.onHideTransitionComplete()},this.handleKeyDown=e=>{"Escape"===e.key&&this.props.onToggle(!1)},this.setElementRef=e=>{this.element||(this.element=$(e))}}componentDidUpdate(e){this.props.isActive&&!e.isActive?(this.props.accessibilityService.trapFocus(this.element),this.element.find(":tabbable").first().focus()):!this.props.isActive&&e.isActive&&this.props.accessibilityService.releaseFocus(this.element)}render(){const e=[""];return this.props.isActive&&e.push("visible"),Be.createElement(Be.Fragment,null,this.props.isActive&&Be.createElement("div",{tabIndex:0}),Be.createElement("div",{className:"react-modal"+e.join(" "),style:{zIndex:this.props.zIndex||void 0},onTransitionEnd:this.handleTransitionEnd,onKeyDown:this.handleKeyDown,ref:this.setElementRef},Be.createElement(At,{className:"close-button",iconCode:"close",onActivate:()=>this.props.onToggle(!1)}),this.props.children),this.props.isActive&&Be.createElement("div",{tabIndex:0}))}}var Kt=n(172),Yt={insert:"head",singleton:!1};He()(Kt.a,Yt),Kt.a.locals;var Xt=n(173),Zt={insert:"head",singleton:!1},Qt=(He()(Xt.a,Zt),Xt.a.locals,function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i});class Jt extends Be.Component{constructor(e){super(e),this.tagRef=Be.createRef(),this.tagFocusRef=Be.createRef(),this.state={tagHovered:!1,showHoverMenu:!1,tagClientRect:null}}componentDidMount(){this.setState({tagClientRect:this.tagRef.current.getBoundingClientRect()})}componentDidUpdate(e){e.focus!=this.props.focus&&this.props.focus&&this.tagFocusRef.current.focus()}handleOnHover(){this.state.tagHovered||this.setState({tagClientRect:this.tagRef.current.getBoundingClientRect(),tagHovered:!0})}handleOnHoverLeave(){this.setState({tagHovered:!1})}handleOnBlur(e){e.currentTarget.contains(e.relatedTarget)||this.handleOnHoverLeave()}handleOnClick(){this.props.onTagClick(this.props.tagInfo.content)}onKeyDown(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}render(){var e,t,n;const r=this.state.tagHovered&&this.props.canDelete,o=(null===(e=this.state.tagClientRect)||void 0===e?void 0:e.width)||0;let a={width:o-12};return o<12&&(a={width:0}),Be.createElement("div",{className:"tag-hover-container"},Be.createElement("div",{className:"tag"+(this.props.darkMode?" tag-dark-mode":""),onMouseOver:this.handleOnHover,onFocus:this.handleOnHover,onMouseLeave:this.handleOnHoverLeave,onBlur:this.handleOnBlur,onClick:this.handleOnClick,onKeyDown:e=>this.onKeyDown(e,this.handleOnClick),tabIndex:this.props.tabIndex,role:"listitem",ref:this.tagFocusRef},Be.createElement("div",{className:"tag-text",ref:this.tagRef,style:r?a:{}},Be.createElement("span",{className:"tag-hashtag"},"#"),this.props.tagInfo.content),this.state.tagHovered&&this.props.canDelete&&Be.createElement("div",{className:"delete material-icons",onClick:this.props.deleteTag,onFocus:this.handleOnHover,onBlur:this.handleOnBlur,onKeyDown:e=>this.onKeyDown(e,this.props.deleteTag),role:"button",tabIndex:this.props.tabIndex},"close")),Panopto.user.isAuthenticated&&Be.createElement(Ve.Subscriptions.SubscriptionHover,{id:this.props.tagInfo.id,name:this.props.tagInfo.content,videos:this.props.tagInfo.usage,type:AutoRestModels.SubscribableType.Tag,onSubscriptionChange:this.props.onSubscriptionChange,subscriptionService:this.props.subscriptionService,isSubscriptionsEnabled:Panopto.features.subscriptionsEnabled,userService:this.props.userService,topOffset:null===(t=this.state.tagClientRect)||void 0===t?void 0:t.top,initialLeftOffset:null===(n=this.state.tagClientRect)||void 0===n?void 0:n.left,isHovered:this.state.tagHovered,useAbsolutePosition:this.props.useAbsolutePosition,resources:this.props.resources}))}}Qt([Ze],Jt.prototype,"handleOnHover",null),Qt([Ze],Jt.prototype,"handleOnHoverLeave",null),Qt([Ze],Jt.prototype,"handleOnBlur",null),Qt([Ze],Jt.prototype,"handleOnClick",null),Qt([Ze],Jt.prototype,"onKeyDown",null);var en=n(174),tn={insert:"head",singleton:!1},nn=(He()(en.a,tn),en.a.locals,n(175)),rn={insert:"head",singleton:!1},on=(He()(nn.a,rn),nn.a.locals,function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i});class an extends Be.Component{get seedTagIsNotUsed(){return-1===this.props.allTags.indexOf(this.props.seedTag.toLowerCase())}constructor(e){super(e),this.state={suggestedTags:[],focusPosition:0}}componentDidMount(){this.getSuggestedTags(),document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){e.seedTag!==this.props.seedTag&&this.state.suggestedTags&&(this.props.blockNewTags||!this.seedTagIsNotUsed?this.getSuggestedTags():this.setState((e=>{let t=e.suggestedTags;return t.length?t[0].nameColumn=this.props.seedTag:t=[this.getSeedListItem()],{suggestedTags:t}}),this.getSuggestedTags))}handleKeyDown(e){const t=this.state.suggestedTags.length;"ArrowDown"===e.key?this.state.focusPosition<t-1&&this.setState({focusPosition:this.state.focusPosition+1}):"ArrowUp"===e.key?this.state.focusPosition>0&&this.setState({focusPosition:this.state.focusPosition-1}):"Enter"!==e.key&&"Tab"!==e.key||(e.preventDefault(),this.createTagNoDuplicates(this.state.suggestedTags[this.state.focusPosition]))}createTagNoDuplicates(e){if(e&&!e.isAlreadyUsed){const t=e.isSeed&&!e.isAlreadySuggested;this.props.createTag(e.nameColumn,{usageCount:parseInt(e.usageColumn),tagId:e.id,updateTag:t})}}getSeedListItem(){return{nameColumn:this.props.seedTag,usageColumn:this.props.resources.Tag_AddNew,id:"",isAlreadyUsed:!this.seedTagIsNotUsed,isSeed:!0,isAlreadySuggested:!1}}getSuggestedTags(){this.props.seedTag.length>=1&&this.props.tagsService.searchTags(this.props.seedTag,(e=>{const t=this.getSeedListItem(),n=e.map((e=>(e.content.toLowerCase()===this.props.seedTag.toLowerCase()&&(t.usageColumn=e.usageCount.toString(),t.isAlreadySuggested=!0),{nameColumn:e.content,usageColumn:e.usageCount.toString(),id:e.id,isAlreadyUsed:this.props.allTags.indexOf(e.content.toLowerCase())>-1,isSeed:!1,isAlreadySuggested:!1}))),r=this.props.blockNewTags?n:[t].concat(n),o=this.props.hideTagName?r.filter((e=>e.nameColumn!==this.props.hideTagName)):r;this.setState({suggestedTags:o})}))}highlightTagName(e,t){let n=[];try{n=e.split(new RegExp(`(${escape(t)})`,"gi"))}catch(t){n=[e]}return Be.createElement("span",{className:"autocomplete-text"},n.map(((n,r)=>n.toLowerCase()===t.toLowerCase()?Be.createElement("b",{key:e+r},n):n)))}render(){return Be.createElement("div",{className:"tags-popup"},this.state.suggestedTags.map(((e,t)=>Be.createElement("div",{className:Je()({"tag-autocomplete-item":!0,"tag-focused":t===this.state.focusPosition,"tag-used":e.isAlreadyUsed&&!this.props.useMergeMode}),key:t,title:e.nameColumn,onClick:()=>{this.createTagNoDuplicates(e)}},Be.createElement("div",{className:Je()({"tag-merge-mode":this.props.useMergeMode,"tag-item":!0})},Be.createElement("div",{className:"tag-autocomplete-info"},"#",this.highlightTagName(e.nameColumn,this.props.seedTag),e.isAlreadyUsed&&!this.props.useMergeMode&&Be.createElement("div",{className:"tag-used-checkmark material-icons"},"done")),(!this.props.useMergeMode||!e.isSeed&&this.props.useMergeMode)&&Be.createElement("div",{className:"tag-occurance"},e.usageColumn)),this.props.useMergeMode&&Be.createElement("div",{className:"tag-action"},e.isSeed&&!e.isAlreadySuggested&&this.props.resources.Tag_Update,(!e.isSeed||e.isAlreadySuggested)&&this.props.resources.Tag_Merge)))))}}on([Ze],an.prototype,"handleKeyDown",null),on([Ze],an.prototype,"getSeedListItem",null),on([Ze],an.prototype,"getSuggestedTags",null);var sn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class cn extends Be.Component{constructor(e){super(e),this.tagEditorRef=Be.createRef(),this.tagInputRef=Be.createRef(),this.INPUT_PADDING=5;const t=this.props.mergeMode?216:this.INPUT_PADDING;this.state={tagName:this.props.seedTag||"",inputWidth:t}}handleChange(e){const t=e.target.value.replace(/\s+|#+/g,"");t.length<=30&&this.setState({tagName:t})}handleOnBlur(){this.state.tagName.trim()||this.props.closeEditor()}handleOnClick(){this.tagInputRef.current.focus()}handleKeyDown(e){"Escape"===e.key&&this.props.closeEditor({focusAddButton:!0})}componentDidMount(){this.tagInputRef.current.focus()}componentDidUpdate(e,t){t.tagName==this.state.tagName||this.props.mergeMode||this.setState({inputWidth:this.tagEditorRef.current.offsetWidth+this.INPUT_PADDING})}clearAndCreateTag(e,{usageCount:t,tagId:n,updateTag:r}){this.props.createTag(e,{usageCount:t,tagId:n,updateTag:r}),this.props.mergeMode||this.setState({tagName:""},(()=>{this.tagInputRef.current.focus()}))}clearAndCloseTag(){this.setState({tagName:""},(()=>{this.props.closeEditor()}))}render(){return Be.createElement("div",{className:"tags-editor"+(this.props.darkMode?" tags-dark-mode":""),onClick:this.handleOnClick},Be.createElement("label",{className:"input-size-controller input-style-display","data-value":this.state.tagName},Be.createElement("span",null,"#"),Be.createElement("input",{onChange:this.handleChange,onKeyDown:this.handleKeyDown,style:{width:this.state.inputWidth},onBlur:this.handleOnBlur,value:this.state.tagName,ref:this.tagInputRef})),Be.createElement("div",{onClick:this.clearAndCloseTag,className:"tag-editor-close material-icons"},"close"),Be.createElement("span",{className:"input-size-check",ref:this.tagEditorRef},this.state.tagName),this.state.tagName&&Be.createElement(an,{seedTag:this.state.tagName,allTags:this.props.allTags,tagsService:this.props.tagsService,createTag:this.clearAndCreateTag,useMergeMode:this.props.mergeMode,blockNewTags:this.props.blockNewTags,hideTagName:this.props.hideTagName,resources:this.props.resources}))}}sn([Ze],cn.prototype,"handleChange",null),sn([Ze],cn.prototype,"handleOnBlur",null),sn([Ze],cn.prototype,"handleOnClick",null),sn([Ze],cn.prototype,"handleKeyDown",null),sn([Ze],cn.prototype,"clearAndCreateTag",null),sn([Ze],cn.prototype,"clearAndCloseTag",null);var un=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class ln extends Be.Component{constructor(e){super(e),this.undoTimeout=0;const t=this.mapClientTagsToContent(this.props.initialTags);this.state={tags:t,showNewTagInput:!1,hideTagOnBlur:!0,latestDeletedTag:"",showUndo:!1,isFocused:!1,tagFocusPosition:0}}componentDidMount(){this.props.fetchTags&&this.getTags(),document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){window.clearTimeout(this.undoTimeout),document.removeEventListener("keydown",this.handleKeyDown)}mapClientTagsToContent(e){return e.map((e=>({content:e.content,usage:e.usageCount,id:e.id})))}getTags(){this.props.tagsService.getTags(this.props.sessionId,(e=>{this.setState({tags:this.mapClientTagsToContent(e)})}))}submitTags(){const e=this.state.tags.map((e=>e.content));this.props.tagsService.setSessionTags(e,this.props.sessionId,this.getTags),this.props.flagChanges&&this.props.flagChanges()}handleTagCreate(e,{usageCount:t,tagId:n,updateTag:r,openNewInput:o=!0}){const a={content:e,usage:(t||0)+1,id:""};this.setState((e=>{const t=e.tags.concat([a]);return{tags:t,showNewTagInput:t.length<ln.MAX_TAGS&&o}}),this.submitTags)}onTagDelete(e){const t=this.state.tags.filter((t=>t.content!=e.content));this.setState({tags:t,latestDeletedTag:e.content,showUndo:!0},(()=>{this.createUndoTimeout(),this.submitTags()}))}closeTagEditor({focusAddButton:e=!1}={}){this.setState({showNewTagInput:!1},(()=>{var t;return e&&(null===(t=this.addNewButton)||void 0===t?void 0:t.focus())}))}undoTagDeletion(){this.handleTagCreate(this.state.latestDeletedTag,{openNewInput:!1}),this.closeUndo()}closeUndo(){this.setState({showUndo:!1})}clearUndoTimeout(){window.clearTimeout(this.undoTimeout)}createUndoTimeout(){this.clearUndoTimeout(),this.undoTimeout=window.setTimeout(this.closeUndo,5e3)}handleTagClick(e){this.props.searchOnClick&&class{static searchForTag({searchInNewTab:e,tagName:t}){const n=`tag:${t}`;if(e){const e=`/Panopto/Pages/Sessions/List.aspx#query=${n}&sortColumn=3&sortAscending=false`;window.open(e,"_blank")}else{const e=Panopto.Core.StringHelpers.setQueryParameters(location.href,{query:n,isSubscriptionsPage:null,subscribableTypes:null},!0);window.location.href=e}}}.searchForTag({searchInNewTab:this.props.searchInNewTab,tagName:e})}handleOnClick(e){e&&e.preventDefault(),this.state.tags.length<ln.MAX_TAGS&&this.setState({showNewTagInput:!0})}onFocus(){this.setState({isFocused:!0})}onBlur(){this.setState({isFocused:!1})}handleKeyDown(e){this.state.isFocused&&!this.state.showNewTagInput&&("ArrowDown"===e.key||"ArrowRight"===e.key?(e.preventDefault(),this.setState((e=>{let t=e.tagFocusPosition;return t<e.tags.length-1&&(t+=1),{tagFocusPosition:t}}))):"ArrowUp"!==e.key&&"ArrowLeft"!==e.key||(e.preventDefault(),this.setState((e=>{let t=e.tagFocusPosition;return t>0&&(t-=1),{tagFocusPosition:t}}))))}onTagFocus(e){this.setState({tagFocusPosition:e})}onKeyDown(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}render(){const e=this.state.tags.length>=ln.MAX_TAGS;return Be.createElement("div",{className:"tags-container"+(this.props.darkMode?" tags-dark-mode":""),onFocus:this.onFocus,onBlur:this.onBlur},Be.createElement("div",{className:"tag-list",role:"list"},this.state.tags.map(((e,t)=>Be.createElement(Jt,{key:e.id,tagInfo:e,onTagClick:this.handleTagClick,darkMode:this.props.darkMode,canDelete:this.props.canDelete,onSubscriptionChange:this.props.onSubscriptionChange,deleteTag:()=>this.onTagDelete(e),subscriptionService:this.props.subscriptionService,userService:this.props.userService,tabIndex:this.state.tagFocusPosition===t?0:-1,focus:this.state.tagFocusPosition===t,onFocus:()=>this.onTagFocus(t),useAbsolutePosition:this.props.useAbsolutePosition,resources:this.props.resources}))),!this.state.showNewTagInput&&this.props.canAdd&&Be.createElement("div",{className:"tag-create-new"+(e?" disabled":""),onClick:this.handleOnClick,onKeyDown:e=>this.onKeyDown(e,this.handleOnClick),tabIndex:0,ref:e=>this.addNewButton=e},Be.createElement("span",{className:"material-icons tag-add-icon"},"add"),this.props.resources.Tag_Add),this.state.showNewTagInput&&Be.createElement("div",{className:"tags-input"},Be.createElement(cn,{tagsService:this.props.tagsService,allTags:this.state.tags.map((e=>e.content.toLowerCase())),darkMode:this.props.darkMode,createTag:this.handleTagCreate,closeEditor:this.closeTagEditor,resources:this.props.resources}))),this.state.showUndo&&Be.createElement("div",{className:"tags-container-undo",onMouseEnter:this.clearUndoTimeout,onMouseLeave:this.createUndoTimeout},Be.createElement("div",{className:"tag-undo-text"},Be.createElement("span",{className:"deleted-tag"},"#",this.state.latestDeletedTag," "),this.props.resources.Tag_Removed,Be.createElement(At,{onActivate:this.undoTagDeletion,className:"undo-tag-button"},this.props.resources.Tag_Undo),Be.createElement("div",{className:"tag-undo-close material-icons",onClick:this.closeUndo},"close"))))}}ln.MAX_TAGS=10,un([Ze],ln.prototype,"getTags",null),un([Ze],ln.prototype,"handleTagCreate",null),un([Ze],ln.prototype,"onTagDelete",null),un([Ze],ln.prototype,"closeTagEditor",null),un([Ze],ln.prototype,"undoTagDeletion",null),un([Ze],ln.prototype,"closeUndo",null),un([Ze],ln.prototype,"clearUndoTimeout",null),un([Ze],ln.prototype,"createUndoTimeout",null),un([Ze],ln.prototype,"handleTagClick",null),un([Ze],ln.prototype,"handleOnClick",null),un([Ze],ln.prototype,"onFocus",null),un([Ze],ln.prototype,"onBlur",null),un([Ze],ln.prototype,"handleKeyDown",null),un([Ze],ln.prototype,"onTagFocus",null),un([Ze],ln.prototype,"onKeyDown",null);class dn{static get PanoptoLogo(){return Be.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"248 334 115 125"},Be.createElement("path",{d:"M266.5,429.6c4.5,1.2,9.3,0.6,13.3-1.7l13.5-7.8l0-49.2c0-5.6,0.1-8.9,0-14.4c0-6.1,2.6-10.1,4.5-11.9\r\n                    c-7.3,4.2-17.8,10.2-25.1,14.5l-11.3,6.5c-2.5,1.6-4.5,3.8-5.9,6.4c-1.4,2.5-2.1,5.4-2.1,8.4v32.2c0,3.2,0.9,6.3,2.4,8.9\r\n                    C258.1,425.4,261.9,428.4,266.5,429.6L266.5,429.6z M346.3,403.4l-10.6-6.1l-42.7,24.6l-13.1,7.6c-4.2,2.5-9.8,2.5-12.2,1.9\r\n                    l35.6,20.5c2.7,1.5,5.7,2.3,8.8,2.3c3.1,0,6.2-0.8,8.9-2.4c9.2-5.2,18.4-10.6,27.6-15.9c2.7-1.6,5-3.9,6.5-6.6\r\n                    c1.5-2.6,2.4-5.6,2.4-8.8c0-3.4-0.7-6.4-2.4-9.3C352.8,407.2,350.3,405.7,346.3,403.4L346.3,403.4z M350.1,403.7\r\n                    c3.5,2,6.8,5.8,7.8,9.6v-28.6v-12.1c0-3.3-0.9-6.4-2.5-9.1c-1.6-2.8-3.9-5.1-6.7-6.7c-9-5.2-18-10.4-27-15.6\r\n                    c-4-2.3-8.7-2.9-13.1-1.9c-2.4,0.6-3.9,1.4-5.9,2.6c-5.7,3.9-7.9,9.3-7.9,16v13.9l26.2,15.1l16.5,9.5\r\n                    C342.3,399.1,345.3,400.9,350.1,403.7L350.1,403.7z"}))}static get PanoptoBetaLogo(){return Be.createElement("svg",{x:"0",y:"0",viewBox:"0 0 92 87",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Be.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Be.createElement("g",{id:"Artboard",transform:"translate(-488.000000, -854.000000)",fill:"#FFFFFF"},Be.createElement("g",{id:"Beta_Logo",transform:"translate(488.000000, 854.000000)"},Be.createElement("path",{d:"M88.2246094,29 C89.1816406,29 89.9287109,28.7822266 90.4658203,28.3466797 C91.0029297,27.9111328 91.2714844,\r\n                                27.3085938 91.2714844,26.5390625 C91.2714844,25.96875 91.1298828,25.5166016 90.8466797,25.1826172 C90.5634766,24.8486328\r\n                                90.1210938,24.625 89.5195312,24.5117188 L89.5195312,24.5117188 L89.5195312,24.453125 C90.0039062,24.3671875 90.375,\r\n                                24.1582031 90.6328125,23.8261719 C90.890625,23.4941406 91.0195312,23.078125 91.0195312,22.578125 C91.0195312,21.8359375\r\n                                90.7568359,21.2929688 90.2314453,20.9492188 C89.7060547,20.6054688 88.8535156,20.4335938 87.6738281,20.4335938 L87.6738281,\r\n                                20.4335938 L85.1308594,20.4335938 L85.1308594,29 L88.2246094,29 Z M87.8789062,23.9726562 L86.53125,23.9726562 L86.53125,\r\n                                21.6054688 L87.7441406,21.6054688 C88.3769531,21.6054688 88.8388672,21.6953125 89.1298828,21.875 C89.4208984,22.0546875\r\n                                89.5664062,22.3457031 89.5664062,22.7480469 C89.5664062,23.1933594 89.4316406,23.5087891 89.1621094,23.6943359 C88.8925781,\r\n                                23.8798828 88.4648438,23.9726562 87.8789062,23.9726562 L87.8789062,23.9726562 Z M88.0195312,27.8222656 L86.53125,27.8222656\r\n                                L86.53125,25.109375 L87.9492188,25.109375 C88.5703125,25.109375 89.0332031,25.2167969 89.3378906,25.4316406 C89.6425781,\r\n                                25.6464844 89.7949219,25.9765625 89.7949219,26.421875 C89.7949219,26.90625 89.6455078,27.2607422 89.3466797,27.4853516\r\n                                C89.0478516,27.7099609 88.6054688,27.8222656 88.0195312,27.8222656 L88.0195312,27.8222656 Z M89.9765625,41.5 L89.9765625,\r\n                                40.3105469 L86.53125,40.3105469 L86.53125,37.6210938 L89.7597656,37.6210938 L89.7597656,36.4492188 L86.53125,36.4492188\r\n                                L86.53125,34.1171875 L89.9765625,34.1171875 L89.9765625,32.9335938 L85.1308594,32.9335938 L85.1308594,41.5 L89.9765625,\r\n                                41.5 Z M88.0898438,54 L88.0898438,46.6347656 L90.609375,46.6347656 L90.609375,45.4335938 L84.1699219,45.4335938 L84.1699219,\r\n                                46.6347656 L86.6894531,46.6347656 L86.6894531,54 L88.0898438,54 Z M85.4765625,66.5 L86.3144531,64.1210938 L89.5898438,\r\n                                64.1210938 L90.4453125,66.5 L91.9335938,66.5 L88.7285156,57.8984375 L87.2050781,57.8984375 L84,66.5 L85.4765625,66.5 Z\r\n                                M89.2207031,62.9140625 L86.7246094,62.9140625 L87.4980469,60.6816406 C87.7011719,60.1113281 87.8554688,59.5859375\r\n                                87.9609375,59.1054688 C88,59.2617188 88.0712891,59.5078125 88.1748047,59.84375 C88.2783203,60.1796875 88.359375,60.4257812\r\n                                88.4179688,60.5820312 L88.4179688,60.5820312 L89.2207031,62.9140625 Z",fillRule:"nonzero",opacity:"0.8"}),Be.createElement("path",{id:"glyph",fillOpacity:"0.3",d:"M72.5426666,49.0452843 C75.1659824,50.5724904 77.6490981,53.3809903 78.4123263,56.2209789 L78.4123263,25.6873524\r\n                                C78.4123263,23.1914912 77.7458136,20.8680686 76.5739809,18.8557852 C75.3594135,16.7797745 73.6177837,15.0471415 71.5215302,\r\n                                13.8535666 C64.7814304,9.96919983 58.0405809,6.05334432 51.2787389,2.19071985 C48.3112957,0.501571383 44.7643088,-0.0149946602\r\n                                41.4422418,0.781971529 C39.6788698,1.20107228 38.5400254,1.8465924 37.0240652,2.71853189 C32.7348427,5.61250131 31.1004247,\r\n                                9.72178794 31.1004247,14.7457488 L31.1004247,25.1392975 L63.1042777,43.5902269 C66.6842528,45.6557414 68.9634412,46.9685239\r\n                                72.5426666,49.0452843 Z M69.7266694,48.8615997 L61.8139872,44.2897278 L29.8108839,62.7511534 L19.9526446,68.4423767 C16.7707777,\r\n                                70.2822215 12.6202558,70.31446 10.8044024,69.8301325 L37.507643,85.2363961 C39.5394195,86.387986 41.7863693,86.9690291 44.1195384,\r\n                                86.9690291 C46.4737001,86.9690291 48.7528884,86.3662438 50.8056574,85.2041576 C57.7181958,81.2875524 64.5984956,77.264485\r\n                                71.4892917,73.2946488 C73.5210681,72.1003241 75.2087171,70.4006793 76.3805498,68.3778997 C77.5096477,66.4195971 78.1551679,\r\n                                64.1711478 78.1551679,61.8042407 C78.1551679,59.2866372 77.6386018,57.0066991 76.3700536,54.8002349 C74.6179275,51.7338269\r\n                                72.7046089,50.5507482 69.7266694,48.8615997 Z M9.84699335,68.4851115 C13.1908026,69.3563013 16.7917702,68.9154583 19.8019483,\r\n                                67.2158135 L29.928592,61.3746436 L29.9180958,24.4607892 C29.9180958,20.2975218 29.9608305,17.7911643 29.9180958,13.6376434\r\n                                C29.9180958,9.05527529 31.8958914,6.0960791 33.2828975,4.71881956 C27.8001,7.88194313 19.9631408,12.3795915 14.4915893,15.5532113\r\n                                L6.02035607,20.4377218 C4.17151447,21.6425428 2.64430833,23.2994527 1.60142971,25.2360131 C0.58029335,27.1185927 0,29.2703264\r\n                                0,31.551764 L0,55.6714246 C0,58.0923125 0.656016383,60.3737501 1.79486083,62.331303 C3.56872913,65.3759687 6.47169534,67.6026758\r\n                                9.84699335,68.4851115 L9.84699335,68.4851115 Z"})))))}static get VideoCamera(){return Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Be.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Be.createElement("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}))}static get Microphone(){return Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Be.createElement("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),Be.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}static get AddDisplay(){return Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Be.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Be.createElement("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3h3z"}))}static get Spinner(){return Be.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Be.createElement("defs",null,Be.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},Be.createElement("stop",{stopColor:"#fff",stopOpacity:"0",offset:"0%"}),Be.createElement("stop",{stopColor:"#fff",stopOpacity:".631",offset:"63.146%"}),Be.createElement("stop",{stopColor:"#fff",offset:"100%"}))),Be.createElement("g",{fill:"none",fillRule:"evenodd"},Be.createElement("g",{transform:"translate(1 1)"},Be.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:"url(#a)",strokeWidth:"2"},Be.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),Be.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:"1"},Be.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))))}static get TesselatedHeader(){return Be.createElement("svg",{width:"1440",height:"900",xmlns:"http://www.w3.org/2000/svg"},Be.createElement("path",{d:"M734,520L610,337L639,550Z",fill:"rgb(144,191,114)",stroke:"rgb(144,191,114)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M610,337L555,489L639,550Z",fill:"rgb(148,192,115)",stroke:"rgb(148,192,115)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M555,489L522,525L639,550Z",fill:"rgb(142,188,112)",stroke:"rgb(142,188,112)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M334,412L522,525L555,489Z",fill:"rgb(151,194,116)",stroke:"rgb(151,194,116)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M734,520L789,215L610,337Z",fill:"rgb(150,194,116)",stroke:"rgb(150,194,116)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M522,525L522,667L639,550Z",fill:"rgb(136,183,109)",stroke:"rgb(136,183,109)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M639,550L813,692L734,520Z",fill:"rgb(129,178,105)",stroke:"rgb(129,178,105)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M649,745L813,692L639,550Z",fill:"rgb(122,173,102)",stroke:"rgb(122,173,102)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M734,520L939,233L789,215Z",fill:"rgb(145,190,113)",stroke:"rgb(145,190,113)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M522,667L649,745L639,550Z",fill:"rgb(127,176,104)",stroke:"rgb(127,176,104)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M610,337L334,412L555,489Z",fill:"rgb(155,197,118)",stroke:"rgb(155,197,118)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M522,525L220,664L522,667Z",fill:"rgb(137,183,108)",stroke:"rgb(137,183,108)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M390,225L334,412L610,337Z",fill:"rgb(162,202,121)",stroke:"rgb(162,202,121)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M789,215L615,112L610,337Z",fill:"rgb(160,200,121)",stroke:"rgb(160,200,121)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M615,112L390,225L610,337Z",fill:"rgb(165,202,122)",stroke:"rgb(165,202,122)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M813,692L911,669L734,520Z",fill:"rgb(119,170,100)",stroke:"rgb(119,170,100)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M840,787L911,669L813,692Z",fill:"rgb(107,160,93)",stroke:"rgb(107,160,93)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1031,488L939,233L734,520Z",fill:"rgb(134,182,108)",stroke:"rgb(134,182,108)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M789,215L732,85L615,112Z",fill:"rgb(164,202,122)",stroke:"rgb(164,202,122)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M961,123L732,85L789,215Z",fill:"rgb(155,195,118)",stroke:"rgb(155,195,118)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M911,669L1031,488L734,520Z",fill:"rgb(121,172,101)",stroke:"rgb(121,172,101)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M649,745L840,787L813,692Z",fill:"rgb(110,163,95)",stroke:"rgb(110,163,95)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1157,632L1185,418L1031,488Z",fill:"rgb(111,164,96)",stroke:"rgb(111,164,96)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M522,667L448,784L649,745Z",fill:"rgb(121,171,100)",stroke:"rgb(121,171,100)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M649,745L702,937L840,787Z",fill:"rgb(104,159,92)",stroke:"rgb(104,159,92)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M359,786L448,784L522,667Z",fill:"rgb(123,171,101)",stroke:"rgb(123,171,101)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M615,112L412,67L390,225Z",fill:"rgb(173,207,126)",stroke:"rgb(173,207,126)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M732,85L649,10L615,112Z",fill:"rgb(169,205,124)",stroke:"rgb(169,205,124)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M843,-48L649,10L732,85Z",fill:"rgb(169,205,124)",stroke:"rgb(169,205,124)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M939,233L961,123L789,215Z",fill:"rgb(148,190,114)",stroke:"rgb(148,190,114)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1114,263L961,123L939,233Z",fill:"rgb(139,184,109)",stroke:"rgb(139,184,109)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M390,225L219,284L334,412Z",fill:"rgb(168,204,124)",stroke:"rgb(168,204,124)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M649,10L412,67L615,112Z",fill:"rgb(173,208,126)",stroke:"rgb(173,208,126)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M448,784L702,937L649,745Z",fill:"rgb(109,161,94)",stroke:"rgb(109,161,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M220,664L359,786L522,667Z",fill:"rgb(130,176,104)",stroke:"rgb(130,176,104)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M334,412L220,664L522,525Z",fill:"rgb(148,191,114)",stroke:"rgb(148,191,114)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M251,52L219,284L390,225Z",fill:"rgb(176,209,127)",stroke:"rgb(176,209,127)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1031,488L1114,263L939,233Z",fill:"rgb(131,178,106)",stroke:"rgb(131,178,106)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M126,526L220,664L334,412Z",fill:"rgb(153,194,117)",stroke:"rgb(153,194,117)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M463,1040L702,937L448,784Z",fill:"rgb(104,156,91)",stroke:"rgb(104,156,91)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M958,-59L843,-48L961,123Z",fill:"rgb(157,195,118)",stroke:"rgb(157,195,118)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M961,123L843,-48L732,85Z",fill:"rgb(159,197,119)",stroke:"rgb(159,197,119)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M339,-81L251,52L412,67Z",fill:"rgb(184,214,131)",stroke:"rgb(184,214,131)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1109,743L1157,632L911,669Z",fill:"rgb(97,152,88)",stroke:"rgb(97,152,88)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M702,937L807,940L840,787Z",fill:"rgb(94,150,86)",stroke:"rgb(94,150,86)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1031,488L1185,418L1114,263Z",fill:"rgb(122,172,101)",stroke:"rgb(122,172,101)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1157,632L1031,488L911,669Z",fill:"rgb(108,161,94)",stroke:"rgb(108,161,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1109,743L911,669L1042,849Z",fill:"rgb(92,149,85)",stroke:"rgb(92,149,85)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M219,284L126,526L334,412Z",fill:"rgb(165,203,123)",stroke:"rgb(165,203,123)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1042,849L911,669L840,787Z",fill:"rgb(97,152,88)",stroke:"rgb(97,152,88)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M412,67L251,52L390,225Z",fill:"rgb(178,210,128)",stroke:"rgb(178,210,128)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M219,284L39,299L126,526Z",fill:"rgb(171,206,125)",stroke:"rgb(171,206,125)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M339,-81L412,67L394,-127Z",fill:"rgb(184,214,131)",stroke:"rgb(184,214,131)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1025,913L1042,849L840,787Z",fill:"rgb(85,143,82)",stroke:"rgb(85,143,82)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M359,786L316,893L448,784Z",fill:"rgb(118,166,98)",stroke:"rgb(118,166,98)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M220,664L316,893L359,786Z",fill:"rgb(125,171,101)",stroke:"rgb(125,171,101)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M59,751L316,893L220,664Z",fill:"rgb(130,174,103)",stroke:"rgb(130,174,103)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1175,88L958,-59L961,123Z",fill:"rgb(147,187,112)",stroke:"rgb(147,187,112)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M126,526L88,598L220,664Z",fill:"rgb(150,191,114)",stroke:"rgb(150,191,114)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-34,647L88,598L-74,408Z",fill:"rgb(160,197,119)",stroke:"rgb(160,197,119)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M807,940L1025,913L840,787Z",fill:"rgb(87,145,83)",stroke:"rgb(87,145,83)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1042,849L1267,779L1109,743Z",fill:"rgb(81,139,79)",stroke:"rgb(81,139,79)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M394,-127L649,10L579,-197Z",fill:"rgb(178,210,128)",stroke:"rgb(178,210,128)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M394,-127L412,67L649,10Z",fill:"rgb(180,211,129)",stroke:"rgb(180,211,129)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M579,-197L649,10L843,-48Z",fill:"rgb(172,207,126)",stroke:"rgb(172,207,126)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1114,263L1175,88L961,123Z",fill:"rgb(137,181,108)",stroke:"rgb(137,181,108)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1301,123L1175,88L1114,263Z",fill:"rgb(130,175,104)",stroke:"rgb(130,175,104)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M702,937L841,1098L807,940Z",fill:"rgb(93,149,85)",stroke:"rgb(93,149,85)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M807,940L995,1096L1025,913Z",fill:"rgb(82,141,80)",stroke:"rgb(82,141,80)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M316,893L463,1040L448,784Z",fill:"rgb(108,159,93)",stroke:"rgb(108,159,93)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M96,95L219,284L251,52Z",fill:"rgb(182,213,130)",stroke:"rgb(182,213,130)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M96,95L39,299L219,284Z",fill:"rgb(180,211,129)",stroke:"rgb(180,211,129)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1267,779L1157,632L1109,743Z",fill:"rgb(86,143,82)",stroke:"rgb(86,143,82)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1267,779L1272,597L1157,632Z",fill:"rgb(88,144,82)",stroke:"rgb(88,144,82)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1157,632L1272,597L1185,418Z",fill:"rgb(102,156,90)",stroke:"rgb(102,156,90)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1185,418L1304,353L1114,263Z",fill:"rgb(119,169,99)",stroke:"rgb(119,169,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M881,-257L579,-197L843,-48Z",fill:"rgb(168,204,123)",stroke:"rgb(168,204,123)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1343,492L1304,353L1185,418Z",fill:"rgb(109,162,94)",stroke:"rgb(109,162,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M37,2L96,95L251,52Z",fill:"rgb(190,217,134)",stroke:"rgb(190,217,134)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M37,2L251,52L339,-81Z",fill:"rgb(190,217,133)",stroke:"rgb(190,217,133)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M88,598L59,751L220,664Z",fill:"rgb(143,185,110)",stroke:"rgb(143,185,110)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M223,1217L511,1116L463,1040Z",fill:"rgb(109,159,93)",stroke:"rgb(109,159,93)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-34,647L59,751L88,598Z",fill:"rgb(147,187,112)",stroke:"rgb(147,187,112)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M579,1205L841,1098L702,937Z",fill:"rgb(97,153,88)",stroke:"rgb(97,153,88)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M39,299L-19,326L126,526Z",fill:"rgb(173,208,126)",stroke:"rgb(173,208,126)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-3,40L-19,326L39,299Z",fill:"rgb(185,214,131)",stroke:"rgb(185,214,131)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1272,597L1343,492L1185,418Z",fill:"rgb(103,157,91)",stroke:"rgb(103,157,91)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M463,1040L511,1116L702,937Z",fill:"rgb(103,156,90)",stroke:"rgb(103,156,90)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M223,1217L463,1040L316,893Z",fill:"rgb(111,161,94)",stroke:"rgb(111,161,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1272,597L1517,630L1343,492Z",fill:"rgb(88,145,83)",stroke:"rgb(88,145,83)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1025,913L1103,973L1042,849Z",fill:"rgb(75,135,76)",stroke:"rgb(75,135,76)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M995,1096L1103,973L1025,913Z",fill:"rgb(76,135,77)",stroke:"rgb(76,135,77)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1103,973L1267,779L1042,849Z",fill:"rgb(73,133,75)",stroke:"rgb(73,133,75)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1175,88L1209,6L958,-59Z",fill:"rgb(144,185,110)",stroke:"rgb(144,185,110)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M881,-257L519,-265L579,-197Z",fill:"rgb(174,208,126)",stroke:"rgb(174,208,126)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1301,123L1209,6L1175,88Z",fill:"rgb(133,176,104)",stroke:"rgb(133,176,104)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1301,123L1114,263L1304,353Z",fill:"rgb(122,170,100)",stroke:"rgb(122,170,100)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M579,-197L519,-265L394,-127Z",fill:"rgb(180,211,129)",stroke:"rgb(180,211,129)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M142,-314L37,2L339,-81Z",fill:"rgb(191,218,134)",stroke:"rgb(191,218,134)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M881,-257L843,-48L958,-59Z",fill:"rgb(159,197,119)",stroke:"rgb(159,197,119)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1497,373L1301,123L1304,353Z",fill:"rgb(111,161,94)",stroke:"rgb(111,161,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-74,408L88,598L126,526Z",fill:"rgb(163,200,121)",stroke:"rgb(163,200,121)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-19,326L-74,408L126,526Z",fill:"rgb(173,207,126)",stroke:"rgb(173,207,126)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-185,276L-74,408L-19,326Z",fill:"rgb(178,210,128)",stroke:"rgb(178,210,128)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M972,-268L881,-257L958,-59Z",fill:"rgb(156,194,117)",stroke:"rgb(156,194,117)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M841,1098L995,1096L807,940Z",fill:"rgb(86,144,82)",stroke:"rgb(86,144,82)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M579,1205L995,1096L841,1098Z",fill:"rgb(91,148,85)",stroke:"rgb(91,148,85)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-34,647L-49,717L59,751Z",fill:"rgb(144,184,110)",stroke:"rgb(144,184,110)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M59,751L76,999L316,893Z",fill:"rgb(120,166,97)",stroke:"rgb(120,166,97)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-206,683L-49,717L-34,647Z",fill:"rgb(146,186,111)",stroke:"rgb(146,186,111)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M96,95L-3,40L39,299Z",fill:"rgb(188,216,133)",stroke:"rgb(188,216,133)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M213,-318L339,-81L394,-127Z",fill:"rgb(186,215,132)",stroke:"rgb(186,215,132)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M511,1116L579,1205L702,937Z",fill:"rgb(101,155,90)",stroke:"rgb(101,155,90)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M223,1217L579,1205L511,1116Z",fill:"rgb(107,158,92)",stroke:"rgb(107,158,92)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M37,2L-3,40L96,95Z",fill:"rgb(194,220,135)",stroke:"rgb(194,220,135)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M881,-257L972,-268L519,-265Z",fill:"rgb(166,202,123)",stroke:"rgb(166,202,123)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1187,-252L972,-268L958,-59Z",fill:"rgb(150,189,114)",stroke:"rgb(150,189,114)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M995,1096L1101,1098L1103,973Z",fill:"rgb(74,134,76)",stroke:"rgb(74,134,76)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1103,973L1359,915L1267,779Z",fill:"rgb(63,126,70)",stroke:"rgb(63,126,70)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1265,1149L1101,1098L995,1096Z",fill:"rgb(70,131,74)",stroke:"rgb(70,131,74)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-17,924L76,999L59,751Z",fill:"rgb(123,167,99)",stroke:"rgb(123,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M37,2L-37,6L-3,40Z",fill:"rgb(197,222,136)",stroke:"rgb(197,222,136)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-3,40L-185,276L-19,326Z",fill:"rgb(185,214,131)",stroke:"rgb(185,214,131)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-34,-280L-37,6L37,2Z",fill:"rgb(198,222,137)",stroke:"rgb(198,222,137)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-49,717L-17,924L59,751Z",fill:"rgb(134,176,105)",stroke:"rgb(134,176,105)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1343,492L1497,373L1304,353Z",fill:"rgb(103,157,91)",stroke:"rgb(103,157,91)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1517,630L1497,373L1343,492Z",fill:"rgb(92,148,85)",stroke:"rgb(92,148,85)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1517,630L1272,597L1267,779Z",fill:"rgb(79,138,79)",stroke:"rgb(79,138,79)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1265,1149L1359,915L1103,973Z",fill:"rgb(62,125,69)",stroke:"rgb(62,125,69)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-74,408L-206,683L-34,647Z",fill:"rgb(157,195,118)",stroke:"rgb(157,195,118)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-263,811L-165,986L-17,924Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-211,122L-185,276L-3,40Z",fill:"rgb(189,217,133)",stroke:"rgb(189,217,133)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1359,915L1423,842L1267,779Z",fill:"rgb(61,124,69)",stroke:"rgb(61,124,69)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1400,-97L1209,6L1301,123Z",fill:"rgb(132,174,103)",stroke:"rgb(132,174,103)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1400,-97L1187,-252L1209,6Z",fill:"rgb(135,177,105)",stroke:"rgb(135,177,105)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1209,6L1187,-252L958,-59Z",fill:"rgb(145,185,110)",stroke:"rgb(145,185,110)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M972,-268L213,-318L519,-265Z",fill:"rgb(177,210,128)",stroke:"rgb(177,210,128)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M519,-265L213,-318L394,-127Z",fill:"rgb(184,214,131)",stroke:"rgb(184,214,131)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1423,842L1517,630L1267,779Z",fill:"rgb(67,129,72)",stroke:"rgb(67,129,72)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1634,500L1539,340L1497,373Z",fill:"rgb(100,154,89)",stroke:"rgb(100,154,89)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1497,373L1539,340L1301,123Z",fill:"rgb(107,158,92)",stroke:"rgb(107,158,92)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M75,1118L223,1217L76,999Z",fill:"rgb(119,165,97)",stroke:"rgb(119,165,97)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M76,999L223,1217L316,893Z",fill:"rgb(116,163,95)",stroke:"rgb(116,163,95)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-132,1140L75,1118L76,999Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-300,485L-206,683L-74,408Z",fill:"rgb(163,200,121)",stroke:"rgb(163,200,121)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-17,924L-132,1140L76,999Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M213,-318L142,-314L339,-81Z",fill:"rgb(189,217,133)",stroke:"rgb(189,217,133)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1572,114L1400,-97L1301,123Z",fill:"rgb(122,167,98)",stroke:"rgb(122,167,98)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-185,276L-300,485L-74,408Z",fill:"rgb(175,208,127)",stroke:"rgb(175,208,127)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-37,6L-211,122L-3,40Z",fill:"rgb(194,220,135)",stroke:"rgb(194,220,135)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-196,-31L-211,122L-37,6Z",fill:"rgb(196,221,136)",stroke:"rgb(196,221,136)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M579,1205L1265,1149L995,1096Z",fill:"rgb(82,140,80)",stroke:"rgb(82,140,80)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1101,1098L1265,1149L1103,973Z",fill:"rgb(68,129,72)",stroke:"rgb(68,129,72)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1359,915L1425,1003L1423,842Z",fill:"rgb(51,117,64)",stroke:"rgb(51,117,64)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1265,1149L1425,1003L1359,915Z",fill:"rgb(55,119,66)",stroke:"rgb(55,119,66)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1423,842L1650,747L1517,630Z",fill:"rgb(66,128,72)",stroke:"rgb(66,128,72)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1539,340L1572,114L1301,123Z",fill:"rgb(112,161,94)",stroke:"rgb(112,161,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1634,500L1596,266L1539,340Z",fill:"rgb(102,155,90)",stroke:"rgb(102,155,90)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-211,122L-300,485L-185,276Z",fill:"rgb(180,212,129)",stroke:"rgb(180,212,129)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1400,-97L1344,-295L1187,-252Z",fill:"rgb(132,174,104)",stroke:"rgb(132,174,104)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1572,114L1451,-119L1400,-97Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1596,266L1572,114L1539,340Z",fill:"rgb(109,159,93)",stroke:"rgb(109,159,93)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-211,122L-258,-317L-300,485Z",fill:"rgb(192,218,134)",stroke:"rgb(192,218,134)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-34,-280L-196,-31L-37,6Z",fill:"rgb(198,222,137)",stroke:"rgb(198,222,137)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1596,266L1655,40L1572,114Z",fill:"rgb(115,162,95)",stroke:"rgb(115,162,95)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1517,630L1634,500L1497,373Z",fill:"rgb(91,148,85)",stroke:"rgb(91,148,85)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1685,683L1634,500L1517,630Z",fill:"rgb(80,139,79)",stroke:"rgb(80,139,79)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-263,811L-49,717L-206,683Z",fill:"rgb(141,181,108)",stroke:"rgb(141,181,108)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-263,811L-17,924L-49,717Z",fill:"rgb(132,175,104)",stroke:"rgb(132,175,104)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M75,1118L-160,1208L223,1217Z",fill:"rgb(122,166,98)",stroke:"rgb(122,166,98)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-300,485L-263,811L-206,683Z",fill:"rgb(149,188,113)",stroke:"rgb(149,188,113)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M142,-314L-34,-280L37,2Z",fill:"rgb(196,221,136)",stroke:"rgb(196,221,136)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1447,-192L1344,-295L1400,-97Z",fill:"rgb(126,169,100)",stroke:"rgb(126,169,100)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1187,-252L1344,-295L972,-268Z",fill:"rgb(141,182,109)",stroke:"rgb(141,182,109)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M972,-268L1344,-295L213,-318Z",fill:"rgb(163,200,121)",stroke:"rgb(163,200,121)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1451,-119L1447,-192L1400,-97Z",fill:"rgb(124,168,99)",stroke:"rgb(124,168,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1619,-249L1447,-192L1451,-119Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1661,955L1650,747L1423,842Z",fill:"rgb(54,119,66)",stroke:"rgb(54,119,66)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-165,986L-132,1140L-17,924Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-160,1208L-132,1140L-165,986Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1650,747L1685,683L1517,630Z",fill:"rgb(72,132,75)",stroke:"rgb(72,132,75)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1811,56L1655,40L1596,266Z",fill:"rgb(117,163,96)",stroke:"rgb(117,163,96)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1572,114L1655,40L1451,-119Z",fill:"rgb(123,167,98)",stroke:"rgb(123,167,98)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1818,296L1596,266L1634,500Z",fill:"rgb(103,156,90)",stroke:"rgb(103,156,90)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-132,1140L-160,1208L75,1118Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-263,811L-160,1208L-165,986Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1685,683L1772,582L1634,500Z",fill:"rgb(82,141,80)",stroke:"rgb(82,141,80)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1777,823L1772,582L1685,683Z",fill:"rgb(70,132,74)",stroke:"rgb(70,132,74)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1650,747L1777,823L1685,683Z",fill:"rgb(65,127,71)",stroke:"rgb(65,127,71)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1425,1003L1661,955L1423,842Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1540,1146L1661,955L1425,1003Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1265,1149L1540,1146L1425,1003Z",fill:"rgb(50,116,64)",stroke:"rgb(50,116,64)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1688,1178L1540,1146L1265,1149Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1902,443L1818,296L1634,500Z",fill:"rgb(99,154,89)",stroke:"rgb(99,154,89)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1655,40L1619,-249L1451,-119Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1447,-192L1619,-249L1344,-295Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1811,56L1742,-11L1655,40Z",fill:"rgb(122,166,98)",stroke:"rgb(122,166,98)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1742,-11L1619,-249L1655,40Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1787,981L1777,823L1661,955Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1661,955L1777,823L1650,747Z",fill:"rgb(55,120,66)",stroke:"rgb(55,120,66)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1772,582L1902,443L1634,500Z",fill:"rgb(91,147,84)",stroke:"rgb(91,147,84)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M142,-314L-258,-317L-34,-280Z",fill:"rgb(198,222,137)",stroke:"rgb(198,222,137)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-34,-280L-258,-317L-196,-31Z",fill:"rgb(198,222,137)",stroke:"rgb(198,222,137)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M-196,-31L-258,-317L-211,122Z",fill:"rgb(198,222,137)",stroke:"rgb(198,222,137)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M213,-318L-258,-317L142,-314Z",fill:"rgb(197,222,136)",stroke:"rgb(197,222,136)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1742,-11L1904,-96L1619,-249Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1818,296L1811,56L1596,266Z",fill:"rgb(111,161,94)",stroke:"rgb(111,161,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1818,296L1904,-96L1811,56Z",fill:"rgb(119,164,97)",stroke:"rgb(119,164,97)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1777,823L1902,443L1772,582Z",fill:"rgb(79,138,79)",stroke:"rgb(79,138,79)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1777,823L1892,1081L1902,443Z",fill:"rgb(61,124,69)",stroke:"rgb(61,124,69)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1688,1178L1787,981L1661,955Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1540,1146L1688,1178L1661,955Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M579,1205L1688,1178L1265,1149Z",fill:"rgb(66,128,72)",stroke:"rgb(66,128,72)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M223,1217L1688,1178L579,1205Z",fill:"rgb(89,146,84)",stroke:"rgb(89,146,84)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1811,56L1904,-96L1742,-11Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1902,443L1904,-96L1818,296Z",fill:"rgb(111,160,94)",stroke:"rgb(111,160,94)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1688,1178L1892,1081L1787,981Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1787,981L1892,1081L1777,823Z",fill:"rgb(48,115,63)",stroke:"rgb(48,115,63)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1904,-96L1858,-315L1619,-249Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1619,-249L1858,-315L1344,-295Z",fill:"rgb(124,167,99)",stroke:"rgb(124,167,99)",strokeWidth:"1.51"}),Be.createElement("path",{d:"M1344,-295L1858,-315L213,-318Z",fill:"rgb(143,183,110)",stroke:"rgb(143,183,110)",strokeWidth:"1.51"}))}}const pn={initialDelay:1e3,retryDelayMultiplier:1.5,maxDelay:3e5};function hn(e,t){const n=Object.assign(pn,t);let r=n.initialDelay;return new Promise(((t,o)=>{const a=()=>{r=Math.min(n.maxDelay,r*n.retryDelayMultiplier),window.setTimeout(i,r)},i=()=>{try{const n=e(a,t,o);n&&"function"==typeof n.catch&&n.catch(o)}catch(e){o(e)}};i()}))}var fn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};let mn;function gn(){return!!mn}function bn(e){mn=e}function yn(){if(!gn())throw"Need to call configure() before calling getAppRootUrl().";return["https://",mn.webServerFQDN,mn.appRoot].join("")}function An(e,t,n){const r={method:e,headers:{},signal:n};return t&&(r.credentials="include"),function(e){if(!gn())throw"Need to call configure() before calling addCsrfHeader().";const t=yt.CookieHelpers.getCookie(mn.csrfTokenCookieName);t&&(e.headers[mn.csrfTokenHeaderName]=t)}(r),r}function vn(e,t,n,r){const o=An(e,n,r);return o.headers["Content-Type"]="application/json",o.body=JSON.stringify(t),o}function xn(e,t){return fn(this,void 0,void 0,(function*(){return yield fetch(e,t)}))}function kn(e,t,n){return fn(this,void 0,void 0,(function*(){return yield hn(((n,r,o)=>fn(this,void 0,void 0,(function*(){const a=yield xn(e,t);a.ok?r(a):a.status<500?o(yield function(e){return fn(this,void 0,void 0,(function*(){return{status:e.status,statusText:e.statusText,text:yield e.text()}}))}(a)):n()}))),n)}))}var wn;!function(e){e.startRecorder="record-start-click",e.startRecorderError="record-start-error",e.endRecorder="record-end-click",e.newRecording="record-new-click",e.sendLogs="send-logs-click",e.smartCamera="smart-camera-click",e.backgroundBlur="background-blur-click",e.addDisplay="add-display-click",e.addDisplayFailure="add-display-cancelled-or-failed",e.videoMenu="open-video-menu-click",e.audioMenu="open-audio-menu-click",e.settingsOpen="settings-open-click",e.redoSession="redo-button-click",e.redoSessionConfirm="redo-confirm-click",e.viewFolder="folder-navigate-to-click",e.editSession="edit-click",e.viewSession="view-click",e.manageAccess="manage-access-click",e.shareSession="share-send-click",e.deviceAccessed="device-accessed",e.deviceDenied="device-denied",e.panoptoUpload="panopto-upload-click",e.panoptoView="panopto-view-click",e.panoptoTokenError="panopto-upload-get-token-error",e.panoptoParseTokenError="panopto-upload-parse-token-error",e.panoptoFolderError="panopto-upload-folder-error",e.panoptoCreateError="panopto-upload-create-error",e.panoptoStartError="panopto-upload-start-error",e.panoptoAuthError="panopto-upload-authentication-error",e.youtubeUpload="youtube-upload-click",e.youtubeView="youtube-view-click",e.youtubeUploadError="youtube-upload-error",e.youtubeLibraryError="youtube-upload-library-error",e.youtubeProcessingError="youtube-upload-processing-error",e.classroomUpload="classroom-upload-click",e.classroomView="classroom-view-click",e.classroomListError="classroom-upload-list-error",e.classroomLoadError="classroom-upload-load-error",e.classroomSelectError="classroom-upload-select-error",e.classroomUploadError="classroom-upload-error",e.classroomCreateError="classroom-upload-create-error",e.classroomProcessingError="classroom-upload-processing-error",e.download="download-click"}(wn||(wn={}));var Cn=n(176),Sn={insert:"head",singleton:!1},On=(He()(Cn.a,Sn),Cn.a.locals,function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i});class En extends Be.Component{openLink(e){window.open(e),this.props.onToggleOpen(!1)}handleSendLogsActivate(){this.props.onUploadLogsClick(),this.props.onToggleOpen(!1)}render(){const{t:e,isExpress:t,enableLogsUpload:n,enableLogsDownload:r,onDownloadLogsClick:o}=this.props,a=[];this.props.isOpen&&a.push("active");const i=Be.createElement("div",{className:"help-button "+a.join(" ")},Be.createElement("i",{className:"material-icons","aria-hidden":"true"},"help_outline"));return Be.createElement("div",{className:"help-menu"},Be.createElement(jt,{title:e("Title_HelpPopupMenu"),menuButtonContents:i,isOpen:this.props.isOpen,onToggleOpen:this.props.onToggleOpen},t&&Be.createElement(Be.Fragment,null,Be.createElement(At,{onActivate:()=>this.openLink(En.expressHelpLinkUrl)},Be.createElement("span",null,e("Text_HelpLink"))),Be.createElement(At,{onActivate:()=>this.openLink(En.expressFeedbackLinkUrl)},Be.createElement("span",null,e("Text_FeedbackLink")))),n&&Be.createElement(At,{onActivate:this.handleSendLogsActivate},Be.createElement("span",null,e("Text_UploadLogsLink"))),r&&Be.createElement(At,{onActivate:o},Be.createElement("span",null,e("Text_DownloadLogsLink")))))}}En.expressHelpLinkUrl="https://www.panopto.com/express-help/",En.expressFeedbackLinkUrl="mailto:expressfeedback@panopto.com",On([Ze],En.prototype,"handleSendLogsActivate",null);var In=gt("webrecorder")(En);class Tn{constructor(e,t){this.videoId=e,this.onProgressUpdate=t,this.pollForVideoStatus()}pollForVideoStatus(){gapi.client.request({path:"/youtube/v3/videos",params:{part:"status,player",id:this.videoId}}).then((e=>{var t;if(e.error)yt.Logging.Logger.error(e.error),setTimeout((()=>this.pollForVideoStatus()),Tn.STATUS_POLLING_INTERVAL_MILLIS);else{switch(null===(t=e.result.items[0])||void 0===t?void 0:t.status.uploadStatus){case void 0:case"uploaded":setTimeout((()=>this.pollForVideoStatus()),Tn.STATUS_POLLING_INTERVAL_MILLIS);break;case"processed":this.onProgressUpdate({message:"YouTube video ready to play",canView:!0,canEdit:!0});break;default:this.onProgressUpdate({message:"Upload to YouTube failed",canView:!0,canEdit:!0})}}}))}}Tn.STATUS_POLLING_INTERVAL_MILLIS=6e4;class Nn extends Be.Component{render(){return Be.createElement("div",{className:"progress-track"},Be.createElement("div",{className:"progress-bar",style:{width:this.props.percentComplete+"%"}}))}}var Rn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class jn extends Be.Component{constructor(e){super(e),this.containerRef=Be.createRef(),this.state={isFullscreened:!1}}componentDidMount(){const e=new Ft.Controllers.TimelineController(this.props.previewDelivery,void 0,this.handleTimelineStateChanged,{});e.start(0),e.pause(),e.playerLayoutMode(this.props.initialPlayerLayoutMode),document.addEventListener("fullscreenchange",this.handleDocumentFullscreenEvent),this.setState({timelineController:e})}handleTimelineStateChanged(e){this.setState({timelineState:e})}handleCycleSecondaryRequested(){this.state.timelineController.cycleSecondary()}handleLayoutRequested(e){this.state.timelineController.playerLayoutMode(e)}handlePlayRequested(e){e?this.state.timelineController.pause():this.state.timelineController.resume()}handleSeekRequested(e){this.state.timelineController.seek(e)}handleMuteRequested(e){this.state.timelineController.muted(e)}handleVolumeRequested(e){this.state.timelineController.volume(e)}handleCaptionRequested(e){this.state.timelineController.captionVisible(e)}handlePlaybackRateRequested(e){this.state.timelineController.playbackRate(e)}handleFullscreenRequested(){yt.Helpers.toggleFullscreen(this.containerRef.current)}handleDocumentFullscreenEvent(){this.setState({isFullscreened:yt.Helpers.getFullscreenElement()===this.containerRef.current})}render(){const{t:e}=this.props,{timelineState:t,isFullscreened:n}=this.state;return Be.createElement("div",{className:"preview-video",ref:this.containerRef},Be.createElement("div",{id:"player"}),Be.createElement("div",{id:"pipPlayer"}),Be.createElement("div",{id:"gridPlayers"}),Be.createElement("div",{id:"captionPlayer"}),Be.createElement("div",{id:"bufferingIndicator"}),t&&Be.createElement(Ft.Controls.TimelineControls,{resources:{Embed_Tooltip_LayoutSwap:e("Embed_Tooltip_LayoutSwap"),Embed_Tooltip_LayoutCycleSecondary:e("Embed_Tooltip_LayoutCycleSecondary"),Embed_Tooltip_LayoutNormal:e("Embed_Tooltip_LayoutNormal"),Embed_Tooltip_LayoutPrimaryOnly:e("Embed_Tooltip_LayoutPrimaryOnly"),Embed_Tooltip_LayoutSecondaryOnly:e("Embed_Tooltip_LayoutSecondaryOnly"),Embed_Tooltip_LayoutSideBySide:e("Embed_Tooltip_LayoutSideBySide"),Embed_Play:e("Embed_Play"),Embed_SkipBackTenSeconds:e("Embed_SkipBackTenSeconds"),Embed_SkipForwardTenSeconds:e("Embed_SkipForwardTenSeconds"),Embed_Muted:e("Embed_Muted"),Embed_Unmuted:e("Embed_Unmuted"),Embed_Tooltip_Download:e("Embed_Tooltip_Download"),Embed_Tooltip_FullViewer:e("Embed_Tooltip_FullViewer"),Embed_Tooltip_HideCaptions:e("Embed_Tooltip_HideCaptions"),Embed_Tooltip_ShowCaptions:e("Embed_Tooltip_ShowCaptions"),Embed_Tooltip_DisableAudioDescriptions:e("Embed_Tooltip_DisableAudioDescriptions"),Embed_Tooltip_EnableAudioDescriptions:e("Embed_Tooltip_EnableAudioDescriptions"),Embed_Tooltip_Fullscreen:e("Embed_Tooltip_Fullscreen"),Embed_Tooltip_FullscreenExit:e("Embed_Tooltip_FullscreenExit"),Embed_Tooltip_SelectPlaybackSpeed:e("Embed_Tooltip_SelectPlaybackSpeed"),Embed_SkipForwardLiveDisabled:e("Embed_SkipForwardLiveDisabled"),Embed_GoToLiveIsLive:e("Embed_GoToLiveIsLive"),Embed_GoToLiveIsNotLive:e("Embed_GoToLiveIsNotLive")},timelineState:t,alwaysShowControls:!1,useMobileLayout:!1,showDownloadButton:!1,showViewerButton:!1,showCaptionButton:!1,showAudioDescriptionButton:!1,showFullscreenButton:yt.Helpers.fullscreenEnabled,isCurrentlyOnFullscreen:yt.Helpers.fullscreenEnabled&&n,seekAndVspDisabled:!1,onCycleSecondaryRequested:this.handleCycleSecondaryRequested,onLayoutRequested:this.handleLayoutRequested,onPlayRequested:this.handlePlayRequested,onSeekRequested:this.handleSeekRequested,onMuteRequested:this.handleMuteRequested,onVolumeRequested:this.handleVolumeRequested,onDownloadRequested:()=>{},onViewerRequested:()=>{},onCaptionRequested:this.handleCaptionRequested,onAudioDescriptionRequested:()=>{},onPlaybackRateRequested:this.handlePlaybackRateRequested,onFullscreenRequested:this.handleFullscreenRequested,sliderColors:{trackPlayedColor:"rgba(255, 255, 255, 0.8)",trackPlayedActiveColor:"#FFF",trackBackgroundColor:"transparent",trackBorderColor:"rgba(255, 255, 255, 0.3)",labelFontColor:"#FFF",labelBackgroundColor:"rgba(0, 0, 0, 0.8)"}}))}}Rn([Ze],jn.prototype,"handleTimelineStateChanged",null),Rn([Ze],jn.prototype,"handleCycleSecondaryRequested",null),Rn([Ze],jn.prototype,"handleLayoutRequested",null),Rn([Ze],jn.prototype,"handlePlayRequested",null),Rn([Ze],jn.prototype,"handleSeekRequested",null),Rn([Ze],jn.prototype,"handleMuteRequested",null),Rn([Ze],jn.prototype,"handleVolumeRequested",null),Rn([Ze],jn.prototype,"handleCaptionRequested",null),Rn([Ze],jn.prototype,"handlePlaybackRateRequested",null),Rn([Ze],jn.prototype,"handleFullscreenRequested",null),Rn([Ze],jn.prototype,"handleDocumentFullscreenEvent",null);var Bn=gt("shared")(jn),_n=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Dn extends Be.Component{setupVideoElementListener(e){e&&(e.srcObject=this.props.previewBlob,e.addEventListener("loadedmetadata",(()=>{if(e.duration===1/0){yt.Logging.Logger.info("Video stream duration is Infinity. Fixing to actual duration.");const t=()=>{e.removeEventListener("seeked",t),e.currentTime=.001,e.currentTime=0};e.addEventListener("seeked",t),e.currentTime=Number.MAX_SAFE_INTEGER}})))}render(){return Be.createElement("div",{className:"preview-video"},Be.createElement("video",{id:"previewVideo",ref:this.setupVideoElementListener,width:"1920",height:"1080",playsInline:!0,controls:!0,controlsList:"nodownload"}))}}_n([Ze],Dn.prototype,"setupVideoElementListener",null);class Mn{constructor(){this.interval=1e3,this.maxInterval=6e4}retry(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()}reset(){this.interval=1e3}nextInterval_(){const e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)}getRandomInt_(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}var $n=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Pn{constructor(e){const t=()=>{};if(this.blob=e.blob,this.contentType=e.contentType||this.blob.type||"application/octet-stream",this.metadata=e.metadata,this.token=e.token,this.onComplete=e.onComplete||t,this.onProgress=e.onProgress||t,this.onError=e.onError||t,this.offset=e.offset||0,this.chunkSize=e.chunkSize||0,this.retryHandler=new Mn,this.url=e.url,!this.url){const t=e.params||{};t.uploadType="resumable",this.url=this.buildUrl(e.fileId,t,e.baseUrl)}this.httpMethod=e.fileId?"PUT":"POST"}upload(){const e=new XMLHttpRequest;e.open(this.httpMethod,this.url,!0),e.setRequestHeader("Authorization","Bearer "+this.token),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-Upload-Content-Length",this.blob.size.toString()),e.setRequestHeader("X-Upload-Content-Type",this.contentType),e.onload=e=>{const t=e.target;if(t.status<400){const e=t.getResponseHeader("Location");this.url=e,this.sendFile()}else this.onUploadError(e)},e.onerror=this.onUploadError,e.send(JSON.stringify(this.metadata))}sendFile(){let e=this.blob,t=this.blob.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.blob.size)),e=this.blob.slice(this.offset,t));const n=new XMLHttpRequest;n.open("PUT",this.url,!0),n.setRequestHeader("Content-Type",this.contentType),n.setRequestHeader("Content-Range","bytes "+this.offset+"-"+(t-1)+"/"+this.blob.size),n.setRequestHeader("X-Upload-Content-Type",this.blob.type),n.upload&&n.upload.addEventListener("progress",this.onProgress),n.onload=this.onContentUploadSuccess,n.onerror=this.onContentUploadError,n.send(e)}resume(){const e=new XMLHttpRequest;e.open("PUT",this.url,!0),e.setRequestHeader("Content-Range","bytes */"+this.blob.size),e.setRequestHeader("X-Upload-Content-Type",this.blob.type),e.upload&&e.upload.addEventListener("progress",this.onProgress),e.onload=this.onContentUploadSuccess,e.onerror=this.onContentUploadError,e.send()}extractRange(e){const t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)}onContentUploadSuccess(e){const t=e.target;200==e.target.status||201==e.target.status?this.onComplete(t.response):308==e.target.status&&(this.extractRange(e.target),this.retryHandler.reset(),this.sendFile())}onContentUploadError(e){const t=e.target;e.target.status&&e.target.status<500?this.onError(t.response):this.retryHandler.retry(this.resume)}onUploadError(e){const t=e.target;this.onError(t.response)}buildQuery(e){return e=e||{},Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}buildUrl(e,t,n){let r=n;e&&(r+=e);const o=this.buildQuery(t);return o&&(r+="?"+o),r}}$n([Ze],Pn.prototype,"upload",null),$n([Ze],Pn.prototype,"resume",null),$n([Ze],Pn.prototype,"onContentUploadSuccess",null),$n([Ze],Pn.prototype,"onContentUploadError",null),$n([Ze],Pn.prototype,"onUploadError",null);var Ln=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Fn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class zn{constructor(e,t,n){this.accessToken=e,this.name=t,this.onUploadProgress=n,this.dataToPush=[],this.uploadCompleted=!1}get youTubeId(){if(void 0!==this._youTubeId)return this._youTubeId;throw"youTubeId is undefined"}appendDataToFile(e,t){return Fn(this,void 0,void 0,(function*(){void 0===this.filename&&(this.filename=e.fileName),this.filename===e.fileName&&this.dataToPush.push(t)}))}complete(){return this.startClassroomUpload(this.accessToken).then((e=>{this._youTubeId=e.youTubeId}))}getStatus(){throw new Error("Method not implemented.")}isUploadCompleted(){return this.uploadCompleted}deleteUpload(){throw new Error("Method not implemented.")}handleUploaderError(e,t){var n,r,o;try{const t=JSON.parse(e);(null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.errors)&&(null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.errors.length)>0&&"youtubeSignupRequired"===(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.errors[0].reason)&&(e="youtubeSignupRequired")}catch(e){}t(e)}handleUploaderProgress(e){this.onUploadProgress({bytesEnqueued:e.total,bytesSent:e.loaded})}handleUploaderComplete(e,t){this.uploadCompleted=!0;t({youTubeId:JSON.parse(e).id})}startClassroomUpload(e){return new Promise(((t,n)=>{const r=new Blob(this.dataToPush,{type:"video/webm"}),o={snippet:{title:this.name},status:{privacyStatus:"private"}};new Pn({baseUrl:"https://www.googleapis.com/upload/youtube/v3/videos",blob:r,token:e,metadata:o,params:{part:Object.keys(o).join(",")},onError:e=>this.handleUploaderError(e,n),onProgress:this.handleUploaderProgress,onComplete:e=>this.handleUploaderComplete(e,t)}).upload()}))}}Ln([Ze],zn.prototype,"handleUploaderError",null),Ln([Ze],zn.prototype,"handleUploaderProgress",null),Ln([Ze],zn.prototype,"handleUploaderComplete",null);var Un,Wn=n(177),Vn={insert:"head",singleton:!1};He()(Wn.a,Vn),Wn.a.locals;!function(e){e[e.NotSent=0]="NotSent",e[e.Sending=1]="Sending",e[e.Success=2]="Success",e[e.Failure=3]="Failure"}(Un||(Un={}));var qn,Gn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.manageAccess="manage-access-click",e.shareSession="share-send-click"}(qn||(qn={}));class Hn extends Be.Component{constructor(e){super(e),this.handleRecipientInputChanged=()=>{const e=this.shareControl.hasChanges()&&!this.shareControl.isPending();this.setState({sendEnabled:e})},this.handleSendClick=()=>{this.shareControl.passesValidation()&&(this.setState({sendEnabled:!1}),this.props.sendShareGoogleAnalyticsEvent(qn.shareSession),this.shareControl.save((()=>{this.setState({showSendSuccess:!0}),this.successCloseTimeout=window.setTimeout(this.resetState,Hn.successMessageDuration)})))},this.state={sendEnabled:!1,showSendSuccess:!1,emailStatus:Un.NotSent,showDropboxMessage:!1}}componentDidMount(){this.props.sessionId&&this.instantiateShareControl(this.props.sessionId),this.props.sharingIsBlocked&&Panopto.GoogleAnalytics.sendProEvent(yt.ProVerificationActions.ShareBlocked,yt.ProGAEventCategories.Verification,"capture")}componentWillUnmount(){window.clearTimeout(this.successCloseTimeout)}componentDidUpdate(e){e.sharingIsBlocked&&!this.props.sharingIsBlocked&&this.props.sessionId&&this.instantiateShareControl(this.props.sessionId)}instantiateShareControl(e){const t=$.Deferred();Panopto.Core.ServiceInterface.Rest.SessionAccessItems.getMany([e],t.resolve),t.then((e=>{if(!e[0].parent.isDropbox||this.props.dropboxContentSharingEnabled){const t=e[0].shareOptions[0];this.shareControl=Panopto.UI.ShareControl($(this.shareControlContainer),e,{isFolder:!1,sendShareEmailsByDefault:!0,includeEventsCheckboxSupported:!!this.props.isMobileApp,toggleSubmit:this.handleRecipientInputChanged,roles:[t]}),$(".ui-autocomplete-input").autocomplete("option","position",{my:"left top",at:"left bottom+3",of:".share-add-input"}),this.props.isMobileApp&&$(".tagit-autocomplete.ui-autocomplete").addClass("mobile-app")}else this.setState({showDropboxMessage:!0})}))}handleManageAccessClick(){var e;this.props.sendShareGoogleAnalyticsEvent(qn.manageAccess);const t=Hn.vcmsSharePageUrlTemplate.replace("{0}",this.props.sessionId);this.props.isMobileApp?null===(e=window.ReactNativeWebView)||void 0===e||e.postMessage(t):window.open(t,"_blank","noopener,noreferrer")}resetState(){this.setState({showSendSuccess:!1}),this.shareControl.cancel(),$("#shareControlContainer .share-note-input").val("").trigger("blur")}handleSendEmailClick(){Panopto.GoogleAnalytics.sendProEvent(yt.ProVerificationActions.VerificationResend,yt.ProGAEventCategories.Verification),this.setState({emailStatus:Un.Sending},(()=>{Panopto.Core.ServiceInterface.Rest.Users.sendVerificationEmail(this.props.sessionId,(()=>{this.setState({emailStatus:Un.Success})}),(()=>{this.setState({emailStatus:Un.Failure}),Panopto.GoogleAnalytics.sendProEvent(yt.ProVerificationActions.VerificationResendFailed,yt.ProGAEventCategories.Verification)}))}))}emailStatusString(){const{resources:e}=this.props;let t="";switch(this.state.emailStatus){case Un.Sending:t=e.Components_Share_SendingVerificationEmailLabel;break;case Un.Success:t=e.Components_Share_SentVerificationEmailLabel;break;case Un.Failure:t=e.Components_Share_ErrorVerificationEmailLabel}return t}render(){const{resources:e}=this.props,t=this.state.emailStatus===Un.Success||this.state.emailStatus===Un.Sending;return this.state.showDropboxMessage?Be.createElement("div",{className:"dropbox-message"},e.Components_Share_DropboxSharingDisabled):Be.createElement("div",{className:Je()({"share-container":!0,"show-success":this.state.showSendSuccess,"mobile-app":this.props.isMobileApp})},Be.createElement("div",{className:"center-controls"},Be.createElement("div",{className:"heading"},e.Components_Share_ShareThisVideo),Be.createElement("div",{id:"shareControlContainer",ref:e=>this.shareControlContainer=e},this.props.sharingIsBlocked&&Be.createElement(Be.Fragment,null,Be.createElement("div",null,e.Components_Share_BlockedSharingLine1),Be.createElement("div",null,e.Components_Share_BlockedSharingLine2),Be.createElement("div",{className:"email-status"},this.emailStatusString()))),Be.createElement("div",{className:"button-block"},!this.props.sharingIsBlocked&&Be.createElement(At,{className:"manage-access-button button",title:e.Components_Share_ManageAccessButtonTooltip,onActivate:this.handleManageAccessClick},Be.createElement(Nt,{iconCode:"lock",text:e.Components_Share_ManageAccess})),this.props.sharingIsBlocked&&Be.createElement(At,{className:"manage-access-button button",onActivate:this.handleSendEmailClick,disabled:t},Be.createElement(Nt,{iconCode:"email",text:e.Components_Share_ResendVerificationEmailButtonLabel})),this.props.isMobileApp&&this.state.sendEnabled&&Be.createElement(At,{className:"cancel-button button",onActivate:()=>this.resetState()},Be.createElement("div",{className:"label"},e.Components_Share_Cancel)),Be.createElement(At,{className:"send-button button",onActivate:this.handleSendClick,disabled:!this.state.sendEnabled},Be.createElement(Nt,{iconCode:"send",text:e.Components_Share_Send})),!this.props.isMobileApp&&this.state.sendEnabled&&Be.createElement(At,{className:"cancel-button button",onActivate:()=>this.resetState()},Be.createElement("div",{className:"label"},e.Components_Share_Cancel)))),Be.createElement("div",{className:"send-success-message"},e.Components_Share_VideoShared))}}Hn.vcmsSharePageUrlTemplate="Sessions/List.aspx?modalPage=SessionShare&id={0}",Hn.successMessageDuration=2e3,Gn([Ze],Hn.prototype,"handleManageAccessClick",null),Gn([Ze],Hn.prototype,"resetState",null),Gn([Ze],Hn.prototype,"handleSendEmailClick",null);var Kn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Yn extends Be.Component{sendShareGoogleAnalytics(e){const t=e;this.props.sendGoogleAnalyticsEvent(t)}generateShareResourceStrings(){return{Components_Share_ManageAccessButtonTooltip:this.props.t("Components_Share_ManageAccessButtonTooltip"),Components_Share_DropboxSharingDisabled:this.props.t("Components_Share_DropboxSharingDisabled"),Components_Share_ShareThisVideo:this.props.t("Components_Share_ShareThisVideo"),Components_Share_ManageAccess:this.props.t("Components_Share_ManageAccess"),Components_Share_Send:this.props.t("Components_Share_Send"),Components_Share_Cancel:this.props.t("Components_Share_Cancel"),Components_Share_VideoShared:this.props.t("Components_Share_VideoShared"),Components_Share_ResendVerificationEmailButtonLabel:this.props.t("Components_Share_ResendVerificationEmailButtonLabel"),Components_Share_SendingVerificationEmailLabel:this.props.t("Components_Share_SendingVerificationEmailLabel"),Components_Share_SentVerificationEmailLabel:this.props.t("Components_Share_SentVerificationEmailLabel"),Components_Share_ErrorVerificationEmailLabel:this.props.t("Components_Share_ErrorVerificationEmailLabel"),Components_Share_BlockedSharingLine1:this.props.t("Components_Share_BlockedSharingLine1"),Components_Share_BlockedSharingLine2:this.props.t("Components_Share_BlockedSharingLine2")}}render(){return Be.createElement(Hn,{sessionId:this.props.sessionId,sharingIsBlocked:this.props.sharingIsBlocked,resources:this.generateShareResourceStrings(),sendShareGoogleAnalyticsEvent:this.sendShareGoogleAnalytics,dropboxContentSharingEnabled:this.props.dropboxContentSharingEnabled})}}Kn([Ze],Yn.prototype,"sendShareGoogleAnalytics",null);var Xn=gt("shared")(Yn),Zn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class Jn{constructor(e,t,n){this.accessToken=e,this.name=t,this.onUploadProgress=n,this.dataToPush=[],this.uploadCompleted=!1}get youTubeId(){if(void 0!==this._youTubeId)return this._youTubeId;throw"youTubeId is undefined"}appendDataToFile(e,t){return Qn(this,void 0,void 0,(function*(){void 0===this.filename&&(this.filename=e.fileName),this.filename===e.fileName&&this.dataToPush.push(t)}))}complete(){return this.startYouTubeUpload(this.accessToken).then((e=>{this._youTubeId=e.youTubeId}))}getStatus(){throw new Error("Method not implemented.")}isUploadCompleted(){return this.uploadCompleted}deleteUpload(){throw new Error("Method not implemented.")}handleUploaderError(e,t){var n,r,o;try{const t=JSON.parse(e);(null===(r=null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.errors)||void 0===r?void 0:r.length)>0&&"youtubeSignupRequired"===(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.errors[0].reason)&&(e="youtubeSignupRequired")}catch(e){}t(e)}handleUploaderProgress(e){this.onUploadProgress({bytesEnqueued:e.total,bytesSent:e.loaded})}handleUploaderComplete(e,t){this.uploadCompleted=!0;t({youTubeId:JSON.parse(e).id})}startYouTubeUpload(e){return new Promise(((t,n)=>{const r=new Blob(this.dataToPush,{type:"video/webm"}),o={snippet:{title:this.name},status:{privacyStatus:"private"}};new Pn({baseUrl:"https://www.googleapis.com/upload/youtube/v3/videos",blob:r,token:e,metadata:o,params:{part:Object.keys(o).join(",")},onError:e=>this.handleUploaderError(e,n),onProgress:this.handleUploaderProgress,onComplete:e=>this.handleUploaderComplete(e,t)}).upload()}))}}Zn([Ze],Jn.prototype,"handleUploaderError",null),Zn([Ze],Jn.prototype,"handleUploaderProgress",null),Zn([Ze],Jn.prototype,"handleUploaderComplete",null);var er=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},tr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class nr extends Be.Component{constructor(e){super(e),this.state={uploadedOrDownloaded:!1,uploaded:!1,editEnabled:!1,viewEnabled:!1,isHelpPopupVisible:!1,shareExpanded:!1,dropboxShareHidden:!1,progressMessage:e.standAloneMode?e.t("InitialStandaloneProgressMessage"):e.t("PanoptoUploadingMessage"),progressSubhead:e.standAloneMode?e.t("InitialStandaloneProgressSubhead"):e.t("PanoptoUploadingSubhead"),showProgressBar:!e.standAloneMode,packagingProgress:0,webEncodeProgress:0,panoptoUploading:!1,panoptoProcessing:!1,youTubeUploading:!1,youTubeProcessing:!1,classroomUploading:!1,classroomProcessing:!1,isCourseChooserActive:!1}}get currentRecording(){return this.props.recordings.length?this.props.recordings[this.props.recordings.length-1]:void 0}get isUploading(){const{uploaded:e,panoptoUploading:t,youTubeUploading:n,classroomUploading:r}=this.state;return this.props.standAloneMode&&(t||n||r)||!this.props.standAloneMode&&!e}get isRecordingSaved(){return!this.isUploading&&(!this.props.standAloneMode||this.state.uploadedOrDownloaded)}componentDidMount(){const{standAloneMode:e,isMobile:t}=this.props;e&&window.addEventListener("beforeunload",this.handleBeforeUnload),t&&this.element&&(this.element.style.height=window.innerHeight+"px")}componentWillUnmount(){this.updateTaskStatusAbortController&&this.updateTaskStatusAbortController.abort(),window.clearTimeout(this.uploadCompleteTimeout),window.removeEventListener("beforeunload",this.handleBeforeUnload)}componentDidUpdate(e){const{t:t}=this.props;(!!this.renderedRecording!=!!this.currentRecording||this.currentRecording&&this.currentRecording.getId()!==this.renderedRecording.getId())&&(this.setState({uploaded:!1,editEnabled:!1,viewEnabled:!1,progressMessage:this.props.standAloneMode?t("InitialStandaloneProgressMessage"):t("PanoptoUploadingMessage"),progressSubhead:this.props.standAloneMode?t("InitialStandaloneProgressSubhead"):t("PanoptoUploadingSubhead"),showProgressBar:!this.props.standAloneMode,shareExpanded:!1}),this.renderedRecording=this.currentRecording),this.props.standAloneMode&&this.props.isVisible&&!e.isVisible&&this.setState({uploadedOrDownloaded:!1,panoptoUploading:!1,panoptoProcessing:!1,panoptoUrl:void 0,youTubeUploading:!1,youTubeProcessing:!1,youTubeId:void 0,youTubeUrl:void 0,classroomUploading:!1,classroomProcessing:!1,classroomUrl:void 0,throbButton:void 0}),this.props.isVisible&&!this.state.uploaded&&this.currentRecording&&this.currentRecording.isUploaded()&&!this.props.standAloneMode&&(this.setState({uploaded:!0,progressMessage:t("UploadCompleteMessage"),progressSubhead:t("UploadCompleteSubhead")}),this.uploadCompleteTimeout=window.setTimeout((()=>{this.setState({progressMessage:t("PanoptoProcessingMessage")})}),5e3),this.updateTaskStatus(this.props.panoptoConstants.webServerFQDN,this.props.currentSessionId))}canStartUpload(){return!(this.isUploading||this.state.panoptoProcessing||this.state.youTubeProcessing||this.state.classroomProcessing)}setStateWithRecordingCheck(e,t){this.currentRecording.getId()===e&&this.setState(t)}handleBeforeUnload(e){const{isVisible:t}=this.props,{uploadedOrDownloaded:n}=this.state;(t&&!n||this.isUploading)&&(e.preventDefault(),e.returnValue=!0)}updateTaskStatus(e,t){return tr(this,void 0,void 0,(function*(){const{TaskState:n}=Panopto.Core.ServiceInterface.Objects,{standAloneMode:r,t:o}=this.props,{taskStatusRefreshIntervalMsec:a}=this.props.panoptoConstants.features,i={initialDelay:a,retryDelayMultiplier:1,maxDelay:a};this.updateTaskStatusAbortController&&yt.Logging.Logger.warning("PostRecord.updateTaskStatus: updateTaskStatusAbortController is not undefined. This indicates there's an unaborted task status update that is still running. Please verify all code paths aborts task status update if recording changes."),this.updateTaskStatusAbortController=new AbortController;const s=this.updateTaskStatusAbortController.signal;try{yield hn(((r,a,i)=>tr(this,void 0,void 0,(function*(){const c=`https://${e}/Panopto/Services/Data.svc/GetSessionStatus_Capture`;let u;try{u=yield fetch(c,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPublicId:t}),signal:s})}catch(e){yt.Logging.Logger.warning("PostRecord.updateTaskStatus: failed to fetch.",e)}if(null==u?void 0:u.ok){const e=yield u.json(),{editEnabled:t}=this.state,s=e.d;s.PackagingStatus===n.Unprocessed&&this.setState((e=>({packagingProgress:Math.min(e.packagingProgress+5,50)}))),s.PackagingStatus===n.Complete&&s.WebEncodeStatus===n.Unprocessed&&this.setState((e=>({webEncodeProgress:Math.min(e.webEncodeProgress+5,50)}))),s.PackagingStatus!==n.Complete||t||(this.setState({editEnabled:!0,progressMessage:o("PanoptoEditReadyMessage"),packagingProgress:100}),window.setTimeout((()=>this.setState({progressMessage:o("PanoptoEditReady2Message")})),8e3)),s.WebEncodeStatus===n.Complete?a():s.PackagingStatus===n.PermanentFailure||s.WebEncodeStatus===n.PermanentFailure?i(s):r()}else r()}))),i),this.setState({viewEnabled:!0,progressMessage:o("PanoptoViewReadyMessage"),progressSubhead:"",webEncodeProgress:100}),r&&this.setState({panoptoProcessing:!1,panoptoUrl:`https://${e}/Panopto/Pages/Viewer.aspx?id=${t}`,throbButton:"panopto"})}catch(e){e instanceof DOMException&&e.code===e.ABORT_ERR?yt.Logging.Logger.info("PostRecord.updateTaskStatus: task status aborted."):(this.setState({progressMessage:o("PanoptoProcessingErrorMessage"),progressSubhead:o(r?"PanoptoProcessingErrorSubheadStandalone":"PanoptoProcessingErrorSubhead"),packagingProgress:0,webEncodeProgress:0,showProgressBar:!1}),yt.Logging.Logger.error("PostRecord.updateTaskStatus: Processing failed. Session status:",e))}}))}handleNewSessionClick(){const{t:e}=this.props,t=this.isUploading?e("AbandonUploadMessage"):e("AbandonRecordingMessage");(this.isRecordingSaved||window.confirm(t))&&(this.updateTaskStatusAbortController&&(this.updateTaskStatusAbortController.abort(),this.updateTaskStatusAbortController=void 0),window.clearTimeout(this.uploadCompleteTimeout),this.setState({packagingProgress:0,webEncodeProgress:0}),this.props.sendGoogleAnalyticsEvent(wn.newRecording),this.props.onNewSession())}handleRedoSessionClick(){this.props.sendGoogleAnalyticsEvent(wn.redoSession),window.confirm(this.props.t("RedoConfirmationMessage"))&&(this.updateTaskStatusAbortController&&(this.updateTaskStatusAbortController.abort(),this.updateTaskStatusAbortController=void 0),window.clearTimeout(this.uploadCompleteTimeout),this.setState({packagingProgress:0,webEncodeProgress:0}),this.props.sendGoogleAnalyticsEvent(wn.redoSessionConfirm),this.props.onRedoSession())}handleFolderBreakoutClick(){this.props.sendGoogleAnalyticsEvent(wn.viewFolder);const e=`https://${this.props.panoptoConstants.webServerFQDN}/Panopto/Pages/Sessions/List.aspx`;window.open(`${e}?folderId=${this.props.selectedFolderId}`)}handleHelpMenuToggle(e,t){this.setState({isHelpPopupVisible:e},t)}handleEditClick(){this.props.sendGoogleAnalyticsEvent(wn.editSession);const e=this.props.panoptoConstants.webServerFQDN;window.open(`https://${e}/Panopto/Pages/Viewer.aspx?id=${this.props.currentSessionId}&edit=true`)}handleViewClick(){this.props.sendGoogleAnalyticsEvent(wn.viewSession);const e=this.props.panoptoConstants.webServerFQDN;window.open(`https://${e}/Panopto/Pages/Viewer.aspx?id=${this.props.currentSessionId}`)}handleDownloadClicked(){this.props.sendGoogleAnalyticsEvent(wn.download),this.setState({uploadedOrDownloaded:!0})}handleFolderSelected(e,t){this.props.onFolderSelected(e,t),this.props.dropboxContentSharingEnabled||this.props.folderServices.getOne(e,(e=>{this.setState({dropboxShareHidden:e.isDropbox})}),(()=>{window.alert(this.props.t("Alert_GetFolderFailed"))}))}getPanoptoToken(){const{fftUrl:e,webServerFQDN:t,panoptoOAuthHandlerUrl:n,panoptoClientId:r}=this.props,{panoptoToken:o}=this.state;return o?Promise.resolve(o):new Promise(((o,a)=>{let i,s;const c=e=>{const t=e.data;if("string"==typeof t&&t.indexOf("access_token")>-1){const e=new URLSearchParams(t).get("access_token");e&&(window.removeEventListener("message",c),window.clearInterval(s),this.setState({panoptoToken:e}),o(e))}};window.addEventListener("message",c),s=window.setInterval((()=>{i.closed&&(window.removeEventListener("message",c),window.clearInterval(s),a("popup_closed_by_user"))}),nr.loginWindowIntervalDuration);const u=`/Panopto/oauth2/connect/authorize?client_id=${r}&scope=api&response_type=token&redirect_uri=${encodeURIComponent(n)}&`,l=t?`https://${t}${u}`:`${e}?source=express&redirecturi=${encodeURIComponent(u)}`;i=window.open(l,"oauth","width=450,height=600")}))}parsePanoptoToken(e){const t=Ct(e),n=new URL(t.iss).hostname;return Promise.resolve({fqdn:n})}getPanoptoDefaultFolder(){const{folderServices:e}=this.props;return new Promise(((t,n)=>{e.getDefaultFolder(t,n)}))}loadGoogleAuthClientLibrary(){const{googleAuthClient:e}=this.state;return new Promise(((t,n)=>{e?t(e):gapi.load("auth2",(()=>{gapi.auth2.init({client_id:this.props.googleClientId,scope:"openid",fetch_basic_profile:!1}).then((e=>{this.setState({googleAuthClient:e}),t(e)}),n)}))}))}getGoogleUser(e,t){return new Promise(((n,r)=>{const o=e.currentUser.get();return e.isSignedIn.get()&&o.hasGrantedScopes(t.join(" "))?n(o):e.signIn({prompt:"select_account",scope:t.join(" ")}).then(n).catch((e=>{void 0!==e&&"tokenFailed"===e.type&&"google"===e.idpId&&"server_error"===e.error?r("brand_account"):r(e)}))}))}validateRequiredScopes(e,t){return e.hasGrantedScopes(t.join(" "))?Promise.resolve():Promise.reject()}getGoogleAccessToken(e){return e.getAuthResponse().access_token}loadGoogleClientLibrary(){return new Promise(((e,t)=>{gapi.client?e():gapi.load("client",(()=>{gapi.client.init({apiKey:this.props.googleApiKey}).then(e,t)}))}))}uploadRecordingToYouTube(e,t){const{name:n,recorder:r,onUploadProgress:o}=this.props;let a;return r.startUploading((()=>(a=new Jn(e,n,(e=>o(t,e))),a))).then((()=>({youTubeId:a.youTubeId})))}startYouTubeProcessingPoll(e){return new Promise((t=>{new Tn(e,(e=>{e.canView&&t()}))}))}loadGoogleClassroomLibrary(){return new Promise(((e,t)=>{var n;(null===(n=gapi.client)||void 0===n?void 0:n.classroom)?e():gapi.load("client",(()=>{gapi.client.init({apiKey:this.props.googleApiKey,discoveryDocs:["https://classroom.googleapis.com/$discovery/rest?version=v1"]}).then(e,t)}))}))}listClassroomCourses(e){return new Promise(((t,n)=>{gapi.client.classroom.courses.list({oauth_token:e}).then((e=>t(e.result.courses)),n)}))}selectClassroomCourse(e){return new Promise(((t,n)=>{this.setState({isCourseChooserActive:!0,courses:e,selectClassroomCourseResolve:t,selectClassroomCourseReject:n})}))}handleCourseSelected(e){const{selectClassroomCourseResolve:t}=this.state;this.setState({selectClassroomCourseResolve:void 0,selectClassroomCourseReject:void 0}),this.setState({isCourseChooserActive:!1}),t&&t(e)}uploadRecordingToClassroom(e,t){const{name:n,recorder:r,onUploadProgress:o}=this.props;let a;return r.startUploading((()=>(a=new zn(e,n,(e=>o(t,e))),a))).then((()=>({youTubeId:a.youTubeId})))}createClassroomCoursework(e,t,n){const{name:r}=this.props;return new Promise(((o,a)=>{gapi.client.classroom.courses.courseWork.create({oauth_token:e,courseId:t,resource:{title:r,workType:"ASSIGNMENT",materials:[{link:{url:`https://www.youtube.com/watch?v=${n}`}}]}}).then((e=>o(e.result)),a)}))}startClassroomProcessingPoll(e){return new Promise((t=>{new Tn(e,(e=>{e.canView&&t()}))}))}cancelThrob(e){!this.state.throbButton||this.state.throbButton!==e&&e||this.setState({throbButton:void 0})}handleAnyClick(e){this.cancelThrob()}handlePanoptoUploadClick(){const{t:e,createSession:t,recorder:n,name:r,description:o,mediaStorageService:a,onUploadProgress:i,onAutoSendLogRequested:s}=this.props,{panoptoUrl:c}=this.state,u=this.currentRecording,l=u.getId(),d=[];let p,h,f,m;this.canStartUpload()&&!c&&(this.props.sendGoogleAnalyticsEvent(wn.panoptoUpload),this.setState({panoptoUploading:!0,panoptoProcessing:!1,progressMessage:e("PanoptoUploadingMessage"),progressSubhead:e("PanoptoUploadingSubhead"),showProgressBar:!0,packagingProgress:0,webEncodeProgress:0},(()=>{Promise.resolve().then((()=>this.getPanoptoToken().then((e=>{p=e,d.push("getPanoptoToken")})))).then((()=>this.parsePanoptoToken(p).then((e=>{h=e.fqdn,Panopto.appRoot=`https://${e.fqdn}/Panopto`,bn({webServerFQDN:e.fqdn,appRoot:"/Panopto",csrfTokenCookieName:Panopto.Core.Constants.CsrfTokenCookieName,csrfTokenHeaderName:Panopto.Core.Constants.CsrfTokenHeaderName}),d.push("parsePanoptoToken")})))).then((()=>this.getPanoptoDefaultFolder().then((e=>{f=e,d.push("getPanoptoDefaultFolder")})))).then((()=>t(r,o,f.id).then((e=>{m=e,d.push("createSession")})))).then((()=>n.startUploading((()=>u.createUploader(a,h,m.id,this.props.accessPoint,(e=>i(u,e)),(()=>{}),s))).then((()=>{d.push("startUploading")})))).then((()=>{this.setStateWithRecordingCheck(l,{uploadedOrDownloaded:!0,panoptoUploading:!1,panoptoProcessing:!0,progressMessage:e("UploadCompleteMessage"),progressSubhead:e("UploadCompleteSubhead")}),this.uploadCompleteTimeout=window.setTimeout((()=>{this.setStateWithRecordingCheck(l,{progressMessage:e("PanoptoProcessingMessage")})}),5e3),this.updateTaskStatus(h,m.id)})).catch((t=>{let n;-1===d.indexOf("getPanoptoToken")?(n=e("PanoptoUploadErrorSubhead_getPanoptoToken"),"popup_closed_by_user"===t?(yt.Logging.Logger.warning("User rejected authentication request."),this.props.sendGoogleAnalyticsEvent(wn.panoptoAuthError)):(yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.panoptoTokenError))):-1===d.indexOf("parsePanoptoToken")?(n=e("PanoptoUploadErrorSubhead_parsePanoptoToken"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.panoptoParseTokenError)):-1===d.indexOf("getPanoptoDefaultFolder")?(n=e("PanoptoUploadErrorSubhead_getPanoptoDefaultFolder"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.panoptoFolderError)):-1===d.indexOf("createSession")?(n=e("PanoptoUploadErrorSubhead_createSession"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.panoptoCreateError)):-1===d.indexOf("startUploading")&&(n=e("PanoptoUploadErrorSubhead_startUploading"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.panoptoStartError)),this.setStateWithRecordingCheck(l,{panoptoUploading:!1,panoptoProcessing:!1,progressMessage:e("PanoptoUploadErrorMessage"),progressSubhead:n,showProgressBar:!1,packagingProgress:0,webEncodeProgress:0})}))})))}handlePanoptoViewClick(){this.props.sendGoogleAnalyticsEvent(wn.panoptoView),window.open(this.state.panoptoUrl,"_blank")}handleYouTubeUploadClick(){const{t:e}=this.props,{youTubeUrl:t}=this.state;let{youTubeId:n}=this.state;const r=["https://www.googleapis.com/auth/youtube.readonly","https://www.googleapis.com/auth/youtube.upload"],o=this.currentRecording,a=o.getId(),i=[];let s,c,u;this.canStartUpload()&&!t&&(this.props.sendGoogleAnalyticsEvent(wn.youtubeUpload),this.setState({youTubeUploading:!0,youTubeProcessing:!1,progressMessage:e("YouTubeUploadingMessage"),progressSubhead:e("YouTubeUploadingSubhead"),showProgressBar:!0,packagingProgress:0,webEncodeProgress:0},(()=>{Promise.resolve().then((()=>this.loadGoogleAuthClientLibrary().then((e=>{s=e,i.push("loadGoogleAuthClientLibrary")})))).then((()=>this.loadGoogleClientLibrary().then((()=>{i.push("loadGoogleClientLibrary")})))).then((()=>this.getGoogleUser(s,r).then((e=>{c=e,i.push("getGoogleUser")})))).then((()=>this.validateRequiredScopes(c,r).then((()=>{u=this.getGoogleAccessToken(c),i.push("validateRequiredScopes")})))).then((()=>(n?Promise.resolve({youTubeId:n}):this.uploadRecordingToYouTube(u,o)).then((e=>{n=e.youTubeId,i.push("uploadRecordingToYouTube")})))).then((()=>{this.setStateWithRecordingCheck(a,{uploadedOrDownloaded:!0,youTubeUploading:!1,youTubeProcessing:!0,progressMessage:e("UploadCompleteMessage"),progressSubhead:e("UploadCompleteSubhead")}),this.uploadCompleteTimeout=window.setTimeout((()=>{this.setStateWithRecordingCheck(a,{progressMessage:e("YouTubeProcessingMessage"),showProgressBar:!1,packagingProgress:0,webEncodeProgress:0})}),5e3)})).then((()=>this.startYouTubeProcessingPoll(n).then((()=>{i.push("startYouTubeProcessingPoll")})))).then((()=>{window.clearTimeout(this.uploadCompleteTimeout),this.setStateWithRecordingCheck(a,{youTubeProcessing:!1,youTubeId:n,youTubeUrl:`https://www.youtube.com/watch?v=${n}`,progressMessage:e("YouTubeCompleteMessage"),progressSubhead:e("YouTubeCompleteSubhead"),showProgressBar:!1,packagingProgress:0,webEncodeProgress:0,throbButton:"youtube"})})).catch((t=>{let n;-1===i.indexOf("loadGoogleAuthClientLibrary")?"idpiframe_initialization_failed"===(null==t?void 0:t.error)?(n=(null==t?void 0:t.details)||e("YouTubeUploadErrorSubhead_loadGoogleAuthClientLibrary"),yt.Logging.Logger.warning("PostRecord.handleYouTubeUploadClick: failed to load Google Auth Client.",t)):(n=e("YouTubeUploadErrorSubhead_loadGoogleAuthClientLibrary"),yt.Logging.Logger.error(t)):-1===i.indexOf("loadGoogleClientLibrary")?(n=e("YouTubeUploadErrorSubhead_loadGoogleClientLibrary"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.youtubeLibraryError)):-1===i.indexOf("getGoogleUser")?(n=e("YouTubeUploadErrorSubhead_getGoogleUser"),"access_denied"===t.error||"popup_closed_by_user"===t.error?yt.Logging.Logger.warning("User rejected authentication request."):"brand_account"===t?(yt.Logging.Logger.warning("User selected a Brand account."),n=e("YouTubeUploadErrorSubhead_getGoogleUser_brandAccount")):yt.Logging.Logger.error(t)):-1===i.indexOf("validateRequiredScopes")?(n=e("YouTubeUploadErrorSubhead_validateRequiredScopes"),yt.Logging.Logger.warning("User did not provide enough scope."),s.signOut()):-1===i.indexOf("uploadRecordingToYouTube")?("youtubeSignupRequired"===t?(n=e("YouTubeUploadErrorSubhead_youtubeSignupRequired"),s.signOut()):n=e("YouTubeUploadErrorSubhead_uploadRecordingToYouTube"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.youtubeUploadError)):-1===i.indexOf("startYouTubeProcessingPoll")&&(n=e("YouTubeUploadErrorSubhead_startYouTubeProcessingPoll"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.youtubeProcessingError)),this.setStateWithRecordingCheck(a,{youTubeUploading:!1,youTubeProcessing:!1,progressMessage:e("YouTubeUploadErrorMessage"),progressSubhead:n,showProgressBar:!1,packagingProgress:0,webEncodeProgress:0})}))})))}handleYouTubeViewClick(){this.props.sendGoogleAnalyticsEvent(wn.youtubeView),window.open(this.state.youTubeUrl,"_blank")}handleClassroomUploadClick(){const{t:e}=this.props,{classroomUrl:t}=this.state;let{youTubeId:n}=this.state;const r=["https://www.googleapis.com/auth/youtube.readonly","https://www.googleapis.com/auth/youtube.upload","https://www.googleapis.com/auth/classroom.courses.readonly","https://www.googleapis.com/auth/classroom.coursework.students"],o=this.currentRecording,a=o.getId(),i=[];let s,c,u,l,d;this.canStartUpload()&&!t&&(this.props.sendGoogleAnalyticsEvent(wn.classroomUpload),this.setState({classroomUploading:!0,classroomProcessing:!1,progressMessage:e("ClassroomUploadingMessage"),progressSubhead:e("ClassroomUploadingSubhead"),showProgressBar:!0,packagingProgress:0,webEncodeProgress:0},(()=>{Promise.resolve().then((()=>this.loadGoogleAuthClientLibrary().then((e=>{s=e,i.push("loadGoogleAuthClient")})))).then((()=>this.loadGoogleClassroomLibrary().then((()=>{i.push("loadGoogleClassroomLibrary")})))).then((()=>this.getGoogleUser(s,r).then((e=>{c=e,i.push("getGoogleUser")})))).then((()=>this.validateRequiredScopes(c,r).then((()=>{u=this.getGoogleAccessToken(c),i.push("validateRequiredScopes")})))).then((()=>this.listClassroomCourses(u))).then((e=>{l=e,i.push("listClassroomCourses")})).then((()=>this.selectClassroomCourse(l))).then((e=>{d=e,i.push("selectClassroomCourse")})).then((()=>(n?Promise.resolve({youTubeId:n}):this.uploadRecordingToClassroom(u,o)).then((e=>{n=e.youTubeId,i.push("uploadRecordingToClassroom")})))).then((()=>this.createClassroomCoursework(u,d.id,n).then((()=>{i.push("createClassroomCoursework")})))).then((()=>{this.setStateWithRecordingCheck(a,{uploadedOrDownloaded:!0,classroomUploading:!1,classroomProcessing:!0,progressMessage:e("UploadCompleteMessage"),progressSubhead:e("UploadCompleteSubhead")}),this.uploadCompleteTimeout=window.setTimeout((()=>{this.setStateWithRecordingCheck(a,{progressMessage:e("ClassroomProcessingMessage"),showProgressBar:!1,packagingProgress:0,webEncodeProgress:0})}),5e3)})).then((()=>this.startClassroomProcessingPoll(n).then((()=>{i.push("startClassroomProcessingPoll")})))).then((()=>{window.clearTimeout(this.uploadCompleteTimeout),this.setStateWithRecordingCheck(a,{classroomProcessing:!1,youTubeId:n,classroomUrl:d.alternateLink,progressMessage:e("ClassroomCompleteMessage"),progressSubhead:e("ClassroomCompleteSubhead"),showProgressBar:!1,packagingProgress:0,webEncodeProgress:0,throbButton:"classroom"})})).catch((t=>{let n;-1===i.indexOf("loadGoogleAuthClient")?"idpiframe_initialization_failed"===(null==t?void 0:t.error)?(n=(null==t?void 0:t.details)||e("YouTubeUploadErrorSubhead_loadGoogleAuthClientLibrary"),yt.Logging.Logger.warning("PostRecord.handleClassroomUploadClick: failed to load Google Auth Client.",t)):(n=e("ClassroomUploadErrorSubhead_loadGoogleAuthClient"),yt.Logging.Logger.error(t)):-1===i.indexOf("loadGoogleClassroomLibrary")?(n=e("ClassroomUploadErrorSubhead_loadGoogleClassroomLibrary"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.classroomLoadError)):-1===i.indexOf("getGoogleUser")?(n=e("ClassroomUploadErrorSubhead_getGoogleUser"),"access_denied"===t.error||"popup_closed_by_user"===t.error?yt.Logging.Logger.warning("User rejected authentication request."):"brand_account"===t?(yt.Logging.Logger.warning("User selected a Brand account."),n=e("ClassroomUploadErrorSubhead_getGoogleUser_brandAccount")):yt.Logging.Logger.error(t)):-1===i.indexOf("validateRequiredScopes")?(n=e("ClassroomUploadErrorSubhead_validateRequiredScopes"),yt.Logging.Logger.warning("User did not provide enough scope."),s.signOut()):-1===i.indexOf("listClassroomCourses")?(n=e("ClassroomUploadErrorSubhead_listClassroomCourses"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.classroomListError)):-1===i.indexOf("selectClassroomCourse")?(n=e("ClassroomUploadErrorSubhead_selectClassroomCourse"),yt.Logging.Logger.warning("Did not select a Course to upload."),this.props.sendGoogleAnalyticsEvent(wn.classroomSelectError)):-1===i.indexOf("uploadRecordingToClassroom")?("youtubeSignupRequired"===t?(n=e("ClassroomUploadErrorSubhead_youtubeSignupRequired"),s.signOut()):n=e("ClassroomUploadErrorSubhead_uploadRecordingToClassroom"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.classroomUploadError)):-1===i.indexOf("createClassroomCoursework")?(n=e("ClassroomUploadErrorSubhead_createClassroomCoursework"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.classroomCreateError)):-1===i.indexOf("startClassroomProcessingPoll")&&(n=e("ClassroomUploadErrorSubhead_startClassroomProcessingPoll"),yt.Logging.Logger.error(t),this.props.sendGoogleAnalyticsEvent(wn.classroomProcessingError)),this.setStateWithRecordingCheck(a,{classroomUploading:!1,classroomProcessing:!1,progressMessage:e("ClassroomUploadErrorMessage"),progressSubhead:n,showProgressBar:!1,packagingProgress:0,webEncodeProgress:0})}))})))}handleClassroomViewClick(){this.props.sendGoogleAnalyticsEvent(wn.classroomView),window.open(this.state.classroomUrl,"_blank")}handleShareExpandToggle(){this.setState((e=>({shareExpanded:!e.shareExpanded})))}showTags(){return this.props.panoptoConstants.features.tagsEnabled&&!this.props.standAloneMode&&!this.props.isMobile&&!!this.props.currentSessionId}render(){var e;const{t:t,enableLogsUpload:n,enableLogsDownload:r,onUploadLogsClick:o,onDownloadLogsClick:a}=this.props,{throbButton:i}=this.state,{bytesSent:s,bytesEnqueued:c}=this.props.uploadStats,{packagingProgress:u,webEncodeProgress:l}=this.state,d=((s/c*100||0)+u+l)/3,p=this.canStartUpload(),h=[];this.state.shareExpanded&&h.push("share-expanded"),this.props.standAloneMode&&h.push("standalone");const f=this.props.sessionLaunch?t("SessionLaunchButtonsDisabledMessage"):void 0;let m=".webm";"video/mp4"===(null===(e=this.props.preview)||void 0===e?void 0:e.blob.type)&&(m=".mp4");const g=this.props.stringHelpers.cleanFilename(`${this.props.name}${m}`);return Be.createElement("div",{className:"post-record "+h.join(" "),onClickCapture:e=>this.handleAnyClick(e),ref:e=>this.element=e},Be.createElement("div",{className:"post-record-backdrop"}),Be.createElement("div",{className:"header"},Be.createElement("div",{className:"logo-region"},this.props.standAloneMode?Be.createElement("a",{className:"panopto-logo"+(p?"":" processing"),href:"https://www.panopto.com/plans/",target:"_blank",rel:"noopener noreferrer"},dn.PanoptoLogo):Be.createElement("div",{className:"panopto-logo"},dn.PanoptoLogo),Be.createElement("div",{className:"progress-container"},Be.createElement("div",{className:"progress-message"},this.state.progressMessage),this.state.progressSubhead&&Be.createElement("div",{className:"progress-subhead"},this.state.progressSubhead),this.state.showProgressBar&&!this.props.isMobile&&Be.createElement(Nn,{percentComplete:d}))),this.state.showProgressBar&&this.props.isMobile&&Be.createElement("div",{className:"mobile-progress-bar-container"},Be.createElement(Nn,{percentComplete:d})),Be.createElement("div",{className:"return-to-record-buttons"},Be.createElement(At,{className:"record-new button",iconCode:this.props.isMobile?"add_circle_outline":void 0,onActivate:this.handleNewSessionClick,disabled:this.props.sessionLaunch,title:f},t("RecordNewButtonText")),!this.props.standAloneMode&&Be.createElement(At,{className:"redo button",iconCode:this.props.isMobile?"delete":void 0,onActivate:this.handleRedoSessionClick,disabled:this.props.sessionLaunch,title:f},t("RedoButtonText")),Be.createElement(In,{isOpen:this.state.isHelpPopupVisible,isExpress:this.props.standAloneMode,onToggleOpen:this.handleHelpMenuToggle,enableLogsUpload:n,enableLogsDownload:r,onUploadLogsClick:o,onDownloadLogsClick:a}))),Be.createElement("div",{className:"section-splitter"},Be.createElement("div",{className:"preview-container"},(this.props.isVisible||this.props.isStateTransitioning)&&Be.createElement(Be.Fragment,null,this.props.useMultistreamPreview&&this.props.preview&&Be.createElement(Bn,{previewDelivery:this.props.preview.delivery,useVideoSourceElement:this.props.useVideoSourceElement,initialPlayerLayoutMode:this.props.settings.forceTile?Ft.PlayerLayoutMode.SideBySide:Ft.PlayerLayoutMode.Normal}),!this.props.useMultistreamPreview&&this.props.preview&&Be.createElement(Dn,{previewBlob:this.props.preview.blob,useVideoSourceElement:this.props.useVideoSourceElement}))),Be.createElement("div",{className:"control-container"},Be.createElement("input",{className:"name-input",type:"text",title:t("NameTooltip"),placeholder:t("NamePlaceholder"),value:this.props.name,onKeyDown:e=>"Enter"===e.key&&e.target.blur(),onChange:e=>this.props.onNameChanged(e.target.value),onBlur:e=>this.props.onNameSubmit(e.target.value),onFocus:e=>e.target.select()}),this.props.standAloneMode&&this.props.preview&&this.currentRecording&&Be.createElement(Ot,{className:"download-button",iconCode:"get_app",title:t("Title_DownloadRecordingButton"),downloadUrl:window.URL.createObjectURL(this.props.preview.blob),downloadFilename:g,onClick:this.handleDownloadClicked}),!this.props.standAloneMode&&Be.createElement("div",{className:"folder-row"},Be.createElement(Vt,{title:t("FolderPickerTooltip"),folderServices:this.props.folderServices,getDefaultFolderOnUnselected:!0,initialFolderId:this.props.initialFolderId,onInitialFolderLoaded:this.handleFolderSelected,onFolderSelected:this.handleFolderSelected,createSessionAccess:!0,allowNoSelection:!1,includeSandboxes:!0,includeMySandbox:!0,disabled:this.props.lockFolder}),Be.createElement(At,{className:"folder-breakout-link",iconCode:"launch",title:t("FolderBreakoutTooltip"),onActivate:this.handleFolderBreakoutClick})),this.showTags()&&Be.createElement("div",{className:"tags-input-capture"},Be.createElement(ln,{initialTags:[],fetchTags:!0,canDelete:!0,canAdd:!0,searchOnClick:!1,tagsService:this.props.tagServices,subscriptionService:this.props.subscriptionService,userService:this.props.userServices,sessionId:this.props.currentSessionId,darkMode:!0,useAbsolutePosition:!0,resources:this.props.resources})),Be.createElement("textarea",{className:"description-input",placeholder:t("Placeholder_SessionDescriptionTextarea"),value:this.props.description,onChange:e=>this.props.onDescriptionChanged(e.target.value),onBlur:e=>this.props.onDescriptionSubmit(e.target.value),onFocus:e=>e.target.select()}),Be.createElement("div",{className:"session-buttons"},Be.createElement(At,{className:"edit",title:t("EditButtonTooltip"),disabled:!this.state.editEnabled,onActivate:this.handleEditClick},Be.createElement(Nt,{iconCode:"edit",text:t("EditButtonText")})),Be.createElement(At,{className:"view",title:t("ViewButtonTooltip"),disabled:!this.state.viewEnabled,onActivate:this.handleViewClick},Be.createElement(Nt,{iconCode:"remove_red_eye",text:t("ViewButtonText")})))),this.props.isMobile&&Be.createElement(At,{className:"metadata-rollup",onActivate:this.handleShareExpandToggle},Be.createElement("div",{className:"name"},this.props.name||Be.createElement("span",{className:"name-placeholder"},t("NamePlaceholder"))),Be.createElement("div",{className:"folder"},this.props.selectedFolderName),Be.createElement("i",{className:"arrow material-icons"},"keyboard_arrow_down"))),!this.props.standAloneMode&&Be.createElement("div",{className:"share"},Be.createElement("div",{className:"bounding-box"},!this.state.dropboxShareHidden&&Be.createElement(Be.Fragment,null,this.props.isVisible&&Be.createElement(Xn,{sessionId:this.props.currentSessionId,sharingIsBlocked:this.props.sharingIsBlocked,sendGoogleAnalyticsEvent:this.props.sendGoogleAnalyticsEvent,dropboxContentSharingEnabled:this.props.dropboxContentSharingEnabled}),this.props.isMobile&&Be.createElement(At,{className:"mobile-roll-up",onActivate:this.handleShareExpandToggle},Be.createElement("span",{className:"text"},t("ShareRollUpMessage")),Be.createElement("i",{className:"arrow material-icons"},"keyboard_arrow_down"))),this.state.dropboxShareHidden&&Be.createElement("div",{className:"share-message"},t("Text_NoShareFromDropbox")))),this.props.standAloneMode&&Be.createElement("div",{className:"button-footer"},!this.state.panoptoUrl&&Be.createElement(At,{className:"panopto-upload-button",disabled:!p,onActivate:this.handlePanoptoUploadClick},Be.createElement("div",{className:"logo"},dn.PanoptoLogo),Be.createElement("div",{className:"label"},this.state.panoptoUploading?t("PanoptoUploadButtonUploading"):this.state.panoptoProcessing?t("PanoptoUploadButtonProcessing"):t("PanoptoUploadButtonInitial"))),this.state.panoptoUrl&&Be.createElement(At,{className:"panopto-upload-button"+("panopto"===i?" throb":""),onActivate:this.handlePanoptoViewClick,onHover:()=>this.cancelThrob("panopto"),onFocus:()=>this.cancelThrob("panopto")},Be.createElement("div",{className:"logo"},dn.PanoptoLogo),Be.createElement("div",{className:"label"},t("PanoptoViewButton"))),!this.state.youTubeUrl&&Be.createElement(At,{className:"youtube-upload-button",disabled:!p,onActivate:this.handleYouTubeUploadClick},Be.createElement("div",{className:"logo"}),Be.createElement("div",{className:"label"},this.state.youTubeUploading?t("YouTubeUploadButtonUploading"):this.state.youTubeProcessing?t("YouTubeUploadButtonProcessing"):t("YouTubeUploadButtonInitial"))),this.state.youTubeUrl&&Be.createElement(At,{className:"youtube-upload-button"+("youtube"===i?" throb":""),onActivate:this.handleYouTubeViewClick,onHover:()=>this.cancelThrob("youtube"),onFocus:()=>this.cancelThrob("youtube")},Be.createElement("div",{className:"logo"}),Be.createElement("div",{className:"label"},t("YouTubeViewButton"))),!this.state.classroomUrl&&Be.createElement(At,{className:"classroom-upload-button",disabled:!p,onActivate:this.handleClassroomUploadClick},Be.createElement("div",{className:"logo"}),Be.createElement("div",{className:"label"},this.state.classroomUploading?t("ClassroomUploadButtonUploading"):this.state.classroomProcessing?t("ClassroomUploadButtonProcessing"):t("ClassroomUploadButtonInitial"))),this.state.classroomUrl&&Be.createElement(At,{className:"classroom-upload-button"+("classroom"===i?" throb":""),onActivate:this.handleClassroomViewClick,onHover:()=>this.cancelThrob("classroom"),onFocus:()=>this.cancelThrob("classroom")},Be.createElement("div",{className:"logo"}),Be.createElement("div",{className:"label"},t("ClassroomViewButton")))),Be.createElement(Ht,{isActive:this.state.isCourseChooserActive,onToggle:e=>{const{selectClassroomCourseReject:t}=this.state;this.setState({isCourseChooserActive:e,selectClassroomCourseResolve:void 0,selectClassroomCourseReject:void 0}),t&&t("User exited course selector.")},accessibilityService:Panopto.Core.UI.Accessibility,zIndex:3},Be.createElement("div",{className:"settings-container"},Be.createElement("div",{className:"course-select-text"},t("ClassroomCourseSelectorLabel")),this.state.courses&&this.state.courses.length&&this.state.courses.map((e=>Be.createElement(At,{key:e.id,onActivate:()=>this.handleCourseSelected(e)},Be.createElement("div",{className:"course-item"},e.name)))),!(this.state.courses&&this.state.courses.length)&&Be.createElement("div",{className:"no-courses-message"},t("ClassroomCourseSelectorEmpty")))))}}nr.loginWindowIntervalDuration=250,er([Ze],nr.prototype,"handleBeforeUnload",null),er([Ze],nr.prototype,"handleNewSessionClick",null),er([Ze],nr.prototype,"handleRedoSessionClick",null),er([Ze],nr.prototype,"handleFolderBreakoutClick",null),er([Ze],nr.prototype,"handleHelpMenuToggle",null),er([Ze],nr.prototype,"handleEditClick",null),er([Ze],nr.prototype,"handleViewClick",null),er([Ze],nr.prototype,"handleDownloadClicked",null),er([Ze],nr.prototype,"handleFolderSelected",null),er([Ze],nr.prototype,"handleCourseSelected",null),er([Ze],nr.prototype,"cancelThrob",null),er([Ze],nr.prototype,"handleAnyClick",null),er([Ze],nr.prototype,"handlePanoptoUploadClick",null),er([Ze],nr.prototype,"handlePanoptoViewClick",null),er([Ze],nr.prototype,"handleYouTubeUploadClick",null),er([Ze],nr.prototype,"handleYouTubeViewClick",null),er([Ze],nr.prototype,"handleClassroomUploadClick",null),er([Ze],nr.prototype,"handleClassroomViewClick",null),er([Ze],nr.prototype,"handleShareExpandToggle",null),er([Ze],nr.prototype,"showTags",null);var rr=gt("webrecorder")(nr);class or extends Be.Component{componentDidUpdate(e){!e.isCountingDown&&this.props.isCountingDown&&this.startCountdown(),e.isCountingDown&&!this.props.isCountingDown&&this.resetCountdown()}componentWillUnmount(){window.clearInterval(this.countdownInterval)}startCountdown(){$(this.container).addClass("shown").focus();let e=5;this.showDigit(e),this.countdownInterval=window.setInterval((()=>{e--,this.showDigit(e),e||this.props.onElapsed()}),1e3),$(this.container).off("keydown"),$(this.container).on("keydown",(e=>{yt.Logging.Logger.verbose(e.key),"Escape"===e.key&&this.props.onCanceled(),"Enter"===e.key&&this.props.onElapsed()}))}showDigit(e){const t=$(this.container).find(".digit");t.css({"font-size":"90vmin",color:"white"}),t.text(e),t.animate({"font-size":"75vmin",color:"rgba(255, 255, 255, 0.5)"},100)}resetCountdown(){$(this.container).removeClass("shown"),$(this.container).off("keydown"),window.clearInterval(this.countdownInterval)}render(){const{t:e}=this.props,t=this.props.isMobile?e("StartRecordingMobileText"):e("StartRecordingText"),n=this.props.isMobile?e("CancelCountdownMobileText"):e("CancelCountdownText");return Be.createElement("div",{className:"countdown",onClick:this.props.onElapsed,ref:e=>this.container=e,tabIndex:-1},Be.createElement("span",{className:"digit"},"5"),Be.createElement("div",{className:"footer"},Be.createElement("div",null,Be.createElement(At,{className:"button",onActivate:this.props.onElapsed},t)),Be.createElement("div",null,Be.createElement(At,{className:"button",onActivate:this.props.onCanceled},n))))}}var ar,ir,sr,cr=gt("webrecorder")(or);!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DISPLAY=2]="DISPLAY",e[e.APP=3]="APP"}(ar||(ar={})),function(e){e[e.Primary=0]="Primary",e[e.Secondary=1]="Secondary"}(ir||(ir={})),function(e){e.Standard="Standard",e.High="High",e.Ultra="Ultra"}(sr||(sr={}));var ur=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class lr extends Be.Component{constructor(){super(...arguments),this.audioSamplesAveraged=0,this.volume=0}componentDidMount(){this.props.device.mediaStream&&this.initializePreview(this.props.device.mediaStream)}componentDidUpdate(){!this.audioContext&&this.props.device.mediaStream&&this.initializePreview(this.props.device.mediaStream),this.audioContext&&!this.props.device.mediaStream&&this.disposePreview()}componentWillUnmount(){this.audioContext&&this.disposePreview()}initializePreview(e){const t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t,this.audioSource=this.audioContext.createMediaStreamSource(e),this.scriptProcessor=this.audioContext.createScriptProcessor(lr.bufferSize,lr.stereoChannels),this.scriptProcessor.onaudioprocess=this.handleAudioProcess,this.audioSource.connect(this.scriptProcessor),this.scriptProcessor.connect(this.audioContext.destination)}disposePreview(){this.audioSource.disconnect(this.scriptProcessor),this.scriptProcessor.disconnect(this.audioContext.destination),this.audioContext.close(),this.audioContext=void 0}handleAudioProcess(e){if(this.vuMeterCanvasElement){const t=e.inputBuffer.getChannelData(0);let n=0;const r=e.inputBuffer.getChannelData(1);let o=0;t.forEach((e=>{n+=e*e})),n=Math.min(2*Math.sqrt(n/t.length),1),r.forEach((e=>{o+=e*e})),o=Math.min(2*Math.sqrt(o/r.length),1);const a=this.vuMeterCanvasElement.getContext("2d");a&&(a.fillStyle=this.getColorString(n),a.clearRect(0,0,a.canvas.width/2,a.canvas.height),a.fillRect(0,a.canvas.height*(1-n),a.canvas.width/2,a.canvas.height),a.fillStyle=this.getColorString(o),a.clearRect(a.canvas.width/2,0,a.canvas.width/2,a.canvas.height),a.fillRect(a.canvas.width/2,a.canvas.height*(1-o),a.canvas.width/2,a.canvas.height))}}getColorString(e){let t=Math.round(255*(1-Math.max(0,Math.abs(e-.5)-.25)/.25));const n=Math.round(255*(1-Math.max(0,.25-Math.max(0,e-.5))/.25));e<.5&&(t=Math.max(192,t));let r=t.toString(16);r.length<2&&(r="0"+r);let o=n.toString(16);o.length<2&&(o="0"+o);return`#${o}${r}00`}render(){const{t:e}=this.props,t=[""];return this.props.device.selected&&t.push("selected"),Be.createElement("div",{className:"stream-chooser-item"+t.join(" "),role:"region","aria-label":this.props.device.label,onClick:()=>this.props.onClick({selected:!0,exclusive:!0})},!this.props.device.mediaStreamError&&Be.createElement(Be.Fragment,null,Be.createElement("div",{className:"audio-item-container"},Be.createElement("canvas",{width:"2",height:"255",ref:e=>this.vuMeterCanvasElement=e,className:this.props.device.mediaStream?"":"inactive"}),Be.createElement("div",{className:"label"+(this.props.device.label?"":" unknown")},this.props.device.label||e("UnknownDeviceLabel"))),Be.createElement("div",{className:"selected-overlay material-icons"},"check"),Be.createElement("div",{className:"button-container"},!this.props.device.selected&&Be.createElement(Be.Fragment,null,this.props.otherMicSelected&&Be.createElement(At,{className:"button single-select",onActivate:()=>this.props.onClick({selected:!0,exclusive:!0})},Be.createElement(Nt,{iconCode:"check",text:e("DeviceSwitch")})),this.props.multipleAudioInputsEnabled&&Be.createElement(At,{className:"button multi-select",onActivate:()=>this.props.onClick({selected:!0,exclusive:!1})},Be.createElement(Nt,{iconCode:"add",text:e("DeviceAdd")}))),this.props.device.selected&&Be.createElement(At,{className:"button deselect",onActivate:()=>this.props.onClick({selected:!1,exclusive:!0})},Be.createElement(Nt,{iconCode:"clear",text:e("DeviceRemove")})))),this.props.device.mediaStreamError&&Be.createElement("div",{className:"item-error"},Be.createElement("div",{className:"item-name ellipsis"},this.props.device.label),Be.createElement("i",{className:"error-icon material-icons"},"error_outline"),Be.createElement("div",{className:"error-text"},e("AudioDeviceConnectFailure"),Be.createElement("a",{href:"https://support.panopto.com/9/capture/devices",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},e("DeviceConnectHelpLinkText")))))}}lr.bufferSize=4096,lr.stereoChannels=2,ur([Ze],lr.prototype,"handleAudioProcess",null);var dr=gt("webrecorder")(lr);class pr extends Be.Component{componentDidMount(){this.videoElement&&this.props.device.mediaStream&&this.initializePreview(this.props.device.mediaStream)}componentDidUpdate(){this.videoElement&&!this.videoElement.srcObject&&this.props.device.mediaStream&&this.initializePreview(this.props.device.mediaStream)}componentWillUnmount(){this.videoElement&&(this.videoElement.onloadedmetadata=null)}initializePreview(e){this.videoElement.srcObject=e,this.videoElement.onloadedmetadata=e=>{this.videoElement.play(),this.videoElement.muted=!0,yt.Logging.Logger.verbose("VideoStreamSource.componentDidMount(): "+this.props.device.id+" videoElement previewing")}}render(){const{t:e}=this.props,t=[""];return this.props.device.selected&&t.push("selected"),Be.createElement("div",{className:"stream-chooser-item"+t.join(" "),role:"region","aria-label":this.props.device.label,onClick:()=>this.props.onClick({selected:!0,exclusive:!0})},!this.props.device.mediaStreamError&&Be.createElement(Be.Fragment,null,Be.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,tabIndex:-1,ref:e=>this.videoElement=e}),Be.createElement("div",{className:"selected-overlay material-icons"},"check"),Be.createElement("div",{className:"button-container"},!this.props.device.selected&&Be.createElement(Be.Fragment,null,this.props.otherCameraSelected&&Be.createElement(At,{className:"button single-select",onActivate:()=>this.props.onClick({selected:!0,exclusive:!0})},Be.createElement(Nt,{iconCode:"check",text:e("DeviceSwitch")})),Be.createElement(At,{className:"button multi-select",onActivate:()=>this.props.onClick({selected:!0,exclusive:!1})},Be.createElement(Nt,{iconCode:"add",text:e("DeviceAdd")}))),this.props.device.selected&&Be.createElement(At,{className:"button deselect",onActivate:()=>this.props.onClick({selected:!1,exclusive:!0})},Be.createElement(Nt,{iconCode:"clear",text:e("DeviceRemove")})))),this.props.device.mediaStreamError&&Be.createElement("div",{className:"item-error"},Be.createElement("div",{className:"item-name ellipsis"},this.props.device.label),Be.createElement("i",{className:"error-icon material-icons"},"error_outline"),Be.createElement("div",{className:"error-text"},e("VideoDeviceConnectFailure"),Be.createElement("a",{href:"https://support.panopto.com/9/capture/devices",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},e("DeviceConnectHelpLinkText")))))}}var hr=gt("webrecorder")(pr),fr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class mr extends Be.Component{handleStreamTypeClick(e){const t=this.props.streamType===e?void 0:e;this.props.onStreamTypeChanged(t)}handleItemClick(e,{selected:t,exclusive:n}){const r=bt.findWhere(this.props.devices,{id:e}),o=[];t&&n&&this.props.devices.filter((e=>e.type===r.type&&e.selected&&e.id!==r.id)).forEach((e=>{o.push(this.props.onDeviceToggle(e.id,!1))})),Promise.all(o).then((()=>this.props.onDeviceToggle(e,t)))}handlePaneClick(e){e.target===e.currentTarget&&this.props.onStreamTypeChanged(void 0)}handleOverlayKeyDown(e){"Escape"===e.key&&this.props.onStreamTypeChanged(void 0)}isSelectorFocusable(e){return void 0===this.props.streamType||this.props.streamType===e}render(){const{streamType:e,t:t}=this.props,n=e===ar.AUDIO,r=e===ar.VIDEO,o=this.props.devices.filter((t=>t.type===e));return Be.createElement(Be.Fragment,null,Be.createElement("div",{className:"stream-chooser-header"},Be.createElement("div",{className:"background"},dn.TesselatedHeader),Be.createElement("div",{className:Je()({"input-stream-category":!0,selected:n,disabled:this.props.secondaryOnly})},Be.createElement(At,{className:"category-button",title:this.props.secondaryOnly?t("Title_NoMicInSecondaryOnly"):t("MicChooserLabel"),isMenuButton:!0,isMenuOpen:this.props.streamType===ar.AUDIO,tabIndex:this.isSelectorFocusable(ar.AUDIO)?0:-1,disabled:this.props.secondaryOnly,onActivate:()=>this.handleStreamTypeClick(ar.AUDIO)},dn.Microphone,Be.createElement("div",{className:"label"},t("MicChooserLabel")))),Be.createElement("div",{className:"divider"}),Be.createElement("div",{className:"input-stream-category"+(r?" selected":"")},Be.createElement(At,{className:"category-button",title:t("CameraChooserLabel"),isMenuButton:!0,isMenuOpen:this.props.streamType===ar.VIDEO,tabIndex:this.isSelectorFocusable(ar.VIDEO)?0:-1,onActivate:()=>this.handleStreamTypeClick(ar.VIDEO)},dn.VideoCamera,Be.createElement("div",{className:"label"},t("CameraChooserLabel")))),Be.createElement("div",{className:"divider"}),Be.createElement("div",{className:"input-stream-category"},Be.createElement(At,{className:"category-button",title:t("DisplayAddLabel"),isMenuButton:!0,tabIndex:this.isSelectorFocusable(ar.DISPLAY)?0:-1,onActivate:()=>this.handleStreamTypeClick(ar.DISPLAY)},dn.AddDisplay,Be.createElement("div",{className:"label"},t("DisplayAddLabel"))))),Be.createElement("div",{className:"record-overlay"+(void 0!==e?" visible":""),onKeyDown:this.handleOverlayKeyDown},Be.createElement("div",{className:"stream-chooser-container",onClick:this.handlePaneClick},o.map((t=>Be.createElement("div",{key:t.id},e===ar.AUDIO&&Be.createElement(dr,{device:t,otherMicSelected:o.some((e=>e.selected)),multipleAudioInputsEnabled:this.props.multipleAudioInputsEnabled,onClick:e=>this.handleItemClick(t.id,e)}),e===ar.VIDEO&&Be.createElement(hr,{device:t,otherCameraSelected:o.some((e=>e.selected)),onClick:e=>this.handleItemClick(t.id,e)})))),void 0!==e&&0===o.length&&Be.createElement("div",{className:"no-devices"},Be.createElement("div",{className:"columns"},e===ar.VIDEO?Be.createElement("i",{className:"material-icons"},"videocam_off"):Be.createElement("i",{className:"material-icons"},"mic_off"),Be.createElement("div",{className:"rows"},Be.createElement("div",{className:"title"},e===ar.VIDEO?t("VideoDeviceNotAvailableTitle"):t("AudioDeviceNotAvailableTitle")),Be.createElement("div",{className:"subtitle"},e===ar.VIDEO?t("VideoDeviceNotAvailableSubtitle"):t("AudioDeviceNotAvailableSubtitle"))))))))}}fr([Ze],mr.prototype,"handleStreamTypeClick",null),fr([Ze],mr.prototype,"handleItemClick",null),fr([Ze],mr.prototype,"handlePaneClick",null),fr([Ze],mr.prototype,"handleOverlayKeyDown",null);var gr,br=gt("webrecorder")(mr);class yr extends Be.Component{constructor(e){super(e),this.timerInterval=null,this.state={ticks:0}}componentDidUpdate(e,t){this.props.startTime?e.startTime||this.timerInterval||(this.timerInterval=window.setInterval((()=>this.setState((e=>({ticks:e.ticks+1})))),1e3)):this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}componentWillUnmount(){clearInterval(this.timerInterval)}render(){let e="0:00";if(this.props.startTime){const t=St.duration(St().diff(St(this.props.startTime))),n=Math.floor(t.asHours()),r=t.minutes(),o=("0"+t.minutes()).slice(-2),a=("0"+t.seconds()).slice(-2);e=n?`${n}:${o}:${a}`:`${r}:${a}`}return Be.createElement("div",null,e)}}var Ar=new Uint8Array(16);function vr(){if(!gr&&!(gr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gr(Ar)}var xr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var kr=function(e){return"string"==typeof e&&xr.test(e)},wr=[],Cr=0;Cr<256;++Cr)wr.push((Cr+256).toString(16).substr(1));var Sr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(wr[e[t+0]]+wr[e[t+1]]+wr[e[t+2]]+wr[e[t+3]]+"-"+wr[e[t+4]]+wr[e[t+5]]+"-"+wr[e[t+6]]+wr[e[t+7]]+"-"+wr[e[t+8]]+wr[e[t+9]]+"-"+wr[e[t+10]]+wr[e[t+11]]+wr[e[t+12]]+wr[e[t+13]]+wr[e[t+14]]+wr[e[t+15]]).toLowerCase();if(!kr(n))throw TypeError("Stringified UUID is invalid");return n};var Or=function(e,t,n){var r=(e=e||{}).random||(e.rng||vr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Sr(r)};var Er=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Ir{constructor(e,t,n,r,o,a,i,s,c){this.type=e,this.streamRecorderData=r,this.onRecorderStart=o,this.onRecorderDataAvailable=a,this.onRecorderError=s,this.recorderStarted=!1,this.streamId=n.id,yt.Logging.Logger.verbose(`StreamRecorder.constructor: stream id: ${n.id} video track: ${n.getVideoTracks().map((e=>`id: ${e.id} label: ${e.label}`))} audio track: ${n.getAudioTracks().map((e=>`id: ${e.id} label: ${e.label}`))}`);try{this.recorderOptions=this.getRecorderOptions(n,e,t,c),yt.Logging.Logger.info(`StreamRecorder.ctor: ${this.streamId} using codec ${this.recorderOptions.mimeType}`),this.mediaRecorder=new MediaRecorder(n,this.recorderOptions),this.mediaRecorder.addEventListener("start",this.handleRecorderStart),this.mediaRecorder.addEventListener("dataavailable",this.handleRecorderDataAvailable),this.mediaRecorder.addEventListener("stop",i),this.mediaRecorder.addEventListener("error",this.handleRecorderError),this.mediaRecorder.addEventListener("resume",this.handleRecorderUnexpectedEvent),this.mediaRecorder.addEventListener("pause",this.handleRecorderUnexpectedEvent)}catch(e){yt.Logging.Logger.warning("Error instantiating StreamRecorder. Error:",e),s()}}startRecording(){if("recording"!==this.mediaRecorder.state){this.mediaRecorderStartTime=performance.now(),yt.Logging.Logger.verbose(`StreamRecorder.startRecording(): Starting recording of ${this.streamId}, type ${this.type}`);const e=1e3*Ir.targetBlobDurationSeconds;this.mediaRecorder.start(e),this.recorderStartTimeout=window.setTimeout(this.handleRecorderStartTimeout,2*e)}else yt.Logging.Logger.warning("StreamRecorder.startRecording(): called while MediaRecorder state is not recording.",this.streamId,this.mediaRecorder.state)}handleRecorderStart(){this.recorderStarted||(this.recorderStarted=!0,window.clearTimeout(this.recorderStartTimeout),this.logRecorderStart(),this.onRecorderStart())}handleRecorderDataAvailable(e){0===e.data.size&&yt.Logging.Logger.warning("StreamRecorder.handleRecorderDataAvailable(): 0-byte data received.",this.streamId,this.mediaRecorder.state),this.handleRecorderStart(),this.onRecorderDataAvailable(e)}handleRecorderStartTimeout(){yt.Logging.Logger.warning("StreamRecorder.handleRecorderStartTimeout: no data received after timeout.",this.streamId,performance.now()-this.mediaRecorderStartTime,this.mediaRecorder.state),this.onRecorderError()}handleRecorderError(e){const t=e;window.clearTimeout(this.recorderStartTimeout),yt.Logging.Logger.warning("StreamRecorder.handleRecorderError: error from MediaRecorder.",this.streamId,t.error.name,t.error,this.mediaRecorder.state),this.onRecorderError()}handleRecorderUnexpectedEvent(e){yt.Logging.Logger.warning("StreamRecorder.handleRecorderUnexpectedEvent: unexpected MediaRecorder event.",this.streamId,e,this.mediaRecorder.state)}logRecorderStart(){const e=this.recorderOptions.videoBitsPerSecond,t=this.recorderOptions.audioBitsPerSecond,n=e+t,r=this.mediaRecorder.videoBitsPerSecond||0,o=this.mediaRecorder.audioBitsPerSecond||0,a=r+o;yt.Logging.Logger.verbose(`StreamRecorder.logRecorderStart(): Started recording of ${this.streamId} with timeslice ${Ir.targetBlobDurationSeconds}sec with requested V+A=C bitrate ${e}+${t}=${n}`+(a?`, actual bitrate ${r}+${o}=${a}`:"")+`. Started ${performance.now()-this.mediaRecorderStartTime}ms after start() call.`)}stopRecording(){yt.Logging.Logger.verbose(`StreamRecorder.stopRecording(): Stopping recording of ${this.streamId}`),this.mediaRecorder&&"recording"===this.mediaRecorder.state&&(window.clearTimeout(this.recorderStartTimeout),this.mediaRecorder.stop(),yt.Logging.Logger.verbose(`StreamRecorder.stopRecording(): Stopped recording of ${this.streamId}`))}getData(){if(this.streamRecorderData.recordedDataComplete)return new Blob(this.streamRecorderData.recordedData);throw"StreamRecorder:getData() called before recordedDataComplete"}getRecorderOptions(e,t,n,r){const o={videoBitsPerSecond:0,audioBitsPerSecond:0},a=e.getVideoTracks()[0];if(a){const e=a.getSettings(),t=e.frameRate||30,n=30*Math.sqrt(t/30),r=e.width*e.height*n*Ir.videoBitrateCoefficient;o.videoBitsPerSecond=Math.clamp(r,Ir.videoBitrateMin,Ir.videoBitrateMax),yt.Logging.Logger.verbose(`StreamRecorder.getRecorderOptions(): Video settings: ${e.width} x ${e.height} x ${e.frameRate}p `+(e.frameRate?"":`(clamped to ${t}p) `)+`(target bit rate: ${r} bps = ${e.width} x ${e.height} x ${n} `+`x ${Ir.videoBitrateCoefficient}`+(o.videoBitsPerSecond!==r?`, clamped to: ${o.videoBitsPerSecond} bps`:"")+")")}return n===sr.Standard||n===sr.High?o.audioBitsPerSecond=128e3:n===sr.Ultra&&(o.audioBitsPerSecond=192e3),o.mimeType=r,o}}Ir.videoBitrateCoefficient=.13,Ir.videoBitrateMin=1e6,Ir.videoBitrateMax=1e7,Ir.targetBlobDurationSeconds=10,Er([Ze],Ir.prototype,"handleRecorderStart",null),Er([Ze],Ir.prototype,"handleRecorderDataAvailable",null),Er([Ze],Ir.prototype,"handleRecorderStartTimeout",null),Er([Ze],Ir.prototype,"handleRecorderError",null),Er([Ze],Ir.prototype,"handleRecorderUnexpectedEvent",null);var Tr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Nr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class Rr{constructor(e,t,n,r,o,a,{secondaryOnly:i=!1}={}){this.t=e,this.recording=t,this.qualityLevel=n,this.onRecordingActionCompleted=r,this.onPreviewReady=o,this.preferredMimeType=a,this.streamInfoById={},this.secondaryOnly=i}get isRecording(){return void 0!==this.recordingStartTime}get startTime(){return this.recordingStartTime}updateStreams(e,t,n){if(e.length>0){const t=[...e];if(this.secondaryOnly)this.addStream({audioStream:n,isPrimary:!0});else{const e=t.shift();this.addStream({videoStream:e,audioStream:n,isPrimary:!0})}t.forEach((e=>{this.addStream({videoStream:e,isPrimary:!1})}))}t.length>0&&t.forEach((r=>{this.addStream({videoStream:r,audioStream:0==e.length&&t[0]===r?n:null,isPrimary:!1})})),0!=e.length||this.secondaryOnly||this.addStream({audioStream:n,isPrimary:!0}),this.stopDeselectedStreams([...e,...t])}addStream({videoStream:e,audioStream:t,isPrimary:n}){var r,o;yt.Logging.Logger.verbose(`SessionRecorder.addStream: video stream ${(null==e?void 0:e.id)||"(none)"}, audio stream ${(null==t?void 0:t.id)||"(none)"}, isPrimary=${n}`);let a=e||t;if(a.id in this.streamInfoById&&this.streamInfoById[a.id].isPrimary===n&&!this.streamInfoById[a.id].isEnded)return;if(n){const t=null==e?void 0:e.getVideoTracks()[0].id;for(const e in this.streamInfoById){const n=this.streamInfoById[e],o=null===(r=n.stream.getVideoTracks()[0])||void 0===r?void 0:r.id;n.isPrimary&&!n.isEnded&&t!==o&&(yt.Logging.Logger.verbose(`SessionRecorder.addStream: Stopping stream ID ${e} because a new primary is added.`),n.streamRecorder.stopRecording())}}if(e&&t?(a=new MediaStream(t.getAudioTracks().concat(e.getVideoTracks())),yt.Logging.Logger.verbose(`SessionRecorder.addStream: combined A+V streams into stream ${a.id}`)):t&&(a=new MediaStream(t.getAudioTracks()),yt.Logging.Logger.verbose(`SessionRecorder.addStream: wrapped audio stream into stream ${a.id}`)),e){const t=e.getVideoTracks()[0].id;for(const e in this.streamInfoById){const r=this.streamInfoById[e],o=r.stream.getVideoTracks(),i=o&&o.length>0&&o[0].id;if(e!==a.id&&t===i){if(n===r.isPrimary&&!r.isEnded)return;r.streamRecorder.stopRecording()}}}if(t&&n){const n=t.getAudioTracks()[0].id;for(const t in this.streamInfoById){const r=this.streamInfoById[t],o=r.stream.getAudioTracks(),i=o&&o.length>0&&o[0].id;if(t!==a.id&&n===i&&r.isPrimary&&!r.isEnded)if(e)r.stream.getVideoTracks().length<1&&!r.isEnded&&r.streamRecorder.stopRecording();else{if(!(r.stream.getVideoTracks().length>0)||r.isEnded)return;r.streamRecorder.stopRecording()}}}const i=n?ir.Primary:ir.Secondary,s=function(e){const t=[e,"video/webm;codecs=h264","video/webm"];for(const e of t)if(void 0!==e&&MediaRecorder.isTypeSupported(e))return e;throw`Couldn't find supported mime type, checked: ${t.join(", ")}`}(this.preferredMimeType),c=null===(o=a.getVideoTracks()[0])||void 0===o?void 0:o.getSettings();c&&(c.width<64||c.height<64)&&window.alert(this.t("SmallVideoStreamMessage"));let u=".webm";"video/mp4"===s&&(u=".mp4");const l=Or()+u;yt.Logging.Logger.verbose(`SessionRecorder.addStream: stream ${a.id} is assigned filename ${l}`);const d={recorder:null,recordedData:[],recordedDataComplete:!1,fileName:l,mimeType:s,recorderType:i},p=new Ir(i,this.qualityLevel,a,d,(()=>this.handleStreamRecorderStart(a.id)),(e=>this.handleStreamRecorderDataAvailable(e.data,d)),(()=>this.handleStreamRecorderStop(a.id)),(()=>this.handleStreamRecorderError(a.id)),this.preferredMimeType);this.streamInfoById[a.id]={stream:a,isPrimary:n,isAudioOnly:!e,isEnded:!1,streamRecorderData:d,streamRecorder:p},d.recorder=p,this.isRecording&&p.startRecording()}stopDeselectedStreams(e){const t=e.map((e=>e.getVideoTracks())).reduce(((e,t)=>(e.push(...t),e)),[]);for(const e in this.streamInfoById){const n=this.streamInfoById[e],r=n.stream.getVideoTracks(),o=r.some((e=>t.some((t=>t.id===e.id))));!n.isPrimary&&r.length>0&&!o&&!n.isEnded&&n.streamRecorder.stopRecording()}}startRecording(){this.recordingStartTime=new Date,Object.keys(this.streamInfoById).forEach((e=>{this.streamInfoById[e].streamRecorder.startRecording()})),this.onRecordingActionCompleted(this.recordingStartTime)}startUploading(e){return Nr(this,void 0,void 0,(function*(){const t=e();for(const e in this.streamInfoById){const n=this.streamInfoById[e];if(!this.secondaryOnly||!n.isPrimary){const e=[...n.streamRecorderData.recordedData];for(const r of e)t.appendDataToFile(n.streamRecorderData,r)}}this.recordingStopTime&&(yield t.complete())}))}stopRecording(){Object.keys(this.streamInfoById).forEach((e=>{this.streamInfoById[e].streamRecorderData.recorder.stopRecording()})),this.recordingStartTime=void 0,this.secondaryOnly&&this.finalizeIfComplete()}deleteRecording(){return this.recording.getUploader()?this.recording.getUploader().deleteUpload():Promise.resolve()}getDeliveryInfo(){const e={primaryStreams:[],secondaryStreams:[],captions:[],slideDecks:[],documents:[],duration:0,isBroadcast:!1};let t=Number.MAX_SAFE_INTEGER;for(const e in this.streamInfoById){const n=this.streamInfoById[e];n.isPrimary&&(t=Math.min(t,n.streamRecorderData.absoluteStart))}for(const n in this.streamInfoById){const r=this.streamInfoById[n],o=new Blob(r.streamRecorderData.recordedData);if(o.size>0){const a={id:n,mediaFileType:15,url:URL.createObjectURL(o),relativeStart:(r.streamRecorderData.absoluteStart-t)/1e3,length:r.streamRecorderData.duration,isAudioOnly:r.isAudioOnly,segments:[]};r.isPrimary?e.primaryStreams.push(a):e.secondaryStreams.push(a)}}return e}handleStreamRecorderStart(e){const t=this.streamInfoById[e];if(!t)throw`Stream ${e} not found in streams map`;t.streamRecorderData.absoluteStart=Date.now()}handleStreamRecorderStop(e){const t=this.streamInfoById[e];this.streamInfoById[e].isEnded=!0,t.streamRecorderData.recordedDataComplete=!0,t.streamRecorderData.duration=(Date.now()-t.streamRecorderData.absoluteStart)/1e3,this.finalizeIfComplete()}handleStreamRecorderError(e){window.alert(this.t("StreamRecorderErrorMessage"))}finalizeIfComplete(){if(!(Object.keys(this.streamInfoById).some((e=>!this.streamInfoById[e].streamRecorderData.recordedDataComplete))||this.secondaryOnly&&this.recordingStartTime)){this.completeRecording();const e={blob:this.getPreviewBlob(),delivery:this.getDeliveryInfo()};this.onPreviewReady(e)}}getPreviewBlob(){let e;if(!this.isRecording)if(this.secondaryOnly){const t=Object.keys(this.streamInfoById).map((e=>this.streamInfoById[e])).filter((e=>e.streamRecorderData.recordedData.length)).sort(((e,t)=>e.streamRecorderData.absoluteStart-t.streamRecorderData.absoluteStart))[0];yt.Logging.Logger.verbose(`SessionRecorder.getPreviewBlob: returning secondary stream ${t.stream.id} for preview.`),e=new Blob(t.streamRecorderData.recordedData,{type:t.streamRecorderData.mimeType})}else{const t=Object.keys(this.streamInfoById).map((e=>this.streamInfoById[e])).filter((e=>e.isPrimary&&e.streamRecorderData.recordedData.length)).sort(((e,t)=>e.streamRecorderData.absoluteStart-t.streamRecorderData.absoluteStart))[0];let n;0===t.stream.getVideoTracks().length&&(n=Object.keys(this.streamInfoById).map((e=>this.streamInfoById[e])).filter((e=>!e.isPrimary&&e.stream.getVideoTracks().length>0&&e.stream.getAudioTracks().length>0&&Math.abs(e.streamRecorderData.absoluteStart-t.streamRecorderData.absoluteStart)<1e3&&e.streamRecorderData.recordedData.length)).sort(((e,t)=>e.streamRecorderData.absoluteStart-t.streamRecorderData.absoluteStart))[0]),n?(yt.Logging.Logger.verbose(`SessionRecorder.getPreviewBlob: returning secondary stream ${n.stream.id} for preview.`),e=new Blob(n.streamRecorderData.recordedData,{type:n.streamRecorderData.mimeType})):(yt.Logging.Logger.verbose(`SessionRecorder.getPreviewBlob: returning primary stream ${t.stream.id} for preview.`),e=new Blob(t.streamRecorderData.recordedData,{type:t.streamRecorderData.mimeType}))}return e}handleStreamRecorderDataAvailable(e,t){if(e.size>0){t.recordedData.push(e);const n=t.recordedData.reduce(((e,t)=>e+t.size),0);yt.Logging.Logger.verbose(`SessionRecorder.receiveStreamData(): Received ${e.size} bytes for file=${t.fileName}, total=${n}`),this.secondaryOnly&&t.recorderType!==ir.Secondary||this.recording.getUploader()&&this.recording.getUploader().appendDataToFile(t,e)}else yt.Logging.Logger.warning(`SessionRecorder.receiveStreamData(): Received 0 byte data for file=${t.fileName}`)}completeRecording(){this.recordingStopTime=new Date,this.recording.getUploader()&&this.recording.getUploader().complete(),this.onRecordingActionCompleted(this.recordingStartTime)}}Tr([Ze],Rr.prototype,"handleStreamRecorderStart",null),Tr([Ze],Rr.prototype,"handleStreamRecorderStop",null),Tr([Ze],Rr.prototype,"handleStreamRecorderError",null),Tr([Ze],Rr.prototype,"handleStreamRecorderDataAvailable",null);var jr,Br,_r=n(105),Dr=n.n(_r);function Mr(){return Dr()('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Panopto/Scripts/Panopto/Bundles/",n(n.s=0)}([function(e,t,n){"use strict";self.postMessage({ready:!0});let r=0;onmessage=e=>{r=e.data||0;const t=()=>{postMessage({time:performance.now()}),r>0&&setTimeout(t,r)};t()}}]);\n',"Worker",void 0,void 0)}!function(e){e[e.None=0]="None",e[e.Blur=1]="Blur",e[e.Overlay=2]="Overlay",e[e.Default=3]="Default",e[e.Custom=4]="Custom"}(jr||(jr={})),function(e){e[e.Off=0]="Off",e[e.Person=1]="Person",e[e.People=2]="People"}(Br||(Br={}));const $r={countDown:!0,forceTile:!1,renderTileVideo:!1,selectedAudioDeviceIDs:[],selectedVideoDeviceIDs:[],qualityLevel:sr.Standard,backgroundMode:jr.None,smartCameraMode:Br.Off};class Pr{constructor(e,t,n,{forcePullMode:r=!1}={}){this.stream=e.captureStream(0),this.trackRequiringRequestFrame=this.stream.getTracks()[0],!r&&"requestFrame"in this.trackRequiringRequestFrame||(0===t&&(t=n),yt.Logging.Logger.info(`CanvasMediaStream.constructor: using pull mode at ${t} fps.`),this.stream=e.captureStream(t),this.trackRequiringRequestFrame=void 0)}requestFrameIfRequired(){this.trackRequiringRequestFrame&&this.trackRequiringRequestFrame.requestFrame()}}class Lr{constructor(){this.frameRendered=0,this.frameDropped=0,this._lastReset=performance.now()}get lastReset(){return this._lastReset}logFrameRendered(){++this.frameRendered}logFrameDropped(){++this.frameDropped}formatFrameLogAndReset(){const e=(performance.now()-this.lastReset)/1e3,t=(this.frameRendered/(this.frameRendered+this.frameDropped)*100).toPrecision(3),n=(this.frameRendered/e).toPrecision(3);return this.frameRendered=0,this.frameDropped=0,this._lastReset=performance.now(),`${t}% @ ${n} fps`}}class Fr{constructor(e,t,n){if(!(e instanceof AudioNode))throw new Error("Oscilloscope source must be an AudioNode");e instanceof AnalyserNode?this.analyser=e:(this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,e.connect(this.analyser),this.localAnalyser=!0),this.setContext(n),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount)}setContext(e){this.ctx=e,this.ctx.strokeStyle="white"}dispose(){this.localAnalyser&&this.analyser.disconnect()}clear(){this.ctx&&this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}draw(e,t,n,r){if(this.ctx){this.clear(),this.ctx.strokeStyle="white",void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=this.ctx.canvas.width-e),void 0===r&&(r=this.ctx.canvas.height-t),this.analyser.getByteTimeDomainData(this.timeDomain),this.step=n/this.timeDomain.length,this.ctx.beginPath();for(let n=0;n<this.timeDomain.length;n+=2)this.percent=this.timeDomain[n]/256,this.x=e+n*this.step,this.y=t+r*this.percent,this.ctx.lineTo(this.x,this.y);this.ctx.stroke()}}}class zr extends Be.Component{render(){return Be.createElement("div",{className:"smart-cam-loading"+(this.props.isVisible?" visible":""),title:this.props.t("SmartCamInitializing")},dn.Spinner)}}var Ur=gt("webrecorder")(zr),Wr="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z",Vr="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z",qr="M2.75,7L4.03,5.75L13.26,15L20,21.72L18.73,23L15.73,20H4V17C4,15.14 6.61,13.92 9.09,13.36L2.75,7M20,17V19.18L18.1,17.28V17C18.1,16.74 17.6,16.35 16.8,16L14,13.18C16.71,13.63 20,14.91 20,17M5.9,17V18.1H13.83L10.72,15C8.19,15.3 5.9,16.45 5.9,17M12,4A4,4 0 0,1 16,8C16,9.95 14.6,11.58 12.75,11.93L8.07,7.25C8.42,5.4 10.05,4 12,4M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6Z",Gr="M14,8.5A1.5,1.5 0 0,0 12.5,10A1.5,1.5 0 0,0 14,11.5A1.5,1.5 0 0,0 15.5,10A1.5,1.5 0 0,0 14,8.5M14,12.5A1.5,1.5 0 0,0 12.5,14A1.5,1.5 0 0,0 14,15.5A1.5,1.5 0 0,0 15.5,14A1.5,1.5 0 0,0 14,12.5M10,17A1,1 0 0,0 9,18A1,1 0 0,0 10,19A1,1 0 0,0 11,18A1,1 0 0,0 10,17M10,8.5A1.5,1.5 0 0,0 8.5,10A1.5,1.5 0 0,0 10,11.5A1.5,1.5 0 0,0 11.5,10A1.5,1.5 0 0,0 10,8.5M14,20.5A0.5,0.5 0 0,0 13.5,21A0.5,0.5 0 0,0 14,21.5A0.5,0.5 0 0,0 14.5,21A0.5,0.5 0 0,0 14,20.5M14,17A1,1 0 0,0 13,18A1,1 0 0,0 14,19A1,1 0 0,0 15,18A1,1 0 0,0 14,17M21,13.5A0.5,0.5 0 0,0 20.5,14A0.5,0.5 0 0,0 21,14.5A0.5,0.5 0 0,0 21.5,14A0.5,0.5 0 0,0 21,13.5M18,5A1,1 0 0,0 17,6A1,1 0 0,0 18,7A1,1 0 0,0 19,6A1,1 0 0,0 18,5M18,9A1,1 0 0,0 17,10A1,1 0 0,0 18,11A1,1 0 0,0 19,10A1,1 0 0,0 18,9M18,17A1,1 0 0,0 17,18A1,1 0 0,0 18,19A1,1 0 0,0 19,18A1,1 0 0,0 18,17M18,13A1,1 0 0,0 17,14A1,1 0 0,0 18,15A1,1 0 0,0 19,14A1,1 0 0,0 18,13M10,12.5A1.5,1.5 0 0,0 8.5,14A1.5,1.5 0 0,0 10,15.5A1.5,1.5 0 0,0 11.5,14A1.5,1.5 0 0,0 10,12.5M10,7A1,1 0 0,0 11,6A1,1 0 0,0 10,5A1,1 0 0,0 9,6A1,1 0 0,0 10,7M10,3.5A0.5,0.5 0 0,0 10.5,3A0.5,0.5 0 0,0 10,2.5A0.5,0.5 0 0,0 9.5,3A0.5,0.5 0 0,0 10,3.5M10,20.5A0.5,0.5 0 0,0 9.5,21A0.5,0.5 0 0,0 10,21.5A0.5,0.5 0 0,0 10.5,21A0.5,0.5 0 0,0 10,20.5M3,13.5A0.5,0.5 0 0,0 2.5,14A0.5,0.5 0 0,0 3,14.5A0.5,0.5 0 0,0 3.5,14A0.5,0.5 0 0,0 3,13.5M14,3.5A0.5,0.5 0 0,0 14.5,3A0.5,0.5 0 0,0 14,2.5A0.5,0.5 0 0,0 13.5,3A0.5,0.5 0 0,0 14,3.5M14,7A1,1 0 0,0 15,6A1,1 0 0,0 14,5A1,1 0 0,0 13,6A1,1 0 0,0 14,7M21,10.5A0.5,0.5 0 0,0 21.5,10A0.5,0.5 0 0,0 21,9.5A0.5,0.5 0 0,0 20.5,10A0.5,0.5 0 0,0 21,10.5M6,5A1,1 0 0,0 5,6A1,1 0 0,0 6,7A1,1 0 0,0 7,6A1,1 0 0,0 6,5M3,9.5A0.5,0.5 0 0,0 2.5,10A0.5,0.5 0 0,0 3,10.5A0.5,0.5 0 0,0 3.5,10A0.5,0.5 0 0,0 3,9.5M6,9A1,1 0 0,0 5,10A1,1 0 0,0 6,11A1,1 0 0,0 7,10A1,1 0 0,0 6,9M6,17A1,1 0 0,0 5,18A1,1 0 0,0 6,19A1,1 0 0,0 7,18A1,1 0 0,0 6,17M6,13A1,1 0 0,0 5,14A1,1 0 0,0 6,15A1,1 0 0,0 7,14A1,1 0 0,0 6,13Z",Hr="M22 20.7L3.3 2L2 3.3L3 4.3V19C3 20.1 3.9 21 5 21H19.7L20.7 22L22 20.7M5 19V6.3L12.6 13.9L11.1 15.8L9 13.1L6 17H15.7L17.7 19H5M8.8 5L6.8 3H19C20.1 3 21 3.9 21 5V17.2L19 15.2V5H8.8",Kr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Yr extends Be.Component{handleBackgroundModeToggle(){const{isBackgroundModeDefaultAvailable:e,isBackgroundModeCustomAvailable:t,backgroundMode:n}=this.props;let r;switch(n){case jr.None:r=jr.Blur;break;case jr.Blur:r=e?jr.Default:t?jr.Custom:jr.None;break;case jr.Default:r=t?jr.Custom:jr.None;break;case jr.Custom:r=jr.None}this.props.onBackgroundModeToggle(r)}handleSmartCameraModeToggle(){let e;switch(this.props.smartCameraMode){case Br.Off:e=Br.Person;break;case Br.Person:e=Br.People;break;case Br.People:e=Br.Off}this.props.onSmartCameraModeToggle(e)}render(){const{t:e}=this.props;let t,n,r,o;switch(this.props.backgroundMode){case jr.None:t=Hr,n=e("BackgroundNoneTooltip");break;case jr.Blur:t=Gr,n=e("BackgroundBlurTooltip");break;case jr.Default:n=e("BackgroundDefaultTooltip");break;case jr.Custom:n=e("BackgroundCustomTooltip")}switch(this.props.smartCameraMode){case Br.Off:r=qr,o=e("SmartCameraOff");break;case Br.Person:r=Wr,o=e("SmartCameraPerson");break;case Br.People:r=Vr,o=e("SmartCameraPeople")}const a=this.props.streamType===ar.VIDEO?e("Camera"):e("Display");return Be.createElement("div",{className:"action-overlay",role:"region","aria-label":`${a} ${e("AriaLabel_StreamActionOverlay")}`},!this.props.hideBackgroundButton&&this.props.isPrimary&&Be.createElement(Be.Fragment,null,t&&Be.createElement(Tt,{path:t,title:n,onActivate:this.handleBackgroundModeToggle}),!t&&Be.createElement(At,{title:n,onActivate:this.handleBackgroundModeToggle},Be.createElement("div",{className:"background-image",style:{backgroundImage:`url("${this.props.backgroundImageUrl}")`}}))),!this.props.hideSmartCameraButton&&this.props.isPrimary&&Be.createElement(Tt,{path:r,title:o,onActivate:this.handleSmartCameraModeToggle}),this.props.isPrimary&&Be.createElement("div",{className:"divider"}),this.props.streamType===ar.VIDEO&&Yr.pipEnabled&&Be.createElement(Tt,{path:"M19,11H11V17H19V11M23,19V5C23,3.88 22.1,3 21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19M21,19H3V4.97H21V19Z",title:e("Title_PictureInPictureButton"),onActivate:()=>this.props.onPictureInPictureToggle()}),Be.createElement(Tt,{path:"M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",title:e("Title_FullscreenButton"),onActivate:this.props.onFullscreenToggle}),Be.createElement("div",{className:"divider"}),Be.createElement(Tt,{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",title:e("Title_RemoveStreamButton"),onActivate:this.props.onRemoveStream}))}}Yr.pipEnabled="pictureInPictureEnabled"in document,Kr([Ze],Yr.prototype,"handleBackgroundModeToggle",null),Kr([Ze],Yr.prototype,"handleSmartCameraModeToggle",null);var Xr=gt("webrecorder")(Yr);function Zr(){return Dr()('/*! For license information please see index.worker.js.LICENSE.txt */\n!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Panopto/Scripts/Panopto/Bundles/",n(n.s=228)}([function(e,t,n){"use strict";n.r(t),n.d(t,"OptimizerConstructors",(function(){return Ct})),n.d(t,"AdadeltaOptimizer",(function(){return yt})),n.d(t,"AdagradOptimizer",(function(){return vt})),n.d(t,"AdamOptimizer",(function(){return wt})),n.d(t,"AdamaxOptimizer",(function(){return Nt})),n.d(t,"MomentumOptimizer",(function(){return jt})),n.d(t,"Optimizer",(function(){return gt})),n.d(t,"RMSPropOptimizer",(function(){return $t})),n.d(t,"SGDOptimizer",(function(){return Tt})),n.d(t,"Tensor",(function(){return te.a})),n.d(t,"TensorBuffer",(function(){return te.b})),n.d(t,"Variable",(function(){return te.c})),n.d(t,"Rank",(function(){return Et.a})),n.d(t,"sumOutType",(function(){return Et.b})),n.d(t,"upcastType",(function(){return Et.c})),n.d(t,"abs",(function(){return At.b})),n.d(t,"acos",(function(){return At.c})),n.d(t,"acosh",(function(){return At.d})),n.d(t,"add",(function(){return At.e})),n.d(t,"addN",(function(){return At.f})),n.d(t,"all",(function(){return At.g})),n.d(t,"any",(function(){return At.h})),n.d(t,"argMax",(function(){return At.i})),n.d(t,"argMin",(function(){return At.j})),n.d(t,"asin",(function(){return At.k})),n.d(t,"asinh",(function(){return At.l})),n.d(t,"atan",(function(){return At.m})),n.d(t,"atan2",(function(){return At.n})),n.d(t,"atanh",(function(){return At.o})),n.d(t,"avgPool",(function(){return At.p})),n.d(t,"avgPool3d",(function(){return At.q})),n.d(t,"basicLSTMCell",(function(){return At.r})),n.d(t,"batchToSpaceND",(function(){return At.w})),n.d(t,"batchNorm",(function(){return At.s})),n.d(t,"batchNorm2d",(function(){return At.t})),n.d(t,"batchNorm3d",(function(){return At.u})),n.d(t,"batchNorm4d",(function(){return At.v})),n.d(t,"bincount",(function(){return At.x})),n.d(t,"broadcastArgs",(function(){return At.z})),n.d(t,"broadcastTo",(function(){return At.A})),n.d(t,"buffer",(function(){return At.B})),n.d(t,"cast",(function(){return At.C})),n.d(t,"ceil",(function(){return At.D})),n.d(t,"clipByValue",(function(){return At.E})),n.d(t,"clone",(function(){return At.F})),n.d(t,"complex",(function(){return At.G})),n.d(t,"concat",(function(){return At.H})),n.d(t,"concat1d",(function(){return At.I})),n.d(t,"concat2d",(function(){return At.J})),n.d(t,"concat3d",(function(){return At.K})),n.d(t,"concat4d",(function(){return At.L})),n.d(t,"conv1d",(function(){return At.M})),n.d(t,"conv2d",(function(){return At.N})),n.d(t,"conv2dTranspose",(function(){return At.O})),n.d(t,"conv3d",(function(){return At.P})),n.d(t,"conv3dTranspose",(function(){return At.Q})),n.d(t,"cos",(function(){return At.R})),n.d(t,"cosh",(function(){return At.S})),n.d(t,"cumsum",(function(){return At.U})),n.d(t,"denseBincount",(function(){return At.V})),n.d(t,"depthToSpace",(function(){return At.W})),n.d(t,"depthwiseConv2d",(function(){return At.X})),n.d(t,"diag",(function(){return At.Y})),n.d(t,"dilation2d",(function(){return At.Z})),n.d(t,"div",(function(){return At.ab})),n.d(t,"divNoNan",(function(){return At.bb})),n.d(t,"dot",(function(){return At.cb})),n.d(t,"einsum",(function(){return At.eb})),n.d(t,"elu",(function(){return At.fb})),n.d(t,"equal",(function(){return At.hb})),n.d(t,"erf",(function(){return At.ib})),n.d(t,"exp",(function(){return At.jb})),n.d(t,"expandDims",(function(){return At.kb})),n.d(t,"expm1",(function(){return At.lb})),n.d(t,"eye",(function(){return At.mb})),n.d(t,"fill",(function(){return At.ob})),n.d(t,"floor",(function(){return At.pb})),n.d(t,"floorDiv",(function(){return At.qb})),n.d(t,"gather",(function(){return At.sb})),n.d(t,"greater",(function(){return At.ub})),n.d(t,"greaterEqual",(function(){return At.vb})),n.d(t,"imag",(function(){return At.xb})),n.d(t,"isFinite",(function(){return At.Bb})),n.d(t,"isInf",(function(){return At.Cb})),n.d(t,"isNaN",(function(){return At.Db})),n.d(t,"leakyRelu",(function(){return At.Eb})),n.d(t,"less",(function(){return At.Fb})),n.d(t,"lessEqual",(function(){return At.Gb})),n.d(t,"linspace",(function(){return At.Ib})),n.d(t,"localResponseNormalization",(function(){return At.Jb})),n.d(t,"log",(function(){return At.Kb})),n.d(t,"log1p",(function(){return At.Lb})),n.d(t,"logSigmoid",(function(){return At.Mb})),n.d(t,"logSoftmax",(function(){return At.Nb})),n.d(t,"logSumExp",(function(){return At.Ob})),n.d(t,"logicalAnd",(function(){return At.Pb})),n.d(t,"logicalNot",(function(){return At.Qb})),n.d(t,"logicalOr",(function(){return At.Rb})),n.d(t,"logicalXor",(function(){return At.Sb})),n.d(t,"matMul",(function(){return At.Ub})),n.d(t,"max",(function(){return At.Vb})),n.d(t,"maxPool",(function(){return At.Wb})),n.d(t,"maxPool3d",(function(){return At.Xb})),n.d(t,"maxPoolWithArgmax",(function(){return At.Yb})),n.d(t,"maximum",(function(){return At.Zb})),n.d(t,"mean",(function(){return At.ac})),n.d(t,"meshgrid",(function(){return At.bc})),n.d(t,"min",(function(){return At.cc})),n.d(t,"minimum",(function(){return At.dc})),n.d(t,"mirrorPad",(function(){return At.ec})),n.d(t,"mod",(function(){return At.fc})),n.d(t,"moments",(function(){return At.gc})),n.d(t,"mul",(function(){return At.ic})),n.d(t,"multiRNNCell",(function(){return At.jc})),n.d(t,"multinomial",(function(){return At.kc})),n.d(t,"neg",(function(){return At.lc})),n.d(t,"notEqual",(function(){return At.nc})),n.d(t,"oneHot",(function(){return At.oc})),n.d(t,"ones",(function(){return At.pc})),n.d(t,"onesLike",(function(){return At.qc})),n.d(t,"outerProduct",(function(){return At.sc})),n.d(t,"pad",(function(){return At.tc})),n.d(t,"pad1d",(function(){return At.uc})),n.d(t,"pad2d",(function(){return At.vc})),n.d(t,"pad3d",(function(){return At.wc})),n.d(t,"pad4d",(function(){return At.xc})),n.d(t,"pool",(function(){return At.yc})),n.d(t,"pow",(function(){return At.zc})),n.d(t,"prelu",(function(){return At.Ac})),n.d(t,"print",(function(){return At.Bc})),n.d(t,"prod",(function(){return At.Cc})),n.d(t,"rand",(function(){return At.Dc})),n.d(t,"randomGamma",(function(){return At.Ec})),n.d(t,"randomNormal",(function(){return At.Fc})),n.d(t,"randomUniform",(function(){return At.Gc})),n.d(t,"range",(function(){return At.Hc})),n.d(t,"real",(function(){return At.Ic})),n.d(t,"reciprocal",(function(){return At.Jc})),n.d(t,"relu",(function(){return At.Kc})),n.d(t,"relu6",(function(){return At.Lc})),n.d(t,"reshape",(function(){return At.Mc})),n.d(t,"reverse",(function(){return At.Nc})),n.d(t,"reverse1d",(function(){return At.Oc})),n.d(t,"reverse2d",(function(){return At.Pc})),n.d(t,"reverse3d",(function(){return At.Qc})),n.d(t,"reverse4d",(function(){return At.Rc})),n.d(t,"round",(function(){return At.Tc})),n.d(t,"rsqrt",(function(){return At.Uc})),n.d(t,"scalar",(function(){return At.Vc})),n.d(t,"selu",(function(){return At.Xc})),n.d(t,"separableConv2d",(function(){return At.Yc})),n.d(t,"setdiff1dAsync",(function(){return At.Zc})),n.d(t,"sigmoid",(function(){return At.ad})),n.d(t,"sign",(function(){return At.bd})),n.d(t,"sin",(function(){return At.dd})),n.d(t,"sinh",(function(){return At.ed})),n.d(t,"slice",(function(){return At.fd})),n.d(t,"slice1d",(function(){return At.gd})),n.d(t,"slice2d",(function(){return At.hd})),n.d(t,"slice3d",(function(){return At.id})),n.d(t,"slice4d",(function(){return At.jd})),n.d(t,"softmax",(function(){return At.kd})),n.d(t,"softplus",(function(){return At.ld})),n.d(t,"spaceToBatchND",(function(){return At.md})),n.d(t,"fft",(function(){return At.nb})),n.d(t,"ifft",(function(){return At.wb})),n.d(t,"irfft",(function(){return At.Ab})),n.d(t,"rfft",(function(){return At.Sc})),n.d(t,"split",(function(){return At.qd})),n.d(t,"sqrt",(function(){return At.rd})),n.d(t,"square",(function(){return At.sd})),n.d(t,"squaredDifference",(function(){return At.td})),n.d(t,"squeeze",(function(){return At.ud})),n.d(t,"stack",(function(){return At.vd})),n.d(t,"step",(function(){return At.wd})),n.d(t,"stridedSlice",(function(){return At.xd})),n.d(t,"sub",(function(){return At.zd})),n.d(t,"sum",(function(){return At.Ad})),n.d(t,"tan",(function(){return At.Bd})),n.d(t,"tanh",(function(){return At.Cd})),n.d(t,"tensor",(function(){return At.Dd})),n.d(t,"tensor1d",(function(){return At.Ed})),n.d(t,"tensor2d",(function(){return At.Fd})),n.d(t,"tensor3d",(function(){return At.Gd})),n.d(t,"tensor4d",(function(){return At.Hd})),n.d(t,"tensor5d",(function(){return At.Id})),n.d(t,"tensor6d",(function(){return At.Jd})),n.d(t,"tile",(function(){return At.Kd})),n.d(t,"topk",(function(){return At.Ld})),n.d(t,"truncatedNormal",(function(){return At.Nd})),n.d(t,"unique",(function(){return At.Od})),n.d(t,"unsortedSegmentSum",(function(){return At.Pd})),n.d(t,"unstack",(function(){return At.Qd})),n.d(t,"variable",(function(){return At.Rd})),n.d(t,"where",(function(){return At.Sd})),n.d(t,"whereAsync",(function(){return At.Td})),n.d(t,"zeros",(function(){return At.Ud})),n.d(t,"zerosLike",(function(){return At.Vd})),n.d(t,"booleanMaskAsync",(function(){return At.y})),n.d(t,"transpose",(function(){return At.Md})),n.d(t,"norm",(function(){return At.mc})),n.d(t,"movingAverage",(function(){return At.hc})),n.d(t,"scatterND",(function(){return At.Wc})),n.d(t,"sparseToDense",(function(){return At.od})),n.d(t,"gatherND",(function(){return At.tb})),n.d(t,"dropout",(function(){return At.db})),n.d(t,"enclosingPowerOfTwo",(function(){return At.gb})),n.d(t,"cosineWindow",(function(){return At.T})),n.d(t,"inTopKAsync",(function(){return At.zb})),n.d(t,"op",(function(){return At.rc})),n.d(t,"OP_SCOPE_SUFFIX",(function(){return At.a})),n.d(t,"image",(function(){return At.yb})),n.d(t,"linalg",(function(){return At.Hb})),n.d(t,"losses",(function(){return At.Tb})),n.d(t,"spectral",(function(){return At.pd})),n.d(t,"fused",(function(){return At.rb})),n.d(t,"signal",(function(){return At.cd})),n.d(t,"sparse",(function(){return At.nd})),n.d(t,"string",(function(){return At.yd})),n.d(t,"Reduction",(function(){return Rt.a})),n.d(t,"train",(function(){return _t})),n.d(t,"enableProdMode",(function(){return ut.g})),n.d(t,"enableDebugMode",(function(){return ut.f})),n.d(t,"disableDeprecationWarnings",(function(){return ut.c})),n.d(t,"deprecationWarn",(function(){return ut.b})),n.d(t,"disposeVariables",(function(){return ut.e})),n.d(t,"engine",(function(){return ut.h})),n.d(t,"memory",(function(){return ut.m})),n.d(t,"profile",(function(){return ut.n})),n.d(t,"tidy",(function(){return ut.t})),n.d(t,"dispose",(function(){return ut.d})),n.d(t,"keep",(function(){return ut.l})),n.d(t,"time",(function(){return ut.u})),n.d(t,"setBackend",(function(){return ut.r})),n.d(t,"ready",(function(){return ut.o})),n.d(t,"getBackend",(function(){return ut.k})),n.d(t,"removeBackend",(function(){return ut.q})),n.d(t,"findBackend",(function(){return ut.i})),n.d(t,"findBackendFactory",(function(){return ut.j})),n.d(t,"registerBackend",(function(){return ut.p})),n.d(t,"backend",(function(){return ut.a})),n.d(t,"setPlatform",(function(){return ut.s})),n.d(t,"getKernel",(function(){return je.c})),n.d(t,"getGradient",(function(){return je.b})),n.d(t,"getKernelsForBackend",(function(){return je.d})),n.d(t,"registerKernel",(function(){return je.f})),n.d(t,"registerGradient",(function(){return je.e})),n.d(t,"unregisterKernel",(function(){return je.h})),n.d(t,"unregisterGradient",(function(){return je.g})),n.d(t,"copyRegisteredKernels",(function(){return je.a})),n.d(t,"customGrad",(function(){return mt.a})),n.d(t,"grad",(function(){return mt.b})),n.d(t,"grads",(function(){return mt.c})),n.d(t,"valueAndGrad",(function(){return mt.d})),n.d(t,"valueAndGrads",(function(){return mt.e})),n.d(t,"variableGrads",(function(){return mt.f})),n.d(t,"Environment",(function(){return h.b})),n.d(t,"env",(function(){return h.c})),n.d(t,"ENV",(function(){return h.a})),n.d(t,"version_core",(function(){return it})),n.d(t,"nextFrame",(function(){return Ft.a})),n.d(t,"browser",(function(){return s})),n.d(t,"io",(function(){return r})),n.d(t,"math",(function(){return a})),n.d(t,"serialization",(function(){return u})),n.d(t,"test_util",(function(){return st})),n.d(t,"util",(function(){return ot})),n.d(t,"backend_util",(function(){return l})),n.d(t,"tensor_util",(function(){return at})),n.d(t,"slice_util",(function(){return i})),n.d(t,"gather_util",(function(){return o})),n.d(t,"scatter_util",(function(){return Me})),n.d(t,"device_util",(function(){return jn})),n.d(t,"kernel_impls",(function(){return d})),n.d(t,"KernelBackend",(function(){return En.b})),n.d(t,"DataStorage",(function(){return En.a})),n.d(t,"Abs",(function(){return Te.a})),n.d(t,"Acos",(function(){return Te.b})),n.d(t,"Acosh",(function(){return Te.c})),n.d(t,"Add",(function(){return Te.d})),n.d(t,"AddN",(function(){return Te.e})),n.d(t,"All",(function(){return Te.f})),n.d(t,"Any",(function(){return Te.g})),n.d(t,"ArgMax",(function(){return Te.h})),n.d(t,"ArgMin",(function(){return Te.i})),n.d(t,"Asin",(function(){return Te.j})),n.d(t,"Asinh",(function(){return Te.k})),n.d(t,"Atan",(function(){return Te.l})),n.d(t,"Atanh",(function(){return Te.n})),n.d(t,"Atan2",(function(){return Te.m})),n.d(t,"AvgPool",(function(){return Te.o})),n.d(t,"AvgPoolGrad",(function(){return Te.r})),n.d(t,"AvgPool3D",(function(){return Te.p})),n.d(t,"AvgPool3DGrad",(function(){return Te.q})),n.d(t,"BatchMatMul",(function(){return Te.s})),n.d(t,"BatchToSpaceND",(function(){return Te.t})),n.d(t,"Bincount",(function(){return Te.u})),n.d(t,"BroadcastTo",(function(){return Te.w})),n.d(t,"BroadcastArgs",(function(){return Te.v})),n.d(t,"Cast",(function(){return Te.x})),n.d(t,"Ceil",(function(){return Te.y})),n.d(t,"ClipByValue",(function(){return Te.z})),n.d(t,"Complex",(function(){return Te.A})),n.d(t,"ComplexAbs",(function(){return Te.B})),n.d(t,"Concat",(function(){return Te.C})),n.d(t,"Conv2D",(function(){return Te.D})),n.d(t,"Conv2DBackpropFilter",(function(){return Te.E})),n.d(t,"Conv2DBackpropInput",(function(){return Te.F})),n.d(t,"Conv3D",(function(){return Te.G})),n.d(t,"Conv3DBackpropFilterV2",(function(){return Te.H})),n.d(t,"Conv3DBackpropInputV2",(function(){return Te.I})),n.d(t,"Cos",(function(){return Te.J})),n.d(t,"Cosh",(function(){return Te.K})),n.d(t,"Cumsum",(function(){return Te.M})),n.d(t,"CropAndResize",(function(){return Te.L})),n.d(t,"DenseBincount",(function(){return Te.N})),n.d(t,"DepthToSpace",(function(){return Te.O})),n.d(t,"DepthwiseConv2dNative",(function(){return Te.P})),n.d(t,"DepthwiseConv2dNativeBackpropFilter",(function(){return Te.Q})),n.d(t,"DepthwiseConv2dNativeBackpropInput",(function(){return Te.R})),n.d(t,"Diag",(function(){return Te.S})),n.d(t,"Dilation2D",(function(){return Te.T})),n.d(t,"Dilation2DBackpropInput",(function(){return Te.V})),n.d(t,"Dilation2DBackpropFilter",(function(){return Te.U})),n.d(t,"RealDiv",(function(){return Te.mc})),n.d(t,"Einsum",(function(){return Te.W})),n.d(t,"Elu",(function(){return Te.X})),n.d(t,"EluGrad",(function(){return Te.Y})),n.d(t,"Erf",(function(){return Te.ab})),n.d(t,"Equal",(function(){return Te.Z})),n.d(t,"Exp",(function(){return Te.bb})),n.d(t,"ExpandDims",(function(){return Te.cb})),n.d(t,"Expm1",(function(){return Te.db})),n.d(t,"FFT",(function(){return Te.eb})),n.d(t,"Fill",(function(){return Te.fb})),n.d(t,"FlipLeftRight",(function(){return Te.gb})),n.d(t,"Floor",(function(){return Te.hb})),n.d(t,"FloorDiv",(function(){return Te.ib})),n.d(t,"FusedBatchNorm",(function(){return Te.kb})),n.d(t,"GatherV2",(function(){return Te.ob})),n.d(t,"GatherNd",(function(){return Te.nb})),n.d(t,"Greater",(function(){return Te.pb})),n.d(t,"GreaterEqual",(function(){return Te.qb})),n.d(t,"Identity",(function(){return Te.sb})),n.d(t,"IFFT",(function(){return Te.rb})),n.d(t,"Imag",(function(){return Te.tb})),n.d(t,"IsFinite",(function(){return Te.ub})),n.d(t,"IsInf",(function(){return Te.vb})),n.d(t,"IsNan",(function(){return Te.wb})),n.d(t,"LeakyRelu",(function(){return Te.zb})),n.d(t,"Less",(function(){return Te.Ab})),n.d(t,"LessEqual",(function(){return Te.Bb})),n.d(t,"LinSpace",(function(){return Te.Cb})),n.d(t,"Log",(function(){return Te.Db})),n.d(t,"Log1p",(function(){return Te.Eb})),n.d(t,"LogicalAnd",(function(){return Te.Gb})),n.d(t,"LogicalNot",(function(){return Te.Hb})),n.d(t,"LogicalOr",(function(){return Te.Ib})),n.d(t,"LogSoftmax",(function(){return Te.Fb})),n.d(t,"LRN",(function(){return Te.xb})),n.d(t,"LRNGrad",(function(){return Te.yb})),n.d(t,"Max",(function(){return Te.Jb})),n.d(t,"Maximum",(function(){return Te.Pb})),n.d(t,"MaxPool",(function(){return Te.Kb})),n.d(t,"MaxPoolGrad",(function(){return Te.Nb})),n.d(t,"MaxPool3D",(function(){return Te.Lb})),n.d(t,"MaxPool3DGrad",(function(){return Te.Mb})),n.d(t,"MaxPoolWithArgmax",(function(){return Te.Ob})),n.d(t,"Mean",(function(){return Te.Qb})),n.d(t,"Min",(function(){return Te.Rb})),n.d(t,"Minimum",(function(){return Te.Sb})),n.d(t,"MirrorPad",(function(){return Te.Tb})),n.d(t,"Mod",(function(){return Te.Ub})),n.d(t,"Multinomial",(function(){return Te.Vb})),n.d(t,"Multiply",(function(){return Te.Wb})),n.d(t,"Neg",(function(){return Te.Xb})),n.d(t,"NotEqual",(function(){return Te.bc})),n.d(t,"NonMaxSuppressionV3",(function(){return Te.Yb})),n.d(t,"NonMaxSuppressionV4",(function(){return Te.Zb})),n.d(t,"NonMaxSuppressionV5",(function(){return Te.ac})),n.d(t,"OnesLike",(function(){return Te.dc})),n.d(t,"OneHot",(function(){return Te.cc})),n.d(t,"Pack",(function(){return Te.ec})),n.d(t,"PadV2",(function(){return Te.fc})),n.d(t,"Pool",(function(){return Te.gc})),n.d(t,"Pow",(function(){return Te.hc})),n.d(t,"Prelu",(function(){return Te.ic})),n.d(t,"Prod",(function(){return Te.jc})),n.d(t,"Range",(function(){return Te.kc})),n.d(t,"Real",(function(){return Te.lc})),n.d(t,"Reciprocal",(function(){return Te.nc})),n.d(t,"Relu",(function(){return Te.oc})),n.d(t,"Reshape",(function(){return Te.qc})),n.d(t,"ResizeNearestNeighbor",(function(){return Te.tc})),n.d(t,"ResizeNearestNeighborGrad",(function(){return Te.uc})),n.d(t,"ResizeBilinear",(function(){return Te.rc})),n.d(t,"ResizeBilinearGrad",(function(){return Te.sc})),n.d(t,"Relu6",(function(){return Te.pc})),n.d(t,"Reverse",(function(){return Te.vc})),n.d(t,"Round",(function(){return Te.xc})),n.d(t,"Rsqrt",(function(){return Te.yc})),n.d(t,"ScatterNd",(function(){return Te.zc})),n.d(t,"Select",(function(){return Te.Ac})),n.d(t,"Selu",(function(){return Te.Bc})),n.d(t,"Slice",(function(){return Te.Gc})),n.d(t,"Sin",(function(){return Te.Ec})),n.d(t,"Sinh",(function(){return Te.Fc})),n.d(t,"Sign",(function(){return Te.Dc})),n.d(t,"Sigmoid",(function(){return Te.Cc})),n.d(t,"Softplus",(function(){return Te.Ic})),n.d(t,"Sqrt",(function(){return Te.Qc})),n.d(t,"Sum",(function(){return Te.Zc})),n.d(t,"SpaceToBatchND",(function(){return Te.Jc})),n.d(t,"SplitV",(function(){return Te.Pc})),n.d(t,"Softmax",(function(){return Te.Hc})),n.d(t,"SparseFillEmptyRows",(function(){return Te.Kc})),n.d(t,"SparseReshape",(function(){return Te.Lc})),n.d(t,"SparseSegmentMean",(function(){return Te.Mc})),n.d(t,"SparseSegmentSum",(function(){return Te.Nc})),n.d(t,"SparseToDense",(function(){return Te.Oc})),n.d(t,"SquaredDifference",(function(){return Te.Sc})),n.d(t,"Square",(function(){return Te.Rc})),n.d(t,"StridedSlice",(function(){return Te.Uc})),n.d(t,"StringNGrams",(function(){return Te.Vc})),n.d(t,"StringSplit",(function(){return Te.Wc})),n.d(t,"StringToHashBucketFast",(function(){return Te.Xc})),n.d(t,"Sub",(function(){return Te.Yc})),n.d(t,"Tan",(function(){return Te.ad})),n.d(t,"Tanh",(function(){return Te.bd})),n.d(t,"Tile",(function(){return Te.cd})),n.d(t,"TopK",(function(){return Te.dd})),n.d(t,"Transform",(function(){return Te.ed})),n.d(t,"Transpose",(function(){return Te.fd})),n.d(t,"Unique",(function(){return Te.gd})),n.d(t,"Unpack",(function(){return Te.hd})),n.d(t,"UnsortedSegmentSum",(function(){return Te.id})),n.d(t,"ZerosLike",(function(){return Te.jd})),n.d(t,"Step",(function(){return Te.Tc})),n.d(t,"FromPixels",(function(){return Te.jb})),n.d(t,"RotateWithOffset",(function(){return Te.wc})),n.d(t,"_FusedMatMul",(function(){return Te.kd})),n.d(t,"FusedConv2D",(function(){return Te.lb})),n.d(t,"FusedDepthwiseConv2D",(function(){return Te.mb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return K})),n.d(r,"listModels",(function(){return H})),n.d(r,"moveModel",(function(){return X})),n.d(r,"removeModel",(function(){return q})),n.d(r,"browserFiles",(function(){return oe})),n.d(r,"browserHTTPRequest",(function(){return be})),n.d(r,"concatenateArrayBuffers",(function(){return f.d})),n.d(r,"decodeWeights",(function(){return f.e})),n.d(r,"encodeWeights",(function(){return f.f})),n.d(r,"fromMemory",(function(){return xe})),n.d(r,"getLoadHandlers",(function(){return x})),n.d(r,"getModelArtifactsForJSON",(function(){return f.g})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return f.h})),n.d(r,"getSaveHandlers",(function(){return y})),n.d(r,"http",(function(){return me})),n.d(r,"isHTTPScheme",(function(){return he})),n.d(r,"loadWeights",(function(){return le})),n.d(r,"registerLoadRouter",(function(){return g})),n.d(r,"registerSaveRouter",(function(){return b})),n.d(r,"weightsLoaderFactory",(function(){return de})),n.d(r,"withSaveHandler",(function(){return ve}));var a={};n.r(a),n.d(a,"confusionMatrix",(function(){return Ne}));var s={};n.r(s),n.d(s,"fromPixelsAsync",(function(){return Re})),n.d(s,"toPixels",(function(){return _e})),n.d(s,"fromPixels",(function(){return Fe}));var o={};n.r(o),n.d(o,"prepareAndValidate",(function(){return De}));var i={};n.r(i),n.d(i,"assertParamsValid",(function(){return Pe})),n.d(i,"maskToAxes",(function(){return Le})),n.d(i,"computeOutShape",(function(){return Be})),n.d(i,"stridesWithElidedDims",(function(){return ze})),n.d(i,"getNormalizedAxes",(function(){return Ue})),n.d(i,"startIndicesWithElidedDims",(function(){return Ge})),n.d(i,"stopIndicesWithElidedDims",(function(){return He})),n.d(i,"stridesForAxis",(function(){return qe})),n.d(i,"startForAxis",(function(){return Ke})),n.d(i,"stopForAxis",(function(){return Xe})),n.d(i,"isSliceContinous",(function(){return Ye})),n.d(i,"computeFlatOffset",(function(){return Qe})),n.d(i,"parseSliceParams",(function(){return Ze})),n.d(i,"sliceInfo",(function(){return Je}));var u={};n.r(u),n.d(u,"Serializable",(function(){return tt})),n.d(u,"SerializationMap",(function(){return nt})),n.d(u,"registerClass",(function(){return rt}));var c={};n.r(c),n.d(c,"segOpComputeOptimalWindowSize",(function(){return wn})),n.d(c,"computeOutShape",(function(){return In})),n.d(c,"collectGatherOpShapeInfo",(function(){return Sn}));var l={};n.r(l),n.d(l,"axesAreInnerMostDims",(function(){return Dt.b})),n.d(l,"combineLocations",(function(){return Dt.c})),n.d(l,"computeOutAndReduceShapes",(function(){return Dt.d})),n.d(l,"expandShapeToKeepDim",(function(){return Dt.e})),n.d(l,"assertAxesAreInnerMostDims",(function(){return Dt.a})),n.d(l,"getAxesPermutation",(function(){return Dt.f})),n.d(l,"getUndoAxesPermutation",(function(){return Dt.h})),n.d(l,"getInnerMostAxes",(function(){return Dt.g})),n.d(l,"getBroadcastDims",(function(){return Mt.b})),n.d(l,"getReductionAxes",(function(){return Mt.c})),n.d(l,"assertAndGetBroadcastShape",(function(){return Mt.a})),n.d(l,"assertParamsConsistent",(function(){return Pt})),n.d(l,"computeOutShape",(function(){return Lt})),n.d(l,"computeDilation2DInfo",(function(){return Bt.d})),n.d(l,"computePool2DInfo",(function(){return Bt.e})),n.d(l,"computePool3DInfo",(function(){return Bt.f})),n.d(l,"computeConv2DInfo",(function(){return Bt.a})),n.d(l,"computeConv3DInfo",(function(){return Bt.b})),n.d(l,"computeDefaultPad",(function(){return Bt.c})),n.d(l,"tupleValuesAreOne",(function(){return Bt.i})),n.d(l,"eitherStridesOrDilationsAreOne",(function(){return Bt.h})),n.d(l,"convertConv2DDataFormat",(function(){return Bt.g})),n.d(l,"getFusedDyActivation",(function(){return zt.c})),n.d(l,"getFusedBiasGradient",(function(){return zt.b})),n.d(l,"applyActivation",(function(){return zt.a})),n.d(l,"shouldFuse",(function(){return zt.d})),n.d(l,"PARALLELIZE_THRESHOLD",(function(){return Vt})),n.d(l,"computeOptimalWindowSize",(function(){return Wt})),n.d(l,"slice_util",(function(){return i})),n.d(l,"upcastType",(function(){return Et.c})),n.d(l,"getImageCenter",(function(){return Ut})),n.d(l,"getReshaped",(function(){return Gt})),n.d(l,"getPermuted",(function(){return Ht})),n.d(l,"getReshapedPermuted",(function(){return qt})),n.d(l,"getSliceBeginCoords",(function(){return Kt})),n.d(l,"getSliceSize",(function(){return Xt})),n.d(l,"prepareAndValidate",(function(){return De})),n.d(l,"validateUpdateShape",(function(){return Me.validateUpdateShape})),n.d(l,"validateInput",(function(){return Me.validateInput})),n.d(l,"calculateShapes",(function(){return Me.calculateShapes})),n.d(l,"SELU_SCALEALPHA",(function(){return Yt})),n.d(l,"SELU_SCALE",(function(){return Qt})),n.d(l,"ERF_P",(function(){return Zt})),n.d(l,"ERF_A1",(function(){return Jt})),n.d(l,"ERF_A2",(function(){return en})),n.d(l,"ERF_A3",(function(){return tn})),n.d(l,"ERF_A4",(function(){return nn})),n.d(l,"ERF_A5",(function(){return rn})),n.d(l,"warn",(function(){return an.b})),n.d(l,"log",(function(){return an.a})),n.d(l,"mergeRealAndImagArrays",(function(){return sn})),n.d(l,"splitRealAndImagArrays",(function(){return on})),n.d(l,"complexWithEvenIndex",(function(){return un})),n.d(l,"complexWithOddIndex",(function(){return cn})),n.d(l,"getComplexWithIndex",(function(){return ln})),n.d(l,"assignToTypedArray",(function(){return dn})),n.d(l,"exponents",(function(){return pn})),n.d(l,"exponent",(function(){return hn})),n.d(l,"decodeEinsumEquation",(function(){return bn})),n.d(l,"getEinsumPermutation",(function(){return gn})),n.d(l,"checkEinsumDimSizes",(function(){return yn})),n.d(l,"getEinsumComputePath",(function(){return xn})),n.d(l,"isIdentityPermutation",(function(){return vn})),n.d(l,"prepareSplitSize",(function(){return kn})),n.d(l,"segment_util",(function(){return c})),n.d(l,"fromUint8ToStringArray",(function(){return Nn})),n.d(l,"fromStringArrayToUint8",(function(){return Tn}));var d={};n.r(d),n.d(d,"nonMaxSuppressionV3Impl",(function(){return $n.a})),n.d(d,"nonMaxSuppressionV4Impl",(function(){return $n.b})),n.d(d,"nonMaxSuppressionV5Impl",(function(){return $n.c})),n.d(d,"whereImpl",(function(){return Cn.a}));var p=n(4),h=(n(90),n(12)),f=n(23);class m{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==m.instance&&(m.instance=new m),m.instance}static registerSaveRouter(e){m.getInstance().saveRouters.push(e)}static registerLoadRouter(e){m.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return m.getHandlers(e,"save")}static getLoadHandlers(e,t){return m.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?m.getInstance().loadRouters:m.getInstance().saveRouters).forEach((t=>{const a=t(e,n);null!==a&&r.push(a)})),r}}const b=e=>m.registerSaveRouter(e),g=e=>m.registerLoadRouter(e),y=e=>m.getSaveHandlers(e),x=(e,t)=>m.getLoadHandlers(e,t),v="tensorflowjs",O="models_store",k="model_info_store";function w(){if(!Object(h.c)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function I(e){const t=e.result;t.createObjectStore(O,{keyPath:"modelPath"}),t.createObjectStore(k,{keyPath:"modelPath"})}class S{constructor(e){if(this.indexedDB=w(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(v,1);r.onupgradeneeded=()=>I(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(O,"readonly"),r=t.objectStore(O).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error(`Cannot find model with path \'${this.modelPath}\' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{const r=Object(f.h)(t),s=a.transaction(k,"readwrite");let o=s.objectStore(k);const i=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let u;i.onsuccess=()=>{u=a.transaction(O,"readwrite");const i=u.objectStore(O).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});i.onsuccess=()=>e({modelArtifactsInfo:r}),i.onerror=e=>{o=s.objectStore(k);const t=o.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(i.error)),t.onerror=e=>(a.close(),n(i.error))}},i.onerror=e=>(a.close(),n(i.error)),s.oncomplete=()=>{null==u?a.close():u.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)}))}}S.URL_SCHEME="indexeddb://";const N=e=>{return Object(h.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(S.URL_SCHEME)?(t=e.slice(S.URL_SCHEME.length),new S(t)):null;var t};m.registerSaveRouter(N),m.registerLoadRouter(N);class T{constructor(){this.indexedDB=w()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(v,1);n.onupgradeneeded=()=>I(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(k,"readonly"),s=a.objectStore(k).getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(S.URL_SCHEME)?t.slice(S.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(v,1);r.onupgradeneeded=()=>I(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(k,"readwrite"),o=s.objectStore(k),i=o.get(e);let u;i.onsuccess=()=>{if(null==i.result)return a.close(),n(new Error(`Cannot find model with path \'${e}\' in IndexedDB.`));{const r=o.delete(e),s=()=>{u=a.transaction(O,"readwrite");const r=u.objectStore(O).delete(e);r.onsuccess=()=>t(i.result.modelArtifactsInfo),r.onerror=e=>n(i.error)};r.onsuccess=s,r.onerror=e=>(s(),a.close(),n(i.error))}},i.onerror=e=>(a.close(),n(i.error)),s.oncomplete=()=>{null==u?a.close():u.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)}))}}var j=n(6);const $="/",C="tensorflowjs_models",E="info",A="model_topology",R="weight_specs",_="weight_data",F="model_metadata";function D(e){return{info:[C,e,E].join($),topology:[C,e,A].join($),weightSpecs:[C,e,R].join($),weightData:[C,e,_].join($),modelMetadata:[C,e,F].join($)}}function M(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function P(e){const t=e.split($);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join($)}class L{constructor(e){if(!Object(h.c)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=D(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Object(f.h)(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,Object(f.a)(e.weightData));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch(e){throw M(this.keys),new Error(`Failed to save model \'${this.modelPath}\' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name \'${this.modelPath}\'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model \'${this.modelPath}\' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model \'${this.modelPath}\' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model \'${this.modelPath}\' are missing.`);return t.weightData=Object(f.b)(s),t}}L.URL_SCHEME="localstorage://";const B=e=>{return Object(h.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(L.URL_SCHEME)?(t=e.slice(L.URL_SCHEME.length),new L(t)):null;var t};m.registerSaveRouter(B),m.registerLoadRouter(B);class z{constructor(){Object(j.b)(Object(h.c)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Object(j.b)("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=C+$,n=$+E;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){e[P(a)]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){var t;const n=D(e=(t=e).startsWith(L.URL_SCHEME)?t.slice(L.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path \'${e}\'`);const r=JSON.parse(this.LS.getItem(n.info));return M(n),r}}const V="://";class W{constructor(){this.managers={}}static getInstance(){return null==W.instance&&(W.instance=new W),W.instance}static registerManager(e,t){Object(j.b)(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(V)&&(e=e.slice(0,e.indexOf(V))),Object(j.b)(e.length>0,(()=>"scheme must not be an empty string."));const n=W.getInstance();Object(j.b)(null==n.managers[e],(()=>`A model store manager is already registered for scheme \'${e}\'.`)),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme \'${e}\'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function U(e){if(-1===e.indexOf(V))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${W.getSchemes().join(",")}`);return{scheme:e.split(V)[0],path:e.split(V)[1]}}async function G(e,t,n=!1){Object(j.b)(e!==t,(()=>`Old path and new path are the same: \'${e}\'`));const r=m.getLoadHandlers(e);Object(j.b)(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),Object(j.b)(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const a=r[0],s=m.getSaveHandlers(t);Object(j.b)(s.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),Object(j.b)(s.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const o=s[0],i=U(e).scheme,u=U(e).path,c=i===U(e).scheme,l=await a.load();n&&c&&await W.getManager(i).removeModel(u);const d=await o.save(l);return n&&!c&&await W.getManager(i).removeModel(u),d.modelArtifactsInfo}async function H(){const e=W.getSchemes(),t={};for(const n of e){const e=await W.getManager(n).listModels();for(const r in e){t[n+V+r]=e[r]}}return t}async function q(e){const t=U(e);return W.getManager(t.scheme).removeModel(t.path)}async function K(e,t){return G(e,t,!1)}async function X(e,t){return G(e,t,!0)}class Y{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser\'s encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if(Object(h.c)().get("IS_BROWSER")){Object(h.c)().setPlatform("browser",new Y);try{W.registerManager(L.URL_SCHEME,new z)}catch(e){}try{W.registerManager(S.URL_SCHEME,new T)}catch(e){}}n(215);var Q=n(33),Z=n(18),J=n(42),ee=n(100),te=n(17);Object(p.b)();const ne={buffer:Q.a,cast:Z.a,clone:J.a,print:ee.a};Object(te.e)(ne);function re(e){return new Promise((e=>setTimeout(e))).then(e)}class ae{constructor(e){if(!Object(h.c)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ae.URL_SCHEME)&&(e=e.slice(ae.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=Object(f.i)(e,n),a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),s=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=a,await re((()=>s.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await re((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Object(f.h)(e)}}}}ae.URL_SCHEME="downloads://";class se{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),a=r.modelTopology;if(null==a)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:a});const s=Object(f.g)(r,(e=>this.loadWeights(e)));e(s)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file \'${this.jsonFile.name}\'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),a=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(a).then((e=>[t,Object(f.d)(e)]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const a=new FileReader;a.onload=e=>{const t=e.target.result;n(t)},a.onerror=t=>r(`Failed to weights data from file of path \'${e}\'.`),a.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>Object(f.c)(e.name))),r={};for(const a of e)a.paths.forEach((e=>{const a=Object(f.c)(e);if(-1!==t.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: \'${a}\'`);if(t.push(a),-1===n.indexOf(a))throw new Error(`Weight file with basename \'${a}\' is not provided.`);r[e]=this.weightsFiles[n.indexOf(a)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function oe(e){return new se(e)}function ie(e,t,n,r){!function(e){Object(j.b)(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Object(j.b)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),Object(j.b)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),Object(j.b)(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map((s=>(s.then((s=>{const o=n+ ++a/e.length*(r-n);return t(o),s})),s))))}m.registerSaveRouter((e=>Object(h.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ae.URL_SCHEME)?function(e="model"){return new ae(e)}(e.slice(ae.URL_SCHEME.length)):null));var ue=n(95);async function ce(e,t){null==t&&(t={});const n=null==t.fetchFunc?Object(h.c)().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),a=(null==t.onProgress?await Promise.all(r):await ie(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(a):await ie(a,t.onProgress,.5,1)}async function le(e,t="",n,r){return de((e=>ce(e,{requestInit:r})))(e,t,n)}function de(e){return async(t,n="",r)=>{const a=t.map((()=>!1)),s={},o=null!=r?r.map((()=>!1)):[],i=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const u="quantization"in e?e.quantization.dtype:e.dtype,c=ue.a[u]*j.O(e.shape),l=()=>{a[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((t,n)=>{t===e.name&&(l(),o[n]=!0)})):l(),i.push(e.name),n+=c}))})),!o.every((e=>e))){const e=r.filter(((e,t)=>!o[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \\nManifest JSON has weights with names: ${i.join(", ")}.`)}const u=a.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),c=[];u.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;c.push(t)}))}));const l=await e(c),d={};let p=0;return u.forEach((e=>{const n=t[e].paths.length;let r=0;for(let e=0;e<n;e++)r+=l[p+e].byteLength;const a=new ArrayBuffer(r),o=new Uint8Array(a);let i=0;for(let e=0;e<n;e++){const t=new Uint8Array(l[p+e]);o.set(t,i),i+=t.byteLength}s[e].forEach((e=>{const t=a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(f.e)(t,[e.manifestEntry]);for(const e in n)d[e]=n[e]})),p+=n})),d}}class pe{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Object(j.b)("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Object(h.c)().platform.fetch,Object(j.b)(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Object(j.b)(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=Object(f.i)(e,n);t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:Object(f.h)(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the \'pb2json\'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Object(f.g)(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,s=[];for(const t of e)s.push(...t.weights);const o=[],i=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):o.push(a+e+r);this.weightUrlConverter&&o.push(...await Promise.all(i));const u=await ce(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[s,Object(f.d)(u)]}}function he(e){return null!=e.match(pe.URL_SCHEME_REGEX)}pe.URL_SCHEME_REGEX=/^https?:\\/\\//;const fe=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>he(e))):he(e),n)return me(e,t)}return null};function me(e,t){return new pe(e,t)}function be(e,t){return me(e,t)}m.registerSaveRouter(fe),m.registerLoadRouter(fe);class ge{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class ye{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function xe(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new ge(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ge({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ge({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function ve(e){return new ye(e)}var Oe=n(2),ke=n(19),we=n(94),Ie=n(3),Se=n(75);const Ne=Object(Ie.b)({confusionMatrix_:function(e,t,n){const r=Object(Oe.a)(e,"labels","confusionMatrix"),a=Object(Oe.a)(t,"predictions","confusionMatrix");j.b(null==n||n>0&&Number.isInteger(n),(()=>`If provided, numClasses must be a positive integer, but got ${n}`)),j.b(1===r.rank,(()=>`Expected the rank of labels to be 1, but got ${r.rank}`)),j.b(1===a.rank,(()=>`Expected the rank of predictions to be 1, but got ${a.rank}`)),j.b(r.shape[0]===a.shape[0],(()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`)),j.b(n>0&&Number.isInteger(n),(()=>`numClasses is required to be a positive integer, but got ${n}`));const s=Object(we.a)(Object(Z.a)(r,"int32"),n),o=Object(we.a)(Object(Z.a)(a,"int32"),n),i=Object(Se.a)(s),u=Object(ke.a)(i,o);return Object(Z.a)(u,"int32")}});var Te=n(5),je=n(46),$e=n(127);let Ce;function Ee(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,o=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);i=!0}if(a){const t=2;if(a&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=Object(je.c)(Te.jb,p.a.backendName)){const n={pixels:e},r={numChannels:t};return p.a.runKernel(Te.jb,n,r)}const[u,c]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let l,d;if(o)l=e.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)l=e.data;else if(s||a||i){if(null==Ce)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Ce=new OffscreenCanvas(1,1).getContext("2d")}else Ce=document.createElement("canvas").getContext("2d");Ce.canvas.width=u,Ce.canvas.height=c,Ce.drawImage(e,0,0,u,c),l=Ce.getImageData(0,0,u,c).data}if(4===t)d=new Int32Array(l);else{const e=u*c;d=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)d[n*t+e]=l[4*n+e]}const h=[c,u,t];return Object($e.a)(d,h,"int32")}function Ae(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function Re(e,t=3){let n=null;if(Object(h.c)().getBool("WRAP_TO_IMAGEBITMAP")&&Ae(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Ee(n,t)}async function _e(e,t){let n=Object(Oe.a)(e,"img","toPixels");if(!(e instanceof te.a)){const e=n;n=Object(Z.a)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${s}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),i="float32"===n.dtype?255:1,u=new Uint8ClampedArray(a*r*4);for(let e=0;e<r*a;++e){const t=[0,0,0,255];for(let r=0;r<s;r++){const a=o[e*s+r];if("float32"===n.dtype){if(a<0||a>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${a}.`)}else if("int32"===n.dtype&&(a<0||a>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${a}.`);1===s?(t[0]=a*i,t[1]=a*i,t[2]=a*i):t[r]=a*i}const r=4*e;u[r+0]=Math.round(t[0]),u[r+1]=Math.round(t[1]),u[r+2]=Math.round(t[2]),u[r+3]=Math.round(t[3])}if(null!=t){t.width=a,t.height=r;const e=t.getContext("2d"),n=new ImageData(u,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const Fe=Object(Ie.b)({fromPixels_:Ee});function De(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===Object(j.O)(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const a=t.shape,s=a[a.length-1];let o=1;for(let e=0;e<a.length-1;++e)o*=a[e];const i=e.shape,u=a.slice();u.pop();let c=1;for(let e=s;e<n;++e)c*=i[e],u.push(i[e]);const l=[...Object(j.j)(e.shape).map((e=>e/c)),1].slice(0,s);return[u,o,c,l]}var Me=n(79);function Pe(e,t,n){const r=e.shape.length;j.b(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),j.b(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let a=0;a<r;++a)j.b(t[a]+n[a]<=e.shape[a],(()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`))}function Le(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Be(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function ze(e,t,n,r){const a=[...e];for(let e=a.length;e<r.length;e++)a.push(1);for(let e=0;e<n;e++)0===e?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Ve(e,t,n){return n<=e?n:n-(t-1)}function We(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function Ue(e,t,n,r,a,s,o,i,u){const c=e.length;let l=new Array(c),d=new Array(c),p=new Array(c);if(t.length&&n>0){const u=t[0],c=n+1;l=Ge(o,u,c,r,e),d=He(i,u,c,a,e),p=ze(s,u,c,e)}else for(let t=0;t<c;t++)l[t]=Ke(o,r,s,e,t,u),d[t]=Xe(i,a,s,e,t,u),p[t]=qe(s,t,u);return{begin:l,end:d,strides:p}}function Ge(e,t,n,r,a){const s=[...a],o=We(n,t);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const o=Ve(t,n,a);let i=r[o];e&1<<o&&(i=0),s[a]=i}return s}function He(e,t,n,r,a){const s=[...a],o=We(n,t);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const o=Ve(t,n,a);let i=r[o];e&1<<o&&(i=Number.MAX_SAFE_INTEGER),s[a]=i}for(let e=0;e<s.length;e++){const t=a[e];s[e]<0&&(s[e]+=t),s[e]=j.i(0,s[e],a[e])}return s}function qe(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Ke(e,t,n,r,a,s){let o=t[a];const i=n[a]||1;(e&1<<a||s&1<<a||null==o)&&(o=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=r[a];return o<0&&(o+=u),o=j.i(0,o,u-1),o}function Xe(e,t,n,r,a,s){let o=t[a];const i=n[a]||1;(e&1<<a||s&1<<a||null==o)&&(o=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=r[a];return o<0&&(o+=u),o=i>0?j.i(0,o,u):j.i(-1,o,u-1),o}function Ye(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Qe(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ze(e,t,n){let r;const a=e.shape.length;let s;return r="number"==typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach((e=>{j.b(-1!==e,(()=>"slice() does not support negative begin indexing."))})),s=null==n?new Array(a).fill(-1):"number"==typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,s=s.map(((t,n)=>t>=0?t:(j.b(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,s]}function Je(e,t,n,r,a,s,o,i,u){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=o&&0!=(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:i,shrinkAxisMask:u};for(let e=0;e<d.dims;e++)l&&0!=(1<<e&i)&&d.numAddAxisAfterEllipsis++,1<<e&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);let h=!0,f=!0,m=!0;const b=[],g=[];for(let t=0;t<e.length;++t){if(0===p.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(p.shrinkAxisMask&1<<t),r=e[t];if(-1===r){b.push(n?1:-1);continue}const a=[p.beginMask&1<<t,p.endMask&1<<t],s=[p.strides[t]>0?0:-1,p.strides[t]>0?r:r-1];if(n&&p.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===p.strides[t];const o=!!(p.beginMask&1<<t&&p.endMask&1<<t);if(p.beginValid&&p.endValid){if(n){const e=p.begin[t]<0?r+p.begin[t]:p.begin[t];if(p.begin[t]=e,p.end[t]=p.begin[t]+1,e<0||e>=r)throw Error(`slice index ${p.begin[t]} of dimension ${t} out of bounds.`)}else p.begin[t]=et(p.begin[t],0,p.strides[t],r,a,s),p.end[t]=et(p.end[t],1,p.strides[t],r,a,s);const e=1===p.strides[t]&&0===p.begin[t]&&p.end[t]===r;h=h&&e,f=f&&(0===t&&1===p.strides[t]||e)}else h=h&&1===p.strides[t]&&o,f=f&&(0===t&&1===p.strides[t]||o);let i,u=!1;if(p.beginValid&&p.endValid?(i=p.end[t]-p.begin[t],u=!0):n?(i=1,u=!0):o&&r>=0&&(i=p.strides[t]<0?-r:r,u=!0),u){let e;e=0===i||i<0!=p.strides[t]<0?0:Math.trunc(i/p.strides[t])+(i%p.strides[t]!=0?1:0),b.push(e)}else b.push(-1)}for(let e=0;e<p.finalShapeGatherIndices.length;++e){const t=p.finalShapeGatherIndices[e];t>=0?g.push(b[t]):-2===t&&g.push(1)}return{finalShapeSparse:g.filter(((e,t)=>-2!==p.finalShapeGatherIndices[t])),finalShape:g,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function et(e,t,n,r,a,s){if(a[t])return n>0?s[t]:s[t+1&1];{const t=e<0?r+e:e;return t<s[0]?s[0]:t>s[1]?s[1]:t}}class tt{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class nt{constructor(){this.classNameMap={}}static getMap(){return null==nt.instance&&(nt.instance=new nt),nt.instance}static register(e){nt.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function rt(e){Object(j.b)(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),Object(j.b)("string"==typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),Object(j.b)(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),nt.register(e)}var at=n(13),st=n(88),ot=n(8);const it="3.11.0";var ut=n(15),ct=n(10),lt=n(16),dt=n(9),pt=n(43),ht=n(29),ft=n(28),mt=n(24),bt=n(14);class gt extends tt{minimize(e,t=!1,n){const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:a[e.name]})));this.applyGradients(e)}else this.applyGradients(a);return Object(ut.d)(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Object(mt.f)(e,t)}dispose(){null!=this.iterations_&&Object(ut.d)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Object(bt.a)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(gt,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class yt extends gt{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=p.a.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:Object(ut.t)((()=>Object(ft.a)(r).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:Object(ut.t)((()=>Object(ft.a)(r).variable(false)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;Object(ut.t)((()=>{const e=Object(ct.a)(Object(dt.a)(s,this.rho),Object(dt.a)(Object(ht.a)(a),1-this.rho)),t=Object(dt.a)(Object(lt.a)(Object(pt.a)(Object(ct.a)(o,this.epsilon)),Object(pt.a)(Object(ct.a)(s,this.epsilon))),a),n=Object(ct.a)(Object(dt.a)(o,this.rho),Object(dt.a)(Object(ht.a)(t),1-this.rho));s.assign(e),o.assign(n);const i=Object(ct.a)(Object(dt.a)(t,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Object(ut.d)(this.accumulatedGrads.map((e=>e.variable))),Object(ut.d)(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}yt.className="Adadelta",rt(yt);var xt=n(61);class vt extends gt{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:Object(ut.t)((()=>Object(xt.a)(r.shape,this.initialAccumulatorValue).variable(e)))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable;Object(ut.t)((()=>{const e=Object(ct.a)(s,Object(ht.a)(a));s.assign(e);const t=Object(ct.a)(Object(dt.a)(Object(lt.a)(a,Object(pt.a)(Object(ct.a)(e,p.a.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Object(ut.d)(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}vt.className="Adagrad",rt(vt);var Ot=n(54),kt=n(11);class wt extends gt{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Object(ut.t)((()=>{this.accBeta1=Object(bt.a)(t).variable(),this.accBeta2=Object(bt.a)(n).variable()})),null==r&&(this.epsilon=p.a.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Object(ut.t)((()=>{const n=Object(kt.a)(1,this.accBeta1),r=Object(kt.a)(1,this.accBeta2);t.forEach(((t,a)=>{const s=p.a.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:Object(ut.t)((()=>Object(ft.a)(s).variable(false)))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:`${t}/v`,variable:Object(ut.t)((()=>Object(ft.a)(s).variable(false)))});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const i=this.accumulatedFirstMoment[a].variable,u=this.accumulatedSecondMoment[a].variable,c=Object(ct.a)(Object(dt.a)(i,this.beta1),Object(dt.a)(o,1-this.beta1)),l=Object(ct.a)(Object(dt.a)(u,this.beta2),Object(dt.a)(Object(ht.a)(o),1-this.beta2)),d=Object(lt.a)(c,n),h=Object(lt.a)(l,r);i.assign(c),u.assign(l);const f=Object(ct.a)(Object(dt.a)(Object(lt.a)(d,Object(ct.a)(Object(pt.a)(h),this.epsilon)),-this.learningRate),s);s.assign(f)})),this.accBeta1.assign(Object(dt.a)(this.accBeta1,this.beta1)),this.accBeta2.assign(Object(dt.a)(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(ut.d)(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&Object(ut.d)(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),Object(ut.t)((()=>{this.accBeta1.assign(Object(Ot.a)(this.beta1,this.iterations_+1)),this.accBeta2.assign(Object(Ot.a)(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}wt.className="Adam",rt(wt);var It=n(30),St=n(102);class Nt extends gt{constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Object(ut.t)((()=>{this.iteration=Object(bt.a)(0).variable(),this.accBeta1=Object(bt.a)(t).variable()})),null==r&&(this.epsilon=p.a.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Object(ut.t)((()=>{const n=Object(kt.a)(1,this.accBeta1),r=Object(lt.a)(-this.learningRate,Object(ct.a)(Object(dt.a)(this.iteration,this.decay),1));t.forEach(((t,a)=>{const s=p.a.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:Object(ft.a)(s).variable(false)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:`${t}/v`,variable:Object(ft.a)(s).variable(false)});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const i=this.accumulatedFirstMoment[a].variable,u=this.accumulatedWeightedInfNorm[a].variable,c=Object(ct.a)(Object(dt.a)(i,this.beta1),Object(dt.a)(o,1-this.beta1)),l=Object(dt.a)(u,this.beta2),d=Object(It.a)(o),h=Object(St.a)(l,d);i.assign(c),u.assign(h);const f=Object(ct.a)(Object(dt.a)(Object(lt.a)(r,n),Object(lt.a)(c,Object(ct.a)(h,this.epsilon))),s);s.assign(f)})),this.iteration.assign(Object(ct.a)(this.iteration,1)),this.accBeta1.assign(Object(dt.a)(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(ut.d)(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&Object(ut.d)(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}Nt.className="Adamax",rt(Nt);class Tt extends gt{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=p.a.registeredVariables[t];Object(ut.t)((()=>{const e=Object(ct.a)(Object(dt.a)(this.c,r),a);a.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Object(ut.l)(Object(bt.a)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}Tt.className="SGD",rt(Tt);class jt extends Tt{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Object(bt.a)(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:Object(ut.t)((()=>Object(ft.a)(r).variable(e)))}}const a=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&Object(ut.t)((()=>{let e;const t=Object(ct.a)(Object(dt.a)(this.m,a),s);e=this.useNesterov?Object(ct.a)(Object(dt.a)(this.c,Object(ct.a)(s,Object(dt.a)(t,this.m))),r):Object(ct.a)(Object(dt.a)(this.c,t),r),a.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Object(ut.d)(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}jt.className="Momentum",rt(jt);class $t extends gt{constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=p.a.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=p.a.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:Object(ut.t)((()=>Object(ft.a)(r).variable(a)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:Object(ut.t)((()=>Object(ft.a)(r).variable(a)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:Object(ut.t)((()=>Object(ft.a)(r).variable(a)))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const o=this.accumulatedMeanSquares[n].variable,i=this.accumulatedMoments[n].variable;Object(ut.t)((()=>{const e=Object(ct.a)(Object(dt.a)(o,this.decay),Object(dt.a)(Object(ht.a)(s),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=Object(ct.a)(Object(dt.a)(t,this.decay),Object(dt.a)(s,1-this.decay)),u=Object(lt.a)(Object(dt.a)(s,this.learningRate),Object(pt.a)(Object(kt.a)(e,Object(ct.a)(Object(ht.a)(a),this.epsilon)))),c=Object(ct.a)(Object(dt.a)(i,this.momentum),u);o.assign(e),t.assign(a),i.assign(c);const l=Object(kt.a)(r,c);r.assign(l)}else{const e=Object(ct.a)(Object(dt.a)(o,this.decay),Object(dt.a)(Object(ht.a)(s),1-this.decay)),t=Object(ct.a)(Object(dt.a)(i,this.momentum),Object(lt.a)(Object(dt.a)(s,this.learningRate),Object(pt.a)(Object(ct.a)(e,this.epsilon))));o.assign(e),i.assign(t);const n=Object(kt.a)(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Object(ut.d)(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&Object(ut.d)(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&Object(ut.d)(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}$t.className="RMSProp",rt($t);class Ct{static sgd(e){return new Tt(e)}static momentum(e,t,n=!1){return new jt(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new $t(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new wt(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new yt(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new Nt(e,t,n,r,a)}static adagrad(e,t=.1){return new vt(e,t)}}var Et=n(60),At=n(98),Rt=n(26);const _t={sgd:Ct.sgd,momentum:Ct.momentum,adadelta:Ct.adadelta,adagrad:Ct.adagrad,rmsprop:Ct.rmsprop,adamax:Ct.adamax,adam:Ct.adam};var Ft=n(189),Dt=n(48),Mt=n(20);function Pt(e,t){const n=e[0].length;e.forEach(((e,t)=>{j.b(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),j.b(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,a)=>{for(let s=0;s<n;s++)j.b(s===t||e[s]===r[s],(()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`))}))}function Lt(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Bt=n(27),zt=n(31);const Vt=30;function Wt(e){return e<=Vt?e:Object(j.G)(e,Math.floor(Math.sqrt(e)))}function Ut(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Gt(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function Ht(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function qt(e,t,n,r=!0){const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?a.push(t[n-1]*e[n]):a.push(e[n]/t[n-1]):a.push(e[n]);return a}function Kt(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Xt(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}const Yt=1.7580993408473768,Qt=1.0507009873554805,Zt=.3275911,Jt=.254829592,en=-.284496736,tn=1.421413741,nn=-1.453152027,rn=1.061405429;var an=n(37);function sn(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function on(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function un(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function cn(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function ln(e,t){return{real:e[2*t],imag:e[2*t+1]}}function dn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function pn(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function hn(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const fn="->",mn=/->/g;function bn(e,t){const n=((e=e.replace(/\\s/g,"")).length-e.replace(mn,"").length)/fn.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(\'Equation must contain exactly one arrow ("->").\');const[r,a]=e.split(fn);Object(j.b)(-1===r.indexOf("..."),(()=>\'The ellipsis notation ("...") is not supported yet.\'));const s=r.split(","),o=s.length;if(t!==o)throw new Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let e=0;e<a.length;++e){const t=a[e];if(!s.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===i.indexOf(t)&&i.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===i.indexOf(t)&&","!==t&&i.push(t)}const u=new Array(s.length);for(let e=0;e<o;++e){if(new Set(s[e].split("")).size!==s[e].length)throw new Error(`Found duplicate axes in input component ${s[e]}. Support for duplicate axes in input is not implemented yet.`);u[e]=[];for(let t=0;t<s[e].length;++t)u[e].push(i.indexOf(s[e][t]))}const c=i.length,l=[];for(let e=a.length;e<c;++e)l.push(e);return{allDims:i,summedDims:l,idDims:u}}function gn(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function yn(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const a=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Object(j.b)(r[t[e][n]]===a[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(a)}, but got dimension ${a[n]}`))}}function xn(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let e=0;e<a;++e)r.push([]);const s=[];for(let e=0;e<n.length;++e){const a=On(t,n[e]);for(const t of a)-1===s.indexOf(t)&&(r[e].push(t),s.push(t))}return{path:n,steps:r}}function vn(e){return e.every(((e,t)=>e===t))}function On(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function kn(e,t,n=0){let r=[];if("number"==typeof t)Object(j.b)(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);Object(j.b)(a<=1,(()=>"There should be only one negative value in split array."));const s=t.indexOf(-1);if(-1!==s){const r=t.reduce(((e,t)=>t>0?e+t:e));t[s]=e.shape[n]-r}Object(j.b)(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function wn(e,t){let n,r=!1;for(e<=Vt?(n=e,r=!0):n=Object(j.G)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Object(j.G)(e,n+1);return n}function In(e,t,n){const r=[],a=e.length;for(let s=0;s<a;s++)s!==t?r.push(e[s]):r.push(n);return r}function Sn(e,t,n,r){const a=t.shape.length,s=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const o=e.shape[n],i=[];let u=1,c=1,l=1;for(let t=0;t<r;++t)i.push(e.shape[t]),u*=e.shape[t];for(let t=r;t<n;t++)i.push(e.shape[t]),c*=e.shape[t];for(let e=r;e<a;e++)i.push(t.shape[e]);for(let t=n+1;t<s;t++)i.push(e.shape[t]),l*=e.shape[t];return{batchSize:u,sliceSize:l,outerSize:c,dimSize:o,outputShape:i}}function Nn(e){try{return e.map((e=>Object(ot.decodeString)(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Tn(e){return e.map((e=>Object(ot.encodeString)(e)))}var jn=n(99),$n=n(47),Cn=n(129),En=n(91)},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(0);function a(e,t,n,a,o){const i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,u=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return s(t.inputNames[i.inputIndexStart],n,a,o);if("tensors"===i.type){return t.inputNames.slice(e,u).map((e=>s(e,n,a,o)))}const c=s(t.inputNames.slice(e)[0],n,a,o),l=c.dataSync();return"number"===i.type?l[0]:r.util.toNestedArray(c.shape,l)}const u=t.attrParams[e];return u&&u.value}function s(e,t,n,r){const[a,s]=c(e);if(null!=r){const e=r.getHashTableHandleByName(a);if(null!=e)return e}const o=n.currentContextIds.find((e=>!!t[u(a,e)]));return void 0!==o?t[u(a,o)][s]:void 0}function o(e,t,n){return t[u(e,n.currentContextId)]}function i(e,t){const[n,r,a]=c(e);return[u(n,t&&t.currentContextId),r,a]}function u(e,t){return t?`${e}-${t}`:e}function c(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function l(e,t,n){let r=a("pad",e,t,n);if("explicit"===r){r=a("explicitPaddings",e,t,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)s[e][0]=r[2*e],s[e][1]=r[2*e+1];return s}return r}function d(e){return e.kept?e:Object(r.clone)(e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(4),a=n(12),s=n(17),o=n(6),i=n(8);function u(e,t){let n=e;if(Object(o.A)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||Object(o.A)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Object(a.c)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],!Array.isArray(e)&&!Object(o.A)(e))return void Object(o.b)(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));Object(o.b)(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),Object(o.b)(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)c(e[t],r,n.concat(t))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument \'${n}\' passed to \'${r}\' must be ${e} tensor, but got ${t} tensor`)}}function d(e,t,n,a="numeric"){if(e instanceof s.a)return l(a,e.dtype,t,n),e;let c=Object(o.r)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!Object(o.A)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument \'${t}\' passed to \'${n}\' must be a Tensor or TensorLike, but got \'${r}\'`)}const d=u(e,c);Object(o.A)(e)||Array.isArray(e)||(e=[e]);const p="string"!==c?Object(i.toTypedArray)(e,c):Object(o.m)(e,[],!0);return r.a.makeTensor(p,d,c)}function p(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \\`Tensor[]\\` or \\`TensorLike[]\\``);return e.map(((e,a)=>d(e,`${t}[${a}]`,n,r)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(4),a=n(6);const s="__op";function o(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=s;const i=(...e)=>{r.a.startScope(n);try{const t=o(...e);return Object(a.x)(t)&&console.error("Cannot return a Promise inside of tidy."),r.a.endScope(t),t}catch(e){throw r.a.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}},function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return v}));var r=n(91),a=n(12),s=n(76),o=n(5),i=n(46),u=n(8),c=n(6);class l{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new p)}profileKernel(e,t,n){let r;const s=()=>{r=n()};let o;const i=u.now();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:u.now()-i})}if(Object(a.c)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{d(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:s}=e;n.forEach((e=>{Promise.all([e.data(),r,s]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])}))}))}}function d(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of \'${n}\'`),!0}return!1}class p{logKernelProfile(e,t,n,r,a,s){const o="number"==typeof r?c.L(`${r}ms`,9):r.error,i=c.L(e,25),u=t.rank,l=t.size,d=c.L(t.shape.toString(),14);let p="";for(const e in a){const n=a[e];if(null!=n){const r=n.shape||t.shape,a=r.length;p+=`${e}: ${a}D ${a>0?r:""} `}}console.log(`%c${i}\\t%c${o}\\t%c${u}D ${d}\\t%c${l}\\t%c${p}\\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var h=n(17),f=n(13),m=n(37);function b(e){return null!=e.kernelName}class g{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class y{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new g}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend \'${this.backendName}\' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend \'${e}\' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(m.b(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name \'${e}\' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new l(this.backendInstance),!0}setupRegisteredKernels(){Object(i.d)(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){Object(i.d)(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof r.b||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,m.b(`Initialization of backend ${e} failed`),m.b(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return m.b(`Initialization of backend ${e} failed`),m.b(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return y.nextTensorId++}nextVariableId(){return y.nextVariableId++}clone(e){const t=v.runKernel(o.sb,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return v.runKernel(o.x,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=Object(i.c)(e,this.backendName)))throw new Error(`Kernel \'${e}\' not registered for backend \'${this.backendName}\'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach((e=>{a+="complex64"===e.dtype?3:1}));const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-s;if(o>0)throw new Error(`Backend \'${this.backendName}\' has an internal memory leak (${o} data ids) after running \'${e}\'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;let o,u;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=b(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(b(e)){const{kernelName:t,inputs:a,attrs:s}=e;null==this.backendName&&this.backend;const l=Object(i.c)(t,this.backendName);c.b(null!=l,(()=>`Cannot find registered kernel \'${t}\' for backend \'${this.backendName}\'`)),o=()=>{const e=this.backend.numDataIds();u=l.kernelFunc({inputs:a,attrs:s,backend:this.backend});const o=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,o);const i=o.map((e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)}));if(r){const e=this.getTensorsForGradient(t,a,i);n=this.saveTensorsForBackwardMode(e)}return i}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};o=()=>{const e=this.backend.numDataIds();u=this.tidy((()=>t(this.backend,a)));const n=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:d,attrs:p}=e,h=b(e)?null:e.backwardsFunc;let f;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(l,d,(()=>o())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),t=f.outputs):t=o()})),r&&this.addTapeNode(l,d,t,h,n,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map((e=>null!=d[e]?d[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(u)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=Object(i.b)(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let s;r.saveAllInputs?(c.b(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),s=Object.keys(t).map((e=>t[e]))):s=e.map((e=>t[e]));const o=n.filter(((e,t)=>a[t]));return s.concat(o)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&c.z(e[0])&&(a=e.map((e=>u.encodeString(e))));const s=r.write(a,t,n),o=new h.a(t,n,s,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){const e=this.state.tensorInfo.get(s),t=Object(c.f)(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return o}makeTensorFromDataId(e,t,n,r){n=n||"float32";const a=new h.a(t,n,e,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new h.c(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*c.g(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof h.c||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*c.g(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,s){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Object(i.b)(e);null!=u&&(r=u.gradFunc),null!=r&&(o.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=c.F(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],a,s))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Object(f.getTensorsInContainer)(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(c.b(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have \'float32\' dtype, but has \'${n.dtype}\'`);const a=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));c.b(a instanceof h.a,(()=>"The result y returned by f() must be a tensor."));const s=function(e,t,n){const r={},a={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const s=e[n],o=s.inputs;for(const e in o){const n=o[e];let i=!1;for(let e=0;e<t.length;e++)if(r[n.id]){s.outputs.forEach((e=>r[e.id]=!0)),i=!0,a[s.id]=!0;break}if(i)break}}const s={};s[n.id]=!0;const o={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(s[n.outputs[e].id]){for(const e in r)s[r[e].id]=!0,o[n.id]=!0;break}}const i=[];for(let t=0;t<e.length;t++){const n=e[t];if(a[n.id]&&o[n.id]){const e={};for(const t in n.inputs){const a=n.inputs[t];r[a.id]&&(e[t]=a)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,i.push(t)}}return i}(this.state.activeTape,t,a);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[a.id]=null==n?function(e){const t=Object(c.D)(Object(c.O)(e),"float32");return v.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const s=t[a],o=[];if(s.outputs.forEach((t=>{const n=e[t.id];null!=n?o.push(n):o.push(null)})),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const i=s.gradient(o);for(const t in s.inputs){if(!(t in i))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(i)}.`);const a=n((()=>i[t]()));if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${t} must have \'float32\' dtype, but has \'${a.dtype}\'`);const o=s.inputs[t];if(!c.a(a.shape,o.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input \'${t}\' has shape \'${a.shape}\', which does not match the shape of the input \'${o.shape}\'`);if(null==e[o.id])e[o.id]=a;else{const t=e[o.id];e[o.id]=r(t,a),t.dispose()}}}}(e,s,(e=>this.tidy(e)),O);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:a,grads:r}}))}customGrad(e){return c.b(c.u(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;c.b(t.every((e=>e instanceof h.a)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};t.forEach(((e,t)=>{r[t]=e}));return this.runKernelFunc({forwardFunc:(r,a)=>(n=e(...t,a),c.b(n.value instanceof h.a,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),c.b(c.u(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const a=n.gradFunc(e,r),s=Array.isArray(a)?a:[a];c.b(s.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),c.b(s.every((e=>e instanceof h.a)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const o={};return s.forEach(((e,t)=>{o[t]=()=>e})),o},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=Object(u.now)(),n=await this.backend.time(e);return n.wallMs=Object(u.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new g;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function x(){const e=Object(s.b)();if(null==e._tfengine){const t=new a.b(e);e._tfengine=new y(t)}return Object(a.d)(e._tfengine.ENV),Object(h.f)((()=>e._tfengine)),e._tfengine}y.nextTensorId=0,y.nextVariableId=0;const v=x();function O(e,t){const n={a:e,b:t};return v.runKernel(o.d,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"r",(function(){return y})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return v})),n.d(t,"s",(function(){return O})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return w})),n.d(t,"w",(function(){return I})),n.d(t,"v",(function(){return S})),n.d(t,"x",(function(){return N})),n.d(t,"y",(function(){return T})),n.d(t,"z",(function(){return j})),n.d(t,"A",(function(){return $})),n.d(t,"B",(function(){return C})),n.d(t,"C",(function(){return E})),n.d(t,"D",(function(){return A})),n.d(t,"E",(function(){return R})),n.d(t,"F",(function(){return _})),n.d(t,"G",(function(){return F})),n.d(t,"H",(function(){return D})),n.d(t,"I",(function(){return M})),n.d(t,"J",(function(){return P})),n.d(t,"K",(function(){return L})),n.d(t,"M",(function(){return B})),n.d(t,"L",(function(){return z})),n.d(t,"N",(function(){return V})),n.d(t,"O",(function(){return W})),n.d(t,"P",(function(){return U})),n.d(t,"Q",(function(){return G})),n.d(t,"R",(function(){return H})),n.d(t,"S",(function(){return q})),n.d(t,"T",(function(){return K})),n.d(t,"V",(function(){return X})),n.d(t,"U",(function(){return Y})),n.d(t,"mc",(function(){return Q})),n.d(t,"W",(function(){return Z})),n.d(t,"X",(function(){return J})),n.d(t,"Y",(function(){return ee})),n.d(t,"ab",(function(){return te})),n.d(t,"Z",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"db",(function(){return se})),n.d(t,"eb",(function(){return oe})),n.d(t,"fb",(function(){return ie})),n.d(t,"gb",(function(){return ue})),n.d(t,"hb",(function(){return ce})),n.d(t,"ib",(function(){return le})),n.d(t,"kb",(function(){return de})),n.d(t,"ob",(function(){return pe})),n.d(t,"nb",(function(){return he})),n.d(t,"pb",(function(){return fe})),n.d(t,"qb",(function(){return me})),n.d(t,"sb",(function(){return be})),n.d(t,"rb",(function(){return ge})),n.d(t,"tb",(function(){return ye})),n.d(t,"ub",(function(){return xe})),n.d(t,"vb",(function(){return ve})),n.d(t,"wb",(function(){return Oe})),n.d(t,"zb",(function(){return ke})),n.d(t,"Ab",(function(){return we})),n.d(t,"Bb",(function(){return Ie})),n.d(t,"Cb",(function(){return Se})),n.d(t,"Db",(function(){return Ne})),n.d(t,"Eb",(function(){return Te})),n.d(t,"Gb",(function(){return je})),n.d(t,"Hb",(function(){return $e})),n.d(t,"Ib",(function(){return Ce})),n.d(t,"Fb",(function(){return Ee})),n.d(t,"xb",(function(){return Ae})),n.d(t,"yb",(function(){return Re})),n.d(t,"Jb",(function(){return _e})),n.d(t,"Pb",(function(){return Fe})),n.d(t,"Kb",(function(){return De})),n.d(t,"Nb",(function(){return Me})),n.d(t,"Lb",(function(){return Pe})),n.d(t,"Mb",(function(){return Le})),n.d(t,"Ob",(function(){return Be})),n.d(t,"Qb",(function(){return ze})),n.d(t,"Rb",(function(){return Ve})),n.d(t,"Sb",(function(){return We})),n.d(t,"Tb",(function(){return Ue})),n.d(t,"Ub",(function(){return Ge})),n.d(t,"Vb",(function(){return He})),n.d(t,"Wb",(function(){return qe})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"bc",(function(){return Xe})),n.d(t,"Yb",(function(){return Ye})),n.d(t,"Zb",(function(){return Qe})),n.d(t,"ac",(function(){return Ze})),n.d(t,"dc",(function(){return Je})),n.d(t,"cc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"fc",(function(){return nt})),n.d(t,"gc",(function(){return rt})),n.d(t,"hc",(function(){return at})),n.d(t,"ic",(function(){return st})),n.d(t,"jc",(function(){return ot})),n.d(t,"kc",(function(){return it})),n.d(t,"lc",(function(){return ut})),n.d(t,"nc",(function(){return ct})),n.d(t,"oc",(function(){return lt})),n.d(t,"qc",(function(){return dt})),n.d(t,"tc",(function(){return pt})),n.d(t,"uc",(function(){return ht})),n.d(t,"rc",(function(){return ft})),n.d(t,"sc",(function(){return mt})),n.d(t,"pc",(function(){return bt})),n.d(t,"vc",(function(){return gt})),n.d(t,"xc",(function(){return yt})),n.d(t,"yc",(function(){return xt})),n.d(t,"zc",(function(){return vt})),n.d(t,"Ac",(function(){return Ot})),n.d(t,"Bc",(function(){return kt})),n.d(t,"Gc",(function(){return wt})),n.d(t,"Ec",(function(){return It})),n.d(t,"Fc",(function(){return St})),n.d(t,"Dc",(function(){return Nt})),n.d(t,"Cc",(function(){return Tt})),n.d(t,"Ic",(function(){return jt})),n.d(t,"Qc",(function(){return $t})),n.d(t,"Zc",(function(){return Ct})),n.d(t,"Jc",(function(){return Et})),n.d(t,"Pc",(function(){return At})),n.d(t,"Hc",(function(){return Rt})),n.d(t,"Kc",(function(){return _t})),n.d(t,"Lc",(function(){return Ft})),n.d(t,"Mc",(function(){return Dt})),n.d(t,"Nc",(function(){return Mt})),n.d(t,"Oc",(function(){return Pt})),n.d(t,"Sc",(function(){return Lt})),n.d(t,"Rc",(function(){return Bt})),n.d(t,"Uc",(function(){return zt})),n.d(t,"Vc",(function(){return Vt})),n.d(t,"Wc",(function(){return Wt})),n.d(t,"Xc",(function(){return Ut})),n.d(t,"Yc",(function(){return Gt})),n.d(t,"ad",(function(){return Ht})),n.d(t,"bd",(function(){return qt})),n.d(t,"cd",(function(){return Kt})),n.d(t,"dd",(function(){return Xt})),n.d(t,"ed",(function(){return Yt})),n.d(t,"fd",(function(){return Qt})),n.d(t,"gd",(function(){return Zt})),n.d(t,"hd",(function(){return Jt})),n.d(t,"id",(function(){return en})),n.d(t,"jd",(function(){return tn})),n.d(t,"Tc",(function(){return nn})),n.d(t,"jb",(function(){return rn})),n.d(t,"wc",(function(){return an})),n.d(t,"kd",(function(){return sn})),n.d(t,"lb",(function(){return on})),n.d(t,"mb",(function(){return un}));const r="Abs",a="Acos",s="Acosh",o="Add",i="AddN",u="All",c="Any",l="ArgMax",d="ArgMin",p="Asin",h="Asinh",f="Atan",m="Atanh",b="Atan2",g="AvgPool",y="AvgPoolGrad",x="AvgPool3D",v="AvgPool3DGrad",O="BatchMatMul",k="BatchToSpaceND",w="Bincount",I="BroadcastTo",S="BroadcastArgs",N="Cast",T="Ceil",j="ClipByValue",$="Complex",C="ComplexAbs",E="Concat",A="Conv2D",R="Conv2DBackpropFilter",_="Conv2DBackpropInput",F="Conv3D",D="Conv3DBackpropFilterV2",M="Conv3DBackpropInputV2",P="Cos",L="Cosh",B="Cumsum",z="CropAndResize",V="DenseBincount",W="DepthToSpace",U="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",H="DepthwiseConv2dNativeBackpropInput",q="Diag",K="Dilation2D",X="Dilation2DBackpropInput",Y="Dilation2DBackpropFilter",Q="RealDiv",Z="Einsum",J="Elu",ee="EluGrad",te="Erf",ne="Equal",re="Exp",ae="ExpandDims",se="Expm1",oe="FFT",ie="Fill",ue="FlipLeftRight",ce="Floor",le="FloorDiv",de="FusedBatchNorm",pe="GatherV2",he="GatherNd",fe="Greater",me="GreaterEqual",be="Identity",ge="IFFT",ye="Imag",xe="IsFinite",ve="IsInf",Oe="IsNan",ke="LeakyRelu",we="Less",Ie="LessEqual",Se="LinSpace",Ne="Log",Te="Log1p",je="LogicalAnd",$e="LogicalNot",Ce="LogicalOr",Ee="LogSoftmax",Ae="LRN",Re="LRNGrad",_e="Max",Fe="Maximum",De="MaxPool",Me="MaxPoolGrad",Pe="MaxPool3D",Le="MaxPool3DGrad",Be="MaxPoolWithArgmax",ze="Mean",Ve="Min",We="Minimum",Ue="MirrorPad",Ge="Mod",He="Multinomial",qe="Multiply",Ke="Neg",Xe="NotEqual",Ye="NonMaxSuppressionV3",Qe="NonMaxSuppressionV4",Ze="NonMaxSuppressionV5",Je="OnesLike",et="OneHot",tt="Pack",nt="PadV2",rt="Pool",at="Pow",st="Prelu",ot="Prod",it="Range",ut="Real",ct="Reciprocal",lt="Relu",dt="Reshape",pt="ResizeNearestNeighbor",ht="ResizeNearestNeighborGrad",ft="ResizeBilinear",mt="ResizeBilinearGrad",bt="Relu6",gt="Reverse",yt="Round",xt="Rsqrt",vt="ScatterNd",Ot="Select",kt="Selu",wt="Slice",It="Sin",St="Sinh",Nt="Sign",Tt="Sigmoid",jt="Softplus",$t="Sqrt",Ct="Sum",Et="SpaceToBatchND",At="SplitV",Rt="Softmax",_t="SparseFillEmptyRows",Ft="SparseReshape",Dt="SparseSegmentMean",Mt="SparseSegmentSum",Pt="SparseToDense",Lt="SquaredDifference",Bt="Square",zt="StridedSlice",Vt="StringNGrams",Wt="StringSplit",Ut="StringToHashBucketFast",Gt="Sub",Ht="Tan",qt="Tanh",Kt="Tile",Xt="TopK",Yt="Transform",Qt="Transpose",Zt="Unique",Jt="Unpack",en="UnsortedSegmentSum",tn="ZerosLike",nn="Step",rn="FromPixels",an="RotateWithOffset",sn="_FusedMatMul",on="FusedConv2D",un="FusedDepthwiseConv2D"},function(e,t,n){"use strict";function r(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,i(e,t,n)}function a(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,i(e,n,r),i(t,n,r)}function s(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2==0?e:e+1}function i(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function u(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){const n=Math.random();return t*n+(1-n)*e}function l(e,t){let n=0;for(let r=0;r<e.length;r++){const a=Number(e[r])-Number(t[r]);n+=a*a}return n}function d(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function p(e,t,n=""){d(g(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function h(e){d(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function f(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||A(e)&&!n)for(let r=0;r<e.length;++r)f(e[r],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function b(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1==0}function x(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function v(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function O(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function w(e,t=(e=>0),n){return new Promise(((r,a)=>{let s=0;const o=()=>{if(e())return void r();s++;const i=t(s);null!=n&&s>=n?a():setTimeout(o,i)};o()}))}function I(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can\'t be a fractional number. Got ${t} / ${n}`);const a=e.slice();return a[r]=t/n,a}function S(e,t){const n=t.length;return d((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),d(e.every((e=>y(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function N(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:S(t,e).sort();let o=0;for(let t=0;t<e.length;++t){if(null!=s){if(s[o]===t&&1!==e[t])throw new Error(`Can\'t squeeze axis ${t} since its dim \'${e[t]}\' is not 1`);(null==s[o]||s[o]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),s[o]<=t&&o++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function T(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function j(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function $(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function C(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function E(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function A(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function R(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function _(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function F(e){return"string"==typeof e||e instanceof String}function D(e){return"boolean"==typeof e}function M(e){return"number"==typeof e}function P(e){return Array.isArray(e)?P(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":M(e)?"float32":F(e)?"string":D(e)?"bool":"float32"}function L(e){return!!(e&&e.constructor&&e.call&&e.apply)}function B(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function z(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function V(e,t,n,r=!1){const a=new Array;if(1===t.length){const s=t[0]*(r?2:1);for(let t=0;t<s;t++)a[t]=n[e+t]}else{const s=t[0],o=t.slice(1),i=o.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<s;t++)a[t]=V(e+t*i,o,n,r)}return a}function W(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return V(0,e,t,n)}function U(e,t){const n=G(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function G(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function H(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return W(e,new Float32Array(n));if("int32"===t)return W(e,new Int32Array(n));if("bool"===t)return W(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function q(e){e.forEach((t=>{d(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function K(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function X(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function Y(e){return e&&e.then&&"function"==typeof e.then}n.d(t,"M",(function(){return r})),n.d(t,"N",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"H",(function(){return o})),n.d(t,"S",(function(){return i})),n.d(t,"R",(function(){return u})),n.d(t,"J",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"O",(function(){return m})),n.d(t,"y",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"v",(function(){return y})),n.d(t,"T",(function(){return x})),n.d(t,"P",(function(){return v})),n.d(t,"k",(function(){return O})),n.d(t,"L",(function(){return k})),n.d(t,"K",(function(){return w})),n.d(t,"s",(function(){return I})),n.d(t,"I",(function(){return S})),n.d(t,"Q",(function(){return N})),n.d(t,"o",(function(){return T})),n.d(t,"n",(function(){return j})),n.d(t,"h",(function(){return $})),n.d(t,"B",(function(){return C})),n.d(t,"p",(function(){return E})),n.d(t,"A",(function(){return A})),n.d(t,"g",(function(){return R})),n.d(t,"f",(function(){return _})),n.d(t,"z",(function(){return F})),n.d(t,"t",(function(){return D})),n.d(t,"w",(function(){return M})),n.d(t,"r",(function(){return P})),n.d(t,"u",(function(){return L})),n.d(t,"G",(function(){return B})),n.d(t,"j",(function(){return z})),n.d(t,"U",(function(){return W})),n.d(t,"D",(function(){return U})),n.d(t,"F",(function(){return G})),n.d(t,"E",(function(){return H})),n.d(t,"c",(function(){return q})),n.d(t,"C",(function(){return K})),n.d(t,"q",(function(){return X})),n.d(t,"x",(function(){return Y}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({reshape_:function(e,t){const n={x:Object(s.a)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.a.runKernel(a.qc,n,o)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"shuffle",(function(){return a.M})),n.d(t,"shuffleCombo",(function(){return a.N})),n.d(t,"clamp",(function(){return a.i})),n.d(t,"nearestLargerEven",(function(){return a.H})),n.d(t,"swap",(function(){return a.S})),n.d(t,"sum",(function(){return a.R})),n.d(t,"randUniform",(function(){return a.J})),n.d(t,"distSquared",(function(){return a.l})),n.d(t,"assert",(function(){return a.b})),n.d(t,"assertShapesMatch",(function(){return a.e})),n.d(t,"assertNonNull",(function(){return a.d})),n.d(t,"flatten",(function(){return a.m})),n.d(t,"sizeFromShape",(function(){return a.O})),n.d(t,"isScalarShape",(function(){return a.y})),n.d(t,"arraysEqual",(function(){return a.a})),n.d(t,"isInt",(function(){return a.v})),n.d(t,"tanh",(function(){return a.T})),n.d(t,"sizeToSquarishShape",(function(){return a.P})),n.d(t,"createShuffledIndices",(function(){return a.k})),n.d(t,"rightPad",(function(){return a.L})),n.d(t,"repeatedTry",(function(){return a.K})),n.d(t,"inferFromImplicitShape",(function(){return a.s})),n.d(t,"parseAxisParam",(function(){return a.I})),n.d(t,"squeezeShape",(function(){return a.Q})),n.d(t,"getTypedArrayFromDType",(function(){return a.o})),n.d(t,"getArrayFromDType",(function(){return a.n})),n.d(t,"checkConversionForErrors",(function(){return a.h})),n.d(t,"isValidDtype",(function(){return a.B})),n.d(t,"hasEncodingLoss",(function(){return a.p})),n.d(t,"isTypedArray",(function(){return a.A})),n.d(t,"bytesPerElement",(function(){return a.g})),n.d(t,"bytesFromStringArray",(function(){return a.f})),n.d(t,"isString",(function(){return a.z})),n.d(t,"isBoolean",(function(){return a.t})),n.d(t,"isNumber",(function(){return a.w})),n.d(t,"inferDtype",(function(){return a.r})),n.d(t,"isFunction",(function(){return a.u})),n.d(t,"nearestDivisor",(function(){return a.G})),n.d(t,"computeStrides",(function(){return a.j})),n.d(t,"toNestedArray",(function(){return a.U})),n.d(t,"makeOnesTypedArray",(function(){return a.D})),n.d(t,"makeZerosTypedArray",(function(){return a.F})),n.d(t,"makeZerosNestedTypedArray",(function(){return a.E})),n.d(t,"assertNonNegativeIntegerDimensions",(function(){return a.c})),n.d(t,"locToIndex",(function(){return a.C})),n.d(t,"indexToLoc",(function(){return a.q})),n.d(t,"isPromise",(function(){return a.x})),n.d(t,"hexToLong",(function(){return i})),n.d(t,"fingerPrint64",(function(){return y})),n.d(t,"createScalarValue",(function(){return x})),n.d(t,"toTypedArray",(function(){return v})),n.d(t,"now",(function(){return O})),n.d(t,"fetch",(function(){return k})),n.d(t,"encodeString",(function(){return w})),n.d(t,"decodeString",(function(){return I}));var r=n(12),a=n(6),s=n(131);const o=n.n(s).a||s;function i(e){return o.fromString(e,!0,16)}const u=i("c3a5c85c97cb3127"),c=i("b492b66fbe98f273"),l=i("9ae16a3b2f90404f");function d(e){return e.xor(e.shru(47))}function p(e,t,n){const r=e.slice(t,t+n);return o.fromBytes(Array.from(r),!0,!0)}function h(e,t){return p(e,t,8)}function f(e,t){return p(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function b(e,t,n=i("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function g(e,t,n,r){return function(e,t,n,r,a,s){a=a.add(e),s=m(s.add(a).add(r),21);const o=a;return a=(a=a.add(t)).add(n),s=s.add(m(a,44)),[a.add(r),s.add(o)]}(h(e,t),h(e,t+8),h(e,t+16),h(e,t+24),n,r)}function y(e,t=e.length){const n=o.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=l.add(2*t),r=h(e,0).add(l),a=h(e,t-8);return b(m(a,37).mul(n).add(r),m(r,25).add(a).mul(n),n)}if(t>=4){const n=l.add(2*t);return b(f(e,0).shl(3).add(t),f(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return d(l.mul(n).xor(u.mul(r))).mul(l)}return l}(e,t):function(e,t=e.length){const n=l.add(2*t),r=h(e,0).mul(c),a=h(e,8),s=h(e,t-8).mul(n),o=h(e,t-16).mul(l);return b(m(r.add(a),43).add(m(s,30)).add(o),r.add(m(a.add(l),18)).add(s),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=l.add(2*t),r=h(e,0).mul(l),a=h(e,8),s=h(e,t-8).mul(n),o=h(e,t-16).mul(l),i=m(r.add(a),43).add(m(s,30)).add(o),u=b(i,r.add(m(a.add(l),18)).add(s),n),c=h(e,16).mul(n),d=h(e,24),p=i.add(h(e,t-32)).mul(n),f=u.add(h(e,t-24)).mul(n);return b(m(c.add(d),43).add(m(p,30)).add(f),c.add(m(d.add(r),18)).add(p),n)}(e,t);let r=n,a=n.mul(c).add(113),s=d(a.mul(l).add(113)).mul(l),i=[o.UZERO,o.UZERO],p=[o.UZERO,o.UZERO];r=r.mul(l).add(h(e,0));let y=0;const x=64*(t-1>>6),v=x+(t-1&63)-63;do{r=m(r.add(a).add(i[0]).add(h(e,y+8)),37).mul(c),a=m(a.add(i[1]).add(h(e,y+48)),42).mul(c),r=r.xor(p[1]),a=a.add(i[0]).add(h(e,y+40)),s=m(s.add(p[0]),33).mul(c),i=g(e,y,i[1].mul(c),r.add(p[0])),p=g(e,y+32,s.add(p[1]),a.add(h(e,y+16))),[s,r]=[r,s],y+=64}while(y!==x);const O=c.add(s.and(255).shl(1));return y=v,p[0]=p[0].add(t-1&63),i[0]=i[0].add(p[0]),p[0]=p[0].add(i[0]),r=m(r.add(a).add(i[0]).add(h(e,y+8)),37).mul(O),a=m(a.add(i[1]).add(h(e,y+48)),42).mul(O),r=r.xor(p[1].mul(9)),a=a.add(i[0].mul(9).add(h(e,y+40))),s=m(s.add(p[0]),33).mul(O),i=g(e,y,i[1].mul(O),r.add(p[0])),p=g(e,y+32,s.add(p[1]),a.add(h(e,y+16))),[s,r]=[r,s],b(b(i[0],p[0],O).add(d(a).mul(u)).add(s),b(i[1],p[1],O).add(r),O)}function x(e,t){return"string"===t?w(e):v([e],t)}function v(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.m(e)),Object(r.c)().getBool("DEBUG")&&a.h(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function O(){return Object(r.c)().platform.now()}function k(e,t){return Object(r.c)().platform.fetch(e,t)}function w(e,t="utf-8"){return t=t||"utf-8",Object(r.c)().platform.encode(e,t)}function I(e,t="utf-8"){return t=t||"utf-8",Object(r.c)().platform.decode(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({mul_:function(e,t){let n=Object(o.a)(e,"a","mul"),i=Object(o.a)(t,"b","mul");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.Wb,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({add_:function(e,t){let n=Object(o.a)(e,"a","add"),i=Object(o.a)(t,"b","add");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.d,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({sub_:function(e,t){let n=Object(o.a)(e,"a","sub"),i=Object(o.a)(t,"b","sub");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.Yc,u)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(6),a=n(37);const s="tfjsflags";class o{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=i,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&a.b(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];a.b(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Object(r.x)(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag \'${e}\': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(s in e){e.tfjsflags.split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)}))}}}function i(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function u(){return c}let c=null;function l(e){c=e}},function(e,t,n){"use strict";n.r(t),n.d(t,"makeTypesMatch",(function(){return o})),n.d(t,"assertTypesMatch",(function(){return i})),n.d(t,"isTensorInList",(function(){return u})),n.d(t,"getTensorsInContainer",(function(){return c}));var r=n(17),a=n(60),s=n(6);function o(e,t){if(e.dtype===t.dtype)return[e,t];const n=Object(a.c)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function i(e,t){Object(s.b)(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}function u(e,t){return t.some((t=>t.id===e.id))}function c(e){const t=[];return l(e,t,new Set),t}function l(e,t,n){if(null==e)return;if(e instanceof r.a)return void t.push(e);if(a=e,!Array.isArray(a)&&"object"!=typeof a)return;var a;const s=e;for(const e in s){const r=s[e];n.has(r)||(n.add(r),l(r,t,n))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),a=n(35);function s(e,t){if((Object(r.A)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Object(r.A)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Object(a.a)(e,[],[],t)}},function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return f})),n.d(t,"t",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"l",(function(){return g})),n.d(t,"u",(function(){return y})),n.d(t,"r",(function(){return x})),n.d(t,"o",(function(){return v})),n.d(t,"k",(function(){return O})),n.d(t,"q",(function(){return k})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return I})),n.d(t,"p",(function(){return S})),n.d(t,"a",(function(){return N})),n.d(t,"s",(function(){return T}));var r=n(4),a=n(12),s=n(17),o=n(13);function i(){Object(a.c)().set("PROD",!0)}function u(){Object(a.c)().set("DEBUG",!0)}function c(){Object(a.c)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){Object(a.c)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d(){r.a.disposeVariables()}function p(){return r.a}function h(){return r.a.memory()}function f(e){return r.a.profile(e)}function m(e,t){return r.a.tidy(e,t)}function b(e){Object(o.getTensorsInContainer)(e).forEach((e=>e.dispose()))}function g(e){return r.a.keep(e)}function y(e){return r.a.time(e)}function x(e){return r.a.setBackend(e)}function v(){return r.a.ready()}function O(){return r.a.backendName}function k(e){r.a.removeBackend(e)}function w(e){return r.a.findBackend(e)}function I(e){return r.a.findBackendFactory(e)}function S(e,t,n=1){return r.a.registerBackend(e,t,n)}function N(){return r.a.backend}function T(e,t){Object(a.c)().setPlatform(e,t)}Object(s.d)(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(101),u=n(3);const c=Object(u.b)({div_:function(e,t){let n=Object(o.a)(e,"a","div"),u=Object(o.a)(t,"b","div");if([n,u]=Object(s.makeTypesMatch)(n,u),"int32"===n.dtype&&"int32"===u.dtype)return Object(i.a)(n,u);const c={a:n,b:u};return r.a.runKernel(a.mc,c,{})}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return x}));var r=n(76),a=n(6);function s(e,t,n,r){const s=Object(a.j)(t),i=function(e,t,n,r){const s=Object(a.O)(t),i=r[r.length-1],u=new Array(i).fill(0),l=t.length,d="complex64"===n?c(e):e;if(l>1)for(let e=0;e<s/i;e++){const t=e*i;for(let e=0;e<i;e++)u[e]=Math.max(u[e],o(d[t+e],0,n).length)}return u}(e,t,n,s),l=t.length,d=u(e,t,n,s,i),p=["Tensor"];return r&&(p.push(`  dtype: ${n}`),p.push(`  rank: ${l}`),p.push(`  shape: [${t}]`),p.push("  values:")),p.push(d.map((e=>"    "+e)).join("\\n")),p.join("\\n")}function o(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:Object(a.z)(e)?`\'${e}\'`:"bool"===n?i(e):parseFloat(e.toFixed(7)).toString(),Object(a.L)(r,t)}function i(e){return 0===e?"false":"true"}function u(e,t,n,r,a,s=!0){const l="complex64"===n?2:1,d=t[0],p=t.length;if(0===p){if("complex64"===n){return[o(c(e)[0],0,n)]}return"bool"===n?[i(e[0])]:[e[0].toString()]}if(1===p){if(d>20){const t=3*l;let r=Array.from(e.slice(0,t)),s=Array.from(e.slice((d-3)*l,d*l));return"complex64"===n&&(r=c(r),s=c(s)),["["+r.map(((e,t)=>o(e,a[t],n))).join(", ")+", ..., "+s.map(((e,t)=>o(e,a[d-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?c(e):Array.from(e)).map(((e,t)=>o(e,a[t],n))).join(", ")+"]"]}const h=t.slice(1),f=r.slice(1),m=r[0]*l,b=[];if(d>20){for(let t=0;t<3;t++){const r=t*m,s=r+m;b.push(...u(e.slice(r,s),h,n,f,a,!1))}b.push("...");for(let t=d-3;t<d;t++){const r=t*m,s=r+m;b.push(...u(e.slice(r,s),h,n,f,a,t===d-1))}}else for(let t=0;t<d;t++){const r=t*m,s=r+m;b.push(...u(e.slice(r,s),h,n,f,a,t===d-1))}const g=2===p?",":"";b[0]="["+b[0]+g;for(let e=1;e<b.length-1;e++)b[e]=" "+b[e]+g;let y=",\\n";for(let e=2;e<p;e++)y+="\\n";return b[b.length-1]=" "+b[b.length-1]+"]"+(s?"":y),b}function c(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var l=n(8);class d{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=a.O(e),null!=n){const e=n.length;a.b(e===this.size,(()=>`Length of values \'${e}\' does not match the size inferred by the shape \'${this.size}\'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||a.n(t,this.size),this.strides=Object(a.j)(e)}set(e,...t){0===t.length&&(t=[0]),a.b(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return p().makeTensor(this.values,this.shape,this.dtype)}}let p=null,h=null,f=null;function m(e){p=e}function b(e){h=e}function g(e){f=e}class y{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=a.O(e),this.strides=Object(a.j)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return h.buffer(this.shape,this.dtype,e)}bufferSync(){return h.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Object(a.U)(this.shape,e,"complex64"===this.dtype)}arraySync(){return Object(a.U)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=p().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=p().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>l.decodeString(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await p().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(p().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return h.print(this,e)}clone(){return this.throwIfDisposed(),h.clone(this)}toString(e=!1){return s(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),h.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),p().makeVariable(this,e,t,n)}}Object.defineProperty(y,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Object(r.a)("Tensor",(()=>y));class x extends y{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!a.a(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);p().disposeTensor(this),this.dataId=e.dataId,p().incRef(this,null)}dispose(){p().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(x,Symbol.hasInstance,{value:e=>e instanceof y&&null!=e.assign&&e.assign instanceof Function})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({cast_:function(e,t){const n=Object(s.a)(e,"x","cast");if(!o.B(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const i={x:n},u={dtype:t};return r.a.runKernel(a.x,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({matMul_:function(e,t,n=!1,i=!1){let u=Object(o.a)(e,"a","matMul"),c=Object(o.a)(t,"b","matMul");[u,c]=Object(s.makeTypesMatch)(u,c);const l={a:u,b:c},d={transposeA:n,transposeB:i};return r.a.runKernel(a.s,l,d)}})},function(e,t,n){"use strict";function r(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const s=n-1-a,o=e[s]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(s)}return r}function a(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],s=t.length-r-1,o=t[s];(null==a||1===a&&o>1)&&n.unshift(s)}return n}function s(e,t){const n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}n.unshift(r)}}return n}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({slice_:function(e,t,n){const o=Object(s.a)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");const i={x:o},u={begin:t,size:n};return r.a.runKernel(a.Gc,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(18),i=n(3);const u=Object(i.b)({sum_:function(e,t=null,n=!1){let i=Object(s.a)(e,"x","sum");"bool"===i.dtype&&(i=Object(o.a)(i,"int32"));const u={x:i},c={axis:t,keepDims:n};return r.a.runKernel(a.Zc,u,c)}})},function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return y}));var r=n(39),a=n(50),s=n(6),o=n(95);async function i(e,t){const n=[],r=[],a=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let s=0;s<a.length;++s){const o=a[s],i=Array.isArray(e)?e[s].tensor:e[o];if("float32"!==i.dtype&&"int32"!==i.dtype&&"bool"!==i.dtype&&"string"!==i.dtype&&"complex64"!==i.dtype)throw new Error(`Unsupported dtype in weight \'${o}\': ${i.dtype}`);const u={name:o,shape:i.shape,dtype:i.dtype};if("string"===i.dtype){const e=new Promise((async e=>{const t=await i.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let a=0;for(let e=0;e<t.length;e++){const n=t[e],s=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(s,a),a+=4,r.set(n,a),a+=n.length}e(r)}));r.push(e)}else r.push(i.data());null!=t&&(u.group=t),n.push(u)}return{data:c(await Promise.all(r)),specs:n}}function u(e,t){const n={};let i,u=0;for(const c of t){const t=c.name,l=c.dtype,d=c.shape,p=Object(s.O)(d);let h;if("quantization"in c){const n=c.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${c.name} with quantization ${n.dtype} doesn\'t have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${c.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: \'uint8\', \'uint16\', and \'float16\'.`);if("float32"!==l)throw new Error(`Weight ${c.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${l}.`)}const r=o.a[n.dtype],a=e.slice(u,u+p*r),s="uint8"===n.dtype?new Uint8Array(a):new Uint16Array(a);if("float32"===l)if("uint8"===n.dtype||"uint16"===n.dtype){h=new Float32Array(s.length);for(let e=0;e<s.length;e++){const t=s[e];h[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===i&&(i=x()),h=i(s)}else{if("int32"!==l)throw new Error(`Unsupported dtype in weight \'${t}\': ${l}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);h=new Int32Array(s.length);for(let e=0;e<s.length;e++){const t=s[e];h[e]=Math.round(t*n.scale+n.min)}}u+=p*r}else if("string"===l){const t=Object(s.O)(c.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(u,u+4))[0];u+=4;const n=new Uint8Array(e.slice(u,u+t));h.push(n),u+=t}}else{const s=o.a[l],i=e.slice(u,u+p*s);if("float32"===l)h=new Float32Array(i);else if("int32"===l)h=new Int32Array(i);else if("bool"===l)h=new Uint8Array(i);else{if("complex64"!==l)throw new Error(`Unsupported dtype in weight \'${t}\': ${l}`);{h=new Float32Array(i);const e=new Float32Array(h.length/2),s=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],s[t]=h[2*t+1];const o=Object(a.a)(e,d,"float32"),u=Object(a.a)(s,d,"float32");n[t]=Object(r.a)(o,u),o.dispose(),u.dispose()}}u+=p*s}"complex64"!==l&&(n[t]=Object(a.a)(h,d,l))}return n}function c(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let a=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}const l=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function d(t){return l?e.byteLength(t):new Blob([t]).size}function p(t){if(l)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,t=n.length;e<t;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function h(t){if(l){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function f(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function m(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function b(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function g(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,a]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=a}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function y(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:d(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:d(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function x(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let a=0;a<r.length;a++){const o=r[a],i=e[n[o>>10]+(1023&o)]+t[o>>10];s[a]=i}return new Float32Array(a)}}}).call(this,n(132).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u}));var r=n(4),a=n(17),s=n(2),o=n(6);function i(e){return o.b(o.u(e),(()=>"The f passed in grad(f) must be a function")),(t,n)=>{const a=Object(s.a)(t,"x","tf.grad","string_or_numeric"),i=null!=n?Object(s.a)(n,"dy","tf.grad"):null;return r.a.tidy((()=>{const{value:t,grads:n}=r.a.gradients((()=>e(a)),[a],i);return null!=i&&o.e(t.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(n),n[0]}))}}function u(e){return o.b(o.u(e),(()=>"The f passed in grads(f) must be a function")),(t,n)=>{o.b(Array.isArray(t),(()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"));const a=Object(s.b)(t,"args","tf.grads","string_or_numeric"),i=null!=n?Object(s.a)(n,"dy","tf.grads"):null;return r.a.tidy((()=>{const{value:t,grads:n}=r.a.gradients((()=>e(...a)),a,i);return null!=i&&o.e(t.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(n),n}))}}function c(e){return o.b(o.u(e),(()=>"The f passed in valueAndGrad(f) must be a function")),(t,n)=>{o.b(t instanceof a.a,(()=>"The x passed in valueAndGrad(f)(x) must be a tensor")),o.b(null==n||n instanceof a.a,(()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"));const{grads:s,value:i}=r.a.gradients((()=>e(t)),[t],n);return h(s),{grad:s[0],value:i}}}function l(e){return o.b(o.u(e),(()=>"The f passed in valueAndGrads(f) must be a function")),(t,n)=>{o.b(Array.isArray(t)&&t.every((e=>e instanceof a.a)),(()=>"The args passed in valueAndGrads(f)(args) must be array of tensors")),o.b(null==n||n instanceof a.a,(()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"));const s=r.a.gradients((()=>e(...t)),t,n);return null!=n&&o.e(s.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(s.grads),s}}function d(e,t){o.b(o.u(e),(()=>"The f passed in variableGrads(f) must be a function")),o.b(null==t||Array.isArray(t)&&t.every((e=>e instanceof a.c)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in r.a.registeredVariables)t.push(r.a.registeredVariables[e])}const s=n?t.filter((e=>!e.trainable)):null,i=t.length;t=t.filter((e=>e.trainable)),o.b(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`));const{value:u,grads:c}=r.a.gradients(e,t,null,!0);o.b(c.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),o.b(0===u.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${u.rank} tensor`));const l={};return t.forEach(((e,t)=>{null!=c[t]&&(l[e.name]=c[t])})),null!=s&&s.forEach((e=>l[e.name]=null)),{value:u,grads:l}}function p(e){return r.a.customGrad(e)}function h(e){if(e.filter((e=>null==e)).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\\n    the f you passed encloses all operations that lead from x to y.")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(42),u=n(3);const c=Object(u.b)({concat_:function(e,t=0){Object(o.b)(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Object(s.b)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\\n          with dtype ${e.dtype}. `)})),1===n.length)return Object(i.a)(n[0]);const u=n,c={axis:t};return r.a.runKernel(a.C,u,c)}})},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},function(e,t,n){"use strict";function r(e,t,n,r,a="NHWC",s){return o(e,[...t,e[3]],n,s,r,null,null,m(a))}function a(e,t,n,r,a,s,i="channelsLast"){const[u,l]=c(t);let d;if("channelsLast"===i)d=[u,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);d=[u,l,e[1],e[1]]}return o(e,d,n,r,a,s,!1,i)}function s(e,t,n,r,a,s,o="NDHWC"){const[u,c,d]=l(t);let p,h;if("NDHWC"===o)h="channelsLast",p=[u,c,d,e[4],e[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);h="channelsFirst",p=[u,c,d,e[1],e[1]]}return i(e,p,n,r,a,!1,h,s)}function o(e,t,n,r,a,s,o=!1,i="channelsLast"){let[l,h,f,m]=[-1,-1,-1,-1];if("channelsLast"===i)[l,h,f,m]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[l,m,h,f]=e}const[b,g,,y]=t,[x,v]=c(n),[O,k]=c(r),w=d(b,O),I=d(g,k),{padInfo:S,outHeight:N,outWidth:T}=function(e,t,n,r,a,s,o,i,c){let l,d,h;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=u(e,t,n));const s=e[0],o=e[1],i=p((s-t+2*r)/n+1,a),c=p((o-t+2*r)/n+1,a);return[i,c]}([t,n],s,r,e,i);d=a[0],h=a[1]}else if("same"===e){d=Math.ceil(t/r),h=Math.ceil(n/a);const e=Math.max(0,(d-1)*r+s-t),i=Math.max(0,(h-1)*a+o-n),u=Math.floor(e/2),c=e-u,p=Math.floor(i/2);l={top:u,bottom:c,left:p,right:i-p,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-s+1)/r),h=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const u="channelsLast"===c?e[1][0]:e[2][0],f="channelsLast"===c?e[1][1]:e[2][1],m="channelsLast"===c?e[2][0]:e[3][0],b="channelsLast"===c?e[2][1]:e[3][1];l={top:u,bottom:f,left:m,right:b,type:0===u&&0===f&&0===m&&0===b?"VALID":"EXPLICIT"},d=p((t-s+u+f)/r+1,i),h=p((n-o+m+b)/a+1,i)}}return{padInfo:l,outHeight:d,outWidth:h}}(a,h,f,x,v,w,I,s,i),j=o?y*m:y;let $;return"channelsFirst"===i?$=[l,j,N,T]:"channelsLast"===i&&($=[l,N,T,j]),{batchSize:l,dataFormat:i,inHeight:h,inWidth:f,inChannels:m,outHeight:N,outWidth:T,outChannels:j,padInfo:S,strideHeight:x,strideWidth:v,filterHeight:b,filterWidth:g,effectiveFilterHeight:w,effectiveFilterWidth:I,dilationHeight:O,dilationWidth:k,inShape:e,outShape:$,filterShape:t}}function i(e,t,n,r,a,s=!1,o="channelsLast",i){let[c,h,f,m,b]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[c,h,f,m,b]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[c,b,h,f,m]=e}const[g,y,x,,v]=t,[O,k,w]=l(n),[I,S,N]=l(r),T=d(g,I),j=d(y,S),$=d(x,N),{padInfo:C,outDepth:E,outHeight:A,outWidth:R}=function(e,t,n,r,a,s,o,i,c,l,d){let h,f,m,b;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const s=function(e,t,n,r,a,s){null==a&&(a=u(e,t,r));const o=e[0],i=e[1],c=e[2],l=p((o-t+2*a)/r+1,s),d=p((i-t+2*a)/r+1,s),h=p((c-t+2*a)/r+1,s);return[l,d,h,n]}([t,n,r,1],i,1,a,e,d);f=s[0],m=s[1],b=s[2]}else if("same"===e){f=Math.ceil(t/a),m=Math.ceil(n/s),b=Math.ceil(r/o);const e=(f-1)*a+i-t,u=(m-1)*s+c-n,d=(b-1)*o+l-r,p=Math.floor(e/2),g=e-p,y=Math.floor(u/2),x=u-y,v=Math.floor(d/2);h={top:y,bottom:x,left:v,right:d-v,front:p,back:g,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-i+1)/a),m=Math.ceil((n-c+1)/s),b=Math.ceil((r-l+1)/o)}return{padInfo:h,outDepth:f,outHeight:m,outWidth:b}}(a,h,f,m,O,k,w,T,j,$,i),_=s?v*b:v;let F;return"channelsFirst"===o?F=[c,_,E,A,R]:"channelsLast"===o&&(F=[c,E,A,R,_]),{batchSize:c,dataFormat:o,inDepth:h,inHeight:f,inWidth:m,inChannels:b,outDepth:E,outHeight:A,outWidth:R,outChannels:_,padInfo:C,strideDepth:O,strideHeight:k,strideWidth:w,filterDepth:g,filterHeight:y,filterWidth:x,effectiveFilterDepth:T,effectiveFilterHeight:j,effectiveFilterWidth:$,dilationDepth:I,dilationHeight:S,dilationWidth:N,inShape:e,outShape:F,filterShape:t}}function u(e,t,n,r=1){const a=d(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function c(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function l(e){return"number"==typeof e?[e,e,e]:e}function d(e,t){return t<=1?e:e+(e-1)*(t-1)}function p(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function h(e){const[t,n,r]=c(e);return 1===t&&1===n&&1===r}function f(e,t){return h(e)||h(t)}function m(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return m}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({zerosLike_:function(e){const t={x:Object(s.a)(e,"x","zerosLike")};return r.a.runKernel(a.jd,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),a=n(2),s=n(3);const o=Object(s.b)({square_:function(e){const t=Object(a.a)(e,"x","square");return r.a.runKernel("Square",{x:t},{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({abs_:function(e){const t=Object(s.a)(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return r.a.runKernel(a.B,e)}{const e={x:t};return r.a.runKernel(a.a,e)}}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return g}));var r=n(20),a=n(107),s=n(111),o=n(9),i=n(120),u=n(64),c=n(122),l=n(7),d=n(51),p=n(126),h=n(22);function f(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Object(o.a)(e,Object(p.a)(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function m(e,t){let n=t;const a=r.c(e.shape,t.shape);return a.length>0&&(n=Object(h.a)(n,a)),Object(l.a)(n,e.shape)}function b(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Object(u.a)(e);if("elu"===t)return Object(a.a)(e);if("relu6"===t)return Object(c.a)(e);if("prelu"===t)return Object(i.a)(e,n);if("leakyrelu"===t)return Object(s.a)(e,r);if("sigmoid"===t)return Object(d.a)(e);throw new Error(`Unknown fused activation ${t}.`)}const g=(e,t)=>!(e>0)||"linear"===t},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(17),a=n(6);function s(e,t="float32",n){return t=t||"float32",a.c(e),new r.b(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),a=n(6),s=n(35);function o(e,t){Object(a.d)(e);const n=Object(r.c)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Object(s.a)(e,null,n,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),a=n(6),s=n(8);function o(e,t,n,o){if(null==o&&(o=Object(a.r)(e)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(a.A)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Object(a.c)(t);const e=Object(a.O)(t),r=Object(a.O)(n);Object(a.b)(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],s=e!==n.length-1||r!==Object(a.O)(t.slice(e));Object(a.b)(n[e]===t[e]||!s,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return Object(a.A)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?Object(s.toTypedArray)(e,o):Object(a.m)(e,[],!0),r.a.makeTensor(e,t,o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({neg_:function(e){const t={x:Object(s.a)(e,"x","neg")};return r.a.runKernel(a.Xb,t)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n(12);function a(...e){Object(r.c)().getBool("IS_TEST")||Object(r.c)().getBool("PROD")||console.warn(...e)}function s(...e){Object(r.c)().getBool("IS_TEST")||Object(r.c)().getBool("PROD")||console.log(...e)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return N})),n.d(t,"i",(function(){return j})),n.d(t,"c",(function(){return $})),n.d(t,"f",(function(){return C})),n.d(t,"e",(function(){return R})),n.d(t,"d",(function(){return _})),n.d(t,"k",(function(){return D})),n.d(t,"g",(function(){return M})),n.d(t,"h",(function(){return P})),n.d(t,"j",(function(){return L})),n.d(t,"b",(function(){return B}));var r=n(0),a=n(53),s=n(69),o=n(1),i=n(191),u=n(192),c=n(193),l=n(194),d=n(195),p=n(196),h=n(197),f=n(198),m=n(199),b=n(200),g=n(201),y=n(202),x=n(203),v=n(204),O=n(205),k=n(206),w=n(207),I=n(208),S=n(209);class N{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[i,u,c,l,d,p,h,f,m,b,g,y,x,v,O,k,w,I,S].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],a=[],s=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):null!=t.input&&0!==t.input.length||s.push(e[t.name]),e)),{});let u=[];const c=[];let l={},d={};null!=t&&(l=this.mapSignatureEntries(t.inputs),d=this.mapSignatureEntries(t.outputs));const p=Object.keys(i);p.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[r,,a]=Object(o.b)(e),s=i[r];if(null!=s.outputs){const e=s.outputs.indexOf(a);if(-1!==e){const a=`${r}:${e}`;t.inputNames[n]=a}}t.inputs.push(s),s.children.push(t)}))})),0===Object.keys(d).length?p.forEach((e=>{const t=i[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((e=>{const[t]=Object(o.b)(e),n=i[t];null!=n&&(n.signatureKey=d[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((e=>{const[t]=Object(o.b)(e),n=i[t];n&&(n.signatureKey=l[e],u.push(n))})):u=r;let h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const f={nodes:i,inputs:u,outputs:c,weights:a,placeholders:r,signature:t,functions:h};return s.length>0&&(f.initNodes=s),f}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=Object(s.a)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.substr(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let a;switch(n.type){case"string":a=j(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=j(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":a=P(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=P(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":a=C(e.attr,n.tfName,n.defaultValue||0),void 0===a&&n.tfDeprecatedName&&(a=C(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":a=M(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=M(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":a=$(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=$(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":a=B(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=B(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":a=D(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=D(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":a=L(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":a=R(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=R(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":a=_(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":a=A(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=A(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:a,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const a=[],s=[];e.signature.inputArg.forEach((e=>{const[t]=Object(o.b)(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:E(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[a,,s]=Object(o.b)(e),i=r[a];if(null!=i.outputs){const e=i.outputs.indexOf(s);if(-1!==e){const r=`${a}:${e}`;t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=Object(o.b)(i[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,s.push(a))}));const u=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:s,weights:n,placeholders:[],signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function T(t,n){const a=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const n=Object(r.env)().global;if(void 0!==n.atob)return n.atob(t);if(void 0!==e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?a:a.toLowerCase()}function j(e,t,n,r=!1){const a=e[t];return null!=a?T(a.s,r):n}function $(e,t,n){const r=e[t];return r?r.b:n}function C(e,t,n){const r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function E(e){switch("string"==typeof e&&(e=a.a[e]),e){case a.a.DT_FLOAT:return"float32";case a.a.DT_INT32:case a.a.DT_INT64:case a.a.DT_INT8:case a.a.DT_UINT8:return"int32";case a.a.DT_BOOL:return"bool";case a.a.DT_DOUBLE:return"float32";case a.a.DT_STRING:return"string";default:return null}}function A(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function R(e,t,n){const r=e[t];return r&&r.type?E(r.type):n}function _(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>E(e))):n}function F(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function D(e,t,n){const r=e[t];return r&&r.shape?F(r.shape):n}function M(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function P(e,t,n,r=!1){const a=e[t];return a&&a.list&&a.list.s?a.list.s.map((e=>T(e,r))):n}function L(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>F(e))):n}function B(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n(132).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({complex_:function(e,t){const n=Object(s.a)(e,"real","complex"),i=Object(s.a)(t,"imag","complex");o.e(n.shape,i.shape,`real and imag shapes, ${n.shape} and ${i.shape}, must match in call to tf.complex().`);const u={real:n,imag:i};return r.a.runKernel(a.A,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({reverse_:function(e,t){const n={x:Object(s.a)(e,"x","reverse")},o={dims:t};return r.a.runKernel(a.vc,n,o)}})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({clone_:function(e){const t={x:Object(s.a)(e,"x","clone","string_or_numeric")};return r.a.runKernel(a.sb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({sqrt_:function(e){const t={x:Object(s.a)(e,"x","sqrt","float32")};return r.a.runKernel(a.Qc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({exp_:function(e){const t={x:Object(s.a)(e,"x","exp")};return r.a.runKernel(a.bb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(87),i=n(20),u=n(3);const c=Object(u.b)({where_:function(e,t,n){const u=Object(s.a)(t,"a","where"),c=Object(s.a)(n,"b","where"),l=Object(s.a)(e,"condition","where","bool"),d=Object(i.a)(Object(i.a)(l.shape,u.shape),c.shape),p={condition:Object(o.a)(l,d),t:Object(o.a)(u,d),e:Object(o.a)(c,d)};return r.a.runKernel(a.Ac,p)}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return m}));var r=n(12),a=n(76),s=n(37);const o=Object(a.a)("kernelRegistry",(()=>new Map)),i=Object(a.a)("gradRegistry",(()=>new Map));function u(e,t){const n=b(e,t);return o.get(n)}function c(e){return i.get(e)}function l(e){const t=o.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[s,o]=a,[i]=s.split("_");i===e&&n.push(o)}return n}function d(e){const{kernelName:t,backendName:n}=e,r=b(t,n);o.has(r)&&s.b(`The kernel \'${t}\' for backend \'${n}\' is already registered`),o.set(r,e)}function p(e){const{kernelName:t}=e;i.has(t)&&Object(r.c)().getBool("DEBUG")&&s.b(`Overriding the gradient for \'${t}\'`),i.set(t,e)}function h(e,t){const n=b(e,t);if(!o.has(n))throw new Error(`The kernel \'${e}\' for backend \'${t}\' is not registered`);o.delete(n)}function f(e){if(!i.has(e))throw new Error(`The gradient \'${e}\' for backend is not registered`);i.delete(e)}function m(e,t){l(e).forEach((e=>{d(Object.assign({},e,{backendName:t}))}))}function b(e,t){return`${t}_${e}`}},function(e,t,n){"use strict";function r(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,s=0,o=!1;for(;r<a;){s=r+(a-r>>>1);const i=n(t,e[s]);i>0?r=s+1:(a=s,o=!i)}return o?r:-r-1}(e,t,n||a)}(e,t,n),s=r<0?-(r+1):r;e.splice(s,0,t)}function a(e,t){return e>t?1:e<t?-1:0}function s(e,t,n,r,a){return u(e,t,n,r,a,0)}function o(e,t,n,r,a,s){return u(e,t,n,r,a,0,!1,s,!0)}function i(e,t,n,r,a,s){return u(e,t,n,r,a,s,!0)}function u(e,t,n,a,s,o,i=!1,u=!1,p=!1){const h=[];for(let e=0;e<t.length;e++)t[e]>s&&h.push({score:t[e],boxIndex:e,suppressBeginIndex:0});h.sort(d);const f=o>0?-.5/o:0,m=[],b=[];for(;m.length<n&&h.length>0;){const t=h.pop(),{score:n,boxIndex:o,suppressBeginIndex:i}=t;if(n<s)break;let u=!1;for(let n=m.length-1;n>=i;--n){const r=c(e,o,m[n]);if(r>=a){u=!0;break}if(t.score=t.score*l(a,f,r),t.score<=s)break}t.suppressBeginIndex=m.length,u||(t.score===n?(m.push(o),b.push(t.score)):t.score>s&&r(h,t,d))}const g=m.length,y=n-g;u&&y>0&&(m.push(...new Array(y).fill(0)),b.push(...new Array(y).fill(0)));const x={selectedIndices:m};return i&&(x.selectedScores=b),p&&(x.validOutputs=g),x}function c(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),h=(i-s)*(u-o),f=(d-c)*(p-l);if(h<=0||f<=0)return 0;const m=Math.max(s,c),b=Math.max(o,l),g=Math.min(i,d),y=Math.min(u,p),x=Math.max(g-m,0)*Math.max(y-b,0);return x/(h+f-x)}function l(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d}));var r=n(6);function a(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function s(e,t,n){const r=e.length+t.length,a=[];let s=0,o=0;for(let i=0;i<r;i++)-1===n.indexOf(i)?a.push(e[s++]):a.push(t[o++]);return a}function o(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((t=>e[t]))]}function i(e,t){return s(e,t.map((e=>1)),t)}function u(e,t,n){r.b(a(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function c(e,t){if(a(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function l(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function d(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({pad_:function(e,t,n=0){const o=Object(s.a)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},u={x:o};return r.a.runKernel(a.fc,u,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n(35);function s(e,t,n){const s=Object(r.c)(e,n);return Object(a.a)(e,t,s,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({sigmoid_:function(e){const t={x:Object(s.a)(e,"x","sigmoid","float32")};return r.a.runKernel(a.Cc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({max_:function(e,t=null,n=!1){const o={x:Object(s.a)(e,"x","max")},i={reductionIndices:t,keepDims:n};return r.a.runKernel(a.Jb,o,i)}})},function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({pow_:function(e,t){let n=Object(o.a)(e,"base","pow"),i=Object(o.a)(t,"exp","pow");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.hc,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({log_:function(e){const t={x:Object(s.a)(e,"x","log","float32")};return r.a.runKernel(a.Db,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({split_:function(e,t,n=0){const o={x:Object(s.a)(e,"x","split")},i={numOrSizeSplits:t,axis:n};return r.a.runKernel(a.Pc,o,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({stack_:function(e,t=0){const n=Object(s.b)(e,"tensors","stack","string_or_numeric");o.b(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&o.b(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const i=n,u={axis:t};return r.a.runKernel(a.ec,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(6),s=n(39),o=n(63);function i(e,t="float32"){if("complex64"===t){const t=i(e,"float32"),n=Object(o.a)(e,"float32");return Object(s.a)(t,n)}const n=Object(a.D)(Object(a.O)(e),t);return r.a.makeTensor(n,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({expandDims_:function(e,t=0){const n=Object(s.a)(e,"x","expandDims","string_or_numeric");o.b(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const i={input:n},u={dim:t};return r.a.runKernel(a.cb,i,u)}})},function(e,t,n){"use strict";var r,a,s,o,i;n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(s||(s={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(i||(i={}));const u={float32:o,int32:a,bool:s,complex64:i};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return u[e][t]}function l(e){return c(e,"int32")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(5);function s(e,t,n){const s={shape:e,value:t,dtype:n};return r.a.runKernel(a.fb,{},s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(27),u=n(3),c=n(7);const l=Object(u.b)({conv2d_:function(e,t,n,u,l="NHWC",d=[1,1],p){const h=Object(s.a)(e,"x","conv2d","float32"),f=Object(s.a)(t,"filter","conv2d","float32");let m=h,b=!1;3===h.rank&&(b=!0,m=Object(c.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.b(4===m.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`)),o.b(4===f.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${f.rank}.`)),null!=p&&o.b(o.v(u),(()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${p} but got pad ${u}.`));const g="NHWC"===l?m.shape[3]:m.shape[1];o.b(g===f.shape[2],(()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${f.shape[2]}.`)),o.b(i.h(n,d),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations \'${d}\'`));const y={x:m,filter:f},x={strides:n,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p},v=r.a.runKernel(a.D,y,x);return b?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),a=n(6),s=n(39);function o(e,t="float32"){if("complex64"===t){const t=o(e,"float32"),n=o(e,"float32");return Object(s.a)(t,n)}const n=Object(a.F)(Object(a.O)(e),t);return r.a.makeTensor(n,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({relu_:function(e){const t={x:Object(s.a)(e,"x","relu")};return r.a.runKernel(a.oc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(7);var u=n(3);const c=Object(u.b)({batchNorm_:function(e,t,n,u,c,l){null==l&&(l=.001);const d=Object(s.a)(e,"x","batchNorm"),p=Object(s.a)(t,"mean","batchNorm"),h=Object(s.a)(n,"variance","batchNorm");let f,m;null!=c&&(f=Object(s.a)(c,"scale","batchNorm")),null!=u&&(m=Object(s.a)(u,"offset","batchNorm")),o.b(p.rank===h.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),o.b(null==m||p.rank===m.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),o.b(null==f||p.rank===f.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const b={x:function(e){let t;return t=0===e.rank||1===e.rank?Object(i.a)(e,[1,1,1,e.size]):2===e.rank?Object(i.a)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Object(i.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(d),scale:f,offset:m,mean:p,variance:h},g={varianceEpsilon:l},y=r.a.runKernel(a.kb,b,g);return Object(i.a)(y,d.shape)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({tile_:function(e,t){const n=Object(s.a)(e,"x","tile","string_or_numeric");o.b(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const i={x:n},u={reps:t};return r.a.runKernel(a.cd,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(89);n(88);class a{constructor(e,t,n,a,s){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=r.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,s;do{r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class s{constructor(e,t,n,s){this.alpha=e,this.beta=1/t,this.dtype=n;const o=s||Math.random();this.randu=r.alea(o.toString()),this.randn=new a(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class o{constructor(e=0,t=1,n,a){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=r.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(5);function s(e,t,n=1,s="float32"){if(0===n)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:s};return r.a.runKernel(a.kc,{},o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const r={};function a(e){return r[e]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({greater_:function(e,t){let n=Object(o.a)(e,"a","greater","string_or_numeric"),u=Object(o.a)(t,"b","greater","string_or_numeric");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.pb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(20),i=n(3);const u=Object(i.b)({logicalAnd_:function(e,t){const n=Object(s.a)(e,"a","logicalAnd","bool"),i=Object(s.a)(t,"b","logicalAnd","bool");Object(o.a)(n.shape,i.shape);const u={a:n,b:i};return r.a.runKernel(a.Gb,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({mean_:function(e,t=null,n=!1){const o={x:Object(s.a)(e,"x","mean")},i={axis:t,keepDims:n};return r.a.runKernel(a.Qb,o,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({real_:function(e){const t={input:Object(s.a)(e,"input","real")};return r.a.runKernel(a.lc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(6),o=n(3);const i=Object(o.b)({ifft_:function(e){Object(s.b)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.a.runKernel(a.rb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({transpose_:function(e,t){const n=Object(s.a)(e,"x","transpose");if(null==t&&(t=n.shape.map(((e,t)=>t)).reverse()),o.b(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`)),t.forEach((e=>{o.b(e>=0&&e<n.rank,(()=>"All entries in \'perm\' must be between 0 and "+(n.rank-1)+` but got ${t}`))})),n.rank<=1)return n.clone();const i={x:n},u={perm:t};return r.a.runKernel(a.fd,i,u)}})},function(e,t,n){"use strict";(function(e,r){let a;function s(){if(null==a){let t;if("undefined"!=typeof window)t=window;else if(void 0!==e)t=e;else if(void 0!==r)t=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}a=t}return a}function o(e,t){const n=function(){const e=s();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}))}).call(this,n(96),n(97))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";n.r(t),n.d(t,"validateUpdateShape",(function(){return a})),n.d(t,"validateInput",(function(){return s})),n.d(t,"calculateShapes",(function(){return o}));var r=n(6);function a(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(s+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(let e=0;e<a;++e)if(n.shape[e]!==t.shape[e])throw new Error(s+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-a;++t)if(n.shape[t+a]!==e[t+r])throw new Error(s+` updates.shape[${t+a}] (${n.shape[t+a]}) != shape[${t+a}] (${e[t+a]})`)}function s(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of \'indices\' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}a(n,t,e)}function o(e,t,n){const a=t.shape.length,s=a>1?t.shape[a-1]:1,o=n.length;let i=1;for(let e=s;e<o;++e)i*=n[e];const u=s<1?1:s;return{sliceRank:s,numUpdates:Object(r.O)(t.shape)/u,sliceSize:i,strides:[...Object(r.j)(n.slice(0,s)),1],outputSize:Object(r.O)(n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3),u=n(7);const c=Object(i.b)({depthwiseConv2d_:function(e,t,n,i,c="NHWC",l=[1,1],d){const p=Object(s.a)(e,"x","depthwiseConv2d","float32"),h=Object(s.a)(t,"filter","depthwiseConv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=Object(u.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.b(4===f.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`)),o.b(4===h.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`)),o.b(f.shape[3]===h.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`)),null!=d&&o.b(o.v(i),(()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${i}.`));const b={x:f,filter:h},g={strides:n,pad:i,dataFormat:c,dilations:l,dimRoundingMode:d},y=r.a.runKernel(a.P,b,g);return m?Object(u.a)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({imag_:function(e){const t={input:Object(s.a)(e,"input","imag")};return r.a.runKernel(a.tb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({lessEqual_:function(e,t){let n=Object(o.a)(e,"a","lessEqual","string_or_numeric"),u=Object(o.a)(t,"b","lessEqual","string_or_numeric");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.Bb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(6),o=n(3);const i=Object(o.b)({fft_:function(e){Object(s.b)("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return r.a.runKernel(a.eb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(6),a=n(39),s=n(25),o=n(81),i=n(3),u=n(73),c=n(7),l=n(21),d=n(56),p=n(63),h=n(28),f=n(83);const m=Object(i.b)({rfft_:function(e,t){Object(r.b)("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const i=e.size/n;let m;if(null!=t&&t<n){const r=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,m=Object(l.a)(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,m=Object(s.a)([e,Object(p.a)(r)],e.shape.length-1),n=t}else m=e;const b=Object(h.a)(m),g=Object(c.a)(Object(a.a)(m,b),[i,n]),y=Object(f.a)(g),x=Math.floor(n/2)+1,v=Object(u.a)(y),O=Object(o.a)(y),k=Object(d.a)(v,[x,n-x],v.shape.length-1),w=Object(d.a)(O,[x,n-x],O.shape.length-1),I=m.shape.slice();return I[m.shape.length-1]=x,Object(c.a)(Object(a.a)(k[0],w[0]),I)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),a=n(6),s=n(3),o=n(7);const i=Object(s.b)({squeeze_:function(e,t){const n=Object(r.a)(e,"x","squeeze");return Object(o.a)(n,Object(a.Q)(n.shape,t).newShape)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({unstack_:function(e,t=0){const n=Object(s.a)(e,"x","unstack","string_or_numeric");o.b(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const i={value:n},u={axis:t};return r.a.runKernel(a.hd,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(42),i=n(3),u=n(7);const c=Object(i.b)({broadcastTo_:function(e,t){let n=Object(s.a)(e,"broadcastTo","x");const i=n.shape;if(t.some((e=>!(e>0)||e%1!=0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=Object(u.a)(n,e)}const c=n.shape,l=Array.from(t);for(let e=t.length-1;e>=0;e--)if(c[e]===t[e])l[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${t}].`);if(0===l.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return Object(o.a)(n);const d={x:n},p={reps:l};return r.a.runKernel(a.cd,d,p)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"TEST_EPSILON_FLOAT16",(function(){return i})),n.d(t,"expectArraysClose",(function(){return u})),n.d(t,"testEpsilon",(function(){return c})),n.d(t,"expectPromiseToFail",(function(){return d})),n.d(t,"expectArraysEqual",(function(){return p})),n.d(t,"expectNumbersClose",(function(){return h})),n.d(t,"expectValuesInRange",(function(){return m})),n.d(t,"expectArrayBuffersEqual",(function(){return b})),n.d(t,"encodeStrings",(function(){return g}));var r=n(4),a=n(2),s=n(6),o=n(8);const i=.1;function u(e,t,n){return null==n&&(n=c()),l(e,t,((e,t)=>f(e,t,n)))}function c(){return 32===r.a.backend.floatPrecision()?.001:i}function l(e,t,n){let r=!0;if((Object(s.A)(e)||Object(s.A)(t))&&(r=!1),Object(s.A)(e)&&Object(s.A)(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=Object(a.c)(e),r=Object(a.c)(t);if(!Object(s.a)(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const o=Object(s.A)(e)?e:Object(s.m)(e),i=Object(s.A)(t)?t:Object(s.m)(t);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.\\nActual:   ${o}.\\nExpected: ${i}.`);for(let e=0;e<i.length;++e){const t=o[e],r=i[e];if(!n(t,r))throw new Error(`Arrays differ: actual[${e}] = ${t}, expected[${e}] = ${r}.\\nActual:   ${o}.\\nExpected: ${i}.`)}}function d(e,t){e().then((()=>t.fail()),(()=>t()))}function p(e,t){const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Object(s.z)(e)||Object(s.z)(e[0])||Object(s.z)(t)||Object(s.z)(t[0])?l(e,n,((e,t)=>e==t)):l(e,t,((e,t)=>f(e,t,0)))}function h(e,t,n){if(null==n&&(n=c()),!f(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function f(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function m(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function b(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function g(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?g(n):e[t]=Object(o.encodeString)(n)}return e}},function(e,t,n){var r=n(218),a=n(219),s=n(220),o=n(221),i=n(222),u=n(223),c=n(224);c.alea=r,c.xor128=a,c.xorwow=s,c.xorshift7=o,c.xor4096=i,c.tychei=u,e.exports=c},function(e,t,n){"use strict";(function(e){n(4);var t=n(99),r=n(12);const a=Object(r.c)();a.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(()=>t.isBrowser())),a.registerFlag("IS_NODE",(()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node)),a.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),a.registerFlag("PROD",(()=>!1)),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>a.getBool("DEBUG"))),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),a.registerFlag("IS_TEST",(()=>!1)),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),a.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1))}).call(this,n(97))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class a{refCount(e){return s("refCount")}incRef(e){return s("incRef")}timerAvailable(){return!0}time(e){return s("time")}read(e){return s("read")}readSync(e){return s("readSync")}numDataIds(){return s("numDataIds")}disposeData(e,t){return s("disposeData")}write(e,t,n){return s("write")}move(e,t,n,r,a){return s("move")}memory(){return s("memory")}floatPrecision(){return s("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return s("dispose")}}function s(e){throw new Error(`\'${e}\' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({tanh_:function(e){const t={x:Object(s.a)(e,"x","tanh","float32")};return r.a.runKernel(a.bd,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({min_:function(e,t=null,n=!1){const o={x:Object(s.a)(e,"x","min")},i={axis:t,keepDims:n};return r.a.runKernel(a.Rb,o,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({oneHot_:function(e,t,n=1,o=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const i={indices:Object(s.a)(e,"indices","oneHot","int32")},u={depth:t,onValue:n,offValue:o};return r.a.runKernel(a.cc,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,a=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,d=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!l){var e=i(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return s.a})),n.d(t,"d",(function(){return o.a})),n.d(t,"e",(function(){return i.a})),n.d(t,"f",(function(){return u.a})),n.d(t,"g",(function(){return c.a})),n.d(t,"h",(function(){return l.a})),n.d(t,"i",(function(){return d.a})),n.d(t,"j",(function(){return p.a})),n.d(t,"k",(function(){return h.a})),n.d(t,"l",(function(){return f.a})),n.d(t,"m",(function(){return m.a})),n.d(t,"n",(function(){return b.a})),n.d(t,"o",(function(){return g.a})),n.d(t,"p",(function(){return y.a})),n.d(t,"q",(function(){return x.a})),n.d(t,"r",(function(){return j})),n.d(t,"w",(function(){return $.a})),n.d(t,"s",(function(){return C.a})),n.d(t,"t",(function(){return A})),n.d(t,"u",(function(){return R})),n.d(t,"v",(function(){return _})),n.d(t,"x",(function(){return F.a})),n.d(t,"z",(function(){return D.a})),n.d(t,"A",(function(){return M.a})),n.d(t,"B",(function(){return P.a})),n.d(t,"C",(function(){return L.a})),n.d(t,"D",(function(){return B.a})),n.d(t,"E",(function(){return z.a})),n.d(t,"F",(function(){return V.a})),n.d(t,"G",(function(){return W.a})),n.d(t,"H",(function(){return O.a})),n.d(t,"I",(function(){return U})),n.d(t,"J",(function(){return G})),n.d(t,"K",(function(){return H})),n.d(t,"L",(function(){return q})),n.d(t,"M",(function(){return K.a})),n.d(t,"N",(function(){return X.a})),n.d(t,"O",(function(){return Y.a})),n.d(t,"P",(function(){return Q.a})),n.d(t,"Q",(function(){return ne})),n.d(t,"R",(function(){return re.a})),n.d(t,"S",(function(){return ae.a})),n.d(t,"U",(function(){return se.a})),n.d(t,"V",(function(){return oe.a})),n.d(t,"W",(function(){return ie.a})),n.d(t,"X",(function(){return ue.a})),n.d(t,"Y",(function(){return ce})),n.d(t,"Z",(function(){return le.a})),n.d(t,"ab",(function(){return de.a})),n.d(t,"bb",(function(){return pe.a})),n.d(t,"cb",(function(){return he})),n.d(t,"eb",(function(){return fe.a})),n.d(t,"fb",(function(){return me.a})),n.d(t,"hb",(function(){return be.a})),n.d(t,"ib",(function(){return ge.a})),n.d(t,"jb",(function(){return ye.a})),n.d(t,"kb",(function(){return xe.a})),n.d(t,"lb",(function(){return ve.a})),n.d(t,"mb",(function(){return ke})),n.d(t,"ob",(function(){return we.a})),n.d(t,"pb",(function(){return Ie.a})),n.d(t,"qb",(function(){return Se.a})),n.d(t,"sb",(function(){return Ne.a})),n.d(t,"ub",(function(){return Te.a})),n.d(t,"vb",(function(){return je.a})),n.d(t,"xb",(function(){return $e.a})),n.d(t,"Bb",(function(){return Ce})),n.d(t,"Cb",(function(){return Ee})),n.d(t,"Db",(function(){return Ae.a})),n.d(t,"Eb",(function(){return Re.a})),n.d(t,"Fb",(function(){return _e.a})),n.d(t,"Gb",(function(){return Fe.a})),n.d(t,"Ib",(function(){return De.a})),n.d(t,"Jb",(function(){return Me.a})),n.d(t,"Kb",(function(){return Pe.a})),n.d(t,"Lb",(function(){return Le.a})),n.d(t,"Mb",(function(){return We})),n.d(t,"Nb",(function(){return Ue.a})),n.d(t,"Ob",(function(){return Xe})),n.d(t,"Pb",(function(){return Ye.a})),n.d(t,"Qb",(function(){return Qe.a})),n.d(t,"Rb",(function(){return Ze.a})),n.d(t,"Sb",(function(){return et})),n.d(t,"Ub",(function(){return k.a})),n.d(t,"Vb",(function(){return He.a})),n.d(t,"Wb",(function(){return tt.a})),n.d(t,"Xb",(function(){return nt.a})),n.d(t,"Yb",(function(){return rt.a})),n.d(t,"Zb",(function(){return at.a})),n.d(t,"ac",(function(){return st.a})),n.d(t,"bc",(function(){return ut})),n.d(t,"cc",(function(){return ct.a})),n.d(t,"dc",(function(){return lt.a})),n.d(t,"ec",(function(){return dt.a})),n.d(t,"fc",(function(){return pt.a})),n.d(t,"gc",(function(){return ft})),n.d(t,"ic",(function(){return w.a})),n.d(t,"jc",(function(){return mt})),n.d(t,"kc",(function(){return bt.a})),n.d(t,"lc",(function(){return ze.a})),n.d(t,"nc",(function(){return gt.a})),n.d(t,"oc",(function(){return yt.a})),n.d(t,"pc",(function(){return ot.a})),n.d(t,"qc",(function(){return xt.a})),n.d(t,"sc",(function(){return vt})),n.d(t,"tc",(function(){return Ot.a})),n.d(t,"uc",(function(){return kt})),n.d(t,"vc",(function(){return wt})),n.d(t,"wc",(function(){return It})),n.d(t,"xc",(function(){return St})),n.d(t,"yc",(function(){return jt})),n.d(t,"zc",(function(){return $t.a})),n.d(t,"Ac",(function(){return Ct.a})),n.d(t,"Bc",(function(){return Et.a})),n.d(t,"Cc",(function(){return At.a})),n.d(t,"Dc",(function(){return Rt})),n.d(t,"Ec",(function(){return Ft})),n.d(t,"Fc",(function(){return Dt})),n.d(t,"Gc",(function(){return Mt.a})),n.d(t,"Hc",(function(){return Pt.a})),n.d(t,"Ic",(function(){return Lt.a})),n.d(t,"Jc",(function(){return Bt.a})),n.d(t,"Kc",(function(){return zt.a})),n.d(t,"Lc",(function(){return Vt.a})),n.d(t,"Mc",(function(){return ee.a})),n.d(t,"Nc",(function(){return Wt.a})),n.d(t,"Oc",(function(){return Ut})),n.d(t,"Pc",(function(){return Gt})),n.d(t,"Qc",(function(){return Ht})),n.d(t,"Rc",(function(){return qt})),n.d(t,"Tc",(function(){return Kt.a})),n.d(t,"Uc",(function(){return Xt.a})),n.d(t,"Vc",(function(){return Yt.a})),n.d(t,"Xc",(function(){return Qt.a})),n.d(t,"Yc",(function(){return Zt})),n.d(t,"Zc",(function(){return Jt.a})),n.d(t,"ad",(function(){return S.a})),n.d(t,"bd",(function(){return en.a})),n.d(t,"dd",(function(){return tn.a})),n.d(t,"ed",(function(){return nn.a})),n.d(t,"fd",(function(){return N.a})),n.d(t,"gd",(function(){return rn})),n.d(t,"hd",(function(){return an})),n.d(t,"id",(function(){return sn})),n.d(t,"jd",(function(){return on})),n.d(t,"kd",(function(){return un.a})),n.d(t,"ld",(function(){return Ve.a})),n.d(t,"md",(function(){return Tt.a})),n.d(t,"nb",(function(){return cn.a})),n.d(t,"wb",(function(){return ln.a})),n.d(t,"Ab",(function(){return dn.a})),n.d(t,"Sc",(function(){return pn.a})),n.d(t,"qd",(function(){return hn.a})),n.d(t,"rd",(function(){return fn.a})),n.d(t,"sd",(function(){return ht.a})),n.d(t,"td",(function(){return mn.a})),n.d(t,"ud",(function(){return bn.a})),n.d(t,"vd",(function(){return gn.a})),n.d(t,"wd",(function(){return yn.a})),n.d(t,"xd",(function(){return xn.a})),n.d(t,"zd",(function(){return qe.a})),n.d(t,"Ad",(function(){return Ke.a})),n.d(t,"Bd",(function(){return vn.a})),n.d(t,"Cd",(function(){return T.a})),n.d(t,"Dd",(function(){return On.a})),n.d(t,"Ed",(function(){return kn.a})),n.d(t,"Fd",(function(){return In})),n.d(t,"Gd",(function(){return Sn.a})),n.d(t,"Hd",(function(){return Nn})),n.d(t,"Id",(function(){return Tn})),n.d(t,"Jd",(function(){return jn})),n.d(t,"Kd",(function(){return Oe.a})),n.d(t,"Ld",(function(){return $n.a})),n.d(t,"Nd",(function(){return Cn.a})),n.d(t,"Od",(function(){return En.a})),n.d(t,"Pd",(function(){return An})),n.d(t,"Qd",(function(){return Rn.a})),n.d(t,"Rd",(function(){return _n})),n.d(t,"Sd",(function(){return Fn.a})),n.d(t,"Td",(function(){return Dn.a})),n.d(t,"Ud",(function(){return Mn.a})),n.d(t,"Vd",(function(){return Pn.a})),n.d(t,"y",(function(){return Ln})),n.d(t,"Md",(function(){return Bn.a})),n.d(t,"mc",(function(){return Vn})),n.d(t,"hc",(function(){return Un})),n.d(t,"Wc",(function(){return Gn.a})),n.d(t,"od",(function(){return Hn.a})),n.d(t,"tb",(function(){return qn.a})),n.d(t,"db",(function(){return Kn})),n.d(t,"gb",(function(){return Xn})),n.d(t,"T",(function(){return Yn})),n.d(t,"zb",(function(){return Qn})),n.d(t,"rc",(function(){return I.b})),n.d(t,"a",(function(){return I.a})),n.d(t,"yb",(function(){return Yr})),n.d(t,"Hb",(function(){return Qr})),n.d(t,"Tb",(function(){return Zr})),n.d(t,"pd",(function(){return Kr})),n.d(t,"rb",(function(){return r})),n.d(t,"cd",(function(){return Xr})),n.d(t,"nd",(function(){return Jr})),n.d(t,"yd",(function(){return ea}));var r={};n.r(r),n.d(r,"conv2d",(function(){return tr})),n.d(r,"depthwiseConv2d",(function(){return ar})),n.d(r,"matMul",(function(){return sr}));var a=n(30),s=n(133),o=n(134),i=n(10),u=n(135),c=n(136),l=n(137),d=n(138),p=n(139),h=n(140),f=n(141),m=n(142),b=n(143),g=n(144),y=n(103),x=n(145),v=n(2),O=n(25),k=n(19),w=n(9),I=n(3),S=n(51),N=n(21),T=n(92);const j=Object(I.b)({basicLSTMCell_:function(e,t,n,r,a,s){const o=Object(v.a)(e,"forgetBias","basicLSTMCell"),u=Object(v.a)(t,"lstmKernel","basicLSTMCell"),c=Object(v.a)(n,"lstmBias","basicLSTMCell"),l=Object(v.a)(r,"data","basicLSTMCell"),d=Object(v.a)(a,"c","basicLSTMCell"),p=Object(v.a)(s,"h","basicLSTMCell"),h=Object(O.a)([l,p],1),f=Object(k.a)(h,u),m=Object(i.a)(f,c),b=m.shape[0],g=m.shape[1]/4,y=[b,g],x=Object(N.a)(m,[0,0],y),I=Object(N.a)(m,[0,g],y),j=Object(N.a)(m,[0,2*g],y),$=Object(N.a)(m,[0,3*g],y),C=Object(i.a)(Object(w.a)(Object(S.a)(x),Object(T.a)(I)),Object(w.a)(d,Object(S.a)(Object(i.a)(o,j))));return[C,Object(w.a)(Object(T.a)(C),Object(S.a)($))]}});var $=n(104),C=n(65),E=n(6);const A=Object(I.b)({batchNorm2d_:function(e,t,n,r,a,s){const o=Object(v.a)(e,"x","batchNorm"),i=Object(v.a)(t,"mean","batchNorm"),u=Object(v.a)(n,"variance","batchNorm");let c,l;return null!=a&&(c=Object(v.a)(a,"scale","batchNorm")),null!=r&&(l=Object(v.a)(r,"offset","batchNorm")),E.b(2===o.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`)),E.b(2===i.rank||1===i.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`)),E.b(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&E.b(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`)),null!=l&&E.b(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`)),Object(C.a)(o,i,u,l,c,s)}});const R=Object(I.b)({batchNorm3d_:function(e,t,n,r,a,s){const o=Object(v.a)(e,"x","batchNorm"),i=Object(v.a)(t,"mean","batchNorm"),u=Object(v.a)(n,"variance","batchNorm");let c,l;return null!=a&&(c=Object(v.a)(a,"scale","batchNorm")),null!=r&&(l=Object(v.a)(r,"offset","batchNorm")),E.b(3===o.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`)),E.b(3===i.rank||1===i.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`)),E.b(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&E.b(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`)),null!=l&&E.b(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`)),Object(C.a)(o,i,u,l,c,s)}});const _=Object(I.b)({batchNorm4d_:function(e,t,n,r,a,s){const o=Object(v.a)(e,"x","batchNorm"),i=Object(v.a)(t,"mean","batchNorm"),u=Object(v.a)(n,"variance","batchNorm");let c,l;return null!=a&&(c=Object(v.a)(a,"scale","batchNorm")),null!=r&&(l=Object(v.a)(r,"offset","batchNorm")),E.b(4===o.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`)),E.b(4===i.rank||1===i.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`)),E.b(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&E.b(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`)),null!=l&&E.b(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`)),Object(C.a)(o,i,u,l,c,s)}});var F=n(105),D=n(146),M=n(87),P=n(33),L=n(18),B=n(147),z=n(148),V=n(42),W=n(39);const U=Object(I.b)({concat1d_:function(e){return Object(O.a)(e,0)}});const G=Object(I.b)({concat2d_:function(e,t){return Object(O.a)(e,t)}});const H=Object(I.b)({concat3d_:function(e,t){return Object(O.a)(e,t)}});const q=Object(I.b)({concat4d_:function(e,t){return Object(O.a)(e,t)}});var K=n(149),X=n(62),Y=n(150),Q=n(151),Z=n(4),J=n(5),ee=n(7);const te=Object(I.b)({conv3DBackpropInput_:function(e,t,n,r,a){E.b(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,o=t,i=!1;4===t.rank&&(i=!0,o=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const u=s[4],c=o.shape[4];E.b(5===s.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`)),E.b(5===o.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`)),E.b(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),E.b(u===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`)),E.b(c===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`));const l={dy:o,filter:n},d={pad:a,strides:r,inputShape:s},p=Z.a.runKernel(J.I,l,d);return i?Object(ee.a)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const ne=Object(I.b)({conv3dTranspose_:function(e,t,n,r,a){const s=Object(v.a)(e,"x","conv3dTranspose"),o=Object(v.a)(t,"filter","conv3dTranspose");return te(n,s,o,r,a)}});var re=n(152),ae=n(153),se=n(154),oe=n(155),ie=n(156),ue=n(80);const ce=Object(I.b)({diag_:function(e){const t={x:Object(v.a)(e,"x","diag")};return Z.a.runKernel(J.S,t)}});var le=n(157),de=n(16),pe=n(158);const he=Object(I.b)({dot_:function(e,t){const n=Object(v.a)(e,"t1","dot"),r=Object(v.a)(t,"t2","dot");E.b(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(E.b(a===s,(()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`)),1===n.rank&&1===r.rank){const e=Object(ee.a)(n,[1,-1]),t=Object(ee.a)(r,[-1,1]),a=Object(k.a)(e,t);return Object(ee.a)(a,[])}if(1===n.rank&&2===r.rank){const e=Object(ee.a)(n,[1,-1]),t=Object(ee.a)(r,[r.shape[0],r.shape[1]]),a=Object(k.a)(e,t);return Object(ee.a)(a,[a.size])}if(2===n.rank&&1===r.rank){const e=Object(ee.a)(r,[-1,1]),t=Object(k.a)(n,e);return Object(ee.a)(t,[t.size])}{const e=Object(ee.a)(r,[r.shape[0],r.shape[1]]);return Object(k.a)(n,e)}}});var fe=n(159),me=n(107),be=n(106),ge=n(160),ye=n(44),xe=n(59),ve=n(161),Oe=n(66);const ke=Object(I.b)({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const a=Object(P.a)([e,t],r),s=e<=t?e:t;for(let e=0;e<s;++e)a.set(1,e,e);const o=Object(ee.a)(a.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return Object(Oe.a)(Object(xe.a)(o,0),[n[0],1,1]);if(2===n.length)return Object(Oe.a)(Object(xe.a)(Object(xe.a)(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(Oe.a)(Object(xe.a)(Object(xe.a)(Object(xe.a)(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var we=n(61),Ie=n(108),Se=n(101),Ne=n(109),Te=n(70),je=n(110),$e=n(81);const Ce=Object(I.b)({isFinite_:function(e){const t={x:Object(v.a)(e,"x","isFinite")};return Z.a.runKernel(J.ub,t)}});const Ee=Object(I.b)({isInf_:function(e){const t={x:Object(v.a)(e,"x","isInf")};return Z.a.runKernel(J.vb,t)}});var Ae=n(162),Re=n(111),_e=n(163),Fe=n(82),De=n(164),Me=n(165),Pe=n(55),Le=n(112),Be=n(24),ze=n(36),Ve=n(113);const We=Object(I.b)({logSigmoid_:function(e){const t=Object(v.a)(e,"x","logSigmoid");return Object(Be.a)((e=>({value:Object(ze.a)(Object(Ve.a)(Object(ze.a)(e))),gradFunc:t=>Object(w.a)(t,Object(S.a)(Object(ze.a)(e)))})))(t)}});var Ue=n(166),Ge=n(48),He=n(52),qe=n(11),Ke=n(22);const Xe=Object(I.b)({logSumExp_:function(e,t=null,n=!1){const r=Object(v.a)(e,"x","logSumExp"),a=Object(E.I)(t,r.shape),s=Object(He.a)(r,a,!0),o=Object(qe.a)(r,s),u=Object(ye.a)(o),c=Object(Ke.a)(u,a),l=Object(Pe.a)(c),d=Object(i.a)(Object(ee.a)(s,l.shape),l);if(n){const e=Object(Ge.e)(d.shape,a);return Object(ee.a)(d,e)}return d}});var Ye=n(71),Qe=n(114),Ze=n(115),Je=n(20);const et=Object(I.b)({logicalXor_:function(e,t){const n=Object(v.a)(e,"a","logicalXor","bool"),r=Object(v.a)(t,"b","logicalXor","bool");return Object(Je.a)(n.shape,r.shape),Object(Ye.a)(Object(Ze.a)(e,t),Object(Qe.a)(Object(Ye.a)(e,t)))}});var tt=n(116),nt=n(167),rt=n(168),at=n(102),st=n(72),ot=n(58),it=n(17);function ut(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=Object(v.a)(e,"x","meshgrid",e instanceof it.a?e.dtype:"float32");if(void 0===t)return[r];let a=Object(v.a)(t,"y","meshgrid",t instanceof it.a?t.dtype:"float32");const s=Object(E.O)(r.shape),o=Object(E.O)(a.shape);return"xy"===n?(r=Object(ee.a)(r,[1,-1]),a=Object(ee.a)(a,[-1,1]),[Object(k.a)(Object(ot.a)([o,1],r.dtype),r),Object(k.a)(a,Object(ot.a)([1,s],a.dtype))]):(r=Object(ee.a)(r,[-1,1]),a=Object(ee.a)(a,[1,-1]),[Object(k.a)(r,Object(ot.a)([1,o],r.dtype)),Object(k.a)(Object(ot.a)([s,1],a.dtype),a)])}var ct=n(93),lt=n(117),dt=n(169),pt=n(170),ht=n(29);const ft=Object(I.b)({moments_:function(e,t=null,n=!1){e=Object(v.a)(e,"x","moments");const r=Object(E.I)(t,e.shape),a=Object(st.a)(e,r,n);let s=a.shape;n||(s=Object(Ge.e)(a.shape,r));const o=Object(ht.a)(Object(qe.a)(Object(L.a)(e,"float32"),Object(ee.a)(a,s)));return{mean:a,variance:Object(st.a)(o,r,n)}}});const mt=Object(I.b)({multiRNNCell_:function(e,t,n,r){const a=Object(v.a)(t,"data","multiRNNCell"),s=Object(v.b)(n,"c","multiRNNCell"),o=Object(v.b)(r,"h","multiRNNCell");let i=a;const u=[];for(let t=0;t<e.length;t++){const n=e[t](i,s[t],o[t]);u.push(n[0]),u.push(n[1]),i=n[1]}const c=[],l=[];for(let e=0;e<u.length;e+=2)c.push(u[e]),l.push(u[e+1]);return[c,l]}});var bt=n(171),gt=n(118),yt=n(94),xt=n(172);const vt=Object(I.b)({outerProduct_:function(e,t){const n=Object(v.a)(e,"v1","outerProduct"),r=Object(v.a)(t,"v2","outerProduct");E.b(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const a=Object(ee.a)(n,[-1,1]),s=Object(ee.a)(r,[1,-1]);return Object(k.a)(a,s)}});var Ot=n(49);const kt=Object(I.b)({pad1d_:function(e,t,n=0){return Object(E.b)(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),Object(Ot.a)(e,[t],n)}});const wt=Object(I.b)({pad2d_:function(e,t,n=0){return Object(E.b)(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Object(Ot.a)(e,t,n)}});const It=Object(I.b)({pad3d_:function(e,t,n=0){return Object(E.b)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Object(Ot.a)(e,t,n)}});const St=Object(I.b)({pad4d_:function(e,t,n=0){return Object(E.b)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Object(Ot.a)(e,t,n)}});var Nt=n(27),Tt=n(119);const jt=Object(I.b)({pool_:function(e,t,n,r,a,s){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");const o=Object(v.a)(e,"x","maxPool");let i=o,u=!1;3===o.rank&&(u=!0,i=Object(ee.a)(o,[1,o.shape[0],o.shape[1],o.shape[2]])),E.b(Nt.h(s,a),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations \'${a}\'`));const c=Nt.e(i.shape,t,s,a,r),l=[c.dilationHeight,c.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))).map((e=>e-1)),r=n.map((e=>Math.floor(e/2))),a=n.map(((e,t)=>e-r[t]));return n.map(((e,t)=>[r[t],a[t]]))}([c.filterHeight,c.filterWidth],l):[[0,0],[0,0]];const p=1===l[0]&&1===l[1],[h,f]=function(e,t,n){const r=n.map((e=>e[0])),a=n.map((e=>e[1])),s=e.concat(r,a),o=t.map(((e,t)=>(e-s[t]%e)%e)),i=a.map(((e,t)=>e+o[t])),u=t.map(((e,t)=>[r[t],i[t]])),c=t.map(((e,t)=>[0,o[t]]));return[u,c]}([c.inHeight,c.inWidth],l,d),m=p?r:"valid",b=p?i:Object(Tt.a)(i,l,h),g=("avg"===n?()=>Object(y.a)(b,t,s,m):()=>Object(tt.a)(b,t,s,m))(),x=p?g:Object($.a)(g,l,f);return u?Object(ee.a)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}});var $t=n(54),Ct=n(120),Et=n(100),At=n(173);const Rt=Object(I.b)({rand_:function(e,t,n){const r=Object(E.O)(e);let a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);a=new Uint8Array(r)}for(let e=0;e<r;e++)a[e]=t();return Z.a.makeTensor(a,e,n)}});var _t=n(67);const Ft=Object(I.b)({randomGamma_:function(e,t,n=1,r="float32",a){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const s=new _t.b(t,n,r,a),o=Object(P.a)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});const Dt=Object(I.b)({randomNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const s=new _t.a(t,n,r,!1,a),o=Object(P.a)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});var Mt=n(121),Pt=n(68),Lt=n(73),Bt=n(174),zt=n(64),Vt=n(122),Wt=n(40);const Ut=Object(I.b)({reverse1d_:function(e){const t=Object(v.a)(e,"x","reverse");return E.b(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),Object(Wt.a)(t,0)}});const Gt=Object(I.b)({reverse2d_:function(e,t){const n=Object(v.a)(e,"x","reverse");return E.b(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),Object(Wt.a)(n,t)}});const Ht=Object(I.b)({reverse3d_:function(e,t){const n=Object(v.a)(e,"x","reverse");return E.b(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),Object(Wt.a)(n,t)}});const qt=Object(I.b)({reverse4d_:function(e,t){const n=Object(v.a)(e,"x","reverse");return E.b(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),Object(Wt.a)(n,t)}});var Kt=n(123),Xt=n(175),Yt=n(14),Qt=n(176);const Zt=Object(I.b)({separableConv2d_:function(e,t,n,r,a,s=[1,1],o="NHWC"){const i=Object(v.a)(e,"x","separableConv2d"),u=Object(v.a)(t,"depthwiseFilter","separableConv2d"),c=Object(v.a)(n,"pointwiseFilter","separableConv2d");let l=i,d=!1;if(3===i.rank&&(d=!0,l=Object(ee.a)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");E.b(4===l.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`)),E.b(4===u.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`)),E.b(4===c.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`)),E.b(1===c.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`)),E.b(1===c.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`));const p=u.shape[2],h=u.shape[3];E.b(c.shape[2]===p*h,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`));const f=Object(ue.a)(l,u,r,a,o,s),m=Object(X.a)(f,c,1,"valid",o);return d?Object(ee.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});var Jt=n(177),en=n(178),tn=n(179),nn=n(180);const rn=Object(I.b)({slice1d_:function(e,t,n){const r=Object(v.a)(e,"x","slice1d");return E.b(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),Object(N.a)(r,[t],[n])}});const an=Object(I.b)({slice2d_:function(e,t,n){const r=Object(v.a)(e,"x","slice2d");return E.b(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),Object(N.a)(r,t,n)}});const sn=Object(I.b)({slice3d_:function(e,t,n){const r=Object(v.a)(e,"x","slice3d");return E.b(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),Object(N.a)(r,t,n)}});const on=Object(I.b)({slice4d_:function(e,t,n){const r=Object(v.a)(e,"x","slice4d");return E.b(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),Object(N.a)(r,t,n)}});var un=n(181),cn=n(83),ln=n(74),dn=n(124),pn=n(84),hn=n(56),fn=n(43),mn=n(125),bn=n(85),gn=n(57),yn=n(126),xn=n(182),vn=n(183),On=n(50),kn=n(34),wn=n(35);function In(e,t,n){if(Object(E.d)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Object(v.c)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(wn.a)(e,t,r,n)}var Sn=n(127);function Nn(e,t,n){if(Object(E.d)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Object(v.c)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(wn.a)(e,t,r,n)}function Tn(e,t,n){if(Object(E.d)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Object(v.c)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(wn.a)(e,t,r,n)}function jn(e,t,n){if(Object(E.d)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Object(v.c)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Object(wn.a)(e,t,r,n)}var $n=n(184),Cn=n(185),En=n(186);const An=Object(I.b)({unsortedSegmentSum_:function(e,t,n){const r=Object(v.a)(e,"x","unsortedSegmentSum"),a=Object(v.a)(t,"segmentIds","unsortedSegmentSum","int32");Object(E.b)(Object(E.v)(n),(()=>"numSegments must be of dtype int"));const s={x:r,segmentIds:a},o={numSegments:n};return Z.a.runKernel(J.id,s,o)}});var Rn=n(86);function _n(e,t=!0,n,r){return Z.a.makeVariable(e,t,n,r)}var Fn=n(45),Dn=n(128),Mn=n(63),Pn=n(28);const Ln=async function(e,t,n){const r=Object(v.a)(e,"tensor","boolMask"),a=Object(v.a)(t,"mask","boolMask","bool"),s=null==n?0:n,o=a.rank,i=r.shape;E.b(o>0,(()=>"mask cannot be scalar")),E.e(i.slice(s,s+o),a.shape,"mask\'s shape must match the first K dimensions of tensor\'s shape,");let u=1;for(let e=s;e<s+o;e++)u*=i[e];const c=i.slice(0,s).concat([u],i.slice(s+o)),l=Object(ee.a)(r,c),d=Object(ee.a)(a,[-1]),p=await Object(Dn.a)(d),h=Object(bn.a)(p,[1]),f=Object(Ne.a)(l,h,s);return e!==r&&r.dispose(),t!==a&&a.dispose(),h.dispose(),l.dispose(),d.dispose(),p.dispose(),f};var Bn=n(75);function zn(e,t,n=null){if(0===e.rank)return Object(a.a)(e);if(1!==e.rank&&null===n)return zn(Object(ee.a)(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Object(Ke.a)(Object(a.a)(e),n);if(t===1/0)return Object(He.a)(Object(a.a)(e),n);if(t===-1/0)return Object(ct.a)(Object(a.a)(e),n);if("euclidean"===t||2===t)return Object(fn.a)(Object(Ke.a)(Object($t.a)(Object(a.a)(e),Object(Yt.a)(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return Object(He.a)(Object(Ke.a)(Object(a.a)(e),n[0]),n[1]-1);if(t===1/0)return Object(He.a)(Object(Ke.a)(Object(a.a)(e),n[1]),n[0]);if(t===-1/0)return Object(ct.a)(Object(Ke.a)(Object(a.a)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Object(fn.a)(Object(Ke.a)(Object(ht.a)(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Vn=Object(I.b)({norm_:function(e,t="euclidean",n=null,r=!1){const a=zn(e=Object(v.a)(e,"x","norm"),t,n);let s=a.shape;if(r){const t=Object(E.I)(n,e.shape);s=Ge.e(a.shape,t)}return Object(ee.a)(a,s)}});var Wn=n(13);const Un=Object(I.b)({movingAverage_:function(e,t,n,r,a=!0){const s=Object(v.a)(e,"v","movingAverage"),o=Object(v.a)(t,"x","movingAverage"),u=Object(v.a)(n,"decay","movingAverage");Object(Wn.assertTypesMatch)(s,o),E.b(E.a(s.shape,o.shape),(()=>"Shape mismatch in v and x"));const c=Object(Yt.a)(1),l=Object(qe.a)(c,u);let d=Object(w.a)(Object(qe.a)(o,s),l);if(a){E.b(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=Object(v.a)(r,"step","movingAverage");d=Object(de.a)(d,Object(qe.a)(c,Object($t.a)(u,e)))}return Object(i.a)(s,d)}});var Gn=n(187),Hn=n(190),qn=n(188);const Kn=Object(I.b)({dropout_:function(e,t,n,r){const a=Object(v.a)(e,"x","dropout");if(E.b("float32"===a.dtype,(()=>`x has to be a floating point tensor since it\'s going to be scaled, but got a ${a.dtype} tensor instead.`)),E.b(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof it.a?a.clone():a;const s=function(e,t){if(null==t)return e.shape.slice();if(E.a(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,u=Object(de.a)(Object(Ie.a)(Object(i.a)(Object(Mt.a)(s,0,1,"float32",r),o)),o);return Object(w.a)(a,u)}});function Xn(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Yn(e,t,n){const r=1-e%2,a=new Float32Array(e);for(let s=0;s<e;++s){const o=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(o)}return Object(kn.a)(a,"float32")}const Qn=async function(e,t,n=1){const r=Object(v.a)(e,"predictions","inTopK"),a=Object(v.a)(t,"targets","inTopK");Object(E.b)(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),Object(E.b)(r.rank-1===a.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`)),Object(E.e)(r.shape.slice(0,r.shape.length-1),a.shape,"predictions\'s shape should be align with the targets\' shape, except the last dimension.");const s=r.shape[r.shape.length-1];Object(E.b)(n>0&&n<=s,(()=>`\'k\' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`));const o=await r.data(),i=await a.data(),[u,c]=[o.length/s,s],l=Object(E.o)("bool",u);for(let e=0;e<u;e++){const t=e*c,r=o.subarray(t,t+c),a=[];for(let e=0;e<r.length;e++)a.push({value:r[e],index:e});a.sort(((e,t)=>t.value-e.value)),l[e]=0;for(let t=0;t<n;t++)if(a[t].index===i[e]){l[e]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),Object(On.a)(l,a.shape,"bool")};const Zn=Object(I.b)({conv2DBackpropFilter_:function(e,t,n,r,a,s="NHWC",o){let i=e;3===e.rank&&(i=Object(ee.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),E.b(4===i.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`)),E.b(4===u.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`)),E.b(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const c="NHWC"===s?i.shape[3]:i.shape[1],l="NHWC"===s?u.shape[3]:u.shape[1];E.b(c===n[2],(()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`)),E.b(l===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`)),null!=o&&E.b(E.v(a),(()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${o} but got pad ${a}.`));const d={x:i,dy:u},p={strides:r,pad:a,dataFormat:s,dimRoundingMode:o,filterShape:n};return Z.a.runKernel(J.E,d,p)}});var Jn=n(130),er=n(31);const tr=Object(I.b)({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:u,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(c=c||"linear",!1===Object(er.d)(Z.a.state.gradientDepth,c)){let p=Object(X.a)(e,t,n,r,a,s,o);return null!=u&&(p=Object(i.a)(p,u)),Object(er.a)(p,c,l,d)}const p=Object(v.a)(e,"x","conv2d","float32"),h=Object(v.a)(t,"filter","conv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=Object(ee.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),E.b(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),E.b(4===h.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`)),null!=o&&E.b(E.v(r),(()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`)),E.b(f.shape[3]===h.shape[2],(()=>`Error in conv2d: depth of input (${f.shape[3]}) must match input depth for filter ${h.shape[2]}.`)),E.b(Nt.h(n,s),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations \'${s}\'`)),E.b("NHWC"===a,(()=>`Error in conv2d: got dataFormat of ${a} but only NHWC is currently supported.`));const b=Nt.a(f.shape,h.shape,n,s,r,o);let g,y;null!=u&&(g=Object(v.a)(u,"bias","fused conv2d"),[g]=Object(Wn.makeTypesMatch)(g,p),Je.a(b.outShape,g.shape)),null!=l&&(y=Object(v.a)(l,"prelu weights","fused conv2d"));const x=(e,t)=>{const[a,o,i,u]=t,l=Object(er.c)(e,i,c);E.b(Nt.i(s),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations \'${s}\'`));const d=[Object(Jn.a)(o.shape,l,a,n,r),Zn(o,l,a.shape,n,r)];if(null!=u){const e=Object(er.b)(u,l);d.push(e)}return d},O={x:f,filter:h,bias:g,preluActivationWeights:y},k={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:d};if(null==u){return Object(Be.a)(((e,t,n)=>{let r=Z.a.runKernel(J.lb,O,k);return n([t,e,r]),m&&(r=Object(ee.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}))(f,h)}return Object(Be.a)(((e,t,n,r)=>{let a=Z.a.runKernel(J.lb,O,k);return r([t,e,a,n]),m&&(a=Object(ee.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:x}}))(f,h,g)}});const nr=Object(I.b)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,s=[1,1],o){let i=e;3===e.rank&&(i=Object(ee.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:i,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:s,filterShape:n};return Z.a.runKernel(J.Q,c,l)}});const rr=Object(I.b)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,s=[1,1],o){let i=t,u=!1;3===t.rank&&(u=!0,i=Object(ee.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:i,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:s,inputShape:e},d=Z.a.runKernel(J.R,c,l);return u?Object(ee.a)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const ar=Object(I.b)({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:u,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(!1===Object(er.d)(Z.a.state.gradientDepth,c)){let p=Object(ue.a)(e,t,n,r,a,s,o);return null!=u&&(p=Object(i.a)(p,u)),Object(er.a)(p,c,l,d)}const p=Object(v.a)(e,"x","depthwiseConv2d","float32"),h=Object(v.a)(t,"filter","depthwiseConv2d","float32");let f=p,m=!1;3===p.rank&&(m=!0,f=Object(ee.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),E.b(4===f.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`)),E.b(4===h.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`)),E.b(f.shape[3]===h.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`)),null==s&&(s=[1,1]),E.b(Nt.h(n,s),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations \'${s}\'`)),null!=o&&E.b(E.v(r),(()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${o} but got pad ${r}.`));const b=Nt.a(f.shape,h.shape,n,s,r,o,!0);let g,y;null!=u&&(g=Object(v.a)(u,"bias","fused conv2d"),[g]=Object(Wn.makeTypesMatch)(g,p),Je.a(b.outShape,g.shape)),null!=l&&(y=Object(v.a)(l,"prelu weights","fused depthwiseConv2d"));const x=(e,t)=>{E.b(Nt.i(s),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations \'${s}\'`));const[a,i,u,l]=t,d=Object(er.c)(e,u,c),p=rr(i.shape,d,a,n,r,s,o),h=nr(i,d,a.shape,n,r,s,o);if(null!=l){return[p,h,Object(er.b)(g,d)]}return[p,h]},O={x:f,filter:h,bias:g,preluActivationWeights:y},k={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:d};if(null==u){return Object(Be.a)(((e,t,n)=>{let r=Z.a.runKernel(J.mb,O,k);return n([t,e,r]),m&&(r=Object(ee.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}))(f,h)}return Object(Be.a)(((e,t,n,r)=>{let a=Z.a.runKernel(J.mb,O,k);return r([t,e,a,n]),m&&(a=Object(ee.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:x}}))(f,h,g)}});const sr=Object(I.b)({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:u}){if(!1===Object(er.d)(Z.a.state.gradientDepth,s)){let c=Object(k.a)(e,t,n,r);return null!=a&&(c=Object(i.a)(c,a)),Object(er.a)(c,s,o,u)}let c=Object(v.a)(e,"a","fused matMul"),l=Object(v.a)(t,"b","fused matMul");[c,l]=Object(Wn.makeTypesMatch)(c,l);const d=n?c.shape[c.rank-2]:c.shape[c.rank-1],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?c.shape[c.rank-1]:c.shape[c.rank-2],f=r?l.shape[l.rank-2]:l.shape[l.rank-1],m=c.shape.slice(0,-2),b=l.shape.slice(0,-2),g=E.O(m),y=E.O(b);E.b(c.rank>=2&&l.rank>=2&&c.rank===l.rank,(()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${c.rank} and ${l.rank}.`)),E.b(E.a(m,b),(()=>`Error in fused matMul: outer dimensions (${m}) and (${b}) of Tensors with shapes ${c.shape} and ${l.shape} must match.`)),E.b(d===p,(()=>`Error in fused matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${c.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`));const x=c.shape.slice(0,-2).concat([h,f]),O=n?Object(ee.a)(c,[g,d,h]):Object(ee.a)(c,[g,h,d]),w=r?Object(ee.a)(l,[y,f,p]):Object(ee.a)(l,[y,p,f]);let I,S;null!=a&&(I=Object(v.a)(a,"bias","fused matMul"),[I]=Object(Wn.makeTypesMatch)(I,c),Je.a(x,I.shape)),null!=o&&(S=Object(v.a)(o,"prelu weights","fused matMul"));const N=(e,t)=>{const[o,i,u,c]=t,l=Object(er.c)(Object(ee.a)(e,u.shape),u,s);let d,p;if(n||r?!n&&r?(d=Object(k.a)(l,i,!1,!1),p=Object(k.a)(l,o,!0,!1)):n&&!r?(d=Object(k.a)(i,l,!1,!0),p=Object(k.a)(o,l,!1,!1)):(d=Object(k.a)(i,l,!0,!0),p=Object(k.a)(l,o,!0,!0)):(d=Object(k.a)(l,i,!1,!0),p=Object(k.a)(o,l,!0,!1)),null!=a){return[d,p,Object(er.b)(c,l)]}return[d,p]},T={a:O,b:w,bias:I,preluActivationWeights:S},j={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:u};if(null==a){return Object(Be.a)(((e,t,n)=>{const r=Z.a.runKernel(J.kd,T,j);return n([e,t,r]),{value:Object(ee.a)(r,x),gradFunc:N}}))(O,w)}return Object(Be.a)(((e,t,n,r)=>{const a=Z.a.runKernel(J.kd,T,j);return r([e,t,a,n]),{value:Object(ee.a)(a,x),gradFunc:N}}))(O,w,I)}});const or=Object(I.b)({hammingWindow_:function(e){return Yn(e,.54,.46)}});const ir=Object(I.b)({hannWindow_:function(e){return Yn(e,.5,.5)}});const ur=Object(I.b)({frame_:function(e,t,n,r=!1,a=0){let s=0;const o=[];for(;s+t<=e.size;)o.push(Object(N.a)(e,s,t)),s+=n;if(r)for(;s<e.size;){const r=s+t-e.size,i=Object(O.a)([Object(N.a)(e,s,t-r),Object(we.a)([r],a)]);o.push(i),s+=n}return 0===o.length?In([],[0,t]):Object(ee.a)(Object(O.a)(o),[o.length,t])}});const cr=Object(I.b)({stft_:function(e,t,n,r,a=ir){null==r&&(r=Xn(t));const s=ur(e,t,n),o=Object(w.a)(s,a(t));return Object(pn.a)(o,r)}});const lr=Object(I.b)({cropAndResize_:function(e,t,n,r,a="bilinear",s=0){const o=Object(v.a)(e,"image","cropAndResize"),i=Object(v.a)(t,"boxes","cropAndResize","float32"),u=Object(v.a)(n,"boxInd","cropAndResize","int32"),c=i.shape[0];E.b(4===o.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`)),E.b(2===i.rank&&4===i.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${i.shape}.`)),E.b(1===u.rank&&u.shape[0]===c,(()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${i.shape}.`)),E.b(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),E.b(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),E.b("bilinear"===a||"nearest"===a,(()=>`method must be bilinear or nearest, but was ${a}`));const l={image:o,boxes:i,boxInd:u},d={method:a,extrapolationValue:s,cropSize:r};return Z.a.runKernel(J.L,l,d)}});const dr=Object(I.b)({flipLeftRight_:function(e){const t=Object(v.a)(e,"image","flipLeftRight","float32");E.b(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return Z.a.runKernel(J.gb,n,{})}});const pr=Object(I.b)({grayscaleToRGB_:function(e){const t=Object(v.a)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];E.b(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),E.b(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Object(Oe.a)(t,a)}});const hr=Object(I.b)({rotateWithOffset_:function(e,t,n=0,r=.5){const a=Object(v.a)(e,"image","rotateWithOffset","float32");E.b(4===a.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`));const s={image:a},o={radians:t,fillValue:n,center:r};return Z.a.runKernel(J.wc,s,o)}});function fr(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);const o=e.shape[0];return n=Math.min(n,o),E.b(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was \'${r}\'`)),E.b(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank \'${e.rank}\'`)),E.b(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),E.b(1===t.rank,(()=>"scores must be a 1D tensor")),E.b(t.shape[0]===o,(()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`)),E.b(0<=s&&s<=1,(()=>`softNmsSigma must be in [0, 1], but was \'${s}\'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}const mr=Object(I.b)({nonMaxSuppression_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=Object(v.a)(e,"boxes","nonMaxSuppression","float32"),o=Object(v.a)(t,"scores","nonMaxSuppression","float32"),i=fr(s,o,n,r,a),u={maxOutputSize:n=i.maxOutputSize,iouThreshold:r=i.iouThreshold,scoreThreshold:a=i.scoreThreshold};return Z.a.runKernel(J.Yb,{boxes:s,scores:o},u)}});var br=n(47);const gr=async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=Object(v.a)(e,"boxes","nonMaxSuppressionAsync"),o=Object(v.a)(t,"scores","nonMaxSuppressionAsync"),i=fr(s,o,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;const u=await Promise.all([s.data(),o.data()]),c=u[0],l=u[1],{selectedIndices:d}=Object(br.a)(c,l,n,r,a);return s!==e&&s.dispose(),o!==t&&o.dispose(),Object(kn.a)(d,"int32")};const yr=Object(I.b)({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const o=Object(v.a)(e,"boxes","nonMaxSuppression"),i=Object(v.a)(t,"scores","nonMaxSuppression"),u=fr(o,i,n,r,a,s),c={boxes:o,scores:i},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:s=u.softNmsSigma},d=Z.a.runKernel(J.ac,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});const xr=async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const o=Object(v.a)(e,"boxes","nonMaxSuppressionAsync"),i=Object(v.a)(t,"scores","nonMaxSuppressionAsync"),u=fr(o,i,n,r,a,s);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,s=u.softNmsSigma;const c=await Promise.all([o.data(),i.data()]),l=c[0],d=c[1],{selectedIndices:p,selectedScores:h}=Object(br.c)(l,d,n,r,a,s);return o!==e&&o.dispose(),i!==t&&i.dispose(),{selectedIndices:Object(kn.a)(p,"int32"),selectedScores:Object(kn.a)(h)}};const vr=Object(I.b)({nonMaxSuppressionPadded_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const o=Object(v.a)(e,"boxes","nonMaxSuppression"),i=Object(v.a)(t,"scores","nonMaxSuppression"),u=fr(o,i,n,r,a,null),c={boxes:o,scores:i},l={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:s},d=Z.a.runKernel(J.Zb,c,l);return{selectedIndices:d[0],validOutputs:d[1]}}});const Or=async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const o=Object(v.a)(e,"boxes","nonMaxSuppressionAsync"),i=Object(v.a)(t,"scores","nonMaxSuppressionAsync"),u=fr(o,i,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,[p,h]=await Promise.all([o.data(),i.data()]),{selectedIndices:f,validOutputs:m}=Object(br.b)(p,h,c,l,d,s);return o!==e&&o.dispose(),i!==t&&i.dispose(),{selectedIndices:Object(kn.a)(f,"int32"),validOutputs:Object(Yt.a)(m,"int32")}};const kr=Object(I.b)({resizeBilinear_:function(e,t,n=!1,r=!1){const a=Object(v.a)(e,"images","resizeBilinear");E.b(3===a.rank||4===a.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`)),E.b(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),E.b(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let s=a,o=!1;3===a.rank&&(o=!0,s=Object(ee.a)(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,i={images:s},u={alignCorners:n,halfPixelCenters:r,size:t},c=Z.a.runKernel(J.rc,i,u);return o?Object(ee.a)(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const wr=Object(I.b)({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const a=Object(v.a)(e,"images","resizeNearestNeighbor");E.b(3===a.rank||4===a.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`)),E.b(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),E.b("float32"===a.dtype||"int32"===a.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),E.b(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let s=a,o=!1;3===a.rank&&(o=!0,s=Object(ee.a)(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,i={images:s},u={alignCorners:n,halfPixelCenters:r,size:t},c=Z.a.runKernel(J.tc,i,u);return o?Object(ee.a)(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const Ir=Object(I.b)({threshold_:function(e,t="binary",n=!1,r=.5){const a=Object(v.a)(e,"image","threshold"),s=a.shape[0]*a.shape[1];let o,u,c,l,d=Object(w.a)(Object(kn.a)([r]),255);if(E.b(3===a.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`)),E.b(3===a.shape[2]||1===a.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`)),E.b("int32"===a.dtype||"float32"===a.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`)),E.b("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===a.shape[2]){[o,u,c]=Object(hn.a)(a,[1,1,1],-1);const e=Object(w.a)(o,.2989),t=Object(w.a)(u,.587),n=Object(w.a)(c,.114);l=Object(i.a)(Object(i.a)(e,t),n)}else l=e;if("otsu"===t){d=function(e,t){let n,r,a,s,o,u,c=Object(kn.a)([-1]),l=Object(kn.a)([0]),d=Object(kn.a)([0]);for(let p=0;p<e.size-1;p++){n=Object(N.a)(e,0,p+1),r=Object(N.a)(e,p+1),o=Object(de.a)(Object(Ke.a)(n),t),u=Object(de.a)(Object(Ke.a)(r),t);const h=Object(Ke.a)(Object(w.a)(n,Object(Pt.a)(0,n.size)));a=Object(de.a)(h,Object(Ke.a)(n));const f=Object(we.a)(r.shape,n.size),m=Object(i.a)(Object(Pt.a)(0,r.size),f),b=Object(w.a)(r,m);s=Object(de.a)(Object(Ke.a)(b),Object(Ke.a)(r));const g=Object(qe.a)(a,s),y=Object(qe.a)(a,s),x=Object(w.a)(o,u);d=Object(w.a)(Object(w.a)(x,g),y);const v=Object(Te.a)(d,l);l=Object(Fn.a)(v,d,l),c=Object(Fn.a)(v,Object(kn.a)([p]),c)}return c}(Object(F.a)(Object(L.a)(Object(Kt.a)(l),"int32"),Object(On.a)([]),256),s)}const p=n?Object(Fe.a)(l,d):Object(Te.a)(l,d);return Object(L.a)(Object(w.a)(p,255),"int32")}});const Sr=Object(I.b)({transform_:function(e,t,n="nearest",r="constant",a=0,s){const o=Object(v.a)(e,"image","transform","float32"),i=Object(v.a)(t,"transforms","transform","float32");E.b(4===o.rank,(()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`)),E.b(2===i.rank&&(i.shape[0]===o.shape[0]||1===i.shape[0])&&8===i.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),E.b(null==s||2===s.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`));const u={image:o,transforms:i},c={interpolation:n,fillMode:r,fillValue:a,outputShape:s};return Z.a.runKernel(J.ed,u,c)}});const Nr=Object(I.b)({bandPart_:function(e,t,n){Object(E.b)(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),Object(E.b)(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const r=Object(v.a)(e,"a","bandPart");Object(E.b)(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const a=r.shape,[s,o]=r.shape.slice(-2);if(!(t<=s))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);t<0&&(t=s),n<0&&(n=o);const i=Object(ee.a)(Object(Pt.a)(0,s,1,"int32"),[-1,1]),u=Object(Pt.a)(0,o,1,"int32"),c=Object(qe.a)(i,u),l=Object(Ye.a)(Object(Fe.a)(c,Object(Yt.a)(+t,"int32")),Object(je.a)(c,Object(Yt.a)(-n,"int32"))),d=Object(Mn.a)([s,o],r.dtype);return Object(ee.a)(Object(gn.a)(Object(Rn.a)(Object(ee.a)(r,[-1,s,o])).map((e=>Object(Fn.a)(l,e,d)))),a)}});const Tr=Object(I.b)({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Object(E.b)(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)Object(E.b)(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=Object(hn.a)(e,e.shape[0],0).map((e=>Object(bn.a)(e,[0])));Object(E.b)(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let t=0;t<e.length;++t)n.push(Z.a.tidy((()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){const t=Object(w.a)(Object(Ke.a)(Object(w.a)(n[r],e)),n[r]);e=Object(qe.a)(e,t)}return Object(de.a)(e,Vn(e,"euclidean"))})));return t?Object(gn.a)(n,0):n}});var jr=n(15);function $r(e,t=!1){return Z.a.tidy((()=>{Object(E.b)(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let a=ke(n),s=Object(V.a)(e);const o=In([[1]],[1,1]);let i=Object(V.a)(o);const u=n>=r?r:n;for(let e=0;e<u;++e){const t=s,u=i,c=a;[i,s,a]=Z.a.tidy((()=>{const t=Object(N.a)(s,[e,e],[n-e,1]),u=Vn(t),c=Object(N.a)(s,[e,e],[1,1]),l=Object(Fn.a)(Object(Te.a)(c,0),In([[-1]]),In([[1]])),d=Object(qe.a)(c,Object(w.a)(l,u)),p=Object(de.a)(t,d);i=1===p.shape[0]?Object(V.a)(o):Object(O.a)([o,Object(N.a)(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const h=Object(ze.a)(Object(de.a)(Object(k.a)(l,d),u)),f=Object(N.a)(s,[e,0],[n-e,r]),m=Object(w.a)(h,i),b=Object(Bn.a)(i);if(0===e)s=Object(qe.a)(f,Object(k.a)(m,Object(k.a)(b,f)));else{const t=Object(qe.a)(f,Object(k.a)(m,Object(k.a)(b,f)));s=Object(O.a)([Object(N.a)(s,[0,0],[e,r]),t],0)}const g=Object(Bn.a)(m),y=Object(N.a)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Object(qe.a)(y,Object(k.a)(Object(k.a)(y,i),g));else{const t=Object(qe.a)(y,Object(k.a)(Object(k.a)(y,i),g));a=Object(O.a)([Object(N.a)(a,[0,0],[n,e]),t],1)}return[i,s,a]})),Object(jr.d)([t,u,c])}return!t&&n>r&&(a=Object(N.a)(a,[0,0],[n,r]),s=Object(N.a)(s,[0,0],[r,r])),[a,s]}))}const Cr=Object(I.b)({qr_:function(e,t=!1){if(Object(E.b)(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return $r(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=Object(Rn.a)(Object(ee.a)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];r.forEach((e=>{const[n,r]=$r(e,t);a.push(n),s.push(r)}));return[Object(ee.a)(Object(gn.a)(a,0),e.shape),Object(ee.a)(Object(gn.a)(s,0),e.shape)]}}});var Er=n(26);const Ar=Object(I.b)({computeWeightedLoss_:function(e,t,n=Er.a.SUM_BY_NONZERO_WEIGHTS){const r=Object(v.a)(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=Object(v.a)(t,"weights","computeWeightedLoss"));const s=null==a?r:Object(w.a)(r,a);if(n===Er.a.NONE)return s;if(n===Er.a.SUM)return Object(Ke.a)(s);if(n===Er.a.MEAN){if(null==a)return Object(st.a)(s);{const e=r.size/a.size,t=Object(de.a)(Object(Ke.a)(s),Object(Ke.a)(a));return e>1?Object(de.a)(t,Object(Yt.a)(e)):t}}if(n===Er.a.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Object(de.a)(Object(Ke.a)(s),Object(Yt.a)(r.size));{const e=Object(w.a)(a,Object(ot.a)(r.shape)),t=Object(L.a)(Object(Ke.a)(Object(gt.a)(e,Object(Yt.a)(0))),"float32");return Object(de.a)(Object(Ke.a)(s),t)}}throw Error(`Unknown reduction: ${n}`)}});const Rr=Object(I.b)({absoluteDifference_:function(e,t,n,r=Er.a.SUM_BY_NONZERO_WEIGHTS){const s=Object(v.a)(e,"labels","absoluteDifference"),o=Object(v.a)(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=Object(v.a)(n,"weights","absoluteDifference")),Object(E.e)(s.shape,o.shape,"Error in absoluteDifference: ");const u=Object(a.a)(Object(qe.a)(s,o));return Ar(u,i,r)}});const _r=Object(I.b)({cosineDistance_:function(e,t,n,r,a=Er.a.SUM_BY_NONZERO_WEIGHTS){const s=Object(v.a)(e,"labels","cosineDistance"),o=Object(v.a)(t,"predictions","cosineDistance");let i=null;null!=r&&(i=Object(v.a)(r,"weights","cosineDistance")),Object(E.e)(s.shape,o.shape,"Error in cosineDistance: ");const u=Object(Yt.a)(1),c=Object(qe.a)(u,Object(Ke.a)(Object(w.a)(s,o),n,!0));return Ar(c,i,a)}});const Fr=Object(I.b)({hingeLoss_:function(e,t,n,r=Er.a.SUM_BY_NONZERO_WEIGHTS){let a=Object(v.a)(e,"labels","hingeLoss");const s=Object(v.a)(t,"predictions","hingeLoss");let o=null;null!=n&&(o=Object(v.a)(n,"weights","hingeLoss")),Object(E.e)(a.shape,s.shape,"Error in hingeLoss: ");const i=Object(Yt.a)(1);a=Object(qe.a)(Object(w.a)(Object(Yt.a)(2),a),i);const u=Object(zt.a)(Object(qe.a)(i,Object(w.a)(a,s)));return Ar(u,o,r)}});const Dr=Object(I.b)({huberLoss_:function(e,t,n,r=1,s=Er.a.SUM_BY_NONZERO_WEIGHTS){const o=Object(v.a)(e,"labels","huberLoss"),u=Object(v.a)(t,"predictions","huberLoss");let c=null;null!=n&&(c=Object(v.a)(n,"weights","huberLoss")),Object(E.e)(o.shape,u.shape,"Error in huberLoss: ");const l=Object(Yt.a)(r),d=Object(a.a)(Object(qe.a)(u,o)),p=Object(lt.a)(d,l),h=Object(qe.a)(d,p),f=Object(i.a)(Object(w.a)(Object(Yt.a)(.5),Object(ht.a)(p)),Object(w.a)(l,h));return Ar(f,c,s)}});const Mr=Object(I.b)({logLoss_:function(e,t,n,r=1e-7,a=Er.a.SUM_BY_NONZERO_WEIGHTS){const s=Object(v.a)(e,"labels","logLoss"),o=Object(v.a)(t,"predictions","logLoss");let u=null;null!=n&&(u=Object(v.a)(n,"weights","logLoss")),Object(E.e)(s.shape,o.shape,"Error in logLoss: ");const c=Object(Yt.a)(1),l=Object(Yt.a)(r),d=Object(ze.a)(Object(w.a)(s,Object(Pe.a)(Object(i.a)(o,l)))),p=Object(w.a)(Object(qe.a)(c,s),Object(Pe.a)(Object(i.a)(Object(qe.a)(c,o),l))),h=Object(qe.a)(d,p);return Ar(h,u,a)}});const Pr=Object(I.b)({meanSquaredError_:function(e,t,n,r=Er.a.SUM_BY_NONZERO_WEIGHTS){const a=Object(v.a)(e,"labels","meanSquaredError"),s=Object(v.a)(t,"predictions","meanSquaredError");let o=null;null!=n&&(o=Object(v.a)(n,"weights","meanSquaredError")),Object(E.e)(a.shape,s.shape,"Error in meanSquaredError: ");const i=Object(mn.a)(a,s);return Ar(i,o,r)}});const Lr=Object(I.b)({sigmoidCrossEntropy_:function(e,t,n,r=0,s=Er.a.SUM_BY_NONZERO_WEIGHTS){let o=Object(v.a)(e,"multiClassLabels","sigmoidCrossEntropy");const u=Object(v.a)(t,"logits","sigmoidCrossEntropy");let c=null;if(null!=n&&(c=Object(v.a)(n,"weights","sigmoidCrossEntropy")),Object(E.e)(o.shape,u.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Object(Yt.a)(r),t=Object(Yt.a)(1),n=Object(Yt.a)(.5);o=Object(i.a)(Object(w.a)(o,Object(qe.a)(t,e)),Object(w.a)(n,e))}const l=function(e,t){const n=Object(v.a)(e,"labels","sigmoidCrossEntropyWithLogits"),r=Object(v.a)(t,"logits","sigmoidCrossEntropyWithLogits");Object(E.e)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Object(zt.a)(r),o=Object(w.a)(r,n),u=Object(Le.a)(Object(ye.a)(Object(ze.a)(Object(a.a)(r))));return Object(i.a)(Object(qe.a)(s,o),u)}(o,u);return Ar(l,c,s)}});const Br=Object(I.b)({softmaxCrossEntropy_:function(e,t,n,r=0,a=Er.a.SUM_BY_NONZERO_WEIGHTS){let s=Object(v.a)(e,"onehotLabels","softmaxCrossEntropy");const o=Object(v.a)(t,"logits","softmaxCrossEntropy");let u=null;if(null!=n&&(u=Object(v.a)(n,"weights","softmaxCrossEntropy")),Object(E.e)(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Object(Yt.a)(r),t=Object(Yt.a)(1),n=Object(Yt.a)(s.shape[1]);s=Object(i.a)(Object(w.a)(s,Object(qe.a)(t,e)),Object(de.a)(e,n))}const c=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Object(Be.a)(((e,t,r)=>{const a=Xe(t,[n],!0),s=Object(qe.a)(Object(L.a)(t,"float32"),a);r([e,s]);const o=Object(ze.a)(Object(w.a)(s,e));return{value:Object(Ke.a)(o,[n]),gradFunc:(e,t)=>{const[r,a]=t,s=Object(Ge.e)(e.shape,[n]);return[Object(w.a)(Object(ee.a)(e,s),Object(qe.a)(Object(L.a)(r,"float32"),Object(ye.a)(a))),Object(w.a)(Object(ee.a)(e,s),Object(qe.a)(Object(ye.a)(a),Object(L.a)(r,"float32")))]}}}))(e,t)}(s,o);return Ar(c,u,a)}});const zr=Object(I.b)({sparseFillEmptyRows_:function(e,t,n,r){const a=Object(v.a)(e,"indices","sparseFillEmptyRows"),s=Object(v.a)(t,"values","sparseFillEmptyRows"),o=Object(v.a)(n,"denseShape","sparseFillEmptyRows"),i=Object(v.a)(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==a.rank)throw new Error(`Indices should be Tensor2D but received shape\\n        ${a.shape}`);if(1!==s.rank)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==i.rank)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const u={indices:a,values:s,denseShape:o,defaultValue:i},c=Z.a.runKernel(J.Kc,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});const Vr=Object(I.b)({sparseReshape_:function(e,t,n){const r=Object(v.a)(e,"inputIndices","sparseReshape"),a=Object(v.a)(t,"inputShape","sparseReshape"),s=Object(v.a)(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\\n        ${r.shape}`);if(1!==a.rank)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(1!==s.rank)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const o={inputIndices:r,inputShape:a,newShape:s},i=Z.a.runKernel(J.Lc,o);return{outputIndices:i[0],outputShape:i[1]}}});const Wr=Object(I.b)({sparseSegmentMean_:function(e,t,n){const r=Object(v.a)(e,"data","sparseSegmentMean"),a=Object(v.a)(t,"indices","sparseSegmentMean"),s=Object(v.a)(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error(`Indices should be Tensor1D but received shape\\n          ${a.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\\n          ${s.shape}`);const o={data:r,indices:a,segmentIds:s};return Z.a.runKernel(J.Mc,o)}});const Ur=Object(I.b)({sparseSegmentSum_:function(e,t,n){const r=Object(v.a)(e,"data","sparseSegmentSum"),a=Object(v.a)(t,"indices","sparseSegmentSum"),s=Object(v.a)(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error(`Indices should be Tensor1D but received shape\\n         ${a.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\\n         ${s.shape}`);const o={data:r,indices:a,segmentIds:s};return Z.a.runKernel(J.Nc,o)}});const Gr=Object(I.b)({stringNGrams_:function(e,t,n,r,a,s,o,i){const u=Object(v.a)(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error(`Data must be a vector, saw: ${u.shape}`);const c=Object(v.a)(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const l={separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:o,preserveShortSequences:i},d={data:u,dataSplits:c},p=Z.a.runKernel(J.Vc,d,l);return{nGrams:p[0],nGramsSplits:p[1]}}});const Hr=Object(I.b)({stringSplit_:function(e,t,n=!0){const r=Object(v.a)(e,"input","stringSplit","string"),a=Object(v.a)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==a.rank)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const s={skipEmpty:n},o={input:r,delimiter:a},i=Z.a.runKernel(J.Wc,o,s);return{indices:i[0],values:i[1],shape:i[2]}}});const qr=Object(I.b)({stringToHashBucketFast_:function(e,t){const n=Object(v.a)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return Z.a.runKernel(J.Xc,a,r)}}),Kr={fft:cn.a,ifft:ln.a,rfft:pn.a,irfft:dn.a},Xr={hammingWindow:or,hannWindow:ir,frame:ur,stft:cr},Yr={flipLeftRight:dr,grayscaleToRGB:pr,resizeNearestNeighbor:wr,resizeBilinear:kr,rotateWithOffset:hr,cropAndResize:lr,nonMaxSuppression:mr,nonMaxSuppressionAsync:gr,nonMaxSuppressionWithScore:yr,nonMaxSuppressionWithScoreAsync:xr,nonMaxSuppressionPadded:vr,nonMaxSuppressionPaddedAsync:Or,threshold:Ir,transform:Sr},Qr={bandPart:Nr,gramSchmidt:Tr,qr:Cr},Zr={absoluteDifference:Rr,computeWeightedLoss:Ar,cosineDistance:_r,hingeLoss:Fr,huberLoss:Dr,logLoss:Mr,meanSquaredError:Pr,sigmoidCrossEntropy:Lr,softmaxCrossEntropy:Br},Jr={sparseFillEmptyRows:zr,sparseReshape:Vr,sparseSegmentMean:Wr,sparseSegmentSum:Ur},ea={stringNGrams:Gr,stringSplit:Hr,stringToHashBucketFast:qr}},function(e,t,n){"use strict";let r;function a(e){r=e}function s(e){if(void 0!==r)return r;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(t.substr(0,4))}return!1}function o(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}n.r(t),n.d(t,"mockIsMobile",(function(){return a})),n.d(t,"isMobile",(function(){return s})),n.d(t,"isBrowser",(function(){return o}))},function(e,t,n){"use strict";function r(e,t=!1){console.log(e.toString(t))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({floorDiv_:function(e,t){let n=Object(o.a)(e,"a","floorDiv"),i=Object(o.a)(t,"b","floorDiv");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.ib,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(18),c=n(3);const l=Object(c.b)({maximum_:function(e,t){let n=Object(o.a)(e,"a","maximum"),c=Object(o.a)(t,"b","maximum");[n,c]=Object(s.makeTypesMatch)(n,c),"bool"===n.dtype&&(n=Object(u.a)(n,"int32"),c=Object(u.a)(c,"int32")),Object(i.a)(n.shape,c.shape);const l={a:n,b:c};return r.a.runKernel(a.Pb,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(18),u=n(27),c=n(3),l=n(7);const d=Object(c.b)({avgPool_:function(e,t,n,c,d){const p=Object(s.a)(e,"x","avgPool","float32");o.b(u.h(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations \'1\'`));let h=p,f=!1;3===p.rank&&(f=!0,h=Object(l.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.b(4===h.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${h.rank}.`)),null!=d&&o.b(o.v(c),(()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${d} but got pad ${c}.`));const m={x:h},b={filterSize:t,strides:n,pad:c,dimRoundingMode:d};let g=r.a.runKernel(a.o,m,b);return g=Object(i.a)(g,p.dtype),f?Object(l.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({batchToSpaceND_:function(e,t,n){const i=Object(s.a)(e,"x","batchToSpaceND"),u=t.reduce(((e,t)=>e*t));o.b(i.rank>=1+t.length,(()=>`input rank is ${i.rank} but should be > than blockShape.length ${t.length}`)),o.b(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),o.b(i.shape[0]%u==0,(()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${u}`));const c={x:i},l={blockShape:t,crops:n};return r.a.runKernel(a.t,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({bincount_:function(e,t,n){const i=Object(s.a)(e,"x","bincount"),u=Object(s.a)(t,"weights","bincount");o.b("int32"===i.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`)),o.b(n>=0,(()=>`size must be non-negative, but got ${n}.`)),o.b(u.size===i.size||0===u.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${u.shape}.`));const c={x:i,weights:u},l={size:n};return r.a.runKernel(a.u,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({equal_:function(e,t){let n=Object(o.a)(e,"a","equal","string_or_numeric"),u=Object(o.a)(t,"b","equal","string_or_numeric");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.Z,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({elu_:function(e){const t={x:Object(s.a)(e,"x","elu","float32")};return r.a.runKernel(a.X,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({floor_:function(e){const t={x:Object(s.a)(e,"x","floor","float32")};return r.a.runKernel(a.hb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({gather_:function(e,t,n=0,o=0){const i={x:Object(s.a)(e,"x","gather"),indices:Object(s.a)(t,"indices","gather","int32")},u={axis:n,batchDims:o};return r.a.runKernel(a.ob,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({greaterEqual_:function(e,t){let n=Object(o.a)(e,"a","greaterEqual","string_or_numeric"),u=Object(o.a)(t,"b","greaterEqual","string_or_numeric");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.qb,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({leakyRelu_:function(e,t=.2){const n={x:Object(s.a)(e,"x","leakyRelu")},o={alpha:t};return r.a.runKernel(a.zb,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({log1p_:function(e){const t={x:Object(s.a)(e,"x","log1p")};return r.a.runKernel(a.Eb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({softplus_:function(e){const t={x:Object(s.a)(e,"x","softplus")};return r.a.runKernel(a.Ic,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({logicalNot_:function(e){const t={x:Object(s.a)(e,"x","logicalNot","bool")};return r.a.runKernel(a.Hb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(20),i=n(3);const u=Object(i.b)({logicalOr_:function(e,t){const n=Object(s.a)(e,"a","logicalOr","bool"),i=Object(s.a)(t,"b","logicalOr","bool");Object(o.a)(n.shape,i.shape);const u={a:n,b:i};return r.a.runKernel(a.Ib,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(27),u=n(3),c=n(7);const l=Object(u.b)({maxPool_:function(e,t,n,u,l){const d=Object(s.a)(e,"x","maxPool");let p=d,h=!1;3===d.rank&&(h=!0,p=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===p.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${p.rank}.`)),o.b(i.h(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations \'1\'`)),null!=l&&o.b(o.v(u),(()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${l} but got pad ${u}.`));const f={x:p},m={filterSize:t,strides:n,pad:u,dimRoundingMode:l},b=r.a.runKernel(a.Kb,f,m);return h?Object(c.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(18),c=n(3);const l=Object(c.b)({minimum_:function(e,t){let n=Object(o.a)(e,"a","minimum"),c=Object(o.a)(t,"b","minimum");[n,c]=Object(s.makeTypesMatch)(n,c),"bool"===n.dtype&&(n=Object(u.a)(n,"int32"),c=Object(u.a)(c,"int32")),Object(i.a)(n.shape,c.shape);const l={a:n,b:c};return r.a.runKernel(a.Sb,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({notEqual_:function(e,t){let n=Object(o.a)(e,"a","notEqual","string_or_numeric"),u=Object(o.a)(t,"b","notEqual","string_or_numeric");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.bc,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({spaceToBatchND_:function(e,t,n){const i=Object(s.a)(e,"x","spaceToBatchND");o.b(i.rank>=1+t.length,(()=>`input rank ${i.rank} should be > than [blockShape] ${t.length}`)),o.b(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),o.b(i.shape.reduce(((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e),!0),(()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const u={x:i},c={blockShape:t,paddings:n};return r.a.runKernel(a.Jc,u,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({prelu_:function(e,t){const n={x:Object(s.a)(e,"x","prelu"),alpha:Object(s.a)(t,"alpha","prelu")};return r.a.runKernel(a.ic,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(33),a=n(3),s=n(67);const o=Object(a.b)({randomUniform_:function(e,t=0,n=1,a="float32",o){const i=Object(r.a)(e,a),u=new s.c(t,n,null,o);for(let e=0;e<i.values.length;e++)i.values[e]=u.nextValue();return i.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({relu6_:function(e){const t={x:Object(s.a)(e,"x","relu6")};return r.a.runKernel(a.pc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({round_:function(e){const t={x:Object(s.a)(e,"x","round")};return r.a.runKernel(a.xc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(39),a=n(25),s=n(81),o=n(9),i=n(3),u=n(73),c=n(7),l=n(40),d=n(14),p=n(21),h=n(74);const f=Object(i.b)({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let i;if(t<=2){const r=Object(c.a)(e,[n,t]);i=Object(h.a)(r)}else{const f=[n,2*(t-1)],m=Object(c.a)(Object(u.a)(e),[n,t]),b=Object(c.a)(Object(s.a)(e),[n,t]),g=Object(l.a)(Object(p.a)(m,[0,1],[n,t-2]),1),y=Object(o.a)(Object(l.a)(Object(p.a)(b,[0,1],[n,t-2]),1),Object(d.a)(-1)),x=Object(a.a)([m,g],1),v=Object(a.a)([b,y],1),O=Object(c.a)(Object(r.a)(x,v),[f[0],f[1]]);i=Object(h.a)(O)}if(i=Object(u.a)(i),3===e.rank&&0!==e.shape[0]){const t=i,n=e.shape[0];i=Object(c.a)(i,[n,i.shape[0]/n,i.shape[1]]),t.dispose()}return i}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({squaredDifference_:function(e,t){let n=Object(o.a)(e,"a","squaredDifference"),u=Object(o.a)(t,"b","squaredDifference");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.Sc,c,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({step_:function(e,t=0){const n={x:Object(s.a)(e,"x","step")},o={alpha:t};return r.a.runKernel(a.Tc,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),a=n(6),s=n(35);function o(e,t,n){if(Object(a.d)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const o=Object(r.c)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(s.a)(e,t,o,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(129),a=n(2);const s=async function(e){const t=Object(a.a)(e,"condition","whereAsync","bool"),n=await t.data(),s=Object(r.a)(t.shape,n);return e!==t&&t.dispose(),s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(33);function a(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const a=Object(r.a)(e,"int32"),s=Object(r.a)([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const r=a.indexToLoc(n[t]),o=t*e.length;s.values.set(r,o)}return s.toTensor()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(6),o=n(3),i=n(7);const u=Object(o.b)({conv2DBackpropInput_:function(e,t,n,o,u,c="NHWC",l){s.b(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let d=e,p=t,h=!1;3===t.rank&&(h=!0,p=Object(i.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),d=[1,e[0],e[1],e[2]]),s.b(4===d.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${d.length}.`)),s.b(4===p.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${p.rank}`)),s.b(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const f="NHWC"===c?d[3]:d[1],m="NHWC"===c?p.shape[3]:p.shape[1];s.b(f===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`)),s.b(m===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${m}) must match output depth for filter ${n.shape[3]}.`)),null!=l&&s.b(s.v(u),(()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${l} but got pad ${u}.`));const b={dy:p,filter:n},g={strides:o,pad:u,dataFormat:c,dimRoundingMode:l,inputShape:d},y=r.a.runKernel(a.F,b,g);return h?Object(i.a)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}})},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var s={},o={};function i(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=c(e,e<0?-1:0,!1),a&&(s[e]=n),n)}function u(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=f)return w}else{if(e<=-m)return I;if(e+1>=m)return k}return e<0?u(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=i,r.fromNumber=u,r.fromBits=c;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var a=u(l(n,8)),s=g,o=0;o<e.length;o+=8){var i=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+i),n);if(i<8){var p=u(l(n,i));s=s.mul(p).add(u(c))}else s=(s=s.mul(a)).add(u(c))}return s.unsigned=t,s}function p(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=p;var h=4294967296,f=h*h,m=f/2,b=i(1<<24),g=i(0);r.ZERO=g;var y=i(0,!0);r.UZERO=y;var x=i(1);r.ONE=x;var v=i(1,!0);r.UONE=v;var O=i(-1);r.NEG_ONE=O;var k=c(-1,2147483647,!1);r.MAX_VALUE=k;var w=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=w;var I=c(0,-2147483648,!1);r.MIN_VALUE=I;var S=r.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=u(l(e,6),this.unsigned),s=this,o="";;){var i=s.div(a),c=(s.sub(i.mul(a)).toInt()>>>0).toString(e);if((s=i).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return a(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(a(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(x)},S.neg=S.negate,S.add=function(e){a(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,s=65535&this.low,o=e.high>>>16,i=65535&e.high,u=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=s+(65535&e.low))>>>16,d+=(h+=r+u)>>>16,l+=(d+=n+i)>>>16,l+=t+o,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return a(e)||(e=p(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=p(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(I))return e.isOdd()?I:g;if(e.eq(I))return this.isOdd()?I:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(b)&&e.lt(b))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,s=this.low>>>16,o=65535&this.low,i=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,m=0,y=0,x=0;return y+=(x+=o*h)>>>16,m+=(y+=s*h)>>>16,y&=65535,m+=(y+=o*d)>>>16,f+=(m+=r*h)>>>16,m&=65535,f+=(m+=s*d)>>>16,m&=65535,f+=(m+=o*l)>>>16,f+=t*h+r*d+s*l+o*i,c((y&=65535)<<16|(x&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(a(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;s=y}else{if(this.eq(I))return e.eq(x)||e.eq(O)?I:e.eq(I)?x:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?x:O:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(I))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=g}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:l(2,o-48),d=u(t),h=d.mul(e);h.isNegative()||h.gt(r);)h=(d=u(t-=i,this.unsigned)).mul(e);d.isZero()&&(d=x),s=s.add(d),r=r.sub(h)}return s},S.div=S.divide,S.modulo=function(e){return a(e)||(e=p(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.and=function(e){return a(e)||(e=p(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return a(e)||(e=p(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return a(e)||(e=p(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){"use strict";(function(e){var r=n(212),a=n(213),s=n(214);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("\'offset\' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("\'length\' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError(\'"encoding" must be a valid string encoding\');var r=0|f(t,n),a=(e=i(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=i(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?i(e,0):p(e,t);if("Buffer"===t.type&&s(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError(\'"size" argument must be a number\');if(e<0)throw new RangeError(\'"size" argument must not be negative\')}function d(e,t){if(l(t),e=i(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return $(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,a);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,a){var s,o=1,i=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,i/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(s=n;s<i;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(n+u>i&&(n=i-u),s=n;s>=0;s--){for(var d=!0,p=0;p<u;p++)if(c(e,s+p)!==c(t,p)){d=!1;break}if(d)return s}return-1}function x(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var i=parseInt(t.substr(2*o,2),16);if(isNaN(i))return o;e[n+o]=i}return o}function v(e,t,n,r){return W(z(t,e.length-n),e,n,r)}function O(e,t,n,r){return W(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return O(e,t,n,r)}function w(e,t,n,r){return W(V(t),e,n,r)}function I(e,t,n,r){return W(function(e,t){for(var n,r,a,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,s.push(a),s.push(r);return s}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var s,o,i,u,c=e[a],l=null,d=c>239?4:c>223?3:c>191?2:1;if(a+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[a+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[a+1],o=e[a+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[a+1],o=e[a+2],i=e[a+3],128==(192&s)&&128==(192&o)&&128==(192&i)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&i)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=d}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,s=Math.min(n,r);a<s;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError(\'"list" argument must be an Array of Buffers\');o.copy(r,a),a+=o.length}return r},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,a){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),i=Math.min(s,o),c=this.slice(r,a),l=e.slice(t,n),d=0;d<i;++d)if(c[d]!==l[d]){s=c[d],o=l[d];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function j(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function $(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",s=t;s<n;++s)a+=B(e[s]);return a}function E(e,t,n){for(var r=e.slice(t,n),a="",s=0;s<r.length;s+=2)a+=String.fromCharCode(r[s]+256*r[s+1]);return a}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,a,s){if(!u.isBuffer(e))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(t>a||t<s)throw new RangeError(\'"value" argument is out of bounds\');if(n+r>e.length)throw new RangeError("Index out of range")}function _(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,s=Math.min(e.length-n,2);a<s;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,s=Math.min(e.length-n,4);a<s;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function D(e,t,n,r,a,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,s){return s||D(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,s){return s||D(e,0,n,8),a.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var a=t-e;n=new u(a,void 0);for(var s=0;s<a;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,a=1,s=this[e+--r];r>0&&(a*=256);)s+=this[e+--r]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,s=0;for(this[t]=255&e;++s<n&&(a*=256);)this[t+s]=e/a&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):_(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var s=0,o=1,i=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===i&&0!==this[t+s-1]&&(i=1),this[t+s]=(e/o>>0)-i&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var s=n-1,o=1,i=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===i&&0!==this[t+s+1]&&(i=1),this[t+s]=(e/o>>0)-i&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):_(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,s=r-n;if(this===e&&n<t&&t<r)for(a=s-1;a>=0;--a)e[a+t]=this[a+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=u.isBuffer(e)?e:z(new u(e,r).toString()),i=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%i]}return this};var L=/[^+\\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,a=null,s=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&s.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(96))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({acos_:function(e){const t={x:Object(s.a)(e,"x","acos")};return r.a.runKernel(a.b,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({acosh_:function(e){const t={x:Object(s.a)(e,"x","acosh")};return r.a.runKernel(a.c,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({addN_:function(e){o.b(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),o.b(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>Object(s.a)(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!o.a(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const i=t;return r.a.runKernel(a.e,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({all_:function(e,t=null,n=!1){const o={x:Object(s.a)(e,"x","all","bool")},i={axis:t,keepDims:n};return r.a.runKernel(a.f,o,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({any_:function(e,t=null,n=!1){const o={x:Object(s.a)(e,"x","any","bool")},i={axis:t,keepDims:n};return r.a.runKernel(a.g,o,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({argMax_:function(e,t=0){const n={x:Object(s.a)(e,"x","argMax")},o={axis:t};return r.a.runKernel(a.h,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({argMin_:function(e,t=0){const n={x:Object(s.a)(e,"x","argMin")},o={axis:t};return r.a.runKernel(a.i,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({asin_:function(e){const t={x:Object(s.a)(e,"x","asin")};return r.a.runKernel(a.j,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({asinh_:function(e){const t={x:Object(s.a)(e,"x","asinh")};return r.a.runKernel(a.k,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({atan_:function(e){const t={x:Object(s.a)(e,"x","atan")};return r.a.runKernel(a.l,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({atan2_:function(e,t){let n=Object(o.a)(e,"a","atan2"),i=Object(o.a)(t,"b","atan2");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.m,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({atanh_:function(e){const t={x:Object(s.a)(e,"x","atanh")};return r.a.runKernel(a.n,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(18),u=n(3),c=n(7);const l=Object(u.b)({avgPool3d_:function(e,t,n,u,l,d="NDHWC"){const p=Object(s.a)(e,"x","avgPool3d","float32");let h=p,f=!1;4===p.rank&&(f=!0,h=Object(c.a)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),o.b(5===h.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${h.rank}.`)),o.b("NDHWC"===d,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${d}`)),null!=l&&o.b(o.v(u),(()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${l} but got pad ${u}.`));const m={x:h},b={filterSize:t,strides:n,pad:u,dimRoundingMode:l,dataFormat:d};let g=r.a.runKernel(a.p,m,b);return g=Object(i.a)(g,h.dtype),f?Object(c.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({broadcastArgs_:function(e,t){const n=Object(s.a)(e,"s0","broadcastArgs","int32"),o=Object(s.a)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==o.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${o.rank}`);const i={s0:n,s1:o};return r.a.runKernel(a.v,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({ceil_:function(e){const t={x:Object(s.a)(e,"x","ceil","float32")};return r.a.runKernel(a.y,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({clipByValue_:function(e,t,n){const i=Object(s.a)(e,"x","clipByValue");o.b(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`));const u={x:i},c={clipValueMin:t,clipValueMax:n};return r.a.runKernel(a.z,u,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=n(6),s=n(62),o=n(27),i=n(3),u=n(7);const c=Object(i.b)({conv1d_:function(e,t,n,i,c="NWC",l=1,d){const p=Object(r.a)(e,"x","conv1d"),h=Object(r.a)(t,"filter","conv1d");let f=p,m=!1;2===p.rank&&(m=!0,f=Object(u.a)(p,[1,p.shape[0],p.shape[1]])),a.b(3===f.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`)),a.b(3===h.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${h.rank}.`)),null!=d&&a.b(a.v(i),(()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${i}.`)),a.b(f.shape[2]===h.shape[1],(()=>`Error in conv1d: depth of input (${f.shape[2]}) must match input depth for filter ${h.shape[1]}.`)),a.b(o.h(n,l),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation \'${l}\'`)),a.b("NWC"===c,(()=>`Error in conv1d: got dataFormat of ${c} but only NWC is currently supported.`));const b=Object(u.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),g=Object(u.a)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),y=[1,n],x=[1,l],v=Object(s.a)(g,b,y,i,"NHWC",x,d);return m?Object(u.a)(v,[v.shape[2],v.shape[3]]):Object(u.a)(v,[v.shape[0],v.shape[2],v.shape[3]])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),a=n(130),s=n(3);const o=Object(s.b)({conv2dTranspose_:function(e,t,n,s,o,i){const u=Object(r.a)(e,"x","conv2dTranspose"),c=Object(r.a)(t,"filter","conv2dTranspose");return Object(a.a)(n,u,c,s,o,"NHWC",i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(27),u=n(3),c=n(7);const l=Object(u.b)({conv3d_:function(e,t,n,u,l="NDHWC",d=[1,1,1]){const p=Object(s.a)(e,"x","conv3d"),h=Object(s.a)(t,"filter","conv3d");let f=p,m=!1;4===p.rank&&(m=!0,f=Object(c.a)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),o.b(5===f.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${f.rank}.`)),o.b(5===h.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${h.rank}.`)),o.b(f.shape[4]===h.shape[3],(()=>`Error in conv3d: depth of input (${f.shape[4]}) must match input depth for filter ${h.shape[3]}.`)),o.b(Object(i.h)(n,d),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations \'${d}\'`)),o.b("NDHWC"===l,(()=>`Error in conv3d: got dataFormat of ${l} but only NDHWC is currently supported.`));const b={x:f,filter:h},g={strides:n,pad:u,dataFormat:l,dilations:d},y=r.a.runKernel(a.G,b,g);return m?Object(c.a)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({cos_:function(e){const t={x:Object(s.a)(e,"x","cos","float32")};return r.a.runKernel(a.J,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({cosh_:function(e){const t={x:Object(s.a)(e,"x","cosh","float32")};return r.a.runKernel(a.K,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({cumsum_:function(e,t=0,n=!1,o=!1){const i={x:Object(s.a)(e,"x","cumsum")},u={axis:t,exclusive:n,reverse:o};return r.a.runKernel(a.M,i,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({denseBincount_:function(e,t,n,i=!1){const u=Object(s.a)(e,"x","denseBincount"),c=Object(s.a)(t,"weights","denseBincount");o.b("int32"===u.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${u.dtype}`)),o.b(u.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${u.rank}.`)),o.b(n>=0,(()=>`size must be non-negative, but got ${n}.`)),o.b(c.size===u.size||0===c.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${u.shape}, weights shape: ${c.shape}.`));const l={x:u,weights:c},d={size:n,binaryOutput:i};return r.a.runKernel(a.N,l,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({depthToSpace_:function(e,t,n="NHWC"){const i=Object(s.a)(e,"x","depthToSpace","float32"),u="NHWC"===n?i.shape[1]:i.shape[2],c="NHWC"===n?i.shape[2]:i.shape[3],l="NHWC"===n?i.shape[3]:i.shape[1];o.b(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),o.b(u*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\\n    ${u} and ${t}  for depthToSpace with input shape\\n    ${i.shape}`)),o.b(c*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\\n    ${c} and ${t} for depthToSpace with input shape\\n        ${i.shape}`)),o.b(l%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${l} for depthToSpace with input shape ${i.shape}`));const d={x:i},p={blockSize:t,dataFormat:n};return r.a.runKernel(a.O,d,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3),u=n(7);const c=Object(i.b)({dilation2d_:function(e,t,n,i,c=[1,1],l="NHWC"){const d=Object(s.a)(e,"x","dilation2d"),p=Object(s.a)(t,"filter","dilation2d");o.b(3===d.rank||4===d.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${d.rank}.`)),o.b(3===p.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${p.rank}.`)),o.b("NHWC"===l,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${l}`));let h=d,f=!1;3===d.rank&&(h=Object(u.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),f=!0);const m={x:h,filter:p},b={strides:n,pad:i,dilations:c},g=r.a.runKernel(a.T,m,b);return f?Object(u.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(2),s=n(16),o=n(106),i=n(3),u=n(45),c=n(28);const l=Object(i.b)({divNoNan_:function(e,t){let n=Object(a.a)(e,"a","div"),i=Object(a.a)(t,"b","div");[n,i]=Object(r.makeTypesMatch)(n,i);const l=Object(s.a)(n,i),d=Object(c.a)(l),p=Object(o.a)(i,d);return Object(u.a)(p,d,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({einsum_:function(e,...t){const n=t.map(((e,t)=>Object(s.a)(e,`tensors${t}`,"einsum"))),o={equation:e};return r.a.runKernel(a.W,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(18),u=n(3);const c=Object(u.b)({erf_:function(e){let t=Object(s.a)(e,"x","erf");o.b("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=Object(i.a)(t,"float32"));const n={x:t};return r.a.runKernel(a.ab,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({expm1_:function(e){const t={x:Object(s.a)(e,"x","expm1")};return r.a.runKernel(a.db,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({isNaN_:function(e){const t={x:Object(s.a)(e,"x","isNaN")};return r.a.runKernel(a.wb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(20),u=n(3);const c=Object(u.b)({less_:function(e,t){let n=Object(o.a)(e,"a","less","string_or_numeric"),u=Object(o.a)(t,"b","less","string_or_numeric");[n,u]=Object(s.makeTypesMatch)(n,u),Object(i.a)(n.shape,u.shape);const c={a:n,b:u};return r.a.runKernel(a.Ab,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(5);function s(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const s={start:e,stop:t,num:n};return r.a.runKernel(a.Cb,{},s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3),u=n(7);const c=Object(i.b)({localResponseNormalization_:function(e,t=5,n=1,i=1,c=.5){const l=Object(s.a)(e,"x","localResponseNormalization");o.b(4===l.rank||3===l.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\\n               rank ${l.rank}.`)),o.b(o.v(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let d=l,p=!1;3===l.rank&&(p=!0,d=Object(u.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const h={x:d},f={depthRadius:t,bias:n,alpha:i,beta:c},m=r.a.runKernel(a.xb,h,f);return p?Object(u.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(24),a=n(2),s=n(18),o=n(44),i=n(55),u=n(52),c=n(9),l=n(3),d=n(11),p=n(22);const h=Object(l.b)({logSoftmax_:function(e,t=-1){const n=Object(a.a)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Object(r.a)(((e,n)=>{const r=Object(u.a)(e,t,!0),a=Object(d.a)(e,r),l=Object(d.a)(Object(s.a)(a,"float32"),Object(i.a)(Object(p.a)(Object(o.a)(a),t,!0)));n([l]);return{value:l,gradFunc:(e,n)=>{const[r]=n,a=Object(o.a)(r);return Object(d.a)(e,Object(c.a)(Object(p.a)(e,t,!0),a))}}}))(n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3),u=n(7);const c=Object(i.b)({maxPool3d_:function(e,t=[1,1,1],n,i,c,l="NDHWC"){const d=Object(s.a)(e,"x","maxPool3d");let p=d,h=!1;4===d.rank&&(h=!0,p=Object(u.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.b(5===p.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${p.rank}.`)),o.b("NDHWC"===l,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${l}`)),null!=c&&o.b(o.v(i),(()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${c} but got pad ${i}.`));const f={x:p},m={filterSize:t,strides:n,pad:i,dimRoundingMode:c,dataFormat:l},b=r.a.runKernel(a.Lb,f,m);return h?Object(u.a)(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({maxPoolWithArgmax_:function(e,t,n,o,i=!1){const u={x:Object(s.a)(e,"x","maxPoolWithArgmax")},c={filterSize:t,strides:n,pad:o,includeBatchInIndex:i},l=r.a.runKernel(a.Ob,u,c);return{result:l[0],indexes:l[1]}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({mirrorPad_:function(e,t,n){o.b("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const i=Object(s.a)(e,"x","mirrorPad");if(0===i.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.b(t.length===i.rank,(()=>`Padding doesn\'t match input. Must be ${i.rank}. Got ${t.length}.`));const u="reflect"===n?1:0;for(let e=0;e<i.rank;e++)o.b(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),o.b(t[e][0]>=0&&t[e][0]<=i.shape[e]-u&&t[e][1]>=0&&t[e][1]<=i.shape[e]-u,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${i.shape[e]-u} or less than 0 for input of shape ${i.shape}`));const c={paddings:t,mode:n},l={x:i};return r.a.runKernel(a.Tb,l,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(13),o=n(2),i=n(3);const u=Object(i.b)({mod_:function(e,t){let n=Object(o.a)(e,"a","mod"),i=Object(o.a)(t,"b","mod");[n,i]=Object(s.makeTypesMatch)(n,i);const u={a:n,b:i};return r.a.runKernel(a.Ub,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(3),i=n(7);const u=Object(o.b)({multinomial_:function(e,t,n,o=!1){const u=Object(s.a)(e,"logits","multinomial"),c=u.size,l=u.rank;if(c<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${c}.`);if(l>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${l}`);n=n||Math.random();const d={logits:1===l?Object(i.a)(u,[1,-1]):u},p={numSamples:t,seed:n,normalized:o},h=r.a.runKernel(a.Vb,d,p);return 1===l?Object(i.a)(h,[h.size]):h}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({onesLike_:function(e){const t={x:Object(s.a)(e,"x","onesLike")};return r.a.runKernel(a.dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(18),i=n(3);const u=Object(i.b)({prod_:function(e,t=null,n=!1){let i=Object(s.a)(e,"x","prod");"bool"===i.dtype&&(i=Object(o.a)(i,"int32"));const u={x:i},c={axis:t,keepDims:n};return r.a.runKernel(a.jc,u,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({reciprocal_:function(e){const t={x:Object(s.a)(e,"x","reciprocal")};return r.a.runKernel(a.nc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({rsqrt_:function(e){const t={x:Object(s.a)(e,"x","rsqrt","float32")};return r.a.runKernel(a.yc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({selu_:function(e){const t={x:Object(s.a)(e,"x","selu")};return r.a.runKernel(a.Bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17),a=n(2),s=n(6);const o=async function(e,t){const n=Object(a.a)(e,"x","setdiff1d"),o=Object(a.a)(t,"y","setdiff1d");s.b(n.dtype===o.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${o.dtype}).`)),s.b(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),s.b(1===o.rank,(()=>`y should be 1D tensor, but got y (${o.shape}).`));const i=await n.data(),u=await o.data(),c=new Set(u);let l=0;for(let e=0;e<i.length;e++)c.has(i[e])||l++;const d=new r.b([l],n.dtype),p=new r.b([l],"int32");for(let e=0,t=0;e<i.length;e++)c.has(i[e])||(d.values[t]=i[e],p.values[t]=e,t++);return[d.toTensor(),p.toTensor()]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({sign_:function(e){const t={x:Object(s.a)(e,"x","sign")};return r.a.runKernel(a.Dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({sin_:function(e){const t={x:Object(s.a)(e,"x","sin","float32")};return r.a.runKernel(a.Ec,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({sinh_:function(e){const t={x:Object(s.a)(e,"x","sinh")};return r.a.runKernel(a.Fc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({softmax_:function(e,t=-1){const n=Object(s.a)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const o={logits:n},i={dim:t};return r.a.runKernel(a.Hc,o,i)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({stridedSlice_:function(e,t,n,o,i=0,u=0,c=0,l=0,d=0){const p={x:Object(s.a)(e,"x","stridedSlice","string_or_numeric")},h={begin:t,end:n,strides:o,beginMask:i,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:d};return r.a.runKernel(a.Uc,p,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({tan_:function(e){const t={x:Object(s.a)(e,"x","tan","float32")};return r.a.runKernel(a.ad,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({topk_:function(e,t=1,n=!0){const o=Object(s.a)(e,"x","topk");if(0===o.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=o.shape[o.shape.length-1];if(t<0)throw new Error(`\'k\' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`\'k\' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const u={x:o},c={k:t,sorted:n},[l,d]=r.a.runKernel(a.dd,u,c);return{values:l,indices:d}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(33),a=n(3),s=n(67);const o=Object(a.b)({truncatedNormal_:function(e,t=0,n=1,a,o){if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const i=new s.a(t,n,a,!0,o),u=Object(r.a)(e,a);for(let e=0;e<u.values.length;e++)u.values[e]=i.nextValue();return u.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(6),i=n(3);const u=Object(i.b)({unique_:function(e,t=0){const n=Object(s.a)(e,"x","unique","string_or_numeric");Object(o.b)(n.rank>0,(()=>"The input tensor must be at least 1D"));const i={x:n},u={axis:t},[c,l]=r.a.runKernel(a.gd,i,u);return{values:c,indices:l}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),s=n(2),o=n(3),i=n(79);const u=Object(o.b)({scatterND_:function(e,t,n){const o=Object(s.a)(e,"indices","scatterND","int32"),u=Object(s.a)(t,"updates","scatterND");i.validateInput(u,o,n);const c={indices:o,updates:u},l={shape:n};return r.a.runKernel(a.zc,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),s=n(2),o=n(3);const i=Object(o.b)({gatherND_:function(e,t){const n=Object(s.a)(t,"indices","gatherND","int32"),o={params:Object(s.a)(e,"x","gatherND","string_or_numeric"),indices:n};return r.a.runKernel(a.nb,o)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));const r="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:void 0!==e?e:e=>e();function a(){return new Promise((e=>r((()=>e()))))}}).call(this,n(226).setImmediate)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5);var s=n(2),o=n(3);const i=Object(o.b)({sparseToDense_:function(e,t,n,o=0){const i=Object(s.a)(e,"sparseIndices","sparseToDense","int32"),u=Object(s.a)(t,"sparseValues","sparseToDense"),c=Object(s.a)(o,"defaultValue","sparseToDense",u.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,u,n,c);const l={sparseIndices:i,sparseValues:u,defaultValue:c},d={outputShape:n};return r.a.runKernel(a.Oc,l,d)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]},,,function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],o=n[1],i=new s(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),u=0,l=o>0?r-4:r,d=0;d<l;d+=4)t=a[e.charCodeAt(d)]<<18|a[e.charCodeAt(d+1)]<<12|a[e.charCodeAt(d+2)]<<6|a[e.charCodeAt(d+3)],i[u++]=t>>16&255,i[u++]=t>>8&255,i[u++]=255&t;2===o&&(t=a[e.charCodeAt(d)]<<2|a[e.charCodeAt(d+1)]>>4,i[u++]=255&t);1===o&&(t=a[e.charCodeAt(d)]<<10|a[e.charCodeAt(d+1)]<<4|a[e.charCodeAt(d+2)]>>2,i[u++]=t>>8&255,i[u++]=255&t);return i},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,s=[],o=16383,i=0,u=n-a;i<u;i+=o)s.push(l(e,i,i+o>u?u:i+o));1===a?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,u=o.length;i<u;++i)r[i]=o[i],a[o.charCodeAt(i)]=i;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var a,s,o=[],i=t;i<n;i+=3)a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(r[(s=a)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var s,o,i=8*a-r-1,u=(1<<i)-1,c=u>>1,l=-7,d=n?a-1:0,p=n?-1:1,h=e[t+d];for(d+=p,s=h&(1<<-l)-1,h>>=-l,l+=i;l>0;s=256*s+e[t+d],d+=p,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=p,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=c}return(h?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,a,s){var o,i,u,c=8*s-a-1,l=(1<<c)-1,d=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?p/u:p*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=l?(i=0,o=l):o+d>=1?(i=(t*u-1)*Math.pow(2,a),o+=d):(i=t*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&i,h+=f,i/=256,a-=8);for(o=o<<a|i,c+=a;c>0;e[n+h]=255&o,h+=f,o/=256,c-=8);e[n+h-f]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){var t=n(12);const r=()=>n(216);let a;class s{constructor(){this.util=n(217),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=Object(t.c)().global.fetch?Object(t.c)().global.fetch(e,n):(null==a&&(a=r()),a(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}Object(t.c)().get("IS_NODE")&&Object(t.c)().setPlatform("node",new s)}).call(this,n(97))},function(e,t){},function(e,t){},function(e,t,n){(function(e){var r;!function(e,a,s){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=u:n(41)&&n(78)?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e,n(41))}).call(this,n(77)(e))},function(e,t,n){(function(e){var r;!function(e,a,s){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=u:n(41)&&n(78)?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e,n(41))}).call(this,n(77)(e))},function(e,t,n){(function(e){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=u:n(41)&&n(78)?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e,n(41))}).call(this,n(77)(e))},function(e,t,n){(function(e){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=u:n(41)&&n(78)?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e,n(41))}).call(this,n(77)(e))},function(e,t,n){(function(e){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,o,i=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\\0",r=0,u=Math.max(u,t.length)),a=0,s=-32;s<u;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,a=0==(n=i[127&s]^=r+o)?a+1:0);for(a>=128&&(i[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=i[a+34&127],n=i[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,i[a]=r^n;e.w=o,e.X=i,e.i=a}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=u:n(41)&&n(78)?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e,n(41))}).call(this,n(77)(e))},function(e,t,n){(function(e){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=u:n(41)&&n(78)?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e,n(41))}).call(this,n(77)(e))},function(e,t,n){var r;!function(a,s){var o,i=this,u=256,c=s.pow(u,6),l=s.pow(2,52),d=2*l,p=255;function h(e,t,n){var r=[],p=g(b((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,y(a)]}}():e,3),r),h=new f(r),x=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|h.g(4)},x.quick=function(){return h.g(4)/4294967296},x.double=x,g(y(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(s.random=e,t):e})(x,p,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[s=p&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=p&a+1],n=n*u+o[p&(o[a]=o[s=p&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(u)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(b(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[p&a]=p&(n^=19*t[p&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,g(s.random(),a),e.exports){e.exports=h;try{o=n(225)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(227),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(96))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a,s,o,i,u=1,c={},l=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){s.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):r=function(e){setTimeout(f,0,e)}:(o="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),r=function(t){e.postMessage(o+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[u]=a,r(u),u++},p.clearImmediate=h}function h(e){delete c[e]}function f(e){if(l)setTimeout(f,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(96),n(97))},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"simpleAbsImpl",(function(){return q})),n.d(r,"addImpl",(function(){return P})),n.d(r,"bincountImpl",(function(){return Ce})),n.d(r,"bincountReduceImpl",(function(){return Ee})),n.d(r,"ceilImpl",(function(){return _e})),n.d(r,"concatImpl",(function(){return Be})),n.d(r,"equalImpl",(function(){return kt})),n.d(r,"expImpl",(function(){return Rt})),n.d(r,"expm1Impl",(function(){return Pt})),n.d(r,"floorImpl",(function(){return tn})),n.d(r,"gatherNdImpl",(function(){return ln})),n.d(r,"gatherV2Impl",(function(){return pn})),n.d(r,"greaterImpl",(function(){return fn})),n.d(r,"greaterEqualImpl",(function(){return gn})),n.d(r,"lessImpl",(function(){return Tn})),n.d(r,"lessEqualImpl",(function(){return Cn})),n.d(r,"linSpaceImpl",(function(){return Rn})),n.d(r,"logImpl",(function(){return Fn})),n.d(r,"maxImpl",(function(){return Yn})),n.d(r,"maximumImpl",(function(){return Jn})),n.d(r,"minimumImpl",(function(){return cr})),n.d(r,"multiplyImpl",(function(){return ft})),n.d(r,"negImpl",(function(){return vr})),n.d(r,"notEqualImpl",(function(){return jr})),n.d(r,"prodImpl",(function(){return zr})),n.d(r,"rangeImpl",(function(){return Wr})),n.d(r,"rsqrtImpl",(function(){return ta})),n.d(r,"sigmoidImpl",(function(){return S})),n.d(r,"sliceImpl",(function(){return Ne})),n.d(r,"sparseFillEmptyRowsImpl",(function(){return Oa})),n.d(r,"sparseReshapeImpl",(function(){return wa})),n.d(r,"sparseSegmentReductionImpl",(function(){return Sa})),n.d(r,"sqrtImpl",(function(){return Ca})),n.d(r,"squaredDifferenceImpl",(function(){return _a})),n.d(r,"stridedSliceImpl",(function(){return La})),n.d(r,"stringNGramsImpl",(function(){return Va})),n.d(r,"stringSplitImpl",(function(){return Ga})),n.d(r,"stringToHashBucketFastImpl",(function(){return qa})),n.d(r,"subImpl",(function(){return Ut})),n.d(r,"tileImpl",(function(){return Ja})),n.d(r,"topKImpl",(function(){return rs})),n.d(r,"transposeImpl",(function(){return ee})),n.d(r,"uniqueImpl",(function(){return ls}));var a=n(0);function s(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&a.util.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const o=a.kernel_impls.whereImpl;class i extends a.KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new a.DataStorage(this,Object(a.engine)())}nextDataId(){return i.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,Object(a.env)().get("IS_NODE")&&a.backend_util.warn("\\n============================\\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require(\'@tensorflow/tfjs-node\'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\\n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){const s=n.map((e=>a.util.encodeString(e)));r=this.write(s,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){const e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return a.backend_util.mergeRealAndImagArrays(e,t)}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>a.util.decodeString(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a.buffer)(e.shape,e.dtype,n)}makeOutput(e,t,n){const r=this.write(e,t,n);return Object(a.engine)().makeTensorFromDataId(r,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=a.util.now();e();return{kernelMs:a.util.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){s([e],"where");const t=this.readSync(e.dataId);return o(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function u(e,t,n){return({inputs:r,attrs:o,backend:i})=>{const{x:u}=r;if(s(u,e),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const c=i,l=c.data.get(u.dataId).values,d=a.util.sizeFromShape(u.shape),p=n||u.dtype,h=a.util.getArrayFromDType(p,d);for(let e=0;e<d;++e)h[e]=t(l[e],o);return c.makeTensorInfo(u.shape,p,h)}}function c(e,t,n){return({inputs:r,attrs:a,backend:o})=>{const{x:i}=r;if(s(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const u=o,c=u.data.get(i.dataId).values,l=n||i.dtype,d=t(c,l,a);return u.makeTensorInfo(i.shape,l,d)}}i.nextDataId=0,Object(a.registerBackend)("cpu",(()=>new i),1);const l=u(a.Elu,(e=>e>=0?e:Math.exp(e)-1)),d={kernelName:a.Elu,backendName:"cpu",kernelFunc:l};function p(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const h={kernelName:a.Identity,backendName:"cpu",kernelFunc:p};function f(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:i}=r;s([o],"leakyRelu");const u=a.util.sizeFromShape(o.shape),c=n.data.get(o.dataId).values,l=a.util.getTypedArrayFromDType("float32",u);for(let e=0;e<c.length;e++)l[e]=c[e]<0?i*c[e]:c[e];return n.makeTensorInfo(o.shape,"float32",l)}const m={kernelName:a.LeakyRelu,backendName:"cpu",kernelFunc:f};function b(e){return(t,n,r,s,o)=>{const i=a.backend_util.assertAndGetBroadcastShape(t,n),u=i.length,c=a.util.computeStrides(i),l=a.util.sizeFromShape(i),d=a.util.getTypedArrayFromDType(o,l),p=t.length,h=n.length,f=a.util.computeStrides(t),m=a.util.computeStrides(n),b=a.backend_util.getBroadcastDims(t,i),g=a.backend_util.getBroadcastDims(n,i);if(b.length+g.length===0)for(let t=0;t<d.length;++t)d[t]=e(r[t%r.length],s[t%s.length]);else for(let t=0;t<d.length;++t){const n=a.util.indexToLoc(t,u,c),o=n.slice(-p);b.forEach((e=>o[e]=0));const i=a.util.locToIndex(o,p,f),l=n.slice(-h);g.forEach((e=>l[e]=0));const y=a.util.locToIndex(l,h,m);d[t]=e(r[i],s[y])}return[d,i]}}const g=b(((e,t)=>e<0?t*e:e));function y(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;s([r,a],"prelu");const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[u,c]=g(r.shape,a.shape,o,i,"float32");return n.makeTensorInfo(c,"float32",u)}const x={kernelName:a.Prelu,backendName:"cpu",kernelFunc:y},v=u(a.Relu,(e=>Math.max(0,e))),O={kernelName:a.Relu,backendName:"cpu",kernelFunc:v},k=u(a.Relu6,(e=>Math.min(Math.max(0,e),6))),w={kernelName:a.Relu6,backendName:"cpu",kernelFunc:k};function I(e){return(t,n,r)=>{const s=a.util.getTypedArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)s[n]=e(t[n],r);return s}}const S=I((e=>1/(1+Math.exp(-e)))),N=u(a.Sigmoid,(e=>1/(1+Math.exp(-e)))),T={kernelName:a.Sigmoid,backendName:"cpu",kernelFunc:N};function j(e,t,n,r,a){if("linear"===n)return p({inputs:{x:t},backend:e});if("relu"===n)return v({inputs:{x:t},backend:e});if("elu"===n)return l({inputs:{x:t},backend:e});if("relu6"===n)return k({inputs:{x:t},backend:e});if("prelu"===n)return y({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return f({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return N({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function $(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,i=n.makeTensorInfo(r.shape,"complex64");return n.data.get(i.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",o)},i}const C={kernelName:a.Complex,backendName:"cpu",kernelFunc:$};function E(e,t,n="float32"){if("complex64"===n){return $({inputs:{real:E(e,t,"float32"),imag:E(e,t,"float32")},backend:e})}const r=a.util.makeZerosTypedArray(a.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function A(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const R={kernelName:a.Real,backendName:"cpu",kernelFunc:A};function _(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===s.dtype)return p({inputs:{x:s},backend:n});const e=E(n,s.shape,s.dtype),t=_({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),r=$({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===s.dtype){const e=A({inputs:{input:s},backend:n}),t=_({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!a.util.hasEncodingLoss(s.dtype,o)){const e=p({inputs:{x:s},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}if("int32"===o){const e=n.data.get(s.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(s.shape,"int32",t)}if("bool"===o){const e=n.data.get(s.dataId).values,t=a.util.toTypedArray([0],s.dtype),[r,o]=b(((e,t)=>e!==t?1:0))(s.shape,[],e,t,"bool");return n.makeTensorInfo(o,"bool",r)}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${o}`)}const F={kernelName:a.Cast,backendName:"cpu",kernelFunc:_};function D(e,t,n,r){return null==n?({inputs:n,backend:o})=>{const{a:i,b:u}=n,c=o;s([i,u],e);const l=c.data.get(i.dataId).values,d=c.data.get(u.dataId).values,p="string"===i.dtype?a.backend_util.fromUint8ToStringArray(l):l,h="string"===i.dtype?a.backend_util.fromUint8ToStringArray(d):d,f=r||i.dtype,[m,b]=t(i.shape,u.shape,p,h,f);return c.makeTensorInfo(b,f,m)}:({inputs:e,backend:a})=>{const{a:s,b:o}=e,i=a;if("complex64"===s.dtype||"complex64"===o.dtype){const e=_({inputs:{x:s},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,u=i.data.get(r.dataId).values,c=i.data.get(a.dataId).values,l=_({inputs:{x:o},backend:i,attrs:{dtype:"complex64"}}),d=i.data.get(l.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=i.data.get(p.dataId).values,m=i.data.get(h.dataId).values,[b,g,y]=n(s.shape,o.shape,u,c,f,m),x=i.makeTensorInfo(y,"float32",b),v=i.makeTensorInfo(y,"float32",g),O=$({inputs:{real:x,imag:v},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(l),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(v),O}{const e=i.data.get(s.dataId).values,n=i.data.get(o.dataId).values,a=r||s.dtype,[u,c]=t(s.shape,o.shape,e,n,a);return i.makeTensorInfo(c,a,u)}}}function M(e){return(t,n,r,s,o,i)=>{const u=a.backend_util.assertAndGetBroadcastShape(t,n),c=a.util.sizeFromShape(u),l=u.length,d=a.util.computeStrides(u),p=a.util.getTypedArrayFromDType("float32",c),h=a.util.getTypedArrayFromDType("float32",c),f=a.backend_util.getBroadcastDims(t,u),m=a.backend_util.getBroadcastDims(n,u),b=a.backend_util.mergeRealAndImagArrays(r,s),g=a.backend_util.mergeRealAndImagArrays(o,i),y=t.length,x=a.util.computeStrides(t),v=n.length,O=a.util.computeStrides(n);if(f.length+m.length===0)for(let t=0;t<p.length;t++){const n=t%b.length,r=t%g.length,a=e(b[2*n],b[2*n+1],g[2*r],g[2*r+1]);p[t]=a.real,h[t]=a.imag}else for(let t=0;t<p.length;t++){const n=a.util.indexToLoc(t,l,d),r=n.slice(-y);f.forEach((e=>r[e]=0));const s=a.util.locToIndex(r,y,x),o=n.slice(-v);m.forEach((e=>o[e]=0));const i=a.util.locToIndex(o,v,O),u=e(b[2*s],b[2*s+1],g[2*i],g[2*i+1]);p[t]=u.real,h[t]=u.imag}return[p,h,u]}}const P=b(((e,t)=>e+t)),L=M(((e,t,n,r)=>({real:e+n,imag:t+r}))),B=D(a.Add,P,L),z={kernelName:a.Add,backendName:"cpu",kernelFunc:B};function V(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{shape:o}=r,i=a.util.sizeFromShape(s.shape),u=a.util.inferFromImplicitShape(o,i),c=a.util.sizeFromShape(u);a.util.assert(i===c,(()=>`The new shape (${u}) has ${c} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(s.dataId);const l=n.data.get(s.dataId);if(null!=l.complexTensorInfos){const e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=u,t.shape=u}return{dataId:s.dataId,shape:u,dtype:s.dtype}}const W={kernelName:a.Reshape,backendName:"cpu",kernelFunc:V};function U(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:i}=t,{transposeA:u,transposeB:c}=r;s([o,i],"matMul");const l=o.shape.length,d=i.shape.length,p=u?o.shape[l-2]:o.shape[l-1],h=c?i.shape[d-1]:i.shape[d-2],f=u?o.shape[l-1]:o.shape[l-2],m=c?i.shape[d-2]:i.shape[d-1],b=o.shape.slice(0,-2),g=i.shape.slice(0,-2),y=a.util.sizeFromShape(b),x=a.util.sizeFromShape(g),v=y===x||1===y||1===x;a.util.assert(l>=2&&d>=2&&v,(()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${b}) and (${g}).`));const O=(y>x?o.shape.slice(0,-2):i.shape.slice(0,-2)).concat([f,m]);a.util.assert(p===h,(()=>`Error in matMul: inner shapes (${p}) and (${h}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${u} and transposeB=${c} must match.`));const k=c?[x,m,h]:[x,h,m],w=V({inputs:{x:o},backend:n,attrs:{shape:u?[y,p,f]:[y,f,p]}}),I=V({inputs:{x:i},backend:n,attrs:{shape:k}}),S=u?w.shape[1]:w.shape[2],N=u?w.shape[2]:w.shape[1],T=c?I.shape[1]:I.shape[2],j=Math.max(y,x),$=n.data.get(w.dataId).values,C=n.data.get(I.dataId).values,E=a.util.computeStrides(w.shape),A=a.util.computeStrides(I.shape),[R,_,F]=u?[E[0],1,E[1]]:[E[0],E[1],1],[D,M,P]=c?[1,A[1],A[0]]:[A[1],1,A[0]],L=N*T,B=Object(a.buffer)([j,N,T],w.dtype),z=B.values,W=n.blockSize;for(let e=0;e<j;e++)for(let t=0;t<N;t+=W)for(let n=0;n<T;n+=W)for(let r=0;r<S;r+=W){const a=Math.min(t+W,N),s=Math.min(n+W,T),o=Math.min(r+W,S);for(let i=t;i<a;i++)for(let t=n;t<s;t++){let n=0;for(let a=r;a<o;a++){const r=Math.min(e,y-1)*R,s=Math.min(e,x-1)*P;n+=$[r+i*_+a*F]*C[a*D+t*M+s]}z[e*L+(i*T+t)]+=n}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(I),n.makeTensorInfo(O,B.dtype,B.values)}const G={kernelName:a.BatchMatMul,backendName:"cpu",kernelFunc:U};const H={kernelName:a._FusedMatMul,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:o,preluActivationWeights:i}=t,{transposeA:u,transposeB:c,activation:l,leakyreluAlpha:d}=r;let p,h,f;const m=[];p=U({inputs:{a:a,b:s},attrs:{transposeA:u,transposeB:c},backend:n}),o&&(h=B({inputs:{a:p,b:o},backend:n}),m.push(p),p=h),l&&(f=j(n,p,l,i,d),m.push(p),p=f);for(const e of m)n.disposeIntermediateTensorInfo(e);return p}};function q(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const K={kernelName:a.Abs,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;s(t,"abs");let r=new Float32Array(a.util.sizeFromShape(t.shape));return r=q(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},X=u(a.Acos,(e=>Math.acos(e))),Y={kernelName:a.Acos,backendName:"cpu",kernelFunc:X},Q=u(a.Acosh,(e=>Math.acosh(e))),Z={kernelName:a.Acosh,backendName:"cpu",kernelFunc:Q};const J={kernelName:a.AddN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;s(t,"addN");const o=r.map((e=>n.data.get(e.dataId).values)),i=Object(a.buffer)(r[0].shape,r[0].dtype),u=i.values;for(let e=0;e<r.length;e++){const t=o[e];for(let e=0;e<u.length;e++)u[e]+=t[e]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function ee(e,t,n,r,s){const o=t.length,i=a.util.sizeFromShape(t),u=a.util.computeStrides(t),c=a.util.computeStrides(s),l=a.util.getTypedArrayFromDType(n,a.util.sizeFromShape(s));for(let t=0;t<i;++t){const n=a.util.indexToLoc(t,o,u),s=new Array(n.length);for(let e=0;e<s.length;e++)s[e]=n[r[e]];l[a.util.locToIndex(s,o,c)]=e[t]}return l}function te(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:o}=n;s(a,"transpose");const i=a.shape.length,u=new Array(i);for(let e=0;e<u.length;e++)u[e]=a.shape[o[e]];const c=ee(r.data.get(a.dataId).values,a.shape,a.dtype,o,u);return{dataId:r.write(c,u,a.dtype),shape:u,dtype:a.dtype}}const ne={kernelName:a.Transpose,backendName:"cpu",kernelFunc:te};const re={kernelName:a.All,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:u}=r;s(o,"all");const c=a.util.parseAxisParam(i,o.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,o.shape.length);let p=o;null!=d&&(p=te({inputs:{x:o},backend:n,attrs:{perm:d}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("all",l,p.shape.length);const[h,f]=a.backend_util.computeOutAndReduceShapes(p.shape,l),m=a.util.sizeFromShape(f),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(h),p.dtype),g=n.data.get(p.dataId).values;for(let e=0;e<b.length;++e){const t=e*m;let n=g[t];for(let e=0;e<m;++e){const r=g[t+e];n=n&&r}b[e]=n}null!=d&&n.disposeIntermediateTensorInfo(p);const y=n.makeTensorInfo(h,p.dtype,b);if(u){const e=V({inputs:{x:y},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(h,c)}});return n.disposeIntermediateTensorInfo(y),e}return y}};const ae={kernelName:a.Any,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:u}=r;s(o,"any");const c=a.util.parseAxisParam(i,o.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,o.shape.length);let p=o;null!=d&&(p=te({inputs:{x:o},backend:n,attrs:{perm:d}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("any",l,p.shape.length);const[h,f]=a.backend_util.computeOutAndReduceShapes(p.shape,l),m=a.util.sizeFromShape(f),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(h),p.dtype),g=n.data.get(p.dataId).values;for(let e=0;e<b.length;++e){const t=e*m;let n=g[t];for(let e=0;e<m;++e){const r=g[t+e];n=n||r}b[e]=n}null!=d&&n.disposeIntermediateTensorInfo(p);const y=n.makeTensorInfo(h,p.dtype,b);if(u){const e=V({inputs:{x:y},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(h,c)}});return n.disposeIntermediateTensorInfo(y),e}return y}};const se={kernelName:a.ArgMax,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;s(o,"argMax");let u=a.util.parseAxisParam(i,o.shape);const c=a.backend_util.getAxesPermutation(u,o.shape.length);let l=o;const d=[];null!=c&&(l=te({inputs:{x:o},backend:n,attrs:{perm:c}}),d.push(l),u=a.backend_util.getInnerMostAxes(u.length,l.shape.length)),u=[u[0]],a.backend_util.assertAxesAreInnerMostDims("argMax",u,l.shape.length);const[p,h]=a.backend_util.computeOutAndReduceShapes(l.shape,u),f=a.util.sizeFromShape(p),m=a.util.makeZerosTypedArray(f,"int32"),b=a.util.sizeFromShape(h),g=n.data.get(l.dataId).values;for(let e=0;e<m.length;++e){const t=e*b;let n=g[t],r=0;for(let e=0;e<b;++e){const a=g[t+e];a>n&&(n=a,r=e)}m[e]=r}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(p,"int32",m)}};const oe={kernelName:a.ArgMin,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r;s(o,"argMin");let u=a.util.parseAxisParam(i,o.shape);const c=a.backend_util.getAxesPermutation(u,o.shape.length);let l=o;const d=[];null!=c&&(l=te({inputs:{x:o},backend:n,attrs:{perm:c}}),d.push(l),u=a.backend_util.getInnerMostAxes(u.length,l.shape.length)),u=[u[0]],a.backend_util.assertAxesAreInnerMostDims("argMin",u,l.shape.length);const[p,h]=a.backend_util.computeOutAndReduceShapes(l.shape,u),f=a.util.sizeFromShape(p),m=a.util.makeZerosTypedArray(f,"int32"),b=a.util.sizeFromShape(h),g=n.data.get(l.dataId).values;for(let e=0;e<m.length;++e){const t=e*b;let n=g[t],r=0;for(let e=0;e<b;++e){const a=g[t+e];a<n&&(n=a,r=e)}m[e]=r}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(p,"int32",m)}},ie=u(a.Asin,(e=>Math.asin(e))),ue={kernelName:a.Asin,backendName:"cpu",kernelFunc:ie},ce=u(a.Asinh,(e=>Math.asinh(e))),le={kernelName:a.Asinh,backendName:"cpu",kernelFunc:ce},de=u(a.Atan,(e=>Math.atan(e))),pe={kernelName:a.Atan,backendName:"cpu",kernelFunc:de},he=b(((e,t)=>Math.atan2(e,t))),fe=D(a.Atan2,he),me={kernelName:a.Atan2,backendName:"cpu",kernelFunc:fe},be=u(a.Atanh,(e=>Math.atanh(e))),ge={kernelName:a.Atanh,backendName:"cpu",kernelFunc:be};function ye(e,t,n,r,s,o){const i=s.strideHeight,u=s.strideWidth,c=s.dilationHeight,l=s.dilationWidth,d=s.effectiveFilterHeight,p=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,m="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Object(a.buffer)(s.outShape,n),g=b.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],x=s.outShape[2]*s.outShape[3],v=s.outShape[3];for(let t=0;t<s.batchSize;++t){const n=t*y,a=t*r[0];for(let t=0;t<s.inChannels;++t)for(let b=0;b<s.outHeight;++b){const y=b*i-h,O=Math.max(0,y),k=Math.min(s.inHeight,d+y),w=n+b*x;for(let n=0;n<s.outWidth;++n){const i=n*u-f,d=Math.max(0,i),h=Math.min(s.inWidth,p+i);let b=m,y=0,x=0;for(let n=O;n<k;n+=c){const s=a+n*r[1];for(let n=d;n<h;n+=l){const a=e[s+n*r[2]+t];"max"===o&&a>b?b=a:"avg"===o&&(y+=a,x++)}if(isNaN(b))break}g[w+n*v+t]="avg"===o?y/x:b}}}return b}function xe(e,t,n,r,s=!1,o=!1){const i=Object(a.buffer)(r.outShape,"int32"),u=r.strideHeight,c=r.strideWidth,l=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,m=r.padInfo.left,b=Object(a.buffer)(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){const a=n*u-f;let g=a;for(;g<0;)g+=l;const y=Math.min(r.inHeight,p+a);for(let u=0;u<r.outWidth;++u){const p=u*c-m;let f=p;for(;f<0;)f+=d;const x=Math.min(r.inWidth,h+p);let v=Number.NEGATIVE_INFINITY,O=-1;for(let n=g;n<y;n+=l){const i=n-a;for(let a=f;a<x;a+=d){const u=a-p,c=b.get(e,n,a,t);c>v&&(v=c,O=s?o?((e*r.inHeight+n)*r.inWidth+a)*r.inChannels+t:(n*r.inWidth+a)*r.inChannels+t:i*h+u)}}i.set(O,e,n,u,t)}}return i}function ve(e,t,n,r,s,o){const i=s.strideDepth,u=s.strideHeight,c=s.strideWidth,l=s.dilationDepth,d=s.dilationHeight,p=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,m=s.effectiveFilterWidth,b=s.padInfo.front,g=s.padInfo.top,y=s.padInfo.left,x="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Object(a.buffer)(s.outShape,n),O=v.values,k=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],w=s.outShape[2]*s.outShape[3]*s.outShape[4],I=s.outShape[3]*s.outShape[4],S=s.outShape[4];for(let t=0;t<s.batchSize;++t){const n=t*k,a=t*r[0];for(let t=0;t<s.inChannels;++t)for(let v=0;v<s.outDepth;++v){const k=v*i-b;let N=k;for(;N<0;)N+=l;const T=Math.min(s.inDepth,h+k),j=n+v*w;for(let n=0;n<s.outHeight;++n){const i=n*u-g;let h=i;for(;h<0;)h+=d;const b=Math.min(s.inHeight,f+i),v=j+n*I;for(let n=0;n<s.outWidth;++n){const i=n*c-y;let u=i;for(;u<0;)u+=p;const f=Math.min(s.inWidth,m+i),g=v+n*S;let k=x,w=0,I=0;for(let n=N;n<T;n+=l){const s=a+n*r[1];for(let n=h;n<b;n+=d){const a=s+n*r[2];for(let n=u;n<f;n+=p){const s=e[a+n*r[3]+t];if("max"===o&&s>k?k=s:"avg"===o&&(w+=s,I++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}O[g+t]="avg"===o?w/I:k}}}}return v}const Oe={kernelName:a.AvgPool,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;s(o,"avgPool");const{filterSize:i,strides:u,pad:c,dimRoundingMode:l}=r;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${u} and dilations \'1\'`));const d=a.backend_util.computePool2DInfo(o.shape,i,u,1,c,l);let h;if(1===d.filterWidth&&1===d.filterHeight&&a.util.arraysEqual(d.inShape,d.outShape))h=p({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=a.util.computeStrides(o.shape),r=ye(e,o.shape,o.dtype,t,d,"avg");h=n.makeTensorInfo(d.outShape,o.dtype,r.values)}return h}};const ke={kernelName:a.AvgPool3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:u,pad:c,dimRoundingMode:l,dataFormat:d}=r;s(o,"avgPool3d");const p=a.backend_util.computePool3DInfo(o.shape,i,u,1,c,l,d),h=ve(n.data.get(o.dataId).values,o.shape,o.dtype,a.util.computeStrides(o.shape),p,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const we={kernelName:a.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r;s([o,i],"avgPool3DGrad");const p=a.backend_util.computePool3DInfo(i.shape,u,c,1,l,d),h=p.strideDepth,f=p.strideHeight,m=p.strideWidth,b=p.filterDepth,g=p.filterHeight,y=p.filterWidth,x=p.dilationDepth,v=p.dilationHeight,O=p.dilationWidth,k=p.effectiveFilterDepth,w=p.effectiveFilterHeight,I=p.effectiveFilterWidth,S=k-1-p.padInfo.front,N=I-1-p.padInfo.left,T=w-1-p.padInfo.top,j=Object(a.buffer)(i.shape,"float32"),$=1/(b*g*y),C=n.bufferSync(o);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inDepth;++n)for(let r=0;r<p.inHeight;++r)for(let a=0;a<p.inWidth;++a){const s=n-S,o=r-T,i=a-N;let u=0;for(let n=0;n<k;n+=x){const r=(s+n)/h;if(!(r<0||r>=p.outDepth||Math.floor(r)!==r))for(let n=0;n<w;n+=v){const a=(o+n)/f;if(!(a<0||a>=p.outHeight||Math.floor(a)!==a))for(let n=0;n<I;n+=O){const s=(i+n)/m;if(s<0||s>=p.outWidth||Math.floor(s)!==s)continue;u+=C.get(e,r,a,s,t)}}}j.set(u*$,e,n,r,a,t)}return n.makeTensorInfo(j.shape,j.dtype,j.values)}};const Ie={kernelName:a.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,u=i;s([o,i],"avgPoolGrad");const{filterSize:c,strides:l,pad:d}=r,p=a.backend_util.computePool2DInfo(u.shape,c,l,1,d),h=p.strideHeight,f=p.strideWidth,m=p.filterHeight,b=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,x=p.effectiveFilterHeight,v=p.effectiveFilterWidth,O=v-1-p.padInfo.left,k=x-1-p.padInfo.top,w=Object(a.buffer)(u.shape,"float32"),I=1/(m*b),S=n.data.get(o.dataId).values,N=Object(a.buffer)(o.shape,"float32",S);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inHeight;++n)for(let r=0;r<p.inWidth;++r){const a=n-k,s=r-O;let o=0;for(let n=0;n<x;n+=g){const r=(a+n)/h;if(!(r<0||r>=p.outHeight||Math.floor(r)!==r))for(let n=0;n<v;n+=y){const a=(s+n)/f;if(a<0||a>=p.outWidth||Math.floor(a)!==a)continue;o+=N.get(e,r,a,t)}}w.set(o*I,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const Se={kernelName:a.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,scale:i,offset:u,mean:c,variance:l}=t;a.util.assert(c.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),a.util.assert(null==u||c.shape.length===u.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),a.util.assert(null==i||c.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),s([o,c,l,i,u],"batchNorm");let{varianceEpsilon:d}=r;null==d&&(d=.001);const p=n.data.get(o.dataId).values,h=n.data.get(c.dataId).values,f=n.data.get(l.dataId).values,m=i?n.data.get(i.dataId).values:new Float32Array([1]),b=u?n.data.get(u.dataId).values:new Float32Array([0]),g=new Float32Array(p.length),y=b.length,x=m.length,v=f.length,O=h.length;let k=0,w=0,I=0,S=0;for(let e=0;e<p.length;++e)g[e]=b[k++]+(p[e]-h[w++])*m[I++]/Math.sqrt(f[S++]+d),k>=y&&(k=0),w>=O&&(w=0),I>=x&&(I=0),S>=v&&(S=0);return n.makeTensorInfo(o.shape,o.dtype,g)}};function Ne(e,t,n,r,s){const o=a.slice_util.isSliceContinous(r,t,n),i=a.util.sizeFromShape(n),u=a.util.computeStrides(r);if(o){const n=a.slice_util.computeFlatOffset(t,u);return"string"===s?e.slice(n,n+i):e.subarray(n,n+i)}const c="string"===s?a.backend_util.fromUint8ToStringArray(e):e,l=Object(a.buffer)(r,s,c),d=Object(a.buffer)(n,s);for(let e=0;e<d.size;++e){const n=d.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));d.set(l.get(...r),...n)}return"string"===s?a.backend_util.fromStringArrayToUint8(d.values):d.values}function Te(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,size:u}=r;s(o,"slice");const[c,l]=a.slice_util.parseSliceParams(o,i,u);a.slice_util.assertParamsValid(o,c,l);const d=Ne(n.data.get(o.dataId).values,c,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,d)}const je={kernelName:a.Slice,backendName:"cpu",kernelFunc:Te};const $e={kernelName:a.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,crops:u}=r;s([o],"batchToSpaceND");const c=i.reduce(((e,t)=>e*t)),l=a.backend_util.getReshaped(o.shape,i,c),d=a.backend_util.getPermuted(l.length,i.length),p=a.backend_util.getReshapedPermuted(o.shape,i,c),h=a.backend_util.getSliceBeginCoords(u,i.length),f=a.backend_util.getSliceSize(p,u,i.length),m=V({inputs:{x:o},backend:n,attrs:{shape:l}}),b=te({inputs:{x:m},backend:n,attrs:{perm:d}}),g=V({inputs:{x:b},backend:n,attrs:{shape:p}}),y=Te({inputs:{x:g},backend:n,attrs:{begin:h,size:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),y}};function Ce(e,t,n,r,s){const o=a.util.sizeFromShape(r),i=a.util.makeZerosTypedArray(s,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=s||(i[r]+=o>0?t[n]:1)}return i}function Ee(e,t,n,r=!1){const s=e.shape[0],o=e.shape[1],i=Object(a.buffer)([s,n],t.dtype);for(let a=0;a<s;a++)for(let s=0;s<o;s++){const o=e.get(a,s);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?i.set(1,a,o):t.size>0?i.set(i.get(a,o)+t.get(a,s),a,o):i.set(i.get(a,o)+1,a,o))}return i}const Ae={kernelName:a.Bincount,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o}=r,i=Ce(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,i)}};const Re={kernelName:a.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,u=a.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(i));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}},_e=I((e=>Math.ceil(e))),Fe=c(a.Ceil,_e),De={kernelName:a.Ceil,backendName:"cpu",kernelFunc:Fe},Me=u(a.ClipByValue,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Pe={kernelName:a.ClipByValue,backendName:"cpu",kernelFunc:Me},Le={kernelName:a.ComplexAbs,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(a.util.sizeFromShape(t.shape)),s=n.data.get(t.dataId),o=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values;for(let e=0;e<u.length;e++){const t=u[e],n=c[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};function Be(e,t,n,r){const s=a.util.getArrayFromDType(n,a.util.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=a.util.sizeFromShape(e.shape);s.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const o="string"===n?a.backend_util.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const a=n*t[1]+r;for(let t=0;t<e.shape[1];++t)s[a+t]=o[i++]}r+=e.shape[1]}))}return s}function ze(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const Ve={kernelName:a.Imag,backendName:"cpu",kernelFunc:ze};function We(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r,o=a.util.parseAxisParam(s,t[0].shape)[0];let i=a.backend_util.computeOutShape(t.map((e=>e.shape)),o);if(0===a.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const u=t.filter((e=>a.util.sizeFromShape(e.shape)>0));if(1===u.length)return p({inputs:{x:u[0]},backend:n});const c=u.map((e=>e.shape));if(a.backend_util.assertParamsConsistent(c,o),"complex64"===u[0].dtype){const e=u.map((e=>A({inputs:{input:e},backend:n}))),t=u.map((e=>ze({inputs:{input:e},backend:n}))),r=We({inputs:e,backend:n,attrs:{axis:o}}),a=We({inputs:t,backend:n,attrs:{axis:o}}),s=$({inputs:{real:r,imag:a},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),s}const l=u.map((e=>{const t=a.util.sizeFromShape(e.shape.slice(o));return V({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));i=a.backend_util.computeOutShape(l.map((e=>e.shape)),1);const h=1===l[0].shape[0],f=Be(d,i,t[0].dtype,h),m=a.backend_util.computeOutShape(u.map((e=>e.shape)),o),b=n.makeTensorInfo(m,t[0].dtype,f);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}const Ue={kernelName:a.Concat,backendName:"cpu",kernelFunc:We};function Ge(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}=r;s([o,i],"conv2d");const h=a.backend_util.convertConv2DDataFormat(l),f=a.backend_util.computeConv2DInfo(o.shape,i.shape,u,d,c,p,!1,h),m=f.filterHeight,b=f.filterWidth,g=f.dilationHeight,y=f.dilationWidth,x=f.padInfo.left,v=f.padInfo.top,O="channelsLast"===f.dataFormat,k=new a.TensorBuffer(f.outShape,o.dtype),w=a.util.computeStrides(o.shape),I=a.util.computeStrides(i.shape),S=w[0],N=O?w[1]:w[2],T=O?w[2]:1,j=O?1:w[1],$=k.strides[0],C=O?k.strides[1]:k.strides[2],E=O?k.strides[2]:1,A=O?1:k.strides[1],R=n.data.get(o.dataId).values,_=n.data.get(i.dataId).values,F=k.values;for(let e=0;e<f.batchSize;++e){const t=e*S,n=e*$;for(let e=0;e<f.outHeight;++e){const r=n+e*C,a=e*f.strideHeight-v;for(let e=0;e<m;++e){const n=a+e*g;if(n<0||n>=f.inHeight)continue;const s=e*I[0],o=t+n*N;for(let e=0;e<f.outWidth;++e){const t=r+e*E,n=e*f.strideWidth-x;for(let e=0;e<b;++e){const r=n+e*y;if(r<0||r>=f.inWidth)continue;const a=o+r*T;let i=s+e*I[1];for(let e=0;e<f.inChannels;++e){const n=R[a+e*j];for(let e=0;e<f.outChannels;++e)F[t+e*A]+=n*_[i+e];i+=f.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,F)}const He={kernelName:a.Conv2D,backendName:"cpu",kernelFunc:Ge};const qe={kernelName:a.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:u,pad:c,dataFormat:l,dimRoundingMode:d,filterShape:p}=r;s([o,i],"conv2dBackpropFilter");const h=a.backend_util.convertConv2DDataFormat(l),f=a.backend_util.computeConv2DInfo(o.shape,p,u,1,c,d,!1,h),{strideHeight:m,strideWidth:b,filterHeight:g,filterWidth:y}=f,x="channelsLast"===f.dataFormat,v=new a.TensorBuffer(f.filterShape,"float32"),O=f.padInfo.left,k=f.padInfo.top,w=n.data.get(o.dataId).values,I=n.data.get(i.dataId).values,S=new a.TensorBuffer(o.shape,o.dtype,w),N=new a.TensorBuffer(i.shape,i.dtype,I);for(let e=0;e<g;++e){const t=Math.max(0,Math.ceil((k-e)/m)),n=Math.min(f.outHeight,(f.inHeight+k-e)/m);for(let r=0;r<y;++r){const a=Math.max(0,Math.ceil((O-r)/b)),s=Math.min(f.outWidth,(f.inWidth+O-r)/b);for(let o=0;o<f.inChannels;++o)for(let i=0;i<f.outChannels;++i){let u=0;for(let c=0;c<f.batchSize;++c)for(let l=t;l<n;++l){const t=e+l*m-k;for(let e=a;e<s;++e){const n=r+e*b-O;u+=x?S.get(c,t,n,o)*N.get(c,l,e,i):S.get(c,o,t,n)*N.get(c,i,l,e)}}v.set(u,e,r,o,i)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const Ke={kernelName:a.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{inputShape:u,strides:c,pad:l,dataFormat:d,dimRoundingMode:p}=r;s([o,i],"conv2dBackpropInput");const h=a.util.computeStrides(i.shape),f=a.util.computeStrides(o.shape);let m=a.backend_util.convertConv2DDataFormat(d);const b=a.backend_util.computeConv2DInfo(u,i.shape,c,1,l,p,!1,m),g=new a.TensorBuffer(b.inShape,"float32"),y=g.values,x=n.data.get(o.dataId).values,v=n.data.get(i.dataId).values,[O,k,w]=h,{batchSize:I,filterHeight:S,filterWidth:N,inChannels:T,inHeight:j,inWidth:$,outChannels:C,outHeight:E,outWidth:A,strideHeight:R,strideWidth:_}=b;m=b.dataFormat;const F=S-1-b.padInfo.top,D=N-1-b.padInfo.left,M="channelsLast"===m,P=g.strides[0],L=M?g.strides[1]:g.strides[2],B=M?g.strides[2]:1,z=M?1:g.strides[1],V=f[0],W=M?f[1]:f[2],U=M?f[2]:1,G=M?1:f[1];for(let e=0;e<I;++e)for(let t=0;t<T;++t)for(let n=0;n<j;++n){const r=n-F,a=Math.max(0,Math.ceil(r/R)),s=Math.min(E,(S+r)/R);for(let o=0;o<$;++o){const i=o-D,u=Math.max(0,Math.ceil(i/_)),c=Math.min(A,(N+i)/_);let l=0;for(let n=a;n<s;++n){const a=n*R-r;for(let r=u;r<c;++r){const s=V*e+W*n+U*r,o=O*(S-1-a)+k*(N-1-(r*_-i))+w*t;for(let e=0;e<C;++e){l+=x[s+G*e]*v[o+e]}}}y[P*e+L*n+B*o+z*t]=l}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const Xe={kernelName:a.Conv3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:u,pad:c,dilations:l}=r;s([o,i],"conv3d");const d=a.backend_util.computeConv3DInfo(o.shape,i.shape,u,l,c),{filterDepth:p,filterHeight:h,filterWidth:f,dilationDepth:m,dilationHeight:b,dilationWidth:g,padInfo:y}=d,x=y.front,v=y.left,O=y.top,k=new a.TensorBuffer(d.outShape,o.dtype),w=n.data.get(o.dataId).values,I=n.data.get(i.dataId).values,S=k.values,N=a.util.computeStrides(o.shape),T=a.util.computeStrides(i.shape);for(let e=0;e<d.batchSize;++e){const t=e*N[0],n=e*k.strides[0];for(let e=0;e<d.outDepth;++e){const r=n+e*k.strides[1],a=e*d.strideDepth-x;for(let e=0;e<p;++e){const n=a+e*m;if(n<0||n>=d.inDepth)continue;const s=e*T[0],o=t+n*N[1];for(let e=0;e<d.outHeight;++e){const t=r+e*k.strides[2],n=e*d.strideHeight-O;for(let e=0;e<h;++e){const r=n+e*b;if(r<0||r>=d.inHeight)continue;const a=s+e*T[1],i=o+r*N[2];for(let e=0;e<d.outWidth;++e){const n=t+e*d.outChannels,r=e*d.strideWidth-v;for(let e=0;e<f;++e){const t=r+e*g;if(t<0||t>=d.inWidth)continue;const s=a+e*T[2],o=i+t*d.inChannels;let u=s;for(let e=0;e<d.inChannels;++e){const t=w[o+e];for(let e=0;e<d.outChannels;++e)S[n+e]+=t*I[u+e];u+=d.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};const Ye={kernelName:a.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:u,pad:c,filterShape:l}=r;s([o,i],"conv3dBackpropFilterV2");const d=a.util.computeStrides(o.shape),p=a.util.computeStrides(i.shape),h=a.backend_util.computeConv3DInfo(o.shape,l,u,1,c),f=h.strideDepth,m=h.strideHeight,b=h.strideWidth,g=h.filterDepth,y=h.filterHeight,x=h.filterWidth,v=new a.TensorBuffer(h.filterShape,"float32"),O=v.values,[k,w,I,S]=v.strides,N=n.data.get(i.dataId).values,[T,j,$,C]=p,E=n.data.get(o.dataId).values,[A,R,_,F]=d,D=h.padInfo.front,M=h.padInfo.left,P=h.padInfo.top;for(let e=0;e<g;++e){const t=Math.max(0,Math.ceil((D-e)/f)),n=Math.min(h.outDepth,(h.inDepth+D-e)/f),r=e*k;for(let a=0;a<y;++a){const s=Math.max(0,Math.ceil((P-a)/m)),o=Math.min(h.outHeight,(h.inHeight+P-a)/m),i=a*w+r;for(let r=0;r<x;++r){const u=Math.max(0,Math.ceil((M-r)/b)),c=Math.min(h.outWidth,(h.inWidth+M-r)/b),l=r*I+i;for(let i=0;i<h.inChannels;++i){const d=i*S+l;for(let l=0;l<h.outChannels;++l){let p=0;for(let d=0;d<h.batchSize;++d){const h=d*A,g=d*T;for(let d=t;d<n;++d){const t=(e+d*f-D)*R+h,n=d*j+g;for(let e=s;e<o;++e){const s=(a+e*m-P)*_+t,o=e*$+n;for(let e=u;e<c;++e){const t=e*C+o;p+=E[(r+e*b-M)*F+s+i]*N[t+l]}}}}O[d+l]=p}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const Qe={kernelName:a.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{pad:u,strides:c,inputShape:l}=r;s([o],"conv3dBackpropInputV2");const d=a.util.computeStrides(o.shape),p=a.util.computeStrides(i.shape),h=a.backend_util.computeConv3DInfo(l,i.shape,c,1,u),f=new a.TensorBuffer(h.inShape,"float32"),m=f.values,[b,g,y,x]=f.strides,v=n.data.get(o.dataId).values,[O,k,w,I]=d,S=n.data.get(i.dataId).values,[N,T,j,$]=p,{batchSize:C,filterDepth:E,filterHeight:A,filterWidth:R,inChannels:_,inDepth:F,inHeight:D,inWidth:M,outChannels:P,outDepth:L,outHeight:B,outWidth:z,strideDepth:V,strideHeight:W,strideWidth:U}=h,G=E-1-h.padInfo.front,H=A-1-h.padInfo.top,q=R-1-h.padInfo.left;for(let e=0;e<C;++e)for(let t=0;t<_;++t)for(let n=0;n<F;++n){const r=n-G,a=Math.max(0,Math.ceil(r/V)),s=Math.min(L,(E+r)/V);for(let o=0;o<D;++o){const i=o-H,u=Math.max(0,Math.ceil(i/W)),c=Math.min(B,(A+i)/W);for(let l=0;l<M;++l){const d=l-q,p=Math.max(0,Math.ceil(d/U)),h=Math.min(z,(R+d)/U);let f=0;for(let n=a;n<s;++n){const a=n*V-r;for(let r=u;r<c;++r){const s=r*W-i;for(let o=p;o<h;++o){const i=O*e+k*n+w*r+I*o,u=N*(E-1-a)+T*(A-1-s)+j*(R-1-(o*U-d))+$*t;for(let e=0;e<P;++e){f+=v[i+e]*S[u+e]}}}}m[b*e+g*n+y*o+x*l+t]=f}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},Ze=u(a.Cos,(e=>Math.cos(e))),Je={kernelName:a.Cos,backendName:"cpu",kernelFunc:Ze},et=u(a.Cosh,(e=>Math.cosh(e))),tt={kernelName:a.Cosh,backendName:"cpu",kernelFunc:et};const nt={kernelName:a.CropAndResize,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:s,boxes:o,boxInd:i}=t,{cropSize:u,method:c,extrapolationValue:l}=r,[d,p,h,f]=s.shape,m=o.shape[0],[b,g]=u,y=Object(a.buffer)([m,b,g,f],"float32"),x=n.data.get(o.dataId).values,v=n.data.get(i.dataId).values,O=n.data.get(s.dataId).values,k=a.util.computeStrides(s.shape),w=a.util.computeStrides(y.shape);for(let e=0;e<m;e++){const t=4*e,n=x[t],r=x[t+1],a=x[t+2],s=x[t+3],o=v[e];if(o>=d)continue;const i=b>1?(a-n)*(p-1)/(b-1):0,u=g>1?(s-r)*(h-1)/(g-1):0;for(let t=0;t<b;t++){const d=b>1?n*(p-1)+t*i:.5*(n+a)*(p-1);if(d<0||d>p-1)for(let n=0;n<g;n++)for(let r=0;r<f;r++){const a=r+n*w[2]+t*w[1]+e*w[0];y.values[a]=l}else if("bilinear"===c){const n=Math.floor(d),a=Math.ceil(d),i=d-n;for(let c=0;c<g;c++){const d=g>1?r*(h-1)+c*u:.5*(r+s)*(h-1);if(d<0||d>h-1){for(let n=0;n<f;n++){const r=n+c*w[2]+t*w[1]+e*w[0];y.values[r]=l}continue}const p=Math.floor(d),m=Math.ceil(d),b=d-p;for(let r=0;r<f;r++){let s=r+p*k[2]+n*k[1]+o*k[0];const u=O[s];s=r+m*k[2]+n*k[1]+o*k[0];const l=O[s];s=r+p*k[2]+a*k[1]+o*k[0];const d=O[s];s=r+m*k[2]+a*k[1]+o*k[0];const h=u+(l-u)*b,f=d+(O[s]-d)*b;s=r+c*w[2]+t*w[1]+e*w[0],y.values[s]=h+(f-h)*i}}}else for(let n=0;n<g;++n){const a=g>1?r*(h-1)+n*u:.5*(r+s)*(h-1);if(a<0||a>h-1){for(let r=0;r<f;r++){const a=r+n*w[2]+t*w[1]+e*w[0];y.values[a]=l}continue}const i=Math.round(a),c=Math.round(d);for(let r=0;r<f;r++){const a=r+i*k[2]+c*k[1]+o*k[0],s=r+n*w[2]+t*w[1]+e*w[0];y.values[s]=O[a]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const rt={kernelName:a.Cumsum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:u,reverse:c}=r;s(o,"cumsum");const l=a.backend_util.getAxesPermutation([i],o.shape.length);let d=o;null!=l&&(d=te({inputs:{x:o},backend:n,attrs:{perm:l}}));const p=a.backend_util.getInnerMostAxes(1,o.shape.length)[0];if(p!==d.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${d.shape.length-1} but got axis=${p}`);const h=Object(a.upcastType)(d.dtype,"int32"),f=a.util.makeZerosTypedArray(a.util.sizeFromShape(d.shape),h),m=n.data.get(d.dataId).values,b=d.shape[d.shape.length-1],g=c?(e,t)=>e+b-t-1:(e,t)=>e+t;for(let e=0;e<m.length;e+=b)for(let t=0;t<b;t++){const n=g(e,t);if(0===t)f[n]=u?0:m[n];else{const r=g(e,t-1);f[n]=u?m[r]+f[r]:m[n]+f[r]}}const y=n.makeTensorInfo(d.shape,h,f);if(null!=l){const e=te({inputs:{x:y},backend:n,attrs:{perm:a.backend_util.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(d),e}return y}};const at={kernelName:a.DenseBincount,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o,binaryOutput:i}=r;if(1===a.shape.length){const e=Ce(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,e)}if(2===a.shape.length){const e=Ee(n.bufferSync(a),n.bufferSync(s),o,i);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}};const st={kernelName:a.DepthToSpace,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockSize:o,dataFormat:i}=r;a.util.assert("NHWC"===i,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`));const u=s.shape[0],c=s.shape[1],l=s.shape[2],d=s.shape[3],p=c*o,h=l*o,f=d/(o*o),m=n.data.get(s.dataId).values,b=new Float32Array(u*p*h*f);let g=0;for(let e=0;e<u;++e)for(let t=0;t<p;++t){const n=Math.floor(t/o),r=t%o;for(let t=0;t<h;++t){const a=Math.floor(t/o),s=(r*o+t%o)*f;for(let t=0;t<f;++t){const r=t+s+d*(a+l*(n+c*e));b[g++]=m[r]}}}return n.makeTensorInfo([u,p,h,f],s.dtype,b)}};function ot(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:u,pad:c,dilations:l,dimRoundingMode:d}=r;s([o,i],"depthwiseConv2DNative");const p=a.util.computeStrides(o.shape),h=a.util.computeStrides(i.shape);let f=l;null==f&&(f=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,f),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations \'${f}\'`));const m=a.backend_util.computeConv2DInfo(o.shape,i.shape,u,f,c,d,!0),{filterHeight:b,filterWidth:g,dilationHeight:y,dilationWidth:x,padInfo:v}=m,O=v.left,k=v.top,w=m.outChannels/m.inChannels,I=new a.TensorBuffer(m.outShape,o.dtype),S=n.data.get(o.dataId).values,N=n.data.get(i.dataId).values,T=I.values;for(let e=0;e<m.batchSize;++e){const t=e*p[0],n=e*I.strides[0];for(let e=0;e<m.outHeight;++e){const r=n+e*I.strides[1],a=e*m.strideHeight-k;for(let e=0;e<b;++e){const n=a+e*y;if(n<0||n>=m.inHeight)continue;const s=e*h[0],o=t+n*p[1];for(let e=0;e<m.outWidth;++e){const t=r+e*I.strides[2],n=e*m.strideWidth-O;for(let e=0;e<g;++e){const r=n+e*x;if(r<0||r>=m.inWidth)continue;const a=s+e*h[1],i=o+r*m.inChannels;let u=t,c=a;for(let e=0;e<m.inChannels;++e){const t=S[i+e];for(let e=0;e<w;++e)T[u+e]+=t*N[c+e];u+=w,c+=w}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const it={kernelName:a.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:ot};const ut={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:u,dilations:c,pad:l,dimRoundingMode:d,filterShape:p}=r;s([o,i],"depthwiseConv2dNativeBackpropFilter");const h=a.backend_util.computeConv2DInfo(o.shape,p,u,c,l,d,!0),{strideHeight:f,strideWidth:m,filterHeight:b,filterWidth:g}=h,y=new a.TensorBuffer(h.filterShape,"float32"),x=h.padInfo.left,v=h.padInfo.top,O=h.outChannels/h.inChannels,k=n.data.get(o.dataId).values,w=new a.TensorBuffer(o.shape,o.dtype,k),I=n.data.get(i.dataId).values,S=new a.TensorBuffer(i.shape,i.dtype,I);for(let e=0;e<b;++e){const t=Math.max(0,Math.ceil((v-e)/f)),n=Math.min(h.outHeight,(h.inHeight+v-e)/f);for(let r=0;r<g;++r){const a=Math.max(0,Math.ceil((x-r)/m)),s=Math.min(h.outWidth,(h.inWidth+x-r)/m);for(let o=0;o<h.outChannels;++o){const i=Math.trunc(o/O),u=o%O;let c=0;for(let u=0;u<h.batchSize;++u)for(let l=t;l<n;++l){const t=e+l*f-v;for(let e=a;e<s;++e){const n=r+e*m-x;c+=w.get(u,t,n,i)*S.get(u,l,e,o)}}y.set(c,e,r,i,u)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const ct={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{strides:u,dilations:c,pad:l,dimRoundingMode:d,inputShape:p}=r;s([o,i],"depthwiseConv2DNativeBackpropInput");const h=a.util.computeStrides(o.shape),f=a.util.computeStrides(i.shape),m=a.backend_util.computeConv2DInfo(p,i.shape,u,c,l,d,!0),b=new a.TensorBuffer(m.inShape,"float32"),g=b.values,[y,x,v]=b.strides,O=n.data.get(o.dataId).values,[k,w,I]=h,S=n.data.get(i.dataId).values,[N,T,j]=f,{batchSize:$,filterHeight:C,filterWidth:E,inChannels:A,inHeight:R,inWidth:_,outChannels:F,outHeight:D,outWidth:M,strideHeight:P,strideWidth:L}=m,B=C-1-m.padInfo.top,z=E-1-m.padInfo.left,V=F/A;for(let e=0;e<$;++e)for(let t=0;t<A;++t)for(let n=0;n<R;++n){const r=n-B,a=Math.max(0,Math.ceil(r/P)),s=Math.min(D,(C+r)/P);for(let o=0;o<_;++o){const i=o-z,u=Math.max(0,Math.ceil(i/L)),c=Math.min(M,(E+i)/L);let l=0;for(let n=a;n<s;++n){const a=n*P-r;for(let r=u;r<c;++r){const s=k*e+w*n+I*r,o=N*(C-1-a)+T*(E-1-(r*L-i))+j*t;for(let e=0;e<V;++e){l+=O[s+(t*V+e)]*S[o+e]}}}g[y*e+x*n+v*o+t]=l}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const lt={kernelName:a.Diag,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,s=a.util.sizeFromShape(r.shape),o=n.data.get(r.dataId).values,i=Object(a.buffer)([s,s],r.dtype),u=i.values;for(let e=0;e<o.length;e++)u[e*s+e]=o[e];const c=[...r.shape,...r.shape];return n.makeTensorInfo(c,i.dtype,i.values)}},dt={kernelName:a.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:s}=e,{strides:o,pad:i,dilations:u}=n,c=t,l=c.data.get(r.dataId).values,d=r.shape.length,p=c.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:m,inWidth:b,inChannels:g,outHeight:y,outWidth:x,padInfo:v,strideHeight:O,strideWidth:k,filterHeight:w,filterWidth:I,dilationHeight:S,dilationWidth:N,outShape:T}=a.backend_util.computeDilation2DInfo(r.shape,s.shape,o,i,"NHWC",u),j=a.util.sizeFromShape(T),$=T.length,C=a.util.getArrayFromDType(r.dtype,j);for(let e=0;e<f;++e)for(let t=0;t<y;++t){const n=t*O-v.top;for(let o=0;o<x;++o){const i=o*k-v.left;for(let u=0;u<g;++u){let c=Number.MIN_SAFE_INTEGER;for(let t=0;t<w;++t){const o=n+t*S;if(o>=0&&o<m)for(let n=0;n<I;++n){const f=i+n*N;if(f>=0&&f<b){const i=a.util.locToIndex([e,o,f,u],d,a.util.computeStrides(r.shape)),m=a.util.locToIndex([t,n,u],h,a.util.computeStrides(s.shape)),b=l[i]+p[m];b>c&&(c=b)}}}C[a.util.locToIndex([e,t,o,u],$,a.util.computeStrides(T))]=c}}}return{dataId:c.write(a.util.toTypedArray(C,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}},pt={kernelName:a.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:s,dy:o}=e,{strides:i,pad:u,dilations:c}=n,l=t,d=a.util.toNestedArray(r.shape,l.data.get(r.dataId).values),p=a.util.toNestedArray(s.shape,l.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:m,inChannels:b,outHeight:g,outWidth:y,padInfo:x,strideHeight:v,strideWidth:O,filterHeight:k,filterWidth:w,dilationHeight:I,dilationWidth:S,outShape:N}=a.backend_util.computeDilation2DInfo(r.shape,s.shape,i,u,"NHWC",c);a.util.assert(o.rank===N.length,(()=>`Error in ${a.Dilation2DBackpropFilter}, dy must have the same rank as output ${N.length}, but got ${o.rank}`));const T=a.util.toNestedArray(N,l.data.get(o.dataId).values),j=a.util.makeZerosNestedTypedArray(s.shape,s.dtype);for(let e=0;e<h;++e)for(let t=0;t<g;++t){const n=t*v-x.top;for(let r=0;r<y;++r){const a=r*O-x.left;for(let s=0;s<b;++s){let o=Number.MIN_SAFE_INTEGER,i=0,u=0;for(let t=0;t<k;++t){const r=n+t*I;if(r>=0&&r<f)for(let n=0;n<w;++n){const c=a+n*S;if(c>=0&&c<m){const a=d[e][r][c][s]+p[t][n][s];a>o&&(o=a,i=t,u=n)}}}j[i][u][s]+=T[e][t][r][s]}}}return{dataId:l.write(a.util.toTypedArray(j,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},ht={kernelName:a.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:s,dy:o}=e,{strides:i,pad:u,dilations:c}=n,l=t,d=a.util.toNestedArray(r.shape,l.data.get(r.dataId).values),p=a.util.toNestedArray(s.shape,l.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:m,inChannels:b,outHeight:g,outWidth:y,padInfo:x,strideHeight:v,strideWidth:O,filterHeight:k,filterWidth:w,dilationHeight:I,dilationWidth:S,outShape:N}=a.backend_util.computeDilation2DInfo(r.shape,s.shape,i,u,"NHWC",c);a.util.assert(o.rank===N.length,(()=>`Error in ${a.Dilation2DBackpropInput}, dy must have the same rank as output ${N.length}, but got ${o.rank}`));const T=a.util.toNestedArray(N,l.data.get(o.dataId).values),j=a.util.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<h;++e)for(let t=0;t<g;++t){const n=t*v-x.top;for(let r=0;r<y;++r){const a=r*O-x.left;for(let s=0;s<b;++s){let o=Number.MIN_SAFE_INTEGER,i=n<0?0:n,u=a<0?0:a;for(let t=0;t<k;++t){const r=n+t*I;if(r>=0&&r<f)for(let n=0;n<w;++n){const c=a+n*S;if(c>=0&&c<m){const a=d[e][r][c][s]+p[t][n][s];a>o&&(o=a,i=r,u=c)}}}j[e][i][u][s]+=T[e][t][r][s]}}}return{dataId:l.write(a.util.toTypedArray(j,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},ft=b(((e,t)=>e*t)),mt=M(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),bt=D(a.Multiply,ft,mt),gt={kernelName:a.Multiply,backendName:"cpu",kernelFunc:bt};function yt(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:u}=r;let c;s(o,"sum"),c="bool"===o.dtype?_({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):p({inputs:{x:o},backend:n});const l=c.shape.length,d=a.util.parseAxisParam(i,c.shape),h=a.backend_util.getAxesPermutation(d,l);let f=d,m=c;null!=h&&(m=te({inputs:{x:c},backend:n,attrs:{perm:h}}),f=a.backend_util.getInnerMostAxes(f.length,l)),a.backend_util.assertAxesAreInnerMostDims("sum",f,m.shape.length);const[b,g]=a.backend_util.computeOutAndReduceShapes(m.shape,f);let y=E(n,b,a.backend_util.upcastType(m.dtype,"int32"));const x=a.util.sizeFromShape(g),v=n.data.get(y.dataId).values,O=n.data.get(m.dataId).values;for(let e=0;e<v.length;++e){const t=e*x;let n=0;for(let e=0;e<x;++e)n+=O[t+e];v[e]=n}if(u){const e=y;y=V({inputs:{x:y},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(y.shape,d)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(c),null!=h&&n.disposeIntermediateTensorInfo(m),y}const xt={kernelName:a.Sum,backendName:"cpu",kernelFunc:yt};const vt={kernelName:a.Einsum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:s}=r,o=t,{allDims:i,summedDims:u,idDims:c}=a.backend_util.decodeEinsumEquation(s,o.length);a.backend_util.checkEinsumDimSizes(i.length,c,o);const{path:l,steps:d}=a.backend_util.getEinsumComputePath(u,c),p=d.length;let h=null,f=i.length;const m=[];for(let e=0;e<p;++e){for(const t of d[e]){const{permutationIndices:e,expandDims:r}=a.backend_util.getEinsumPermutation(f,c[t]);let s;a.backend_util.isIdentityPermutation(e)?s=o[t]:(s=te({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),m.push(s));const i=s.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);a.util.arraysEqual(s.shape,i)||(s=V({inputs:{x:s},backend:n,attrs:{shape:i}}),m.push(s)),null===h?h=s:(h=bt({inputs:{a:s,b:h},backend:n}),m.push(h))}e<p-1&&(l[e]>=0&&(h=yt({inputs:{x:h},backend:n,attrs:{axis:l[e]-(i.length-f),keepDims:!1}}),m.push(h)),f--)}for(const e of m)e!==h&&n.disposeIntermediateTensorInfo(e);return h}};const Ot={kernelName:a.EluGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:o}=t;s([r,o],"eluGrad");const i=new Float32Array(a.util.sizeFromShape(o.shape)),u=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values;for(let e=0;e<u.length;++e){const t=u[e];i[e]=t>=1?c[e]:c[e]*(t+1)}return n.makeTensorInfo(o.shape,"float32",i)}},kt=b(((e,t)=>e===t?1:0)),wt=D(a.Equal,kt,null,"bool"),It={kernelName:a.Equal,backendName:"cpu",kernelFunc:wt},St=a.backend_util.ERF_P,Nt=a.backend_util.ERF_A1,Tt=a.backend_util.ERF_A2,jt=a.backend_util.ERF_A3,$t=a.backend_util.ERF_A4,Ct=a.backend_util.ERF_A5,Et=u(a.Erf,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+St*n);return t*(1-((((Ct*r+$t)*r+jt)*r+Tt)*r+Nt)*r*Math.exp(-n*n))})),At={kernelName:a.Erf,backendName:"cpu",kernelFunc:Et},Rt=I((e=>Math.exp(e))),_t=c(a.Exp,Rt,"float32"),Ft={kernelName:a.Exp,backendName:"cpu",kernelFunc:_t};function Dt(e){const{inputs:t,backend:n,attrs:r}=e,{input:s}=t,{dim:o}=r,i=s.shape.length,u=s.shape.slice();let c=o;return o<0&&(a.util.assert(-(i+1)<=o,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),c=i+o+1),u.splice(c,0,1),V({inputs:{x:s},backend:n,attrs:{shape:u}})}const Mt={kernelName:a.ExpandDims,backendName:"cpu",kernelFunc:Dt},Pt=I((e=>Math.expm1(e))),Lt=c(a.Expm1,Pt),Bt={kernelName:a.Expm1,backendName:"cpu",kernelFunc:Lt},zt=b(((e,t)=>e/t)),Vt=D(a.RealDiv,zt),Wt={kernelName:a.RealDiv,backendName:"cpu",kernelFunc:Vt},Ut=b(((e,t)=>e-t)),Gt=M(((e,t,n,r)=>({real:e-n,imag:t-r}))),Ht=D(a.Sub,Ut,Gt),qt={kernelName:a.Sub,backendName:"cpu",kernelFunc:Ht};function Kt(e,t,n){const r=e.shape,s=r[0],o=r[1],i=n.data.get(e.dataId),u=i.complexTensorInfos.real,c=i.complexTensorInfos.imag,l=[s,o],d=a.util.sizeFromShape(l),p=a.util.getTypedArrayFromDType("float32",d),h=a.util.getTypedArrayFromDType("float32",d);for(let e=0;e<s;e++){const r=Te({inputs:{x:u},backend:n,attrs:{begin:[e,0],size:[1,o]}}),s=Te({inputs:{x:c},backend:n,attrs:{begin:[e,0],size:[1,o]}}),i=$({inputs:{real:r,imag:s},backend:n}),{real:l,imag:d}=Xt(i,t,n),f=a.backend_util.mergeRealAndImagArrays(l,d);for(let t=0;t<o;t++){const n=a.backend_util.getComplexWithIndex(f,t);p[e*o+t]=n.real,h[e*o+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i)}const f=n.makeTensorInfo(l,"float32",p),m=n.makeTensorInfo(l,"float32",h),b=$({inputs:{real:f,imag:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),b}function Xt(e,t,n){const r=a.util.sizeFromShape(e.shape),s=n.data.get(e.dataId),o=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(0==((u=r)&u-1)){const s=Yt(o,i,r,t,n),u=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(u,"float32",s.real),t=n.makeTensorInfo(u,"float32",s.imag),o=n.makeTensorInfo([],"float32",a.util.createScalarValue(r,"float32")),i=p({inputs:{x:o},backend:n}),c=Wt.kernelFunc({inputs:{a:e,b:o},backend:n}),l=Wt.kernelFunc({inputs:{a:t,b:i},backend:n}),d=n.data.get(c.dataId).values,h=n.data.get(l.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),{real:d,imag:h}}return s}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let s=0;s<t;s++){let o=0,i=0;for(let r=0;r<t;r++){const u=a.backend_util.exponent(s*r,t,n),c=a.backend_util.getComplexWithIndex(e,r);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),a.backend_util.assignToTypedArray(r,o,i,s)}return r}(a.backend_util.mergeRealAndImagArrays(o,i),r,t);return a.backend_util.splitRealAndImagArrays(e)}var u}function Yt(e,t,n,r,s){if(1===n)return{real:e,imag:t};const o=a.backend_util.mergeRealAndImagArrays(e,t),i=n/2,u=a.backend_util.complexWithEvenIndex(o),c=u.real,l=u.imag,d=[c.length],p=s.makeTensorInfo(d,"float32",c),h=s.makeTensorInfo(d,"float32",l),f=$({inputs:{real:p,imag:h},backend:s}),m=a.backend_util.complexWithOddIndex(o),b=m.real,g=m.imag,y=[b.length],x=s.makeTensorInfo(y,"float32",b),v=s.makeTensorInfo(y,"float32",g),O=$({inputs:{real:x,imag:v},backend:s}),k=Yt(c,l,i,r,s),w=k.real,I=k.imag,S=[w.length],N=s.makeTensorInfo(S,"float32",w),T=s.makeTensorInfo(S,"float32",I),j=$({inputs:{real:N,imag:T},backend:s}),C=Yt(b,g,i,r,s),E=C.real,R=C.imag,_=[E.length],F=s.makeTensorInfo(_,"float32",E),D=s.makeTensorInfo(_,"float32",R),M=$({inputs:{real:F,imag:D},backend:s}),P=a.backend_util.exponents(n,r),L=[P.real.length],z=s.makeTensorInfo(L,"float32",P.real),V=s.makeTensorInfo(L,"float32",P.imag),W=$({inputs:{real:z,imag:V},backend:s}),U=bt({inputs:{a:W,b:M},backend:s}),G=B({inputs:{a:j,b:U},backend:s}),H=Ht({inputs:{a:j,b:U},backend:s}),q=A({inputs:{input:G},backend:s}),K=A({inputs:{input:H},backend:s}),X=ze({inputs:{input:G},backend:s}),Y=ze({inputs:{input:H},backend:s}),Q=We({inputs:[q,K],backend:s,attrs:{axis:0}}),Z=We({inputs:[X,Y],backend:s,attrs:{axis:0}}),J=s.data.get(Q.dataId).values,ee=s.data.get(Z.dataId).values;return s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(K),s.disposeIntermediateTensorInfo(Y),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(Z),{real:J,imag:ee}}const Qt={kernelName:a.FFT,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,s=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],i=V({inputs:{x:r},backend:n,attrs:{shape:[s/o,o]}}),u=Kt(i,!1,n),c=V({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}};function Zt(e){const{backend:t,attrs:n}=e,{shape:r,value:s,dtype:o}=n,i=o||a.util.inferDtype(s),u=a.util.getArrayFromDType(i,a.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(u,s),t.makeTensorInfo(r,i,u)}const Jt={kernelName:a.Fill,backendName:"cpu",kernelFunc:Zt};const en={kernelName:a.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,s=n,o=a.util.getTypedArrayFromDType(r.dtype,a.util.sizeFromShape(r.shape)),[i,u,c,l]=r.shape,d=s.data.get(r.dataId).values;for(let e=0;e<i;e++){const t=e*c*u*l;for(let e=0;e<u;e++){const n=e*(c*l);for(let e=0;e<c;e++){const r=e*l;for(let a=0;a<l;a++){const s=Math.round(c-e-1),i=t+n+r+a;let u=d[i];if(s>=0&&s<c){u=d[t+n+s*l+a]}o[i]=u}}}}return{dataId:s.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},tn=I((e=>Math.floor(e))),nn=c(a.Floor,tn),rn={kernelName:a.Floor,backendName:"cpu",kernelFunc:nn},an=b(((e,t)=>Math.floor(e/t))),sn=D(a.FloorDiv,an,null,"int32"),on={kernelName:a.FloorDiv,backendName:"cpu",kernelFunc:sn};const un={kernelName:a.FusedConv2D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:o,preluActivationWeights:i}=t,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let m=Ge({inputs:{x:a,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(o){const e=m;m=B({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=j(n,m,h,i,f),n.disposeIntermediateTensorInfo(e)}return m}};const cn={kernelName:a.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:o,preluActivationWeights:i}=t,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let m=ot({inputs:{x:a,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(o){const e=m;m=B({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=j(n,m,h,i,f),n.disposeIntermediateTensorInfo(e)}return m}};function ln(e,t,n,r,s,o,i,u,c){const l=Object(a.buffer)([r,o],n);for(let n=0;n<r;n++){const r=[];let a=0;for(let t=0;t<s;t++){const o=e[n*s+t];a+=o*i[t],r.push(o)}if(a<0||a>=c/o)throw new Error(`Invalid indices: ${r} does not index into ${u}`);for(let e=0;e<o;e++)l.values[n*o+e]=t.get(...t.indexToLoc(a*o+e))}return l}const dn={kernelName:a.GatherNd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:s}=t,o=a.util.sizeFromShape(r.shape),i=s.shape,u=i[i.length-1],[c,l,d,p]=a.backend_util.prepareAndValidate(r,s);if(0===l)return n.makeTensorInfo(c,r.dtype,[]);const h=ln(n.data.get(s.dataId).values,n.bufferSync(r),r.dtype,l,u,d,p,r.shape,o);return n.makeTensorInfo(c,r.dtype,h.values)}};function pn(e,t,n){const r=Object(a.buffer)(n,e.dtype);for(let n=0;n<r.size;++n){const a=r.indexToLoc(n).slice(),s=a[0],o=a[2],i=t.locToIndex([s,o]);a[2]=t.values[i];const u=e.locToIndex(a);r.values[n]=e.values[u]}return r}const hn={kernelName:a.GatherV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:i}=t,{axis:u,batchDims:c}=r;s([o,i],"gatherV2");const l=a.util.parseAxisParam(u,o.shape)[0],d=n.data.get(i.dataId).values,p=o.shape[l];for(let e=0;e<d.length;++e){const t=d[e];a.util.assert(t<=p-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${p-1}]`))}let h=c;null==c&&(h=0);const f=a.util.sizeFromShape(i.shape),m=a.backend_util.segment_util.collectGatherOpShapeInfo(o,i,l,h),b=V({inputs:{x:o},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=V({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,f/m.batchSize]}}),y=[m.batchSize,m.outerSize,f/m.batchSize,m.sliceSize],x=n.bufferSync(g),v=pn(n.bufferSync(b),x,y);return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,v.dtype,v.values)}},fn=b(((e,t)=>e>t?1:0)),mn=D(a.Greater,fn,null,"bool"),bn={kernelName:a.Greater,backendName:"cpu",kernelFunc:mn},gn=b(((e,t)=>e>=t?1:0)),yn=D(a.GreaterEqual,gn,null,"bool"),xn={kernelName:a.GreaterEqual,backendName:"cpu",kernelFunc:yn};const vn={kernelName:a.IFFT,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,s=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],i=V({inputs:{x:r},backend:n,attrs:{shape:[s/o,o]}}),u=Kt(i,!0,n),c=V({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},On=u(a.IsFinite,(e=>Number.isFinite(e)?1:0),"bool"),kn={kernelName:a.IsFinite,backendName:"cpu",kernelFunc:On},wn=u(a.IsInf,(e=>Math.abs(e)===1/0?1:0),"bool"),In={kernelName:a.IsInf,backendName:"cpu",kernelFunc:wn},Sn=u(a.IsNan,(e=>Number.isNaN(e)?1:0),"bool"),Nn={kernelName:a.IsNan,backendName:"cpu",kernelFunc:Sn},Tn=b(((e,t)=>e<t?1:0)),jn=D(a.Less,Tn,null,"bool"),$n={kernelName:a.Less,backendName:"cpu",kernelFunc:jn},Cn=b(((e,t)=>e<=t?1:0)),En=D(a.LessEqual,Cn,null,"bool"),An={kernelName:a.LessEqual,backendName:"cpu",kernelFunc:En};function Rn(e,t,n){const r=(t-e)/(n-1),s=a.util.makeZerosTypedArray(n,"float32");s[0]=e;for(let e=1;e<s.length;e++)s[e]=s[e-1]+r;return s}const _n={kernelName:a.LinSpace,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,o=Rn(r,a,s);return t.makeTensorInfo([o.length],"float32",o)}},Fn=I((e=>Math.log(e))),Dn=c(a.Log,Fn),Mn={kernelName:a.Log,backendName:"cpu",kernelFunc:Dn},Pn=u(a.Log1p,(e=>Math.log1p(e))),Ln={kernelName:a.Log1p,backendName:"cpu",kernelFunc:Pn},Bn=b(((e,t)=>e&&t)),zn=D(a.LogicalAnd,Bn,null,"bool"),Vn={kernelName:a.LogicalAnd,backendName:"cpu",kernelFunc:zn},Wn=u(a.LogicalNot,(e=>e?0:1),"bool"),Un={kernelName:a.LogicalNot,backendName:"cpu",kernelFunc:Wn},Gn=b(((e,t)=>e||t)),Hn=D(a.LogicalOr,Gn,null,"bool"),qn={kernelName:a.LogicalOr,backendName:"cpu",kernelFunc:Hn};const Kn={kernelName:a.LRN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:i,bias:u,alpha:c,beta:l}=r;s(o,"LRN");const d=o.shape[3],p=d-1,h=n.data.get(o.dataId).values,f=a.util.sizeFromShape(o.shape),m=new Float32Array(f);function b(e){const t=e%d;let n=e-t+Math.max(0,t-i);const r=e-t+Math.min(t+i,p);let a=0;for(;n<=r;n++){const e=h[n];a+=e*e}return a}for(let e=0;e<f;e++){const t=b(e),n=h[e]*Math.pow(u+c*t,-l);m[e]=n}return n.makeTensorInfo(o.shape,o.dtype,m)}};const Xn={kernelName:a.LRNGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,y:i,dy:u}=t,{depthRadius:c,bias:l,alpha:d,beta:p}=r;s(u,"LRNGrad");const h=a.util.sizeFromShape(u.shape),f=u.shape[3],m=n.data.get(u.dataId).values,b=n.data.get(o.dataId).values,g=n.data.get(i.dataId).values,y=new Float32Array(h),x=h;for(let e=0;e<x;e++){const t=e%f,n=e-t+Math.max(0,t-c),r=e-t+Math.min(f,t+c+1);let a=0;for(let e=n;e<r;e++)a+=Math.pow(b[e],2);a=d*a+l;for(let t=n;t<r;t++){let n=-2*d*p*b[t]*g[e]/a;e===t&&(n+=Math.pow(a,-p)),n*=m[e],y[t]+=n}}return n.makeTensorInfo(u.shape,o.dtype,y)}};function Yn(e,t,n,r){const s=a.util.getTypedArrayFromDType(r,a.util.sizeFromShape(n));for(let n=0;n<s.length;++n){const r=n*t;let a=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>a)&&(a=t)}s[n]=a}return s}function Qn(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:i,keepDims:u}=r,c=n;let l=o.shape;const d=l.length,p=a.util.parseAxisParam(i,l);let h=p;const f=a.backend_util.getAxesPermutation(h,d);let m=c.data.get(o.dataId).values;if(null!=f){const e=new Array(d);for(let t=0;t<e.length;t++)e[t]=l[f[t]];m=ee(m,l,o.dtype,f,e),h=a.backend_util.getInnerMostAxes(h.length,d),l=e}s(o,"max"),a.backend_util.assertAxesAreInnerMostDims("max",h,d);const[b,g]=a.backend_util.computeOutAndReduceShapes(l,h),y=Yn(m,a.util.sizeFromShape(g),b,o.dtype),x=c.write(y,b,o.dtype);let v=b;if(u){v=a.backend_util.expandShapeToKeepDim(b,p)}return{dataId:x,shape:v,dtype:o.dtype}}const Zn={kernelName:a.Max,backendName:"cpu",kernelFunc:Qn},Jn=b(((e,t)=>Math.max(e,t))),er=D(a.Maximum,Jn),tr={kernelName:a.Maximum,backendName:"cpu",kernelFunc:er};const nr={kernelName:a.MaxPool,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;s(o,"maxPool");const{filterSize:i,strides:u,pad:c,dimRoundingMode:l}=r;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${u} and dilations \'1\'`));const d=a.backend_util.computePool2DInfo(o.shape,i,u,1,c,l);let h;if(1===d.filterWidth&&1===d.filterHeight&&a.util.arraysEqual(d.inShape,d.outShape))h=p({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=a.util.computeStrides(o.shape),r=ye(e,o.shape,o.dtype,t,d,"max");h=n.makeTensorInfo(d.outShape,o.dtype,r.values)}return h}};const rr={kernelName:a.MaxPool3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:u,pad:c,dimRoundingMode:l,dataFormat:d}=r;s(o,"maxPool3d");const p=a.backend_util.computePool3DInfo(o.shape,i,u,1,c,l,d),h=ve(n.data.get(o.dataId).values,o.shape,o.dtype,a.util.computeStrides(o.shape),p,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const ar={kernelName:a.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r;s([o,i],"maxPool3DGrad");const p=a.backend_util.computePool3DInfo(i.shape,u,c,1,l,d),h=function(e,t){const n=Object(a.buffer)(t.outShape,"int32"),r=t.strideDepth,s=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,m=t.padInfo.left;for(let a=0;a<t.batchSize;++a)for(let b=0;b<t.inChannels;++b)for(let g=0;g<t.outDepth;++g){const y=g*r-h;let x=y;for(;x<0;)x+=i;const v=Math.min(t.inDepth,l+y);for(let r=0;r<t.outHeight;++r){const l=r*s-f;let h=l;for(;h<0;)h+=u;const O=Math.min(t.inHeight,d+l);for(let s=0;s<t.outWidth;++s){const f=s*o-m;let k=f;for(;k<0;)k+=c;const w=Math.min(t.inWidth,p+f);let I=Number.NEGATIVE_INFINITY,S=-1;for(let t=x;t<v;t+=i){const n=t-y;for(let r=h;r<O;r+=u){const s=r-l;for(let o=k;o<w;o+=c){const i=o-f,u=e.get(a,t,r,o,b);u>=I&&(I=u,S=n*d*p+s*d+i)}}}n.set(S,a,g,r,s,b)}}}return n}(n.bufferSync(i),p),f=p.strideDepth,m=p.strideHeight,b=p.strideWidth,g=p.dilationDepth,y=p.dilationHeight,x=p.dilationWidth,v=p.effectiveFilterDepth,O=p.effectiveFilterHeight,k=p.effectiveFilterWidth,w=v-1-p.padInfo.front,I=k-1-p.padInfo.left,S=O-1-p.padInfo.top,N=Object(a.buffer)(i.shape,"float32"),T=n.bufferSync(o);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inDepth;++n)for(let r=0;r<p.inHeight;++r)for(let a=0;a<p.inWidth;++a){const s=n-w,o=r-S,i=a-I;let u=0;for(let n=0;n<v;n+=g){const r=(s+n)/f;if(!(r<0||r>=p.outDepth||Math.floor(r)!==r))for(let a=0;a<O;a+=y){const s=(o+a)/m;if(!(s<0||s>=p.outHeight||Math.floor(s)!==s))for(let o=0;o<k;o+=x){const c=(i+o)/b;if(c<0||c>=p.outWidth||Math.floor(c)!==c)continue;const l=v*O*k-1-h.get(e,r,s,c,t)===n*O*k+a*k+o?1:0;if(0===l)continue;u+=T.get(e,r,s,c,t)*l}}}N.set(u,e,n,r,a,t)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};const sr={kernelName:a.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i,output:u}=t,c=i;s([i,u],"maxPoolGrad");const{filterSize:l,strides:d,pad:p,dimRoundingMode:h}=r,f=a.backend_util.computePool2DInfo(c.shape,l,d,1,p,h),m=n.data.get(c.dataId).values,b=Object(a.buffer)(f.outShape,c.dtype,xe(m,c.shape,c.dtype,f).values),g=f.strideHeight,y=f.strideWidth,x=f.dilationHeight,v=f.dilationWidth,O=f.effectiveFilterHeight,k=f.effectiveFilterWidth,w=k-1-f.padInfo.left,I=O-1-f.padInfo.top,S=Object(a.buffer)(c.shape,"float32"),N=n.data.get(o.dataId).values,T=Object(a.buffer)(o.shape,"float32",N);for(let e=0;e<f.batchSize;++e)for(let t=0;t<f.inChannels;++t)for(let n=0;n<f.inHeight;++n)for(let r=0;r<f.inWidth;++r){const a=n-I,s=r-w;let o=0;for(let n=0;n<O;n+=x){const r=(a+n)/g;if(!(r<0||r>=f.outHeight||Math.floor(r)!==r))for(let a=0;a<k;a+=v){const i=(s+a)/y;if(i<0||i>=f.outWidth||Math.floor(i)!==i)continue;const u=O*k-1-b.get(e,r,i,t)===n*k+a?1:0;if(0===u)continue;o+=T.get(e,r,i,t)*u}}S.set(o,e,n,r,t)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const or={kernelName:a.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:o,strides:i,pad:u,includeBatchInIndex:c}=t,l=n;s(r,"MaxPoolWithArgmax");const d=l.data.get(r.dataId).values,p=a.backend_util.computePool2DInfo(r.shape,o,i,[1,1],u),[h,f]=function(e,t,n,r,s){const o=ye(e,0,n,a.util.computeStrides(t),s,"max"),i=xe(e,t,n,s,!0,r);return[o.values,i.values]}(d,r.shape,r.dtype,c,p),m=l.write(h,p.outShape,r.dtype),b=l.write(f,p.outShape,r.dtype);return[{dataId:m,shape:p.outShape,dtype:r.dtype},{dataId:b,shape:p.outShape,dtype:"int32"}]}};const ir={kernelName:a.Mean,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:i}=r,u=a.util.parseAxisParam(o,s.shape),c=a.backend_util.computeOutAndReduceShapes(s.shape,u)[1],l=a.util.sizeFromShape(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([l]));d.push(p);const h=_({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(h);const f=Vt({inputs:{a:h,b:p},backend:n});d.push(f);const m=yt({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:i}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}};const ur={kernelName:a.Min,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:u}=r;s(o,"min");const c=a.util.parseAxisParam(i,o.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,o.shape.length);let p=o;null!=d&&(p=te({inputs:{x:o},backend:n,attrs:{perm:d}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",l,p.shape.length);const[h,f]=a.backend_util.computeOutAndReduceShapes(p.shape,l),m=a.util.sizeFromShape(f),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(h),p.dtype),g=n.data.get(p.dataId).values;for(let e=0;e<b.length;++e){const t=e*m;let n=g[t];for(let e=0;e<m;++e){const r=g[t+e];(Number.isNaN(r)||r<n)&&(n=r)}b[e]=n}null!=d&&n.disposeIntermediateTensorInfo(p);const y=n.makeTensorInfo(h,p.dtype,b);if(u){const e=V({inputs:{x:y},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(h,c)}});return n.disposeIntermediateTensorInfo(y),e}return y}},cr=b(((e,t)=>Math.min(e,t))),lr=D(a.Minimum,cr),dr={kernelName:a.Minimum,backendName:"cpu",kernelFunc:lr};const pr={kernelName:a.MirrorPad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,mode:u}=r;s(o,"mirrorPad");const c=i.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=i.map((e=>e[0])),d=i.map(((e,t)=>e[0]+o.shape[t])),p="reflect"===u?0:1,h=n.data.get(o.dataId).values,f=o.shape.length,m=a.util.computeStrides(o.shape),b=a.util.sizeFromShape(c),g=c.length,y=a.util.computeStrides(c),x=a.util.getTypedArrayFromDType(o.dtype,b);for(let e=0;e<b;e++){let t=a.util.indexToLoc(e,g,y);for(let e=0;e<g;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-p:t[e]>=d[e]&&(t[e]=2*(d[e]-1)-t[e]+p);t=t.map(((e,t)=>e-l[t]));const n=a.util.locToIndex(t,f,m);x[e]=h[n]}return{dataId:n.write(x,c,o.dtype),shape:c,dtype:o.dtype}}},hr=b(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),fr=D(a.Mod,hr),mr={kernelName:a.Mod,backendName:"cpu",kernelFunc:fr};var br=n(89);function gr(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{dim:o}=r,i=s.shape.length;let u=o;if(-1===u&&(u=i-1),u!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${u}`);const c=a.util.parseAxisParam([u],s.shape),l=Qn({inputs:{x:s},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),d=a.backend_util.expandShapeToKeepDim(l.shape,c),p=V({inputs:{x:l},backend:n,attrs:{shape:d}}),h=Ht({inputs:{a:s,b:p},backend:n}),f=_t({inputs:{x:h},backend:n}),m=yt({inputs:{x:f},backend:n,attrs:{axis:c,keepDims:!1}}),b=V({inputs:{x:m},backend:n,attrs:{shape:d}}),g=Vt({inputs:{a:f,b:b},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),g}const yr={kernelName:a.Softmax,backendName:"cpu",kernelFunc:gr};const xr={kernelName:a.Multinomial,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:i,seed:u,normalized:c}=r;s(o,"multinomial");const l=c?o:gr({inputs:{logits:o},backend:n,attrs:{dim:-1}}),d=l.shape[0],p=l.shape[1],h=n.data.get(l.dataId).values,f=[d,i],m=a.util.makeZerosTypedArray(a.util.sizeFromShape(f),"int32");for(let e=0;e<d;++e){const t=e*p,n=new Float32Array(p-1);n[0]=h[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+h[t+e];const r=br.alea(u.toString()),a=e*i;for(let e=0;e<i;++e){const t=r();m[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){m[a+e]=r;break}}}return c||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",m)}};function vr(e,t,n){const r=a.util.createScalarValue(-1,n);return ft([],t,r,e,n)}const Or={kernelName:a.Neg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;s(r,"neg");const a=n.data.get(r.dataId).values,[o,i]=vr(a,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,o)}},kr=a.kernel_impls.nonMaxSuppressionV3Impl;const wr={kernelName:a.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c}=r;s(a,"NonMaxSuppression");const l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:p}=kr(l,d,i,u,c);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},Ir=a.kernel_impls.nonMaxSuppressionV4Impl;const Sr={kernelName:a.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c,padToMaxOutputSize:l}=r;s(a,"NonMaxSuppressionPadded");const d=n.data.get(a.dataId).values,p=n.data.get(o.dataId).values,{selectedIndices:h,validOutputs:f}=Ir(d,p,i,u,c,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},Nr=a.kernel_impls.nonMaxSuppressionV5Impl;const Tr={kernelName:a.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c,softNmsSigma:l}=r;s(a,"NonMaxSuppressionWithScore");const d=n.data.get(a.dataId).values,p=n.data.get(o.dataId).values,h=i,f=u,m=c,b=l,{selectedIndices:g,selectedScores:y}=Nr(d,p,h,f,m,b);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},jr=b(((e,t)=>e!==t?1:0)),$r=D(a.NotEqual,jr,null,"bool"),Cr={kernelName:a.NotEqual,backendName:"cpu",kernelFunc:$r};const Er={kernelName:a.OneHot,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{depth:i,onValue:u,offValue:c}=r;s(o,"oneHot");const l=a.util.sizeFromShape(o.shape),d=new Float32Array(l*i);d.fill(c);const p=n.data.get(o.dataId).values;for(let e=0;e<l;++e)p[e]>=0&&p[e]<i&&(d[e*i+p[e]]=u);return n.makeTensorInfo([...o.shape,i],"int32",d)}};function Ar(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=A({inputs:{input:r},backend:n}),t=Ar({inputs:{x:e},backend:n}),a=ze({inputs:{input:r},backend:n}),s=Ar({inputs:{x:a},backend:n}),o=$({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}return Zt({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Rr={kernelName:a.ZerosLike,backendName:"cpu",kernelFunc:Ar};const _r={kernelName:a.OnesLike,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=A({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=ze({inputs:{input:a},backend:r}),o=Ar({inputs:{x:s},backend:r}),i=$({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),i}return Zt({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function Fr(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(1===t.length)return Dt({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const o=t[0].shape,i=t[0].dtype;t.forEach((e=>{a.util.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const u=[],c=We({inputs:t.map((e=>{const t=Dt({inputs:{input:e},backend:n,attrs:{dim:s}});return u.push(t),t})),backend:n,attrs:{axis:s}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const Dr={kernelName:a.Pack,backendName:"cpu",kernelFunc:Fr};const Mr={kernelName:a.PadV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,constantValue:u}=r;s(o,"pad");const c=i.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=i.map((e=>e[0])),d=n.data.get(o.dataId).values,p=a.util.sizeFromShape(o.shape),h=o.shape.length,f=a.util.computeStrides(o.shape),m=a.util.sizeFromShape(c),b=c.length,g=a.util.computeStrides(c),y=a.util.getTypedArrayFromDType(o.dtype,m);0!==u&&y.fill(u);for(let e=0;e<p;e++){const t=a.util.indexToLoc(e,h,f).map(((e,t)=>e+l[t]));y[a.util.locToIndex(t,b,g)]=d[e]}return{dataId:n.write(y,c,o.dtype),shape:c,dtype:o.dtype}}},Pr=b(((e,t)=>Math.pow(e,t))),Lr=D(a.Pow,Pr),Br={kernelName:a.Pow,backendName:"cpu",kernelFunc:Lr};function zr(e,t,n,r){const[s,o]=a.backend_util.computeOutAndReduceShapes(e,r),i=Object(a.upcastType)(t,"int32"),u=a.util.makeZerosTypedArray(a.util.sizeFromShape(s),i),c=a.util.sizeFromShape(o);for(let e=0;e<u.length;++e){const t=e*c;let r=1;for(let e=0;e<c;++e)r*=n[t+e];u[e]=r}return{outVals:u,outShape:s,outDtype:i}}const Vr={kernelName:a.Prod,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:u}=r;s(o,"prod");const c=o.shape.length,l=a.util.parseAxisParam(i,o.shape),d=a.backend_util.getAxesPermutation(l,c);let p=l,h=o;const f=[];null!=d&&(h=te({inputs:{x:o},backend:n,attrs:{perm:d}}),f.push(h),p=a.backend_util.getInnerMostAxes(p.length,c));const m=n.data.get(h.dataId).values,{outVals:b,outShape:g,outDtype:y}=zr(h.shape,h.dtype,m,p);let x=g;return u&&(x=a.backend_util.expandShapeToKeepDim(g,l)),f.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(x,y,b)}};function Wr(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return a.util.makeZerosTypedArray(0,r);const s=Math.abs(Math.ceil((t-e)/n)),o=a.util.makeZerosTypedArray(s,r);t<e&&1===n&&(n=-1),o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+n;return o}const Ur={kernelName:a.Range,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:s,step:o}=n,i=Wr(r,a,o,s);return t.makeTensorInfo([i.length],s,i)}},Gr=u(a.Reciprocal,(e=>1/e)),Hr={kernelName:a.Reciprocal,backendName:"cpu",kernelFunc:Gr};const qr={kernelName:a.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:u,size:c}=r;s(o,"resizeBilinear");const l=a.util.computeStrides(o.shape),[d,p]=c,[h,f,m,b]=o.shape,g=n.data.get(o.dataId).values,y=new Float32Array(a.util.sizeFromShape([h,d,p,b])),x=[i&&d>1?f-1:f,i&&p>1?m-1:m],v=[i&&d>1?d-1:d,i&&p>1?p-1:p];let O=0;const k=x[0]/v[0],w=x[1]/v[1];for(let e=0;e<h;e++)for(let t=0;t<d;t++){let n;n=u?k*(t+.5)-.5:k*t;const r=Math.max(0,Math.floor(n)),a=n-r,s=Math.min(f-1,Math.ceil(n)),o=e*l[0]+r*l[1],i=e*l[0]+s*l[1];for(let e=0;e<p;e++){let t;t=u?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,s=Math.min(m-1,Math.ceil(t)),c=o+n*l[2],d=i+n*l[2],p=o+s*l[2],h=i+s*l[2];for(let e=0;e<b;e++){const t=g[c+e],n=g[d+e],s=t+(g[p+e]-t)*r,o=s+(n+(g[h+e]-n)*r-s)*a;y[O++]=o}}}return n.makeTensorInfo([h,d,p,b],"float32",y)}};const Kr={kernelName:a.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:u}=r;s([i,o],"resizeBilinearGrad");const c=a.util.computeStrides(o.shape),[l,d,p,h]=o.shape,[,f,m]=i.shape,b=new Float32Array(l*d*p*h),g=[u&&f>1?d-1:d,u&&m>1?p-1:p],y=[u&&f>1?f-1:f,u&&m>1?m-1:m],x=g[0]/y[0],v=g[1]/y[1],O=n.data.get(i.dataId).values;let k=0;for(let e=0;e<l;e++){const t=e*c[0];for(let e=0;e<f;e++){const n=e*x,r=Math.floor(n),a=Math.min(Math.ceil(n),d-1),s=t+r*c[1],o=t+a*c[1],i=n-r,u=1-i;for(let e=0;e<m;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),p-1),a=t-n,l=1-a,d=s+n*c[2],f=s+r*c[2],m=o+n*c[2],g=o+r*c[2],y=u*l,x=u*a,w=i*l,I=i*a;for(let e=0;e<h;e++){const t=O[k++];b[d+e]+=t*y,b[f+e]+=t*x,b[m+e]+=t*w,b[g+e]+=t*I}}}}return n.makeTensorInfo([l,p,d,h],"float32",b)}};const Xr={kernelName:a.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:u,size:c}=r;s(o,"resizeNearestNeighbor");const l=a.util.computeStrides(o.shape),[d,p]=c,[h,f,m,b]=o.shape,g=n.data.get(o.dataId).values,y=new Float32Array(h*d*p*b),x=[i&&d>1?f-1:f,i&&p>1?m-1:m],v=[i&&d>1?d-1:d,i&&p>1?p-1:p],O=x[0]/v[0],k=x[1]/v[1];let w=0;for(let e=0;e<h;e++){const t=e*l[0];for(let e=0;e<d;e++){const n=u?O*(e+.5):O*e;let r=Math.min(f-1,i?Math.round(n):Math.floor(n));u&&(r=Math.max(0,r));const a=t+r*l[1];for(let e=0;e<p;e++){const t=u?k*(e+.5):k*e;let n=Math.min(m-1,i?Math.round(t):Math.floor(t));u&&(n=Math.max(0,n));const r=a+n*l[2];for(let e=0;e<b;e++){const t=g[r+e];y[w++]=t}}}}return n.makeTensorInfo([h,d,p,b],o.dtype,y)}};const Yr={kernelName:a.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:u}=r;s([i,o],"resizeNearestNeighborGrad");const c=a.util.computeStrides(o.shape),l=a.util.computeStrides(i.shape),[d,p,h,f]=o.shape,[,m,b]=i.shape,g=new Float32Array(d*p*h*f),y=n.data.get(i.dataId).values,x=[u&&m>1?p-1:p,u&&b>1?h-1:h],v=[u&&m>1?m-1:m,u&&b>1?b-1:b],O=x[0]/v[0],k=x[1]/v[1],w=1/O,I=1/k,S=2*Math.ceil(w)+2,N=2*Math.ceil(I)+2;for(let e=0;e<d;e++){const t=e*c[0];for(let e=0;e<p;e++){const n=t+e*c[1],r=Math.floor(e*w),a=Math.floor(r-S/2);for(let r=0;r<h;r++){const s=n+r*c[2],o=Math.floor(r*I),i=Math.floor(o-N/2);for(let n=0;n<f;n++){let o=0;for(let s=0;s<S;s++){const c=s+a;if(c<0||c>=m)continue;const d=t+c*l[1],f=c*O;if(e===Math.min(p-1,u?Math.round(f):Math.floor(f)))for(let e=0;e<N;e++){const t=e+i;if(t<0||t>=b)continue;const a=d+t*l[2],s=t*k;r===Math.min(h-1,u?Math.round(s):Math.floor(s))&&(o+=y[a+n])}}g[s+n]=o}}}}return n.makeTensorInfo(o.shape,o.dtype,g)}};const Qr={kernelName:a.Reverse,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:i}=r;s(o,"reverse");const u=o.shape.length,c=a.util.parseAxisParam(i,o.shape);if(0===u)return p({inputs:{x:o},backend:n});const l=new a.TensorBuffer(o.shape,o.dtype),d=n.bufferSync(o);for(let e=0;e<l.size;e++){const t=l.indexToLoc(e),n=t.slice();c.forEach((e=>n[e]=o.shape[e]-1-n[e])),l.set(d.get(...n),...t)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},Zr={kernelName:a.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:s,fillValue:o,center:i}=t,u=n,c=a.util.getTypedArrayFromDType(r.dtype,a.util.sizeFromShape(r.shape)),[l,d,p,h]=r.shape,[f,m]=a.backend_util.getImageCenter(i,d,p),b=Math.sin(s),g=Math.cos(s),y=u.data.get(r.dataId).values;for(let e=0;e<l;e++){const t=e*p*d*h;for(let e=0;e<d;e++){const n=e*(p*h);for(let r=0;r<p;r++){const a=r*h;for(let s=0;s<h;s++){const i=[l,e,r,s],u=i[2],x=i[1];let v=(u-f)*g-(x-m)*b,O=(u-f)*b+(x-m)*g;v=Math.round(v+f),O=Math.round(O+m);let k=o;if("number"!=typeof o&&(k=3===s?255:o[s]),v>=0&&v<p&&O>=0&&O<d){k=y[t+O*(p*h)+v*h+s]}c[t+n+a+s]=k}}}}return{dataId:u.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Jr=u(a.Round,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),ea={kernelName:a.Round,backendName:"cpu",kernelFunc:Jr},ta=I((e=>1/Math.sqrt(e))),na=c(a.Rsqrt,ta),ra={kernelName:a.Rsqrt,backendName:"cpu",kernelFunc:na};function aa(e,t,n,r,s,o,i,u,c,l){const d=[r/s,s],p=e.values,h=t.values;if(0===r)return Object(a.buffer)(n,t.dtype);const f=Object(a.buffer)(d,t.dtype);f.values.fill(c);for(let e=0;e<o;e++){const a=[];let o=0;for(let t=0;t<i;t++){const n=p[e*i+t];a.push(n),o+=n*u[t]}if(o<0||o>=r/s)throw new Error(`Invalid indices: ${a} does not index into ${n}`);for(let n=0;n<s;n++)l?f.values[o*s+n]+=h[e*s+n]:f.values[o*s+n]=0===t.rank?h[0]:h[e*s+n]}return f}const sa={kernelName:a.ScatterNd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s,updates:o}=t,{shape:i}=r,{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:p}=a.backend_util.calculateShapes(o,s,i),h=aa(n.bufferSync(s),n.bufferSync(o),i,p,l,c,u,d,0,!0);return n.makeTensorInfo(i,h.dtype,h.values)}};const oa={kernelName:a.Select,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:i}=t;s([r,o,i],"select");const u=r.shape.length,c=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,p=Object(a.upcastType)(o.dtype,i.dtype),h=a.util.makeZerosTypedArray(a.util.sizeFromShape(o.shape),p);let f=0;const m=0===u||u>1||1===o.shape.length?1:a.util.sizeFromShape(o.shape.slice(1));for(let e=0;e<c.length;e++)for(let t=0;t<m;t++)1===c[e]?h[f++]=l[e]:h[f++]=d[e];return n.makeTensorInfo(o.shape,p,h)}},ia=a.backend_util.SELU_SCALEALPHA,ua=a.backend_util.SELU_SCALE,ca=u(a.Selu,(e=>e>=0?ua*e:ia*(Math.exp(e)-1))),la={kernelName:a.Selu,backendName:"cpu",kernelFunc:ca},da=u(a.Sign,(e=>e<0?-1:e>0?1:0)),pa={kernelName:a.Sign,backendName:"cpu",kernelFunc:da},ha=u(a.Sin,(e=>Math.sin(e))),fa={kernelName:a.Sin,backendName:"cpu",kernelFunc:ha},ma=u(a.Sinh,(e=>Math.sinh(e))),ba={kernelName:a.Sinh,backendName:"cpu",kernelFunc:ma},ga=Math.log(1.1920928955078125e-7)+2,ya=u(a.Softplus,(e=>{const t=e>-ga,n=e<ga,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a})),xa={kernelName:a.Softplus,backendName:"cpu",kernelFunc:ya};const va={kernelName:a.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,paddings:u}=r;s([o],"spaceToBatchND");const c=a.util.sizeFromShape(i),l=[[0,0]];l.push(...u);for(let e=1+i.length;e<o.shape.length;++e)l.push([0,0]);const d=Mr.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),p=a.backend_util.getReshaped(d.shape,i,c,!1),h=a.backend_util.getPermuted(p.length,i.length,!1),f=a.backend_util.getReshapedPermuted(d.shape,i,c,!1),m=V({inputs:{x:d},backend:n,attrs:{shape:p}}),b=te({inputs:{x:m},backend:n,attrs:{perm:h}}),g=V({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),g}};function Oa(e,t,n,r,s,o,i){const u=t[0],c=o[0],l=new Array(c),d=new Array(u),p=t[1];if(0===c){if(0!==u)throw new Error(`Received SparseTensor with denseShape[0] = 0 but\\n         indices.shape[0] = ${u}`);return[a.util.getArrayFromDType(n,0),[0,p],a.util.getArrayFromDType(s,0),l,d]}let h=!0,f=0;const m=new Array(c).fill(0);for(let t=0;t<u;++t){const n=e[t*p];if(n<0)throw new Error(`indices(${t}, 0) is invalid: ${n} < 0`);if(n>=c)throw new Error(`indices(${t}, 0) is invalid: ${n} >= ${c}`);++m[n],h=h&&n>=f,f=n}let b=!0;for(let e=0;e<c;++e){const t=0===m[e];l[e]=t,b=b&&!t,m[e]=Math.max(m[e],1),e>0&&(m[e]+=m[e-1])}if(b&&h){const t=e,n=r;for(let e=0;e<u;++e)d[e]=e;return[t,[u,p],n,l,d]}{const t=m[c-1],o=a.util.getArrayFromDType(n,t*p),h=a.util.getArrayFromDType(s,t),f=new Array(c).fill(0);for(let t=0;t<u;++t){const n=e[t*p],a=f[n],s=(0===n?0:m[n-1])+a;f[n]++;for(let n=0;n<p;++n)o[s*p+n]=e[t*p+n];h[s]=r[t],d[t]=s}for(let e=0;e<c;++e){if(0===f[e]){const t=0===e?0:m[e-1];o[t*p+0]=e;for(let e=1;e<p;++e)o[t*p+e]=0;h[t]=i}}return[o,[t,p],h,l,d]}}const ka={kernelName:a.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:o}=t;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\\n        ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\\n        ${r.shape}`);if(1!==a.shape.length)throw new Error(`Values must be a vector, saw:\\n        ${a.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\\n        ${o.shape}`);const i=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[d,p,h,f,m]=Oa(i,r.shape,r.dtype,u,a.dtype,c,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function wa(e,t,n,r,s){const o=a.util.sizeFromShape(r),i=t[0],u=s.length,c=[];let l=1,d=-1;for(let e=0;e<u;++e){const t=s[e];if(-1===t){if(-1!==d)throw new Error(`only one output dimension may be -1, not both ${d} and ${e}`);d=e,c.push(1)}else{if(t<0)throw new Error(`size ${e} must be non-negative, not ${t}`);l*=t,c.push(t)}}if(-1!==d){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/l);if(l*e!==o)throw new Error(`Input to reshape is a SparseTensor with ${o}\\n          dense values, but the requested shape requires a multiple of ${l}. inputShape=${r} outputShape= ${c}`);c[d]=e}const p=a.util.sizeFromShape(c);if(p!==o)throw new Error(`Input to reshape is a tensor with ${o} dense values, but the requested shape has ${p}. inputShape=${r} outputShape=${c}`);const h=r.length,f=[];if(h>0){f[h-1]=1;for(let e=h-2;e>=0;--e)f[e]=f[e+1]*r[e+1]}const m=[];if(u>0){m[u-1]=1;for(let e=u-2;e>=0;--e)m[e]=m[e+1]*c[e+1]}const b=a.util.getArrayFromDType(n,i*u);for(let t=0;t<i;++t){let n=0;for(let r=0;r<h;++r)n+=e[t*h+r]*f[r];for(let e=0;e<u;++e)b[t*u+e]=Math.trunc(n/m[e]),n%=m[e]}return[b,[i,u],c]}const Ia={kernelName:a.SparseReshape,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\\n        ${r.shape}`);if(1!==a.shape.length)throw new Error(`Input shape should be a vector but received shape\\n        ${a.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(a.dataId).values),i=n.data.get(r.dataId).values,u=Array.from(n.data.get(s.dataId).values),[c,l,d]=wa(i,r.shape,r.dtype,o,u);return[n.makeTensorInfo(l,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}};function Sa(e,t,n,r,s,o=!1,i=0){const u=r.length;if(u!==s.length)throw new Error("segmentIds and indices should have same size.");const c=[t[0],e.length/t[0]],l=c[1],d=u>0?s[u-1]+1:0;if(d<0)throw new Error("segment ids must be >= 0");const p=t.slice();p[0]=d;const h=p.reduce(((e,t)=>e*t),1),f=a.util.getArrayFromDType(n,h);if(0===u)return d>0&&f.fill(i),[f,p];if(d<=0)throw new Error("segment ids must be >= 0");let m=0,b=1,g=0,y=s[m];for(;;){let t=0;if(b<u){if(t=s[b],y===t){++b;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=d)throw new Error(`Segment id ${y} out of range [0, ${d}), possibly because segmentIds input is not sorted.`);y>g&&f.fill(i,g*l,y*l);for(let t=m;t<b;++t){const n=r[t];if(n<0||n>=c[0])throw new Error(`Bad: indices[${t}] == ${r[t]} out of range [0, ${c[0]})`);for(let t=0;t<l;t++)f[y*l+t]+=e[n*l+t]}if(o)for(let e=0;e<l;e++)f[y*l+e]/=b-m;if(m=b,++b,g=y+1,y=t,b>u)break}return g<d&&f.fill(i,g*l,d*l),[f,p]}const Na={kernelName:a.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\\n          ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\\n          ${s.shape}`);const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[c,l]=Sa(o,r.shape,r.dtype,i,u,!0);return n.makeTensorInfo(l,r.dtype,c)}};const Ta={kernelName:a.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\\n         ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\\n         ${s.shape}`);const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[c,l]=Sa(o,r.shape,r.dtype,i,u);return n.makeTensorInfo(l,r.dtype,c)}};const ja={kernelName:a.SparseToDense,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:s,sparseValues:o,defaultValue:i}=t,{outputShape:u}=r,{sliceRank:c,numUpdates:l,sliceSize:d,strides:p,outputSize:h}=a.backend_util.calculateShapes(o,s,u),f=aa(n.bufferSync(s),n.bufferSync(o),u,h,d,l,c,p,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(u,f.dtype,f.values)}};const $a={kernelName:a.SplitV,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{numOrSizeSplits:o,axis:i}=r,u=a.util.parseAxisParam(i,s.shape)[0],c=a.backend_util.prepareSplitSize(s,o,u),l=new Array(s.shape.length).fill(0),d=s.shape.slice();return c.map((e=>{const t=[...d];t[u]=e;const r=Te({inputs:{x:s},backend:n,attrs:{begin:l,size:t}});return l[u]+=e,r}))}},Ca=I((e=>Math.sqrt(e))),Ea=u(a.Sqrt,(e=>Math.sqrt(e))),Aa={kernelName:a.Sqrt,backendName:"cpu",kernelFunc:Ea},Ra={kernelName:a.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;s(n,"square");const a=r.data.get(n.dataId).values,o=new Float32Array(a.length);for(let e=0;e<a.length;++e){const t=a[e];o[e]=t*t}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},_a=b(((e,t)=>{const n=e-t;return n*n})),Fa=D(a.SquaredDifference,_a),Da={kernelName:a.SquaredDifference,backendName:"cpu",kernelFunc:Fa},Ma=u(a.Step,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),Pa={kernelName:a.Step,backendName:"cpu",kernelFunc:Ma};function La(e,t,n,r){const s=Object(a.buffer)(e,t.dtype);for(let e=0;e<s.size;e++){const a=s.indexToLoc(e),o=new Array(a.length);for(let e=0;e<o.length;e++)o[e]=a[e]*n[e]+r[e];s.set(t.get(...o),...a)}return s}const Ba={kernelName:a.StridedSlice,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,end:u,strides:c,beginMask:l,endMask:d,ellipsisMask:p,newAxisMask:h,shrinkAxisMask:f}=r;s(o,"stridedSlice");const{finalShapeSparse:m,finalShape:b,isIdentity:g,sliceDim0:y,isSimpleSlice:x,begin:v,end:O,strides:k}=a.slice_util.sliceInfo(o.shape,i,u,c,l,d,p,h,f);let w;if(g)w=V({inputs:{x:o},backend:n,attrs:{shape:b}});else if(y||x){a.util.assert(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=a.slice_util.computeOutShape(v,O,k),t=Te({inputs:{x:o},backend:n,attrs:{begin:v,size:e}});w=V({inputs:{x:t},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(t)}else{const e=La(m,n.bufferSync(o),k,v);w=n.makeTensorInfo(b,e.dtype,e.values)}return w}};class za{constructor(e,t,n,r,s,o){this.separator=a.util.encodeString(e),this.nGramWidths=t,this.leftPad=a.util.encodeString(n),this.rightPad=a.util.encodeString(r),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,s){for(let o=0;o<a;++o){const i=this.getPadWidth(s),u=Math.max(0,i-o),c=Math.max(0,i-(a-(o+1))),l=s-(u+c),d=t+(u>0?0:o-i);let p=0;p+=u*this.leftPad.length;for(let t=0;t<l;++t)p+=e[d+t].length;p+=c*this.rightPad.length;p+=(u+c+l-1)*this.separator.length,n[r+o]=new Uint8Array(p);const h=n[r+o];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<u;++e)m(this.leftPad),m(this.separator);for(let t=0;t<l-1;++t)m(e[d+t]),m(this.separator);if(l>0){m(e[d+l-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const s=r-1,o=a.util.getArrayFromDType("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=s;++e)o[e]=0;return[e,o]}o[0]=0;for(let e=1;e<=s;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),o[e]=o[e-1]+r}const i=new Array(o[s]);for(let n=0;n<s;++n){const r=t[n];let a=o[n];if(this.nGramWidths.forEach((s=>{const o=t[n+1]-t[n],u=this.getNumNGrams(o,s);this.createNGrams(e,r,i,a,u,s),a+=u})),this.preserveShort&&a===o[n]){const s=t[n+1]-t[n];if(0===s)continue;const o=s+2*this.padWidth,u=1;this.createNGrams(e,r,i,a,u,o)}}return[i,o]}}function Va(e,t,n,r,a,s,o,i){return new za(n,r,a,s,o,i).compute(e,t)}const Wa={kernelName:a.StringNGrams,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:o,rightPad:i,padWidth:u,preserveShortSequences:c}=r,{data:l,dataSplits:d}=t,p=n.data.get(l.dataId).values,h=n.data.get(d.dataId).values,[f,m]=Va(p,h,a,s,o,i,u,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function Ua(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const a=t[0];let s=e.indexOf(a);for(;-1!==s;){const t=e.subarray(0,s);n&&0===t.length||r.push(t),s=(e=e.subarray(s+1)).indexOf(a)}return void(n&&0===e.length||r.push(e))}let a=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){const t=e.subarray(a,s);n&&0===t.length||r.push(t),a=s+1}}function Ga(e,t,n){const r=e.length,s=[];let o=0,i=0;const u=new Array(r);for(let a=0;a<r;++a){const r=s.length;Ua(e[a],t,n,s);const c=s.length-r;u[a]=c,o+=c,i=Math.max(i,c)}const c=a.util.getArrayFromDType("int32",2*o),l=new Array(o),d=[r,i];let p=0;for(let e=0;e<r;++e)for(let t=0;t<u[e];++t)c[2*p]=e,c[2*p+1]=t,l[p]=s[p],++p;return[c,l,d]}const Ha={kernelName:a.StringSplit,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:o}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const i=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values[0],[c,l,d]=Ga(i,u,a),p=l.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function qa(e,t){const n=a.util.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=a.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}const Ka={kernelName:a.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=qa(n.data.get(s.dataId).values,a);return n.makeTensorInfo(s.shape,"int32",o)}},Xa=u(a.Tan,(e=>Math.tan(e))),Ya={kernelName:a.Tan,backendName:"cpu",kernelFunc:Xa},Qa=u(a.Tanh,(e=>Math.tanh(e))),Za={kernelName:a.Tanh,backendName:"cpu",kernelFunc:Qa};function Ja(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=Object(a.buffer)(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),a=new Array(e.rank);for(let t=0;t<a.length;t++)a[t]=n[t]%e.shape[t];const s=e.locToIndex(a);r.values[t]=e.values[s]}return r}const es={kernelName:a.Tile,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:o}=r;s(a,"tile");const i=Ja(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},ts=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function ns(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,s=t-n+1,o=Math.log(a),i=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*i*(a-i)/a)*Math.sign(s-a/2);ns(e,t,Math.max(n,Math.floor(t-s*i/a+u)),Math.min(r,Math.floor(t+(a-s)*i/a+u)))}const s=e[t];let o=n,i=r;for(a.util.swap(e,n,t),ts(e[r],s)>0&&a.util.swap(e,n,r);o<i;){for(a.util.swap(e,o,i),o++,i--;ts(e[o],s)<0;)o+=1;for(;ts(e[i],s)>0;)i-=1}0===ts(e[n],s)?a.util.swap(e,n,i):(i+=1,a.util.swap(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function rs(e,t,n,r,s){const o=t[t.length-1],[i,u]=[e.length/o,o],c=a.util.getTypedArrayFromDType(n,i*r),l=a.util.getTypedArrayFromDType("int32",i*r);for(let t=0;t<i;t++){const n=t*u,a=e.subarray(n,n+u);let o=new Array(a.length);a.forEach(((e,t)=>o[t]={value:e,index:t})),r<o.length&&(ns(o,r),o=o.slice(0,r)),s&&o.sort(ts);const i=t*r,d=c.subarray(i,i+r),p=l.subarray(i,i+r);for(let e=0;e<r;e++)d[e]=o[e].value,p[e]=o[e].index}const d=t.slice();return d[d.length-1]=r,[Object(a.buffer)(d,n,c),Object(a.buffer)(d,"int32",l)]}const as={kernelName:a.TopK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:o,sorted:i}=r;s(a,"topk");const u=n.data.get(a.dataId).values,[c,l]=rs(u,a.shape,a.dtype,o,i);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};const ss={kernelName:a.Transform,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:s,transforms:o}=t,{interpolation:i,fillMode:u,fillValue:c,outputShape:l}=n,[d,p,h,f]=s.shape,[m,b]=null!=l?l:[p,h],g=[d,m,b,f],y=a.util.computeStrides(s.shape),x=y[0],v=y[1],O=y[2],k=a.util.getTypedArrayFromDType(s.dtype,a.util.sizeFromShape(g));k.fill(c);const w=r.data.get(s.dataId).values,I=r.data.get(o.dataId).values;for(let e=0;e<d;++e){const t=1===o.shape[0]?I:I.subarray(8*e,8*e+8);for(let n=0;n<m;++n)for(let r=0;r<b;++r)for(let a=0;a<f;++a){let s;const o=t[6]*r+t[7]*n+1;if(0===o)continue;const l=(t[0]*r+t[1]*n+t[2])/o,d=(t[3]*r+t[4]*n+t[5])/o,f=os(l,h,u),m=os(d,p,u);switch(i){case"nearest":s=us(w,p,h,x,v,O,e,m,f,a,c);break;case"bilinear":s=cs(w,p,h,x,v,O,e,m,f,a,c);break;default:throw new Error(`Error in Transform: Expect \'nearest\' or \'bilinear\', but got ${i}`)}k[e*x+n*v+r*O+a]=s}return r.makeTensorInfo(g,s.dtype,k)}return{dataId:r.write(k,g,s.dtype),shape:s.shape,dtype:s.dtype}}};function os(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return a.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return a.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return a.util.clamp(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function is(e,t,n,r,a,s,o,i,u,c,l){return 0<=i&&i<t&&0<=u&&u<n?e[o*r+i*a+u*s+c]:l}function us(e,t,n,r,a,s,o,i,u,c,l){return is(e,t,n,r,a,s,o,Math.round(i),Math.round(u),c,l)}function cs(e,t,n,r,a,s,o,i,u,c,l){const d=Math.floor(i),p=Math.floor(u),h=d+1,f=p+1;return(h-i)*((f-u)*is(e,t,n,r,a,s,o,d,p,c,l)+(u-p)*is(e,t,n,r,a,s,o,d,f,c,l))+(i-d)*((f-u)*is(e,t,n,r,a,s,o,h,p,c,l)+(u-p)*is(e,t,n,r,a,s,o,h,f,c,l))}function ls(e,t,n,r){const s=a.util.parseAxisParam(t,n)[0],o=[1,n[0],1];for(let e=0;e<s;e++)o[0]*=n[e];o[1]=n[s];for(let e=s+1;e<n.length;e++)o[2]*=n[e];const i={},u=new Int32Array(n[s]),c=new a.TensorBuffer(o,r,e),l=[],d=1===o[0]&&1===o[2];for(let t=0;t<n[s];t++){let n;if(d)n=e[t].toString();else{const e=[];for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)e.push(c.get(n,t,r));n=e.join(",")}if(void 0!==i[n])u[t]=i[n];else{const e=Object.keys(i).length;i[n]=e,u[t]=e,l.push(t)}}const p=o.slice();p[1]=Object.keys(i).length;const h=new a.TensorBuffer(p,r);l.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)h.set(c.get(n,e,r),n,t,r)}));const f=n.slice();return f[s]=p[1],{outputValues:h.values,outputShape:f,indices:u}}const ds={kernelName:a.Unique,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:o}=t;s(o,"unique");const i=r.data.get(o.dataId).values,{outputValues:u,outputShape:c,indices:l}=ls(i,a,o.shape,o.dtype);return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};const ps={kernelName:a.Unpack,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const o=a.shape.length,i=a.shape[s],u=new Array(o-1);let c=0;for(let e=0;e<o;e++)e!==s&&(u[c++]=a.shape[e]);const l=new Array(o).fill(0),d=a.shape.slice();d[s]=1;const p=new Array(i);for(let e=0;e<p.length;e++){l[s]=e;const t=Te({inputs:{x:a},backend:n,attrs:{begin:l,size:d}});p[e]=V({inputs:{x:t},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(t)}return p}};const hs={kernelName:a.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:i}=t,{numSegments:u}=r;s(o,"unsortedSegmentSum");const c=[],l=[],d=o.shape.length-i.shape.length;let p=i;for(let e=0;e<d;++e){const t=Dt({inputs:{input:p},backend:n,attrs:{dim:e+1}});p=t,l.push(t)}for(let e=0;e<u;++e){const t=a.util.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),s=wt({inputs:{a:r,b:p},backend:n}),i=_({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),u=bt({inputs:{a:i,b:o},backend:n}),d=yt({inputs:{x:u},backend:n,attrs:{axis:0,keepDims:!1}});c.push(d),l.push(r),l.push(s),l.push(i),l.push(u),l.push(d)}const h=Fr({inputs:c,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},fs=[H,K,Y,Z,z,J,re,ae,se,oe,ue,le,pe,me,ge,Oe,ke,we,Ie,G,Se,$e,Ae,Re,F,De,Pe,C,Le,Ue,qe,Ke,He,Ye,Qe,Xe,Je,tt,nt,rt,at,st,it,ut,ct,lt,dt,ht,pt,Wt,vt,d,Ot,It,At,Ft,Mt,Bt,Qt,Jt,en,rn,on,un,cn,dn,hn,bn,xn,h,vn,Ve,kn,In,Nn,m,$n,An,_n,Mn,Ln,Vn,Un,qn,Kn,Xn,tr,nr,rr,ar,sr,or,Zn,ir,ur,dr,pr,mr,xr,gt,Or,wr,Sr,Tr,Cr,Er,_r,Dr,Mr,Br,x,Vr,Ur,R,Hr,O,w,W,qr,Kr,Xr,Yr,Qr,Zr,ea,ra,sa,oa,la,T,pa,fa,ba,je,yr,xa,va,ka,Ia,Na,Ta,ja,$a,Aa,Ra,Da,Pa,Ba,Wa,Ha,Ka,qt,xt,Ya,Za,es,as,ne,ss,ds,ps,hs,Rr];for(const e of fs)Object(a.registerKernel)(e);const ms={},bs={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function gs(e){if(!(e in ms)){const t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete ms[e]}),!1),1===e)return t.getContext("webgl",bs)||t.getContext("experimental-webgl",bs);return t.getContext("webgl2",bs)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;ms[e]=t}const t=ms[e];return t.isContextLost()?(delete ms[e],gs(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),ms[e])}var ys,xs,vs;function Os(e,t){return[t,e]}function ks(e){const t=a.util.sizeFromShape(e),n=Math.ceil(t/4);return a.util.sizeToSquarishShape(n)}function ws(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Is(e,t){const n=e;let r,s,o,i,u,c,l,d,p,h;return 2===Object(a.env)().getNumber("WEBGL_VERSION")?(r=n.R32F,s=n.R16F,o=n.RGBA16F,i=n.RGBA32F,u=n.RED,l=4,d=1,p=n.HALF_FLOAT,h=n.FLOAT):(r=e.RGBA,s=e.RGBA,o=e.RGBA,i=n.RGBA,u=e.RGBA,l=4,d=4,p=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT),c=e.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:u,downloadTextureFormat:c,downloadUnpackNumChannels:l,defaultNumChannels:d,textureTypeHalfFloat:p,textureTypeFloat:h}}function Ss(e,t){const n=t();return Object(a.env)().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(ys||(ys={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(xs||(xs={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(vs||(vs={}));function Ns(e){return!!(Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function Ts(e,t){return Ds(e,(()=>e.getExtension(t)),\'Extension "\'+t+\'" not supported on this browser.\')}function js(e,t){const n=Ds(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(Ss(e,(()=>e.shaderSource(n,t))),Ss(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){const n=$s.exec(t);if(null==n)return console.log(`Couldn\'t parse line number in error: ${t}`),void console.log(e);const r=+n[1],s=e.split("\\n"),o=s.length.toString().length+2,i=s.map(((e,t)=>a.util.rightPad((t+1).toString(),o)+e));let u=0;for(let e=0;e<i.length;e++)u=Math.max(i[e].length,u);const c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\\n")),console.log(t.split("\\n")[0]),console.log(`%c ${a.util.rightPad(l[0],u)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const $s=/ERROR: [0-9]+:([0-9]+):/g;function Cs(e,t){if(Ss(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Es(e,t,n,r,a,s,o){const i=e.getAttribLocation(t,n);return-1!==i&&(Ss(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),Ss(e,(()=>e.vertexAttribPointer(i,a,e.FLOAT,!1,s,o))),Ss(e,(()=>e.enableVertexAttribArray(i))),!0)}function As(e,t,n,r){Ss(e,(()=>function(e,t,n){Ms(e,n),Ss(e,(()=>e.activeTexture(e.TEXTURE0+n))),Ss(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),Ss(e,(()=>e.uniform1i(n,r)))}function Rs(e,t,n){Ss(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),Ss(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function _s(e,t){Ss(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),Ss(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function Fs(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function Ds(e,t,n){const r=Ss(e,(()=>t()));if(null==r)throw new Error(n);return r}function Ms(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function Ps(e,t=2){return a.util.sizeFromShape(e.slice(0,e.length-t))}function Ls(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Bs(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Ps(e),...Ls(e)]),t}function zs(e){return e%2==0}function Vs(e,t){if(e=e.slice(-2),t=t.slice(-2),a.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(zs(n)&&zs(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&zs(e[0])&&zs(t[0])}let Ws,Us;function Gs(e,t){return null!=e.getExtension(t)}function Hs(e){try{if(null!=gs(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function qs(e){if(0===e)return!1;const t=gs(e);if(1!==e){if(Gs(t,"EXT_color_buffer_float"))return Ks(t);const e="EXT_color_buffer_half_float";if(Gs(t,e)){const n=t.getExtension(e);return function(e,t){const n=Is(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const a=1,s=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),i}(t,n)}return!1}if(!Gs(t,"OES_texture_float"))return!1;if(!Gs(t,"WEBGL_color_buffer_float"))return!1;return Ks(t)}function Ks(e){const t=Is(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Xs(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&a.util.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const Ys=Object(a.env)();function Qs(){let e,t,n,r,s,o,i,u,c,l;return 2===Object(a.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",s="texture",o="outputColor",i="out vec4 outputColor;",u="\\n      bool isnan_custom(float val) {\\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\\n      }\\n\\n      bvec4 isnan_custom(vec4 val) {\\n        return bvec4(isnan_custom(val.x),\\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\\n      }\\n\\n      #define isnan(value) isnan_custom(value)\\n    ",c="",l="\\n      #define round(value) newRound(value)\\n      int newRound(float value) {\\n        return int(floor(value + 0.5));\\n      }\\n\\n      ivec4 newRound(vec4 value) {\\n        return ivec4(floor(value + vec4(0.5)));\\n      }\\n    "):(e="",t="attribute",n="varying",r="varying",s="texture2D",o="gl_FragColor",i="",u="\\n      #define isnan(value) isnan_custom(value)\\n      bool isnan_custom(float val) {\\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\\n      }\\n      bvec4 isnan_custom(vec4 val) {\\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\\n      }\\n    ",c="\\n      uniform float INFINITY;\\n\\n      bool isinf(float val) {\\n        return abs(val) == INFINITY;\\n      }\\n      bvec4 isinf(vec4 val) {\\n        return equal(abs(val), vec4(INFINITY));\\n      }\\n    ",l="\\n      int round(float value) {\\n        return int(floor(value + 0.5));\\n      }\\n\\n      ivec4 round(vec4 value) {\\n        return ivec4(floor(value + vec4(0.5)));\\n      }\\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:s,output:o,defineOutput:i,defineSpecialNaN:u,defineSpecialInf:c,defineRound:l}}function Zs(e,t,n="index"){const r=a.util.computeStrides(t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / ${t}`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${t}`:`index -= ${e[a]} * ${t}`};`)).join("")}function Js(e,t,n="index"){const r=a.util.computeStrides(t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / outShapeStrides[${a}]`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * outShapeStrides[${a}]`:`index -= ${e[a]} * outShapeStrides[${a}]`};`)).join("")}function eo(e,t,n="index"){const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),a=new Array(n-1);a[n-2]=r[n-1];for(let e=n-3;e>=0;--e)a[e]=`(${a[e+1]} * ${r[e+1]})`;return a}(e.map(((e,t)=>t)),t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / ${r[a]}`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${r[a]}`:`index -= ${e[a]} * ${r[a]}`};`)).join("")}function to(e){const t=a.util.computeStrides(e).map((e=>e.toString()));return`\\n  int getFlatIndex(ivec3 coords) {\\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\\n  }\\n`}Ys.registerFlag("HAS_WEBGL",(()=>Ys.getNumber("WEBGL_VERSION")>0)),Ys.registerFlag("WEBGL_VERSION",(()=>Hs(2)?2:Hs(1)?1:0)),Ys.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Ys.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Ys.get("WEBGL_VERSION"))),Ys.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Ys.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Ys.registerFlag("WEBGL_PACK",(()=>Ys.getBool("HAS_WEBGL"))),Ys.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_CLIP",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_PACK_REDUCE",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_CONV_IM2COL",(()=>Ys.getBool("WEBGL_PACK"))),Ys.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==Ws){const t=gs(e);Ws=t.getParameter(t.MAX_TEXTURE_SIZE)}return Ws}(Ys.getNumber("WEBGL_VERSION")))),Ys.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==Us){const t=gs(e);Us=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Us)}(Ys.getNumber("WEBGL_VERSION")))),Ys.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=Ys.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=gs(e);return t=Gs(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Gs(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),Ys.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Ys.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!a.device_util.isMobile())),Ys.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=gs(e);if(1===e){if(!Gs(t,"OES_texture_float"))return!1}else if(!Gs(t,"EXT_color_buffer_float"))return!1;return Ks(t)}(Ys.getNumber("WEBGL_VERSION")))),Ys.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Ys.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ys.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Ys.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>qs(Ys.getNumber("WEBGL_VERSION")))),Ys.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=Ys.getNumber("WEBGL_VERSION"))&&null!=gs(e).fenceSync;var e})),Ys.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Ys.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Ys.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),Ys.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>a.device_util.isMobile()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),Ys.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Ys.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Ys.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Ys.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128));const no="\\n  const float FLOAT_MAX = 1.70141184e38;\\n  const float FLOAT_MIN = 1.17549435e-38;\\n\\n  lowp vec4 encode_float(highp float v) {\\n    if (isnan(v)) {\\n      return vec4(255, 255, 255, 255);\\n    }\\n\\n    highp float av = abs(v);\\n\\n    if(av < FLOAT_MIN) {\\n      return vec4(0.0, 0.0, 0.0, 0.0);\\n    } else if(v > FLOAT_MAX) {\\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\\n    } else if(v < -FLOAT_MAX) {\\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\\n    }\\n\\n    highp vec4 c = vec4(0,0,0,0);\\n\\n    highp float e = floor(log2(av));\\n    highp float m = exp2(fract(log2(av))) - 1.0;\\n\\n    c[2] = floor(128.0 * m);\\n    m -= c[2] / 128.0;\\n    c[1] = floor(32768.0 * m);\\n    m -= c[1] / 32768.0;\\n    c[0] = floor(8388608.0 * m);\\n\\n    highp float ebias = e + 127.0;\\n    c[3] = floor(ebias / 2.0);\\n    ebias -= c[3] * 2.0;\\n    c[2] += floor(ebias) * 128.0;\\n\\n    c[3] += 128.0 * step(0.0, -v);\\n\\n    return c / 255.0;\\n  }\\n",{getBroadcastDims:ro}=a.backend_util;function ao(e,t,n){const r=[];if(e.forEach((e=>{const t=a.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=bo(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const s=r.join("\\n"),o=e.map((e=>function(e,t,n=!1,r){let s="";s+=n?oo(e,r):so(e,r);const o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(s+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,u=ro(e.shapeInfo.logicalShape,t.logicalShape),c=mo(i),l=i-o;let d;const p=["x","y","z","w","u","v"];d=0===o?"":i<2&&u.length>=1?"coords = 0;":u.map((e=>`coords.${p[e+l]} = 0;`)).join("\\n");let h="";h=i<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+l]}`)).join(", ");let f="return outputValue;";const m=1===a.util.sizeFromShape(e.shapeInfo.logicalShape),b=1===a.util.sizeFromShape(t.logicalShape);if(1!==o||m||b){if(m&&!b)f=1===i?"\\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\\n      ":"\\n        return vec4(outputValue.x);\\n      ";else if(u.length){const e=o-2,t=o-1;u.indexOf(e)>-1&&u.indexOf(t)>-1?f="return vec4(outputValue.x);":u.indexOf(e)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(t)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\\n      return vec4(outputValue.xy, outputValue.xy);\\n    ";return`\\n    vec4 ${s}() {\\n      ${c} coords = getOutputCoords();\\n      ${d}\\n      vec4 outputValue = get${r}(${h});\\n      ${f}\\n    }\\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,u=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&u===c&&null==e.shapeInfo.flatOffset&&a.util.arraysEqual(i,o))return`\\n      float ${s}() {\\n        return sampleTexture(${n}, resultUV);\\n      }\\n    `;const l=mo(c),d=ro(e.shapeInfo.logicalShape,t.logicalShape),p=c-u;let h;const f=["x","y","z","w","u","v"];h=0===u?"":c<2&&d.length>=1?"coords = 0;":d.map((e=>`coords.${f[e+p]} = 0;`)).join("\\n");let m="";m=c<2&&u>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${f[t+p]}`)).join(", ");return`\\n    float ${s}() {\\n      ${l} coords = getOutputCoords();\\n      ${h}\\n      return get${r}(${m});\\n    }\\n  `}(e,t));return s}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\\n"),i=t.texShape,u=Qs(),c=function(e){return`\\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\\n      return ${e.texture2D}(textureSampler, uv).r;\\n    }\\n  `}(u);let l,d,p=function(e){return`${e.version}\\n    precision highp float;\\n    precision highp int;\\n    precision highp sampler2D;\\n    ${e.varyingFs} vec2 resultUV;\\n    ${e.defineOutput}\\n    const vec2 halfCR = vec2(0.5, 0.5);\\n\\n    struct ivec5\\n    {\\n      int x;\\n      int y;\\n      int z;\\n      int w;\\n      int u;\\n    };\\n\\n    struct ivec6\\n    {\\n      int x;\\n      int y;\\n      int z;\\n      int w;\\n      int u;\\n      int v;\\n    };\\n\\n    uniform float NAN;\\n    ${e.defineSpecialNaN}\\n    ${e.defineSpecialInf}\\n    ${e.defineRound}\\n\\n    int imod(int x, int y) {\\n      return x - y * (x / y);\\n    }\\n\\n    int idiv(int a, int b, float sign) {\\n      int res = a / b;\\n      int mod = imod(a, b);\\n      if (sign < 0. && mod != 0) {\\n        res -= 1;\\n      }\\n      return res;\\n    }\\n\\n    //Based on the work of Dave Hoskins\\n    //https://www.shadertoy.com/view/4djSRW\\n    #define HASHSCALE1 443.8975\\n    float random(float seed){\\n      vec2 p = resultUV * seed;\\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\\n      p3 += dot(p3, p3.yzx + 19.19);\\n      return fract((p3.x + p3.y) * p3.z);\\n    }\\n\\n    ${io}\\n    ${uo}\\n    ${co}\\n  `}(u);t.isPacked?(l=function(e,t,n){switch(e.length){case 0:return po();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\\n      int getOutputCoords() {\\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\\n      }\\n    ":`\\n      int getOutputCoords() {\\n        return 2 * int(resultUV.x * ${r[1]}.0);\\n      }\\n    `;if(1===r[1])return n?"\\n      int getOutputCoords() {\\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\\n      }\\n    ":`\\n      int getOutputCoords() {\\n        return 2 * int(resultUV.y * ${r[0]}.0);\\n      }\\n    `;if(n)return"\\n    int getOutputCoords() {\\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(packedTexShape[0], packedTexShape[1]));\\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\\n    }\\n  ";return`\\n    int getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${r[0]}, ${r[1]}));\\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\\n    }\\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(a.util.arraysEqual(e,t))return n?"\\n      ivec2 getOutputCoords() {\\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\\n      }\\n    ":`\\n      ivec2 getOutputCoords() {\\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\\n      }\\n    `;const s=Math.ceil(e[1]/2);if(n)return"\\n    ivec2 getOutputCoords() {\\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(packedTexShape[0], packedTexShape[1]));\\n\\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\\n      int r = 2 * (index / texelsInLogicalRow);\\n      int c = imod(index, texelsInLogicalRow) * 2;\\n\\n      return ivec2(r, c);\\n    }\\n  ";return`\\n    ivec2 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${r[0]}, ${r[1]}));\\n\\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\\n      int r = 2 * (index / ${s});\\n      int c = imod(index, ${s}) * 2;\\n\\n      return ivec2(r, c);\\n    }\\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\\n    ivec3 getOutputCoords() {\\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(packedTexShape[0], packedTexShape[1]));\\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\\n\\n      int b = index / texelsInBatch;\\n      index -= b * texelsInBatch;\\n\\n      int r = 2 * (index / texelsInLogicalRow);\\n      int c = imod(index, texelsInLogicalRow) * 2;\\n\\n      return ivec3(b, r, c);\\n    }\\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),s=a*Math.ceil(e[1]/2);return`\\n    ivec3 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${r[0]}, ${r[1]}));\\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\\n\\n      int b = index / ${s};\\n      index -= b * ${s};\\n\\n      int r = 2 * (index / ${a});\\n      int c = imod(index, ${a}) * 2;\\n\\n      return ivec3(b, r, c);\\n    }\\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\\n    ivec4 getOutputCoords() {\\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(packedTexShape[0], packedTexShape[1]));\\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\\n\\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\\n      int texelsInBatchN = texelsInBatch * outShape[1];\\n\\n      int b2 = index / texelsInBatchN;\\n      index -= b2 * texelsInBatchN;\\n\\n      int b = index / texelsInBatch;\\n      index -= b * texelsInBatch;\\n\\n      int r = 2 * (index / texelsInLogicalRow);\\n      int c = imod(index, texelsInLogicalRow) * 2;\\n\\n      return ivec4(b2, b, r, c);\\n    }\\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),s=a*Math.ceil(e[e.length-2]/2);let o=s,i="",u="b, r, c";for(let t=2;t<e.length-1;t++)o*=e[e.length-t-1],i=`\\n      int b${t} = index / ${o};\\n      index -= b${t} * ${o};\\n    `+i,u=`b${t}, `+u;return`\\n    ivec${e.length} getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${r[0]}, ${r[1]}));\\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\\n\\n      ${i}\\n\\n      int b = index / ${s};\\n      index -= b * ${s};\\n\\n      int r = 2 * (index / ${a});\\n      int c = imod(index, ${a}) * 2;\\n\\n      return ivec${e.length}(${u});\\n    }\\n  `}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),d=function(e){return`\\n    void setOutput(vec4 val) {\\n      ${e.output} = val;\\n    }\\n  `}(u)):(l=function(e,t,n){switch(e.length){case 0:return po();case 1:return function(e,t,n){if(1===t[0])return n?"\\n      int getOutputCoords() {\\n        return int(resultUV.x * float(outTexShape[1]));\\n      }\\n    ":`\\n      int getOutputCoords() {\\n        return int(resultUV.x * ${t[1]}.0);\\n      }\\n    `;if(1===t[1])return n?"\\n      int getOutputCoords() {\\n        return int(resultUV.y * float(outTexShape[0]));\\n      }\\n    ":`\\n      int getOutputCoords() {\\n        return int(resultUV.y * ${t[0]}.0);\\n      }\\n    `;if(n)return"\\n    int getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(outTexShape[0], outTexShape[1]));\\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\\n    }\\n  ";return`\\n    int getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${t[0]}, ${t[1]}));\\n      return resTexRC.x * ${t[1]} + resTexRC.y;\\n    }\\n  `}(0,t,n);case 2:return function(e,t,n){if(a.util.arraysEqual(e,t))return n?"\\n      ivec2 getOutputCoords() {\\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\\n      }\\n    ":`\\n      ivec2 getOutputCoords() {\\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\\n      }\\n    `;if(1===e[1])return n?"\\n      ivec2 getOutputCoords() {\\n        ivec2 resTexRC = ivec2(resultUV.yx *\\n                               vec2(outTexShape[0], outTexShape[1]));\\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\\n        return ivec2(index, 0);\\n      }\\n    ":`\\n      ivec2 getOutputCoords() {\\n        ivec2 resTexRC = ivec2(resultUV.yx *\\n                               vec2(${t[0]}, ${t[1]}));\\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n        return ivec2(index, 0);\\n      }\\n    `;if(1===e[0])return n?"\\n      ivec2 getOutputCoords() {\\n        ivec2 resTexRC = ivec2(resultUV.yx *\\n                               vec2(outTexShape[0], outTexShape[1]));\\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\\n        return ivec2(0, index);\\n      }\\n    ":`\\n      ivec2 getOutputCoords() {\\n        ivec2 resTexRC = ivec2(resultUV.yx *\\n                               vec2(${t[0]}, ${t[1]}));\\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n        return ivec2(0, index);\\n      }\\n    `;if(n)return"\\n    ivec2 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(outTexShape[0], outTexShape[1]));\\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\\n      int r = index / outShape[1];\\n      int c = index - r * outShape[1];\\n      return ivec2(r, c);\\n    }\\n  ";return`\\n    ivec2 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${t[0]}, ${t[1]}));\\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n      int r = index / ${e[1]};\\n      int c = index - r * ${e[1]};\\n      return ivec2(r, c);\\n    }\\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\\n  ivec3 getOutputCoords() {\\n    ivec2 resTexRC = ivec2(resultUV.yx *\\n                           vec2(outTexShape[0], outTexShape[1]));\\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\\n    ${Js(["r","c","d"],e)}\\n    return ivec3(r, c, d);\\n  }\\n`}const r=Zs(["r","c","d"],e);return`\\n    ivec3 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n                             vec2(${t[0]}, ${t[1]}));\\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n      ${r}\\n      return ivec3(r, c, d);\\n    }\\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\\n    ivec4 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n        vec2(outTexShape[0], outTexShape[1]));\\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\\n      ${Js(["r","c","d","d2"],e)}\\n      return ivec4(r, c, d, d2);\\n    }\\n  `}const r=Zs(["r","c","d","d2"],e);return`\\n    ivec4 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n        vec2(${t[0]}, ${t[1]}));\\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n      ${r}\\n      return ivec4(r, c, d, d2);\\n    }\\n  `}(e,t,n);case 5:return function(e,t){const n=Zs(["r","c","d","d2","d3"],e);return`\\n    ivec5 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\\n                             ${t[1]}));\\n\\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n\\n      ${n}\\n\\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\\n      return outShape;\\n    }\\n  `}(e,t);case 6:return function(e,t){const n=Zs(["r","c","d","d2","d3","d4"],e);return`\\n    ivec6 getOutputCoords() {\\n      ivec2 resTexRC = ivec2(resultUV.yx *\\n        vec2(${t[0]}, ${t[1]}));\\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\\n\\n      ${n}\\n\\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\\n      return result;\\n    }\\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i,n.enableShapeUniforms),d=function(e){return`\\n    void setOutput(float val) {\\n      ${e.output} = vec4(val, 0, 0, 0);\\n    }\\n  `}(u)),n.packedInputs&&(p+=lo);return[p,c,d,s,l,o,n.userCode].join("\\n")}function so(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,s]=e.shapeInfo.texShape;if(1===a&&1===s)return`\\n      float ${r}() {\\n        return sampleTexture(${n}, halfCR);\\n      }\\n    `;const o=ho(n);if(t)return`\\n    float ${r}() {\\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});\\n      return sampleTexture(${n}, uv);\\n    }\\n  `;const[i,u]=e.shapeInfo.texShape;return`\\n    float ${r}() {\\n      vec2 uv = uvFromFlat(${i}, ${u}, ${o});\\n      return sampleTexture(${n}, uv);\\n    }\\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\\n      float ${r}(int index) {\\n        ${fo(e)}\\n      }\\n    `;const a=e.shapeInfo.texShape,s=a[0],o=a[1];if(1===o&&1===s)return`\\n      float ${r}(int index) {\\n        return sampleTexture(${n}, halfCR);\\n      }\\n    `;const i=ho(n);if(1===o)return t?`\\n      float ${r}(int index) {\\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / float(${n}TexShape[0]));\\n        return sampleTexture(${n}, uv);\\n      }\\n    `:`\\n      float ${r}(int index) {\\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${s}.0);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `;if(1===s)return t?`\\n      float ${r}(int index) {\\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / float(${n}TexShape[1]), 0.5);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `:`\\n      float ${r}(int index) {\\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${o}.0, 0.5);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `;if(t)return`\\n    float ${r}(int index) {\\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${i});\\n      return sampleTexture(${n}, uv);\\n    }\\n  `;return`\\n    float ${r}(int index) {\\n      vec2 uv = uvFromFlat(${s}, ${o}, index + ${i});\\n      return sampleTexture(${n}, uv);\\n    }\\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&a.util.arraysEqual(n,o)){if(t)return`\\n      float ${s}(int row, int col) {\\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `;const e=o[0];return`\\n    float ${s}(int row, int col) {\\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${e}.0);\\n      return sampleTexture(${r}, uv);\\n    }\\n  `}const{newShape:i,keptDims:u}=a.util.squeezeShape(n),c=i;if(c.length<n.length){const n=["row","col"];return`\\n      ${so(go(e,c),t)}\\n      float ${s}(int row, int col) {\\n        return ${s}(${yo(n,u)});\\n      }\\n    `}if(e.shapeInfo.isUniform)return`\\n      float ${s}(int row, int col) {\\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\\n        ${fo(e)}\\n      }\\n    `;const l=o[0],d=o[1],p=ho(r);if(1===d)return t?`\\n      float ${s}(int row, int col) {\\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\\n        return sampleTexture(${r}, uv);\\n      }\\n    `:`\\n    float ${s}(int row, int col) {\\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\\n      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);\\n      return sampleTexture(${r}, uv);\\n    }\\n  `;if(1===l)return t?`\\n      float ${s}(int row, int col) {\\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `:`\\n    float ${s}(int row, int col) {\\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\\n      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);\\n      return sampleTexture(${r}, uv);\\n    }\\n  `;if(t)return`\\n      float ${s}(int row, int col) {\\n        // Explicitly use integer operations as dot() only works on floats.\\n        int index = row * ${r}Shape[1] + col + ${p};\\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `;return`\\n  float ${s}(int row, int col) {\\n    // Explicitly use integer operations as dot() only works on floats.\\n    int index = row * ${n[1]} + col + ${p};\\n    vec2 uv = uvFromFlat(${l}, ${d}, index);\\n    return sampleTexture(${r}, uv);\\n  }\\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],{newShape:u,keptDims:c}=a.util.squeezeShape(n),l=u;if(l.length<n.length){const n=["row","col","depth"];return`\\n        ${so(go(e,l),t)}\\n        float ${s}(int row, int col, int depth) {\\n          return ${s}(${yo(n,c)});\\n        }\\n      `}if(e.shapeInfo.isUniform)return`\\n      float ${s}(int row, int col, int depth) {\\n        int index = round(dot(vec3(row, col, depth),\\n                          vec3(${o}, ${i}, 1)));\\n        ${fo(e)}\\n      }\\n    `;const d=e.shapeInfo.texShape,p=d[0],h=d[1],f=e.shapeInfo.flatOffset;if(h===o&&null==f)return t?`\\n      float ${s}(int row, int col, int depth) {\\n        int stride1 = ${r}Shape[2];\\n        float texR = float(row);\\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `:`\\n        float ${s}(int row, int col, int depth) {\\n          float texR = float(row);\\n          float texC = dot(vec2(col, depth), vec2(${i}, 1));\\n          vec2 uv = (vec2(texC, texR) + halfCR) /\\n                     vec2(${h}.0, ${p}.0);\\n          return sampleTexture(${r}, uv);\\n        }\\n      `;if(h===i&&null==f)return t?`\\n      float ${s}(int row, int col, int depth) {\\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\\n        float texC = float(depth);\\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `:`\\n    float ${s}(int row, int col, int depth) {\\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\\n      float texC = float(depth);\\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${p}.0);\\n      return sampleTexture(${r}, uv);\\n    }\\n  `;const m=ho(r);if(t)return`\\n    float ${s}(int row, int col, int depth) {\\n      // Explicitly use integer operations as dot() only works on floats.\\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\\n      int stride1 = ${r}Shape[2];\\n      int index = row * ${o} + col * ${i} + depth + ${m};\\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\\n      return sampleTexture(${r}, uv);\\n    }\\n    `;return`\\n      float ${s}(int row, int col, int depth) {\\n        // Explicitly use integer operations as dot() only works on floats.\\n        int index = row * ${o} + col * ${i} + depth + ${m};\\n        vec2 uv = uvFromFlat(${p}, ${h}, index);\\n        return sampleTexture(${r}, uv);\\n      }\\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,u=n[1]*i,{newShape:c,keptDims:l}=a.util.squeezeShape(n);if(c.length<n.length){const n=["row","col","depth","depth2"];return`\\n      ${so(go(e,c),t)}\\n      float ${s}(int row, int col, int depth, int depth2) {\\n        return ${s}(${yo(n,l)});\\n      }\\n    `}if(e.shapeInfo.isUniform)return`\\n      float ${s}(int row, int col, int depth, int depth2) {\\n        int index = round(dot(vec4(row, col, depth, depth2),\\n                          vec4(${u}, ${i}, ${o}, 1)));\\n        ${fo(e)}\\n      }\\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1],m=`int stride2 = ${r}Shape[3];`,b=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(f===u&&null==d)return t?`\\n      float ${s}(int row, int col, int depth, int depth2) {\\n        ${m}\\n        ${b}\\n        float texR = float(row);\\n        float texC =\\n            dot(vec3(col, depth, depth2),\\n                vec3(stride1, stride2, 1));\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `:`\\n      float ${s}(int row, int col, int depth, int depth2) {\\n        float texR = float(row);\\n        float texC =\\n            dot(vec3(col, depth, depth2),\\n                vec3(${i}, ${o}, 1));\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                   vec2(${f}.0, ${h}.0);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `;if(f===o&&null==d)return t?`\\n      float ${s}(int row, int col, int depth, int depth2) {\\n        float texR = dot(vec3(row, col, depth),\\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\\n        float texC = float(depth2);\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `:`\\n      float ${s}(int row, int col, int depth, int depth2) {\\n        float texR = dot(vec3(row, col, depth),\\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\\n        float texC = float(depth2);\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                  vec2(${f}.0, ${h}.0);\\n        return sampleTexture(${r}, uv);\\n      }\\n    `;const y=ho(r);if(t)return`\\n    float ${s}(int row, int col, int depth, int depth2) {\\n      // Explicitly use integer operations as dot() only works on floats.\\n      ${m}\\n      ${b}\\n      ${g}\\n      int index = row * stride0 + col * stride1 +\\n          depth * stride2 + depth2;\\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\\n      return sampleTexture(${r}, uv);\\n    }\\n  `;return`\\n    float ${s}(int row, int col, int depth, int depth2) {\\n      // Explicitly use integer operations as dot() only works on floats.\\n      int index = row * ${u} + col * ${i} +\\n          depth * ${o} + depth2;\\n      vec2 uv = uvFromFlat(${h}, ${f}, index + ${y});\\n      return sampleTexture(${r}, uv);\\n    }\\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t[4],o=t[3]*s,i=t[2]*o,u=t[1]*i,{newShape:c,keptDims:l}=a.util.squeezeShape(t);if(c.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\\n      ${so(go(e,c))}\\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\\n        return ${r}(${yo(t,l)});\\n      }\\n    `}if(e.shapeInfo.isUniform)return`\\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\\n        float index = dot(\\n          vec4(row, col, depth, depth2),\\n          vec4(${u}, ${i}, ${o}, ${s})) +\\n          depth3;\\n        ${fo(e)}\\n      }\\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===u&&null==d)return`\\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\\n        int texR = row;\\n        float texC = dot(vec4(col, depth, depth2, depth3),\\n                         vec4(${i}, ${o}, ${s}, 1));\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                   vec2(${f}.0, ${h}.0);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `;if(f===s&&null==d)return`\\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\\n        float texR = dot(\\n          vec4(row, col, depth, depth2),\\n          vec4(${t[1]*t[2]*t[3]},\\n               ${t[2]*t[3]}, ${t[3]}, 1));\\n        int texC = depth3;\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                  vec2(${f}.0, ${h}.0);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `;const m=ho(n);return`\\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\\n      // Explicitly use integer operations as dot() only works on floats.\\n      int index = row * ${u} + col * ${i} + depth * ${o} +\\n          depth2 * ${s} + depth3 + ${m};\\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\\n      return sampleTexture(${n}, uv);\\n    }\\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:o}=a.util.squeezeShape(t);if(s.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\\n      ${so(go(e,s))}\\n      float ${r}(int row, int col, int depth,\\n                    int depth2, int depth3, int depth4) {\\n        return ${r}(${yo(t,o)});\\n      }\\n    `}const i=t[5],u=t[4]*i,c=t[3]*u,l=t[2]*c,d=t[1]*l;if(e.shapeInfo.isUniform)return`\\n      float ${r}(int row, int col, int depth,\\n                  int depth2, int depth3, int depth4) {\\n        int index = round(dot(\\n          vec4(row, col, depth, depth2),\\n          vec4(${d}, ${l}, ${c}, ${u})) +\\n          dot(\\n            vec2(depth3, depth4),\\n            vec2(${i}, 1)));\\n        ${fo(e)}\\n      }\\n    `;const p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],m=h[1];if(m===d&&null==p)return`\\n      float ${r}(int row, int col, int depth,\\n                    int depth2, int depth3, int depth4) {\\n        int texR = row;\\n        float texC = dot(vec4(col, depth, depth2, depth3),\\n          vec4(${l}, ${c}, ${u}, ${i})) +\\n               float(depth4);\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                   vec2(${m}.0, ${f}.0);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `;if(m===i&&null==p)return`\\n      float ${r}(int row, int col, int depth,\\n                    int depth2, int depth3, int depth4) {\\n        float texR = dot(vec4(row, col, depth, depth2),\\n          vec4(${t[1]*t[2]*t[3]*t[4]},\\n               ${t[2]*t[3]*t[4]},\\n               ${t[3]*t[4]},\\n               ${t[4]})) + float(depth3);\\n        int texC = depth4;\\n        vec2 uv = (vec2(texC, texR) + halfCR) /\\n                  vec2(${m}.0, ${f}.0);\\n        return sampleTexture(${n}, uv);\\n      }\\n    `;const b=ho(n);return`\\n    float ${r}(int row, int col, int depth,\\n                  int depth2, int depth3, int depth4) {\\n      // Explicitly use integer operations as dot() only works on floats.\\n      int index = row * ${d} + col * ${l} + depth * ${c} +\\n          depth2 * ${u} + depth3 * ${i} + depth4 + ${b};\\n      vec2 uv = uvFromFlat(${f}, ${m}, index);\\n      return sampleTexture(${n}, uv);\\n    }\\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function oo(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Qs();return`\\n    vec4 ${n}() {\\n      return ${r.texture2D}(${t}, halfCR);\\n    }\\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=Qs();if(t)return`\\n    vec4 ${r}(int index) {\\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\\n      vec2 uv = packedUVfrom1D(\\n        packedTexShape[0], packedTexShape[1], index);\\n      return ${s.texture2D}(${n}, uv);\\n    }\\n  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\\n    vec4 ${r}(int index) {\\n      vec2 uv = packedUVfrom1D(\\n        ${o[0]}, ${o[1]}, index);\\n      return ${s.texture2D}(${n}, uv);\\n    }\\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],u=o[1],c=Qs();if(null!=o&&a.util.arraysEqual(n,o))return t?`\\n      vec4 ${s}(int row, int col) {\\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\\n\\n        return ${c.texture2D}(${r}, uv);\\n      }\\n    `:`\\n      vec4 ${s}(int row, int col) {\\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${u}.0, ${i}.0);\\n\\n        return ${c.texture2D}(${r}, uv);\\n      }\\n    `;if(t)return`\\n    vec4 ${s}(int row, int col) {\\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\\n      return ${c.texture2D}(${r}, uv);\\n    }\\n  `;const l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],d=Math.ceil(n[1]/2);return`\\n    vec4 ${s}(int row, int col) {\\n      vec2 uv = packedUVfrom2D(${d}, ${l[0]}, ${l[1]}, row, col);\\n      return ${c.texture2D}(${r}, uv);\\n    }\\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const r=[1,2],s=["b","row","col"];return`\\n        ${oo(go(e,n.slice(1)),t)}\\n        vec4 ${a}(int b, int row, int col) {\\n          return ${a}(${yo(s,r)});\\n        }\\n      `}const i=Qs();if(t)return`\\n    vec4 ${a}(int b, int row, int col) {\\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\\n      vec2 uv = packedUVfrom3D(\\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\\n      return ${i.texture2D}(${r}, uv);\\n    }\\n  `;const u=o[0],c=o[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return`\\n    vec4 ${a}(int b, int row, int col) {\\n      vec2 uv = packedUVfrom3D(\\n        ${u}, ${c}, ${d}, ${l}, b, row, col);\\n      return ${i.texture2D}(${r}, uv);\\n    }\\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Qs();if(t)return`\\n    vec4 ${r}(int b2, int b, int row, int col) {\\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\\n      texelsInBatch *= ${n}Shape[1];\\n      index = b2 * texelsInBatch + index;\\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\\n      int texR = index / packedTexShape[1];\\n      int texC = index - texR * packedTexShape[1];\\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);\\n    }\\n  `;const s=e.shapeInfo.logicalShape,o=s.length,i=e.shapeInfo.texShape,u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=u[0],l=u[1],d=Math.ceil(s[o-1]/2);let p=d*Math.ceil(s[o-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let e=2;e<o-1;e++)h=`int b${e}, `+h,p*=s[o-e-1],f=`b${e} * ${p} + `+f;return`\\n    vec4 ${r}(${h}) {\\n      int index = ${f};\\n      int texR = index / ${l};\\n      int texC = index - texR * ${l};\\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${c});\\n      return ${a.texture2D}(${n}, uv);\\n    }\\n  `}(e,t)}}const io="\\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\\n  int texR = index / texNumC;\\n  int texC = index - texR * texNumC;\\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\\n}\\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\\n  int texelIndex = index / 2;\\n  int texR = texelIndex / texNumC;\\n  int texC = texelIndex - texR * texNumC;\\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\\n}\\n",uo="\\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\\n  int texNumC, int row, int col) {\\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\\n  int texR = texelIndex / texNumC;\\n  int texC = texelIndex - texR * texNumC;\\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\\n}\\n",co="\\nvec2 packedUVfrom3D(int texNumR, int texNumC,\\n    int texelsInBatch, int texelsInLogicalRow, int b,\\n    int row, int col) {\\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\\n  int texR = index / texNumC;\\n  int texC = index - texR * texNumC;\\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\\n}\\n",lo="\\n  float getChannel(vec4 frag, vec2 innerDims) {\\n    vec2 modCoord = mod(innerDims, 2.);\\n    return modCoord.x == 0. ?\\n      (modCoord.y == 0. ? frag.r : frag.g) :\\n      (modCoord.y == 0. ? frag.b : frag.a);\\n  }\\n  float getChannel(vec4 frag, int dim) {\\n    float modCoord = mod(float(dim), 2.);\\n    return modCoord == 0. ? frag.r : frag.g;\\n  }\\n";function po(){return"\\n    int getOutputCoords() {\\n      return 0;\\n    }\\n  "}function ho(e){return`offset${e}`}function fo(e){const t=e.name,n=a.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\\n    for (int i = 0; i < ${n}; i++) {\\n      if (i == index) {\\n        return ${t}[i];\\n      }\\n    }\\n  `}function mo(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function bo(e,t,n){const{newShape:r,keptDims:s}=a.util.squeezeShape(t),o=t.length,i=e&&3===o&&1===t[0],u=i?t.slice(1):r,c=!e&&o>1&&!a.util.arraysEqual(t,n)&&r.length<o||i;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:s}}function go(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function yo(e,t){return t.map((t=>e[t])).join(", ")}function xo(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,s=t[n],o=s.shape;if(!a.util.arraysEqual(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(e.isUniform&&s.isUniform)return;const i=e.texShape,u=s.isUniform?null:s.texData.texShape;if(!a.util.arraysEqual(i,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${u} must match`)}))}function vo(e){return Object(a.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class Oo{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ys.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Qs();this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length),this.userCode=`\\n      ivec3 outCoordsFromFlatIndex(int index) {\\n        ${this.enableShapeUniforms?Js(["r","c","d"],e):Zs(["r","c","d"],e)}\\n        return ivec3(r, c, d);\\n      }\\n\\n      void main() {\\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\\n\\n        vec4 result = vec4(0.);\\n\\n        for (int i=0; i<4; i++) {\\n          int flatIndex = index + i;\\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\\n          result[i] = getA(rc.x, rc.y, rc.z);\\n        }\\n\\n        ${t.output} = result;\\n      }\\n    `}}class ko{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ys.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Qs();this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length),this.userCode=`\\n      ivec3 outCoordsFromFlatIndex(int index) {\\n        ${this.enableShapeUniforms?Js(["r","c","d"],e):Zs(["r","c","d"],e)}\\n        return ivec3(r, c, d);\\n      }\\n\\n      void main() {\\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\\n\\n        vec4 result = vec4(0.);\\n\\n        for (int i=0; i<4; i++) {\\n          int flatIndex = index + i;\\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\\n        }\\n\\n        ${t.output} = result;\\n      }\\n    `}}class wo{constructor(e){this.variableNames=["A"],this.outTexUsage=xs.DOWNLOAD;const t=Qs();this.outputShape=e,this.userCode=`\\n      ${no}\\n\\n      void main() {\\n        float x = getAAtOutCoords();\\n        ${t.output} = encode_float(x);\\n      }\\n    `}}class Io{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=xs.DOWNLOAD;const t=Qs();this.outputShape=e,this.userCode=`\\n      ${no}\\n\\n      void main() {\\n        ivec3 coords = getOutputCoords();\\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\\n        ${t.output} = encode_float(x);\\n      }\\n    `}}class So{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Qs();this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)"),this.userCode=`\\n      ${this.enableShapeUniforms?"\\n  int getFlatIndex(ivec3 coords) {\\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\\n  }\\n":to(e)}\\n\\n      void main() {\\n        ivec3 coords = getOutputCoords();\\n\\n        int flatIndex = getFlatIndex(coords);\\n        int offset = imod(flatIndex, 4);\\n\\n        flatIndex = idiv(flatIndex, 4, 1.);\\n\\n        int r = flatIndex / texShape[1];\\n        int c = imod(flatIndex, texShape[1]);\\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\\n        vec4 values = ${n.texture2D}(A, uv);\\n\\n        float result;\\n\\n        if(offset == 0) {\\n          result = values[0];\\n        } else if(offset == 1) {\\n          result = values[1];\\n        } else if(offset == 2) {\\n          result = values[2];\\n        } else {\\n          result = values[3];\\n        }\\n\\n        ${n.output} = vec4(${r}, 0., 0., 0.);\\n      }\\n    `}}class No{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Qs();this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let a=0;a<=1;a++){const s=2*t+a;r+=`\\n          localCoords = coords;\\n          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\\n          localCoords[2] += ${a};\\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\\n            localCoords[1] += ${t};\\n\\n            flatIndex = getFlatIndex(localCoords);\\n            offset = imod(flatIndex, 4);\\n\\n            flatIndex = idiv(flatIndex, 4, 1.);\\n\\n            int r = flatIndex / texShape[1];\\n            int c = imod(flatIndex, texShape[1]);\\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\\n            values = ${n.texture2D}(A, uv);\\n\\n            if (offset == 0) {\\n              result[${s}] = values[0];\\n            } else if (offset == 1) {\\n              result[${s}] = values[1];\\n            } else if (offset == 2) {\\n              result[${s}] = values[2];\\n            } else {\\n              result[${s}] = values[3];\\n            }\\n          }\\n        }\\n        `}this.userCode=`\\n        ${this.enableShapeUniforms?"\\n  int getFlatIndex(ivec3 coords) {\\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\\n  }\\n":to(e)}\\n\\n        void main() {\\n          ivec3 coords = getOutputCoords();\\n\\n          vec4 result = vec4(0.);\\n          int flatIndex, r, c, offset;\\n          ivec3 localCoords;\\n          vec2 uv;\\n          vec4 values;\\n\\n          ${r}\\n\\n          ${n.output} = ${a};\\n        }\\n    `}}function To(e){const t=Qs();return function(e,t){const n=Ds(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(Ss(e,(()=>e.shaderSource(n,t))),Ss(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\\n    precision highp float;\\n    ${t.attribute} vec3 clipSpacePos;\\n    ${t.attribute} vec2 uv;\\n    ${t.varyingVs} vec2 resultUV;\\n\\n    void main() {\\n      gl_Position = vec4(clipSpacePos, 1);\\n      resultUV = uv;\\n    }`)}function jo(e){return function(e,t){const n=Ds(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Ss(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Ss(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function $o(e){return function(e,t){const n=Ds(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Ss(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),Ss(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Co(e,t,n,r,s,o){!function(e,t){const n=Object(a.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const i=function(e){return Ds(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),u=e.TEXTURE_2D;return Ss(e,(()=>e.bindTexture(u,i))),Ss(e,(()=>e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),Ss(e,(()=>e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),Ss(e,(()=>e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST))),Ss(e,(()=>e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST))),Ss(e,(()=>e.texImage2D(u,0,r,t,n,0,s,o,null))),Ss(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),i}function Eo(e){return e.internalFormatFloat}function Ao(e){return e.internalFormatHalfFloat}function Ro(e){return e.downloadTextureFormat}function _o(e){return e.internalFormatPackedFloat}function Fo(e){return e.internalFormatPackedHalfFloat}function Do(e,t,n,r,a,s,o,i){const u=e,c=new Float32Array(function(e,t){const[n,r]=ws(e,t);return n*r*4}(s,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}class Mo{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=Object(a.env)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){ms[e]=t}(t,e)):this.gl=gs(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===Object(a.env)().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=Ts(this.gl,e),Gs(this.gl,t))this.textureHalfFloatExtension=Ts(this.gl,t);else if(Object(a.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Gs(this.gl,r))this.colorBufferHalfFloatExtension=Ts(this.gl,r);else if(Object(a.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Gs(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Gs(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=jo(this.gl),this.indexBuffer=$o(this.gl),this.framebuffer=function(e){return Ds(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=Is(this.gl,this.textureHalfFloatExtension)}get debug(){return Object(a.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ss(e,(()=>e.finish())),Ss(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),Ss(e,(()=>e.deleteFramebuffer(this.framebuffer))),Ss(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),Ss(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),Ss(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=Os(t,n);return Co(e,a,s,Eo(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=Os(t,n);return Co(e,a,s,Ao(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=Os(t,n);return Co(e,a,s,Ro(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){Ss(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?Ss(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):Ss(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),Ss(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,s){let o,i,u;Ss(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),i=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),i=e.FLOAT,u=s.internalFormatPackedFloat),o.set(a),Ss(e,(()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,i,o))),Ss(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=ws(t,n);return Co(e,a,s,Fo(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=ws(t,n);return Co(e,a,s,_o(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(_s(this.gl,this.framebuffer),this.outputTexture=null),Ss(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[a,s]=Os(t,n),o=new Uint8Array(t*n*4);return Ss(e,(()=>e.readPixels(0,0,a,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,o))),new Float32Array(o.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,a,s){return Do(this.gl,e,0,0,0,a,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const a=e.createBuffer();Ss(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a)));const s=16*t*n;return Ss(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ))),Ss(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),Ss(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Object(a.env)().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return Ss(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl,n=js(t,e);null==this.vertexShader&&(this.vertexShader=To(t));const r=function(e){return Ds(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);return Ss(t,(()=>t.attachShader(r,this.vertexShader))),Ss(t,(()=>t.attachShader(r,n))),function(e,t){if(Ss(e,(()=>e.linkProgram(t))),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,r),this.debug&&Cs(t,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return Ss(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Es(e,t,"clipSpacePos",n,3,20,0)&&Es(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Ss(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Cs(this.gl,this.program),Ss(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return Ds(e,(()=>e.getUniformLocation(t,n)),\'uniform "\'+n+\'" not present in program.\')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Ss(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),As(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=ws(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&Cs(this.gl,this.program),Fs(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),Ss(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ss(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Ts(this.gl,2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await a.util.repeatedTry((()=>this.disposed||this.isQueryAvailable(e,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||a.util.repeatedTry((()=>(this.pollItems(),0===this.itemsToPoll.length)))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Rs(this.gl,e,this.framebuffer),this.debug&&Fs(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(Rs(this.gl,this.outputTexture,this.framebuffer),this.debug&&Fs(this.gl)):_s(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;Rs(r,e,this.framebuffer),this.debug&&Fs(r),this.outputTexture=e,Ss(r,(()=>r.viewport(0,0,t,n))),Ss(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),Ss(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:Po,bincountImpl:Lo,bincountReduceImpl:Bo,ceilImpl:zo,concatImpl:Vo,equalImpl:Wo,expImpl:Uo,expm1Impl:Go,floorImpl:Ho,gatherNdImpl:qo,gatherV2Impl:Ko,greaterImpl:Xo,greaterEqualImpl:Yo,lessImpl:Qo,lessEqualImpl:Zo,linSpaceImpl:Jo,logImpl:ei,maxImpl:ti,maximumImpl:ni,minimumImpl:ri,multiplyImpl:ai,negImpl:si,notEqualImpl:oi,prodImpl:ii,rangeImpl:ui,rsqrtImpl:ci,sigmoidImpl:li,simpleAbsImpl:di,sliceImpl:pi,sparseFillEmptyRowsImpl:hi,sparseReshapeImpl:fi,sparseSegmentReductionImpl:mi,sqrtImpl:bi,stridedSliceImpl:gi,stringNGramsImpl:yi,stringSplitImpl:xi,stringToHashBucketFastImpl:vi,subImpl:Oi,tileImpl:ki,topKImpl:wi,transposeImpl:Ii,uniqueImpl:Si}=r;function Ni(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function Ti(e,t){return 1===t?[e]:Ni(e,t)}class ji{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;const t=e.length;if(0===t)this.userCode="\\n        void main() {\\n          setOutput(vec4(getA(), 0., 0., 0.));\\n        }\\n      ";else{const n=Ti("rc",t),r=mo(t),a=function(e,t,n){if(1===e)return`rc > ${t[0]}`;let r="";for(let a=e-2;a<e;a++)r+=`${n[a]} >= ${t[a]}`,a<e-1&&(r+="||");return r}(t,e,n),s=function(e,t,n,r){if(1===e)return"";const a=r.slice(-2);return`\\n    int r = ${a[0]};\\n    int c = ${a[1]};\\n    int rp1 = r + 1;\\n    int cp1 = c + 1;\\n\\n    bool cEdge = cp1 >= ${t};\\n    bool rEdge = rp1 >= ${n};\\n  `}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){const n=e.length,r=function(e,t){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let s=`${0===r?"r":"rp1"}, ${0===a?"c":"cp1"}`;for(let n=2;n<e;n++)s=`${t[t.length-1-n]},`+s;n.push(s)}return n}(n,t);if(1===n)return`getA(rc),\\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\\n            0, 0`;return`getA(${r[0]}),\\n          cEdge ? 0. : getA(${r[1]}),\\n          rEdge ? 0. : getA(${r[2]}),\\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(e,n);this.userCode=`\\n        void main() {\\n          ${r} rc = getOutputCoords();\\n\\n          if(${a}) {\\n            setOutput(vec4(0));\\n          } else {\\n            ${s}\\n\\n            setOutput(vec4(${o}));\\n          }\\n        }\\n      `}}}class $i{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\\n        ${t}\\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\\n          int flatIndex = getFlatIndex(thisRC);\\n\\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\\n\\n          result[${e}] =\\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\\n        ${e>0?"}":""}\\n      `}var r,a;this.userCode=`\\n      ${r=t,a=this.enableShapeUniforms,`\\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\\n      ${a?eo(["r","c","d"],"inputShape"):Zs(["r","c","d"],r)}\\n      return ivec3(r, c, d);\\n    }\\n  `}\\n      ${this.enableShapeUniforms?"\\n  int getFlatIndex(ivec3 coords) {\\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\\n  }\\n":to(e)}\\n\\n      void main() {\\n        ivec3 rc = getOutputCoords();\\n\\n        vec4 result = vec4(0.);\\n\\n        ivec3 thisRC;\\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\\n\\n        ${n}\\n\\n        setOutput(result);\\n      }\\n    `}}class Ci{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=Ai(t,n),a=Ri(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const s=Ei(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const e=this.freeTextures[a].shift();return this.usedTextures[a].push(e),e}let o;return r===vs.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===vs.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===vs.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===vs.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===vs.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const s=Ai(n,r),o=Ri(t,s,r);o in this.freeTextures||(this.freeTextures[o]=[]);const i=Ei(t,s,this.gpgpu.gl,this.gpgpu.textureConfig,r),u=Object(a.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==u&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const c=this.usedTextures[o],l=c.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(l,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Ei(e,t,n,r,a){const s=function(e,t){switch(e){case vs.PACKED_2X2_FLOAT32:return _o(t);case vs.PACKED_2X2_FLOAT16:return Fo(t);case vs.UNPACKED_FLOAT32:return Eo(t);case vs.UNPACKED_FLOAT16:return Ao(t);case vs.PACKED_4X1_UNSIGNED_BYTE:return Ro(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let o;if(a){const[t,n]=ws(e[0],e[1]);o=t*n}else{const[t,n]=Os(e[0],e[1]);o=t*n}return o*function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}(n,s)}function Ai(e,t){if(e===xs.UPLOAD)return vs.PACKED_2X2_FLOAT32;if(e===xs.RENDER||null==e)return function(e){return Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?vs.PACKED_2X2_FLOAT32:vs.UNPACKED_FLOAT32:e?vs.PACKED_2X2_FLOAT16:vs.UNPACKED_FLOAT16}(t);if(e===xs.DOWNLOAD||e===xs.PIXELS)return vs.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function Ri(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class _i{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length),this.userCode=`\\n      float unaryOperation(float x) {\\n        ${t}\\n      }\\n\\n      void main() {\\n        float x = getAAtOutCoords();\\n        float y = unaryOperation(x);\\n\\n        setOutput(y);\\n      }\\n    `}}const Fi="return abs(x);";const Di="return x;";class Mi{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length),this.userCode=`\\n      vec4 unaryOperation(vec4 x) {\\n        ${t}\\n      }\\n\\n      void main() {\\n        vec4 x = getAAtOutCoords();\\n        vec4 y = unaryOperation(x);\\n\\n        setOutput(y);\\n      }\\n    `}}class Pi{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;const t=e.length,n=Ti("rc",t),r=mo(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),o=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\\n      void main() {\\n        ${r} rc = getOutputCoords();\\n        vec4 packedInput = getA(${a});\\n\\n        setOutput(getChannel(packedInput, ${o}));\\n      }\\n    `}}const Li=a.kernel_impls.whereImpl,Bi={};const zi=Object(a.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class Vi extends a.KernelBackend{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Object(a.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){const e=gs(Object(a.env)().getNumber("WEBGL_VERSION"));this.binaryCache=((t=Object(a.env)().getNumber("WEBGL_VERSION"))in Bi||(Bi[t]={}),Bi[t]),this.gpgpu=new Mo(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var t;this.textureManager=new Ci(this.gpgpu),this.numMBBeforeWarning=null==Object(a.env)().global.screen?1024:Object(a.env)().global.screen.height*Object(a.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new a.DataStorage(this,Object(a.engine)())}nextDataId(){return Vi.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((Object(a.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(a.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:xs.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,s){if(Object(a.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:xs.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:s,slice:o,shape:i,isPacked:u}=t;if(null!=o){let t;t=u?new Mi(i,Di):new _i(i,Di);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const c=null!=this.activeTimers;let l,d;if(c&&(l=a.util.now()),"complex64"===r){const e=this.readSync(s.real.dataId),t=this.readSync(s.imag.dataId);d=a.backend_util.mergeRealAndImagArrays(e,t)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=a.util.now()-l),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:s,dtype:o,complexTensorInfos:i,isPacked:u}=t;if(null!=s){let t;t=u?new Mi(r,Di):new _i(r,Di);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(!Object(a.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Object(a.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,l,d=null;if("complex64"!==o&&Object(a.env)().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const t=this.texData.get(c.dataId);d=this.gpgpu.createBufferFromTexture(t.texture,...ks(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]),t=e[0],n=e[1];l=a.backend_util.mergeRealAndImagArrays(t,n)}else if(null==d)l=this.getValuesFromTexture(e);else{const e=a.util.sizeFromShape(r);l=this.gpgpu.downloadFloat32MatrixFromBuffer(d,e)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=d){const e=this.gpgpu.gl;Ss(e,(()=>e.deleteBuffer(d)))}const p=this.convertAndCacheOnCPU(e,l),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach((e=>e(p))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Object(a.engine)().removeDataId(e,this),this.pendingDeletes--),p}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>a.util.decodeString(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a.buffer)(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!Ns(n)){if(Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: \'tf.env().set(\'WEBGL_RENDER_FLOAT32_ENABLED\', true);\'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),s=a.util.sizeFromShape(t);if(Object(a.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...ks(t)).subarray(0,s);return this.disposeIntermediateTensorInfo(n),a}const o=Object(a.env)().getBool("WEBGL_PACK")&&!0===r,i=o?Bs(t):t,u=o?new Io(i):new wo(i),c=this.runWebGLProgram(u,[{shape:i,dtype:n,dataId:e}],"float32"),l=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture,l.texShape[0],l.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const s=a.util.flatten(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=a.util.flatten(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(s);i.kernelMs=a.util.sum(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:a.util.now(),endMs:null}}endTimer(e){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=a.util.now(),e)}async getQueryTime(e){if(Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:o}=this.texData.get(e),i=o&&o.origDataId||e,u=this.dataRefCount.get(i);u>1?this.dataRefCount.set(i,u-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=zi){return Object(a.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&a.util.sizeFromShape(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){a.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Li(e.shape,t)}packedUnaryOp(e,t,n){const r=new Mi(e.shape,t),s=this.compileAndRun(r,[e],n);return Object(a.engine)().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=di(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Fi,e.dtype);const t=new _i(e.shape,Fi),n=this.compileAndRun(t,[e]);return Object(a.engine)().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){const s=n.map((e=>a.util.encodeString(e)));r=this.write(s,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:r}=this.makeTensorInfo(e,t,n);return Object(a.engine)().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){const t=new Pi(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new ji(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[Ps(e.shape),...Ls(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Ps(t),...Ls(t)],s=new $i(a,n),o=[n],i=this.runWebGLProgram(s,[r],e.dtype,o,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:a}=t,s=Bs(r);let o;const i=ks(s);o=n?new ko(s):new Oo(s);const u=[i];return{dtype:a,shape:r,dataId:this.runWebGLProgram(o,[{shape:s,dtype:a,dataId:e}],a,u,!0).dataId}}runWebGLProgram(e,t,n,r,s=!1){const o=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(o.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===ys.DENSE){const t=ks(e.outputShape);i.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===a.util.sizeFromShape(o.shape))return i.values=a.util.getTypedArrayFromDType(o.dtype,0),o;const u=[],c=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&a.util.sizeFromShape(t.shape)<=Object(a.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),u.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!Vs(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),u.push(t),n=this.texData.get(t.dataId),e.shape=r}return this.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);const l={shape:o.shape,texData:i,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach((t=>{const s=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:i,uniformShape:u,keptDims:c}=bo(e.packedInputs,t.shape,o);let l="",d="",p="";if(1===u.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l=`${e[0]>1}_${e[1]>1}`}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){const e=a.util.computeStrides(u);p=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else d=`${u[0]>1}_${u[1]>1}`;const h=t.shape.length,f=2===u.length&&a.util.arraysEqual(t.shape,o),m=1===a.util.sizeFromShape(t.shape),b=a.backend_util.getBroadcastDims(t.shape,n.shape),g=!e.packedInputs&&h===n.shape.length&&a.util.arraysEqual(o,n.texData.texShape),y=e.packedInputs||u.length>2?"":`${o[0]>1}_${o[1]>1}`;r+=`${h}_${g}_${i?c:""}_${u.length}_${m}_${b}_${f}_${l}_${d}_${p}_${y}_${s}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${s}`}}));const s=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+s+`${Object(a.env)().getNumber("WEBGL_VERSION")}`,o}(e,c,l),p=this.getAndSaveBinary(d,(()=>function(e,t,n,r){const s=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=s.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=ao(s,i,t),c=e.createProgram(u);let l=null;const d=e.getUniformLocation(c,"NAN",!1);1===Object(a.env)().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));const p=!1,h={},f={},m={};for(let n=0;n<t.variableNames.length;n++){const r=t.variableNames[n];h[r]=e.getUniformLocation(c,r,p),h[`offset${r}`]=e.getUniformLocation(c,`offset${r}`,p),t.enableShapeUniforms&&(f[`${r}Shape`]=e.getUniformLocation(c,`${r}Shape`,p),m[`${r}TexShape`]=e.getUniformLocation(c,`${r}TexShape`,p))}let b,g,y;t.enableShapeUniforms&&(b=e.getUniformLocation(c,"outShape",p),y=e.getUniformLocation(c,"outShapeStrides",p),g=e.getUniformLocation(c,"outTexShape",p));const x=[];return t.customUniforms&&t.customUniforms.forEach(((t,n)=>{x[n]=e.getUniformLocation(c,t.name,p)})),{program:t,source:u,webGLProgram:c,uniformLocations:h,customUniformLocations:x,inShapeInfos:o,outShapeInfo:i,infLoc:l,nanLoc:d,inShapesLocations:f,inTexShapesLocations:m,outShapeLocation:b,outShapeStridesLocation:y,outTexShapeLocation:g}}(this.gpgpu,e,c,l))),h=null!=this.activeTimers;let f;h&&(f=this.startTimer()),function(e,t,n,r,s){t.program.enableShapeUniforms||(xo(t.inShapeInfos,n),xo([t.outShapeInfo],[r]));const o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===Object(a.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,r)=>{const s=t.program.variableNames[r],o=t.uniformLocations[s],i=t.uniformLocations[`offset${s}`],u=t.inShapesLocations[`${s}Shape`],c=t.inTexShapesLocations[`${s}TexShape`];if(u){const{uniformShape:r}=bo(t.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:e.gl.uniform1iv(u,new Int32Array(r));break;case 2:e.gl.uniform2iv(u,new Int32Array(r));break;case 3:e.gl.uniform3iv(u,new Int32Array(r));break;case 4:e.gl.uniform4iv(u,new Int32Array(r))}}if(c&&e.gl.uniform2i(c,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(a.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)}));const u=t.outShapeLocation;if(u)switch(r.shape.length){case 1:e.gl.uniform1iv(u,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(u,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(u,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(u,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=a.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&s&&t.program.customUniforms.forEach(((n,r)=>{const a=t.customUniformLocations[r],o=s[r];if("float"===n.type)e.gl.uniform1fv(a,o);else if("vec2"===n.type)e.gl.uniform2fv(a,o);else if("vec3"===n.type)e.gl.uniform3fv(a,o);else if("vec4"===n.type)e.gl.uniform4fv(a,o);else if("int"===n.type)e.gl.uniform1iv(a,o);else if("ivec2"===n.type)e.gl.uniform2iv(a,o);else if("ivec3"===n.type)e.gl.uniform3iv(a,o);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(a,o)}})),e.executeProgram()}(this.gpgpu,p,c,l,r),u.forEach((e=>this.disposeIntermediateTensorInfo(e))),h&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=Object(a.env)().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=a.util.now();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Object(a.env)().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===s){const e=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),e}return o}compileAndRun(e,t,n,r,a=!1){n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Object(a.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(a.tidy)((()=>{if(!Object(a.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Object(a.env)().getBool("DEBUG");Object(a.env)().set("DEBUG",!1);const t=this.abs(Object(a.scalar)(1e-8)).dataSync()[0];if(Object(a.env)().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:s,texture:o,usage:i,isPacked:u}=t;if(null!=o)return;const c=null!=this.activeTimers;let l;c&&(l=a.util.now());let d=t.texShape;if(null==d&&(d=function(e,t=!1){let n=Object(a.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map(((t,n)=>n>=e.length-2?a.util.nearestLargerEven(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=a.util.squeezeShape(e);e=t.newShape}let r=a.util.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=Ps(e);let n=2,s=2;return e.length&&([n,s]=Ls(e)),r=t*(n/2)*(s/2),a.util.sizeToSquarishShape(r).map((e=>2*e))}return a.util.sizeToSquarishShape(r)}(n,u),t.texShape=d),null!=s){const e=Bs(n);let o,i=d[1],p=d[0];const h=s instanceof Uint8Array||s instanceof Uint8ClampedArray;u?([i,p]=ws(d[0],d[1]),o=new No(e,h)):o=new So(e,h);const f=this.makeTensorInfo([p,i],r);this.texData.get(f.dataId).usage=h?xs.PIXELS:xs.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,p,s);const m=[[p,i]],b=!0,g=this.runWebGLProgram(o,[f],r,m,b),y=this.texData.get(g.dataId);t.texture=y.texture,t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,this.disposeIntermediateTensorInfo(f),this.texData.delete(g.dataId),t.values=null,c&&(this.uploadWaitMs+=a.util.now()-l)}else{const e=this.acquireTexture(d,i,r,u);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*a.util.bytesPerElement(t)}}Vi.nextDataId=0,a.device_util.isBrowser()&&Object(a.registerBackend)("webgl",(()=>new Vi),2);class Wi{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=vo(this.outputShape.length),this.userCode=`\\n      float binaryOperation(float a, float b) {\\n        ${e}\\n      }\\n\\n      void main() {\\n        float a = getAAtOutCoords();\\n        float b = getBAtOutCoords();\\n        setOutput(binaryOperation(a, b));\\n      }\\n    `}}class Ui{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,n);const s=this.outputShape.length;this.enableShapeUniforms=vo(s);let o="";if(r)if(0===s||1===a.util.sizeFromShape(this.outputShape))o="\\n          result.y = 0.;\\n          result.z = 0.;\\n          result.w = 0.;\\n        ";else{if(o=`\\n          ${mo(s)} coords = getOutputCoords();\\n        `,1===s)this.enableShapeUniforms?o+="\\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\\n            result.z = 0.;\\n            result.w = 0.;\\n          ":o+=`\\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\\n            result.z = 0.;\\n            result.w = 0.;\\n          `;else{const e=Ti("coords",s);this.enableShapeUniforms?o+=`\\n            bool nextRowOutOfBounds =\\n              (${e[s-2]} + 1) >= outShape[${s} - 2];\\n            bool nextColOutOfBounds =\\n              (${e[s-1]} + 1) >= outShape[${s} - 1];\\n            result.y = nextColOutOfBounds ? 0. : result.y;\\n            result.z = nextRowOutOfBounds ? 0. : result.z;\\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\\n          `:o+=`\\n            bool nextRowOutOfBounds =\\n              (${e[s-2]} + 1) >= ${this.outputShape[s-2]};\\n            bool nextColOutOfBounds =\\n              (${e[s-1]} + 1) >= ${this.outputShape[s-1]};\\n            result.y = nextColOutOfBounds ? 0. : result.y;\\n            result.z = nextRowOutOfBounds ? 0. : result.z;\\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\\n          `}}this.userCode=`\\n      vec4 binaryOperation(vec4 a, vec4 b) {\\n        ${e}\\n      }\\n\\n      void main() {\\n        vec4 a = getAAtOutCoords();\\n        vec4 b = getBAtOutCoords();\\n\\n        vec4 result = binaryOperation(a, b);\\n        ${o}\\n\\n        setOutput(result);\\n      }\\n    `}}function Gi(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Hi={kernelName:a.Identity,backendName:"webgl",kernelFunc:Gi};function qi(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),i=Gi({inputs:{x:r},backend:n}),u=Gi({inputs:{x:a},backend:n});return o.complexTensorInfos={real:i,imag:u},s}const Ki={kernelName:a.Complex,backendName:"webgl",kernelFunc:qi},Xi="return (a < 0.) ? b * a : a;",Yi="\\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\\n";const Qi={kernelName:a.LeakyRelu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{alpha:o}=r,i=n.makeTensorInfo([],"float32",a.util.createScalarValue(o,"float32")),u=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ui(Yi,s.shape,i.shape):new Wi(Xi,s.shape,i.shape),c=n.runWebGLProgram(u,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),c}},Zi="return (a < 0.) ? b * a : a;",Ji="\\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\\n";const eu={kernelName:a.Prelu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:s}=t,o=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ui(Ji,r.shape,s.shape):new Wi(Zi,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],"float32")}};function tu({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:o})=>{const{x:i}=s,u=o,c=r||i.dtype;if(u.shouldExecuteOnCPU([i])&&null!=n){const e=u.texData.get(i.dataId),t=n(e.values,c);return u.makeTensorInfo(i.shape,c,t)}let l;return l=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new Mi(i.shape,t):new _i(i.shape,e),u.runWebGLProgram(l,[i],c)}}function nu({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:o}){return({inputs:i,backend:u})=>{const{a:c,b:l}=i,d=u;if(r&&"complex64"===c.dtype){const t=d.texData.get(c.dataId),n=d.texData.get(l.dataId),[r,s]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,s={dataId:n.dataId,dtype:n.dtype,shape:c.shape},o={dataId:r.dataId,dtype:r.dtype,shape:l.shape},i=new Wi(e,c.shape,l.shape);return d.runWebGLProgram(i,[s,o],Object(a.upcastType)(n.dtype,r.dtype))})),o=qi({inputs:{real:r,imag:s},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(s),o}const p=o||Object(a.upcastType)(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){const e=d.texData.get(c.dataId).values,t=d.texData.get(l.dataId).values,n="string"===c.dtype?a.backend_util.fromUint8ToStringArray(e):e,r="string"===c.dtype?a.backend_util.fromUint8ToStringArray(t):t,[o,i]=s(c.shape,l.shape,n,r,p),u=d.makeTensorInfo(i,p);return d.texData.get(u.dataId).values=o,u}let h;return h=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new Ui(t,c.shape,l.shape,n):new Wi(e,c.shape,l.shape),d.runWebGLProgram(h,[c,l],p)}}function ru(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\\n  bvec4 isNaN = isnan(x);\\n\\n  result.r = isNaN.r ? x.r : result.r;\\n  result.g = isNaN.g ? x.g : result.g;\\n  result.b = isNaN.b ? x.b : result.b;\\n  result.a = isNaN.a ? x.a : result.a;\\n\\n  return result;\\n":"if (isnan(x)) return x;\\n  return (x < 0.0) ? 0.0 : x;\\n";if("elu"===e)return t?"\\n  vec4 result;\\n\\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\\n\\n  return result;\\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\\n  bvec4 isNaN = isnan(x);\\n\\n  result.r = isNaN.r ? x.r : result.r;\\n  result.g = isNaN.g ? x.g : result.g;\\n  result.b = isNaN.b ? x.b : result.b;\\n  result.a = isNaN.a ? x.a : result.a;\\n\\n  return result;\\n":"if (isnan(x)) return x;\\n  return (x < 0.0) ? 0.0 : min(6.0, x);\\n";if("prelu"===e)return t?Ji:Zi;if("leakyrelu"===e)return t?Yi:Xi;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class au{constructor(e,t,n,r=!1,a=!1,s=!1,o=null,i=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=vo(this.outputShape.length);const c=r?e[1]:e[2],l=Math.ceil(c/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",b="";o&&(m=i?`vec4 activation(vec4 a) {\\n          vec4 b = getPreluActivationWeightsAtOutCoords();\\n          ${o}\\n        }`:u?`vec4 activation(vec4 a) {\\n          vec4 b = getLeakyreluAlphaAtOutCoords();\\n          ${o}\\n        }`:`vec4 activation(vec4 x) {\\n          ${o}\\n        }`,b="result = activation(result);");const g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let y="rc.x",x="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(x=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\\n      ${m}\\n      // Don\'t use uniform for sharedDimensionPacked for performance.\\n      const float sharedDimension = ${l}.0;\\n\\n      vec4 dot2x2ARowBCol(ivec3 rc) {\\n        vec4 result = vec4(0);\\n        for (int i = 0; i < ${l}; i++) {\\n          int batchA = ${y};\\n          int batchB = ${x};\\n          vec4 a = getMatrixA(batchA, ${d});\\n          vec4 b = getMatrixB(batchB, ${p});\\n\\n          // These swizzled products need to be separately added.\\n          // See: https://github.com/tensorflow/tfjs/issues/1735\\n          result += (${h[0]} * ${f[0]});\\n          result += (${h[1]} * ${f[1]});\\n        }\\n        return result;\\n      }\\n\\n      void main() {\\n        ivec3 rc = getOutputCoords();\\n        vec4 result = dot2x2ARowBCol(rc);\\n\\n        ${g}\\n\\n        ${b}\\n\\n        setOutput(result);\\n      }\\n    `}}const su="return areal * breal - aimag * bimag;",ou="return areal * bimag + aimag * breal;";class iu{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,n),this.userCode=`\\n      float binaryOpComplex(\\n          float areal, float aimag, float breal, float bimag) {\\n        ${e}\\n      }\\n\\n      void main() {\\n        float areal = getARealAtOutCoords();\\n        float aimag = getAImagAtOutCoords();\\n        float breal = getBRealAtOutCoords();\\n        float bimag = getBImagAtOutCoords();\\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\\n      }\\n    `}}const uu="return a * b;";function cu(e){const{inputs:t,backend:n}=e,{a:r,b:s}=t,o=a.backend_util.upcastType(r.dtype,s.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(s.dataId),a=new iu(su,r.shape,s.shape),o=new iu(ou,r.shape,s.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:s.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:s.shape}],u=n.runWebGLProgram(a,i,"float32"),c=n.runWebGLProgram(o,i,"float32"),l=qi({inputs:{real:u,imag:c},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}if(n.shouldExecuteOnCPU([r,s])){const e=n.texData.get(r.dataId),t=n.texData.get(s.dataId),[a,i]=ai(r.shape,s.shape,e.values,t.values,o),u=n.makeTensorInfo(i,o);return n.texData.get(u.dataId).values=a,u}let i;return i=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ui(uu,r.shape,s.shape):new Wi(uu,r.shape,s.shape),n.runWebGLProgram(i,[r,s],o)}const lu={kernelName:a.Multiply,backendName:"webgl",kernelFunc:cu};function du(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{shape:o}=r,i=n,u=a.util.sizeFromShape(s.shape),c=a.util.inferFromImplicitShape(o,u),l=a.util.sizeFromShape(c);a.util.assert(u===l,(()=>`The new shape (${c}) has ${l} elements and the old shape (${s.shape}) has ${u} elements. The new shape and old shape must have the same number of elements.`));const d=i.texData.get(s.dataId);return!d.isPacked||Vs(s.shape,c)||null!==d.texture&&Vs(d.shape,c)?(i.incRef(s.dataId),{dataId:s.dataId,shape:c,dtype:s.dtype}):function(e,t,n){const r=[Ps(e.shape),...Ls(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Ps(t),...Ls(t)],o=new $i(s,r),i=[r],u=n.runWebGLProgram(o,[a],e.dtype,i,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(s,c,i)}const pu={kernelName:a.Reshape,backendName:"webgl",kernelFunc:du};class hu{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:s,outSize:o}=e;this.outputShape=[r,o];const i=4*Math.floor(n/4),u=n%4;let c="sumValue += dot(values, ones);";if(null!=t){const e=1/t;c=`sumValue += dot(values * ${a.util.isInt(e)?e.toPrecision(2):e}, ones);`}let l="";s%n>0&&(l=`\\n        if (inIdx < 0 || inIdx >= ${s}) {\\n          return 0.0;\\n        }\\n      `),this.userCode=`\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float getValue(int batch, int inIdx) {\\n        ${l}\\n        return getX(batch, inIdx);\\n      }\\n\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int outIdx = coords[1];\\n        int inOffset = outIdx * ${n};\\n\\n        float sumValue = 0.0;\\n\\n        for (int i = 0; i < ${i}; i += 4) {\\n          int inIdx = inOffset + i;\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            getValue(batch, inIdx + 3)\\n          );\\n\\n          ${c}\\n        }\\n\\n        int inIdx = inOffset + ${i};\\n        if (${1===u}) {\\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\\n\\n          ${c}\\n        } else if (${2===u}) {\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1), 0.0, 0.0);\\n\\n          ${c}\\n        } else if (${3===u}) {\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2), 0.0);\\n\\n          ${c}\\n        }\\n        setOutput(sumValue);\\n      }\\n    `}}class fu{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];let o="0.0",i="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",i="min"):"max"===t&&(o="-1.0 / 1e-20",i="max");let u=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");const c=4*Math.floor(n/4),l=n%4;let d=`\\n      if (${"sum"===t}) {\\n        sumValue += dot(values, ones);\\n      } else if (${"prod"===t}) {\\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\\n        prodValue *= tmp[0] * tmp[1];\\n      } else {\\n        minMaxValue = ${i}(values, minMaxValue);\\n        if (${"min"===t} || ${"max"===t}) {\\n          minMaxValue = ${i}(values, minMaxValue);\\n          bvec4 isNaN = isnan(values);\\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\\n            minMaxValue = vec4(NAN);\\n          }\\n        }\\n      }\\n    `,p="vec4";"all"===t?(o="1.0",d="\\n        bool reducedAllValue = all(values);\\n        float floatedReducedAllValue = float(reducedAllValue);\\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\\n      ",p="bvec4"):"any"===t&&(o="0.0",d="\\n        bool reducedAnyValue = any(values);\\n        float floatedReducedAnyValue = float(reducedAnyValue);\\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\\n      ",p="bvec4");let h="";a%n>0&&(h=`\\n        if (inIdx < 0 || inIdx >= ${a}) {\\n          return initializationValue;\\n        }\\n      `),this.userCode=`\\n      const float initializationValue = ${o};\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float getValue(int batch, int inIdx) {\\n        ${h}\\n        return getX(batch, inIdx);\\n      }\\n\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int outIdx = coords[1];\\n        int inOffset = outIdx * ${n};\\n\\n        vec4 minMaxValue = vec4(${o});\\n        float prodValue = 1.0;\\n        float sumValue = 0.0;\\n        float allValue = 1.0;\\n        float anyValue = 0.0;\\n\\n        for (int i = 0; i < ${c}; i += 4) {\\n          int inIdx = inOffset + i;\\n          ${p} values = ${p}(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            getValue(batch, inIdx + 3)\\n          );\\n\\n          ${d}\\n        }\\n\\n        int inIdx = inOffset + ${c};\\n        if (${1===l}) {\\n          ${p} values = ${p}(\\n            getValue(batch, inIdx),\\n            initializationValue,\\n            initializationValue,\\n            initializationValue\\n          );\\n\\n          ${d}\\n        } else if (${2===l}) {\\n          ${p} values = ${p}(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            initializationValue,\\n            initializationValue\\n          );\\n\\n          ${d}\\n        } else if (${3===l}) {\\n          ${p} values = ${p}(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            initializationValue\\n          );\\n\\n          ${d}\\n        }\\n        setOutput(${u});\\n      }\\n    `}}function mu(e,t,n,r){const s=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=a.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let o=e;for(let a=0;a<s.length;a++){const{inSize:i,windowSize:u,outSize:c}=s[a];let l,d;l="mean"===n?0===a?new hu({windowSize:u,inSize:i,batchSize:e.shape[0],outSize:c},i):new hu({windowSize:u,inSize:i,batchSize:e.shape[0],outSize:c}):new fu({windowSize:u,inSize:i,batchSize:e.shape[0],outSize:c},n),d=o,o=r.runWebGLProgram(l,[o],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return o}class bu{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=mo(this.rank),a=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\\n    void main() {\\n      ${r} resRC = getOutputCoords();\\n      setOutput(getA(${a}));\\n    }\\n    `}}class gu{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=mo(this.rank),a=Ni("rc",this.rank),s=new Array(this.rank);for(let e=0;e<t.length;e++)s[t[e]]=a[e];const o=`vec2(${s.slice(-2).join()})`,i=`++${a[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`\\n    void main() {\\n      ${r} rc = getOutputCoords();\\n      vec4 result = vec4(0.);\\n      result[0] = ${u};\\n      if(${i}) {\\n        result[1] = ${u};\\n      }\\n      --${a[this.rank-1]};\\n      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {\\n        result[2] = ${u};\\n        if(${i}) {\\n          result[3] = ${u};\\n        }\\n      }\\n      setOutput(result);\\n    }\\n    `}}function yu(e,t,n){const r=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new gu(e.shape,t):new bu(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function xu(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:i}=r;return function(e,t,n,r){const s=t,o=e.shape.length,i=a.util.parseAxisParam(s,e.shape);let u=i;const c=a.backend_util.getAxesPermutation(u,o),l=null!=c;let d=e;l&&(d=yu(e,c,r),u=a.backend_util.getInnerMostAxes(u.length,o)),a.backend_util.assertAxesAreInnerMostDims("sum",u,o);const[p,h]=a.backend_util.computeOutAndReduceShapes(d.shape,u);let f=p;n&&(f=a.backend_util.expandShapeToKeepDim(p,i));const m=a.util.sizeFromShape(h),b=du({inputs:{x:d},attrs:{shape:[a.util.sizeFromShape(e.shape)/m,m]},backend:r}),g=mu(b,Object(a.sumOutType)(e.dtype),"sum",r),y=du({inputs:{x:g},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(g),l&&r.disposeIntermediateTensorInfo(d),y}(s,o,i,n)}const vu={kernelName:a.Sum,backendName:"webgl",kernelFunc:xu};function Ou(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:s}=r,o=n,i=a.shape.length,u=new Array(i);for(let e=0;e<u.length;e++)u[e]=a.shape[s[e]];let c;if(o.shouldExecuteOnCPU([a])){const e=o.texData.get(a.dataId).values,t=Ii(e,a.shape,a.dtype,s,u);c=o.makeTensorInfo(u,a.dtype);o.texData.get(c.dataId).values=t}else c=yu(a,s,o);return c}const ku={kernelName:a.Transpose,backendName:"webgl",kernelFunc:Ou};function wu({a:e,b:t,transposeA:n,transposeB:r,backend:s,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:u=0,activation:c=null}){const l=e.shape.length,d=t.shape.length,p=n?e.shape[l-2]:e.shape[l-1],h=r?t.shape[d-1]:t.shape[d-2],f=n?e.shape[l-1]:e.shape[l-2],m=r?t.shape[d-2]:t.shape[d-1],b=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=a.util.sizeFromShape(b),x=a.util.sizeFromShape(g),v=y===x||1===y||1===x;a.util.assert(l>=2&&d>=2&&v,(()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${b}) and (${g}).`));const O=(y>x?e.shape.slice(0,-2):t.shape.slice(0,-2)).concat([f,m]);a.util.assert(p===h,(()=>`Error in matMul: inner shapes (${p}) and (${h}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const k=n?[y,p,f]:[y,f,p],w=r?[x,m,h]:[x,h,m],I=du({inputs:{x:e},backend:s,attrs:{shape:k}}),S=du({inputs:{x:t},backend:s,attrs:{shape:w}}),N=[I,S],T=Math.max(y,x),j=n?I.shape[1]:I.shape[2],$=null!=o,C=null!=i,E="leakyrelu"===c,A=null!=c?ru(c,!0):null;let R;if((1===f||1===m)&&j>1e3&&!1===($||C||E||null!=A)){let e=I,t=S;n&&(e=Ou({inputs:{x:I},backend:s,attrs:{perm:[0,2,1]}}),N.push(e)),r&&(t=Ou({inputs:{x:S},backend:s,attrs:{perm:[0,2,1]}}),N.push(t));const a=1===m;let o=e;1!==m&&(o=du({inputs:{x:e},backend:s,attrs:{shape:[T,j,1]}}),N.push(o));const i=1===m?2:1;let u=t;a&&(u=du({inputs:{x:t},backend:s,attrs:{shape:[T,1,j]}}),N.push(u));const c=cu({inputs:{a:o,b:u},backend:s});R=xu({inputs:{x:c},backend:s,attrs:{axis:i,keepDims:!0}}),N.push(c)}else{const c=Object(a.upcastType)(e.dtype,t.dtype),l=new au(k,w,[T,f,m],n,r,$,A,C,E),d=[I,S];if(null!=o&&d.push(o),C&&d.push(i),E){const e=s.makeTensorInfo([],"float32",a.util.createScalarValue(u,"float32"));d.push(e),N.push(e)}R=s.runWebGLProgram(l,d,c)}const _=du({inputs:{x:R},backend:s,attrs:{shape:O}});N.push(R);for(const e of N)s.disposeIntermediateTensorInfo(e);return _}const Iu={kernelName:a._FusedMatMul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:o,preluActivationWeights:i}=t,{transposeA:u,transposeB:c,activation:l,leakyreluAlpha:d}=r;return wu({a:a,b:s,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:i,leakyreluAlpha:d,activation:l})}},Su="return abs(x);";const Nu={kernelName:a.Abs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=di(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let s;return s=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Mi(r.shape,Su):new _i(r.shape,Su),n.runWebGLProgram(s,[r],r.dtype)}},Tu=tu({opSnippet:"if (isnan(x)) return x;\\n  if (abs(x) > 1.) {\\n    return NAN;\\n  }\\n  return acos(x);\\n"}),ju={kernelName:a.Acos,backendName:"webgl",kernelFunc:Tu},$u=tu({opSnippet:"if (isnan(x)) return x;\\n  if (x < 1.0) return NAN;\\nreturn log(x + sqrt(x * x - 1.0));"}),Cu={kernelName:a.Acosh,backendName:"webgl",kernelFunc:$u},Eu="return a + b;",Au=nu({opSnippet:Eu,packedOpSnippet:Eu,supportsComplex:!0,cpuKernelImpl:Po}),Ru={kernelName:a.Add,backendName:"webgl",kernelFunc:Au};class _u{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\\n      void main() {\\n        ${n.join("\\n        ")}\\n\\n        float result = ${r};\\n        setOutput(result);\\n      }\\n    `}}class Fu{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\\n      void main() {\\n        ${n.join("\\n        ")}\\n\\n        vec4 result = ${r};\\n        setOutput(result);\\n      }\\n    `}}const Du={kernelName:a.AddN,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,s=n;if(1===s.length)return Gi({inputs:{x:s[0]},backend:r});if(s.length>Object(a.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(s.length/2),n=e({inputs:s.slice(0,t),backend:r}),a=e({inputs:s.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const o=s.map((e=>e.dtype)).reduce(((e,t)=>Object(a.upcastType)(e,t))),i=s.map((e=>e.shape)),u=Object(a.env)().getBool("WEBGL_PACK")?new Fu(s[0].shape,i):new _u(s[0].shape,i);return r.runWebGLProgram(u,s,o)}};const Mu={kernelName:a.All,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:i}=r,u=s.shape.length,c=a.util.parseAxisParam(o,s.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,u);let p=s;null!=d&&(p=Ou({inputs:{x:s},backend:n,attrs:{perm:d}}),l=a.backend_util.getInnerMostAxes(l.length,u)),a.backend_util.assertAxesAreInnerMostDims("all",l,u);const[h,f]=a.backend_util.computeOutAndReduceShapes(p.shape,l),m=du({inputs:{x:p},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(f)]}}),b=mu(m,m.dtype,"all",n);let g;if(i){g=du({inputs:{x:b},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(h,c)}})}else g=du({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),null!=d&&n.disposeIntermediateTensorInfo(p),g}};const Pu={kernelName:a.Any,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:i}=r,u=s.shape.length,c=a.util.parseAxisParam(o,s.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,u);let p=s;null!=d&&(p=Ou({inputs:{x:s},backend:n,attrs:{perm:d}}),l=a.backend_util.getInnerMostAxes(l.length,u)),a.backend_util.assertAxesAreInnerMostDims("any",l,u);const[h,f]=a.backend_util.computeOutAndReduceShapes(p.shape,l),m=du({inputs:{x:p},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(f)]}}),b=mu(m,m.dtype,"any",n);let g;if(i){g=du({inputs:{x:b},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(h,c)}})}else g=du({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),null!=d&&n.disposeIntermediateTensorInfo(p),g}};class Lu{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s];const o="max"===t?">":"<",i=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int outIdx = coords[1];\\n        int inOffset = outIdx * ${r};\\n\\n        int bestIndex = inOffset;\\n        float bestValue = getA(batch, bestIndex);\\n\\n        for (int i = 0; i < ${r}; i++) {\\n          int inIdx = ${i};\\n          float candidate = getA(batch, inIdx);\\n          if (candidate ${o} bestValue) {\\n            bestValue = candidate;\\n            bestIndex = inIdx;\\n          }\\n        }\\n        setOutput(float(bestIndex));\\n      }\\n    `}}class Bu{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,a.util.assert(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const s=e[e.length-1],o=Math.ceil(s/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,u=i.length,c=mo(u),l=Ti("coords",u);let d,p;if(1===o){p=u+1;const e=mo(p);d=`\\n        ${e} sourceLocR = ${e}(${l.join()}, 0);\\n        ++${l[u-1]};\\n        ${e} sourceLocG = ${e}(${l.join()}, 0);\\n        ++${l[u-2]};\\n        ${e} sourceLocA = ${e}(${l.join()}, 0);\\n        --${l[u-1]};\\n        ${e} sourceLocB = ${e}(${l.join()}, 0);\\n        --${l[u-2]};`}else p=u,d=`\\n        ${c} sourceLocR = coords;\\n        ++${l[u-1]};\\n        ${c} sourceLocG = coords;\\n        ++${l[u-2]};\\n        ${c} sourceLocA = coords;\\n        --${l[u-1]};\\n        ${c} sourceLocB = coords;\\n        --${l[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,p),f="."+h[p-1],m=h.map((e=>"int "+e)),b=Ti("sourceLocR",p-1).concat("inIdx.r"),g=Ti("sourceLocG",p-1).concat("inIdx.g"),y=Ti("sourceLocB",p-1).concat("inIdx.b"),x=Ti("sourceLocA",p-1).concat("inIdx.a"),v="max"===n?"greaterThan":"lessThan",O=r?"":`\\n          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),\\n                             getBestIndicesAChannel(${g.join()}),\\n                             getBestIndicesAChannel(${y.join()}),\\n                             getBestIndicesAChannel(${x.join()})));`,k=`vec4(\\n            getAChannel(${b.join()}),\\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\\n            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,w=r?"":`\\n      float getBestIndicesAChannel(${m.join()}) {\\n        return getChannel(getBestIndicesA(${h.join()}),\\n                                          vec2(${h.slice(-2).join()}));\\n      }`;this.userCode=`\\n      float getAChannel(${m.join()}) {\\n        return getChannel(getA(${h.join()}),\\n                               vec2(${h.slice(-2).join()}));\\n      }\\n      ${w}\\n      void main() {\\n        ${c} coords = getOutputCoords();\\n        bool hasNextCol = ${l[u-1]} < ${i[u-1]-1};\\n        bool hasNextRow = ${l[u-2]} < ${i[u-2]-1};\\n        ${d}\\n        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},\\n          sourceLocB${f}, sourceLocA${f}) * ${t};\\n        ivec4 inIdx = srcIdx;\\n        vec4 bestIndex = vec4(inIdx);\\n        vec4 bestValue = ${k};\\n\\n        for (int i = 0; i < ${t}; i++) {\\n          inIdx = srcIdx;\\n          ${O}\\n          vec4 candidate = ${k};\\n          bvec4 nan = isnan(candidate);\\n          bvec4 replace = bvec4(\\n            vec4(${v}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\\n\\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\\n                           replace.y  ? candidate.y : bestValue.y,\\n                           replace.z  ? candidate.z : bestValue.z,\\n                           replace.w  ? candidate.w : bestValue.w);\\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\\n          srcIdx++;\\n        }\\n        setOutput(bestIndex);\\n      }\\n    `}}function zu(e,t,n,r=null){let s=t.shape[0],o=t.shape[1];null!=r&&(s=r.shape[0],o=r.shape[1]);const i=a.backend_util.computeOptimalWindowSize(o),u={windowSize:i,inSize:o,batchSize:s,outSize:Math.ceil(o/i)},c=new Lu(u,n,null==r),l=[t];null!=r&&l.push(r);const d=e.runWebGLProgram(c,l,"int32");if(1===d.shape[1])return d;const p=zu(e,t,n,d);return e.disposeIntermediateTensorInfo(d),p}function Vu(e,t,n,r=null){const s=null!=r?r.shape:t.shape,o=s[s.length-1],i=a.backend_util.computeOptimalWindowSize(o),u=new Bu(s,i,n,null==r),c=null==r?[t]:[t,r],l=e.runWebGLProgram(u,c,"int32");if(l.shape.length===t.shape.length){const r=Vu(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function Wu(e,t,n,r){const s=[n];if(a.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,t.shape.length),!Object(a.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let i=t;null!==o&&o.isPacked&&(i=e.unpackTensor(t),n.push(i));const[u,c]=a.backend_util.computeOutAndReduceShapes(i.shape,s),l=a.util.sizeFromShape(c),d=du({inputs:{x:i},backend:e,attrs:{shape:[-1,l]}});n.push(d);const p=zu(e,d,r);n.push(p);const h=du({inputs:{x:p},backend:e,attrs:{shape:u}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),h}return Vu(e,t,r)}const Uu={kernelName:a.ArgMax,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o}=r;let i=a.util.parseAxisParam(o,s.shape);const u=a.backend_util.getAxesPermutation(i,s.shape.length);let c=s;const l=[];null!=u&&(c=Ou({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(c),i=a.backend_util.getInnerMostAxes(i.length,c.shape.length)),a.backend_util.assertAxesAreInnerMostDims("argMax",[i[0]],c.shape.length);const d=Wu(n,c,i[0],"max");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}};const Gu={kernelName:a.ArgMin,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o}=r;let i=a.util.parseAxisParam(o,s.shape);const u=a.backend_util.getAxesPermutation(i,s.shape.length);let c=s;const l=[];null!=u&&(c=Ou({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(c),i=a.backend_util.getInnerMostAxes(i.length,c.shape.length)),a.backend_util.assertAxesAreInnerMostDims("argMin",[i[0]],c.shape.length);const d=Wu(n,c,i[0],"min");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},Hu=tu({opSnippet:"if (isnan(x)) return x;\\n  if (abs(x) > 1.) {\\n    return NAN;\\n  }\\n  return asin(x);\\n"}),qu={kernelName:a.Asin,backendName:"webgl",kernelFunc:Hu},Ku=tu({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),Xu={kernelName:a.Asinh,backendName:"webgl",kernelFunc:Ku},Yu=tu({opSnippet:"if (isnan(x)) return x;\\n  return atan(x);\\n"}),Qu={kernelName:a.Atan,backendName:"webgl",kernelFunc:Yu},Zu=nu({opSnippet:"\\n  if (isnan(a)) return a;\\n  if (isnan(b)) return b;\\n\\n  return atan(a, b);\\n",packedOpSnippet:"\\n  vec4 result = atan(a, b);\\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\\n  \\n  result.r = isNaN.r > 0. ? NAN : result.r;\\n  result.g = isNaN.g > 0. ? NAN : result.g;\\n  result.b = isNaN.b > 0. ? NAN : result.b;\\n  result.a = isNaN.a > 0. ? NAN : result.a;\\n\\n  return result;\\n"}),Ju={kernelName:a.Atan2,backendName:"webgl",kernelFunc:Zu},ec=tu({opSnippet:"if (isnan(x)) return x;\\n  if ((x < -1.0) || (x > 1.0)) return NAN;\\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),tc={kernelName:a.Atanh,backendName:"webgl",kernelFunc:ec};class nc{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideHeight,i=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let g="0.0";if(f||(g="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\\n        const ivec2 strides = ivec2(${o}, ${i});\\n        const ivec2 pads = ivec2(${p}, ${h});\\n\\n        void main() {\\n          ivec4 coords = getOutputCoords();\\n          int batch = coords[0];\\n          int d = coords[3];\\n\\n          ivec2 xRCCorner = coords.yz * strides - pads;\\n          int xRCorner = xRCCorner.x;\\n          int xCCorner = xRCCorner.y;\\n\\n          // max/min x(?, ?, d) to get y(yR, yC, d).\\n          // ? = to be determined\\n          float minMaxValue = 0.0;\\n          float minMaxValueFound = 0.0;\\n          int minMaxPosition = 0;\\n          float avgValue = 0.0;\\n\\n          for (int wR = 0; wR < ${l};\\n              wR += ${u}) {\\n            int xR = xRCorner + wR;\\n\\n            if (xR < 0 || xR >= ${e.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int wC = 0; wC < ${d};\\n                wC += ${c}) {\\n              int xC = xCCorner + wC;\\n\\n              if (xC < 0 || xC >= ${e.inWidth}) {\\n                continue;\\n              }\\n\\n              float value = getX(batch, xR, xC, d);\\n\\n              // If a min / max value has already been found, use it. If not,\\n              // use the current value.\\n              float currMinMaxValue = mix(\\n                  value, minMaxValue, minMaxValueFound);\\n              if (value ${t} currMinMaxValue) {\\n                minMaxValue = value;\\n                minMaxValueFound = 1.0;\\n                minMaxPosition = ${r?a?m:b:`wR * ${d} + wC`};\\n              }\\n            }\\n          }\\n          setOutput(float(minMaxPosition));\\n        }\\n      `)}let y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(y="avgValue / count");const x=4*Math.floor(s/4),v=s%4,O=`\\n      if (${f}) {\\n        avgValue += dot(values, ones);\\n      } else {\\n        minMaxValue = max(values, minMaxValue);\\n      }\\n    `;this.userCode=`\\n      const ivec2 strides = ivec2(${o}, ${i});\\n      const ivec2 pads = ivec2(${p}, ${h});\\n      const float initializationValue = ${g};\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float count = 0.0;\\n\\n      float getValue(int batch, int xR, int xC, int d) {\\n        if (xC < 0 || xC >= ${e.inWidth}) {\\n          return initializationValue;\\n        }\\n        count += 1.0;\\n        return getX(batch, xR, xC, d);\\n      }\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int d = coords[3];\\n\\n        ivec2 xRCCorner = coords.yz * strides - pads;\\n        int xRCorner = xRCCorner.x;\\n        int xCCorner = xRCCorner.y;\\n\\n        // max/min x(?, ?, d) to get y(yR, yC, d).\\n        // ? = to be determined\\n        vec4 minMaxValue = vec4(${g});\\n        float avgValue = 0.0;\\n        count = 0.0;\\n\\n        for (int wR = 0; wR < ${l};\\n            wR += ${u}) {\\n          int xR = xRCorner + wR;\\n\\n          if (xR < 0 || xR >= ${e.inHeight}) {\\n            continue;\\n          }\\n\\n          for (int wC = 0; wC < ${x}; wC += 4) {\\n            int xC = xCCorner + wC * ${c};\\n\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + ${c}, d),\\n              getValue(batch, xR, xC + 2 * ${c}, d),\\n              getValue(batch, xR, xC + 3 * ${c}, d)\\n            );\\n\\n            ${O}\\n          }\\n\\n          int xC = xCCorner + ${x};\\n          if (${1===v}) {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              initializationValue,\\n              initializationValue,\\n              initializationValue\\n            );\\n\\n            ${O}\\n          } else if (${2===v}) {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + ${c}, d),\\n              initializationValue,\\n              initializationValue\\n            );\\n\\n            ${O}\\n          } else if (${3===v}) {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + ${c}, d),\\n              getValue(batch, xR, xC + 2 * ${c}, d),\\n              initializationValue\\n            );\\n\\n            ${O}\\n          }\\n        }\\n        setOutput(${y});\\n      }\\n    `}}class rc{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,b=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y="avg"===t;let x="0.0";if(y||(x="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\\n        const ivec3 strides =\\n            ivec3(${o}, ${i}, ${u});\\n        const ivec3 pads = ivec3(${m}, ${b}, ${g});\\n\\n        void main() {\\n          ivec5 coords = getOutputCoords();\\n          int batch = coords.x;\\n          int ch = coords.u;\\n\\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\\n          int xDCorner = xCorner.x;\\n          int xRCorner = xCorner.y;\\n          int xCCorner = xCorner.z;\\n\\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\\n          // ? = to be determined\\n          float minMaxValue = 0.0;\\n          float minMaxValueFound = 0.0;\\n          int minMaxPosition = 0;\\n\\n          for (int wD = 0; wD < ${p};\\n              wD += ${c}) {\\n            int xD = xDCorner + wD;\\n\\n            if (xD < 0 || xD >= ${e.inDepth}) {\\n              continue;\\n            }\\n\\n            for (int wR = 0; wR < ${h};\\n                wR += ${l}) {\\n              int xR = xRCorner + wR;\\n\\n              if (xR < 0 || xR >= ${e.inHeight}) {\\n                continue;\\n              }\\n\\n              for (int wC = 0; wC < ${f};\\n                  wC += ${d}) {\\n                int xC = xCCorner + wC;\\n\\n                if (xC < 0 || xC >= ${e.inWidth}) {\\n                  continue;\\n                }\\n\\n                float value = getX(batch, xD, xR, xC, ch);\\n\\n                // If a min / max value has already been found, use it. If not,\\n                // use the current value.\\n                float currMinMaxValue = mix(\\n                    value, minMaxValue, minMaxValueFound);\\n                if (value ${t} currMinMaxValue) {\\n                  minMaxValue = value;\\n                  minMaxValueFound = 1.0;\\n                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\\n                      wR * ${f} + wC`};\\n                }\\n              }\\n            }\\n          }\\n          setOutput(float(minMaxPosition));\\n        }\\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / count");const O=4*Math.floor(s/4),k=s%4,w=`\\n      if (${y}) {\\n        avgValue += dot(values, ones);\\n      } else {\\n        minMaxValue = max(values, minMaxValue);\\n      }\\n    `;this.userCode=`\\n      const ivec3 strides =\\n        ivec3(${o}, ${i}, ${u});\\n      const ivec3 pads = ivec3(${m}, ${b}, ${g});\\n      const float initializationValue = ${x};\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float count = 0.0;\\n\\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\\n        if (xC < 0 || xC >= ${e.inWidth}) {\\n          return initializationValue;\\n        }\\n        count += 1.0;\\n        return getX(batch, xD, xR, xC, ch);\\n      }\\n\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int ch = coords.u;\\n\\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\\n        int xDCorner = xCorner.x;\\n        int xRCorner = xCorner.y;\\n        int xCCorner = xCorner.z;\\n\\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\\n        // ? = to be determined\\n        vec4 minMaxValue = vec4(${x});\\n        float avgValue = 0.0;\\n        count = 0.0;\\n\\n        for (int wD = 0; wD < ${p};\\n            wD += ${c}) {\\n          int xD = xDCorner + wD;\\n\\n          if (xD < 0 || xD >= ${e.inDepth}) {\\n            continue;\\n          }\\n\\n          for (int wR = 0; wR < ${h};\\n            wR += ${l}) {\\n            int xR = xRCorner + wR;\\n\\n            if (xR < 0 || xR >= ${e.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int wC = 0; wC < ${O}; wC += 4) {\\n              int xC = xCCorner + wC * ${d};\\n\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                getValue(batch, xD, xR, xC + ${d}, ch),\\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\\n              );\\n\\n              ${w}\\n            }\\n\\n            int xC = xCCorner + ${O};\\n            if (${1===k}) {\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                initializationValue,\\n                initializationValue,\\n                initializationValue\\n              );\\n\\n              ${w}\\n            } else if (${2===k}) {\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                getValue(batch, xD, xR, xC + ${d}, ch),\\n                initializationValue,\\n                initializationValue\\n              );\\n\\n              ${w}\\n            } else if (${3===k}) {\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                getValue(batch, xD, xR, xC + ${d}, ch),\\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\\n                initializationValue\\n              );\\n\\n              ${w}\\n            }\\n          }\\n          setOutput(${v});\\n        }\\n      }\\n    `}}const ac={kernelName:a.AvgPool,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;Xs(s,"avgPool");const{filterSize:o,strides:i,pad:u,dimRoundingMode:c}=r;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations \'1\'`));const l=a.backend_util.computePool2DInfo(s.shape,o,i,1,u,c);if(1===l.filterWidth&&1===l.filterHeight&&a.util.arraysEqual(l.inShape,l.outShape))return Gi({inputs:{x:s},backend:n});const d=new nc(l,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}};const sc={kernelName:a.AvgPool3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:i,pad:u,dimRoundingMode:c,dataFormat:l}=r,d=a.backend_util.computePool3DInfo(s.shape,o,i,[1,1,1],u,c,l),p=new rc(d,"avg",!1);return n.runWebGLProgram(p,[s],"float32")}};class oc{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,i=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=i-1-e.padInfo.top,l=u-1-e.padInfo.left,d=1/(t*n);this.userCode=`\\n      const ivec2 pads = ivec2(${c}, ${l});\\n      const float avgMultiplier = float(${d});\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n\\n        ivec2 dyRCCorner = coords.yz - pads;\\n        int dyRCorner = dyRCCorner.x;\\n        int dyCCorner = dyRCCorner.y;\\n\\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n        for (int wR = 0; wR < ${i};\\n            wR += ${s}) {\\n          float dyR = float(dyRCorner + wR) / ${r}.0;\\n\\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\\n            continue;\\n          }\\n          int idyR = int(dyR);\\n\\n          for (int wC = 0; wC < ${u};\\n            wC+= ${o}) {\\n            float dyC = float(dyCCorner + wC) / ${a}.0;\\n\\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                fract(dyC) > 0.0) {\\n              continue;\\n            }\\n            int idyC = int(dyC);\\n\\n            float dyValue = getDy(b, idyR, idyC, d);\\n\\n            dotProd += dyValue * avgMultiplier;\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class ic{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=d-1-e.padInfo.top,m=p-1-e.padInfo.left,b=1/(t*n*r);this.userCode=`\\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\\n      const float avgMultiplier = float(${b});\\n\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int ch = coords.u;\\n\\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\\n        int dyDCorner = dyCorner.x;\\n        int dyRCorner = dyCorner.y;\\n        int dyCCorner = dyCorner.z;\\n\\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\\n        // dx(xD, xR, xC, ch).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n\\n        for (int wD = 0; wD < ${l};\\n            wD += ${i}) {\\n          float dyD = float(dyDCorner + wD) / ${a}.0;\\n\\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\\n            continue;\\n          }\\n          int idyD = int(dyD);\\n\\n          for (int wR = 0; wR < ${d};\\n              wR += ${u}) {\\n            float dyR = float(dyRCorner + wR) / ${s}.0;\\n\\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\\n                fract(dyR) > 0.0) {\\n              continue;\\n            }\\n            int idyR = int(dyR);\\n\\n            for (int wC = 0; wC < ${p};\\n                wC += ${c}) {\\n              float dyC = float(dyCCorner + wC) / ${o}.0;\\n\\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                  fract(dyC) > 0.0) {\\n                continue;\\n              }\\n              int idyC = int(dyC);\\n\\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\\n\\n              dotProd += dyValue * avgMultiplier;\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}const uc={kernelName:a.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,i=o,{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,p=a.backend_util.computePool3DInfo(i.shape,u,c,[1,1,1],l,d),h=new ic(p);return n.runWebGLProgram(h,[s],i.dtype)}};const cc={kernelName:a.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,i=o;Xs([s,o],"avgPoolGrad");const{filterSize:u,strides:c,pad:l}=r,d=a.backend_util.computePool2DInfo(i.shape,u,c,1,l),p=new oc(d);return n.runWebGLProgram(p,[s],i.dtype)}};const lc={kernelName:a.BatchMatMul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:o,transposeB:i}=r;return wu({a:a,b:s,transposeA:o,transposeB:i,backend:n})}};class dc{constructor(e,t,n,r,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],a.backend_util.assertAndGetBroadcastShape(e,t),a.backend_util.assertAndGetBroadcastShape(e,n);let i="0.0";null!=r&&(a.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let u="1.0";null!=s&&(a.backend_util.assertAndGetBroadcastShape(e,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\\n      void main() {\\n        float x = getXAtOutCoords();\\n        float mean = getMeanAtOutCoords();\\n        float variance = getVarianceAtOutCoords();\\n        float offset = ${i};\\n        float scale = ${u};\\n        float inv = scale * inversesqrt(variance + float(${o}));\\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\\n      }\\n    `}}class pc{constructor(e,t,n,r,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],a.backend_util.assertAndGetBroadcastShape(e,t),a.backend_util.assertAndGetBroadcastShape(e,n);let i="vec4(0.0)";null!=r&&(a.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let u="vec4(1.0)";null!=s&&(a.backend_util.assertAndGetBroadcastShape(e,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\\n      void main() {\\n        vec4 offset = ${i};\\n        vec4 scale = ${u};\\n\\n        vec4 x = getXAtOutCoords();\\n        vec4 mean = getMeanAtOutCoords();\\n        vec4 variance = getVarianceAtOutCoords();\\n\\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\\n\\n        setOutput((x - mean) * inv + offset);\\n      }\\n    `}}const hc={kernelName:a.FusedBatchNorm,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:s,variance:o,offset:i,scale:u}=e;a.util.assert(s.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),a.util.assert(null==i||s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),a.util.assert(null==u||s.shape.length===u.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:c}=n;null==c&&(c=.001);const l=[r,s,o];let d=null;null!=i&&(d=i.shape,l.push(i));let p=null;null!=u&&(p=u.shape,l.push(u));const h=Object(a.env)().getBool("WEBGL_PACK_NORMALIZATION")?new pc(r.shape,s.shape,o.shape,d,p,c):new dc(r.shape,s.shape,o.shape,d,p,c);return t.runWebGLProgram(h,l,l[0].dtype)}};class fc{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=mo(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return mc.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\\n        ${t} sourceLoc;\\n        ${t} coords = getOutputCoords();\\n        ${e.map(((e,t)=>`sourceLoc.${mc[t]} = start[${t}] + coords.${mc[t]};`)).join("\\n")}\\n      `,this.userCode=`\\n      void main() {\\n        ${r}\\n        setOutput(getSource(${n}));\\n      }\\n    `}}const mc=["x","y","z","w","u","v"];class bc{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=mo(this.rank),n=Ti("coords",this.rank),r=Ti("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${a})`,o=`\\n      result.x = ${s};\\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\\n        ++${r[this.rank-1]};\\n        result.y = ${s};\\n        --${r[this.rank-1]};\\n      }\\n    `,i=1===this.rank?"":`\\n      --${n[this.rank-1]};\\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\\n        ++${r[this.rank-2]};\\n        result.z = ${s};\\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\\n          ++${r[this.rank-1]};\\n          result.w = ${s};\\n        }\\n      }\\n    `,u=this.rank<=4?`sourceLoc = coords +\\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\\n");this.userCode=`\\n      void main() {\\n        ${t} coords = getOutputCoords();\\n        ${t} sourceLoc;\\n        ${u}\\n        vec4 result = vec4(0.);\\n        ${o}\\n        ${i}\\n        setOutput(result);\\n      }\\n    `}}function gc(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:o,size:i}=r,[u,c]=a.slice_util.parseSliceParams(s,o,i);if(a.slice_util.assertParamsValid(s,u,c),0===a.util.sizeFromShape(c))return n.makeTensorInfo(c,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||"string"===s.dtype){const e=n.texData.get(s.dataId),t=pi(e.values,u,c,s.shape,s.dtype);return n.makeTensorInfo(c,s.dtype,t)}const{isPacked:l}=n.texData.get(s.dataId),d=a.slice_util.isSliceContinous(s.shape,u,c);if(l||!d){const e=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bc(c):new fc(c),t=[u];return n.runWebGLProgram(e,[s],s.dtype,t)}return n.uploadToGPU(s.dataId),function(e,t,n,r){const s=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=e.dtype;let u=a.slice_util.computeFlatOffset(t,a.util.computeStrides(e.shape));s.slice&&(u+=s.slice.flatOffset),i.slice={flatOffset:u,origDataId:s.slice&&s.slice.origDataId||e.dataId};const c=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,c+1),o}(s,u,c,n)}const yc={kernelName:a.Slice,backendName:"webgl",kernelFunc:gc},xc={kernelName:a.BatchToSpaceND,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,crops:i}=r;a.util.assert(s.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const u=o.reduce(((e,t)=>e*t)),c=a.backend_util.getReshaped(s.shape,o,u),l=a.backend_util.getPermuted(c.length,o.length),d=a.backend_util.getReshapedPermuted(s.shape,o,u),p=a.backend_util.getSliceBeginCoords(i,o.length),h=a.backend_util.getSliceSize(d,i,o.length),f=[],m=du({inputs:{x:s},backend:n,attrs:{shape:c}}),b=Ou({inputs:{x:m},backend:n,attrs:{perm:l}}),g=du({inputs:{x:b},backend:n,attrs:{shape:d}}),y=gc({inputs:{x:g},backend:n,attrs:{begin:p,size:h}});return f.push(m),f.push(b),f.push(g),f.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const vc={kernelName:a.Bincount,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o}=r,i=n.readSync(a.dataId),u=n.readSync(s.dataId),c=Lo(i,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}};const Oc={kernelName:a.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,o=n.readSync(r.dataId),i=n.readSync(s.dataId),u=a.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(i));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}},kc=nu({opSnippet:"return float(a != b);",cpuKernelImpl:oi,dtype:"bool"}),wc={kernelName:a.NotEqual,backendName:"webgl",kernelFunc:kc};function Ic(e){const{inputs:t,backend:n}=e,{input:r}=t;return Gi({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const Sc={kernelName:a.Real,backendName:"webgl",kernelFunc:Ic};const Nc={kernelName:a.Cast,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:s}=t,{x:o}=n,{dtype:i}=s;if("complex64"===i){if("complex64"===o.dtype)return Gi({inputs:{x:o},backend:r});const t=a.zeros(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),s=qi({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),s}if("complex64"===o.dtype){const t=Ic({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!a.util.hasEncodingLoss(o.dtype,i)){const e=Gi({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if("int32"===i)return function(e,t){const n=new _i(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",a.util.getTypedArrayFromDType("bool",1)),t=kc({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}},Tc="return ceil(x);",jc=tu({opSnippet:Tc,packedOpSnippet:Tc,cpuKernelImpl:zo}),$c={kernelName:a.Ceil,backendName:"webgl",kernelFunc:jc};class Cc{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\\n\\n      void main() {\\n        float value = getAAtOutCoords();\\n        if (isnan(value)) {\\n          setOutput(value);\\n          return;\\n        }\\n\\n        setOutput(clamp(value, minVal, maxVal));\\n      }\\n    "}}class Ec{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\\n      void main() {\\n        vec4 value = getAAtOutCoords();\\n\\n        if (any(isnan(value))) {\\n          setOutput(value);\\n          return;\\n        }\\n\\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\\n      }\\n    "}}const Ac={kernelName:a.ClipByValue,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{clipValueMin:o,clipValueMax:i}=r;let u;u=Object(a.env)().getBool("WEBGL_PACK_CLIP")?new Ec(s.shape):new Cc(s.shape);const c=[[o],[i]];return n.runWebGLProgram(u,[s],s.dtype,c)}};class Rc{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\\n      void main() {\\n        float re = abs(getRealAtOutCoords());\\n        float im = abs(getImagAtOutCoords());\\n        float mx = max(re, im);\\n\\n        // sadly the length function in glsl is not underflow-safe\\n        // (at least not on Intel GPUs). So the safe solution is\\n        // to ensure underflow-safety in all cases.\\n        setOutput(\\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\\n        );\\n      }\\n    "}}function _c(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const Fc={kernelName:a.ComplexAbs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),s=new Rc(r.shape),o=[_c(r,a.complexTensorInfos.real),_c(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}};class Dc{constructor(e){this.outputShape=[],this.outputShape=a.backend_util.computeOutShape(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,s=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${s}));`),this.userCode=`\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int yR = coords.x;\\n        int yC = coords.y;\\n\\n        ${n.join("\\n        ")}\\n      }\\n    `}}class Mc{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=a.backend_util.computeOutShape(e,t);const n=this.outputShape,r=n.length,s=mo(r),o=Ti("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const u=new Array(e.length-1);u[0]=e[0][t];for(let n=1;n<u.length;n++)u[n]=u[n-1]+e[n][t];const c=i[t],l=i.slice(-2),d=i.join();let p=`if (${c} < ${u[0]}) {\\n        return getChannel(\\n            getT0(${d}), vec2(${l.join()}));\\n        }`;for(let e=1;e<u.length;e++){const t=u[e-1];p+=`\\n        if (${c} < ${u[e]}  && ${c} >= ${u[e-1]}) {\\n          return getChannel(\\n            getT${e}(${Pc(i,c,t)}),\\n            vec2(${Pc(l,c,t)}));\\n        }`}const h=u.length,f=u[u.length-1];p+=`\\n        return getChannel(\\n          getT${h}(${Pc(i,c,f)}),\\n          vec2(${Pc(l,c,f)}));`,this.userCode=`\\n      float getValue(${i.map((e=>"int "+e))}) {\\n        ${p}\\n      }\\n\\n      void main() {\\n        ${s} coords = getOutputCoords();\\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\\n\\n        ${o[r-1]} = ${o[r-1]} + 1;\\n        if (${o[r-1]} < ${n[r-1]}) {\\n          result.g = getValue(${o});\\n        }\\n\\n        ${o[r-2]} = ${o[r-2]} + 1;\\n        if (${o[r-2]} < ${n[r-2]}) {\\n          result.a = getValue(${o});\\n        }\\n\\n        ${o[r-1]} = ${o[r-1]} - 1;\\n        if (${o[r-2]} < ${n[r-2]} &&\\n            ${o[r-1]} < ${n[r-1]}) {\\n          result.b = getValue(${o});\\n        }\\n        setOutput(result);\\n      }\\n    `}}function Pc(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function Lc(e){const{inputs:t,backend:n}=e,{input:r}=t;return Gi({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const Bc={kernelName:a.Imag,backendName:"webgl",kernelFunc:Lc};function zc(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>Ic({inputs:{input:e},backend:n}))),a=e.map((e=>Lc({inputs:{input:e},backend:n}))),s=zc(r,t,n),o=zc(a,t,n),i=qi({inputs:{real:s,imag:o},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),a.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),i}let s=n.shouldExecuteOnCPU(e);if("string"===r&&(s=!0),s){const s=e.map((e=>{const r=a.util.sizeFromShape(e.shape.slice(t));return du({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),o=s.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=a.backend_util.computeOutShape(s.map((e=>e.shape)),1),u=1===s[0].shape[0],c=Vo(o,i,r,u),l=a.backend_util.computeOutShape(e.map((e=>e.shape)),t),d=n.makeTensorInfo(l,r,c);return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}if(e.length>Object(a.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(e.length/2),a=zc(e.slice(0,r),t,n),s=zc(e.slice(r),t,n),o=zc([a,s],t,n);return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}if(Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const a=new Mc(e.map((e=>e.shape)),t);return n.runWebGLProgram(a,e,r)}const{tensors2D:o,outShape:i}=function(e,t,n){const r=a.backend_util.computeOutShape(e.map((e=>e.shape)),t);return{tensors2D:e.map((e=>du({inputs:{x:e},attrs:{shape:[-1,a.util.sizeFromShape(e.shape.slice(t))]},backend:n}))),outShape:r}}(e,t,n),u=new Dc(o.map((e=>e.shape))),c=n.runWebGLProgram(u,o,r);o.forEach((e=>n.disposeIntermediateTensorInfo(e)));const l=du({inputs:{x:c},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(c),l}function Vc(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r,o=a.util.parseAxisParam(s,t[0].shape)[0],i=a.backend_util.computeOutShape(t.map((e=>e.shape)),o);if(0===a.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const u=t.filter((e=>a.util.sizeFromShape(e.shape)>0));if(1===u.length)return Gi({inputs:{x:u[0]},backend:n});const c=u.map((e=>e.shape));return a.backend_util.assertParamsConsistent(c,o),zc(u,o,n)}const Wc={kernelName:a.Concat,backendName:"webgl",kernelFunc:Vc};class Uc{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,o=e.padInfo.left,i=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,b=m?1:2,g=m?2:3,y=m?3:1;let x="",v="";n&&(x=r?`float activation(float a) {\\n          float b = getPreluActivationWeightsAtOutCoords();\\n          ${n}\\n        }`:a?`float activation(float a) {\\n          float b = getLeakyreluAlphaAtOutCoords();\\n          ${n}\\n        }`:`\\n          float activation(float x) {\\n            ${n}\\n          }\\n        `,v="result = activation(result);");const O=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\\n      ${x}\\n\\n      const ivec2 strides = ivec2(${i}, ${u});\\n      const ivec2 pads = ivec2(${s}, ${o});\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int d2 = coords[${y}];\\n\\n        ivec2 xRCCorner =\\n            ivec2(coords[${b}], coords[${g}]) * strides - pads;\\n        int xRCorner = xRCCorner.x;\\n        int xCCorner = xRCCorner.y;\\n\\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n        for (int wR = 0; wR < ${d}; wR++) {\\n          int xR = xRCorner + wR * ${c};\\n\\n          if (xR < 0 || xR >= ${e.inHeight}) {\\n            continue;\\n          }\\n\\n          for (int wC = 0; wC < ${p}; wC++) {\\n            int xC = xCCorner + wC * ${l};\\n\\n            if (xC < 0 || xC >= ${e.inWidth}) {\\n              continue;\\n            }\\n\\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\\n              vec4 wValues = vec4(\\n                getW(wR, wC, d1, d2),\\n                getW(wR, wC, d1 + 1, d2),\\n                getW(wR, wC, d1 + 2, d2),\\n                getW(wR, wC, d1 + 3, d2)\\n              );\\n\\n              if (${m}) {\\n                vec4 xValues = vec4(\\n                  getX(batch, xR, xC, d1),\\n                  getX(batch, xR, xC, d1 + 1),\\n                  getX(batch, xR, xC, d1 + 2),\\n                  getX(batch, xR, xC, d1 + 3)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              } else {\\n                vec4 xValues = vec4(\\n                  getX(batch, d1, xR, xC),\\n                  getX(batch, d1 + 1, xR, xC),\\n                  getX(batch, d1 + 2, xR, xC),\\n                  getX(batch, d1 + 3, xR, xC)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              }\\n            }\\n\\n            if (${1===f}) {\\n\\n              if (${m}) {\\n                dotProd +=\\n                    getX(batch, xR, xC, ${h}) *\\n                    getW(wR, wC, ${h}, d2);\\n              } else {\\n                dotProd +=\\n                    getX(batch, ${h}, xR, xC) *\\n                    getW(wR, wC, ${h}, d2);\\n              }\\n\\n            } else if (${2===f}) {\\n              vec2 wValues = vec2(\\n                getW(wR, wC, ${h}, d2),\\n                getW(wR, wC, ${h} + 1, d2)\\n              );\\n\\n              if (${m}) {\\n                vec2 xValues = vec2(\\n                  getX(batch, xR, xC, ${h}),\\n                  getX(batch, xR, xC, ${h} + 1)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              } else {\\n                vec2 xValues = vec2(\\n                  getX(batch, ${h}, xR, xC),\\n                  getX(batch, ${h} + 1, xR, xC)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              }\\n\\n            } else if (${3===f}) {\\n              vec3 wValues = vec3(\\n                getW(wR, wC, ${h}, d2),\\n                getW(wR, wC, ${h} + 1, d2),\\n                getW(wR, wC, ${h} + 2, d2)\\n              );\\n\\n              if (${m}) {\\n                vec3 xValues = vec3(\\n                  getX(batch, xR, xC, ${h}),\\n                  getX(batch, xR, xC, ${h} + 1),\\n                  getX(batch, xR, xC, ${h} + 2)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              } else {\\n                vec3 xValues = vec3(\\n                  getX(batch, ${h}, xR, xC),\\n                  getX(batch, ${h} + 1, xR, xC),\\n                  getX(batch, ${h} + 2, xR, xC)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              }\\n\\n            }\\n          }\\n        }\\n\\n        float result = dotProd;\\n        ${O}\\n        ${v}\\n        setOutput(result);\\n      }\\n    `}}class Gc{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\\n      const ivec3 strides = ivec3(${a}, ${s}, ${o});\\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\\n\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int d2 = coords.u;\\n\\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\\n        int xFCorner = xFRCCorner.x;\\n        int xRCorner = xFRCCorner.y;\\n        int xCCorner = xFRCCorner.z;\\n\\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\\n        // values in that axis.\\n        float dotProd = 0.0;\\n        for (int wF = 0; wF < ${l}; wF++) {\\n          int xF = xFCorner + wF * ${i};\\n\\n          if (xF < 0 || xF >= ${e.inDepth}) {\\n            continue;\\n          }\\n\\n          for (int wR = 0; wR < ${d}; wR++) {\\n            int xR = xRCorner + wR * ${u};\\n\\n            if (xR < 0 || xR >= ${e.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int wC = 0; wC < ${p}; wC++) {\\n              int xC = xCCorner + wC * ${c};\\n\\n              if (xC < 0 || xC >= ${e.inWidth}) {\\n                continue;\\n              }\\n\\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\\n                vec4 xValues = vec4(\\n                  getX(batch, xF, xR, xC, d1),\\n                  getX(batch, xF, xR, xC, d1 + 1),\\n                  getX(batch, xF, xR, xC, d1 + 2),\\n                  getX(batch, xF, xR, xC, d1 + 3)\\n                );\\n                vec4 wValues = vec4(\\n                  getW(wF, wR, wC, d1, d2),\\n                  getW(wF, wR, wC, d1 + 1, d2),\\n                  getW(wF, wR, wC, d1 + 2, d2),\\n                  getW(wF, wR, wC, d1 + 3, d2)\\n                );\\n\\n                dotProd += dot(xValues, wValues);\\n              }\\n\\n              if (${1===f}) {\\n                dotProd +=\\n                  getX(batch, xF, xR, xC, ${h}) *\\n                  getW(wF, wR, wC, ${h}, d2);\\n              } else if (${2===f}) {\\n                vec2 xValues = vec2(\\n                  getX(batch, xF, xR, xC, ${h}),\\n                  getX(batch, xF, xR, xC, ${h} + 1)\\n                );\\n                vec2 wValues = vec2(\\n                  getW(wF, wR, wC, ${h}, d2),\\n                  getW(wF, wR, wC, ${h} + 1, d2)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              } else if (${3===f}) {\\n                vec3 xValues = vec3(\\n                  getX(batch, xF, xR, xC, ${h}),\\n                  getX(batch, xF, xR, xC, ${h} + 1),\\n                  getX(batch, xF, xR, xC, ${h} + 2)\\n                );\\n                vec3 wValues = vec3(\\n                  getW(wF, wR, wC, ${h}, d2),\\n                  getW(wF, wR, wC, ${h} + 1, d2),\\n                  getW(wF, wR, wC, ${h} + 2, d2)\\n                );\\n                dotProd += dot(xValues, wValues);\\n              }\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class Hc{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=vo(this.outputShape.length);const{dataFormat:n}=t,r=Qs(),a="channelsLast"===n,s=a?0:1,o=a?1:2,i=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`;let u="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)u+=`\\n          blockIndex = rc.y + ${t};\\n          pos = rc.x + ${e};\\n\\n          ${i}\\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\\n\\n            if(d0 < inputShape[${s}] && d0 >= 0) {\\n              // Use custom imod instead mod. On Intel GPU, mod may generate\\n              // unexpected value.\\n              // https://github.com/tensorflow/tfjs/issues/5447\\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\\n                  inChannels);\\n\\n              if(d1 < inputShape[${o}] && d1 >= 0) {\\n\\n                ch = imod(pos, inChannels);\\n\\n                if (${a}) {\\n                  innerDims = vec2(d1, ch);\\n                  result[${2*e+t}] = getChannel(\\n                    getA(d0, int(innerDims.x),\\n                    int(innerDims.y)), innerDims);\\n                } else {\\n                  innerDims = vec2(d0, d1);\\n                  result[${2*e+t}] = getChannel(\\n                    getA(ch, int(innerDims.x),\\n                    int(innerDims.y)), innerDims);\\n                }\\n              }\\n            }\\n          }\\n        `;this.userCode=`\\n      void main() {\\n        ivec2 rc = getOutputCoords();\\n\\n        vec4 result = vec4(0);\\n\\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\\n        vec2 innerDims;\\n\\n        ${u}\\n\\n        ${r.output} = result;\\n      }\\n    `}}function qc({x:e,filter:t,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:u=null}){const c=e.shape,l=r.texData.get(e.dataId),d=n.inChannels,p=c[0]*c[1]*c[2],h=n.outChannels,f="channelsLast"===n.dataFormat;let m;const b=[];if(!((1===p||1===h)&&d>1e3)&&l.isPacked&&f&&null!=l.texture&&c[2]%2!=0&&a.util.arraysEqual(l.shape.slice(-3),c.slice(-3))){const d=c[0]*c[1]*(c[2]+1),p={dataId:e.dataId,shape:[1,d,n.inChannels],dtype:e.dtype},h=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,a.util.assert(Vs(l.shape,p.shape),(()=>`packed reshape ${l.shape} to ${p.shape} isn\'t free`));const f=du({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(f);const g=wu({a:p,b:f,backend:r,transposeA:false,transposeB:false,bias:s,activation:u,preluActivationWeights:o,leakyreluAlpha:i}),y=r.texData.get(g.dataId);a.util.assert(y.isPacked,(()=>"batchMatMul result is expected to be packed")),l.shape=h,y.shape=n.outShape,m=Gi({inputs:{x:g},backend:r}),m.shape=n.outShape,b.push(g)}else{const a=du({inputs:{x:e},backend:r,attrs:{shape:[1,f?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],n.inChannels]}}),l=du({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),d=wu({a:a,b:l,transposeA:false,transposeB:false,backend:r,bias:s,activation:u,preluActivationWeights:o,leakyreluAlpha:i});m=du({inputs:{x:d},backend:r,attrs:{shape:n.outShape}}),b.push(a),b.push(l),b.push(d)}for(const e of b)r.disposeIntermediateTensorInfo(e);return m}function Kc({x:e,filter:t,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:u=null}){const{filterWidth:c,filterHeight:l,inChannels:d,outWidth:p,outHeight:h,dataFormat:f}=n,m="channelsLast"===f,b=c*l*d,g=h*p,y=[b,g],x=[],v=du({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),O=du({inputs:{x:t},backend:r,attrs:{shape:[1,b,a.util.sizeFromShape(t.shape)/b]}});x.push(v),x.push(O);const k=new Hc(y,n),w=[v.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=r.runWebGLProgram(k,[v],"float32",w),S=du({inputs:{x:I},backend:r,attrs:{shape:[1,y[0],y[1]]}});x.push(I),x.push(S);const N=null!=s,T=null!=o,j="leakyrelu"===u,$=u?ru(u,!0):null,C=new au(S.shape,O.shape,[1,g,n.outChannels],!0,!1,N,$,T,j),E=[S,O];if(s&&E.push(s),T&&E.push(o),j){const e=r.makeTensorInfo([],"float32",a.util.createScalarValue(i,"float32"));E.push(e),x.push(e)}const A=r.runWebGLProgram(C,E,"float32"),R=du({inputs:{x:A},backend:r,attrs:{shape:m?[1,h,p,n.outChannels]:[1,n.outChannels,h,p]}});x.push(A);for(const e of x)r.disposeIntermediateTensorInfo(e);return R}const Xc={kernelName:a.Conv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:i,pad:u,dataFormat:c,dilations:l,dimRoundingMode:d}=r,p=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(s.shape,o.shape,i,l,u,d,!1,p);let f;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(Object(a.env)().getBool("WEBGL_CONV_IM2COL")&&1===s.shape[0])f=Kc({x:s,filter:o,convInfo:h,backend:n});else{const e=new Uc(h);f=n.runWebGLProgram(e,[s,o],"float32")}else f=qc({x:s,filter:o,convInfo:h,backend:n});const m=du({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),m}};class Yc{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s="channelsLast"===e.dataFormat;this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int wR = coords.x;\\n        int wC = coords.y;\\n        int d1 = coords.z;\\n        int d2 = coords.w;\\n\\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n\\n        for (int b = 0; b < ${e.batchSize}; b++) {\\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\\n            int xR = wR + yR * ${t} - ${r};\\n\\n            if (xR < 0 || xR >= ${e.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\\n              int xC = wC + yC * ${n} - ${a};\\n\\n              if (xC < 0 || xC >= ${e.inWidth}) {\\n                continue;\\n              }\\n\\n              if (${s}) {\\n                float dyValue = getDy(b, yR, yC, d2);\\n                float xValue = getX(b, xR, xC, d1);\\n                dotProd += (xValue * dyValue);\\n              } else {\\n                float dyValue = getDy(b, d2, yR, yC);\\n                float xValue = getX(b, d1, xR, xC);\\n                dotProd += (xValue * dyValue);\\n              }\\n\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class Qc{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,u=s?1:2,c=s?2:3,l=s?3:1;this.userCode=`\\n      const ivec2 pads = ivec2(${o}, ${i});\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int d1 = coords[${l}];\\n\\n        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;\\n        int dyRCorner = dyCorner.x;\\n        int dyCCorner = dyCorner.y;\\n\\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n        for (int wR = 0; wR < ${t}; wR++) {\\n          float dyR = float(dyRCorner + wR) / ${r}.0;\\n\\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\\n            continue;\\n          }\\n          int idyR = int(dyR);\\n\\n          int wRPerm = ${t} - 1 - wR;\\n\\n          for (int wC = 0; wC < ${n}; wC++) {\\n            float dyC = float(dyCCorner + wC) / ${a}.0;\\n\\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                fract(dyC) > 0.0) {\\n              continue;\\n            }\\n            int idyC = int(dyC);\\n\\n            int wCPerm = ${n} - 1 - wC;\\n\\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\\n\\n              if (${s}) {\\n                float xValue = getDy(batch, idyR, idyC, d2);\\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\\n                dotProd += xValue * wValue;\\n              } else {\\n                float xValue = getDy(batch, d2, idyR, idyC);\\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\\n                dotProd += xValue * wValue;\\n              }\\n\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class Zc{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left;this.userCode=`\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int wF = coords.x;\\n        int wR = coords.y;\\n        int wC = coords.z;\\n        int d1 = coords.w;\\n        int d2 = coords.u;\\n\\n        float dotProd = 0.0;\\n\\n        for (int b = 0; b < ${e.batchSize}; b++) {\\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\\n            int xF = wF + yF * ${t} - ${a};\\n\\n            if (xF < 0 || xF >= ${e.inDepth}) {\\n              continue;\\n            }\\n\\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\\n              int xR = wR + yR * ${n} - ${s};\\n\\n              if (xR < 0 || xR >= ${e.inHeight}) {\\n                continue;\\n              }\\n\\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\\n                int xC = wC + yC * ${r} - ${o};\\n\\n                if (xC < 0 || xC >= ${e.inWidth}) {\\n                  continue;\\n                }\\n\\n                float dyValue = getDy(b, yF, yR, yC, d2);\\n                float xValue = getX(b, xF, xR, xC, d1);\\n                dotProd += (xValue * dyValue);\\n              }\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class Jc{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode=`\\n      const ivec3 pads = ivec3(${i}, ${u}, ${c});\\n\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int d1 = coords.u;\\n\\n\\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\\n        int dyFCorner = dyCorner.x;\\n        int dyRCorner = dyCorner.y;\\n        int dyCCorner = dyCorner.z;\\n\\n        float dotProd = 0.0;\\n        for (int wF = 0; wF < ${t}; wF++) {\\n          float dyF = float(dyFCorner + wF) / ${a}.0;\\n\\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\\n            continue;\\n          }\\n          int idyF = int(dyF);\\n\\n          int wFPerm = ${t} - 1 - wF;\\n\\n          for (int wR = 0; wR < ${n}; wR++) {\\n            float dyR = float(dyRCorner + wR) / ${s}.0;\\n\\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\\n              fract(dyR) > 0.0) {\\n              continue;\\n            }\\n            int idyR = int(dyR);\\n\\n            int wRPerm = ${n} - 1 - wR;\\n\\n            for (int wC = 0; wC < ${r}; wC++) {\\n              float dyC = float(dyCCorner + wC) / ${o}.0;\\n\\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                  fract(dyC) > 0.0) {\\n                continue;\\n              }\\n              int idyC = int(dyC);\\n\\n              int wCPerm = ${r} - 1 - wC;\\n\\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\\n                dotProd += xValue * wValue;\\n              }\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}const el={kernelName:a.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:i,pad:u,dataFormat:c,dimRoundingMode:l,filterShape:d}=r,p=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(s.shape,d,i,1,u,l,!1,p),f=new Yc(h);return n.runWebGLProgram(f,[s,o],"float32")}};const tl={kernelName:a.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{inputShape:i,strides:u,pad:c,dataFormat:l,dimRoundingMode:d}=r,p=a.backend_util.convertConv2DDataFormat(l),h=a.backend_util.computeConv2DInfo(i,o.shape,u,1,c,d,!1,p),f=new Qc(h);return n.runWebGLProgram(f,[s,o],"float32")}};const nl={kernelName:a.Conv3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:i,pad:u,dilations:c}=r,l=a.backend_util.computeConv3DInfo(s.shape,o.shape,i,c,u),d=new Gc(l);return n.runWebGLProgram(d,[s,o],"float32")}};const rl={kernelName:a.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:i,pad:u,filterShape:c}=r,l=a.backend_util.computeConv3DInfo(s.shape,c,i,1,u),d=new Zc(l);return n.runWebGLProgram(d,[s,o],"float32")}};const al={kernelName:a.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{pad:i,strides:u,inputShape:c}=r,l=a.backend_util.computeConv3DInfo(c,o.shape,u,1,i),d=new Jc(l);return n.runWebGLProgram(d,[s,o],"float32")}},sl=tu({opSnippet:"if (isnan(x)) return x;\\n  return cos(x);\\n"}),ol={kernelName:a.Cos,backendName:"webgl",kernelFunc:sl},il=tu({opSnippet:"\\n  float e2x = exp(-x);\\n  return (e2x + 1.0 / e2x) / 2.0;\\n"}),ul={kernelName:a.Cosh,backendName:"webgl",kernelFunc:il};class cl{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,i,u]=e,[c]=t,[l,d]=n;this.outputShape=[c,l,d,u];const p="bilinear"===r?1:0,[h,f]=[o-1+".0",i-1+".0"],[m,b,g]=l>1?[""+(o-1)/(l-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[y,x,v]=d>1?[""+(i-1)/(d-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\\n      const float height_ratio = float(${m});\\n      const float width_ratio = float(${y});\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int y = coords[1];\\n        int x = coords[2];\\n        int d = coords[3];\\n\\n        // get box vals\\n        float y1 = getBoxes(b,0);\\n        float x1 = getBoxes(b,1);\\n        float y2 = getBoxes(b,2);\\n        float x2 = getBoxes(b,3);\\n\\n        // get image in batch index\\n        int bInd = round(getBoxInd(b));\\n        if(bInd < 0 || bInd >= ${s}) {\\n          return;\\n        }\\n\\n        float height_scale = ${b};\\n        float width_scale = ${x};\\n\\n        float in_y = ${g};\\n        if( in_y < 0.0 || in_y > ${h} ) {\\n          setOutput(float(${a}));\\n          return;\\n        }\\n        float in_x = ${v};\\n        if( in_x < 0.0 || in_x > ${f} ) {\\n          setOutput(float(${a}));\\n          return;\\n        }\\n\\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\\n        if(${p} == 1) {\\n          // Compute the four integer indices.\\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\\n\\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\\n\\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\\n\\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\\n          float newValue = top + (bottom - top) * fracCR.y;\\n          setOutput(newValue);\\n        } else {\\n          // Compute the coordinators of nearest neighbor point.\\n          ivec2 sourceNearestCR = ivec2(floor(\\n            sourceFracIndexCR + vec2(0.5,0.5)));\\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\\n          setOutput(newValue);\\n        }\\n      }\\n    `}}const ll={kernelName:a.CropAndResize,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:o}=t,{cropSize:i,method:u,extrapolationValue:c}=r,l=new cl(a.shape,s.shape,i,u,c);return n.runWebGLProgram(l,[a,s,o],"float32")}};class dl{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=e;const r=e.length,a=t?"0.0":`getX(${pl(r,"coords")})`,s=e[e.length-1];let o="",i="";t?(o=n?"end != "+(s-1):"end != 0",i=n?"end + 1":"end - 1"):(o=n?`end + pow2 < ${s}`:"end >= pow2",i=n?"end + pow2":"end - pow2"),this.userCode=`\\n      void main() {\\n        ${mo(r)} coords = getOutputCoords();\\n        int end = ${hl(r,"coords")};\\n        float val = ${a};\\n        int pow2 = int(pow(2.0, index));\\n        if (${o}) {\\n          int idx = ${i};\\n          ${hl(r,"coords")} = idx;\\n          val += getX(${pl(r,"coords")});\\n        }\\n        setOutput(val);\\n      }\\n    `}}function pl(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function hl(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}const fl={kernelName:a.Cumsum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:i,reverse:u}=r,c=s.shape.length,l=a.backend_util.getAxesPermutation([o],c);let d=s;null!=l&&(d=Ou({inputs:{x:s},backend:n,attrs:{perm:l}}));const p=a.backend_util.getInnerMostAxes(1,c)[0];if(p!==c-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${s.shape.length-1} but got axis=${o}`);const h=d.shape[p];let f=Gi({inputs:{x:d},backend:n});for(let e=0;e<=Math.ceil(Math.log2(h))-1;e++){const t=new dl(d.shape,!1,u),r=[[e]],a=f;f=n.runWebGLProgram(t,[f],f.dtype,r),n.disposeIntermediateTensorInfo(a)}if(i){const e=new dl(d.shape,i,u),t=f;f=n.runWebGLProgram(e,[f],f.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=l){const e=Ou({inputs:{x:f},backend:n,attrs:{perm:a.backend_util.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),e}return f}};const ml={kernelName:a.DenseBincount,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o,binaryOutput:i}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(s.dataId),r=Lo(e,t,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(s),r=Bo(e,t,o,i);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}};class bl{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\\n    void main() {\\n      ivec4 coords = getOutputCoords();\\n      int b = coords[0];\\n      int h = ${this.getHeightCoordString()};\\n      int w = ${this.getWidthCoordString()};\\n      int d = ${this.getDepthCoordString()};\\n\\n      int in_h = h / ${t};\\n      int offset_h = imod(h, ${t});\\n      int in_w = w / ${t};\\n      int offset_w = imod(w, ${t});\\n      int offset_d = (offset_h * ${t} + offset_w) *\\n        ${this.getOutputDepthSize()};\\n      int in_d = d + offset_d;\\n\\n      float result = ${this.getInputSamplingString()};\\n      setOutput(result);\\n    }\\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const gl={kernelName:a.DepthToSpace,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:o}=r,i=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*s,c=("NHWC"===o?a.shape[2]:a.shape[3])*s,l=("NHWC"===o?a.shape[3]:a.shape[1])/(s*s),d=new bl("NHWC"===o?[i,u,c,l]:[i,l,u,c],s,o);return n.runWebGLProgram(d,[a],a.dtype)}};class yl{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=vo(this.outputShape.length);const s=e.filterHeight,o=e.filterWidth,i=e.outChannels/e.inChannels;let u="",c="";n&&(u=r?`float activation(float a) {\\n          float b = getPreluActivationWeightsAtOutCoords();\\n          ${n}\\n        }`:a?`float activation(float a) {\\n          float b = getLeakyreluAlphaAtOutCoords();\\n          ${n}\\n        }`:`\\n          float activation(float x) {\\n            ${n}\\n          }\\n        `,c="result = activation(result);");const l=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\\n      ${u}\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords.x;\\n        ivec2 xRCCorner = coords.yz * strides - pads;\\n        int d2 = coords.w;\\n        int d1 = d2 / ${i};\\n        int q = d2 - d1 * ${i};\\n\\n        int xRCorner = xRCCorner.x;\\n        int xCCorner = xRCCorner.y;\\n\\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\\n        for (int wR = 0; wR < ${s}; wR++) {\\n          int xR = xRCorner + wR * dilations[0];\\n\\n          if (xR < 0 || xR >= inDims[0]) {\\n            continue;\\n          }\\n\\n          for (int wC = 0; wC < ${o}; wC++) {\\n            int xC = xCCorner + wC * dilations[1];\\n\\n            if (xC < 0 || xC >= inDims[1]) {\\n              continue;\\n            }\\n\\n            float xVal = getX(batch, xR, xC, d1);\\n            float wVal = getW(wR, wC, d1, q);\\n            dotProd += xVal * wVal;\\n          }\\n        }\\n\\n        float result = dotProd;\\n        ${l}\\n        ${c}\\n        setOutput(result);\\n      }\\n    `}}class xl{constructor(e,t=!1,n=null,r=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=vo(this.outputShape.length);const o=e.outChannels/e.inChannels,i=e.padInfo.left,u=e.strideWidth,c=e.dilationWidth,l=e.filterHeight,d=e.filterWidth,p=d;let h="\\n      int xR; int xC; int xCOffset;\\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<d;e++)h+=`\\n          vec4 xTexelC${2*e};\\n          int xTexelC${2*e}Ready;\\n          vec4 xTexelC${2*e+1};\\n          int xTexelC${2*e+1}Ready;\\n          vec4 xC${e};`;h+=`\\n    for (int r = 0; r < ${l}; r++) {\\n      `;for(let e=0;e<d;e++)h+=`\\n          xTexelC${2*e} = vec4(0.0);\\n          xTexelC${2*e}Ready = 0;\\n          xTexelC${2*e+1} = vec4(0.0);\\n          xTexelC${2*e+1}Ready = 0;\\n          xC${e} = vec4(0.0);`;h+="\\n        xR = xRCorner + r * dilations[0];\\n        if (xR >=0 && xR < inDims[0]) {\\n      ";for(let e=0;e<(p+1)/2;e++){const t=2*e;if(h+=`\\n          xC = xCCorner + ${t*c};\\n          `,1===u){if(t<d&&(i%2==1?(h+=`\\n                xCOffset = xC + 1;\\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\\n\\n                  // Need to manually clear unused channels in case\\n                  // we\'re reading from recycled texture.\\n                  if (xCOffset + 1 >= inDims[1]) {\\n                    xTexelC${t}.zw = vec2(0.0);\\n                  }\\n                  xTexelC${t}Ready = 1;\\n                }\\n              `,h+=1===c&&t>0?`\\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\\n                `:`\\n                  xCOffset = xC + 1 - 2;\\n\\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\\n                    previous = getX(batch, xR, xCOffset, d1);\\n\\n                    // Need to manually clear unused channels in case\\n                    // we\'re reading from recycled texture.\\n                    if (xCOffset + 1 >= inDims[1]) {\\n                      previous.zw = vec2(0.0);\\n                    }\\n\\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\\n                  } else {\\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\\n                  }\\n                  `):h+=`\\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\\n                  xTexelC${t} = getX(batch, xR, xC, d1);\\n                  if (xC + 1 >= inDims[1]) {\\n                    xTexelC${t}.zw = vec2(0.0);\\n                  }\\n                  xTexelC${t}Ready = 1;\\n                }\\n\\n                xC${t} = xTexelC${t};\\n                `,t+1<d)){const e=i%2==0?a.util.nearestLargerEven(c):c;c%2==0&&i%2==1||c%2!=0&&i%2!=1?(h+=`\\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\\n\\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\\n\\n                    // Need to manually clear unused channels in case\\n                    // we\'re reading from recycled texture.\\n                    if (xCOffset + 1 >= inDims[1]) {\\n                      xTexelC${t+1}.zw = vec2(0.0);\\n                    }\\n                    xTexelC${t+1}Ready = 1;\\n                  }\\n                  `,c>1&&(h+=`\\n                    xCOffset -= 2;\\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\\n                      xTexelC${t} = getX(batch, xR, xCOffset, d1);\\n                      xTexelC${t}Ready = 1;\\n                    }\\n                    `),h+=`\\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\\n                  `):h+=1===e?`\\n                    xC${t+1} = xTexelC${t};\\n                    `:`\\n                    xCOffset = xC + ${e};\\n\\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\\n                      if (xCOffset + 1 >= inDims[1]) {\\n                        xTexelC${t+1}.zw = vec2(0.0);\\n                      }\\n                      xTexelC${t+1}Ready = 1;\\n                    }\\n\\n                    xC${t+1} = xTexelC${t+1};\\n                    `}}else t<d&&(i%2==1?(h+=`\\n                xCOffset = xC + 1 - strides[1];\\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\\n                  // Need to manually clear unused channels in case\\n                  // we\'re reading from recycled texture.\\n                  if (xCOffset + 1 >= inDims[1]) {\\n                    xTexelC${t}.zw = vec2(0.0);\\n                  }\\n                  xTexelC${t}Ready = 1;\\n                }\\n\\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\\n                  // Need to manually clear unused channels in case\\n                  // we\'re reading from recycled texture.\\n                  if (xC + 2 >= inDims[1]) {\\n                    xTexelC${t+1}.zw = vec2(0.0);\\n                  }\\n                  xTexelC${t+1}Ready = 1;\\n                }\\n\\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\\n              `,t+1<d&&(h+=`\\n                  final = vec4(0.0);\\n                  xCOffset = xC + 1 + strides[1];\\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\\n                    final = getX(batch, xR, xCOffset, d1);\\n                  }\\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\\n                `)):(h+=`\\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\\n                  xTexelC${t} = getX(batch, xR, xC, d1);\\n                  if (xC + 1 >= inDims[1]) {\\n                    xTexelC${t}.zw = vec2(0.0);\\n                  }\\n                  xTexelC${t}Ready = 1;\\n                }\\n\\n                xCOffset = xC + strides[1];\\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\\n                  if (xCOffset + 1 >= inDims[1]) {\\n                    xTexelC${t+1}.zw = vec2(0.);\\n                  }\\n                  xTexelC${t+1}Ready = 1;\\n                }\\n\\n                xC${t} = vec4(\\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\\n              `,t+1<d&&(h+=`\\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\\n                `)));t<d&&(h+=`\\n            wTexel = getW(r, ${t}, d1, q);\\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\\n          `,t+1<d&&(h+=`\\n              wTexel = getW(r, ${t+1}, d1, q);\\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\\n            `))}h+="\\n    }\\n  ",h+="\\n      }\\n    ";let f="",m="";n&&(f=r?`vec4 activation(vec4 a) {\\n          vec4 b = getPreluActivationWeightsAtOutCoords();\\n          ${n}\\n        }`:s?`vec4 activation(vec4 a) {\\n          vec4 b = getLeakyreluAlphaAtOutCoords();\\n          ${n}\\n        }`:`vec4 activation(vec4 x) {\\n          ${n}\\n        }`,m="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\\n      ${f}\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords.x;\\n        ivec2 xRCCorner = coords.yz * strides - pads;\\n        int d2 = coords.w;\\n        int d1 = d2 / ${o};\\n        int q = d2 - d1 * ${o};\\n        int xRCorner = xRCCorner.x;\\n        int xCCorner = xRCCorner.y;\\n\\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\\n        vec4 dotProd = vec4(0.000000000000001);\\n\\n        ${h}\\n\\n        vec4 result = dotProd - vec4(0.000000000000001);\\n        ${b}\\n        ${m}\\n        setOutput(result);\\n      }\\n    `}}const vl={kernelName:a.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:i,pad:u,dilations:c,dimRoundingMode:l}=r;let d=c;null==d&&(d=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(i,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations \'${d}\'`));const p=a.backend_util.computeConv2DInfo(s.shape,o.shape,i,d,u,l,!0);let h;h=Object(a.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new xl(p):new yl(p);const f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(h,[s,o],"float32",f)}};class Ol{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int wR = coords.x;\\n        int wC = coords.y;\\n        int d1 = coords.z;\\n        int dm = coords.w;\\n        int d2 = d1 * ${s} + dm;\\n\\n        float dotProd = 0.0;\\n\\n        // TO DO: Vec4 over the batch size\\n        for (int b = 0; b < ${e.batchSize}; b++) {\\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\\n            int xR = wR + yR * ${t} - ${r};\\n\\n            if (xR < 0 || xR >= ${e.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\\n              int xC = wC + yC * ${n} - ${a};\\n\\n              if (xC < 0 || xC >= ${e.inWidth}) {\\n                continue;\\n              }\\n\\n              float dyValue = getDy(b, yR, yC, d2);\\n              float xValue = getX(b, xR, xC, d1);\\n              dotProd += (xValue * dyValue);\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class kl{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`\\n      const ivec2 pads = ivec2(${s}, ${o});\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int d1 = coords[3];\\n        ivec2 dyCorner = coords.yz - pads;\\n        int dyRCorner = dyCorner.x;\\n        int dyCCorner = dyCorner.y;\\n\\n        float dotProd = 0.0;\\n\\n        for (int wR = 0; wR < ${t}; wR++) {\\n          float dyR = float(dyRCorner + wR) / ${r}.0;\\n\\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\\n            continue;\\n          }\\n          int idyR = int(dyR);\\n\\n          int wRPerm = ${t} - 1 - wR;\\n\\n          for (int wC = 0; wC < ${n}; wC++) {\\n            float dyC = float(dyCCorner + wC) / ${a}.0;\\n\\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                fract(dyC) > 0.0) {\\n              continue;\\n            }\\n            int idyC = int(dyC);\\n\\n            int wCPerm = ${n} - 1 - wC;\\n\\n            // TO DO: Vec4 over the channelMul\\n            for (int dm = 0; dm < ${i}; dm++) {\\n              int d2 = d1 * ${i} + dm;\\n              float xValue = getDy(batch, idyR, idyC, d2);\\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\\n              dotProd += xValue * wValue;\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}const wl={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:i,dilations:u,pad:c,dimRoundingMode:l,filterShape:d}=r,p=a.backend_util.computeConv2DInfo(s.shape,d,i,u,c,l,!0),h=new Ol(p);return n.runWebGLProgram(h,[s,o],"float32")}};const Il={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{strides:i,dilations:u,pad:c,dimRoundingMode:l,inputShape:d}=r,p=a.backend_util.computeConv2DInfo(d,o.shape,i,u,c,l,!0),h=new kl(p);return n.runWebGLProgram(h,[s,o],"float32")}};class Sl{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\\n      void main() {\\n          ivec2 coords = getOutputCoords();\\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\\n          setOutput(val);\\n      }\\n    "}}const Nl={kernelName:a.Diag,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,s=[...r.shape,...r.shape],o=a.util.sizeFromShape(r.shape),i=du({inputs:{x:r},backend:n,attrs:{shape:[o]}}),u=new Sl(o),c=n.runWebGLProgram(u,[i],i.dtype),l=du({inputs:{x:c},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),l}};class Tl{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:s,filterHeight:o,filterWidth:i,dilationHeight:u,dilationWidth:c}=e,{top:l,left:d}=r;this.userCode=`\\n      const ivec2 strides = ivec2(${a}, ${s});\\n      const ivec2 pads = ivec2(${l}, ${d});\\n      const float neg_infinity = -3.4e38;\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int d1 = coords.w;\\n        ivec2 outTopLeftCorner =\\n            coords.yz * strides - pads;\\n        int hBeg = outTopLeftCorner.x;\\n        int wBeg = outTopLeftCorner.y;\\n\\n        float curVal = neg_infinity;\\n        for (int h = 0; h < ${o}; h++) {\\n          int hIn = hBeg + h * ${u};\\n\\n          if (hIn >= 0 && hIn < ${t}) {\\n            for (int w = 0; w < ${i}; w++) {\\n              int wIn = wBeg + w * ${c};\\n\\n              if (wIn >= 0 && wIn < ${n}) {\\n                float xVal = getX(batch, hIn, wIn, d1);\\n                float wVal = getW(h, w, d1);\\n\\n                float val = xVal + wVal;\\n                if (val > curVal) {\\n                  curVal = val;\\n                }\\n              }\\n            }\\n          }\\n        }\\n\\n        float result = curVal;\\n        setOutput(result);\\n      }\\n    `}}const jl={kernelName:a.Dilation2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:i,pad:u,dilations:c}=r,l=a.backend_util.computeDilation2DInfo(s.shape,o.shape,i,u,"NHWC",c);let d;const p=new Tl(l);d=n.runWebGLProgram(p,[s,o],"float32");const h=du({inputs:{x:d},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(d),h}};const $l={kernelName:a.Einsum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:s}=r,o=t,{allDims:i,summedDims:u,idDims:c}=a.backend_util.decodeEinsumEquation(s,o.length);a.backend_util.checkEinsumDimSizes(i.length,c,o);const{path:l,steps:d}=a.backend_util.getEinsumComputePath(u,c),p=d.length;let h=null,f=i.length;const m=[];for(let e=0;e<p;++e){for(const t of d[e]){const{permutationIndices:e,expandDims:r}=a.backend_util.getEinsumPermutation(f,c[t]);let s;a.backend_util.isIdentityPermutation(e)?s=o[t]:(s=Ou({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),m.push(s));const i=s.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);a.util.arraysEqual(s.shape,i)||(s=du({inputs:{x:s},backend:n,attrs:{shape:i}}),m.push(s)),null===h?h=s:(h=cu({inputs:{a:s,b:h},backend:n}),m.push(h))}e<p-1&&(l[e]>=0&&(h=xu({inputs:{x:h},backend:n,attrs:{axis:l[e]-(i.length-f),keepDims:!1}}),m.push(h)),f--)}for(const e of m)e!==h&&n.disposeIntermediateTensorInfo(e);return h}},Cl=tu({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\\n  vec4 result;\\n\\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\\n\\n  return result;\\n"}),El={kernelName:a.Elu,backendName:"webgl",kernelFunc:Cl},Al={kernelName:a.EluGrad,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:s}=t,o=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ui("\\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\\n",r.shape,s.shape):new Wi("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,s.shape);return n.runWebGLProgram(o,[r,s],r.dtype)}},Rl=nu({opSnippet:"return float(a == b);",packedOpSnippet:"\\n  return vec4(equal(a, b));\\n",dtype:"bool",cpuKernelImpl:Wo}),_l={kernelName:a.Equal,backendName:"webgl",kernelFunc:Rl},Fl=tu({opSnippet:`\\n  // Error function is calculated approximately with elementary function.\\n  // See "Handbook of Mathematical Functions with Formulas,\\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\\n  float p = ${a.backend_util.ERF_P};\\n  float a1 = ${a.backend_util.ERF_A1};\\n  float a2 = ${a.backend_util.ERF_A2};\\n  float a3 = ${a.backend_util.ERF_A3};\\n  float a4 = ${a.backend_util.ERF_A4};\\n  float a5 = ${a.backend_util.ERF_A5};\\n\\n  float sign = sign(x);\\n  x = abs(x);\\n  float t = 1.0 / (1.0 + p * x);\\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\\n`}),Dl={kernelName:a.Erf,backendName:"webgl",kernelFunc:Fl},Ml="return exp(x);",Pl=tu({opSnippet:Ml,packedOpSnippet:Ml,cpuKernelImpl:Uo,dtype:"float32"}),Ll={kernelName:a.Exp,backendName:"webgl",kernelFunc:Pl};function Bl(e){const{inputs:t,attrs:n,backend:r}=e,{dim:s}=n,{input:o}=t,i=o.shape.length,u=o.shape.slice();let c=s;return s<0&&(a.util.assert(-(i+1)<=s,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),c=i+s+1),u.splice(c,0,1),du({inputs:{x:o},backend:r,attrs:{shape:u}})}const zl={kernelName:a.ExpandDims,backendName:"webgl",kernelFunc:Bl},Vl="return exp(x) - 1.0;",Wl=tu({opSnippet:Vl,packedOpSnippet:Vl,cpuKernelImpl:Go}),Ul={kernelName:a.Expm1,backendName:"webgl",kernelFunc:Wl};class Gl{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=n?`${r}.0`:"1.0";let o;if("real"===e)o="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);o="return real * expI + imag * expR;"}this.userCode=`\\n      const float exponentMultiplier = ${a};\\n\\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\\n        ${o}\\n      }\\n\\n      float mulMatDFT(int batch, int index) {\\n        float indexRatio = float(index) / float(${r});\\n        float exponentMultiplierTimesIndexRatio =\\n            exponentMultiplier * indexRatio;\\n\\n        float result = 0.0;\\n\\n        for (int i = 0; i < ${r}; i++) {\\n          // x = (-2|2 * PI / N) * index * i;\\n          float x = exponentMultiplierTimesIndexRatio * float(i);\\n          float expR = cos(x);\\n          float expI = sin(x);\\n          float real = getReal(batch, i);\\n          float imag = getImag(batch, i);\\n\\n          result +=\\n              unaryOpComplex(real, expR, imag, expI) / ${s};\\n        }\\n\\n        return result;\\n      }\\n\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        setOutput(mulMatDFT(coords[0], coords[1]));\\n      }\\n    `}}function Hl(e,t,n){const r=n.texData.get(e.dataId),s=a.util.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],i=du({inputs:{x:e},backend:n,attrs:{shape:[s/o,o]}}),u=i.shape,c=new Gl("real",u,t),l=new Gl("imag",u,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(l,d,"float32"),f=qi({inputs:{real:p,imag:h},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h);const m=du({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(f),m}const ql={kernelName:a.FFT,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Hl(r,!1,n)}};class Kl{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\\n      void main() {\\n        // Input can be obtained from uniform value.\\n        setOutput(value);\\n      }\\n    "}}function Xl(e){const{backend:t,attrs:n}=e,{shape:r,value:s}=n;let{dtype:o}=n;if(o=o||a.util.inferDtype(s),"string"===o){const e=a.util.getArrayFromDType(o,a.util.sizeFromShape(r));return e.fill(s),t.makeTensorInfo(r,o,e)}{const e=new Kl(r,s),n=[[s]];return t.runWebGLProgram(e,[],o,n)}}const Yl={kernelName:a.Fill,backendName:"webgl",kernelFunc:Xl};class Ql{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\\n        void main() {\\n          ivec4 coords = getOutputCoords();\\n          int x = coords[2];\\n\\n          int coordX = ${t} - x - 1;\\n          float outputValue;\\n          if(coordX >= 0 && coordX < ${t}) {\\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\\n          } else {\\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\\n          }\\n          setOutput(outputValue);\\n        }\\n    `}}const Zl={kernelName:a.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,a=new Ql(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},Jl="return floor(x);",ed=tu({opSnippet:Jl,packedOpSnippet:Jl,cpuKernelImpl:Ho}),td={kernelName:a.Floor,backendName:"webgl",kernelFunc:ed},nd=nu({opSnippet:"\\n  float s = sign(a) * sign(b);\\n  int ia = round(a);\\n  int ib = round(b);\\n  if (ib != 0) {\\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\\n    return float(idiv(ia, ib, s));\\n  } else {\\n    return NAN;\\n  }\\n",packedOpSnippet:"\\n  ivec4 ia = round(a);\\n  ivec4 ib = round(b);\\n  bvec4 cond = notEqual(ib, ivec4(0));\\n  ivec4 result = ivec4(0);\\n  vec4 s = sign(a) * sign(b);\\n\\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\\n  if (cond[0]) {\\n    result[0] = idiv(ia[0], ib[0], s[0]);\\n  }\\n  if (cond[1]) {\\n    result[1] = idiv(ia[1], ib[1], s[1]);\\n  }\\n  if (cond[2]) {\\n    result[2] = idiv(ia[2], ib[2], s[2]);\\n  }\\n  if (cond[3]) {\\n    result[3] = idiv(ia[3], ib[3], s[3]);\\n  }\\n  return vec4(result);\\n",dtype:"int32"}),rd={kernelName:a.FloorDiv,backendName:"webgl",kernelFunc:nd};class ad{constructor(e){this.variableNames=["A"];const t=Qs(),[n,r]=e;this.outputShape=e,this.userCode=`\\n      void main() {\\n        ivec3 coords = getOutputCoords();\\n        int texR = coords[0];\\n        int texC = coords[1];\\n        int depth = coords[2];\\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\\n\\n        vec4 values = ${t.texture2D}(A, uv);\\n        float value;\\n        if (depth == 0) {\\n          value = values.r;\\n        } else if (depth == 1) {\\n          value = values.g;\\n        } else if (depth == 2) {\\n          value = values.b;\\n        } else if (depth == 3) {\\n          value = values.a;\\n        }\\n\\n        setOutput(floor(value * 255.0 + 0.5));\\n      }\\n    `}}class sd{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Qs(),[n,r]=e;this.outputShape=e,this.userCode=`\\n      void main() {\\n        ivec3 coords = getOutputCoords();\\n        int texR = coords[0];\\n        int texC = coords[1];\\n        int depth = coords[2];\\n\\n        vec4 result = vec4(0.);\\n\\n        for(int row=0; row<=1; row++) {\\n          for(int col=0; col<=1; col++) {\\n            texC = coords[1] + row;\\n            depth = coords[2] + col;\\n\\n            vec2 uv = (vec2(texC, texR) + halfCR) /\\n                       vec2(${r}.0, ${n}.0);\\n            vec4 values = ${t.texture2D}(A, uv);\\n            float value;\\n            if (depth == 0) {\\n              value = values.r;\\n            } else if (depth == 1) {\\n              value = values.g;\\n            } else if (depth == 2) {\\n              value = values.b;\\n            } else if (depth == 3) {\\n              value = values.a;\\n            }\\n\\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\\n          }\\n        }\\n\\n        ${t.output} = result;\\n      }\\n    `}}const od={kernelName:a.FromPixels,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:s}=t;const{numChannels:o}=r,i="undefined"!=typeof HTMLVideoElement&&s instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement,[c,l]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=[l,c],p=[l,c,o];(u||i)&&(null==id&&(id=document.createElement("canvas").getContext("2d")),id.canvas.width=c,id.canvas.height=l,id.drawImage(s,0,0,c,l),s=id.canvas);const h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=xs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const f=Object(a.env)().getBool("WEBGL_PACK")?new sd(p):new ad(p),m=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),m}};let id;const ud={kernelName:a.FusedConv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,bias:i,preluActivationWeights:u}=t,{strides:c,pad:l,dataFormat:d,dilations:p,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r,b=a.backend_util.convertConv2DDataFormat(d),g=a.backend_util.computeConv2DInfo(s.shape,o.shape,c,p,l,h,!1,b);let y;const x=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Object(a.env)().getBool("WEBGL_CONV_IM2COL")&&1===s.shape[0])y=Kc({x:s,filter:o,convInfo:g,backend:n,bias:i,activation:f,preluActivationWeights:u,leakyreluAlpha:m});else{const e=null!=i,t=null!=u,r="leakyrelu"===f,c=f?ru(f,!1):null,l=new Uc(g,e,c,t,r),d=[s,o];if(i&&d.push(i),u&&d.push(u),r){const e=n.makeTensorInfo([],"float32",a.util.createScalarValue(m,"float32"));d.push(e),x.push(e)}y=n.runWebGLProgram(l,d,"float32")}else y=qc({x:s,filter:o,convInfo:g,backend:n,bias:i,activation:f,preluActivationWeights:u,leakyreluAlpha:m});const v=du({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return x.push(y),x.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}};const cd={kernelName:a.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,bias:i,preluActivationWeights:u}=t,{strides:c,pad:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=[];let b=d;null==b&&(b=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(c,b),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations \'${b}\'`));const g=a.backend_util.computeConv2DInfo(s.shape,o.shape,c,b,l,p,!0),y=Object(a.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,x=h?ru(h,y):null,v=[s,o],O=null!=i,k=null!=u,w="leakyrelu"===h;if(O&&v.push(i),k&&v.push(u),w){const e=n.makeTensorInfo([],"float32",a.util.createScalarValue(f,"float32"));v.push(e),m.push(e)}let I;I=y?new xl(g,O,x,k,w):new yl(g,O,x,k,w);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=n.runWebGLProgram(I,v,"float32",S);return m.forEach((e=>n.disposeIntermediateTensorInfo(e))),N}};class ld{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=mo(t.length),a=mo(n.length),s=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\\n        ${r} strides = ${r}(${this.strides});\\n         void main() {\\n          ${a} coords = getOutputCoords();\\n          int flattenIndex = 0;\\n          for (int j = 0; j < ${this.sliceDim}; j++) {\\n            int index = round(getIndices(coords[0], j));\\n            flattenIndex += index * ${s};\\n          }\\n          setOutput(getX(flattenIndex, coords[1]));\\n        }\\n      `}}const dd={kernelName:a.GatherNd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:s}=t,o=s.shape,i=o[o.length-1],u=a.util.sizeFromShape(r.shape),[c,l,d,p]=a.backend_util.prepareAndValidate(r,s),h=du({inputs:{x:s},backend:n,attrs:{shape:[l,i]}}),f=du({inputs:{x:r},backend:n,attrs:{shape:[a.util.sizeFromShape(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,s])||"string"===r.dtype){const e=n.readSync(s.dataId),t=n.bufferSync(r),a=qo(e,t,r.dtype,l,i,d,p,r.shape,u);return n.makeTensorInfo(c,r.dtype,a.values)}const m=new ld(i,p,[l,d]),b=n.runWebGLProgram(m,[f,h],f.dtype),g=du({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),g}};class pd{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=mo(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("int(getIndices(resRC.x, resRC.z))"):r.push(`${n[t]}`);return r.join()}(e);this.userCode=`\\n      void main() {\\n        ${n} resRC = getOutputCoords();\\n        setOutput(getA(${r}));\\n      }\\n    `}}function hd(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,indices:o}=t,{axis:i,batchDims:u}=r,c=a.util.parseAxisParam(i,s.shape)[0],l=n.readSync(o.dataId),d=s.shape[c];for(let e=0;e<l.length;++e){const t=l[e];a.util.assert(t<=d-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${d-1}]`))}const p=a.backend_util.segment_util.collectGatherOpShapeInfo(s,o,c,u),h=a.util.sizeFromShape(o.shape),f=[],m=du({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),b=du({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}});f.push(m),f.push(b);const g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize];if(n.shouldExecuteOnCPU([s,o])||"string"===s.dtype){const e=n.bufferSync(b),t=n.bufferSync(m),r=Ko(t,e,g);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(p.outputShape,r.dtype,r.values)}const y=new pd(m.shape,g),x=n.runWebGLProgram(y,[m,b],m.dtype);f.push(x);const v=du({inputs:{x:x},backend:n,attrs:{shape:p.outputShape}});return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}const fd={kernelName:a.GatherV2,backendName:"webgl",kernelFunc:hd},md=nu({opSnippet:"return float(a > b);",packedOpSnippet:"\\n  return vec4(greaterThan(a, b));\\n",cpuKernelImpl:Xo,dtype:"bool"}),bd={kernelName:a.Greater,backendName:"webgl",kernelFunc:md},gd=nu({opSnippet:"return float(a >= b);",packedOpSnippet:"\\n  return vec4(greaterThanEqual(a, b));\\n",dtype:"bool",cpuKernelImpl:Yo}),yd={kernelName:a.GreaterEqual,backendName:"webgl",kernelFunc:gd};const xd={kernelName:a.IFFT,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Hl(r,!0,n)}},vd=tu({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Od={kernelName:a.IsFinite,backendName:"webgl",kernelFunc:vd},kd=tu({opSnippet:"return float(isinf(x));",dtype:"bool"}),wd={kernelName:a.IsInf,backendName:"webgl",kernelFunc:kd},Id=tu({opSnippet:"return float(isnan(x));",dtype:"bool"}),Sd={kernelName:a.IsNan,backendName:"webgl",kernelFunc:Id},Nd=nu({opSnippet:"return float(a < b);",packedOpSnippet:"\\n  return vec4(lessThan(a, b));\\n",cpuKernelImpl:Qo,dtype:"bool"}),Td={kernelName:a.Less,backendName:"webgl",kernelFunc:Nd},jd=nu({opSnippet:"return float(a <= b);",packedOpSnippet:"\\n  return vec4(lessThanEqual(a, b));\\n",cpuKernelImpl:Zo,dtype:"bool"}),$d={kernelName:a.LessEqual,backendName:"webgl",kernelFunc:jd};const Cd={kernelName:a.LinSpace,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,o=Jo(r,a,s);return t.makeTensorInfo([o.length],"float32",o)}},Ed=tu({opSnippet:"if (x < 0.0) return NAN;\\n  return log(x);",packedOpSnippet:"\\n  vec4 result = log(x);\\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\\n\\n  return result;\\n",cpuKernelImpl:ei}),Ad={kernelName:a.Log,backendName:"webgl",kernelFunc:Ed},Rd=tu({opSnippet:"return log(1.0 + x);"}),_d={kernelName:a.Log1p,backendName:"webgl",kernelFunc:Rd},Fd=nu({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\\n  return vec4(\\n    vec4(greaterThanEqual(a, vec4(1.0))) *\\n    vec4(greaterThanEqual(b, vec4(1.0))));\\n",dtype:"bool"}),Dd={kernelName:a.LogicalAnd,backendName:"webgl",kernelFunc:Fd},Md=tu({opSnippet:"return float(!(x >= 1.0));"}),Pd={kernelName:a.LogicalNot,backendName:"webgl",kernelFunc:Md},Ld=nu({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\\n  return min(\\n    vec4(greaterThanEqual(a, vec4(1.0))) +\\n    vec4(greaterThanEqual(b, vec4(1.0))),\\n    vec4(1.0));\\n",dtype:"bool"}),Bd={kernelName:a.LogicalOr,backendName:"webgl",kernelFunc:Ld};class zd{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const s=t,o=e[3]-1;let i;this.outputShape=e;const u=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${u})`:1===a?`1.0/(${u})`:`exp(log(${u}) * float(-${a}));`,this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int r = coords[1];\\n        int c = coords[2];\\n        int d = coords[3];\\n        float x = getX(b, r, c, d);\\n        float sum = 0.0;\\n        for (int j = -${s}; j <= ${s}; j++) {\\n          int idx = d + j;\\n          if (idx >= 0 && idx <=  ${o}) {\\n            float z = getX(b, r, c, idx);\\n            sum += z * z;\\n          }\\n        }\\n        float val = x * ${i};\\n        setOutput(val);\\n      }\\n    `}}class Vd{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=t,o=e[3]-1;let i;this.outputShape=e;const u=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${u})`:1===a?`1.0/(${u})`:`exp(log(${u}) * float(-${a}));`,this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords.x;\\n        int r = coords.y;\\n        int c = coords.z;\\n        int d = coords.w;\\n\\n        bool hasNextCol = d < ${this.outputShape[3]};\\n        bool hasNextRow = c < ${this.outputShape[2]};\\n\\n        vec4 sum = vec4(0.);\\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\\n\\n        vec4 xAtOutputCoords = vec4(\\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\\n          hasNextCol ?\\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\\n          hasNextRow ?\\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\\n          (hasNextRow && hasNextCol) ?\\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\\n        );\\n\\n        int firstChannel = d - ${s};\\n        vec2 cache = vec2(0.);\\n        if(firstChannel >= 0){\\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\\n            if(hasNextRow){\\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\\n            }\\n        }\\n\\n        ivec2 depth = ivec2(d, d + 1);\\n        for (int j = - ${s}; j <= ${s}; j++) {\\n          ivec2 idx = depth + j;\\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\\n\\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\\n\\n          if(depthInRange || depthPlusOneInRange){\\n            vec4 z = vec4(0.);\\n            vec4 xFragAtCurrentDepth;\\n            z.xz = cache.xy;\\n            if(depthPlusOneInRange && hasNextCol){\\n              xFragAtCurrentDepth = idx.y != d ?\\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\\n              if(hasNextRow){\\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\\n              }\\n            }\\n            cache.xy = z.yw;\\n            sum += z * z;\\n          }\\n        }\\n        vec4 result = xAtOutputCoords * ${i};\\n        setOutput(result);\\n      }\\n    `}}const Wd={kernelName:a.LRN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{depthRadius:o,bias:i,alpha:u,beta:c}=r,l=Object(a.env)().getBool("WEBGL_PACK_NORMALIZATION")?new Vd(s.shape,o,i,u,c):new zd(s.shape,o,i,u,c);return n.runWebGLProgram(l,[s],s.dtype)}};class Ud{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int r = coords[1];\\n        int c = coords[2];\\n\\n        float result = 0.0;\\n        for (int d = 0; d < ${this.depth}; ++d) {\\n          int depthBegin = int(max(0.0, float(d - ${t})));\\n          int depthEnd = int(min(float(${this.depth}),\\n              float(d + ${t} + 1)));\\n\\n          const int MIN_DEPTH_BEGIN = 0;\\n          const int MAX_DEPTH_END = ${this.depth};\\n\\n          float norm = 0.0;\\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\\n            if (k < depthBegin){\\n              continue;\\n            }\\n            else if (k >= depthBegin && k < depthEnd) {\\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\\n            }\\n            else {\\n              break;\\n            }\\n          }\\n\\n          norm = float(${r}) * norm + float(${n});\\n\\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\\n            if (k < depthBegin){\\n              continue;\\n            }\\n            else if (k >= depthBegin && k < depthEnd){\\n              float dyi = -2.0 * float(${r})\\n                * float(${a})\\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\\n                / norm;\\n              if (k == d) {\\n                dyi += pow(norm, -1.0 * ${a});\\n              }\\n              if (k == coords[3]) {\\n                dyi *= getDy(b, r, c, d);\\n                result += dyi;\\n              }\\n            }\\n            else {\\n              break;\\n            }\\n          }\\n      }\\n      setOutput(result);\\n      }\\n    `}}const Gd={kernelName:a.LRNGrad,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:o}=t,{depthRadius:i,bias:u,alpha:c,beta:l}=r,d=new Ud(a.shape,i,u,c,l);return n.runWebGLProgram(d,[a,s,o],a.dtype)}};function Hd(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reductionIndices:o,keepDims:i}=r,u=s.shape.length,c=a.util.parseAxisParam(o,s.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,u),p=null!=d,h=n.shouldExecuteOnCPU([s]);let f=s;if(p){if(h){const e=n.texData.get(f.dataId).values,t=new Array(u);for(let e=0;e<t.length;e++)t[e]=s.shape[d[e]];const r=Ii(e,s.shape,s.dtype,d,t);f=n.makeTensorInfo(t,s.dtype);n.texData.get(f.dataId).values=r}else f=yu(s,d,n);l=a.backend_util.getInnerMostAxes(l.length,u)}a.backend_util.assertAxesAreInnerMostDims("max",l,u);const[m,b]=a.backend_util.computeOutAndReduceShapes(f.shape,l);let g,y=m;if(i&&(y=a.backend_util.expandShapeToKeepDim(m,c)),h){const e=n.texData.get(f.dataId).values,t=ti(e,a.util.sizeFromShape(b),y,s.dtype);g=n.makeTensorInfo(y,s.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const s=a.util.sizeFromShape(t),o=du({inputs:{x:e},attrs:{shape:[a.util.sizeFromShape(e.shape)/s,s]},backend:r}),i=mu(o,e.dtype,"max",r),u=du({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),u}(f,b,y,n);return p&&n.disposeIntermediateTensorInfo(f),g}const qd={kernelName:a.Max,backendName:"webgl",kernelFunc:Hd},Kd=nu({opSnippet:"\\n  if (isnan(a)) return a;\\n  if (isnan(b)) return b;\\n\\n  return max(a, b);\\n",packedOpSnippet:"\\n  vec4 result = vec4(max(a, b));\\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\\n  \\n  result.r = isNaN.r > 0. ? NAN : result.r;\\n  result.g = isNaN.g > 0. ? NAN : result.g;\\n  result.b = isNaN.b > 0. ? NAN : result.b;\\n  result.a = isNaN.a > 0. ? NAN : result.a;\\n\\n  return result;\\n",cpuKernelImpl:ni}),Xd={kernelName:a.Maximum,backendName:"webgl",kernelFunc:Kd};const Yd={kernelName:a.MaxPool,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;Xs(s,"maxPool");const{filterSize:o,strides:i,pad:u,dimRoundingMode:c}=r;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations \'1\'`));const l=a.backend_util.computePool2DInfo(s.shape,o,i,1,u,c);if(1===l.filterWidth&&1===l.filterHeight&&a.util.arraysEqual(l.inShape,l.outShape))return Gi({inputs:{x:s},backend:n});const d=new nc(l,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}};const Qd={kernelName:a.MaxPool3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:i,pad:u,dataFormat:c,dimRoundingMode:l}=r,d=a.backend_util.computePool3DInfo(s.shape,o,i,[1,1,1],u,l,c),p=new rc(d,"max",!1);return n.runWebGLProgram(p,[s],s.dtype)}};class Zd{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,s=e.effectiveFilterWidth,o=a-1-e.padInfo.top,i=s-1-e.padInfo.left,u=a*s-1;this.userCode=`\\n      const ivec2 pads = ivec2(${o}, ${i});\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n\\n        ivec2 dyRCCorner = coords.yz - pads;\\n        int dyRCorner = dyRCCorner.x;\\n        int dyCCorner = dyRCCorner.y;\\n\\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n        for (int wR = 0; wR < ${a};\\n          wR += ${r}) {\\n          float dyR = float(dyRCorner + wR) / ${t}.0;\\n\\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\\n            continue;\\n          }\\n          int idyR = int(dyR);\\n\\n          for (int wC = 0; wC < ${s}; wC++) {\\n            float dyC = float(dyCCorner + wC) / ${n}.0;\\n\\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                fract(dyC) > 0.0) {\\n              continue;\\n            }\\n            int idyC = int(dyC);\\n\\n            float dyValue = getDy(b, idyR, idyC, d);\\n            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));\\n\\n            // Get the current value, check it against the value from the\\n            // position matrix.\\n            int curPosValue = wR * ${s} + wC;\\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\\n\\n            dotProd += dyValue * mask;\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}class Jd{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,o=e.dilationWidth,i=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=i-1-e.padInfo.front,d=u-1-e.padInfo.top,p=c-1-e.padInfo.left,h=i*u*c-1;this.userCode=`\\n      const ivec3 pads = ivec3(${l}, ${d}, ${p});\\n\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int ch = coords.u;\\n\\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\\n        int dyDCorner = dyCorner.x;\\n        int dyRCorner = dyCorner.y;\\n        int dyCCorner = dyCorner.z;\\n\\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\\n        // dx(xD, xR, xC, ch).\\n        // ? = to be determined. : = across all values in that axis.\\n        float dotProd = 0.0;\\n\\n        for (int wD = 0; wD < ${i};\\n           wD += ${a}) {\\n          float dyD = float(dyDCorner + wD) / ${t}.0;\\n\\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\\n            continue;\\n          }\\n          int idyD = int(dyD);\\n\\n          for (int wR = 0; wR < ${u};\\n              wR += ${s}) {\\n            float dyR = float(dyRCorner + wR) / ${n}.0;\\n\\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\\n                fract(dyR) > 0.0) {\\n              continue;\\n            }\\n            int idyR = int(dyR);\\n\\n            for (int wC = 0; wC < ${c};\\n                wC += ${o}) {\\n              float dyC = float(dyCCorner + wC) / ${r}.0;\\n\\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\\n                  fract(dyC) > 0.0) {\\n                continue;\\n              }\\n              int idyC = int(dyC);\\n\\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\\n              int maxPosValue = ${h} -\\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\\n\\n              // Get the current value, check it against the value from the\\n              // position matrix.\\n              int curPosValue =\\n                  wD * ${u} * ${c} +\\n                  wR * ${c} + wC;\\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\\n\\n              dotProd += dyValue * mask;\\n            }\\n          }\\n        }\\n        setOutput(dotProd);\\n      }\\n    `}}const ep={kernelName:a.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,i=o,{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,p=a.backend_util.computePool3DInfo(i.shape,u,c,[1,1,1],l,d),h=new rc(p,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),m=new Jd(p),b=n.runWebGLProgram(m,[s,f],i.dtype);return n.disposeIntermediateTensorInfo(f),b}};const tp={kernelName:a.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o,output:i}=t,u=o;Xs([o,i],"maxPoolGrad");const{filterSize:c,strides:l,pad:d,dimRoundingMode:p}=r,h=a.backend_util.computePool2DInfo(u.shape,c,l,1,d,p),f=new nc(h,"max",!0),m=n.runWebGLProgram(f,[u],u.dtype),b=new Zd(h),g=n.runWebGLProgram(b,[s,m],u.dtype);return n.disposeIntermediateTensorInfo(m),g}};const np={kernelName:a.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:s,strides:o,pad:i,includeBatchInIndex:u}=t,c=n;a.util.assert(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const l=[1,1];a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(o,l),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations \'${l}\'`));const d=a.backend_util.computePool2DInfo(r.shape,s,o,l,i),[p,h]=function(e,t,n,r){let a=new nc(n,"max",!1);const s=r.runWebGLProgram(a,[e],"float32");return a=new nc(n,"max",!0,!0,t),[s,r.runWebGLProgram(a,[e],"float32")]}(r,u,d,c);return[p,h]}};const rp={kernelName:a.Mean,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:s,axis:o}=t,i=n,u=r.shape.length,c=a.util.parseAxisParam(o,r.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,u),p=null!=d,h=i.shouldExecuteOnCPU([r]),f=[];let m=r;if(p){if(h){const e=i.texData.get(m.dataId).values,t=new Array(u);for(let e=0;e<t.length;e++)t[e]=r.shape[d[e]];const n=Ii(e,r.shape,r.dtype,d,t);m=i.makeTensorInfo(t,r.dtype);i.texData.get(m.dataId).values=n}else m=yu(r,d,i);f.push(m),l=a.backend_util.getInnerMostAxes(l.length,u)}a.backend_util.assertAxesAreInnerMostDims("sum",l,u);const[b,g]=a.backend_util.computeOutAndReduceShapes(m.shape,l);let y=b;s&&(y=a.backend_util.expandShapeToKeepDim(b,c));const x=function(e,t,n,r){const s=a.util.sizeFromShape(t),o=du({inputs:{x:e},attrs:{shape:[a.util.sizeFromShape(e.shape)/s,s]},backend:r}),i=mu(o,"float32","mean",r),u=du({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),u}(m,g,y,i);for(const e of f)i.disposeIntermediateTensorInfo(e);return x}};const ap={kernelName:a.Min,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:i}=r,u=s.shape.length,c=a.util.parseAxisParam(o,s.shape);let l=c;const d=a.backend_util.getAxesPermutation(l,u);let p=s;null!=d&&(p=Ou({inputs:{x:s},backend:n,attrs:{perm:d}}),l=a.backend_util.getInnerMostAxes(l.length,s.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",l,u);const[h,f]=a.backend_util.computeOutAndReduceShapes(p.shape,l),m=du({inputs:{x:p},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(f)]}}),b=mu(m,m.dtype,"min",n);let g;if(i){g=du({inputs:{x:b},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(h,c)}})}else g=du({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),null!=d&&n.disposeIntermediateTensorInfo(p),g}},sp=nu({opSnippet:"\\n  if (isnan(a)) return a;\\n  if (isnan(b)) return b;\\n\\n  return min(a, b);\\n",packedOpSnippet:"\\n  vec4 result = vec4(min(a, b));\\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\\n  \\n  result.r = isNaN.r > 0. ? NAN : result.r;\\n  result.g = isNaN.g > 0. ? NAN : result.g;\\n  result.b = isNaN.b > 0. ? NAN : result.b;\\n  result.a = isNaN.a > 0. ? NAN : result.a;\\n\\n  return result;\\n",cpuKernelImpl:ri}),op={kernelName:a.Minimum,backendName:"webgl",kernelFunc:sp};class ip{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=mo(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u="reflect"===n?0:1;this.userCode=1!==r?`\\n      ${a} start = ${a}(${s});\\n      ${a} end = ${a}(${o});\\n\\n      void main() {\\n        ${a} outC = getOutputCoords();\\n        for (int i = 0; i < ${r}; i++) {\\n          if (outC[i] < start[i]) {\\n            outC[i] = start[i] * 2 - outC[i] - ${u};\\n          } else if(outC[i] >= end[i]) {\\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};\\n          }\\n        }\\n        ${a} coords = outC - start;\\n        setOutput(getX(${i}));\\n      }\\n    `:`\\n        int start = ${s};\\n        int end = ${o};\\n\\n        void main() {\\n          int outC = getOutputCoords();\\n          if (outC < start) {\\n            outC = start * 2 - outC - ${u};\\n          } else if(outC >= end) {\\n            outC = (end - 1) * 2 - outC + ${u};\\n          }\\n          setOutput(getX(outC - start));\\n        }\\n      `}}class up{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=mo(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=Ti("rc",r),u=Ti("source",r),c=`${i[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${u.slice(-2).join()})`,d="reflect"===n?0:1;let p="";if(1===r){const e=`\\n        ${a} source = rc;\\n        if (source < start) {\\n          source = start * 2 - source - ${d};\\n        } else if (source >= end) {\\n          source = (end - 1) * 2 - source + ${d};\\n        }\\n        source -= start;\\n      `;p=`\\n        ${a} rc = outputLoc;\\n        ${e}\\n        result[0] = getChannel(getX(${u.join()}), ${l});\\n        ${i[r-1]} += 1;\\n        if(${c}) {\\n          ${e}\\n          result[1] = getChannel(getX(${u.join()}), ${l});\\n        }\\n      `}else{const e=`\\n        ${a} source = rc;\\n        ${a} lt = ${a}(lessThan(source, start));\\n        ${a} gte = ${a}(greaterThanEqual(source, end));\\n        ${a} orig = 1 - (lt + gte);\\n        source = orig * source +\\n                lt * (start * 2 - source - ${d}) +\\n                gte * ((end - 1) * 2 - source + ${d});\\n        source -= start;\\n      `;p=`\\n        ${a} rc = outputLoc;\\n        ${e}\\n        result[0] = getChannel(getX(${u.join()}), ${l});\\n        ${i[r-1]} += 1;\\n        if(${c}) {\\n          ${e}\\n          result[1] = getChannel(getX(${u.join()}), ${l});\\n        }\\n        rc = outputLoc;\\n        ${i[r-2]} += 1;\\n        if(${i[r-2]} < ${this.outputShape[r-2]}) {\\n          ${e}\\n          result[2] = getChannel(getX(${u.join()}), ${l});\\n          ${i[r-1]} += 1;\\n          if(${c}) {\\n            ${e}\\n            result[3] = getChannel(getX(${u.join()}), ${l});\\n          }\\n        }\\n      `}this.userCode=`\\n      const ${a} start = ${a}(${s});\\n      const ${a} end = ${a}(${o});\\n\\n      void main() {\\n        ${a} outputLoc = getOutputCoords();\\n        vec4 result = vec4(0.);\\n        ${p}\\n        setOutput(result);\\n      }\\n    `}}const cp={kernelName:a.MirrorPad,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:s,mode:o}=n,i=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new up(r.shape,s,o):new ip(r.shape,s,o);return t.runWebGLProgram(i,[r],r.dtype)}},lp=nu({opSnippet:"if (b == 0.0) return NAN;\\n  return mod(a, b);",packedOpSnippet:"\\n  vec4 result = mod(a, b);\\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\\n  \\n  result.r = isNaN.r > 0. ? NAN : result.r;\\n  result.g = isNaN.g > 0. ? NAN : result.g;\\n  result.b = isNaN.b > 0. ? NAN : result.b;\\n  result.a = isNaN.a > 0. ? NAN : result.a;\\n\\n  return result;\\n"}),dp={kernelName:a.Mod,backendName:"webgl",kernelFunc:lp};class pp{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int batch = coords[0];\\n\\n        float r = random(seed);\\n        float cdf = 0.0;\\n\\n        for (int i = 0; i < ${t-1}; i++) {\\n          cdf += getProbs(batch, i);\\n\\n          if (r < cdf) {\\n            setOutput(float(i));\\n            return;\\n          }\\n        }\\n\\n        // If no other event happened, last event happened.\\n        setOutput(float(${t-1}));\\n      }\\n    `}}const hp=nu({opSnippet:"\\nif (a == b) {\\n  return 1.0;\\n};\\nreturn a / b;",packedOpSnippet:"\\n  // vec4 one = vec4(equal(a, b));\\n  // return one + (vec4(1.0) - one) * a / b;\\n  vec4 result = a / b;\\n  if(a.x == b.x) {\\n    result.x = 1.;\\n  }\\n  if(a.y == b.y) {\\n    result.y = 1.;\\n  }\\n  if(a.z == b.z) {\\n    result.z = 1.;\\n  }\\n  if(a.w == b.w) {\\n    result.w = 1.;\\n  }\\n\\n  return result;\\n",checkOutOfBounds:!0}),fp={kernelName:a.RealDiv,backendName:"webgl",kernelFunc:hp},mp="return a - b;",bp=nu({opSnippet:mp,packedOpSnippet:mp,supportsComplex:!0,cpuKernelImpl:Oi}),gp={kernelName:a.Sub,backendName:"webgl",kernelFunc:bp};function yp(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{dim:o}=r,i=a.util.parseAxisParam([o],s.shape),u=Hd({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),c=a.backend_util.expandShapeToKeepDim(u.shape,i),l=du({inputs:{x:u},backend:n,attrs:{shape:c}}),d=bp({inputs:{a:s,b:l},backend:n}),p=Pl({inputs:{x:d},backend:n}),h=xu({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:!1}}),f=du({inputs:{x:h},backend:n,attrs:{shape:c}}),m=hp({inputs:{a:p,b:f},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}const xp={kernelName:a.Softmax,backendName:"webgl",kernelFunc:yp};const vp={kernelName:a.Multinomial,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:o,normalized:i}=r,u=i?a:yp({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new pp(c,l,s),p=[[o]],h=n.runWebGLProgram(d,[u],"int32",p);return i||n.disposeIntermediateTensorInfo(u),h}},Op="return -x;";const kp={kernelName:a.Neg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=si(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let s;return s=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Mi(r.shape,Op):new _i(r.shape,Op),n.runWebGLProgram(s,[r],r.dtype)}},wp=a.kernel_impls.nonMaxSuppressionV3Impl;const Ip={kernelName:a.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c}=r,l=n.readSync(s.dataId),d=n.readSync(o.dataId),{selectedIndices:p}=wp(l,d,i,u,c);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},Sp=a.kernel_impls.nonMaxSuppressionV4Impl;const Np={kernelName:a.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c,padToMaxOutputSize:l}=r,d=n.readSync(s.dataId),p=n.readSync(o.dataId),{selectedIndices:h,validOutputs:f}=Sp(d,p,i,u,c,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},Tp=a.kernel_impls.nonMaxSuppressionV5Impl;const jp={kernelName:a.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:c,softNmsSigma:l}=r,d=n.readSync(s.dataId),p=n.readSync(o.dataId),h=i,f=u,m=c,b=l,{selectedIndices:g,selectedScores:y}=Tp(d,p,h,f,m,b);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class $p{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int index = round(getIndices(coords.x));\\n        setOutput(mix(float(${r}), float(${n}),\\n                      float(index == coords.y)));\\n      }\\n    `}}const Cp={kernelName:a.OneHot,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:s}=t,{depth:o,onValue:i,offValue:u}=r,c=a.util.sizeFromShape(s.shape),l=new $p(c,o,i,u),d=du({inputs:{x:s},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(l,[d],s.dtype);n.disposeIntermediateTensorInfo(d);const h=du({inputs:{x:p},backend:n,attrs:{shape:[...s.shape,o]}});return n.disposeIntermediateTensorInfo(p),h}};function Ep(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=Ic({inputs:{input:r},backend:n}),t=Ep({inputs:{x:e},backend:n}),a=Lc({inputs:{input:r},backend:n}),s=Ep({inputs:{x:a},backend:n}),o=qi({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}return Xl({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Ap={kernelName:a.ZerosLike,backendName:"webgl",kernelFunc:Ep};const Rp={kernelName:a.OnesLike,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=Ic({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=Lc({inputs:{input:a},backend:r}),o=Ep({inputs:{x:s},backend:r}),i=qi({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),i}return Xl({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};const _p={kernelName:a.Pack,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(1===t.length)return Bl({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const o=t[0].shape,i=t[0].dtype;t.forEach((e=>{a.util.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const u=[],c=Vc({inputs:t.map((e=>{const t=Bl({inputs:{input:e},backend:n,attrs:{dim:s}});return u.push(t),t})),backend:n,attrs:{axis:s}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};class Fp{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=mo(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\\n      ${a} start = ${a}(${s});\\n      ${a} end = ${a}(${o});\\n\\n      void main() {\\n        ${a} outC = getOutputCoords();\\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\\n          setOutput(value);\\n        } else {\\n          ${a} coords = outC - start;\\n          setOutput(getX(${i}));\\n        }\\n      }\\n    `:`\\n        int start = ${s};\\n        int end = ${o};\\n\\n        void main() {\\n          int outC = getOutputCoords();\\n          if (outC < start || outC >= end) {\\n            setOutput(value);\\n          } else {\\n            setOutput(getX(outC - start));\\n          }\\n        }\\n      `}}class Dp{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=mo(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=Ti("rc",r),u=Ti("source",r),c=`${i[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${u.slice(-2).join()})`,d=[`${a} rc = outputLoc;`,`${i[r-1]} += 1;\\n       if(${c}) {\\n      `,1===r?"":`}\\n       rc = outputLoc;\\n       ${i[r-2]} += 1;\\n       if(${i[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${i[r-1]} += 1;\\n         if(${c}) {`],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let e=0,t=1===r?2:4;e<t;e++)h+=`\\n        ${d[e]}\\n        if (${p}) {\\n          result[${e}] = float(value);\\n        } else {\\n          ${a} source = rc - start;\\n          result[${e}] = getChannel(getX(${u.join()}), ${l});\\n        }\\n      `;h+=1===r?"} ":"}}",this.userCode=`\\n      const ${a} start = ${a}(${s});\\n      const ${a} end = ${a}(${o});\\n\\n      void main() {\\n        ${a} outputLoc = getOutputCoords();\\n        vec4 result = vec4(0.);\\n        ${h}\\n        setOutput(result);\\n      }\\n    `}}const Mp=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:o,constantValue:i}=r;if(0===a.util.sizeFromShape(s.shape)){return Xl({backend:n,attrs:{shape:o.map(((e,t)=>e[0]+s.shape[t]+e[1])),value:i,dtype:s.dtype}})}const u=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Dp(s.shape,o,i):new Fp(s.shape,o,i),c=[[i]];return n.runWebGLProgram(u,[s],s.dtype,c)},Pp={kernelName:a.PadV2,backendName:"webgl",kernelFunc:Mp},Lp=nu({opSnippet:"\\n  if(a < 0.0 && floor(b) < b){\\n    return NAN;\\n  }\\n  if (b == 0.0) {\\n    return 1.0;\\n  }\\n  return (round(mod(b, 2.0)) != 1) ?\\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\\n",packedOpSnippet:"\\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\\n  vec4 result = multiplier * pow(abs(a), b);\\n\\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\\n  bvec4 isExpZero = equal(b, vec4(0.0));\\n  result.r = isExpZero.r ? 1.0 : result.r;\\n  result.g = isExpZero.g ? 1.0 : result.g;\\n  result.b = isExpZero.b ? 1.0 : result.b;\\n  result.a = isExpZero.a ? 1.0 : result.a;\\n\\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\\n  \\n  result.r = isNaN.r > 0. ? NAN : result.r;\\n  result.g = isNaN.g > 0. ? NAN : result.g;\\n  result.b = isNaN.b > 0. ? NAN : result.b;\\n  result.a = isNaN.a > 0. ? NAN : result.a;\\n\\n  return result;\\n"}),Bp={kernelName:a.Pow,backendName:"webgl",kernelFunc:Lp};const zp={kernelName:a.Prod,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:i}=r,u=s.shape.length,c=[],l=a.util.parseAxisParam(o,s.shape);let d=l;const p=a.backend_util.getAxesPermutation(d,u);let h,f=s;if(null!=p&&(f=Ou({inputs:{x:s},backend:n,attrs:{perm:p}}),d=a.backend_util.getInnerMostAxes(d.length,u),c.push(f)),a.backend_util.assertAxesAreInnerMostDims("prod",d,u),n.shouldExecuteOnCPU([f])){const e=n.texData.get(f.dataId).values,{outVals:t,outShape:r,outDtype:a}=ii(f.shape,f.dtype,e,d);h=n.makeTensorInfo(r,a,t)}else{const[e,t]=a.backend_util.computeOutAndReduceShapes(f.shape,d),r=a.util.sizeFromShape(t),o=du({inputs:{x:f},backend:n,attrs:{shape:[-1,r]}}),i=mu(o,Object(a.sumOutType)(s.dtype),"prod",n);h=du({inputs:{x:i},backend:n,attrs:{shape:e}}),c.push(o),c.push(i)}if(i){c.push(h);const e=a.backend_util.expandShapeToKeepDim(h.shape,l);h=du({inputs:{x:h},backend:n,attrs:{shape:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},Vp=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:o}=n,i=ui(r,a,s,o);return t.makeTensorInfo([i.length],o,i)},Wp={kernelName:a.Range,backendName:"webgl",kernelFunc:Vp},Up=tu({opSnippet:"return 1.0 / x;"}),Gp={kernelName:a.Reciprocal,backendName:"webgl",kernelFunc:Up},Hp=tu({opSnippet:"if (isnan(x)) return x;\\n  return (x < 0.0) ? 0.0 : x;\\n",packedOpSnippet:"\\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\\n  bvec4 isNaN = isnan(x);\\n\\n  result.r = isNaN.r ? x.r : result.r;\\n  result.g = isNaN.g ? x.g : result.g;\\n  result.b = isNaN.b ? x.b : result.b;\\n  result.a = isNaN.a ? x.a : result.a;\\n\\n  return result;\\n"}),qp={kernelName:a.Relu,backendName:"webgl",kernelFunc:Hp},Kp=tu({opSnippet:"if (isnan(x)) return x;\\n  return (x < 0.0) ? 0.0 : min(6.0, x);\\n",packedOpSnippet:"\\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\\n  bvec4 isNaN = isnan(x);\\n\\n  result.r = isNaN.r ? x.r : result.r;\\n  result.g = isNaN.g ? x.g : result.g;\\n  result.b = isNaN.b ? x.b : result.b;\\n  result.a = isNaN.a ? x.a : result.a;\\n\\n  return result;\\n"}),Xp={kernelName:a.Relu6,backendName:"webgl",kernelFunc:Kp};class Yp{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,o,i,u]=e;this.outputShape=[s,t,n,u];const c=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\\n          ${c[0]/l[0]},\\n          ${c[1]/l[1]});\\n      const vec2 inputShapeRC = vec2(${o}.0, ${i}.0);\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n        ivec2 yRC = coords.yz;\\n\\n        // Fractional source index.\\n        vec2 sourceFracIndexRC = ${d};\\n\\n        // Compute the four integer indices.\\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\\n        ivec2 sourceCeilRC = ivec2(\\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\\n\\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\\n\\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\\n\\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\\n        float newValue = top + (bottom - top) * fracRC.x;\\n\\n        setOutput(newValue);\\n      }\\n    `}}class Qp{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,i,u]=e;this.outputShape=[s,t,n,u];const c=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\\n          ${c[0]/l[0]},\\n          ${c[1]/l[1]},\\n          ${c[1]/l[1]});\\n      const vec3 inputShapeRC = vec3(${o}.0, ${i}.0,\\n                                     ${i}.0);\\n\\n      float getAValue(int b, int r, int c, int d) {\\n        return getChannel(getA(b, r, c, d), vec2(c, d));\\n      }\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n        // Calculate values for next column in yRC.z.\\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\\n\\n        // Fractional source index.\\n        vec3 sourceFracIndexRC = ${d};\\n\\n        // Compute the four integer indices.\\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\\n        ivec3 sourceCeilRC = ivec3(\\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\\n\\n        // Should we calculate next column and row elements in 2x2 packed cell.\\n        bool hasNextCol = d < ${u-1};\\n        bool hasNextRow = coords.z < ${n-1};\\n\\n        // In parallel, construct four corners for all four components in\\n        // packed 2x2 cell.\\n        vec4 topLeft = vec4(\\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\\n                     : 0.0,\\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\\n                     : 0.0,\\n          (hasNextRow && hasNextCol) ?\\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\\n\\n        vec4 bottomLeft = vec4(\\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\\n                     : 0.0,\\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\\n                     : 0.0,\\n          (hasNextRow && hasNextCol) ?\\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\\n\\n        vec4 topRight = vec4(\\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\\n                     : 0.0,\\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\\n                     : 0.0,\\n          (hasNextRow && hasNextCol) ?\\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\\n\\n        vec4 bottomRight = vec4(\\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\\n                     : 0.0,\\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\\n                     : 0.0,\\n          (hasNextRow && hasNextCol) ?\\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\\n\\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\\n\\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\\n        vec4 newValue = mix(top, bottom, fracRC.x);\\n\\n        setOutput(newValue);\\n      }\\n    `}}const Zp={kernelName:a.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:o,halfPixelCenters:i,size:u}=r,[c,l]=u,d=Object(a.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Qp(s.shape,c,l,o,i):new Yp(s.shape,c,l,o,i);return n.runWebGLProgram(d,[s],"float32")}};class Jp{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,o]=e,i=[n&&s>1?r-1:r,n&&o>1?a-1:a],u=[n&&s>1?s-1:s,n&&o>1?o-1:o],c=i[0]/u[0],l=i[1]/u[1],d=1/c,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n        int r = coords[1];\\n        int c = coords[2];\\n\\n        float accumulator = 0.0;\\n\\n        const float heightScale = float(${c});\\n        const float widthScale = float(${l});\\n\\n        const float invHeightScale = float(${d});\\n        const float invWidthScale = float(${p});\\n\\n        const int winHeight = int(${h});\\n        const int winWidth = int(${f});\\n\\n        // Compute bounds for where in dy we will look\\n        float startRLerp = floor(float(r) * invHeightScale);\\n        int startDyR = int(startRLerp - float(winHeight / 2));\\n\\n        float startCLerp = floor(float(c) * invWidthScale);\\n        int startDyC = int(startCLerp - float(winWidth / 2));\\n\\n        // Loop over dy\\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\\n          int dyR = dyROffset + startDyR;\\n\\n          // Guard against the window exceeding the bounds of dy\\n          if (dyR < 0 || dyR >= ${s}) {\\n            continue;\\n          }\\n\\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\\n            int dyC = dyCOffset + startDyC;\\n\\n            // Guard against the window exceeding the bounds of dy\\n            if (dyC < 0 || dyC >= ${o}) {\\n              continue;\\n            }\\n\\n            float dxR = float(dyR) * heightScale;\\n            int topDxRIndex = int(floor(dxR));\\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\\n            float dxRLerp = dxR - float(topDxRIndex);\\n            float inverseDxRLerp = 1.0 - dxRLerp;\\n\\n            float dxC = float(dyC) * widthScale;\\n            int leftDxCIndex = int(floor(dxC));\\n            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));\\n            float dxCLerp = dxC - float(leftDxCIndex);\\n            float inverseDxCLerp = 1.0 - dxCLerp;\\n\\n            if (r == topDxRIndex && c == leftDxCIndex) {\\n              // topLeft\\n              accumulator +=\\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\\n            }\\n\\n            if (r == topDxRIndex && c == rightDxCIndex) {\\n              // topRight\\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\\n            }\\n\\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\\n              // bottomLeft\\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\\n            }\\n\\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\\n              // bottomRight\\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\\n            }\\n          }\\n        }\\n        // End loop over dy\\n\\n        setOutput(accumulator);\\n      }\\n    `}}const eh={kernelName:a.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:o}=r,i=new Jp(s.shape,a.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}};class th{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,o,i,u]=e;this.outputShape=[s,t,n,u];const c=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\\n          ${c[0]/l[0]},\\n          ${c[1]/l[1]});\\n      const vec2 inputShapeRC = vec2(${o}.0, ${i}.0);\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n        ivec2 yRC = coords.yz;\\n\\n        // Fractional source index.\\n        vec2 sourceFracIndexRC = ${p};\\n\\n        // Compute the coordinators of nearest neighbor point.\\n        ivec2 sourceNearestRC = ivec2(\\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\\n\\n        setOutput(newValue);\\n      }\\n    `}}class nh{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,i,u]=e;this.outputShape=[s,t,n,u];const c=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\\n          ${c[0]/l[0]},\\n          ${c[1]/l[1]},\\n          ${c[1]/l[1]});\\n      const vec3 inputShapeRC = vec3(${o}.0, ${i}.0,\\n                                     ${i}.0);\\n\\n      float getAValue(int b, int r, int c, int d) {\\n        return getChannel(getA(b, r, c, d), vec2(c, d));\\n      }\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n        // Calculate values for next column in yRC.z.\\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\\n\\n        // Fractional source index.\\n        vec3 sourceFracIndexRC = ${p};\\n\\n        // Compute the coordinators of nearest neighbor point.\\n        ivec3 sourceNearestRC = ivec3(\\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\\n\\n        // Should we calculate next column and row elements in 2x2 packed cell.\\n        bool hasNextCol = d < ${u-1};\\n        bool hasNextRow = coords.z < ${n-1};\\n\\n        vec4 newValue = vec4(\\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\\n                     : 0.0,\\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\\n                     : 0.0,\\n          (hasNextRow && hasNextCol) ?\\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\\n\\n        setOutput(newValue);\\n      }\\n    `}}const rh={kernelName:a.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:o,halfPixelCenters:i,size:u}=r,[c,l]=u,d=Object(a.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new nh(s.shape,c,l,o,i):new th(s.shape,c,l,o,i);return n.runWebGLProgram(d,[s],s.dtype)}};class ah{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,o]=e,i=[n&&s>1?r-1:r,n&&o>1?a-1:a],u=[n&&s>1?s-1:s,n&&o>1?o-1:o],c=i[0]/u[0],l=i[1]/u[1],d=1/c,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int b = coords[0];\\n        int d = coords[3];\\n        int r = coords[1];\\n        int c = coords[2];\\n\\n        float accumulator = 0.0;\\n\\n        const float heightScale = float(${c});\\n        const float widthScale = float(${l});\\n\\n        const float invHeightScale = float(${d});\\n        const float invWidthScale = float(${p});\\n\\n        const int winHeight = int(${h});\\n        const int winWidth = int(${f});\\n\\n        // Compute bounds for where in dy we will look\\n        float startRLerp = floor(float(r) * invHeightScale);\\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\\n\\n        float startCLerp = floor(float(c) * invWidthScale);\\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\\n\\n        // Loop over dy\\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\\n          int dyR = dyROffset + startDyR;\\n\\n          // Guard against the window exceeding the bounds of dy\\n          if (dyR < 0 || dyR >= ${s}) {\\n            continue;\\n          }\\n\\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\\n            int dyC = dyCOffset + startDyC;\\n\\n            // Guard against the window exceeding the bounds of dy\\n            if (dyC < 0 || dyC >= ${o}) {\\n              continue;\\n            }\\n\\n            float sourceFracRow =\\n              float(${i[0]}) *\\n                (float(dyR) / float(${u[0]}));\\n\\n            float sourceFracCol =\\n                float(${i[1]}) *\\n                  (float(dyC) / float(${u[1]}));\\n\\n            int sourceNearestRow = int(min(\\n                float(int(${r}) - 1),\\n                ${n} ? float(round(sourceFracRow)) :\\n                                  float(floor(sourceFracRow))));\\n\\n            int sourceNearestCol = int(min(\\n                float(int(${a}) - 1),\\n                ${n} ? float(round(sourceFracCol)) :\\n                                  float(floor(sourceFracCol))));\\n\\n            if (r == sourceNearestRow && c == sourceNearestCol) {\\n              accumulator += getDy(b, dyR, dyC, d);\\n            }\\n          }\\n        }\\n        // End loop over dy\\n\\n        setOutput(accumulator);\\n      }\\n    `}}const sh={kernelName:a.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:o}=r,i=new ah(s.shape,a.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}};class oh{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\\n        void main() {\\n          int coord = getOutputCoords();\\n          setOutput(getX(${e[0]} - coord - 1));\\n        }\\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),a=mo(n);this.userCode=`\\n      void main() {\\n        ${a} coords = getOutputCoords();\\n        setOutput(getX(${r}));\\n      }\\n    `}}class ih{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=Ti("rc",n),a=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=mo(n);function i(n){const r=e.map(((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(a,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\\n        void main(){\\n          int rc = getOutputCoords();\\n          vec4 result = vec4(0.);\\n          result.r = getChannel(getX(${e[0]} - rc - 1),\\n            ${e[0]} - rc - 1);\\n          if(${a}){\\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\\n                ${e[0]} - (rc  + 1) - 1);\\n          }\\n          setOutput(result);\\n        }\\n      `:`\\n        void main() {\\n          ${o} rc = getOutputCoords();\\n          vec4 result = vec4(0.);\\n          result.r = ${function(e){return i(e)}(r.slice())};\\n          if(${a}){\\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",i(e)}(r.slice())};\\n          }\\n          if(${s}) {\\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",i(e)}(r.slice())};\\n            if(${a}) {\\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",i(e)}(r.slice())};\\n            }\\n          }\\n          setOutput(result);\\n        }\\n    `}}const uh={kernelName:a.Reverse,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dims:o}=r,i=s.shape.length,u=a.util.parseAxisParam(o,s.shape);if(0===i)return Gi({inputs:{x:s},backend:n});const c=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ih(s.shape,u):new oh(s.shape,u);return n.runWebGLProgram(c,[s],s.dtype)}};class ch{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\\n        vec3 fill = vec3(${t.join(",")});\\n        float outputValue = fill[coords[3]];`,this.userCode=`\\n        void main() {\\n          ivec4 coords = getOutputCoords();\\n          int x = coords[2];\\n          int y = coords[1];\\n          float coordXFloat = (float(x) - params[0]) * params[3] -\\n            (float(y) - params[1]) * params[2];\\n          float coordYFloat = (float(x) - params[0]) * params[2] +\\n            (float(y) - params[1]) * params[3];\\n          int coordX = int(round(coordXFloat + params[0]));\\n          int coordY = int(round(coordYFloat + params[1]));\\n          ${a}\\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\\n          }\\n          setOutput(outputValue);\\n        }\\n    `}}const lh={kernelName:a.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:s,fillValue:o,center:i}=t,u=n,c=new ch(r.shape,o),[l,d]=a.backend_util.getImageCenter(i,r.shape[1],r.shape[2]),p=[[l,d,Math.sin(s),Math.cos(s)]];return u.runWebGLProgram(c,[r],r.dtype,p)}},dh=tu({opSnippet:"\\n  // OpenGL ES does not support round function.\\n  // The algorithm is based on banker\'s rounding.\\n  float base = floor(x);\\n  if ((x - base) < 0.5) {\\n    return floor(x);\\n  } else if ((x - base) > 0.5) {\\n    return ceil(x);\\n  } else {\\n    if (mod(base, 2.0) == 0.0) {\\n      return base;\\n    } else {\\n      return base + 1.0;\\n    }\\n  }\\n"}),ph={kernelName:a.Round,backendName:"webgl",kernelFunc:dh},hh=tu({opSnippet:"return inversesqrt(x);",cpuKernelImpl:ci}),fh={kernelName:a.Rsqrt,backendName:"webgl",kernelFunc:hh};class mh{constructor(e,t,n,r,a,s,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const i=mo(a.length),u=mo(s.length);let c="";1===n?c="i":2===n&&(c="i, j");const l=`getIndices(${c})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const p=`getUpdates(${d})`,h=t>1?"strides[j]":"strides";this.userCode=`\\n        ${i} strides = ${i}(${a});\\n\\n        void main() {\\n          ${u} coords = getOutputCoords();\\n          float sum = 0.0;\\n          bool found = false;\\n          for (int i = 0; i < ${e}; i++) {\\n            int flattenedIndex = 0;\\n            for (int j = 0; j < ${t}; j++) {\\n              int index = round(${l});\\n              flattenedIndex += index * ${h};\\n            }\\n            if (flattenedIndex == coords[0]) {\\n              sum += ${p};\\n              found = true;\\n            }\\n          }\\n          setOutput(mix(getDefaultValue(), sum, float(found)));\\n        }\\n      `}}const bh={kernelName:a.ScatterNd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s,updates:o}=t,{shape:i}=r,{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:p}=a.backend_util.calculateShapes(o,s,i),h=[p/l,l];if(0===p)return n.makeTensorInfo(i,s.dtype);const f=du({inputs:{x:s},backend:n,attrs:{shape:[c,u]}}),m=du({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new mh(c,u,f.shape.length,m.shape.length,d,h),y=n.runWebGLProgram(g,[m,f,b],m.dtype),x=du({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}};class gh{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],o=[];for(let r=0;r<t.length;r++)o.push(`${n[r]}`),r<e&&s.push(`${n[r]}`);r=s.join(),a=o.join()}const s=mo(n);this.userCode=`\\n      void main() {\\n        ${s} resRC = getOutputCoords();\\n        float cVal = getC(${r});\\n        if (cVal >= 1.0) {\\n          setOutput(getA(${a}));\\n        } else {\\n          setOutput(getB(${a}));\\n        }\\n      }\\n    `}}const yh={kernelName:a.Select,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:s,e:o}=t,i=new gh(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,o],Object(a.upcastType)(s.dtype,o.dtype))}},xh=tu({opSnippet:`\\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\\n  // see: https://arxiv.org/abs/1706.02515\\n  float scaleAlpha = ${a.backend_util.SELU_SCALEALPHA};\\n  float scale = ${a.backend_util.SELU_SCALE};\\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\\n`}),vh={kernelName:a.Selu,backendName:"webgl",kernelFunc:xh},Oh="return 1.0 / (1.0 + exp(-1.0 * x));",kh=tu({opSnippet:Oh,packedOpSnippet:Oh,cpuKernelImpl:li}),wh={kernelName:a.Sigmoid,backendName:"webgl",kernelFunc:kh},Ih=tu({opSnippet:"\\n  if (isnan(x)) { return 0.0; }\\n  return sign(x);\\n"}),Sh={kernelName:a.Sign,backendName:"webgl",kernelFunc:Ih},Nh=tu({opSnippet:"if (isnan(x)) return x;\\n  return sin(x);\\n"}),Th={kernelName:a.Sin,backendName:"webgl",kernelFunc:Nh},jh=tu({opSnippet:"\\n  float e2x = exp(x);\\n  return (e2x - 1.0 / e2x) / 2.0;\\n"}),$h={kernelName:a.Sinh,backendName:"webgl",kernelFunc:jh},Ch=tu({opSnippet:"\\n  float epsilon = 1.1920928955078125e-7;\\n  float threshold = log(epsilon) + 2.0;\\n\\n  bool too_large = x > -threshold;\\n  bool too_small = x < threshold;\\n\\n  float result;\\n  float exp_x = exp(x);\\n\\n  if (too_large){\\n    result = x;\\n  }\\n  else if (too_small){\\n    result = exp_x;\\n  }\\n  else{\\n    result = log(exp_x + 1.0);\\n  }\\n  return result;\\n"}),Eh={kernelName:a.Softplus,backendName:"webgl",kernelFunc:Ch},Ah={kernelName:a.SpaceToBatchND,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,paddings:i}=r;a.util.assert(s.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const u=o.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...i);for(let e=1+o.length;e<s.shape.length;++e)c.push([0,0]);const l=[],d=Mp({inputs:{x:s},backend:n,attrs:{paddings:c,constantValue:0}}),p=a.backend_util.getReshaped(d.shape,o,u,!1),h=a.backend_util.getPermuted(p.length,o.length,!1),f=a.backend_util.getReshapedPermuted(d.shape,o,u,!1),m=du({inputs:{x:d},backend:n,attrs:{shape:p}}),b=Ou({inputs:{x:m},backend:n,attrs:{perm:h}}),g=du({inputs:{x:b},backend:n,attrs:{shape:f}});return l.push(d),l.push(m),l.push(b),l.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const Rh={kernelName:a.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:o}=t;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\\n         ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\\n         ${r.shape}`);if(1!==a.shape.length)throw new Error(`Values must be a vector, saw:\\n         ${a.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\\n        ${o.shape}`);const i=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[d,p,h,f,m]=hi(i,r.shape,r.dtype,u,a.dtype,c,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const _h={kernelName:a.SparseReshape,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==a.shape.length)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(a.dataId)),i=n.readSync(r.dataId),u=Array.from(n.readSync(s.dataId)),[c,l,d]=fi(i,r.shape,r.dtype,o,u);return[n.makeTensorInfo(l,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}};const Fh={kernelName:a.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\\n              ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\\n              ${s.shape}`);const o=n.readSync(r.dataId),i=n.readSync(a.dataId),u=n.readSync(s.dataId),[c,l]=mi(o,r.shape,r.dtype,i,u,!0);return n.makeTensorInfo(l,r.dtype,c)}};const Dh={kernelName:a.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\\n             ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\\n             ${s.shape}`);const o=n.readSync(r.dataId),i=n.readSync(a.dataId),u=n.readSync(s.dataId),[c,l]=mi(o,r.shape,r.dtype,i,u);return n.makeTensorInfo(l,r.dtype,c)}};const Mh={kernelName:a.SparseToDense,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:s,sparseValues:o,defaultValue:i}=t,{outputShape:u}=r,{sliceRank:c,numUpdates:l,strides:d,outputSize:p}=a.backend_util.calculateShapes(o,s,u),h=new mh(l,c,s.shape.length,o.shape.length,d,[p,1],!1),f=n.runWebGLProgram(h,[o,s,i],o.dtype),m=du({inputs:{x:f},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),m}};const Ph={kernelName:a.SplitV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{numOrSizeSplits:o,axis:i}=r,u=a.util.parseAxisParam(i,s.shape)[0],c=a.backend_util.prepareSplitSize(s,o,u),l=s.shape.length,d=new Array(l).fill(0),p=s.shape.slice();return c.map((e=>{const t=[...p];t[u]=e;const r=gc({inputs:{x:s},backend:n,attrs:{begin:d,size:t}});return d[u]+=e,r}))}},Lh="return sqrt(x);",Bh=tu({opSnippet:Lh,packedOpSnippet:Lh,cpuKernelImpl:bi}),zh={kernelName:a.Sqrt,backendName:"webgl",kernelFunc:Bh},Vh=tu({opSnippet:"return x * x;"}),Wh={kernelName:a.Square,backendName:"webgl",kernelFunc:Vh},Uh="return (a - b) * (a - b);",Gh=nu({opSnippet:Uh,packedOpSnippet:Uh}),Hh={kernelName:a.SquaredDifference,backendName:"webgl",kernelFunc:Gh};const qh={kernelName:a.Step,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,a=`if (isnan(x)) return x;\\n    return x > 0.0 ? 1.0 : float(${t.alpha});\\n  `,s=new _i(r.shape,a);return n.runWebGLProgram(s,[r],r.dtype)}};class Kh{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=mo(n.length),s=mo(n.length);let o="";if(1===r)o="coords * strides + begin";else{let e=0;o=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\\n      ${a} begin = ${a}(${e});\\n      ${a} strides = ${a}(${t});\\n\\n      void main() {\\n        ${s} coords = getOutputCoords();\\n        setOutput(getX(${o}));\\n      }\\n    `}}const Xh={kernelName:a.StridedSlice,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:o,end:i,strides:u,beginMask:c,endMask:l,ellipsisMask:d,newAxisMask:p,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:m,isIdentity:b,sliceDim0:g,isSimpleSlice:y,begin:x,end:v,strides:O}=a.slice_util.sliceInfo(s.shape,o,i,u,c,l,d,p,h);let k;if(b)k=du({inputs:{x:s},backend:n,attrs:{shape:m}});else if(g||y){a.util.assert(s.shape.length>=1,(()=>`Input must have rank at least 1, got: ${s.shape.length}`));const e=a.slice_util.computeOutShape(x,v,O),t=gc({inputs:{x:s},backend:n,attrs:{begin:x,size:e}});k=du({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([s])){const e=n.readSync(s.dataId),t=Object(a.buffer)(s.shape,s.dtype,e),r=gi(f,t,O,x);k=n.makeTensorInfo(m,s.dtype,r.values)}else{const e=new Kh(x,O,f);k=n.runWebGLProgram(e,[s],s.dtype)}}const w=du({inputs:{x:k},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(k),w}};const Yh={kernelName:a.StringNGrams,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:o,rightPad:i,padWidth:u,preserveShortSequences:c}=r,{data:l,dataSplits:d}=t,p=n.readSync(l.dataId),h=n.readSync(d.dataId),[f,m]=yi(p,h,a,s,o,i,u,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const Qh={kernelName:a.StringSplit,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:o}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const i=n.readSync(s.dataId),u=n.readSync(o.dataId)[0],[c,l,d]=xi(i,u,a),p=l.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const Zh={kernelName:a.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),i=vi(o,a);return n.makeTensorInfo(s.shape,"int32",i)}},Jh=tu({opSnippet:"return tan(x);"}),ef={kernelName:a.Tan,backendName:"webgl",kernelFunc:Jh},tf=tu({opSnippet:"\\n  float e2x = exp(-2.0 * abs(x));\\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\\n"}),nf={kernelName:a.Tanh,backendName:"webgl",kernelFunc:tf};class rf{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=mo(this.rank),a=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\\n      void main() {\\n        ${r} resRC = getOutputCoords();\\n        setOutput(getA(${a}));\\n      }\\n    `}}function af(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reps:o}=r;if("string"===s.dtype||s.shape.length>5){const e=n.readSync(s.dataId),t="string"===s.dtype?e.map((e=>a.util.decodeString(e))):e,r=Object(a.buffer)(s.shape,s.dtype,t),i=ki(r,o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new rf(s.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}const sf={kernelName:a.Tile,backendName:"webgl",kernelFunc:af};class of{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\\n       void main() {\\n         ivec2 coords = getOutputCoords();\\n         int batch = coords[0];\\n         int elemIdx = coords[1];\\n\\n         // We compare elements pair-wise within a group of size 2 * inc.\\n         // The comparing rule for each group alternates between ascending\\n         // and descending. Within each group, we compare each pair at\\n         // positions i and i+inc. To decide whether an element at position i\\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\\n         // inc, it is in the first half of the group, we denote it as x0,\\n         // otherwise we denote it as x1.\\n         // For example, as shown in the Bitonic top K paper referenced above,\\n         // Figure5(a) shows that element[1] is in the\\n         // second half of the group when group size is 2, but it is in the\\n         // first half of the group when group size is 4.\\n\\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\\n\\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\\n\\n         // Denotes which direction indices are in (ascending or descending).\\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\\n         if (reverse == isGreater) { // Elements in opposite order of direction\\n           int iTemp = i0;\\n           i0 = i1;\\n           i1 = iTemp;\\n         }\\n         if (isFirstInPair) {\\n            setOutput(float(i0));\\n         } else {\\n            setOutput(float(i1));\\n         }\\n       }\\n     "}}class uf{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\\n    void main() {\\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\\n         ivec2 coords = getOutputCoords();\\n         int batch = coords[0];\\n         int elemIdx = coords[1];\\n\\n         // The output size is half of the previous size.\\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\\n         // we only need to output the indices at positions |, the indices at\\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\\n         // (Merge phase) in the Bitonic Top K paper referenced above.\\n         // For example, the paper shows we only need to output the orange bars.\\n         // The output sequence should look like this | | | | | | | |.\\n         // Because the sequence is halved, to map the output index back\\n         // to the previous sequence to find the corresponding value,\\n         // we need to double the index. When we double the index,\\n         // we basically interpolate a position, so 2i looks like\\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\\n         // of each 2k positions by - elemIdx % k. E.g. for output at\\n         // index 4,5,6,7, we want to get the corresponding element at\\n         // original index 8,9,10,11, for output at index 8,9,10,11,\\n         // we want to get the corresponding element at original index\\n         // 16,17,18,19, so on and so forth.\\n\\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\\n\\n         float x0 = getX(batch, i0);\\n         float x1 = i1 < n ? getX(batch, i1) : x0;\\n\\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\\n       }\\n     "}}function cf(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function lf(e){let t=1;for(;t<e;)t*=2;return t}const df={kernelName:a.TopK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{k:o,sorted:i}=r,u=Object(a.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=Object(a.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=s.shape,d=l[l.length-1];if(n.shouldExecuteOnCPU([s])||d<u||o>c){const e=n.readSync(s.dataId),[t,r]=wi(e,l,s.dtype,o,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return l[l.length-1]=0,[n.makeTensorInfo(l,s.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===d)return[s,Xl({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const p=n.texData.get(s.dataId),h=null!==p&&p.isPacked,f=h?n.unpackTensor(s):s,m=a.util.sizeFromShape(l)/d,b=du({inputs:{x:f},attrs:{shape:[m,d]},backend:n});h&&cf(n,f);const g=lf(o),y=lf(d);let x=null;const v=()=>null===x?[b,b]:[b,x],O=(e,t,r)=>{const a=v(),s=new of(r),o=[[d],[null===x?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=x;x=n.runWebGLProgram(s,a,"int32",o),cf(n,i)};for(let e=1;e<g;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)O(t,n,[m,y])}for(let e=y;e>g;e/=2){const t=v(),r=new uf([m,e/2]),a=[[d],[null===x?1:0],[g]],s=x;x=n.runWebGLProgram(r,t,"int32",a),cf(n,s);const o=g/2,i=2*o;for(let e=o;e>=1;e/=2)O(i,e,x.shape)}let k=x;x=gc({inputs:{x:x},backend:n,attrs:{begin:0,size:[m,o]}}),cf(n,k);let w=hd({inputs:{x:b,indices:x},backend:n,attrs:{axis:1,batchDims:1}});cf(n,b);const I=l.slice(0,-1);I.push(o),k=x,x=du({inputs:{x:x},attrs:{shape:I},backend:n}),cf(n,k);const S=w;return w=du({inputs:{x:w},attrs:{shape:I},backend:n}),cf(n,S),[w,x]}};class pf{constructor(e,t,n,r,a,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const o="nearest"===n?1:2;let i;switch(r){case"constant":i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4;break;default:i=1}this.userCode=`\\n            float mapCoord(float outCoord, float len) {\\n              float inCoord = outCoord;\\n              if(${i} == 2) {\\n                if (inCoord < 0.0) {\\n                  if (len <= 1.0) {\\n                    inCoord = 0.0;\\n                  } else {\\n                    float sz2 = 2.0 * len;\\n                    if (inCoord < sz2) {\\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\\n                      inCoord;\\n                    }\\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\\n                  }\\n                } else if (inCoord > len - 1.0) {\\n                  if (len <= 1.0) {\\n                    inCoord = 0.0;\\n                  } else {\\n                    float sz2 = 2.0 * len;\\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\\n                    if (inCoord >= len) {\\n                      inCoord = sz2 - inCoord - 1.0;\\n                    }\\n                  }\\n                }\\n                return clamp(inCoord, 0.0, len - 1.0);\\n              } else if (${i} == 3) {\\n                if (inCoord < 0.0) {\\n                  if (len <= 1.0) {\\n                    inCoord = 0.0;\\n                  } else {\\n                    float sz = len - 1.0;\\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\\n                  }\\n                } else if (inCoord > len - 1.0) {\\n                  if (len <= 1.0) {\\n                    inCoord = 0.0;\\n                  } else {\\n                    float sz = len - 1.0;\\n                    inCoord -= len * float(int(float(inCoord / sz)));\\n                  }\\n                }\\n                return clamp(inCoord, 0.0, len - 1.0);\\n              } else if (${i} == 4) {\\n                return clamp(outCoord, 0.0, len - 1.0);\\n              } else {\\n                return outCoord;\\n              }\\n            }\\n\\n            float readWithFillValue(int batch, int coordY, int coordX,\\n              int channel) {\\n              float outputValue;\\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\\n                  outputValue = getImage(batch, coordY, coordX, channel);\\n              } else {\\n                outputValue = float(${a});\\n              }\\n              return outputValue;\\n            }\\n\\n            void main() {\\n              ivec4 coords = getOutputCoords();\\n              float outputValue;\\n              int batch = coords[0];\\n              int x = coords[2];\\n              int y = coords[1];\\n              int channel = coords[3];\\n              float xf = float(x);\\n              float yf = float(y);\\n              float a1 = getTransforms(batch, 0);\\n              float a2 = getTransforms(batch, 1);\\n              float a3 = getTransforms(batch, 2);\\n              float b1 = getTransforms(batch, 3);\\n              float b2 = getTransforms(batch, 4);\\n              float b3 = getTransforms(batch, 5);\\n              float c1 = getTransforms(batch, 6);\\n              float c2 = getTransforms(batch, 7);\\n              float projection = c1 * xf + c2 * yf + 1.0;\\n              if (projection == 0.0) {\\n                outputValue = float(${a});\\n              } else {\\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\\n                float mapX = mapCoord(inX, float(${t}));\\n                float mapY = mapCoord(inY, float(${e}));\\n\\n                if (${o} == 1) {\\n                  int coordY = int(round(mapY));\\n                  int coordX = int(round(mapX));\\n                  outputValue = readWithFillValue(batch, coordY, coordX,\\n                    channel);\\n                } else {\\n                  float yFloor = floor(mapY);\\n                  float xFloor = floor(mapX);\\n                  float yCeil = yFloor + 1.0;\\n                  float xCeil = xFloor + 1.0;\\n                  float valueYFloor = (xCeil - mapX) *\\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\\n                  (mapX - xFloor) *\\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\\n                  float valueYCeil = (xCeil - mapX) *\\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\\n                  (mapX - xFloor) *\\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\\n                  outputValue = (yCeil - mapY) * valueYFloor +\\n                  (mapY - yFloor) * valueYCeil;\\n                }\\n              }\\n              setOutput(outputValue);\\n            }\\n        `}}const hf={kernelName:a.Transform,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:s}=t,{interpolation:o,fillMode:i,fillValue:u,outputShape:c}=r,[l,d,p,h]=a.shape,[f,m]=null!=c?c:[d,p],b=new pf(d,p,o,i,u,[l,f,m,h]);return n.runWebGLProgram(b,[a,s],"float32")}};const ff={kernelName:a.Unique,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;Xs(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:i,outputShape:u,indices:c}=Si(o,a,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,i),r.makeTensorInfo([c.length],"int32",c)]}};const mf={kernelName:a.Unpack,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const o=a,i=o.shape.length,u=a.shape[s],c=new Array(i-1);let l=0;for(let e=0;e<i;e++)e!==s&&(c[l++]=o.shape[e]);const d=[],p=new Array(i).fill(0),h=o.shape.slice();h[s]=1;const f=new Array(u);for(let e=0;e<f.length;e++){p[s]=e;const t=gc({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),r=du({inputs:{x:t},backend:n,attrs:{shape:c}});f[e]=r,d.push(t)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class bf{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,s=e.numSegments,o=s*Math.ceil(a/n);this.outputShape=[r,o];const i=4*Math.floor(n/4),u=n%4,c="\\n        sumValue += dot(values, segFilter);\\n    ";let l="";a%n>0&&(l=`\\n        if (inIdx < 0 || inIdx >= ${a}) {\\n          return initializationValue;\\n        }\\n      `);let d="";a%n>0&&(d=`\\n        if (inIdx < 0 || inIdx >= ${a}) {\\n          return -1.0;\\n        }\\n      `),this.userCode=`\\n      const float initializationValue = 0.0;\\n\\n      float getValue(int batch, int inIdx) {\\n        ${l}\\n        return getX(batch, inIdx);\\n      }\\n\\n      float getSegmentIdAtIndex(int inIdx) {\\n        ${d}\\n        return getSegmentIds(inIdx);\\n      }\\n\\n      void main() {\\n        ivec2 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int outIdx = coords[1];\\n        int inOffset = int(floor(float(outIdx) / float(\\n          ${s})) * float(${n}));\\n        int currentSeg = int(mod(float(outIdx), float(${s})));\\n\\n        float sumValue = 0.0;\\n\\n        for (int i = 0; i < ${i}; i += 4) {\\n          int inIdx = inOffset + i;\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            getValue(batch, inIdx + 3)\\n          );\\n\\n          vec4 segFilter = vec4(\\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\\n          );\\n\\n          ${c}\\n        }\\n\\n        int inIdx = inOffset + ${i};\\n        if (${1===u}) {\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            initializationValue,\\n            initializationValue,\\n            initializationValue\\n          );\\n\\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\\n\\n          vec4 segFilter = vec4(\\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\\n            0,\\n            0,\\n            0\\n          );\\n\\n          ${c}\\n        } else if (${2===u}) {\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            initializationValue,\\n            initializationValue\\n          );\\n\\n          vec4 segFilter = vec4(\\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\\n              0,\\n              0\\n          );\\n\\n          ${c}\\n        } else if (${3===u}) {\\n          vec4 values = vec4(\\n            getValue(batch, inIdx),\\n            getValue(batch, inIdx + 1),\\n            getValue(batch, inIdx + 2),\\n            initializationValue\\n          );\\n\\n          vec4 segFilter = vec4(\\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\\n            0\\n          );\\n\\n          ${c}\\n        }\\n        setOutput(sumValue);\\n      }\\n    `}}const gf=[Wd,Gd,Iu,Nu,ju,Cu,Ru,Du,Mu,Pu,Uu,Gu,qu,Xu,Ju,Qu,tc,sc,ac,uc,cc,lc,hc,xc,vc,Oc,Nc,$c,Ac,Fc,Ki,Wc,el,tl,Xc,rl,al,nl,ol,ul,ll,fl,ml,gl,wl,Il,vl,Nl,jl,$l,El,Al,_l,Dl,Ll,zl,Ul,ql,Yl,Zl,td,rd,od,ud,cd,dd,fd,bd,yd,Hi,xd,Bc,Od,wd,Sd,Qi,Td,$d,Cd,_d,Ad,Dd,Pd,Bd,qd,Qd,Yd,ep,tp,np,Xd,rp,ap,op,cp,dp,vp,lu,kp,Ip,Np,jp,wc,Cp,Rp,_p,Pp,Bp,eu,zp,Wp,Sc,fp,Gp,Xp,qp,pu,Zp,eh,rh,sh,uh,lh,ph,fh,bh,yh,vh,wh,Sh,Th,$h,yc,xp,Eh,Ah,Rh,_h,Fh,Dh,Mh,Ph,zh,Wh,Hh,qh,Xh,Yh,Qh,Zh,gp,vu,ef,nf,sf,df,hf,ku,ff,mf,{kernelName:a.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,segmentIds:o}=t,{numSegments:i}=r,u=s.shape.length,c=[];let l=0;const d=a.backend_util.getAxesPermutation([l],u);let p=s;null!=d&&(p=Ou({inputs:{x:s},backend:n,attrs:{perm:d}}),c.push(p),l=a.backend_util.getInnerMostAxes(1,u)[0]);const h=a.backend_util.segment_util.computeOutShape(p.shape,l,i),f=a.util.sizeFromShape([p.shape[l]]),m=du({inputs:{x:p},backend:n,attrs:{shape:[-1,f]}});c.push(m);const b=Object(a.sumOutType)(s.dtype),g=(e,t,r,s,o)=>{const i=e.shape[0],u=e.shape[1],l=a.backend_util.segment_util.segOpComputeOptimalWindowSize(u,o),d=new bf({windowSize:l,inSize:u,batchSize:i,numSegments:o},t),p=n.compileAndRun(d,[e,r],s);if(c.push(p),p.shape[1]===o)return p;const h=Vp({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),f=af({inputs:{x:h},backend:n,attrs:{reps:[u/l]}});c.push(h),c.push(f);return g(p,t,f,s,o)},y=du({inputs:{x:g(m,"unsortedSegmentSum",o,b,i)},backend:n,attrs:{shape:h}});let x=y;if(null!=d){c.push(y);const e=a.backend_util.getUndoAxesPermutation(d);x=Ou({inputs:{x:x},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),x}},Ap];for(const e of gf)Object(a.registerKernel)(e);function yf(e){return(yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xf(e,t,n){var r=n.value;if("function"!=typeof r)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(yf(r)));var a=!1;return{configurable:!0,get:function(){if(a||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof r)return r;var n=r.bind(this);return a=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){r=e,delete this[t]}}),a=!1,n},set:function(e){r=e}}}var vf=n(38),Of=n(1);class kf{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return Object(Of.e)(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return Object(Of.e)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(vf.f)(this.node.rawAttrs,e,t);if(null!=n.s)return Object(vf.i)(this.node.rawAttrs,e,t);if(null!=n.b)return Object(vf.c)(this.node.rawAttrs,e,t);if(null!=n.shape)return Object(vf.k)(this.node.rawAttrs,e,t);if(null!=n.type)return Object(vf.e)(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(vf.g)(this.node.rawAttrs,e,t);if(null!=n.list.s)return Object(vf.h)(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Object(vf.j)(this.node.rawAttrs,e,t);if(null!=n.list.b)return Object(vf.b)(this.node.rawAttrs,e,t);if(null!=n.list.type)return Object(vf.d)(this.node.rawAttrs,e,t)}return t}}var wf=n(69),If=n(10),Sf=n(135),Nf=n(170),Tf=n(9),jf=n(16),$f=n(158),Cf=n(101),Ef=n(11),Af=n(117),Rf=n(102),_f=n(54),Ff=n(125);var Df=n(30),Mf=n(133),Pf=n(134),Lf=n(140),Bf=n(141),zf=n(142),Vf=n(143),Wf=n(144),Uf=n(147),Gf=n(39),Hf=n(152),qf=n(153),Kf=n(107),Xf=n(160),Yf=n(44),Qf=n(161),Zf=n(108),Jf=n(55),em=n(112),tm=n(81),nm=n(36),rm=n(174),am=n(73),sm=n(64),om=n(123),im=n(176),um=n(51),cm=n(179),lm=n(178),dm=n(180),pm=n(113),hm=n(43),fm=n(29),mm=n(92),bm=n(183),gm=n(148),ym=n(122),xm=n(175),vm=n(173),Om=n(111),km=n(120),wm=n(162);function Im(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){a.util.assert(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const s=e[r],o=t[r];a.util.assert(s<0||o<0||s===o,(()=>n+` Shapes ${e} and ${t} must match`))}}}function Sm(e){return"number"!=typeof e&&!e.some((e=>e<0))}function Nm(e,t,n){let r=Tm(e,n);const a=!Sm(r);if(a&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&t.forEach((e=>{r=Tm(e.shape,r)})),!Sm(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Tm(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const a=e[r],s=t[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:s}return n}class jm{constructor(e,t,n,r,s,o,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Object(a.scalar)(0),Object(a.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Im(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Object(a.keep)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Object(a.tensor)([],[0].concat(this.elementShape));const n=this.readMany(e);return Im(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Object(a.stack)(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Object(a.tensor)([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return Im(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Object(a.concat)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,Object(a.unstack)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\\n          tensor.shape[0], but sum of lengths is\\n        ${n}, and tensor\'s shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray\'s size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=0===n?0:t.size/n,o=[];Object(a.tidy)((()=>{t=Object(a.reshape)(t,[1,n,s]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],u=[1,e[n],s];o[n]=Object(a.reshape)(Object(a.slice)(t,i,u),this.elementShape)}return o}));const i=[];for(let t=0;t<e.length;t++)i[t]=t;this.writeMany(i,o)}}class $m{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);Im(t,e.shape,"TensorList shape mismatch: "),Object(a.keep)(e)})),this.idTensor=Object(a.scalar)(0),this.maxNumElements=r,Object(a.keep)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new $m([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);Im(e,this.elementShape,"TensorList shape mismatch: ");const r=Nm(this.elementShape,this.tensors,e);return Object(a.tidy)((()=>{const e=this.tensors.map((e=>Object(a.reshape)(e,r)));return Object(a.stack)(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=Nm(this.elementShape,this.tensors,e),r=this.tensors.pop();return Im(r.shape,e,"TensorList shape mismatch: "),Object(a.reshape)(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Im(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(a.keep)(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);Im(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=Nm(this.elementShape,this.tensors,t);return Object(a.reshape)(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Im(this.elementShape,t.shape,"TensorList shape mismatch: "),Object(a.keep)(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Im(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=Nm(this.elementShape,this.tensors,n);return 0===e.length?Object(a.tensor)([],[0].concat(r)):Object(a.tidy)((()=>{const t=e.map((e=>Object(a.reshape)(this.tensors[e],r)));return Object(a.stack)(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Im(this.elementShape,t,"TensorList shape mismatch: ");const n=Nm(this.elementShape,this.tensors,t);return 0===this.size()?Object(a.tensor)([],[0].concat(n)):Object(a.tidy)((()=>{const e=this.tensors.map((e=>Object(a.reshape)(e,n)));return Object(a.concat)(e,0)}))}}const Cm=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=Object(Of.d)("thenBranch",e,t,n),a=Object(Of.d)("elseBranch",e,t,n),s=Object(Of.d)("cond",e,t,n),o=Object(Of.d)("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Object(Of.d)("body",e,t,n),a=Object(Of.d)("cond",e,t,n),s=Object(Of.d)("args",e,t,n),o=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),i=s.map((e=>e.id));let u=await o[0].data();o.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||e.dispose()}));let c=s;for(;u[0];){const e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const t=c.map((e=>e.id));e.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const s=await n.functionMap[a].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=await s[0].data(),s.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return c}case"LoopCond":{const r=Object(Of.d)("pred",e,t,n);return[Object(Of.a)(r)]}case"Switch":{const r=Object(Of.d)("pred",e,t,n);let a=Object(Of.d)("data",e,t,n);return a.kept||(a=Object(Of.a)(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==Object(Of.e)(e,t,n)));if(r){const e=Object(Of.e)(r,t,n);return[Object(Of.a)(e)]}return}case"Enter":{const r=Object(Of.d)("frameName",e,t,n),a=Object(Of.d)("tensor",e,t,n);return n.enterFrame(r),[Object(Of.a)(a)]}case"Exit":{const r=Object(Of.d)("tensor",e,t,n);return n.exitFrame(),[Object(Of.a)(r)]}case"NextIteration":{const r=Object(Of.d)("tensor",e,t,n);return n.nextIteration(),[Object(Of.a)(r)]}case"TensorArrayV3":{const r=Object(Of.d)("size",e,t,n),s=Object(Of.d)("dtype",e,t,n),o=Object(Of.d)("elementShape",e,t,n),i=Object(Of.d)("dynamicSize",e,t,n),u=Object(Of.d)("clearAfterRead",e,t,n),c=Object(Of.d)("identicalElementShapes",e,t,n),l=Object(Of.d)("name",e,t,n),d=new jm(l,s,r,o,c,i,u);return n.addTensorArray(d),[d.idTensor,Object(a.scalar)(1)]}case"TensorArrayWriteV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=Object(Of.d)("index",e,t,n),s=Object(Of.d)("tensor",e,t,n),o=n.getTensorArray(r.id);return o.write(a,s),[o.idTensor]}case"TensorArrayReadV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=Object(Of.d)("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=Object(Of.d)("indices",e,t,n),s=Object(Of.d)("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=Object(Of.d)("indices",e,t,n),s=Object(Of.d)("tensor",e,t,n),o=n.getTensorArray(r.id);return o.scatter(a,s),[o.idTensor]}case"TensorArrayConcatV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=Object(Of.d)("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=Object(Of.d)("tensor",e,t,n),s=Object(Of.d)("lengths",e,t,n),o=n.getTensorArray(r.id);return o.split(s,a),[o.idTensor]}case"TensorArraySizeV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),s=n.getTensorArray(r.id);return[Object(a.scalar)(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=Object(Of.d)("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=Object(Of.d)("tensorListId",e,t,n),a=Object(Of.d)("index",e,t,n),s=Object(Of.d)("tensor",e,t,n),o=n.getTensorList(r.id);return o.setItem(a,s),[o.idTensor]}case"TensorListGetItem":{const r=Object(Of.d)("tensorListId",e,t,n),a=Object(Of.d)("index",e,t,n),s=Object(Of.d)("elementShape",e,t,n),o=Object(Of.d)("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Object(Of.d)("indices",e,t,n),s=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const s=Math.max(...t);if(null!=r&&-1!==r&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const o=new $m([],n,e.dtype,r),i=Object(a.unstack)(e,0);return t.forEach(((e,t)=>{o.setItem(e,i[t])})),o}(Object(Of.d)("tensor",e,t,n),r,Object(Of.d)("elementShape",e,t,n),Object(Of.d)("numElements",e,t,n));return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Object(Of.d)("elementShape",e,t,n),a=Object(Of.d)("elementDType",e,t,n);let s;s="TensorListReserve"===e.op?"numElements":"maxNumElements";const o=function(e,t,n){return new $m([],e,t,n)}(r,a,Object(Of.d)(s,e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=Object(Of.d)("tensorListId",e,t,n),a=Object(Of.d)("indices",e,t,n),s=Object(Of.d)("elementShape",e,t,n),o=Object(Of.d)("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,o,s)]}case"TensorListStack":{const r=Object(Of.d)("tensorListId",e,t,n),a=Object(Of.d)("elementShape",e,t,n),s=Object(Of.d)("elementDType",e,t,n),o=Object(Of.d)("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,s,o)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);Im(e.shape.slice(1),t,"TensorList shape mismatch: ");const s=Object(a.unstack)(e);return new $m(s,t,r)}(Object(Of.d)("tensor",e,t,n),Object(Of.d)("elementShape",e,t,n),Object(Of.d)("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{const r=Object(Of.d)("tensorListId",e,t,n),a=n.getTensorList(r.id),s=Object(Of.d)("dtype",e,t,n),o=Object(Of.d)("elementShape",e,t,n);return[a.concat(s,o)]}case"TensorListPushBack":{const r=Object(Of.d)("tensorListId",e,t,n),a=Object(Of.d)("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=Object(Of.d)("tensorListId",e,t,n),a=Object(Of.d)("elementShape",e,t,n),s=Object(Of.d)("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{const r=Object(Of.d)("tensor",e,t,n),s=Object(Of.d)("elementShape",e,t,n),o=function(e,t,n){let r=0;const s=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\\n          tensor.shape[0], but sum of lengths is\\n        ${r}, and tensor\'s shape is: ${e.shape}`);const o=Tm(e.shape.slice(1),n),i=0===r?0:e.size/r,u=Object(a.tidy)((()=>{const n=[];e=Object(a.reshape)(e,[1,r,i]);for(let r=0;r<t.length;++r){const u=[0,0===r?0:s[r-1],0],c=[1,t[r],i];n[r]=Object(a.reshape)(Object(a.slice)(e,u,c),o)}return e.dispose(),n})),c=new $m([],n,e.dtype,t.length);for(let e=0;e<u.length;e++)c.setItem(e,u[e]);return c}(r,Object(Of.d)("lengths",e,t,n),s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Em=n(149),Am=n(62),Rm=n(98),_m=n(150),Fm=n(80),Dm=n(151),Mm=n(103),Pm=n(116),Lm=n(168),Bm=n(145),zm=n(167),Vm=n(157);function Wm(e,t,n){const[r,a]=Object(Of.d)("fusedOps",e,t,n),s="biasadd"===r,o=!s,i="prelu"===a,u="fusedbatchnorm"===r,c=Object(Of.d)("numArgs",e,t,n);if(s){if(i&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&s&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=Object(Of.d)("strides",e,t,n),d=Object(Of.c)(e,t,n),p=Object(Of.d)("dataFormat",e,t,n).toUpperCase(),h=Object(Of.d)("dilations",e,t,n);let[f,m]=Object(Of.d)("args",e,t,n);o&&(m=f,f=void 0);return{stride:l,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:Object(Of.d)("leakyreluAlpha",e,t,n)}}var Um=n(61),Gm=n(164),Hm=n(171),qm=n(94),Km=n(58),Xm=n(172),Ym=n(121),Qm=n(68),Zm=n(185),Jm=n(63),eb=n(28);var tb=n(18),nb=n(128),rb=n(177);function ab(e,t,n){return{boxes:Object(Of.d)("boxes",e,t,n),scores:Object(Of.d)("scores",e,t,n),maxOutputSize:Object(Of.d)("maxOutputSize",e,t,n),iouThreshold:Object(Of.d)("iouThreshold",e,t,n),scoreThreshold:Object(Of.d)("scoreThreshold",e,t,n),softNmsSigma:Object(Of.d)("softNmsSigma",e,t,n)}}var sb=n(184),ob=n(186);var ib=n(34),ub=n(14);class cb{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Object(a.scalar)(0),this.tensorMap=new Map,Object(a.keep)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ub.a(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),Object(a.tidy)((()=>{const e=Object(a.unstack)(t),r=n.length,s=e.length;a.util.assert(r===s,(()=>`The number of elements doesn\'t match, keys has ${r} elements, the values has ${s} elements.`));for(let t=0;t<r;t++){const r=n[t],s=e[t];Object(a.keep)(s),this.tensorMap.set(r,s)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Object(a.tidy)((()=>{const e=[];for(let r=0;r<n.length;r++){const a=n[r],s=this.findWithDefault(a,t);e.push(s)}return Object(a.stack)(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}var lb=n(106),db=n(118),pb=n(70),hb=n(110),fb=n(163),mb=n(82),bb=n(71),gb=n(114),yb=n(115),xb=n(45);var vb=n(19),Ob=n(159),kb=n(75);var wb=n(65),Ib=n(165),Sb=n(181),Nb=n(166),Tb=n(190);var jb=n(52),$b=n(72),Cb=n(93),Eb=n(22),Ab=n(136),Rb=n(137),_b=n(138),Fb=n(139),Db=n(154),Mb=n(105),Pb=n(155);var Lb=n(25),Bb=n(109),zb=n(40),Vb=n(21),Wb=n(182),Ub=n(85),Gb=n(7),Hb=n(57),qb=n(86),Kb=n(66),Xb=n(56),Yb=n(187),Qb=n(188);var Zb=n(83),Jb=n(74),eg=n(84),tg=n(124);var ng=n(59),rg=n(169),ag=n(49),sg=n(119),og=n(104),ig=n(156),ug=n(87),cg=n(146);function lg(e,t,n,r){const s=((e,t,n)=>{switch(e.category){case"arithmetic":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[If.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"AddN":return[Sf.a(Object(Of.d)("tensors",e,t,n))];case"FloorMod":case"Mod":return[Nf.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Mul":return[Tf.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"RealDiv":case"Div":return[jf.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"DivNoNan":return[$f.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"FloorDiv":return[Cf.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Sub":return[Ef.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Minimum":return[Af.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Maximum":return[Rf.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Pow":return[_f.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"SquaredDifference":return[Ff.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[Df.a(Object(Of.d)("x",e,t,n))];case"Acos":return[Mf.a(Object(Of.d)("x",e,t,n))];case"Acosh":return[Pf.a(Object(Of.d)("x",e,t,n))];case"Asin":return[Lf.a(Object(Of.d)("x",e,t,n))];case"Asinh":return[Bf.a(Object(Of.d)("x",e,t,n))];case"Atan":return[zf.a(Object(Of.d)("x",e,t,n))];case"Atan2":return[Vf.a(Object(Of.d)("x",e,t,n),Object(Of.d)("y",e,t,n))];case"Atanh":return[Wf.a(Object(Of.d)("x",e,t,n))];case"Ceil":return[Uf.a(Object(Of.d)("x",e,t,n))];case"Complex":return[Gf.a(Object(Of.d)("real",e,t,n),Object(Of.d)("imag",e,t,n))];case"Cos":return[Hf.a(Object(Of.d)("x",e,t,n))];case"Cosh":return[qf.a(Object(Of.d)("x",e,t,n))];case"Elu":return[Kf.a(Object(Of.d)("x",e,t,n))];case"Erf":return[Xf.a(Object(Of.d)("x",e,t,n))];case"Exp":return[Yf.a(Object(Of.d)("x",e,t,n))];case"Expm1":return[Qf.a(Object(Of.d)("x",e,t,n))];case"Floor":return[Zf.a(Object(Of.d)("x",e,t,n))];case"Log":return[Jf.a(Object(Of.d)("x",e,t,n))];case"Log1p":return[em.a(Object(Of.d)("x",e,t,n))];case"Imag":return[tm.a(Object(Of.d)("x",e,t,n))];case"Neg":return[nm.a(Object(Of.d)("x",e,t,n))];case"Reciprocal":return[rm.a(Object(Of.d)("x",e,t,n))];case"Real":return[am.a(Object(Of.d)("x",e,t,n))];case"Relu":return[sm.a(Object(Of.d)("x",e,t,n))];case"Round":return[om.a(Object(Of.d)("x",e,t,n))];case"Selu":return[im.a(Object(Of.d)("x",e,t,n))];case"Sigmoid":return[um.a(Object(Of.d)("x",e,t,n))];case"Sin":return[cm.a(Object(Of.d)("x",e,t,n))];case"Sign":return[lm.a(Object(Of.d)("x",e,t,n))];case"Sinh":return[dm.a(Object(Of.d)("x",e,t,n))];case"Softplus":return[pm.a(Object(Of.d)("x",e,t,n))];case"Sqrt":return[hm.a(Object(Of.d)("x",e,t,n))];case"Square":return[fm.a(Object(Of.d)("x",e,t,n))];case"Tanh":return[mm.a(Object(Of.d)("x",e,t,n))];case"Tan":return[bm.a(Object(Of.d)("x",e,t,n))];case"ClipByValue":return[gm.a(Object(Of.d)("x",e,t,n),Object(Of.d)("clipValueMin",e,t,n),Object(Of.d)("clipValueMax",e,t,n))];case"Relu6":return[ym.a(Object(Of.d)("x",e,t,n))];case"Rsqrt":return[xm.a(Object(Of.e)(e.inputNames[0],t,n))];case"Prod":return[vm.a(Object(Of.d)("x",e,t,n),Object(Of.d)("axes",e,t,n))];case"LeakyRelu":return[Om.a(Object(Of.d)("x",e,t,n),Object(Of.d)("alpha",e,t,n))];case"Prelu":return[km.a(Object(Of.d)("x",e,t,n),Object(Of.d)("alpha",e,t,n))];case"IsNan":return[wm.a(Object(Of.e)(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return Cm(e,t,n);case"convolution":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Conv1D":{const r=Object(Of.d)("stride",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("dataFormat",e,t,n).toUpperCase(),o=Object(Of.d)("dilation",e,t,n);return[Em.a(Object(Of.d)("x",e,t,n),Object(Of.d)("filter",e,t,n),r,a,s,o)]}case"Conv2D":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.c)(e,t,n),s=Object(Of.d)("dataFormat",e,t,n).toUpperCase(),o=Object(Of.d)("dilations",e,t,n);return[Am.a(Object(Of.d)("x",e,t,n),Object(Of.d)("filter",e,t,n),[r[1],r[2]],a,s,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:r,pad:a,dataFormat:s,dilations:o,biasArg:i,preluArg:u,activationFunc:c,leakyreluAlpha:l}=Wm(e,t,n);return[Rm.rb.conv2d({x:Object(Of.d)("x",e,t,n),filter:Object(Of.d)("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:i,activation:c,preluActivationWeights:u,leakyreluAlpha:l})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:a,dataFormat:s,dilations:o,biasArg:i,preluArg:u,activationFunc:c,leakyreluAlpha:l}=Wm(e,t,n);return[Rm.rb.depthwiseConv2d({x:Object(Of.d)("x",e,t,n),filter:Object(Of.d)("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:i,activation:c,preluActivationWeights:u,leakyreluAlpha:l})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Object(Of.d)("outputShape",e,t,n),a=Object(Of.d)("strides",e,t,n),s=Object(Of.c)(e,t,n);return[_m.a(Object(Of.d)("x",e,t,n),Object(Of.d)("filter",e,t,n),r,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.c)(e,t,n),s=Object(Of.d)("dilations",e,t,n),o=Object(Of.d)("dataFormat",e,t,n).toUpperCase();return[Fm.a(Object(Of.d)("input",e,t,n),Object(Of.d)("filter",e,t,n),[r[1],r[2]],a,o,[s[1],s[2]])]}case"Conv3D":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("dataFormat",e,t,n).toUpperCase(),o=Object(Of.d)("dilations",e,t,n);return[Dm.a(Object(Of.d)("x",e,t,n),Object(Of.d)("filter",e,t,n),[r[1],r[2],r[3]],a,s,[o[1],o[2],o[3]])]}case"AvgPool":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("kernelSize",e,t,n);return[Mm.a(Object(Of.d)("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPool":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("kernelSize",e,t,n);return[Pm.a(Object(Of.d)("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("kernelSize",e,t,n),o=Object(Of.d)("includeBatchInIndex",e,t,n),{result:i,indexes:u}=Lm.a(Object(Of.d)("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a,o);return[i,u]}case"AvgPool3D":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("kernelSize",e,t,n);return[Bm.a(Object(Of.d)("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("kernelSize",e,t,n);return[zm.a(Object(Of.d)("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{const r=Object(Of.d)("strides",e,t,n),a=Object(Of.d)("pad",e,t,n),s=Object(Of.d)("dilations",e,t,n),o=r[1],i=r[2],u=s[1],c=s[2];return[Vm.a(Object(Of.d)("x",e,t,n),Object(Of.d)("filter",e,t,n),[o,i],a,[u,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Fill":{const r=Object(Of.d)("shape",e,t,n),a=Object(Of.d)("dtype",e,t,n),s=Object(Of.d)("value",e,t,n);return[Um.a(r,s,a)]}case"LinSpace":{const r=Object(Of.d)("start",e,t,n),a=Object(Of.d)("stop",e,t,n),s=Object(Of.d)("num",e,t,n);return[Gm.a(r,a,s)]}case"Multinomial":{const r=Object(Of.d)("logits",e,t,n),a=Object(Of.d)("numSamples",e,t,n),s=Object(Of.d)("seed",e,t,n);return[Hm.a(r,a,s)]}case"OneHot":{const r=Object(Of.d)("indices",e,t,n),a=Object(Of.d)("depth",e,t,n),s=Object(Of.d)("onValue",e,t,n),o=Object(Of.d)("offValue",e,t,n);return[qm.a(r,a,s,o)]}case"Ones":return[Km.a(Object(Of.d)("shape",e,t,n),Object(Of.d)("dtype",e,t,n))];case"OnesLike":return[Xm.a(Object(Of.d)("x",e,t,n))];case"RandomUniform":return[Ym.a(Object(Of.d)("shape",e,t,n),Object(Of.d)("minval",e,t,n),Object(Of.d)("maxval",e,t,n),Object(Of.d)("dtype",e,t,n))];case"Range":{const r=Object(Of.d)("start",e,t,n),a=Object(Of.d)("stop",e,t,n),s=Object(Of.d)("step",e,t,n);return[Qm.a(r,a,s,Object(Of.d)("dtype",e,t,n))]}case"TruncatedNormal":{const r=Object(Of.d)("shape",e,t,n),a=Object(Of.d)("mean",e,t,n),s=Object(Of.d)("stdDev",e,t,n),o=Object(Of.d)("seed",e,t,n);return[Zm.a(r,a,s,Object(Of.d)("dtype",e,t,n),o)]}case"Zeros":return[Jm.a(Object(Of.d)("shape",e,t,n),Object(Of.d)("dtype",e,t,n))];case"ZerosLike":return[eb.a(Object(Of.d)("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i,softNmsSigma:u}=ab(e,t,n),c=await Rm.yb.nonMaxSuppressionWithScoreAsync(r,a,s,o,i,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i}=ab(e,t,n),u=Object(Of.d)("padToMaxOutputSize",e,t,n),c=await Rm.yb.nonMaxSuppressionPaddedAsync(r,a,s,o,i,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i}=ab(e,t,n);return[await Rm.yb.nonMaxSuppressionAsync(r,a,s,o,i)]}case"Where":{const r=tb.a(Object(Of.d)("condition",e,t,n),"bool"),a=[await nb.a(r)];return r.dispose(),a}case"ListDiff":return rb.a(Object(Of.d)("x",e,t,n),Object(Of.d)("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"TopKV2":{const r=Object(Of.d)("x",e,t,n),a=Object(Of.d)("k",e,t,n),s=Object(Of.d)("sorted",e,t,n),o=sb.a(r,a,s);return[o.values,o.indices]}case"Unique":{const r=Object(Of.d)("x",e,t,n),a=ob.a(r);return[a.values,a.indices]}case"UniqueV2":{const r=Object(Of.d)("x",e,t,n),a=Object(Of.d)("axis",e,t,n),s=ob.a(r,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"image":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=Object(Of.d)("images",e,t,n),a=Object(Of.d)("size",e,t,n),s=Object(Of.d)("alignCorners",e,t,n),o=Object(Of.d)("halfPixelCenters",e,t,n);return[Rm.yb.resizeBilinear(r,[a[0],a[1]],s,o)]}case"ResizeNearestNeighbor":{const r=Object(Of.d)("images",e,t,n),a=Object(Of.d)("size",e,t,n),s=Object(Of.d)("alignCorners",e,t,n),o=Object(Of.d)("halfPixelCenters",e,t,n);return[Rm.yb.resizeNearestNeighbor(r,[a[0],a[1]],s,o)]}case"CropAndResize":{const r=Object(Of.d)("image",e,t,n),a=Object(Of.d)("boxes",e,t,n),s=Object(Of.d)("boxInd",e,t,n),o=Object(Of.d)("cropSize",e,t,n),i=Object(Of.d)("method",e,t,n),u=Object(Of.d)("extrapolationValue",e,t,n);return[Rm.yb.cropAndResize(r,a,s,o,i,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=Object(Of.d)("default",e,t,n);return[Object(Of.e)(e.name,t,n)||r];case"Placeholder":return[Object(Of.e)(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const r=Object(Of.d)("x",e,t,n);return[Object(Of.a)(r)]}case"IdentityN":return Object(Of.d)("x",e,t,n).map((e=>Object(Of.a)(e)));case"Snapshot":const a=Object(Of.d)("x",e,t,n);return[Object(Of.a)(a)];case"Shape":return[ib.a(Object(Of.d)("x",e,t,n).shape,"int32")];case"ShapeN":return Object(Of.d)("x",e,t,n).map((e=>ib.a(e.shape)));case"Size":return[ub.a(Object(Of.d)("x",e,t,n).size,"int32")];case"Rank":return[ub.a(Object(Of.d)("x",e,t,n).rank,"int32")];case"NoOp":return[ub.a(1)];case"Print":const s=Object(Of.d)("x",e,t,n),o=Object(Of.d)("data",e,t,n),i=Object(Of.d)("message",e,t,n),u=Object(Of.d)("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(let e=0;e<o.length;e++)console.log(Array.prototype.slice.call(o[e].dataSync()).slice(0,u));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Equal":return[lb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"NotEqual":return[db.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Greater":return[pb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"GreaterEqual":return[hb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Less":return[fb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"LessEqual":return[mb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"LogicalAnd":return[bb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"LogicalNot":return[gb.a(Object(Of.d)("a",e,t,n))];case"LogicalOr":return[yb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];case"Select":case"SelectV2":return[xb.a(Object(Of.d)("condition",e,t,n),Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[vb.a(Object(Of.d)("a",e,t,n),Object(Of.d)("b",e,t,n),Object(Of.d)("transposeA",e,t,n),Object(Of.d)("transposeB",e,t,n))];case"Einsum":return[Ob.a(Object(Of.d)("equation",e,t,n),...Object(Of.d)("tensors",e,t,n))];case"Transpose":return[kb.a(Object(Of.d)("x",e,t,n),Object(Of.d)("perm",e,t,n))];case"_FusedMatMul":const[r,a]=Object(Of.d)("fusedOps",e,t,n),s="biasadd"===r,o="prelu"===a,i=Object(Of.d)("numArgs",e,t,n),u=Object(Of.d)("leakyreluAlpha",e,t,n);if(s){if(o&&2!==i)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==i)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,l]=Object(Of.d)("args",e,t,n);return[Rm.rb.matMul({a:Object(Of.d)("a",e,t,n),b:Object(Of.d)("b",e,t,n),transposeA:Object(Of.d)("transposeA",e,t,n),transposeB:Object(Of.d)("transposeB",e,t,n),bias:c,activation:a,preluActivationWeights:l,leakyreluAlpha:u})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[wb.a(Object(Of.d)("x",e,t,n),Object(Of.d)("mean",e,t,n),Object(Of.d)("variance",e,t,n),Object(Of.d)("offset",e,t,n),Object(Of.d)("scale",e,t,n),Object(Of.d)("epsilon",e,t,n))];case"LRN":return[Ib.a(Object(Of.d)("x",e,t,n),Object(Of.d)("radius",e,t,n),Object(Of.d)("bias",e,t,n),Object(Of.d)("alpha",e,t,n),Object(Of.d)("beta",e,t,n))];case"Softmax":return[Sb.a(Object(Of.d)("x",e,t,n))];case"LogSoftmax":return[Nb.a(Object(Of.d)("x",e,t,n))];case"SparseToDense":return[Tb.a(Object(Of.d)("sparseIndices",e,t,n),Object(Of.d)("outputShape",e,t,n),Object(Of.d)("sparseValues",e,t,n),Object(Of.d)("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Max":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[jb.a(Object(Of.d)("x",e,t,n),r,a)]}case"Mean":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[$b.a(Object(Of.d)("x",e,t,n),r,a)]}case"Min":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[Cb.a(Object(Of.d)("x",e,t,n),r,a)]}case"Sum":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[Eb.a(Object(Of.d)("x",e,t,n),r,a)]}case"All":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[Ab.a(Object(Of.d)("x",e,t,n),r,a)]}case"Any":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[Rb.a(Object(Of.d)("x",e,t,n),r,a)]}case"ArgMax":{const r=Object(Of.d)("axis",e,t,n);return[_b.a(Object(Of.d)("x",e,t,n),r)]}case"ArgMin":{const r=Object(Of.d)("axis",e,t,n);return[Fb.a(Object(Of.d)("x",e,t,n),r)]}case"Prod":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("keepDims",e,t,n);return[vm.a(Object(Of.d)("x",e,t,n),r,a)]}case"Cumsum":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("exclusive",e,t,n),s=Object(Of.d)("reverse",e,t,n);return[Db.a(Object(Of.d)("x",e,t,n),r,a,s)]}case"Bincount":const r=Object(Of.d)("x",e,t,n),a=Object(Of.d)("weights",e,t,n),s=Object(Of.d)("size",e,t,n);return[Mb.a(r,a,s)];case"DenseBincount":{const r=Object(Of.d)("x",e,t,n),a=Object(Of.d)("weights",e,t,n),s=Object(Of.d)("size",e,t,n),o=Object(Of.d)("binaryOutput",e,t,n);return[Pb.a(r,a,s,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=Object(Of.d)("n",e,t,n),a=Object(Of.d)("axis",e,t,n);let s=Object(Of.d)("tensors",e,t,n);return s=s.slice(0,r),[Lb.a(s,a)]}case"Gather":{const r=Object(Of.d)("x",e,t,n),a=Object(Of.d)("indices",e,t,n);return[Bb.a(r,tb.a(a,"int32"),0)]}case"GatherV2":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("batchDims",e,t,n),s=Object(Of.d)("x",e,t,n),o=Object(Of.d)("indices",e,t,n);return[Bb.a(s,tb.a(o,"int32"),r,a)]}case"Reverse":{const r=Object(Of.d)("dims",e,t,n),a=[];for(let e=0;e<r.length;e++)r[e]&&a.push(e);const s=Object(Of.d)("x",e,t,n);return[zb.a(s,a)]}case"ReverseV2":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("x",e,t,n);return[zb.a(a,r)]}case"Slice":{const r=Object(Of.d)("begin",e,t,n),a=Object(Of.d)("size",e,t,n);return[Vb.a(Object(Of.d)("x",e,t,n),r,a)]}case"StridedSlice":{const r=Object(Of.d)("begin",e,t,n),a=Object(Of.d)("end",e,t,n),s=Object(Of.d)("strides",e,t,n),o=Object(Of.d)("beginMask",e,t,n),i=Object(Of.d)("endMask",e,t,n),u=Object(Of.d)("ellipsisMask",e,t,n),c=Object(Of.d)("newAxisMask",e,t,n),l=Object(Of.d)("shrinkAxisMask",e,t,n),d=Object(Of.d)("x",e,t,n);return[Wb.a(d,r,a,s,o,i,u,c,l)]}case"Pack":return Object(a.tidy)((()=>{const r=Object(Of.d)("axis",e,t,n),s=Object(Of.d)("tensors",e,t,n),o=s[0].shape,i=Ub.a(s[0]).shape,u=s.map((e=>{const t=a.util.arraysEqual(e.shape,o);if(!t&&!a.util.arraysEqual(Ub.a(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:Gb.a(e,o)}));return[Hb.a(u,r)]}));case"Unpack":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("tensor",e,t,n);return qb.a(a,r)}case"Tile":{const r=Object(Of.d)("reps",e,t,n);return[Kb.a(Object(Of.d)("x",e,t,n),r)]}case"Split":case"SplitV":{const r=Object(Of.d)("axis",e,t,n),a=Object(Of.d)("numOrSizeSplits",e,t,n),s=Object(Of.d)("x",e,t,n);return Xb.a(s,a,r)}case"ScatterNd":{const r=Object(Of.d)("indices",e,t,n),a=Object(Of.d)("values",e,t,n),s=Object(Of.d)("shape",e,t,n);return[Yb.a(r,a,s)]}case"GatherNd":{const r=Object(Of.d)("x",e,t,n),a=Object(Of.d)("indices",e,t,n);return[Qb.a(r,a)]}case"SparseToDense":{const r=Object(Of.d)("sparseIndices",e,t,n),a=Object(Of.d)("outputShape",e,t,n),s=Object(Of.d)("sparseValues",e,t,n),o=Object(Of.d)("defaultValue",e,t,n);return[Tb.a(r,s,a,s.dtype===o.dtype?o:tb.a(o,s.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:a,emptyRowIndicator:s,reverseIndexMap:o}=Rm.nd.sparseFillEmptyRows(Object(Of.d)("indices",e,t,n),Object(Of.d)("values",e,t,n),Object(Of.d)("denseShape",e,t,n),Object(Of.d)("defaultValue",e,t,n));return[r,a,s,o]}case"SparseReshape":{const{outputIndices:r,outputShape:a}=Rm.nd.sparseReshape(Object(Of.d)("inputIndices",e,t,n),Object(Of.d)("inputShape",e,t,n),Object(Of.d)("newShape",e,t,n));return[r,a]}case"SparseSegmentMean":return[Rm.nd.sparseSegmentMean(Object(Of.d)("data",e,t,n),Object(Of.d)("indices",e,t,n),Object(Of.d)("segmentIds",e,t,n))];case"SparseSegmentSum":return[Rm.nd.sparseSegmentSum(Object(Of.d)("data",e,t,n),Object(Of.d)("indices",e,t,n),Object(Of.d)("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"FFT":return[Zb.a(Object(Of.d)("x",e,t,n))];case"IFFT":return[Jb.a(Object(Of.d)("x",e,t,n))];case"RFFT":return[eg.a(Object(Of.d)("x",e,t,n))];case"IRFFT":return[tg.a(Object(Of.d)("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:a}=Rm.yd.stringNGrams(Object(Of.d)("data",e,t,n),Object(Of.d)("dataSplits",e,t,n),Object(Of.d)("separator",e,t,n),Object(Of.d)("nGramWidths",e,t,n),Object(Of.d)("leftPad",e,t,n),Object(Of.d)("rightPad",e,t,n),Object(Of.d)("padWidth",e,t,n),Object(Of.d)("preserveShortSequences",e,t,n));return[r,a]}case"StringSplit":{const{indices:r,values:a,shape:s}=Rm.yd.stringSplit(Object(Of.d)("input",e,t,n),Object(Of.d)("delimiter",e,t,n),Object(Of.d)("skipEmpty",e,t,n));return[r,a,s]}case"StringToHashBucketFast":return[Rm.yd.stringToHashBucketFast(Object(Of.d)("input",e,t,n),Object(Of.d)("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return a.tidy((()=>((e,t,n)=>{switch(e.op){case"Cast":return[tb.a(Object(Of.d)("x",e,t,n),Object(Of.d)("dtype",e,t,n))];case"ExpandDims":{const r=Object(Of.d)("axis",e,t,n);return[ng.a(Object(Of.d)("x",e,t,n),r)]}case"Squeeze":{const r=Object(Of.d)("axis",e,t,n);return[Ub.a(Object(Of.d)("x",e,t,n),r)]}case"Reshape":return[Gb.a(Object(Of.d)("x",e,t,n),Object(Of.d)("shape",e,t,n))];case"MirrorPad":return[rg.a(Object(Of.d)("x",e,t,n),Object(Of.d)("padding",e,t,n),Object(Of.d)("mode",e,t,n))];case"PadV2":case"Pad":return[ag.a(Object(Of.d)("x",e,t,n),Object(Of.d)("padding",e,t,n),Object(Of.d)("constantValue",e,t,n))];case"SpaceToBatchND":{const r=Object(Of.d)("blockShape",e,t,n),a=Object(Of.d)("paddings",e,t,n);return[sg.a(Object(Of.d)("x",e,t,n),r,a)]}case"BatchToSpaceND":{const r=Object(Of.d)("blockShape",e,t,n),a=Object(Of.d)("crops",e,t,n);return[og.a(Object(Of.d)("x",e,t,n),r,a)]}case"DepthToSpace":{const r=Object(Of.d)("blockSize",e,t,n),a=Object(Of.d)("dataFormat",e,t,n).toUpperCase();return[ig.a(Object(Of.d)("x",e,t,n),r,a)]}case"BroadcastTo":return[ug.a(Object(Of.d)("x",e,t,n),Object(Of.d)("shape",e,t,n))];case"BroadcastArgs":return[cg.a(Object(Of.d)("s0",e,t,n),Object(Of.d)("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const a=Object(Of.d)("keyDType",e,t,n),s=Object(Of.d)("valueDType",e,t,n),o=new cb(a,s);return r.addHashTable(e.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=Object(Of.d)("tableHandle",e,t,n,r),s=Object(Of.d)("keys",e,t,n),o=Object(Of.d)("values",e,t,n),i=r.getHashTableById(a.id);return[await i.import(s,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=Object(Of.d)("tableHandle",e,t,n,r),s=Object(Of.d)("keys",e,t,n),o=Object(Of.d)("defaultValue",e,t,n),i=r.getHashTableById(a.id);return[await i.find(s,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=Object(Of.d)("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const s=Object(wf.a)(e.op);if(s&&s.customExecutor)return s.customExecutor(new kf(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op \'${e.op}\'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return a.util.isPromise(s)?s.then((e=>[].concat(e))):[].concat(s)}class dg{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function pg(e,t,n,r){const a=new Set,s=[];let o=null,i=null;const u=new Set,c=Object.keys(e).map((e=>Object(Of.g)(e)[0]));let l=[];null!=r&&(l=r.map((e=>Object(Of.g)(e.name)[0])));const d=[...t];for(;d.length>0;){const e=d.pop();(bg(e)||gg(e)||yg(e))&&null==o&&(o=e,i=o.children.map((e=>e.name)).filter((e=>a.has(e)))),a.add(e.name),null==n[e.name]&&(-1===c.indexOf(e.name)&&-1===l.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{u.has(e.name)||(u.add(e.name),d.push(e))})):s.push(e.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:o,syncInputs:i}}const hg=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],fg=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],mg=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function bg(e){return hg.indexOf(e.op)>=0}function gg(e){return fg.indexOf(e.op)>=0}function yg(e){return mg.indexOf(e.op)>=0}class xg{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new xg(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=pg(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=n;if(null!=a)throw new Error(`This execution contains the node \'${a.name}\', which has the dynamic op \'${a.op}\'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=t.map((e=>e.name)),a=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:a}=n,s=[],o=Object.keys(a).map((e=>Object(Of.g)(e)[0])).map((t=>e.nodes[t])),i=e.initNodes;o.forEach((e=>{r.has(e.name)&&s.push(e)})),e.weights.forEach((e=>{r.has(e.name)&&s.push(e)})),null!=i&&i.forEach((e=>{r.has(e.name)&&s.push(e)}));const u=new Set,c=[];for(;s.length>0;){const e=s.pop();u.add(e.name),t[e.name]||c.push(e),e.children.forEach((e=>{!u.has(e.name)&&r.has(e.name)&&e.inputs.every((e=>u.has(e.name)))&&s.push(e)}))}return c}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[Object(Of.g)(e)[0]])),s=t.map((e=>Object(Of.g)(e)[0]));let o=s.map((e=>this.graph.nodes[e]));0===o.length&&(o=this._outputs);const i=this.getCompilationKey(r,o);let u=this.compiledMap.get(i);null==u&&(u=this.compile(e,o),this.compiledMap.set(i,u));const c={},l={};return Object(a.tidy)((()=>{const n=new dg(this.weightMap,c,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,a]=Object(Of.g)(t),s=[];s[a]=e[t],r[n]=s}));const o=this.getFrozenTensorIds(r),i={};for(let e=0;e<u.length;e++){const t=u[e];if(!r[t.name]){const e=lg(t,r,n,this._resourceManager);if(a.util.isPromise(e))throw new Error(`The execution of the op \'${t.op}\' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,o,s,i)}}return null==this.parent&&n.dispose(o),t.map((e=>Object(Of.e)(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,s,o){"control"!==t.category&&-1===s.indexOf(e)&&(n[e].forEach((e=>{null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const t=Object(Of.f)(e.name,n,r);null!=t&&t.forEach((e=>{if(e&&!e.kept&&!a.has(e.id)){const t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,r={},a={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));const s=new dg(this.weightMap,r,a,this.functionExecutorMap),o=await this.executeWithControlFlow(e,s,t,n),i=t.map((e=>Object(Of.e)(e,o,s))),u=i.map((e=>e.id)),c=Object.keys(e).map((t=>e[t].id)),l=new Set([...u,...c,...this.weightIds]);return Object.keys(o).forEach((e=>{o[e].forEach((e=>{!e||e.kept||e.isDisposed||l.has(e.id)||e.dispose()}))})),null==this.parent&&s.dispose(l),i}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const a=Object.keys(e),s=a.map((e=>this.graph.nodes[Object(Of.g)(e)[0]])),o=n.map((e=>Object(Of.g)(e)[0]));let i=o.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:l,syncInputs:d}=pg(e,i,this.weightMap,this._initNodes),p=[...s,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),h=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=Object(Of.g)(t),a=[];a[r]=e[t],h[n]=a}));const f={},m=this.getFrozenTensorIds(h),b={};for(;p.length>0;){const e=this.processStack(s,p,t,h,b,m,o,f,u);await Promise.all(e)}null!=l||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const g=i.filter((e=>!bg(e)&&!Object(Of.e)(e.name,h,t))).map((e=>e.name));if(g.length>0){let e="";throw null!=l&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${g}] from the provided inputs [${a}]. Consider providing the following inputs: [${c}]. ${e}`)}return h}processStack(e,t,n,r,s,o,i,u,c){const l=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let d="";if("Enter"===e.node.op&&Object(Of.d)("isConstant",e.node,r,n)&&([d]=Object(Of.b)(e.node.name,n)),null==r[e.node.name]){const p=lg(e.node,r,n,this._resourceManager);d||([d]=Object(Of.b)(e.node.name,n));const h=n.currentContext;a.util.isPromise(p)?l.push(p.then((a=>(r[d]=a,n.currentContext=h,this.checkTensorForDisposal(d,e.node,r,n,o,i,u),this.processChildNodes(e.node,t,n,r,s,c),a)))):(r[d]=p,this.checkTensorForDisposal(d,e.node,r,n,o,i,u),this.processChildNodes(e.node,t,n,r,s,c))}else this.processChildNodes(e.node,t,n,r,s,c)}return l}processChildNodes(e,t,n,r,a,s){e.children.forEach((e=>{const[o]=Object(Of.b)(e.name,n);!a[o]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!Object(Of.e)(e,r,n)))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!Object(Of.e)(e,r,n)))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=Object(Of.g)(t),s=this.graph.nodes[r];if(s.attrParams.shape&&s.attrParams.shape.value){const e=s.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));a.util.assert(t,(()=>`The shape of dict[\'${s.name}\'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}s.attrParams.dtype&&s.attrParams.dtype.value&&a.util.assert(n.dtype===s.attrParams.dtype.value,(()=>`The dtype of dict[\'${s.name}\'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){const t={};for(const n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){t[this._signature.inputs[n].name]=e[n]}else t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=Object(Of.g)(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){return this._signature.outputs[e].name}return e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=Object(Of.g)(e);if(!this.graph.nodes[t])throw new Error(`The output \'${e}\' is not found in the graph`)}))}}class vg{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class Og{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new vg}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=a.io.browserHTTPRequest(e,this.loadOptions);else{const t=a.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(a.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL \'${[e]}\'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=a.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new xg(vf.a.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=vf.a.Instance.transformGraph(e.modelInitializer);this.initializer=new xg(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=a.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL \'${e}\'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL \'${e}\'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof a.Tensor||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce(((t,n,r)=>(t[n]=e[r],t)),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function kg(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}model.json?tfjs-format=file`);const n=new Og(e,t);return await n.load(),n}var wg=function(e,t){return(wg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ig(e,t){function n(){this.constructor=e}wg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Sg=function(){return(Sg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Ng(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function i(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}u((r=r.apply(e,t||[])).next())}))}function Tg(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}function jg(e){var t=e.shape[2],n=Object(a.argMax)(e,2),r=Object(a.reshape)(n,[-1]);return Object(a.oneHot)(r,t)}function $g(e,t){return Object(a.tidy)((function(){return Object(a.cast)(Object(a.greater)(e,Object(a.scalar)(t)),"int32")}))}function Cg(e,t){var n=t.shape,r=n[0],s=n[1],o=n[2];return Object(a.tidy)((function(){var n=jg(t),i=Object(a.expandDims)(Object(a.range)(0,o,1,"int32"),1),u=Object(a.cast)(Object(a.matMul)(n,i),"int32"),c=Object(a.reshape)(u,[r,s]),l=Object(a.add)(c,Object(a.scalar)(1,"int32"));return Object(a.sub)(function(e,t){return Object(a.mul)(e,t)}(l,e),Object(a.scalar)(1,"int32"))}))}function Eg(e){var t=e.shape,n=t[0],r=t[1],s=t[2];return Object(a.tidy)((function(){var t=jg(e),o=Object(a.expandDims)(Object(a.range)(0,s,1,"int32"),1),i=Object(a.cast)(Object(a.matMul)(t,o),"int32");return Object(a.reshape)(i,[n,r])}))}var Ag=function(){function e(e,t){this.model=e,this.outputStride=t;var n=this.model.inputs[0].shape;a.util.assert(-1===n[1]&&-1===n[2],(function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"}))}return e.prototype.predict=function(e){var t=this;return Object(a.tidy)((function(){var n=t.preprocessInput(Object(a.cast)(e,"float32")),r=Object(a.expandDims)(n,0),s=t.model.predict(r).map((function(e){return Object(a.squeeze)(e,[0])})),o=t.nameOutputResults(s);return{heatmapScores:Object(a.sigmoid)(o.heatmap),offsets:o.offsets,displacementFwd:o.displacementFwd,displacementBwd:o.displacementBwd,segmentation:o.segmentation,partHeatmaps:o.partHeatmaps,longOffsets:o.longOffsets,partOffsets:o.partOffsets}}))},e.prototype.dispose=function(){this.model.dispose()},e}(),Rg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ig(t,e),t.prototype.preprocessInput=function(e){return Object(a.tidy)((function(){return Object(a.sub)(Object(a.div)(e,127.5),1)}))},t.prototype.nameOutputResults=function(e){return{offsets:e[0],segmentation:e[1],partHeatmaps:e[2],longOffsets:e[3],heatmap:e[4],displacementFwd:e[5],displacementBwd:e[6],partOffsets:e[7]}},t}(Ag),_g=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Fg=_g.length,Dg=_g.reduce((function(e,t,n){return e[t]=n,e}),{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map((function(e){var t=e[0],n=e[1];return[Dg[t],Dg[n]]}));function Mg(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1],i=n.top,u=n.bottom;return[o/(n.left+n.right+a),s/(i+u+r)]}function Pg(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+Fg)}}function Lg(e,t,n){var r=Pg(e.heatmapY,e.heatmapX,e.id,n),a=r.y,s=r.x;return{x:e.heatmapX*t+s,y:e.heatmapY*t+a}}function Bg(e,t,n){return e<t?t:e>n?n:e}function zg(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Vg(e,t,n){void 0===n&&(n=.3);for(var r=0,a=0,s=0;s<e.length;s++)t.keypoints[s].score>n&&(a+=1,r+=Math.pow(e[s].x-t.keypoints[s].position.x,2)+Math.pow(e[s].y-t.keypoints[s].position.y,2));return 0===a?r=1/0:r/=a,r}function Wg(e,t,n,r,a,s,o){for(var i=o[0],u=o[1],c=n(e),l=c.y*r+c.x,d=a[Fg*(2*l)+t],p=a[Fg*(2*l+1)+t],h=e.y+d,f=e.x+p,m=0;m<s;m++){h=Math.min(h,i-1);var b=n({x:f=Math.min(f,u-1),y:h}),g=b.y*r+b.x;h+=d=a[Fg*(2*g)+t],f+=p=a[Fg*(2*g+1)+t]}return{x:f,y:h}}function Ug(e,t,n,r,a,s,o,i,u,c){for(var l=a[0],d=a[1],p=s[0],h=s[1],f=i[0],m=i[1],b=[],g=function(e){return function(e,t,n,r){var a=t[0],s=t[1],o=n[0],i=n[1],u=Math.round(((a+e.y+1)*i-1)/r);return{x:Math.round(((s+e.x+1)*o-1)/r),y:u}}(e,[l,d],[p,h],u)},y=0;y<r;y++){var x=Wg(e,y,g,o,t,c,[f,m]);b.push(x)}for(var v=-1,O=1/0,k=0;k<n.length;k++){var w=Vg(b,n[k]);w<O&&(v=k,O=w)}return v}function Gg(e,t){var n=e[0],r=e[1];return[Math.round((r-1)/t+1),Math.round((n-1)/t+1)]}function Hg(e,t,n,r,s,o,i,u,c,l,d){for(var p=i[0],h=i[1],f=e.shape,m=f[0],b=f[1],g=t.shape.slice(0,2),y=g[0],x=g[1],v=Object(a.reshape)(t,[y,x,2,Fg]),O=new Float32Array(d*Fg*3).fill(0),k=0;k<n.length;k++)for(var w=k*Fg*3,I=n[k],S=0;S<Fg;S++){var N=I.keypoints[S],T=w+3*S;O[T]=N.score,O[T+1]=N.position.y,O[T+2]=N.position.x}var j=Mg([r,s],[p,h],u),$=j[0],C=j[1],E=Object(a.tensor)(O,[d,Fg,3]),A=u.top,R=u.left,_={variableNames:["segmentation","longOffsets","poses"],outputShape:[m,b],userCode:"\\n    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {\\n      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));\\n    }\\n\\n    float convertToPositionInOutputFloat(\\n        int pos, int pad, float scale, int stride) {\\n      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);\\n    }\\n\\n    float dist(float x1, float y1, float x2, float y2) {\\n      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);\\n    }\\n\\n    float sampleLongOffsets(float h, float w, int d, int k) {\\n      float fh = fract(h);\\n      float fw = fract(w);\\n      int clH = int(ceil(h));\\n      int clW = int(ceil(w));\\n      int flH = int(floor(h));\\n      int flW = int(floor(w));\\n      float o11 = getLongOffsets(flH, flW, d, k);\\n      float o12 = getLongOffsets(flH, clW, d, k);\\n      float o21 = getLongOffsets(clH, flW, d, k);\\n      float o22 = getLongOffsets(clH, clW, d, k);\\n      float o1 = mix(o11, o12, fw);\\n      float o2 = mix(o21, o22, fw);\\n      return mix(o1, o2, fh);\\n    }\\n\\n    int findNearestPose(int h, int w) {\\n      float prob = getSegmentation(h, w);\\n      if (prob < 1.0) {\\n        return -1;\\n      }\\n\\n      // Done(Tyler): convert from output space h/w to strided space.\\n      float stridedH = convertToPositionInOutputFloat(\\n        h, "+A+", "+C+", "+o+");\\n      float stridedW = convertToPositionInOutputFloat(\\n        w, "+R+", "+$+", "+o+");\\n\\n      float minDist = 1000000.0;\\n      int iMin = -1;\\n      for (int i = 0; i < "+d+"; i++) {\\n        float curDistSum = 0.0;\\n        int numKpt = 0;\\n        for (int k = 0; k < "+Fg+"; k++) {\\n          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);\\n          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);\\n\\n          float y = float(h) + dy;\\n          float x = float(w) + dx;\\n\\n          for (int s = 0; s < "+c+"; s++) {\\n            int yRounded = round(min(y, float("+(r-1)+")));\\n            int xRounded = round(min(x, float("+(s-1)+")));\\n\\n            float yStrided = convertToPositionInOutputFloat(\\n              yRounded, "+A+", "+C+", "+o+");\\n            float xStrided = convertToPositionInOutputFloat(\\n              xRounded, "+R+", "+$+", "+o+");\\n\\n            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);\\n            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);\\n\\n            y = y + dy;\\n            x = x + dx;\\n          }\\n\\n          float poseScore = getPoses(i, k, 0);\\n          float poseY = getPoses(i, k, 1);\\n          float poseX = getPoses(i, k, 2);\\n          if (poseScore > "+l+") {\\n            numKpt = numKpt + 1;\\n            curDistSum = curDistSum + dist(x, y, poseX, poseY);\\n          }\\n        }\\n        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {\\n          minDist = curDistSum / float(numKpt);\\n          iMin = i;\\n        }\\n      }\\n      return iMin;\\n    }\\n\\n    void main() {\\n        ivec2 coords = getOutputCoords();\\n        int nearestPose = findNearestPose(coords[0], coords[1]);\\n        setOutput(float(nearestPose));\\n      }\\n  "};return Object(a.backend)().compileAndRun(_,[e,v,E])}function qg(){return"webgl"===Object(a.getBackend)()}function Kg(e,t,n,r,s,o,i,u,c,l,d,p){var h=i[0],f=i[1];return void 0===c&&(c=.2),void 0===l&&(l=8),void 0===d&&(d=.3),void 0===p&&(p=10),Ng(this,void 0,void 0,(function(){var i,m,b,g,y;return Tg(this,(function(x){switch(x.label){case 0:return i=n.filter((function(e){return e.score>=c})),qg()?(b=Object(a.tidy)((function(){var n=Hg(e,t,i,r,s,o,[h,f],u,l,d,p),c=Object(a.engine)().makeTensorFromDataId(n.dataId,n.shape,n.dtype);return i.map((function(e,t){return function(e,t){return Object(a.tidy)((function(){return Object(a.cast)(Object(a.equal)(e,Object(a.scalar)(t)),"int32")}))}(c,t)}))})),[4,Promise.all(b.map((function(e){return e.data()})))]):[3,2];case 1:return m=x.sent(),b.forEach((function(e){return e.dispose()})),[3,5];case 2:return[4,e.data()];case 3:return g=x.sent(),[4,t.data()];case 4:y=x.sent(),m=function(e,t,n,r,a,s,o,i,u,c){var l=o[0],d=o[1];void 0===c&&(c=5);for(var p=n.map((function(e){return new Uint8Array(r*a).fill(0)})),h=i.top,f=i.left,m=Mg([r,a],[l,d],i),b=m[0],g=m[1],y=Gg([l,d],s)[0],x=0;x<r;x+=1)for(var v=0;v<a;v+=1){var O=x*a+v;if(1===e[O]){var k=Ug({x:v,y:x},t,n,c,[h,f],[b,g],y,[r,a],s,u);k>=0&&(p[k][O]=1)}}return p}(g,y,i,r,s,o,[h,f],u,l),x.label=5;case 5:return[2,m.map((function(e,t){return{data:e,pose:i[t],width:s,height:r}}))]}}))}))}function Xg(e,t,n,r,s,o,i,u,c,l,d,p,h){var f=u[0],m=u[1];return void 0===l&&(l=.2),void 0===d&&(d=8),void 0===p&&(p=.3),void 0===h&&(h=10),Ng(this,void 0,void 0,(function(){var u,b,g,y,x,v;return Tg(this,(function(O){switch(O.label){case 0:return u=r.filter((function(e){return e.score>=l})),qg()?(g=Object(a.tidy)((function(){var r=Hg(e,t,u,s,o,i,[f,m],c,d,p,h),l=Object(a.engine)().makeTensorFromDataId(r.dataId,r.shape,r.dtype);return u.map((function(e,t){return function(e,t,n){return Object(a.tidy)((function(){return Object(a.sub)(Object(a.mul)(Object(a.cast)(Object(a.equal)(e,Object(a.scalar)(n)),"int32"),Object(a.add)(t,1)),1)}))}(l,n,t)}))})),[4,Promise.all(g.map((function(e){return e.data()})))]):[3,2];case 1:return b=O.sent(),g.forEach((function(e){return e.dispose()})),[3,6];case 2:return[4,e.data()];case 3:return y=O.sent(),[4,t.data()];case 4:return x=O.sent(),[4,n.data()];case 5:v=O.sent(),b=function(e,t,n,r,a,s,o,i,u,c,l){var d=i[0],p=i[1];void 0===l&&(l=5);for(var h=r.map((function(e){return new Int32Array(a*s).fill(-1)})),f=u.top,m=u.left,b=Mg([a,s],[d,p],u),g=b[0],y=b[1],x=Gg([d,p],o)[0],v=0;v<a;v+=1)for(var O=0;O<s;O+=1){var k=v*s+O;if(1===e[k]){var w=Ug({x:O,y:v},t,r,l,[f,m],[g,y],x,[a,s],o,c);w>=0&&(h[w][k]=n[k])}}return h}(y,x,v,u,s,o,i,[f,m],c,d),O.label=6;case 6:return[2,b.map((function(e,t){return{pose:u[t],data:e,height:s,width:o}}))]}}))}))}function Yg(e){return Math.floor(e/2)}var Qg=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(Yg(e),e);)this.exchange(e,Yg(e)),e=Yg(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function Zg(e,t,n,r,a,s){for(var o=s.shape,i=o[0],u=o[1],c=!0,l=Math.max(n-a,0),d=Math.min(n+a+1,i),p=l;p<d;++p){for(var h=Math.max(r-a,0),f=Math.min(r+a+1,u),m=h;m<f;++m)if(s.get(p,m,e)>t){c=!1;break}if(!c)break}return c}var Jg=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map((function(e){var t=e[0],n=e[1];return[Dg[t],Dg[n]]})),ey=Jg.map((function(e){return e[1]})),ty=Jg.map((function(e){return e[0]}));function ny(e,t,n,r){return{y:Bg(Math.round(e.y/t),0,n-1),x:Bg(Math.round(e.x/t),0,r-1)}}function ry(e,t,n,r,a,s,o,i){void 0===i&&(i=2);for(var u=r.shape,c=u[0],l=u[1],d=function(e,t,n){var r=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,r+e)}}(e,ny(t.position,s,c,l),o),p=zg(t.position,d),h=0;h<i;h++){var f=ny(p,s,c,l),m=Pg(f.y,f.x,n,a);p=zg({x:f.x*s,y:f.y*s},{x:m.x,y:m.y})}var b=ny(p,s,c,l),g=r.get(b.y,b.x,n);return{position:p,part:_g[n],score:g}}function ay(e,t,n,r,a,s){var o=t.shape[2],i=ey.length,u=new Array(o),c=e.part,l=e.score,d=Lg(c,r,n);u[c.id]={score:l,part:_g[c.id],position:d};for(var p=i-1;p>=0;--p){var h=ey[p],f=ty[p];u[h]&&!u[f]&&(u[f]=ry(p,u[h],f,t,n,r,s))}for(p=0;p<i;++p)h=ty[p],f=ey[p],u[h]&&!u[f]&&(u[f]=ry(p,u[h],f,t,n,r,a));return u}function sy(e,t,n,r){var a=n.x,s=n.y;return e.some((function(e){var n=e.keypoints[r].position;return function(e,t,n,r){var a=n-e,s=r-t;return a*a+s*s}(s,a,n.y,n.x)<=t}))}function oy(e,t,n){return n.reduce((function(n,r,a){var s=r.position,o=r.score;return sy(e,t,s,a)||(n+=o),n}),0)/n.length}function iy(e,t,n,r,a,s,o,i){void 0===o&&(o=.5),void 0===i&&(i=20);for(var u=[],c=function(e,t,n){for(var r=n.shape,a=r[0],s=r[1],o=r[2],i=new Qg(a*s*o,(function(e){return e.score})),u=0;u<a;++u)for(var c=0;c<s;++c)for(var l=0;l<o;++l){var d=n.get(u,c,l);d<e||Zg(l,d,u,c,t,n)&&i.enqueue({score:d,part:{heatmapY:u,heatmapX:c,id:l}})}return i}(o,1,e),l=i*i;u.length<s&&!c.empty();){var d=c.dequeue();if(!sy(u,l,Lg(d.part,a,t),d.part.id)){var p=ay(d,e,t,a,n,r),h=oy(u,l,p);u.push({keypoints:p,score:h})}}return u}var uy,cy=[-123.15,-115.9,-103.06],ly=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ig(t,e),t.prototype.preprocessInput=function(e){return Object(a.add)(e,cy)},t.prototype.nameOutputResults=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5];return{offsets:s,segmentation:e[6],partHeatmaps:o,longOffsets:a,heatmap:r,displacementFwd:n,displacementBwd:t,partOffsets:e[7]}},t}(Ag),dy="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",py="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function hy(e){if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)return function(e){if("offsetHeight"in e&&0!==e.offsetHeight&&"offsetWidth"in e&&0!==e.offsetWidth)return[e.offsetHeight,e.offsetWidth];if(null!=e.height&&null!=e.width)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")}(e);if("undefined"!=typeof ImageData&&e instanceof ImageData)return[e.height,e.width];if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)return function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]}(e);if(e instanceof a.Tensor)return[e.shape[0],e.shape[1]];throw new Error("error: Unknown input type: "+e+".")}function fy(e,t){return function(e,t){return(e-1)%t==0}(e,t)?e:Math.floor(e/t)*t+1}var my={low:"low",medium:"medium",high:"high",full:"full"},by=((uy={})[my.low]=.25,uy[my.medium]=.5,uy[my.high]=.75,uy[my.full]=1,uy);function gy(e,t,n){var r=n[0],s=n[1],o=function(e){if("string"==typeof e){var t=by[e];return a.util.assert("number"==typeof t,(function(){return"string value of inputResolution must be one of "+Object.values(my).join(",")+" but was "+e+"."})),t}return a.util.assert("number"==typeof e&&e<=2&&e>=.1,(function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+e})),e}(e);return[fy(r*o,t),fy(s*o,t)]}function yy(e,t,n,r,s){var o=t[0],i=t[1],u=n[0],c=n[1],l=r[0],d=l[0],p=l[1],h=r[1],f=h[0],m=h[1];return void 0===s&&(s=!1),Object(a.tidy)((function(){var t=a.image.resizeBilinear(e,[u,c],!0);return s&&(t=Object(a.sigmoid)(t)),function(e,t,n){var r=t[0],s=t[1],o=n[0],i=o[0],u=o[1],c=n[1],l=c[0],d=c[1];return Object(a.tidy)((function(){var t=Object(a.expandDims)(e);return Object(a.squeeze)(a.image.cropAndResize(t,[[i/(r+i+u-1),l/(s+l+d-1),(i+r-1)/(r+i+u-1),(l+s-1)/(s+l+d-1)]],[0],[r,s]),[0])}))}(t,[o,i],[[d,p],[f,m]])}))}function xy(e,t){var n=t[0],r=t[1],s=hy(e),o=s[0],i=s[1],u=r/n,c=[0,0,0,0],l=c[0],d=c[1],p=c[2],h=c[3];return i/o<u?(l=0,d=0,p=Math.round(.5*(u*o-i)),h=Math.round(.5*(u*o-i))):(l=Math.round(.5*(1/u*i-o)),d=Math.round(.5*(1/u*i-o)),p=0,h=0),{resized:Object(a.tidy)((function(){var t=function(e){return e instanceof a.Tensor?e:a.browser.fromPixels(e)}(e);return t=Object(a.pad3d)(t,[[l,d],[p,h],[0,0]]),a.image.resizeBilinear(t,[n,r])})),padding:{top:l,left:p,right:h,bottom:d}}}function vy(e){return Ng(this,void 0,void 0,(function(){return Tg(this,(function(t){return[2,Promise.all(e.map((function(e){return e.buffer()})))]}))}))}function Oy(e,t,n,r,a){var s=t[0],o=t[1],i=n[0],u=n[1],c=function(e,t,n,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),1===n&&1===t&&0===r&&0===a?e:e.map((function(e){return function(e,t,n,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),{score:e.score,keypoints:e.keypoints.map((function(e){var s=e.score,o=e.part,i=e.position;return{score:s,part:o,position:{x:i.x*n+a,y:i.y*t+r}}}))}}(e,t,n,r,a)}))}(e,(s+r.top+r.bottom)/i,(o+r.left+r.right)/u,-r.top,-r.left);return a?function(e,t){return t<=0?e:e.map((function(e){return function(e,t){return{score:e.score,keypoints:e.keypoints.map((function(e){var n=e.score,r=e.part,a=e.position;return{score:n,part:r,position:{x:t-1-a.x,y:a.y}}}))}}(e,t)}))}(c,o):c}var ky=!0,wy=!1,Iy={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},Sy=["MobileNetV1","ResNet50"],Ny={MobileNetV1:[8,16,32],ResNet50:[32,16]},Ty={MobileNetV1:[.5,.75,1],ResNet50:[1]},jy=[1,2,4];var $y={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},Cy={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function Ey(e){var t=e.segmentationThreshold,n=e.maxDetections,r=e.scoreThreshold,a=e.nmsRadius;if(t<0||t>1)throw new Error("segmentationThreshold "+t+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(a<=0)throw new Error("Invalid nmsRadius "+a+".")}function Ay(e){var t=e.segmentationThreshold,n=e.maxDetections,r=e.scoreThreshold,a=e.nmsRadius,s=e.minKeypointScore,o=e.refineSteps;if(t<0||t>1)throw new Error("segmentationThreshold "+t+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(a<=0)throw new Error("Invalid nmsRadius "+a+".");if(s<0||s>1)throw new Error("Invalid minKeypointScore "+s+".Should be in range [0.0, 1.0]");if(o<=0||o>20)throw new Error("Invalid refineSteps "+o+".Should be in range [1, 20]")}var Ry=function(){function e(e){this.baseModel=e}return e.prototype.predictForPersonSegmentation=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd}},e.prototype.predictForPersonSegmentationAndPart=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,partHeatmapLogits:t.partHeatmaps,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd}},e.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,longOffsets:t.longOffsets,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd,partHeatmaps:t.partHeatmaps}},e.prototype.segmentPersonActivation=function(e,t,n){var r=this;void 0===n&&(n=.5);var s=hy(e),o=s[0],i=s[1],u=gy(t,this.baseModel.outputStride,[o,i]),c=xy(e,u),l=c.resized,d=c.padding,p=Object(a.tidy)((function(){var e=r.predictForPersonSegmentation(l),t=e.segmentLogits,s=e.heatmapScores,u=e.offsets,c=e.displacementFwd,p=e.displacementBwd,h=l.shape,f=h[0],m=h[1],b=yy(t,[o,i],[f,m],[[d.top,d.bottom],[d.left,d.right]],ky);return{segmentation:$g(Object(a.squeeze)(b),n),heatmapScores:s,offsets:u,displacementFwd:c,displacementBwd:p}})),h=p.segmentation,f=p.heatmapScores,m=p.offsets,b=p.displacementFwd,g=p.displacementBwd;return l.dispose(),{segmentation:h,heatmapScores:f,offsets:m,displacementFwd:b,displacementBwd:g,padding:d,internalResolutionHeightAndWidth:u}},e.prototype.segmentPerson=function(e,t){return void 0===t&&(t=$y),Ng(this,void 0,void 0,(function(){var n,r,a,s,o,i,u,c,l,d,p,h,f,m,b,g,y,x;return Tg(this,(function(v){switch(v.label){case 0:return Ey(t=Sg(Sg({},$y),t)),n=this.segmentPersonActivation(e,t.internalResolution,t.segmentationThreshold),r=n.segmentation,a=n.heatmapScores,s=n.offsets,o=n.displacementFwd,i=n.displacementBwd,u=n.padding,c=n.internalResolutionHeightAndWidth,l=r.shape,d=l[0],p=l[1],[4,r.data()];case 1:return h=v.sent(),r.dispose(),[4,vy([a,s,o,i])];case 2:return f=v.sent(),m=f[0],b=f[1],g=f[2],y=f[3],x=Oy(x=iy(m,b,g,y,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[d,p],c,u,wy),a.dispose(),s.dispose(),o.dispose(),i.dispose(),[2,{height:d,width:p,data:h,allPoses:x}]}}))}))},e.prototype.segmentMultiPerson=function(e,t){return void 0===t&&(t=Cy),Ng(this,void 0,void 0,(function(){var n,r,s,o,i,u,c,l,d,p,h,f,m,b,g,y,x,v,O,k,w,I=this;return Tg(this,(function(S){switch(S.label){case 0:return Ay(t=Sg(Sg({},Cy),t)),n=hy(e),r=n[0],s=n[1],o=gy(t.internalResolution,this.baseModel.outputStride,[r,s]),i=xy(e,o),u=i.resized,c=i.padding,l=Object(a.tidy)((function(){var e,n=I.predictForMultiPersonInstanceSegmentationAndPart(u),i=n.segmentLogits,l=n.longOffsets,d=n.heatmapScores,p=n.offsets,h=n.displacementFwd,f=n.displacementBwd,m=yy(i,[r,s],o,[[c.top,c.bottom],[c.left,c.right]],ky);return e=l,{segmentation:$g(Object(a.squeeze)(m),t.segmentationThreshold),longOffsets:e,heatmapScoresRaw:d,offsetsRaw:p,displacementFwdRaw:h,displacementBwdRaw:f}})),d=l.segmentation,p=l.longOffsets,h=l.heatmapScoresRaw,f=l.offsetsRaw,m=l.displacementFwdRaw,b=l.displacementBwdRaw,[4,vy([h,f,m,b])];case 1:return g=S.sent(),y=g[0],x=g[1],v=g[2],O=g[3],k=Oy(k=iy(y,x,v,O,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[r,s],o,c,wy),[4,Kg(d,p,k,r,s,this.baseModel.outputStride,o,c,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return w=S.sent(),u.dispose(),d.dispose(),p.dispose(),h.dispose(),f.dispose(),m.dispose(),b.dispose(),[2,w]}}))}))},e.prototype.segmentPersonPartsActivation=function(e,t,n){var r=this;void 0===n&&(n=.5);var s=hy(e),o=s[0],i=s[1],u=gy(t,this.baseModel.outputStride,[o,i]),c=xy(e,u),l=c.resized,d=c.padding,p=Object(a.tidy)((function(){var e=r.predictForPersonSegmentationAndPart(l),t=e.segmentLogits,s=e.partHeatmapLogits,u=e.heatmapScores,c=e.offsets,p=e.displacementFwd,h=e.displacementBwd,f=l.shape,m=f[0],b=f[1],g=yy(t,[o,i],[m,b],[[d.top,d.bottom],[d.left,d.right]],ky),y=yy(s,[o,i],[m,b],[[d.top,d.bottom],[d.left,d.right]],ky);return{partSegmentation:Cg($g(Object(a.squeeze)(g),n),y),heatmapScores:u,offsets:c,displacementFwd:p,displacementBwd:h}})),h=p.partSegmentation,f=p.heatmapScores,m=p.offsets,b=p.displacementFwd,g=p.displacementBwd;return l.dispose(),{partSegmentation:h,heatmapScores:f,offsets:m,displacementFwd:b,displacementBwd:g,padding:d,internalResolutionHeightAndWidth:u}},e.prototype.segmentPersonParts=function(e,t){return void 0===t&&(t=$y),Ng(this,void 0,void 0,(function(){var n,r,a,s,o,i,u,c,l,d,p,h,f,m,b,g,y,x;return Tg(this,(function(v){switch(v.label){case 0:return Ey(t=Sg(Sg({},$y),t)),n=this.segmentPersonPartsActivation(e,t.internalResolution,t.segmentationThreshold),r=n.partSegmentation,a=n.heatmapScores,s=n.offsets,o=n.displacementFwd,i=n.displacementBwd,u=n.padding,c=n.internalResolutionHeightAndWidth,l=r.shape,d=l[0],p=l[1],[4,r.data()];case 1:return h=v.sent(),r.dispose(),[4,vy([a,s,o,i])];case 2:return f=v.sent(),m=f[0],b=f[1],g=f[2],y=f[3],x=Oy(x=iy(m,b,g,y,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[d,p],c,u,wy),a.dispose(),s.dispose(),o.dispose(),i.dispose(),[2,{height:d,width:p,data:h,allPoses:x}]}}))}))},e.prototype.segmentMultiPersonParts=function(e,t){return void 0===t&&(t=Cy),Ng(this,void 0,void 0,(function(){var n,r,s,o,i,u,c,l,d,p,h,f,m,b,g,y,x,v,O,k,w,I,S=this;return Tg(this,(function(N){switch(N.label){case 0:return Ay(t=Sg(Sg({},Cy),t)),n=hy(e),r=n[0],s=n[1],o=gy(t.internalResolution,this.baseModel.outputStride,[r,s]),i=xy(e,o),u=i.resized,c=i.padding,l=Object(a.tidy)((function(){var e=S.predictForMultiPersonInstanceSegmentationAndPart(u),n=e.segmentLogits,i=e.longOffsets,l=e.heatmapScores,d=e.offsets,p=e.displacementFwd,h=e.displacementBwd,f=e.partHeatmaps,m=yy(n,[r,s],o,[[c.top,c.bottom],[c.left,c.right]],ky),b=yy(f,[r,s],o,[[c.top,c.bottom],[c.left,c.right]],ky),g=i;return{segmentation:$g(Object(a.squeeze)(m),t.segmentationThreshold),longOffsets:g,heatmapScoresRaw:l,offsetsRaw:d,displacementFwdRaw:p,displacementBwdRaw:h,partSegmentation:Eg(b)}})),d=l.segmentation,p=l.longOffsets,h=l.heatmapScoresRaw,f=l.offsetsRaw,m=l.displacementFwdRaw,b=l.displacementBwdRaw,g=l.partSegmentation,[4,vy([h,f,m,b])];case 1:return y=N.sent(),x=y[0],v=y[1],O=y[2],k=y[3],w=Oy(w=iy(x,v,O,k,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[r,s],o,c,wy),[4,Xg(d,p,g,w,r,s,this.baseModel.outputStride,o,c,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return I=N.sent(),u.dispose(),d.dispose(),p.dispose(),h.dispose(),f.dispose(),m.dispose(),b.dispose(),g.dispose(),[2,I]}}))}))},e.prototype.dispose=function(){this.baseModel.dispose()},e}();function _y(e){return Ng(this,void 0,void 0,(function(){var t,n,r,s,o,i;return Tg(this,(function(u){switch(u.label){case 0:if(t=e.outputStride,n=e.quantBytes,r=e.multiplier,null==a)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\\n        model.");return s=function(e,t,n){var r={1:"100",.75:"075",.5:"050"},a="model-stride"+e+".json";return 4===n?py+"float/"+r[t]+"/"+a:py+"quant"+n+"/"+r[t]+"/"+a}(t,r,n),[4,kg(e.modelUrl||s)];case 1:return o=u.sent(),i=new Rg(o,t),[2,new Ry(i)]}}))}))}function Fy(e){return Ng(this,void 0,void 0,(function(){var t,n,r,s,o;return Tg(this,(function(i){switch(i.label){case 0:if(t=e.outputStride,n=e.quantBytes,null==a)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\\n        model.");return r=function(e,t){var n="model-stride"+e+".json";return 4===t?dy+"float/"+n:dy+"quant"+t+"/"+n}(t,n),[4,kg(e.modelUrl||r)];case 1:return s=i.sent(),o=new ly(s,t),[2,new Ry(o)]}}))}))}function Dy(e){return void 0===e&&(e=Iy),Ng(this,void 0,void 0,(function(){return Tg(this,(function(t){return"ResNet50"===(e=function(e){if(null==(e=e||Iy).architecture&&(e.architecture="MobileNetV1"),Sy.indexOf(e.architecture)<0)throw new Error("Invalid architecture "+e.architecture+". Should be one of "+Sy);if(null==e.outputStride&&(e.outputStride=16),Ny[e.architecture].indexOf(e.outputStride)<0)throw new Error("Invalid outputStride "+e.outputStride+". Should be one of "+Ny[e.architecture]+" for architecture "+e.architecture+".");if(null==e.multiplier&&(e.multiplier=1),Ty[e.architecture].indexOf(e.multiplier)<0)throw new Error("Invalid multiplier "+e.multiplier+". Should be one of "+Ty[e.architecture]+" for architecture "+e.architecture+".");if(null==e.quantBytes&&(e.quantBytes=4),jy.indexOf(e.quantBytes)<0)throw new Error("Invalid quantBytes "+e.quantBytes+". Should be one of "+jy+" for architecture "+e.architecture+".");return e}(e)).architecture?[2,Fy(e)]:"MobileNetV1"===e.architecture?[2,_y(e)]:[2,null]}))}))}function My(e,t,n,r,a){if(void 0===t&&(t={r:0,g:0,b:0,a:0}),void 0===n&&(n={r:0,g:0,b:0,a:255}),void 0===r&&(r=!1),void 0===a&&(a=[1]),Array.isArray(e)&&0===e.length)return null;var s,o=(s=Array.isArray(e)?e:[e])[0],i=o.width,u=o.height,c=new Uint8ClampedArray(i*u*4);function l(e,t,n,r,a,s){void 0===s&&(s={r:0,g:255,b:255,a:255});for(var o=-a;o<=a;o++)for(var i=-a;i<=a;i++)if(0!==o&&0!==i){var u=(t+o)*r+(n+i);e[4*u+0]=s.r,e[4*u+1]=s.g,e[4*u+2]=s.b,e[4*u+3]=s.a}}function d(e,t,n,r,a,s){void 0===a&&(a=[1]),void 0===s&&(s=1);for(var o=0,i=-s;i<=s;i++)for(var u=function(s){if(0!==i&&0!==s){var u=(t+i)*r+(n+s);a.some((function(t){return t===e[u]}))||(o+=1)}},c=-s;c<=s;c++)u(c);return o>0}for(var p=0;p<u;p+=1)for(var h=function(e){var o=p*i+e;c[4*o+0]=n.r,c[4*o+1]=n.g,c[4*o+2]=n.b,c[4*o+3]=n.a;for(var h=function(n){if(a.some((function(e){return e===s[n].data[o]}))){c[4*o]=t.r,c[4*o+1]=t.g,c[4*o+2]=t.b,c[4*o+3]=t.a;var h=d(s[n].data,p,e,i,a);r&&p-1>=0&&p+1<u&&e-1>=0&&e+1<i&&h&&l(c,p,e,i,1)}},f=0;f<s.length;f++)h(f)},f=0;f<i;f+=1)h(f);return new ImageData(c,i,u)}var Py,Ly,By,zy,Vy;!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DISPLAY=2]="DISPLAY",e[e.APP=3]="APP"}(Py||(Py={})),function(e){e[e.Primary=0]="Primary",e[e.Secondary=1]="Secondary"}(Ly||(Ly={})),function(e){e.Standard="Standard",e.High="High",e.Ultra="Ultra"}(By||(By={})),function(e){e[e.None=0]="None",e[e.Blur=1]="Blur",e[e.Overlay=2]="Overlay",e[e.Default=3]="Default",e[e.Custom=4]="Custom"}(zy||(zy={})),function(e){e[e.Off=0]="Off",e[e.Person=1]="Person",e[e.People=2]="People"}(Vy||(Vy={}));By.Standard,zy.None,Vy.Off;class Wy{constructor(){this.performanceLogs={},this._lastReset=performance.now()}get lastReset(){return this._lastReset}startTimer(e){this.performanceLogs[e]||(this.performanceLogs[e]={lastStartTime:void 0,durations:[]}),this.performanceLogs[e].lastStartTime=performance.now()}endTimer(e){this.performanceLogs[e].durations.push(performance.now()-this.performanceLogs[e].lastStartTime)}formatPerformanceLogAndReset(){const e=Object.keys(this.performanceLogs).filter((e=>this.performanceLogs[e].durations.length)).map((e=>{const t=this.performanceLogs[e].durations;return{key:e,average:t.reduce(((e,t)=>e+t),0)/t.length}})).map((e=>`${e.key}: ${e.average.toPrecision(3)} ms`)).join(" ");return Object.keys(this.performanceLogs).forEach((e=>this.performanceLogs[e].durations.length=0)),this._lastReset=performance.now(),e}}var Uy=function(e,t,n,r){var a,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},Gy=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function i(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}u((r=r.apply(e,t||[])).next())}))};class Hy{constructor(e){this.postMessage=e,this.performanceLogger=new Wy}logPerformanceAndReset(){if(performance.now()-this.performanceLogger.lastReset>1e3){const e=this.performanceLogger.formatPerformanceLogAndReset();self.console.debug(`AnalyzerWorker performance: ${e}`)}}getOrCreateContext(e){var t;const n=null===(t=this.context)||void 0===t?void 0:t.canvas;if(!n||n.width!=e.width||n.height!=e.height){const t=new OffscreenCanvas(e.width,e.height);this.context=t.getContext("2d",{alpha:!1,desynchronized:!0})}return this.context}getImageData(e){let t;if(e.imageData)t=e.imageData;else if(e.buffer)this.performanceLogger.startTimer("imageDataFromArrayBuffer"),t=new ImageData(new Uint8ClampedArray(e.buffer),e.width,e.height),this.performanceLogger.endTimer("imageDataFromArrayBuffer");else if(e.bitmap){this.performanceLogger.startTimer("imageDataFromImageBitmap");const n=this.getOrCreateContext(e.bitmap);n.drawImage(e.bitmap,0,0),t=n.getImageData(0,0,e.bitmap.width,e.bitmap.height),this.performanceLogger.endTimer("imageDataFromImageBitmap")}return t}handleMessage(e){return Gy(this,void 0,void 0,(function*(){const t=e.data;switch(t.type){case"init":this.handleMessageInit(t);break;case"analyze":this.handleMessageAnalyze(t)}}))}handleMessageInit(e){return Gy(this,void 0,void 0,(function*(){this.model=yield Dy({architecture:"MobileNetV1",outputStride:e.outputStride,multiplier:e.multiplier,quantBytes:e.quantBytes}),this.internalResolution=e.internalResolution,this.segmentationThreshold=e.segmentationThreshold,this.maxDetections=e.maxDetections,this.scoreThreshold=e.scoreThreshold,this.postMessage({ready:!0})}))}handleMessageAnalyze(e){return Gy(this,void 0,void 0,(function*(){try{if(this.model){const t=this.getImageData(e);this.performanceLogger.startTimer("modelDetection");const n=yield this.model.segmentPerson(t,{internalResolution:this.internalResolution,segmentationThreshold:this.segmentationThreshold,maxDetections:e.smartCameraMode===Vy.People?this.maxDetections:1,scoreThreshold:this.scoreThreshold});this.performanceLogger.endTimer("modelDetection");const r=[];let a;if(e.backgroundMode!==zy.None){this.performanceLogger.startTimer("drawBlurMask");a=My(n,{r:255,g:255,b:255,a:255},{r:0,g:0,b:0,a:0}).data.buffer,r.push(a),this.performanceLogger.endTimer("drawBlurMask")}this.postMessage({allPoses:n.allPoses,blurMask:a,width:t.width,height:t.height},r)}}catch(e){this.postMessage({error:e})}this.logPerformanceAndReset()}))}}Uy([xf],Hy.prototype,"handleMessage",null);const qy=new Hy(postMessage.bind(void 0));onmessage=qy.handleMessage}]);\n',"Worker",void 0,void 0)}var Qr=n(0);function Jr(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Qr.util.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const eo=Qr.kernel_impls.whereImpl;class to extends Qr.KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Qr.DataStorage(this,Object(Qr.engine)())}nextDataId(){return to.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,Object(Qr.env)().get("IS_NODE")&&Qr.backend_util.warn("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Qr.util.isString(n[0])){const o=n.map((e=>Qr.util.encodeString(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,o){this.data.set(e,{values:t,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){const e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return Qr.backend_util.mergeRealAndImagArrays(e,t)}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>Qr.util.decodeString(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(Qr.buffer)(e.shape,e.dtype,n)}makeOutput(e,t,n){const r=this.write(e,t,n);return Object(Qr.engine)().makeTensorFromDataId(r,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Qr.util.now();e();return{kernelMs:Qr.util.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Jr([e],"where");const t=this.readSync(e.dataId);return eo(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function no(e,t,n){return({inputs:r,attrs:o,backend:a})=>{const{x:i}=r;if(Jr(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const s=a,c=s.data.get(i.dataId).values,u=Qr.util.sizeFromShape(i.shape),l=n||i.dtype,d=Qr.util.getArrayFromDType(l,u);for(let e=0;e<u;++e)d[e]=t(c[e],o);return s.makeTensorInfo(i.shape,l,d)}}function ro(e,t,n){return({inputs:r,attrs:o,backend:a})=>{const{x:i}=r;if(Jr(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const s=a,c=s.data.get(i.dataId).values,u=n||i.dtype,l=t(c,u,o);return s.makeTensorInfo(i.shape,u,l)}}to.nextDataId=0,Object(Qr.registerBackend)("cpu",(()=>new to),1);const oo=no(Qr.Elu,(e=>e>=0?e:Math.exp(e)-1)),ao={kernelName:Qr.Elu,backendName:"cpu",kernelFunc:oo};function io(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const so={kernelName:Qr.Identity,backendName:"cpu",kernelFunc:io};function co(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r;Jr([o],"leakyRelu");const i=Qr.util.sizeFromShape(o.shape),s=n.data.get(o.dataId).values,c=Qr.util.getTypedArrayFromDType("float32",i);for(let e=0;e<s.length;e++)c[e]=s[e]<0?a*s[e]:s[e];return n.makeTensorInfo(o.shape,"float32",c)}const uo={kernelName:Qr.LeakyRelu,backendName:"cpu",kernelFunc:co};function lo(e){return(t,n,r,o,a)=>{const i=Qr.backend_util.assertAndGetBroadcastShape(t,n),s=i.length,c=Qr.util.computeStrides(i),u=Qr.util.sizeFromShape(i),l=Qr.util.getTypedArrayFromDType(a,u),d=t.length,p=n.length,h=Qr.util.computeStrides(t),f=Qr.util.computeStrides(n),m=Qr.backend_util.getBroadcastDims(t,i),g=Qr.backend_util.getBroadcastDims(n,i);if(m.length+g.length===0)for(let t=0;t<l.length;++t)l[t]=e(r[t%r.length],o[t%o.length]);else for(let t=0;t<l.length;++t){const n=Qr.util.indexToLoc(t,s,c),a=n.slice(-d);m.forEach((e=>a[e]=0));const i=Qr.util.locToIndex(a,d,h),u=n.slice(-p);g.forEach((e=>u[e]=0));const b=Qr.util.locToIndex(u,p,f);l[t]=e(r[i],o[b])}return[l,i]}}const po=lo(((e,t)=>e<0?t*e:e));function ho(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t;Jr([r,o],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[s,c]=po(r.shape,o.shape,a,i,"float32");return n.makeTensorInfo(c,"float32",s)}const fo={kernelName:Qr.Prelu,backendName:"cpu",kernelFunc:ho},mo=no(Qr.Relu,(e=>Math.max(0,e))),go={kernelName:Qr.Relu,backendName:"cpu",kernelFunc:mo},bo=no(Qr.Relu6,(e=>Math.min(Math.max(0,e),6))),yo={kernelName:Qr.Relu6,backendName:"cpu",kernelFunc:bo};function Ao(e){return(t,n,r)=>{const o=Qr.util.getTypedArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)o[n]=e(t[n],r);return o}}const vo=Ao((e=>1/(1+Math.exp(-e)))),xo=no(Qr.Sigmoid,(e=>1/(1+Math.exp(-e)))),ko={kernelName:Qr.Sigmoid,backendName:"cpu",kernelFunc:xo};function wo(e,t,n,r,o){if("linear"===n)return io({inputs:{x:t},backend:e});if("relu"===n)return mo({inputs:{x:t},backend:e});if("elu"===n)return oo({inputs:{x:t},backend:e});if("relu6"===n)return bo({inputs:{x:t},backend:e});if("prelu"===n)return ho({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return co({inputs:{x:t},backend:e,attrs:{alpha:o}});if("sigmoid"===n)return xo({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Co(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(o.shape,"float32",i)},s}const So={kernelName:Qr.Complex,backendName:"cpu",kernelFunc:Co};function Oo(e,t,n="float32"){if("complex64"===n){return Co({inputs:{real:Oo(e,t,"float32"),imag:Oo(e,t,"float32")},backend:e})}const r=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function Eo(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const Io={kernelName:Qr.Real,backendName:"cpu",kernelFunc:Eo};function To(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:a}=r;if("complex64"===a){if("complex64"===o.dtype)return io({inputs:{x:o},backend:n});const e=Oo(n,o.shape,o.dtype),t=To({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=Co({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=Eo({inputs:{input:o},backend:n}),t=To({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!Qr.util.hasEncodingLoss(o.dtype,a)){const e=io({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}if("int32"===a){const e=n.data.get(o.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(o.shape,"int32",t)}if("bool"===a){const e=n.data.get(o.dataId).values,t=Qr.util.toTypedArray([0],o.dtype),[r,a]=lo(((e,t)=>e!==t?1:0))(o.shape,[],e,t,"bool");return n.makeTensorInfo(a,"bool",r)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}const No={kernelName:Qr.Cast,backendName:"cpu",kernelFunc:To};function Ro(e,t,n,r){return null==n?({inputs:n,backend:o})=>{const{a:a,b:i}=n,s=o;Jr([a,i],e);const c=s.data.get(a.dataId).values,u=s.data.get(i.dataId).values,l="string"===a.dtype?Qr.backend_util.fromUint8ToStringArray(c):c,d="string"===a.dtype?Qr.backend_util.fromUint8ToStringArray(u):u,p=r||a.dtype,[h,f]=t(a.shape,i.shape,l,d,p);return s.makeTensorInfo(f,p,h)}:({inputs:e,backend:o})=>{const{a:a,b:i}=e,s=o;if("complex64"===a.dtype||"complex64"===i.dtype){const e=To({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),t=s.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,c=s.data.get(r.dataId).values,u=s.data.get(o.dataId).values,l=To({inputs:{x:i},backend:s,attrs:{dtype:"complex64"}}),d=s.data.get(l.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=s.data.get(p.dataId).values,m=s.data.get(h.dataId).values,[g,b,y]=n(a.shape,i.shape,c,u,f,m),A=s.makeTensorInfo(y,"float32",g),v=s.makeTensorInfo(y,"float32",b),x=Co({inputs:{real:A,imag:v},backend:s});return s.disposeIntermediateTensorInfo(e),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(v),x}{const e=s.data.get(a.dataId).values,n=s.data.get(i.dataId).values,o=r||a.dtype,[c,u]=t(a.shape,i.shape,e,n,o);return s.makeTensorInfo(u,o,c)}}}function jo(e){return(t,n,r,o,a,i)=>{const s=Qr.backend_util.assertAndGetBroadcastShape(t,n),c=Qr.util.sizeFromShape(s),u=s.length,l=Qr.util.computeStrides(s),d=Qr.util.getTypedArrayFromDType("float32",c),p=Qr.util.getTypedArrayFromDType("float32",c),h=Qr.backend_util.getBroadcastDims(t,s),f=Qr.backend_util.getBroadcastDims(n,s),m=Qr.backend_util.mergeRealAndImagArrays(r,o),g=Qr.backend_util.mergeRealAndImagArrays(a,i),b=t.length,y=Qr.util.computeStrides(t),A=n.length,v=Qr.util.computeStrides(n);if(h.length+f.length===0)for(let t=0;t<d.length;t++){const n=t%m.length,r=t%g.length,o=e(m[2*n],m[2*n+1],g[2*r],g[2*r+1]);d[t]=o.real,p[t]=o.imag}else for(let t=0;t<d.length;t++){const n=Qr.util.indexToLoc(t,u,l),r=n.slice(-b);h.forEach((e=>r[e]=0));const o=Qr.util.locToIndex(r,b,y),a=n.slice(-A);f.forEach((e=>a[e]=0));const i=Qr.util.locToIndex(a,A,v),s=e(m[2*o],m[2*o+1],g[2*i],g[2*i+1]);d[t]=s.real,p[t]=s.imag}return[d,p,s]}}const Bo=lo(((e,t)=>e+t)),_o=jo(((e,t,n,r)=>({real:e+n,imag:t+r}))),Do=Ro(Qr.Add,Bo,_o),Mo={kernelName:Qr.Add,backendName:"cpu",kernelFunc:Do};function $o(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=Qr.util.sizeFromShape(o.shape),s=Qr.util.inferFromImplicitShape(a,i),c=Qr.util.sizeFromShape(s);Qr.util.assert(i===c,(()=>`The new shape (${s}) has ${c} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:o.dataId,shape:s,dtype:o.dtype}}const Po={kernelName:Qr.Reshape,backendName:"cpu",kernelFunc:$o};function Lo(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;Jr([o,a],"matMul");const c=o.shape.length,u=a.shape.length,l=i?o.shape[c-2]:o.shape[c-1],d=s?a.shape[u-1]:a.shape[u-2],p=i?o.shape[c-1]:o.shape[c-2],h=s?a.shape[u-2]:a.shape[u-1],f=o.shape.slice(0,-2),m=a.shape.slice(0,-2),g=Qr.util.sizeFromShape(f),b=Qr.util.sizeFromShape(m),y=g===b||1===g||1===b;Qr.util.assert(c>=2&&u>=2&&y,(()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${f}) and (${m}).`));const A=(g>b?o.shape.slice(0,-2):a.shape.slice(0,-2)).concat([p,h]);Qr.util.assert(l===d,(()=>`Error in matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${o.shape} and ${a.shape} and transposeA=${i} and transposeB=${s} must match.`));const v=s?[b,h,d]:[b,d,h],x=$o({inputs:{x:o},backend:n,attrs:{shape:i?[g,l,p]:[g,p,l]}}),k=$o({inputs:{x:a},backend:n,attrs:{shape:v}}),w=i?x.shape[1]:x.shape[2],C=i?x.shape[2]:x.shape[1],S=s?k.shape[1]:k.shape[2],O=Math.max(g,b),E=n.data.get(x.dataId).values,I=n.data.get(k.dataId).values,T=Qr.util.computeStrides(x.shape),N=Qr.util.computeStrides(k.shape),[R,j,B]=i?[T[0],1,T[1]]:[T[0],T[1],1],[_,D,M]=s?[1,N[1],N[0]]:[N[1],1,N[0]],$=C*S,P=Object(Qr.buffer)([O,C,S],x.dtype),L=P.values,F=n.blockSize;for(let e=0;e<O;e++)for(let t=0;t<C;t+=F)for(let n=0;n<S;n+=F)for(let r=0;r<w;r+=F){const o=Math.min(t+F,C),a=Math.min(n+F,S),i=Math.min(r+F,w);for(let s=t;s<o;s++)for(let t=n;t<a;t++){let n=0;for(let o=r;o<i;o++){const r=Math.min(e,g-1)*R,a=Math.min(e,b-1)*M;n+=E[r+s*j+o*B]*I[o*_+t*D+a]}L[e*$+(s*S+t)]+=n}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(A,P.dtype,P.values)}const Fo={kernelName:Qr.BatchMatMul,backendName:"cpu",kernelFunc:Lo};const zo={kernelName:Qr._FusedMatMul,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=r;let p,h,f;const m=[];p=Lo({inputs:{a:o,b:a},attrs:{transposeA:c,transposeB:u},backend:n}),i&&(h=Do({inputs:{a:p,b:i},backend:n}),m.push(p),p=h),l&&(f=wo(n,p,l,s,d),m.push(p),p=f);for(const e of m)n.disposeIntermediateTensorInfo(e);return p}};function Uo(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const Wo={kernelName:Qr.Abs,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;Jr(t,"abs");let r=new Float32Array(Qr.util.sizeFromShape(t.shape));return r=Uo(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},Vo=no(Qr.Acos,(e=>Math.acos(e))),qo={kernelName:Qr.Acos,backendName:"cpu",kernelFunc:Vo},Go=no(Qr.Acosh,(e=>Math.acosh(e))),Ho={kernelName:Qr.Acosh,backendName:"cpu",kernelFunc:Go};const Ko={kernelName:Qr.AddN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;Jr(t,"addN");const o=r.map((e=>n.data.get(e.dataId).values)),a=Object(Qr.buffer)(r[0].shape,r[0].dtype),i=a.values;for(let e=0;e<r.length;e++){const t=o[e];for(let e=0;e<i.length;e++)i[e]+=t[e]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};function Yo(e,t,n,r,o){const a=t.length,i=Qr.util.sizeFromShape(t),s=Qr.util.computeStrides(t),c=Qr.util.computeStrides(o),u=Qr.util.getTypedArrayFromDType(n,Qr.util.sizeFromShape(o));for(let t=0;t<i;++t){const n=Qr.util.indexToLoc(t,a,s),o=new Array(n.length);for(let e=0;e<o.length;e++)o[e]=n[r[e]];u[Qr.util.locToIndex(o,a,c)]=e[t]}return u}function Xo(e){const{inputs:t,attrs:n,backend:r}=e,{x:o}=t,{perm:a}=n;Jr(o,"transpose");const i=o.shape.length,s=new Array(i);for(let e=0;e<s.length;e++)s[e]=o.shape[a[e]];const c=Yo(r.data.get(o.dataId).values,o.shape,o.dtype,a,s);return{dataId:r.write(c,s,o.dtype),shape:s,dtype:o.dtype}}const Zo={kernelName:Qr.Transpose,backendName:"cpu",kernelFunc:Xo};const Qo={kernelName:Qr.All,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;Jr(o,"all");const s=Qr.util.parseAxisParam(a,o.shape);let c=s;const u=Qr.backend_util.getAxesPermutation(c,o.shape.length);let l=o;null!=u&&(l=Xo({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Qr.backend_util.getInnerMostAxes(c.length,o.shape.length)),Qr.backend_util.assertAxesAreInnerMostDims("all",c,l.shape.length);const[d,p]=Qr.backend_util.computeOutAndReduceShapes(l.shape,c),h=Qr.util.sizeFromShape(p),f=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];n=n&&r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(l);const g=n.makeTensorInfo(d,l.dtype,f);if(i){const e=$o({inputs:{x:g},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const Jo={kernelName:Qr.Any,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;Jr(o,"any");const s=Qr.util.parseAxisParam(a,o.shape);let c=s;const u=Qr.backend_util.getAxesPermutation(c,o.shape.length);let l=o;null!=u&&(l=Xo({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Qr.backend_util.getInnerMostAxes(c.length,o.shape.length)),Qr.backend_util.assertAxesAreInnerMostDims("any",c,l.shape.length);const[d,p]=Qr.backend_util.computeOutAndReduceShapes(l.shape,c),h=Qr.util.sizeFromShape(p),f=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];n=n||r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(l);const g=n.makeTensorInfo(d,l.dtype,f);if(i){const e=$o({inputs:{x:g},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const ea={kernelName:Qr.ArgMax,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;Jr(o,"argMax");let i=Qr.util.parseAxisParam(a,o.shape);const s=Qr.backend_util.getAxesPermutation(i,o.shape.length);let c=o;const u=[];null!=s&&(c=Xo({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(c),i=Qr.backend_util.getInnerMostAxes(i.length,c.shape.length)),i=[i[0]],Qr.backend_util.assertAxesAreInnerMostDims("argMax",i,c.shape.length);const[l,d]=Qr.backend_util.computeOutAndReduceShapes(c.shape,i),p=Qr.util.sizeFromShape(l),h=Qr.util.makeZerosTypedArray(p,"int32"),f=Qr.util.sizeFromShape(d),m=n.data.get(c.dataId).values;for(let e=0;e<h.length;++e){const t=e*f;let n=m[t],r=0;for(let e=0;e<f;++e){const o=m[t+e];o>n&&(n=o,r=e)}h[e]=r}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l,"int32",h)}};const ta={kernelName:Qr.ArgMin,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;Jr(o,"argMin");let i=Qr.util.parseAxisParam(a,o.shape);const s=Qr.backend_util.getAxesPermutation(i,o.shape.length);let c=o;const u=[];null!=s&&(c=Xo({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(c),i=Qr.backend_util.getInnerMostAxes(i.length,c.shape.length)),i=[i[0]],Qr.backend_util.assertAxesAreInnerMostDims("argMin",i,c.shape.length);const[l,d]=Qr.backend_util.computeOutAndReduceShapes(c.shape,i),p=Qr.util.sizeFromShape(l),h=Qr.util.makeZerosTypedArray(p,"int32"),f=Qr.util.sizeFromShape(d),m=n.data.get(c.dataId).values;for(let e=0;e<h.length;++e){const t=e*f;let n=m[t],r=0;for(let e=0;e<f;++e){const o=m[t+e];o<n&&(n=o,r=e)}h[e]=r}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l,"int32",h)}},na=no(Qr.Asin,(e=>Math.asin(e))),ra={kernelName:Qr.Asin,backendName:"cpu",kernelFunc:na},oa=no(Qr.Asinh,(e=>Math.asinh(e))),aa={kernelName:Qr.Asinh,backendName:"cpu",kernelFunc:oa},ia=no(Qr.Atan,(e=>Math.atan(e))),sa={kernelName:Qr.Atan,backendName:"cpu",kernelFunc:ia},ca=lo(((e,t)=>Math.atan2(e,t))),ua=Ro(Qr.Atan2,ca),la={kernelName:Qr.Atan2,backendName:"cpu",kernelFunc:ua},da=no(Qr.Atanh,(e=>Math.atanh(e))),pa={kernelName:Qr.Atanh,backendName:"cpu",kernelFunc:da};function ha(e,t,n,r,o,a){const i=o.strideHeight,s=o.strideWidth,c=o.dilationHeight,u=o.dilationWidth,l=o.effectiveFilterHeight,d=o.effectiveFilterWidth,p=o.padInfo.top,h=o.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Object(Qr.buffer)(o.outShape,n),g=m.values,b=o.outShape[1]*o.outShape[2]*o.outShape[3],y=o.outShape[2]*o.outShape[3],A=o.outShape[3];for(let t=0;t<o.batchSize;++t){const n=t*b,m=t*r[0];for(let t=0;t<o.inChannels;++t)for(let b=0;b<o.outHeight;++b){const v=b*i-p,x=Math.max(0,v),k=Math.min(o.inHeight,l+v),w=n+b*y;for(let n=0;n<o.outWidth;++n){const i=n*s-h,l=Math.max(0,i),p=Math.min(o.inWidth,d+i);let b=f,y=0,v=0;for(let n=x;n<k;n+=c){const o=m+n*r[1];for(let n=l;n<p;n+=u){const i=e[o+n*r[2]+t];"max"===a&&i>b?b=i:"avg"===a&&(y+=i,v++)}if(isNaN(b))break}g[w+n*A+t]="avg"===a?y/v:b}}}return m}function fa(e,t,n,r,o=!1,a=!1){const i=Object(Qr.buffer)(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=Object(Qr.buffer)(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){const g=n*s-h;let b=g;for(;b<0;)b+=u;const y=Math.min(r.inHeight,d+g);for(let s=0;s<r.outWidth;++s){const d=s*c-f;let h=d;for(;h<0;)h+=l;const A=Math.min(r.inWidth,p+d);let v=Number.NEGATIVE_INFINITY,x=-1;for(let n=b;n<y;n+=u){const i=n-g;for(let s=h;s<A;s+=l){const c=s-d,u=m.get(e,n,s,t);u>v&&(v=u,x=o?a?((e*r.inHeight+n)*r.inWidth+s)*r.inChannels+t:(n*r.inWidth+s)*r.inChannels+t:i*p+c)}}i.set(x,e,n,s,t)}}return i}function ma(e,t,n,r,o,a){const i=o.strideDepth,s=o.strideHeight,c=o.strideWidth,u=o.dilationDepth,l=o.dilationHeight,d=o.dilationWidth,p=o.effectiveFilterDepth,h=o.effectiveFilterHeight,f=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,b=o.padInfo.left,y="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=Object(Qr.buffer)(o.outShape,n),v=A.values,x=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],k=o.outShape[2]*o.outShape[3]*o.outShape[4],w=o.outShape[3]*o.outShape[4],C=o.outShape[4];for(let t=0;t<o.batchSize;++t){const n=t*x,A=t*r[0];for(let t=0;t<o.inChannels;++t)for(let x=0;x<o.outDepth;++x){const S=x*i-m;let O=S;for(;O<0;)O+=u;const E=Math.min(o.inDepth,p+S),I=n+x*k;for(let n=0;n<o.outHeight;++n){const i=n*s-g;let p=i;for(;p<0;)p+=l;const m=Math.min(o.inHeight,h+i),x=I+n*w;for(let n=0;n<o.outWidth;++n){const i=n*c-b;let s=i;for(;s<0;)s+=d;const h=Math.min(o.inWidth,f+i),g=x+n*C;let k=y,w=0,S=0;for(let n=O;n<E;n+=u){const o=A+n*r[1];for(let n=p;n<m;n+=l){const i=o+n*r[2];for(let n=s;n<h;n+=d){const o=e[i+n*r[3]+t];if("max"===a&&o>k?k=o:"avg"===a&&(w+=o,S++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}v[g+t]="avg"===a?w/S:k}}}}return A}const ga={kernelName:Qr.AvgPool,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;Jr(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=Qr.backend_util.computePool2DInfo(o.shape,a,i,1,s,c);let l;if(1===u.filterWidth&&1===u.filterHeight&&Qr.util.arraysEqual(u.inShape,u.outShape))l=io({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=Qr.util.computeStrides(o.shape),r=ha(e,o.shape,o.dtype,t,u,"avg");l=n.makeTensorInfo(u.outShape,o.dtype,r.values)}return l}};const ba={kernelName:Qr.AvgPool3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c,dataFormat:u}=r;Jr(o,"avgPool3d");const l=Qr.backend_util.computePool3DInfo(o.shape,a,i,1,s,c,u),d=ma(n.data.get(o.dataId).values,o.shape,o.dtype,Qr.util.computeStrides(o.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const ya={kernelName:Qr.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=r;Jr([o,a],"avgPool3DGrad");const l=Qr.backend_util.computePool3DInfo(a.shape,i,s,1,c,u),d=l.strideDepth,p=l.strideHeight,h=l.strideWidth,f=l.filterDepth,m=l.filterHeight,g=l.filterWidth,b=l.dilationDepth,y=l.dilationHeight,A=l.dilationWidth,v=l.effectiveFilterDepth,x=l.effectiveFilterHeight,k=l.effectiveFilterWidth,w=v-1-l.padInfo.front,C=k-1-l.padInfo.left,S=x-1-l.padInfo.top,O=Object(Qr.buffer)(a.shape,"float32"),E=1/(f*m*g),I=n.bufferSync(o);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inDepth;++n)for(let r=0;r<l.inHeight;++r)for(let o=0;o<l.inWidth;++o){const a=n-w,i=r-S,s=o-C;let c=0;for(let n=0;n<v;n+=b){const r=(a+n)/d;if(!(r<0||r>=l.outDepth||Math.floor(r)!==r))for(let n=0;n<x;n+=y){const o=(i+n)/p;if(!(o<0||o>=l.outHeight||Math.floor(o)!==o))for(let n=0;n<k;n+=A){const a=(s+n)/h;if(a<0||a>=l.outWidth||Math.floor(a)!==a)continue;c+=I.get(e,r,o,a,t)}}}O.set(c*E,e,n,r,o,t)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}};const Aa={kernelName:Qr.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;Jr([o,a],"avgPoolGrad");const{filterSize:s,strides:c,pad:u}=r,l=Qr.backend_util.computePool2DInfo(i.shape,s,c,1,u),d=l.strideHeight,p=l.strideWidth,h=l.filterHeight,f=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,b=l.effectiveFilterHeight,y=l.effectiveFilterWidth,A=y-1-l.padInfo.left,v=b-1-l.padInfo.top,x=Object(Qr.buffer)(i.shape,"float32"),k=1/(h*f),w=n.data.get(o.dataId).values,C=Object(Qr.buffer)(o.shape,"float32",w);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inHeight;++n)for(let r=0;r<l.inWidth;++r){const o=n-v,a=r-A;let i=0;for(let n=0;n<b;n+=m){const r=(o+n)/d;if(!(r<0||r>=l.outHeight||Math.floor(r)!==r))for(let n=0;n<y;n+=g){const o=(a+n)/p;if(o<0||o>=l.outWidth||Math.floor(o)!==o)continue;i+=C.get(e,r,o,t)}}x.set(i*k,e,n,r,t)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const va={kernelName:Qr.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,scale:a,offset:i,mean:s,variance:c}=t;Qr.util.assert(s.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Qr.util.assert(null==i||s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Qr.util.assert(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),Jr([o,s,c,a,i],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const l=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(c.dataId).values,h=a?n.data.get(a.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=f.length,b=h.length,y=p.length,A=d.length;let v=0,x=0,k=0,w=0;for(let e=0;e<l.length;++e)m[e]=f[v++]+(l[e]-d[x++])*h[k++]/Math.sqrt(p[w++]+u),v>=g&&(v=0),x>=A&&(x=0),k>=b&&(k=0),w>=y&&(w=0);return n.makeTensorInfo(o.shape,o.dtype,m)}};function xa(e,t,n,r,o){const a=Qr.slice_util.isSliceContinous(r,t,n),i=Qr.util.sizeFromShape(n),s=Qr.util.computeStrides(r);if(a){const n=Qr.slice_util.computeFlatOffset(t,s);return"string"===o?e.slice(n,n+i):e.subarray(n,n+i)}const c="string"===o?Qr.backend_util.fromUint8ToStringArray(e):e,u=Object(Qr.buffer)(r,o,c),l=Object(Qr.buffer)(n,o);for(let e=0;e<l.size;++e){const n=l.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));l.set(u.get(...r),...n)}return"string"===o?Qr.backend_util.fromStringArrayToUint8(l.values):l.values}function ka(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r;Jr(o,"slice");const[s,c]=Qr.slice_util.parseSliceParams(o,a,i);Qr.slice_util.assertParamsValid(o,s,c);const u=xa(n.data.get(o.dataId).values,s,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,u)}const wa={kernelName:Qr.Slice,backendName:"cpu",kernelFunc:ka};const Ca={kernelName:Qr.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;Jr([o],"batchToSpaceND");const s=a.reduce(((e,t)=>e*t)),c=Qr.backend_util.getReshaped(o.shape,a,s),u=Qr.backend_util.getPermuted(c.length,a.length),l=Qr.backend_util.getReshapedPermuted(o.shape,a,s),d=Qr.backend_util.getSliceBeginCoords(i,a.length),p=Qr.backend_util.getSliceSize(l,i,a.length),h=$o({inputs:{x:o},backend:n,attrs:{shape:c}}),f=Xo({inputs:{x:h},backend:n,attrs:{perm:u}}),m=$o({inputs:{x:f},backend:n,attrs:{shape:l}}),g=ka({inputs:{x:m},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function Sa(e,t,n,r,o){const a=Qr.util.sizeFromShape(r),i=Qr.util.makeZerosTypedArray(o,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=o||(i[r]+=a>0?t[n]:1)}return i}function Oa(e,t,n,r=!1){const o=e.shape[0],a=e.shape[1],i=Object(Qr.buffer)([o,n],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<a;o++){const a=e.get(s,o);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?i.set(1,s,a):t.size>0?i.set(i.get(s,a)+t.get(s,o),s,a):i.set(i.get(s,a)+1,s,a))}return i}const Ea={kernelName:Qr.Bincount,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=Sa(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,s)}};const Ia={kernelName:Qr.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=Qr.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Ta=Ao((e=>Math.ceil(e))),Na=ro(Qr.Ceil,Ta),Ra={kernelName:Qr.Ceil,backendName:"cpu",kernelFunc:Na},ja=no(Qr.ClipByValue,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Ba={kernelName:Qr.ClipByValue,backendName:"cpu",kernelFunc:ja},_a={kernelName:Qr.ComplexAbs,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(Qr.util.sizeFromShape(t.shape)),o=n.data.get(t.dataId),a=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values;for(let e=0;e<s.length;e++){const t=s[e],n=c[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};function Da(e,t,n,r){const o=Qr.util.getArrayFromDType(n,Qr.util.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=Qr.util.sizeFromShape(e.shape);o.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const a="string"===n?Qr.backend_util.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[s+t]=a[i++]}r+=e.shape[1]}))}return o}function Ma(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const $a={kernelName:Qr.Imag,backendName:"cpu",kernelFunc:Ma};function Pa(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=Qr.util.parseAxisParam(o,t[0].shape)[0];let i=Qr.backend_util.computeOutShape(t.map((e=>e.shape)),a);if(0===Qr.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>Qr.util.sizeFromShape(e.shape)>0));if(1===s.length)return io({inputs:{x:s[0]},backend:n});const c=s.map((e=>e.shape));if(Qr.backend_util.assertParamsConsistent(c,a),"complex64"===s[0].dtype){const e=s.map((e=>Eo({inputs:{input:e},backend:n}))),t=s.map((e=>Ma({inputs:{input:e},backend:n}))),r=Pa({inputs:e,backend:n,attrs:{axis:a}}),o=Pa({inputs:t,backend:n,attrs:{axis:a}}),i=Co({inputs:{real:r,imag:o},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),i}const u=s.map((e=>{const t=Qr.util.sizeFromShape(e.shape.slice(a));return $o({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),l=u.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));i=Qr.backend_util.computeOutShape(u.map((e=>e.shape)),1);const d=1===u[0].shape[0],p=Da(l,i,t[0].dtype,d),h=Qr.backend_util.computeOutShape(s.map((e=>e.shape)),a),f=n.makeTensorInfo(h,t[0].dtype,p);return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}const La={kernelName:Qr.Concat,backendName:"cpu",kernelFunc:Pa};function Fa(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=r;Jr([o,a],"conv2d");const d=Qr.backend_util.convertConv2DDataFormat(c),p=Qr.backend_util.computeConv2DInfo(o.shape,a.shape,i,u,s,l,!1,d),h=p.filterHeight,f=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,b=p.padInfo.left,y=p.padInfo.top,A="channelsLast"===p.dataFormat,v=new Qr.TensorBuffer(p.outShape,o.dtype),x=Qr.util.computeStrides(o.shape),k=Qr.util.computeStrides(a.shape),w=x[0],C=A?x[1]:x[2],S=A?x[2]:1,O=A?1:x[1],E=v.strides[0],I=A?v.strides[1]:v.strides[2],T=A?v.strides[2]:1,N=A?1:v.strides[1],R=n.data.get(o.dataId).values,j=n.data.get(a.dataId).values,B=v.values;for(let e=0;e<p.batchSize;++e){const t=e*w,n=e*E;for(let e=0;e<p.outHeight;++e){const r=n+e*I,o=e*p.strideHeight-y;for(let e=0;e<h;++e){const n=o+e*m;if(n<0||n>=p.inHeight)continue;const a=e*k[0],i=t+n*C;for(let e=0;e<p.outWidth;++e){const t=r+e*T,n=e*p.strideWidth-b;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=p.inWidth)continue;const o=i+r*S;let s=a+e*k[1];for(let e=0;e<p.inChannels;++e){const n=R[o+e*O];for(let e=0;e<p.outChannels;++e)B[t+e*N]+=n*j[s+e];s+=p.outChannels}}}}}}return n.makeTensorInfo(v.shape,v.dtype,B)}const za={kernelName:Qr.Conv2D,backendName:"cpu",kernelFunc:Fa};const Ua={kernelName:Qr.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:c,dimRoundingMode:u,filterShape:l}=r;Jr([o,a],"conv2dBackpropFilter");const d=Qr.backend_util.convertConv2DDataFormat(c),p=Qr.backend_util.computeConv2DInfo(o.shape,l,i,1,s,u,!1,d),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=p,b="channelsLast"===p.dataFormat,y=new Qr.TensorBuffer(p.filterShape,"float32"),A=p.padInfo.left,v=p.padInfo.top,x=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,w=new Qr.TensorBuffer(o.shape,o.dtype,x),C=new Qr.TensorBuffer(a.shape,a.dtype,k);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((v-e)/h)),n=Math.min(p.outHeight,(p.inHeight+v-e)/h);for(let r=0;r<g;++r){const o=Math.max(0,Math.ceil((A-r)/f)),a=Math.min(p.outWidth,(p.inWidth+A-r)/f);for(let i=0;i<p.inChannels;++i)for(let s=0;s<p.outChannels;++s){let c=0;for(let u=0;u<p.batchSize;++u)for(let l=t;l<n;++l){const t=e+l*h-v;for(let e=o;e<a;++e){const n=r+e*f-A;c+=b?w.get(u,t,n,i)*C.get(u,l,e,s):w.get(u,i,t,n)*C.get(u,s,l,e)}}y.set(c,e,r,i,s)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const Wa={kernelName:Qr.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:c,dataFormat:u,dimRoundingMode:l}=r;Jr([o,a],"conv2dBackpropInput");const d=Qr.util.computeStrides(a.shape),p=Qr.util.computeStrides(o.shape);let h=Qr.backend_util.convertConv2DDataFormat(u);const f=Qr.backend_util.computeConv2DInfo(i,a.shape,s,1,c,l,!1,h),m=new Qr.TensorBuffer(f.inShape,"float32"),g=m.values,b=n.data.get(o.dataId).values,y=n.data.get(a.dataId).values,[A,v,x]=d,{batchSize:k,filterHeight:w,filterWidth:C,inChannels:S,inHeight:O,inWidth:E,outChannels:I,outHeight:T,outWidth:N,strideHeight:R,strideWidth:j}=f;h=f.dataFormat;const B=w-1-f.padInfo.top,_=C-1-f.padInfo.left,D="channelsLast"===h,M=m.strides[0],$=D?m.strides[1]:m.strides[2],P=D?m.strides[2]:1,L=D?1:m.strides[1],F=p[0],z=D?p[1]:p[2],U=D?p[2]:1,W=D?1:p[1];for(let e=0;e<k;++e)for(let t=0;t<S;++t)for(let n=0;n<O;++n){const r=n-B,o=Math.max(0,Math.ceil(r/R)),a=Math.min(T,(w+r)/R);for(let i=0;i<E;++i){const s=i-_,c=Math.max(0,Math.ceil(s/j)),u=Math.min(N,(C+s)/j);let l=0;for(let n=o;n<a;++n){const o=n*R-r;for(let r=c;r<u;++r){const a=F*e+z*n+U*r,i=A*(w-1-o)+v*(C-1-(r*j-s))+x*t;for(let e=0;e<I;++e){l+=b[a+W*e]*y[i+e]}}}g[M*e+$*n+P*i+L*t]=l}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const Va={kernelName:Qr.Conv3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r;Jr([o,a],"conv3d");const u=Qr.backend_util.computeConv3DInfo(o.shape,a.shape,i,c,s),{filterDepth:l,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=u,b=g.front,y=g.left,A=g.top,v=new Qr.TensorBuffer(u.outShape,o.dtype),x=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,w=v.values,C=Qr.util.computeStrides(o.shape),S=Qr.util.computeStrides(a.shape);for(let e=0;e<u.batchSize;++e){const t=e*C[0],n=e*v.strides[0];for(let e=0;e<u.outDepth;++e){const r=n+e*v.strides[1],o=e*u.strideDepth-b;for(let e=0;e<l;++e){const n=o+e*h;if(n<0||n>=u.inDepth)continue;const a=e*S[0],i=t+n*C[1];for(let e=0;e<u.outHeight;++e){const t=r+e*v.strides[2],n=e*u.strideHeight-A;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const o=a+e*S[1],s=i+r*C[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-y;for(let e=0;e<p;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const a=o+e*S[2],i=s+t*u.inChannels;let c=a;for(let e=0;e<u.inChannels;++e){const t=x[i+e];for(let e=0;e<u.outChannels;++e)w[n+e]+=t*k[c+e];c+=u.outChannels}}}}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const qa={kernelName:Qr.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:c}=r;Jr([o,a],"conv3dBackpropFilterV2");const u=Qr.util.computeStrides(o.shape),l=Qr.util.computeStrides(a.shape),d=Qr.backend_util.computeConv3DInfo(o.shape,c,i,1,s),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,b=d.filterWidth,y=new Qr.TensorBuffer(d.filterShape,"float32"),A=y.values,[v,x,k,w]=y.strides,C=n.data.get(a.dataId).values,[S,O,E,I]=l,T=n.data.get(o.dataId).values,[N,R,j,B]=u,_=d.padInfo.front,D=d.padInfo.left,M=d.padInfo.top;for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((_-e)/p)),n=Math.min(d.outDepth,(d.inDepth+_-e)/p),r=e*v;for(let o=0;o<g;++o){const a=Math.max(0,Math.ceil((M-o)/h)),i=Math.min(d.outHeight,(d.inHeight+M-o)/h),s=o*x+r;for(let r=0;r<b;++r){const c=Math.max(0,Math.ceil((D-r)/f)),u=Math.min(d.outWidth,(d.inWidth+D-r)/f),l=r*k+s;for(let s=0;s<d.inChannels;++s){const m=s*w+l;for(let l=0;l<d.outChannels;++l){let g=0;for(let m=0;m<d.batchSize;++m){const d=m*N,b=m*S;for(let m=t;m<n;++m){const t=(e+m*p-_)*R+d,n=m*O+b;for(let e=a;e<i;++e){const a=(o+e*h-M)*j+t,i=e*E+n;for(let e=c;e<u;++e){const t=e*I+i;g+=T[(r+e*f-D)*B+a+s]*C[t+l]}}}}A[m+l]=g}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const Ga={kernelName:Qr.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:c}=r;Jr([o],"conv3dBackpropInputV2");const u=Qr.util.computeStrides(o.shape),l=Qr.util.computeStrides(a.shape),d=Qr.backend_util.computeConv3DInfo(c,a.shape,s,1,i),p=new Qr.TensorBuffer(d.inShape,"float32"),h=p.values,[f,m,g,b]=p.strides,y=n.data.get(o.dataId).values,[A,v,x,k]=u,w=n.data.get(a.dataId).values,[C,S,O,E]=l,{batchSize:I,filterDepth:T,filterHeight:N,filterWidth:R,inChannels:j,inDepth:B,inHeight:_,inWidth:D,outChannels:M,outDepth:$,outHeight:P,outWidth:L,strideDepth:F,strideHeight:z,strideWidth:U}=d,W=T-1-d.padInfo.front,V=N-1-d.padInfo.top,q=R-1-d.padInfo.left;for(let e=0;e<I;++e)for(let t=0;t<j;++t)for(let n=0;n<B;++n){const r=n-W,o=Math.max(0,Math.ceil(r/F)),a=Math.min($,(T+r)/F);for(let i=0;i<_;++i){const s=i-V,c=Math.max(0,Math.ceil(s/z)),u=Math.min(P,(N+s)/z);for(let l=0;l<D;++l){const d=l-q,p=Math.max(0,Math.ceil(d/U)),I=Math.min(L,(R+d)/U);let j=0;for(let n=o;n<a;++n){const o=n*F-r;for(let r=c;r<u;++r){const a=r*z-s;for(let i=p;i<I;++i){const s=A*e+v*n+x*r+k*i,c=C*(T-1-o)+S*(N-1-a)+O*(R-1-(i*U-d))+E*t;for(let e=0;e<M;++e){j+=y[s+e]*w[c+e]}}}}h[f*e+m*n+g*i+b*l+t]=j}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},Ha=no(Qr.Cos,(e=>Math.cos(e))),Ka={kernelName:Qr.Cos,backendName:"cpu",kernelFunc:Ha},Ya=no(Qr.Cosh,(e=>Math.cosh(e))),Xa={kernelName:Qr.Cosh,backendName:"cpu",kernelFunc:Ya};const Za={kernelName:Qr.CropAndResize,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:c,extrapolationValue:u}=r,[l,d,p,h]=o.shape,f=a.shape[0],[m,g]=s,b=Object(Qr.buffer)([f,m,g,h],"float32"),y=n.data.get(a.dataId).values,A=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,x=Qr.util.computeStrides(o.shape),k=Qr.util.computeStrides(b.shape);for(let e=0;e<f;e++){const t=4*e,n=y[t],r=y[t+1],o=y[t+2],a=y[t+3],i=A[e];if(i>=l)continue;const s=m>1?(o-n)*(d-1)/(m-1):0,f=g>1?(a-r)*(p-1)/(g-1):0;for(let t=0;t<m;t++){const l=m>1?n*(d-1)+t*s:.5*(n+o)*(d-1);if(l<0||l>d-1)for(let n=0;n<g;n++)for(let r=0;r<h;r++){const o=r+n*k[2]+t*k[1]+e*k[0];b.values[o]=u}else if("bilinear"===c){const n=Math.floor(l),o=Math.ceil(l),s=l-n;for(let c=0;c<g;c++){const l=g>1?r*(p-1)+c*f:.5*(r+a)*(p-1);if(l<0||l>p-1){for(let n=0;n<h;n++){const r=n+c*k[2]+t*k[1]+e*k[0];b.values[r]=u}continue}const d=Math.floor(l),m=Math.ceil(l),y=l-d;for(let r=0;r<h;r++){let a=r+d*x[2]+n*x[1]+i*x[0];const u=v[a];a=r+m*x[2]+n*x[1]+i*x[0];const l=v[a];a=r+d*x[2]+o*x[1]+i*x[0];const p=v[a];a=r+m*x[2]+o*x[1]+i*x[0];const h=u+(l-u)*y,f=p+(v[a]-p)*y;a=r+c*k[2]+t*k[1]+e*k[0],b.values[a]=h+(f-h)*s}}}else for(let n=0;n<g;++n){const o=g>1?r*(p-1)+n*f:.5*(r+a)*(p-1);if(o<0||o>p-1){for(let r=0;r<h;r++){const o=r+n*k[2]+t*k[1]+e*k[0];b.values[o]=u}continue}const s=Math.round(o),c=Math.round(l);for(let r=0;r<h;r++){const o=r+s*x[2]+c*x[1]+i*x[0],a=r+n*k[2]+t*k[1]+e*k[0];b.values[a]=v[o]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const Qa={kernelName:Qr.Cumsum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;Jr(o,"cumsum");const c=Qr.backend_util.getAxesPermutation([a],o.shape.length);let u=o;null!=c&&(u=Xo({inputs:{x:o},backend:n,attrs:{perm:c}}));const l=Qr.backend_util.getInnerMostAxes(1,o.shape.length)[0];if(l!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${l}`);const d=Object(Qr.upcastType)(u.dtype,"int32"),p=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(u.shape),d),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){const n=m(e,t);if(0===t)p[n]=i?0:h[n];else{const r=m(e,t-1);p[n]=i?h[r]+p[r]:h[n]+p[r]}}const g=n.makeTensorInfo(u.shape,d,p);if(null!=c){const e=Xo({inputs:{x:g},backend:n,attrs:{perm:Qr.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const Ja={kernelName:Qr.DenseBincount,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=Sa(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,e)}if(2===o.shape.length){const e=Oa(n.bufferSync(o),n.bufferSync(a),i,s);return n.makeTensorInfo(e.shape,a.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}};const ei={kernelName:Qr.DepthToSpace,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r;Qr.util.assert("NHWC"===i,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`));const s=o.shape[0],c=o.shape[1],u=o.shape[2],l=o.shape[3],d=c*a,p=u*a,h=l/(a*a),f=n.data.get(o.dataId).values,m=new Float32Array(s*d*p*h);let g=0;for(let e=0;e<s;++e)for(let t=0;t<d;++t){const n=Math.floor(t/a),r=t%a;for(let t=0;t<p;++t){const o=Math.floor(t/a),i=(r*a+t%a)*h;for(let t=0;t<h;++t){const r=t+i+l*(o+u*(n+c*e));m[g++]=f[r]}}}return n.makeTensorInfo([s,d,p,h],o.dtype,m)}};function ti(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c,dimRoundingMode:u}=r;Jr([o,a],"depthwiseConv2DNative");const l=Qr.util.computeStrides(o.shape),d=Qr.util.computeStrides(a.shape);let p=c;null==p&&(p=[1,1]),Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(i,p),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${p}'`));const h=Qr.backend_util.computeConv2DInfo(o.shape,a.shape,i,p,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:b,padInfo:y}=h,A=y.left,v=y.top,x=h.outChannels/h.inChannels,k=new Qr.TensorBuffer(h.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(a.dataId).values,S=k.values;for(let e=0;e<h.batchSize;++e){const t=e*l[0],n=e*k.strides[0];for(let e=0;e<h.outHeight;++e){const r=n+e*k.strides[1],o=e*h.strideHeight-v;for(let e=0;e<f;++e){const n=o+e*g;if(n<0||n>=h.inHeight)continue;const a=e*d[0],i=t+n*l[1];for(let e=0;e<h.outWidth;++e){const t=r+e*k.strides[2],n=e*h.strideWidth-A;for(let e=0;e<m;++e){const r=n+e*b;if(r<0||r>=h.inWidth)continue;const o=a+e*d[1],s=i+r*h.inChannels;let c=t,u=o;for(let e=0;e<h.inChannels;++e){const t=w[s+e];for(let e=0;e<x;++e)S[c+e]+=t*C[u+e];c+=x,u+=x}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const ni={kernelName:Qr.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:ti};const ri={kernelName:Qr.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,filterShape:l}=r;Jr([o,a],"depthwiseConv2dNativeBackpropFilter");const d=Qr.backend_util.computeConv2DInfo(o.shape,l,i,s,c,u,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:m}=d,g=new Qr.TensorBuffer(d.filterShape,"float32"),b=d.padInfo.left,y=d.padInfo.top,A=d.outChannels/d.inChannels,v=n.data.get(o.dataId).values,x=new Qr.TensorBuffer(o.shape,o.dtype,v),k=n.data.get(a.dataId).values,w=new Qr.TensorBuffer(a.shape,a.dtype,k);for(let e=0;e<f;++e){const t=Math.max(0,Math.ceil((y-e)/p)),n=Math.min(d.outHeight,(d.inHeight+y-e)/p);for(let r=0;r<m;++r){const o=Math.max(0,Math.ceil((b-r)/h)),a=Math.min(d.outWidth,(d.inWidth+b-r)/h);for(let i=0;i<d.outChannels;++i){const s=Math.trunc(i/A),c=i%A;let u=0;for(let c=0;c<d.batchSize;++c)for(let l=t;l<n;++l){const t=e+l*p-y;for(let e=o;e<a;++e){const n=r+e*h-b;u+=x.get(c,t,n,s)*w.get(c,l,e,i)}}g.set(u,e,r,s,c)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const oi={kernelName:Qr.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,inputShape:l}=r;Jr([o,a],"depthwiseConv2DNativeBackpropInput");const d=Qr.util.computeStrides(o.shape),p=Qr.util.computeStrides(a.shape),h=Qr.backend_util.computeConv2DInfo(l,a.shape,i,s,c,u,!0),f=new Qr.TensorBuffer(h.inShape,"float32"),m=f.values,[g,b,y]=f.strides,A=n.data.get(o.dataId).values,[v,x,k]=d,w=n.data.get(a.dataId).values,[C,S,O]=p,{batchSize:E,filterHeight:I,filterWidth:T,inChannels:N,inHeight:R,inWidth:j,outChannels:B,outHeight:_,outWidth:D,strideHeight:M,strideWidth:$}=h,P=I-1-h.padInfo.top,L=T-1-h.padInfo.left,F=B/N;for(let e=0;e<E;++e)for(let t=0;t<N;++t)for(let n=0;n<R;++n){const r=n-P,o=Math.max(0,Math.ceil(r/M)),a=Math.min(_,(I+r)/M);for(let i=0;i<j;++i){const s=i-L,c=Math.max(0,Math.ceil(s/$)),u=Math.min(D,(T+s)/$);let l=0;for(let n=o;n<a;++n){const o=n*M-r;for(let r=c;r<u;++r){const a=v*e+x*n+k*r,i=C*(I-1-o)+S*(T-1-(r*$-s))+O*t;for(let e=0;e<F;++e){l+=A[a+(t*F+e)]*w[i+e]}}}m[g*e+b*n+y*i+t]=l}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const ai={kernelName:Qr.Diag,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=Qr.util.sizeFromShape(r.shape),a=n.data.get(r.dataId).values,i=Object(Qr.buffer)([o,o],r.dtype),s=i.values;for(let e=0;e<a.length;e++)s[e*o+e]=a[e];const c=[...r.shape,...r.shape];return n.makeTensorInfo(c,i.dtype,i.values)}},ii={kernelName:Qr.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:o}=e,{strides:a,pad:i,dilations:s}=n,c=t,u=c.data.get(r.dataId).values,l=r.shape.length,d=c.data.get(o.dataId).values,p=o.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:A,strideHeight:v,strideWidth:x,filterHeight:k,filterWidth:w,dilationHeight:C,dilationWidth:S,outShape:O}=Qr.backend_util.computeDilation2DInfo(r.shape,o.shape,a,i,"NHWC",s),E=Qr.util.sizeFromShape(O),I=O.length,T=Qr.util.getArrayFromDType(r.dtype,E);for(let e=0;e<h;++e)for(let t=0;t<b;++t){const n=t*v-A.top;for(let a=0;a<y;++a){const i=a*x-A.left;for(let s=0;s<g;++s){let c=Number.MIN_SAFE_INTEGER;for(let t=0;t<k;++t){const a=n+t*C;if(a>=0&&a<f)for(let n=0;n<w;++n){const h=i+n*S;if(h>=0&&h<m){const i=Qr.util.locToIndex([e,a,h,s],l,Qr.util.computeStrides(r.shape)),f=Qr.util.locToIndex([t,n,s],p,Qr.util.computeStrides(o.shape)),m=u[i]+d[f];m>c&&(c=m)}}}T[Qr.util.locToIndex([e,t,a,s],I,Qr.util.computeStrides(O))]=c}}}return{dataId:c.write(Qr.util.toTypedArray(T,r.dtype),O,r.dtype),shape:O,dtype:r.dtype}}},si={kernelName:Qr.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:o,dy:a}=e,{strides:i,pad:s,dilations:c}=n,u=t,l=Qr.util.toNestedArray(r.shape,u.data.get(r.dataId).values),d=Qr.util.toNestedArray(o.shape,u.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:b,padInfo:y,strideHeight:A,strideWidth:v,filterHeight:x,filterWidth:k,dilationHeight:w,dilationWidth:C,outShape:S}=Qr.backend_util.computeDilation2DInfo(r.shape,o.shape,i,s,"NHWC",c);Qr.util.assert(a.rank===S.length,(()=>`Error in ${Qr.Dilation2DBackpropFilter}, dy must have the same rank as output ${S.length}, but got ${a.rank}`));const O=Qr.util.toNestedArray(S,u.data.get(a.dataId).values),E=Qr.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let e=0;e<p;++e)for(let t=0;t<g;++t){const n=t*A-y.top;for(let r=0;r<b;++r){const o=r*v-y.left;for(let a=0;a<m;++a){let i=Number.MIN_SAFE_INTEGER,s=0,c=0;for(let t=0;t<x;++t){const r=n+t*w;if(r>=0&&r<h)for(let n=0;n<k;++n){const u=o+n*C;if(u>=0&&u<f){const o=l[e][r][u][a]+d[t][n][a];o>i&&(i=o,s=t,c=n)}}}E[s][c][a]+=O[e][t][r][a]}}}return{dataId:u.write(Qr.util.toTypedArray(E,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},ci={kernelName:Qr.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:o,dy:a}=e,{strides:i,pad:s,dilations:c}=n,u=t,l=Qr.util.toNestedArray(r.shape,u.data.get(r.dataId).values),d=Qr.util.toNestedArray(o.shape,u.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:b,padInfo:y,strideHeight:A,strideWidth:v,filterHeight:x,filterWidth:k,dilationHeight:w,dilationWidth:C,outShape:S}=Qr.backend_util.computeDilation2DInfo(r.shape,o.shape,i,s,"NHWC",c);Qr.util.assert(a.rank===S.length,(()=>`Error in ${Qr.Dilation2DBackpropInput}, dy must have the same rank as output ${S.length}, but got ${a.rank}`));const O=Qr.util.toNestedArray(S,u.data.get(a.dataId).values),E=Qr.util.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<p;++e)for(let t=0;t<g;++t){const n=t*A-y.top;for(let r=0;r<b;++r){const o=r*v-y.left;for(let a=0;a<m;++a){let i=Number.MIN_SAFE_INTEGER,s=n<0?0:n,c=o<0?0:o;for(let t=0;t<x;++t){const r=n+t*w;if(r>=0&&r<h)for(let n=0;n<k;++n){const u=o+n*C;if(u>=0&&u<f){const o=l[e][r][u][a]+d[t][n][a];o>i&&(i=o,s=r,c=u)}}}E[e][s][c][a]+=O[e][t][r][a]}}}return{dataId:u.write(Qr.util.toTypedArray(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},ui=lo(((e,t)=>e*t)),li=jo(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),di=Ro(Qr.Multiply,ui,li),pi={kernelName:Qr.Multiply,backendName:"cpu",kernelFunc:di};function hi(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;let s;Jr(o,"sum"),s="bool"===o.dtype?To({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):io({inputs:{x:o},backend:n});const c=s.shape.length,u=Qr.util.parseAxisParam(a,s.shape),l=Qr.backend_util.getAxesPermutation(u,c);let d=u,p=s;null!=l&&(p=Xo({inputs:{x:s},backend:n,attrs:{perm:l}}),d=Qr.backend_util.getInnerMostAxes(d.length,c)),Qr.backend_util.assertAxesAreInnerMostDims("sum",d,p.shape.length);const[h,f]=Qr.backend_util.computeOutAndReduceShapes(p.shape,d);let m=Oo(n,h,Qr.backend_util.upcastType(p.dtype,"int32"));const g=Qr.util.sizeFromShape(f),b=n.data.get(m.dataId).values,y=n.data.get(p.dataId).values;for(let e=0;e<b.length;++e){const t=e*g;let n=0;for(let e=0;e<g;++e)n+=y[t+e];b[e]=n}if(i){const e=m;m=$o({inputs:{x:m},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=l&&n.disposeIntermediateTensorInfo(p),m}const fi={kernelName:Qr.Sum,backendName:"cpu",kernelFunc:hi};const mi={kernelName:Qr.Einsum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:c}=Qr.backend_util.decodeEinsumEquation(o,a.length);Qr.backend_util.checkEinsumDimSizes(i.length,c,a);const{path:u,steps:l}=Qr.backend_util.getEinsumComputePath(s,c),d=l.length;let p=null,h=i.length;const f=[];for(let e=0;e<d;++e){for(const t of l[e]){const{permutationIndices:e,expandDims:r}=Qr.backend_util.getEinsumPermutation(h,c[t]);let o;Qr.backend_util.isIdentityPermutation(e)?o=a[t]:(o=Xo({inputs:{x:a[t]},backend:n,attrs:{perm:e}}),f.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);Qr.util.arraysEqual(o.shape,i)||(o=$o({inputs:{x:o},backend:n,attrs:{shape:i}}),f.push(o)),null===p?p=o:(p=di({inputs:{a:o,b:p},backend:n}),f.push(p))}e<d-1&&(u[e]>=0&&(p=hi({inputs:{x:p},backend:n,attrs:{axis:u[e]-(i.length-h),keepDims:!1}}),f.push(p)),h--)}for(const e of f)e!==p&&n.disposeIntermediateTensorInfo(e);return p}};const gi={kernelName:Qr.EluGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:o}=t;Jr([r,o],"eluGrad");const a=new Float32Array(Qr.util.sizeFromShape(o.shape)),i=n.data.get(o.dataId).values,s=n.data.get(r.dataId).values;for(let e=0;e<i.length;++e){const t=i[e];a[e]=t>=1?s[e]:s[e]*(t+1)}return n.makeTensorInfo(o.shape,"float32",a)}},bi=lo(((e,t)=>e===t?1:0)),yi=Ro(Qr.Equal,bi,null,"bool"),Ai={kernelName:Qr.Equal,backendName:"cpu",kernelFunc:yi},vi=Qr.backend_util.ERF_P,xi=Qr.backend_util.ERF_A1,ki=Qr.backend_util.ERF_A2,wi=Qr.backend_util.ERF_A3,Ci=Qr.backend_util.ERF_A4,Si=Qr.backend_util.ERF_A5,Oi=no(Qr.Erf,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+vi*n);return t*(1-((((Si*r+Ci)*r+wi)*r+ki)*r+xi)*r*Math.exp(-n*n))})),Ei={kernelName:Qr.Erf,backendName:"cpu",kernelFunc:Oi},Ii=Ao((e=>Math.exp(e))),Ti=ro(Qr.Exp,Ii,"float32"),Ni={kernelName:Qr.Exp,backendName:"cpu",kernelFunc:Ti};function Ri(e){const{inputs:t,backend:n,attrs:r}=e,{input:o}=t,{dim:a}=r,i=o.shape.length,s=o.shape.slice();let c=a;return a<0&&(Qr.util.assert(-(i+1)<=a,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),c=i+a+1),s.splice(c,0,1),$o({inputs:{x:o},backend:n,attrs:{shape:s}})}const ji={kernelName:Qr.ExpandDims,backendName:"cpu",kernelFunc:Ri},Bi=Ao((e=>Math.expm1(e))),_i=ro(Qr.Expm1,Bi),Di={kernelName:Qr.Expm1,backendName:"cpu",kernelFunc:_i},Mi=lo(((e,t)=>e/t)),$i=Ro(Qr.RealDiv,Mi),Pi={kernelName:Qr.RealDiv,backendName:"cpu",kernelFunc:$i},Li=lo(((e,t)=>e-t)),Fi=jo(((e,t,n,r)=>({real:e-n,imag:t-r}))),zi=Ro(Qr.Sub,Li,Fi),Ui={kernelName:Qr.Sub,backendName:"cpu",kernelFunc:zi};function Wi(e,t,n){const r=e.shape,o=r[0],a=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,c=i.complexTensorInfos.imag,u=[o,a],l=Qr.util.sizeFromShape(u),d=Qr.util.getTypedArrayFromDType("float32",l),p=Qr.util.getTypedArrayFromDType("float32",l);for(let e=0;e<o;e++){const r=ka({inputs:{x:s},backend:n,attrs:{begin:[e,0],size:[1,a]}}),o=ka({inputs:{x:c},backend:n,attrs:{begin:[e,0],size:[1,a]}}),i=Co({inputs:{real:r,imag:o},backend:n}),{real:u,imag:l}=Vi(i,t,n),h=Qr.backend_util.mergeRealAndImagArrays(u,l);for(let t=0;t<a;t++){const n=Qr.backend_util.getComplexWithIndex(h,t);d[e*a+t]=n.real,p[e*a+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i)}const h=n.makeTensorInfo(u,"float32",d),f=n.makeTensorInfo(u,"float32",p),m=Co({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}function Vi(e,t,n){const r=Qr.util.sizeFromShape(e.shape),o=n.data.get(e.dataId),a=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0==((s=r)&s-1)){const o=qi(a,i,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",o.real),t=n.makeTensorInfo(s,"float32",o.imag),a=n.makeTensorInfo([],"float32",Qr.util.createScalarValue(r,"float32")),i=io({inputs:{x:a},backend:n}),c=Pi.kernelFunc({inputs:{a:e,b:a},backend:n}),u=Pi.kernelFunc({inputs:{a:t,b:i},backend:n}),l=n.data.get(c.dataId).values,d=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),{real:l,imag:d}}return o}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let o=0;o<t;o++){let a=0,i=0;for(let r=0;r<t;r++){const s=Qr.backend_util.exponent(o*r,t,n),c=Qr.backend_util.getComplexWithIndex(e,r);a+=c.real*s.real-c.imag*s.imag,i+=c.real*s.imag+c.imag*s.real}n&&(a/=t,i/=t),Qr.backend_util.assignToTypedArray(r,a,i,o)}return r}(Qr.backend_util.mergeRealAndImagArrays(a,i),r,t);return Qr.backend_util.splitRealAndImagArrays(e)}var s}function qi(e,t,n,r,o){if(1===n)return{real:e,imag:t};const a=Qr.backend_util.mergeRealAndImagArrays(e,t),i=n/2,s=Qr.backend_util.complexWithEvenIndex(a),c=s.real,u=s.imag,l=[c.length],d=o.makeTensorInfo(l,"float32",c),p=o.makeTensorInfo(l,"float32",u),h=Co({inputs:{real:d,imag:p},backend:o}),f=Qr.backend_util.complexWithOddIndex(a),m=f.real,g=f.imag,b=[m.length],y=o.makeTensorInfo(b,"float32",m),A=o.makeTensorInfo(b,"float32",g),v=Co({inputs:{real:y,imag:A},backend:o}),x=qi(c,u,i,r,o),k=x.real,w=x.imag,C=[k.length],S=o.makeTensorInfo(C,"float32",k),O=o.makeTensorInfo(C,"float32",w),E=Co({inputs:{real:S,imag:O},backend:o}),I=qi(m,g,i,r,o),T=I.real,N=I.imag,R=[T.length],j=o.makeTensorInfo(R,"float32",T),B=o.makeTensorInfo(R,"float32",N),_=Co({inputs:{real:j,imag:B},backend:o}),D=Qr.backend_util.exponents(n,r),M=[D.real.length],$=o.makeTensorInfo(M,"float32",D.real),P=o.makeTensorInfo(M,"float32",D.imag),L=Co({inputs:{real:$,imag:P},backend:o}),F=di({inputs:{a:L,b:_},backend:o}),z=Do({inputs:{a:E,b:F},backend:o}),U=zi({inputs:{a:E,b:F},backend:o}),W=Eo({inputs:{input:z},backend:o}),V=Eo({inputs:{input:U},backend:o}),q=Ma({inputs:{input:z},backend:o}),G=Ma({inputs:{input:U},backend:o}),H=Pa({inputs:[W,V],backend:o,attrs:{axis:0}}),K=Pa({inputs:[q,G],backend:o,attrs:{axis:0}}),Y=o.data.get(H.dataId).values,X=o.data.get(K.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(_),o.disposeIntermediateTensorInfo($),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(K),{real:Y,imag:X}}const Gi={kernelName:Qr.FFT,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=Qr.util.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],i=$o({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=Wi(i,!1,n),c=$o({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}};function Hi(e){const{backend:t,attrs:n}=e,{shape:r,value:o,dtype:a}=n,i=a||Qr.util.inferDtype(o),s=Qr.util.getArrayFromDType(i,Qr.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(s,o),t.makeTensorInfo(r,i,s)}const Ki={kernelName:Qr.Fill,backendName:"cpu",kernelFunc:Hi};const Yi={kernelName:Qr.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,o=n,a=Qr.util.getTypedArrayFromDType(r.dtype,Qr.util.sizeFromShape(r.shape)),[i,s,c,u]=r.shape,l=o.data.get(r.dataId).values;for(let e=0;e<i;e++){const t=e*c*s*u;for(let e=0;e<s;e++){const n=e*(c*u);for(let e=0;e<c;e++){const r=e*u;for(let o=0;o<u;o++){const i=Math.round(c-e-1),s=t+n+r+o;let d=l[s];if(i>=0&&i<c){d=l[t+n+i*u+o]}a[s]=d}}}}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Xi=Ao((e=>Math.floor(e))),Zi=ro(Qr.Floor,Xi),Qi={kernelName:Qr.Floor,backendName:"cpu",kernelFunc:Zi},Ji=lo(((e,t)=>Math.floor(e/t))),es=Ro(Qr.FloorDiv,Ji,null,"int32"),ts={kernelName:Qr.FloorDiv,backendName:"cpu",kernelFunc:es};const ns={kernelName:Qr.FusedConv2D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let m=Fa({inputs:{x:o,filter:a},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){const e=m;m=Do({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=wo(n,m,h,s,f),n.disposeIntermediateTensorInfo(e)}return m}};const rs={kernelName:Qr.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let m=ti({inputs:{x:o,filter:a},backend:n,attrs:{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){const e=m;m=Do({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=wo(n,m,h,s,f),n.disposeIntermediateTensorInfo(e)}return m}};function os(e,t,n,r,o,a,i,s,c){const u=Object(Qr.buffer)([r,a],n);for(let n=0;n<r;n++){const r=[];let l=0;for(let t=0;t<o;t++){const a=e[n*o+t];l+=a*i[t],r.push(a)}if(l<0||l>=c/a)throw new Error(`Invalid indices: ${r} does not index into ${s}`);for(let e=0;e<a;e++)u.values[n*a+e]=t.get(...t.indexToLoc(l*a+e))}return u}const as={kernelName:Qr.GatherNd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=Qr.util.sizeFromShape(r.shape),i=o.shape,s=i[i.length-1],[c,u,l,d]=Qr.backend_util.prepareAndValidate(r,o);if(0===u)return n.makeTensorInfo(c,r.dtype,[]);const p=os(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,u,s,l,d,r.shape,a);return n.makeTensorInfo(c,r.dtype,p.values)}};function is(e,t,n){const r=Object(Qr.buffer)(n,e.dtype);for(let n=0;n<r.size;++n){const o=r.indexToLoc(n).slice(),a=o[0],i=o[2],s=t.locToIndex([a,i]);o[2]=t.values[s];const c=e.locToIndex(o);r.values[n]=e.values[c]}return r}const ss={kernelName:Qr.GatherV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r;Jr([o,a],"gatherV2");const c=Qr.util.parseAxisParam(i,o.shape)[0],u=n.data.get(a.dataId).values,l=o.shape[c];for(let e=0;e<u.length;++e){const t=u[e];Qr.util.assert(t<=l-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${l-1}]`))}let d=s;null==s&&(d=0);const p=Qr.util.sizeFromShape(a.shape),h=Qr.backend_util.segment_util.collectGatherOpShapeInfo(o,a,c,d),f=$o({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=$o({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),g=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],b=n.bufferSync(m),y=is(n.bufferSync(f),b,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,y.dtype,y.values)}},cs=lo(((e,t)=>e>t?1:0)),us=Ro(Qr.Greater,cs,null,"bool"),ls={kernelName:Qr.Greater,backendName:"cpu",kernelFunc:us},ds=lo(((e,t)=>e>=t?1:0)),ps=Ro(Qr.GreaterEqual,ds,null,"bool"),hs={kernelName:Qr.GreaterEqual,backendName:"cpu",kernelFunc:ps};const fs={kernelName:Qr.IFFT,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=Qr.util.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],i=$o({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=Wi(i,!0,n),c=$o({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}},ms=no(Qr.IsFinite,(e=>Number.isFinite(e)?1:0),"bool"),gs={kernelName:Qr.IsFinite,backendName:"cpu",kernelFunc:ms},bs=no(Qr.IsInf,(e=>Math.abs(e)===1/0?1:0),"bool"),ys={kernelName:Qr.IsInf,backendName:"cpu",kernelFunc:bs},As=no(Qr.IsNan,(e=>Number.isNaN(e)?1:0),"bool"),vs={kernelName:Qr.IsNan,backendName:"cpu",kernelFunc:As},xs=lo(((e,t)=>e<t?1:0)),ks=Ro(Qr.Less,xs,null,"bool"),ws={kernelName:Qr.Less,backendName:"cpu",kernelFunc:ks},Cs=lo(((e,t)=>e<=t?1:0)),Ss=Ro(Qr.LessEqual,Cs,null,"bool"),Os={kernelName:Qr.LessEqual,backendName:"cpu",kernelFunc:Ss};function Es(e,t,n){const r=(t-e)/(n-1),o=Qr.util.makeZerosTypedArray(n,"float32");o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+r;return o}const Is={kernelName:Qr.LinSpace,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=Es(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},Ts=Ao((e=>Math.log(e))),Ns=ro(Qr.Log,Ts),Rs={kernelName:Qr.Log,backendName:"cpu",kernelFunc:Ns},js=no(Qr.Log1p,(e=>Math.log1p(e))),Bs={kernelName:Qr.Log1p,backendName:"cpu",kernelFunc:js},_s=lo(((e,t)=>e&&t)),Ds=Ro(Qr.LogicalAnd,_s,null,"bool"),Ms={kernelName:Qr.LogicalAnd,backendName:"cpu",kernelFunc:Ds},$s=no(Qr.LogicalNot,(e=>e?0:1),"bool"),Ps={kernelName:Qr.LogicalNot,backendName:"cpu",kernelFunc:$s},Ls=lo(((e,t)=>e||t)),Fs=Ro(Qr.LogicalOr,Ls,null,"bool"),zs={kernelName:Qr.LogicalOr,backendName:"cpu",kernelFunc:Fs};const Us={kernelName:Qr.LRN,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:c}=r;Jr(o,"LRN");const u=o.shape[3],l=u-1,d=n.data.get(o.dataId).values,p=Qr.util.sizeFromShape(o.shape),h=new Float32Array(p);function f(e){const t=e%u;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,l);let o=0;for(;n<=r;n++){const e=d[n];o+=e*e}return o}for(let e=0;e<p;e++){const t=f(e),n=d[e]*Math.pow(i+s*t,-c);h[e]=n}return n.makeTensorInfo(o.shape,o.dtype,h)}};const Ws={kernelName:Qr.LRNGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=r;Jr(i,"LRNGrad");const d=Qr.util.sizeFromShape(i.shape),p=i.shape[3],h=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,m=n.data.get(a.dataId).values,g=new Float32Array(d),b=d;for(let e=0;e<b;e++){const t=e%p,n=e-t+Math.max(0,t-s),r=e-t+Math.min(p,t+s+1);let o=0;for(let e=n;e<r;e++)o+=Math.pow(f[e],2);o=u*o+c;for(let t=n;t<r;t++){let n=-2*u*l*f[t]*m[e]/o;e===t&&(n+=Math.pow(o,-l)),n*=h[e],g[t]+=n}}return n.makeTensorInfo(i.shape,o.dtype,g)}};function Vs(e,t,n,r){const o=Qr.util.getTypedArrayFromDType(r,Qr.util.sizeFromShape(n));for(let n=0;n<o.length;++n){const r=n*t;let a=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>a)&&(a=t)}o[n]=a}return o}function qs(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=n;let c=o.shape;const u=c.length,l=Qr.util.parseAxisParam(a,c);let d=l;const p=Qr.backend_util.getAxesPermutation(d,u);let h=s.data.get(o.dataId).values;if(null!=p){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=c[p[t]];h=Yo(h,c,o.dtype,p,e),d=Qr.backend_util.getInnerMostAxes(d.length,u),c=e}Jr(o,"max"),Qr.backend_util.assertAxesAreInnerMostDims("max",d,u);const[f,m]=Qr.backend_util.computeOutAndReduceShapes(c,d),g=Vs(h,Qr.util.sizeFromShape(m),f,o.dtype),b=s.write(g,f,o.dtype);let y=f;if(i){y=Qr.backend_util.expandShapeToKeepDim(f,l)}return{dataId:b,shape:y,dtype:o.dtype}}const Gs={kernelName:Qr.Max,backendName:"cpu",kernelFunc:qs},Hs=lo(((e,t)=>Math.max(e,t))),Ks=Ro(Qr.Maximum,Hs),Ys={kernelName:Qr.Maximum,backendName:"cpu",kernelFunc:Ks};const Xs={kernelName:Qr.MaxPool,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;Jr(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=Qr.backend_util.computePool2DInfo(o.shape,a,i,1,s,c);let l;if(1===u.filterWidth&&1===u.filterHeight&&Qr.util.arraysEqual(u.inShape,u.outShape))l=io({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=Qr.util.computeStrides(o.shape),r=ha(e,o.shape,o.dtype,t,u,"max");l=n.makeTensorInfo(u.outShape,o.dtype,r.values)}return l}};const Zs={kernelName:Qr.MaxPool3D,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c,dataFormat:u}=r;Jr(o,"maxPool3d");const l=Qr.backend_util.computePool3DInfo(o.shape,a,i,1,s,c,u),d=ma(n.data.get(o.dataId).values,o.shape,o.dtype,Qr.util.computeStrides(o.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const Qs={kernelName:Qr.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:u}=r;Jr([o,a],"maxPool3DGrad");const l=Qr.backend_util.computePool3DInfo(a.shape,i,s,1,c,u),d=function(e,t){const n=Object(Qr.buffer)(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let b=0;b<t.outDepth;++b){const y=b*r-p;let A=y;for(;A<0;)A+=i;const v=Math.min(t.inDepth,u+y);for(let r=0;r<t.outHeight;++r){const u=r*o-h;let p=u;for(;p<0;)p+=s;const x=Math.min(t.inHeight,l+u);for(let o=0;o<t.outWidth;++o){const h=o*a-f;let k=h;for(;k<0;)k+=c;const w=Math.min(t.inWidth,d+h);let C=Number.NEGATIVE_INFINITY,S=-1;for(let t=A;t<v;t+=i){const n=t-y;for(let r=p;r<x;r+=s){const o=r-u;for(let a=k;a<w;a+=c){const i=a-h,s=e.get(m,t,r,a,g);s>=C&&(C=s,S=n*l*d+o*l+i)}}}n.set(S,m,b,r,o,g)}}}return n}(n.bufferSync(a),l),p=l.strideDepth,h=l.strideHeight,f=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,b=l.dilationWidth,y=l.effectiveFilterDepth,A=l.effectiveFilterHeight,v=l.effectiveFilterWidth,x=y-1-l.padInfo.front,k=v-1-l.padInfo.left,w=A-1-l.padInfo.top,C=Object(Qr.buffer)(a.shape,"float32"),S=n.bufferSync(o);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inDepth;++n)for(let r=0;r<l.inHeight;++r)for(let o=0;o<l.inWidth;++o){const a=n-x,i=r-w,s=o-k;let c=0;for(let n=0;n<y;n+=m){const r=(a+n)/p;if(!(r<0||r>=l.outDepth||Math.floor(r)!==r))for(let o=0;o<A;o+=g){const a=(i+o)/h;if(!(a<0||a>=l.outHeight||Math.floor(a)!==a))for(let i=0;i<v;i+=b){const u=(s+i)/f;if(u<0||u>=l.outWidth||Math.floor(u)!==u)continue;const p=y*A*v-1-d.get(e,r,a,u,t)===n*A*v+o*v+i?1:0;if(0===p)continue;c+=S.get(e,r,a,u,t)*p}}}C.set(c,e,n,r,o,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const Js={kernelName:Qr.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;Jr([a,i],"maxPoolGrad");const{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=Qr.backend_util.computePool2DInfo(s.shape,c,u,1,l,d),h=n.data.get(s.dataId).values,f=Object(Qr.buffer)(p.outShape,s.dtype,fa(h,s.shape,s.dtype,p).values),m=p.strideHeight,g=p.strideWidth,b=p.dilationHeight,y=p.dilationWidth,A=p.effectiveFilterHeight,v=p.effectiveFilterWidth,x=v-1-p.padInfo.left,k=A-1-p.padInfo.top,w=Object(Qr.buffer)(s.shape,"float32"),C=n.data.get(o.dataId).values,S=Object(Qr.buffer)(o.shape,"float32",C);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inHeight;++n)for(let r=0;r<p.inWidth;++r){const o=n-k,a=r-x;let i=0;for(let n=0;n<A;n+=b){const r=(o+n)/m;if(!(r<0||r>=p.outHeight||Math.floor(r)!==r))for(let o=0;o<v;o+=y){const s=(a+o)/g;if(s<0||s>=p.outWidth||Math.floor(s)!==s)continue;const c=A*v-1-f.get(e,r,s,t)===n*v+o?1:0;if(0===c)continue;i+=S.get(e,r,s,t)*c}}w.set(i,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const ec={kernelName:Qr.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:o,strides:a,pad:i,includeBatchInIndex:s}=t,c=n;Jr(r,"MaxPoolWithArgmax");const u=c.data.get(r.dataId).values,l=Qr.backend_util.computePool2DInfo(r.shape,o,a,[1,1],i),[d,p]=function(e,t,n,r,o){const a=ha(e,0,n,Qr.util.computeStrides(t),o,"max"),i=fa(e,t,n,o,!0,r);return[a.values,i.values]}(u,r.shape,r.dtype,s,l),h=c.write(d,l.outShape,r.dtype),f=c.write(p,l.outShape,r.dtype);return[{dataId:h,shape:l.outShape,dtype:r.dtype},{dataId:f,shape:l.outShape,dtype:"int32"}]}};const tc={kernelName:Qr.Mean,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=Qr.util.parseAxisParam(a,o.shape),c=Qr.backend_util.computeOutAndReduceShapes(o.shape,s)[1],u=Qr.util.sizeFromShape(c),l=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(d);const p=To({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});l.push(p);const h=$i({inputs:{a:p,b:d},backend:n});l.push(h);const f=hi({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:i}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};const nc={kernelName:Qr.Min,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;Jr(o,"min");const s=Qr.util.parseAxisParam(a,o.shape);let c=s;const u=Qr.backend_util.getAxesPermutation(c,o.shape.length);let l=o;null!=u&&(l=Xo({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Qr.backend_util.getInnerMostAxes(c.length,o.shape.length)),Qr.backend_util.assertAxesAreInnerMostDims("min",c,l.shape.length);const[d,p]=Qr.backend_util.computeOutAndReduceShapes(l.shape,c),h=Qr.util.sizeFromShape(p),f=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];(Number.isNaN(r)||r<n)&&(n=r)}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(l);const g=n.makeTensorInfo(d,l.dtype,f);if(i){const e=$o({inputs:{x:g},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},rc=lo(((e,t)=>Math.min(e,t))),oc=Ro(Qr.Minimum,rc),ac={kernelName:Qr.Minimum,backendName:"cpu",kernelFunc:oc};const ic={kernelName:Qr.MirrorPad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,mode:i}=r;Jr(o,"mirrorPad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),c=a.map((e=>e[0])),u=a.map(((e,t)=>e[0]+o.shape[t])),l="reflect"===i?0:1,d=n.data.get(o.dataId).values,p=o.shape.length,h=Qr.util.computeStrides(o.shape),f=Qr.util.sizeFromShape(s),m=s.length,g=Qr.util.computeStrides(s),b=Qr.util.getTypedArrayFromDType(o.dtype,f);for(let e=0;e<f;e++){let t=Qr.util.indexToLoc(e,m,g);for(let e=0;e<m;e++)t[e]<c[e]?t[e]=2*c[e]-t[e]-l:t[e]>=u[e]&&(t[e]=2*(u[e]-1)-t[e]+l);t=t.map(((e,t)=>e-c[t]));const n=Qr.util.locToIndex(t,p,h);b[e]=d[n]}return{dataId:n.write(b,s,o.dtype),shape:s,dtype:o.dtype}}},sc=lo(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),cc=Ro(Qr.Mod,sc),uc={kernelName:Qr.Mod,backendName:"cpu",kernelFunc:cc};var lc=n(109);function dc(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=o.shape.length;let s=a;if(-1===s&&(s=i-1),s!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${s}`);const c=Qr.util.parseAxisParam([s],o.shape),u=qs({inputs:{x:o},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),l=Qr.backend_util.expandShapeToKeepDim(u.shape,c),d=$o({inputs:{x:u},backend:n,attrs:{shape:l}}),p=zi({inputs:{a:o,b:d},backend:n}),h=Ti({inputs:{x:p},backend:n}),f=hi({inputs:{x:h},backend:n,attrs:{axis:c,keepDims:!1}}),m=$o({inputs:{x:f},backend:n,attrs:{shape:l}}),g=$i({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const pc={kernelName:Qr.Softmax,backendName:"cpu",kernelFunc:dc};const hc={kernelName:Qr.Multinomial,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r;Jr(o,"multinomial");const c=s?o:dc({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=c.shape[0],l=c.shape[1],d=n.data.get(c.dataId).values,p=[u,a],h=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(p),"int32");for(let e=0;e<u;++e){const t=e*l,n=new Float32Array(l-1);n[0]=d[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+d[t+e];const r=lc.alea(i.toString()),o=e*a;for(let e=0;e<a;++e){const t=r();h[o+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){h[o+e]=r;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(p,"int32",h)}};function fc(e,t,n){const r=Qr.util.createScalarValue(-1,n);return ui([],t,r,e,n)}const mc={kernelName:Qr.Neg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;Jr(r,"neg");const o=n.data.get(r.dataId).values,[a,i]=fc(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}},gc=Qr.kernel_impls.nonMaxSuppressionV3Impl;const bc={kernelName:Qr.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=r;Jr(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,{selectedIndices:d}=gc(u,l,i,s,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},yc=Qr.kernel_impls.nonMaxSuppressionV4Impl;const Ac={kernelName:Qr.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:u}=r;Jr(o,"NonMaxSuppressionPadded");const l=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:p,validOutputs:h}=yc(l,d,i,s,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},vc=Qr.kernel_impls.nonMaxSuppressionV5Impl;const xc={kernelName:Qr.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=r;Jr(o,"NonMaxSuppressionWithScore");const l=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,p=i,h=s,f=c,m=u,{selectedIndices:g,selectedScores:b}=vc(l,d,p,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}},kc=lo(((e,t)=>e!==t?1:0)),wc=Ro(Qr.NotEqual,kc,null,"bool"),Cc={kernelName:Qr.NotEqual,backendName:"cpu",kernelFunc:wc};const Sc={kernelName:Qr.OneHot,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{depth:a,onValue:i,offValue:s}=r;Jr(o,"oneHot");const c=Qr.util.sizeFromShape(o.shape),u=new Float32Array(c*a);u.fill(s);const l=n.data.get(o.dataId).values;for(let e=0;e<c;++e)l[e]>=0&&l[e]<a&&(u[e*a+l[e]]=i);return n.makeTensorInfo([...o.shape,a],"int32",u)}};function Oc(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=Eo({inputs:{input:r},backend:n}),t=Oc({inputs:{x:e},backend:n}),o=Ma({inputs:{input:r},backend:n}),a=Oc({inputs:{x:o},backend:n}),i=Co({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return Hi({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Ec={kernelName:Qr.ZerosLike,backendName:"cpu",kernelFunc:Oc};const Ic={kernelName:Qr.OnesLike,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===o.dtype){const t=Eo({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=Ma({inputs:{input:o},backend:r}),i=Oc({inputs:{x:a},backend:r}),s=Co({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return Hi({backend:r,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}};function Tc(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return Ri({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{Qr.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Qr.util.assert(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=Pa({inputs:t.map((e=>{const t=Ri({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const Nc={kernelName:Qr.Pack,backendName:"cpu",kernelFunc:Tc};const Rc={kernelName:Qr.PadV2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;Jr(o,"pad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),c=a.map((e=>e[0])),u=n.data.get(o.dataId).values,l=Qr.util.sizeFromShape(o.shape),d=o.shape.length,p=Qr.util.computeStrides(o.shape),h=Qr.util.sizeFromShape(s),f=s.length,m=Qr.util.computeStrides(s),g=Qr.util.getTypedArrayFromDType(o.dtype,h);0!==i&&g.fill(i);for(let e=0;e<l;e++){const t=Qr.util.indexToLoc(e,d,p).map(((e,t)=>e+c[t]));g[Qr.util.locToIndex(t,f,m)]=u[e]}return{dataId:n.write(g,s,o.dtype),shape:s,dtype:o.dtype}}},jc=lo(((e,t)=>Math.pow(e,t))),Bc=Ro(Qr.Pow,jc),_c={kernelName:Qr.Pow,backendName:"cpu",kernelFunc:Bc};function Dc(e,t,n,r){const[o,a]=Qr.backend_util.computeOutAndReduceShapes(e,r),i=Object(Qr.upcastType)(t,"int32"),s=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(o),i),c=Qr.util.sizeFromShape(a);for(let e=0;e<s.length;++e){const t=e*c;let r=1;for(let e=0;e<c;++e)r*=n[t+e];s[e]=r}return{outVals:s,outShape:o,outDtype:i}}const Mc={kernelName:Qr.Prod,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;Jr(o,"prod");const s=o.shape.length,c=Qr.util.parseAxisParam(a,o.shape),u=Qr.backend_util.getAxesPermutation(c,s);let l=c,d=o;const p=[];null!=u&&(d=Xo({inputs:{x:o},backend:n,attrs:{perm:u}}),p.push(d),l=Qr.backend_util.getInnerMostAxes(l.length,s));const h=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=Dc(d.shape,d.dtype,h,l);let b=m;return i&&(b=Qr.backend_util.expandShapeToKeepDim(m,c)),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(b,g,f)}};function $c(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Qr.util.makeZerosTypedArray(0,r);const o=Math.abs(Math.ceil((t-e)/n)),a=Qr.util.makeZerosTypedArray(o,r);t<e&&1===n&&(n=-1),a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+n;return a}const Pc={kernelName:Qr.Range,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,dtype:a,step:i}=n,s=$c(r,o,i,a);return t.makeTensorInfo([s.length],a,s)}},Lc=no(Qr.Reciprocal,(e=>1/e)),Fc={kernelName:Qr.Reciprocal,backendName:"cpu",kernelFunc:Lc};const zc={kernelName:Qr.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;Jr(o,"resizeBilinear");const c=Qr.util.computeStrides(o.shape),[u,l]=s,[d,p,h,f]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(Qr.util.sizeFromShape([d,u,l,f])),b=[a&&u>1?p-1:p,a&&l>1?h-1:h],y=[a&&u>1?u-1:u,a&&l>1?l-1:l];let A=0;const v=b[0]/y[0],x=b[1]/y[1];for(let e=0;e<d;e++)for(let t=0;t<u;t++){let n;n=i?v*(t+.5)-.5:v*t;const r=Math.max(0,Math.floor(n)),o=n-r,a=Math.min(p-1,Math.ceil(n)),s=e*c[0]+r*c[1],u=e*c[0]+a*c[1];for(let e=0;e<l;e++){let t;t=i?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(h-1,Math.ceil(t)),l=s+n*c[2],d=u+n*c[2],p=s+a*c[2],b=u+a*c[2];for(let e=0;e<f;e++){const t=m[l+e],n=m[d+e],a=t+(m[p+e]-t)*r,i=a+(n+(m[b+e]-n)*r-a)*o;g[A++]=i}}}return n.makeTensorInfo([d,u,l,f],"float32",g)}};const Uc={kernelName:Qr.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;Jr([a,o],"resizeBilinearGrad");const s=Qr.util.computeStrides(o.shape),[c,u,l,d]=o.shape,[,p,h]=a.shape,f=new Float32Array(c*u*l*d),m=[i&&p>1?u-1:u,i&&h>1?l-1:l],g=[i&&p>1?p-1:p,i&&h>1?h-1:h],b=m[0]/g[0],y=m[1]/g[1],A=n.data.get(a.dataId).values;let v=0;for(let e=0;e<c;e++){const t=e*s[0];for(let e=0;e<p;e++){const n=e*b,r=Math.floor(n),o=Math.min(Math.ceil(n),u-1),a=t+r*s[1],i=t+o*s[1],c=n-r,p=1-c;for(let e=0;e<h;e++){const t=e*y,n=Math.floor(t),r=Math.min(Math.ceil(t),l-1),o=t-n,u=1-o,h=a+n*s[2],m=a+r*s[2],g=i+n*s[2],b=i+r*s[2],x=p*u,k=p*o,w=c*u,C=c*o;for(let e=0;e<d;e++){const t=A[v++];f[h+e]+=t*x,f[m+e]+=t*k,f[g+e]+=t*w,f[b+e]+=t*C}}}}return n.makeTensorInfo([c,l,u,d],"float32",f)}};const Wc={kernelName:Qr.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;Jr(o,"resizeNearestNeighbor");const c=Qr.util.computeStrides(o.shape),[u,l]=s,[d,p,h,f]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*l*f),b=[a&&u>1?p-1:p,a&&l>1?h-1:h],y=[a&&u>1?u-1:u,a&&l>1?l-1:l],A=b[0]/y[0],v=b[1]/y[1];let x=0;for(let e=0;e<d;e++){const t=e*c[0];for(let e=0;e<u;e++){const n=i?A*(e+.5):A*e;let r=Math.min(p-1,a?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const o=t+r*c[1];for(let e=0;e<l;e++){const t=i?v*(e+.5):v*e;let n=Math.min(h-1,a?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=o+n*c[2];for(let e=0;e<f;e++){const t=m[r+e];g[x++]=t}}}}return n.makeTensorInfo([d,u,l,f],o.dtype,g)}};const Vc={kernelName:Qr.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;Jr([a,o],"resizeNearestNeighborGrad");const s=Qr.util.computeStrides(o.shape),c=Qr.util.computeStrides(a.shape),[u,l,d,p]=o.shape,[,h,f]=a.shape,m=new Float32Array(u*l*d*p),g=n.data.get(a.dataId).values,b=[i&&h>1?l-1:l,i&&f>1?d-1:d],y=[i&&h>1?h-1:h,i&&f>1?f-1:f],A=b[0]/y[0],v=b[1]/y[1],x=1/A,k=1/v,w=2*Math.ceil(x)+2,C=2*Math.ceil(k)+2;for(let e=0;e<u;e++){const t=e*s[0];for(let e=0;e<l;e++){const n=t+e*s[1],r=Math.floor(e*x),o=Math.floor(r-w/2);for(let r=0;r<d;r++){const a=n+r*s[2],u=Math.floor(r*k),b=Math.floor(u-C/2);for(let n=0;n<p;n++){let s=0;for(let a=0;a<w;a++){const u=a+o;if(u<0||u>=h)continue;const p=t+u*c[1],m=u*A;if(e===Math.min(l-1,i?Math.round(m):Math.floor(m)))for(let e=0;e<C;e++){const t=e+b;if(t<0||t>=f)continue;const o=p+t*c[2],a=t*v;r===Math.min(d-1,i?Math.round(a):Math.floor(a))&&(s+=g[o+n])}}m[a+n]=s}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}};const qc={kernelName:Qr.Reverse,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r;Jr(o,"reverse");const i=o.shape.length,s=Qr.util.parseAxisParam(a,o.shape);if(0===i)return io({inputs:{x:o},backend:n});const c=new Qr.TensorBuffer(o.shape,o.dtype),u=n.bufferSync(o);for(let e=0;e<c.size;e++){const t=c.indexToLoc(e),n=t.slice();s.forEach((e=>n[e]=o.shape[e]-1-n[e])),c.set(u.get(...n),...t)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}},Gc={kernelName:Qr.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:o,fillValue:a,center:i}=t,s=n,c=Qr.util.getTypedArrayFromDType(r.dtype,Qr.util.sizeFromShape(r.shape)),[u,l,d,p]=r.shape,[h,f]=Qr.backend_util.getImageCenter(i,l,d),m=Math.sin(o),g=Math.cos(o),b=s.data.get(r.dataId).values;for(let e=0;e<u;e++){const t=e*d*l*p;for(let e=0;e<l;e++){const n=e*(d*p);for(let r=0;r<d;r++){const o=r*p;for(let i=0;i<p;i++){const s=[u,e,r,i],y=s[2],A=s[1];let v=(y-h)*g-(A-f)*m,x=(y-h)*m+(A-f)*g;v=Math.round(v+h),x=Math.round(x+f);let k=a;if("number"!=typeof a&&(k=3===i?255:a[i]),v>=0&&v<d&&x>=0&&x<l){k=b[t+x*(d*p)+v*p+i]}c[t+n+o+i]=k}}}}return{dataId:s.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Hc=no(Qr.Round,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),Kc={kernelName:Qr.Round,backendName:"cpu",kernelFunc:Hc},Yc=Ao((e=>1/Math.sqrt(e))),Xc=ro(Qr.Rsqrt,Yc),Zc={kernelName:Qr.Rsqrt,backendName:"cpu",kernelFunc:Xc};function Qc(e,t,n,r,o,a,i,s,c,u){const l=[r/o,o],d=e.values,p=t.values;if(0===r)return Object(Qr.buffer)(n,t.dtype);const h=Object(Qr.buffer)(l,t.dtype);h.values.fill(c);for(let e=0;e<a;e++){const a=[];let c=0;for(let t=0;t<i;t++){const n=d[e*i+t];a.push(n),c+=n*s[t]}if(c<0||c>=r/o)throw new Error(`Invalid indices: ${a} does not index into ${n}`);for(let n=0;n<o;n++)u?h.values[c*o+n]+=p[e*o+n]:h.values[c*o+n]=0===t.rank?p[0]:p[e*o+n]}return h}const Jc={kernelName:Qr.ScatterNd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=Qr.backend_util.calculateShapes(a,o,i),p=Qc(n.bufferSync(o),n.bufferSync(a),i,d,u,c,s,l,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}};const eu={kernelName:Qr.Select,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t;Jr([r,o,a],"select");const i=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,l=Object(Qr.upcastType)(o.dtype,a.dtype),d=Qr.util.makeZerosTypedArray(Qr.util.sizeFromShape(o.shape),l);let p=0;const h=0===i||i>1||1===o.shape.length?1:Qr.util.sizeFromShape(o.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<h;t++)1===s[e]?d[p++]=c[e]:d[p++]=u[e];return n.makeTensorInfo(o.shape,l,d)}},tu=Qr.backend_util.SELU_SCALEALPHA,nu=Qr.backend_util.SELU_SCALE,ru=no(Qr.Selu,(e=>e>=0?nu*e:tu*(Math.exp(e)-1))),ou={kernelName:Qr.Selu,backendName:"cpu",kernelFunc:ru},au=no(Qr.Sign,(e=>e<0?-1:e>0?1:0)),iu={kernelName:Qr.Sign,backendName:"cpu",kernelFunc:au},su=no(Qr.Sin,(e=>Math.sin(e))),cu={kernelName:Qr.Sin,backendName:"cpu",kernelFunc:su},uu=no(Qr.Sinh,(e=>Math.sinh(e))),lu={kernelName:Qr.Sinh,backendName:"cpu",kernelFunc:uu},du=Math.log(1.1920928955078125e-7)+2,pu=no(Qr.Softplus,(e=>{const t=e>-du,n=e<du,r=Math.exp(e);let o;return o=n?r:t?e:Math.log(1+r),o})),hu={kernelName:Qr.Softplus,backendName:"cpu",kernelFunc:pu};const fu={kernelName:Qr.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;Jr([o],"spaceToBatchND");const s=Qr.util.sizeFromShape(a),c=[[0,0]];c.push(...i);for(let e=1+a.length;e<o.shape.length;++e)c.push([0,0]);const u=Rc.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),l=Qr.backend_util.getReshaped(u.shape,a,s,!1),d=Qr.backend_util.getPermuted(l.length,a.length,!1),p=Qr.backend_util.getReshapedPermuted(u.shape,a,s,!1),h=$o({inputs:{x:u},backend:n,attrs:{shape:l}}),f=Xo({inputs:{x:h},backend:n,attrs:{perm:d}}),m=$o({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}};function mu(e,t,n,r,o,a,i){const s=t[0],c=a[0],u=new Array(c),l=new Array(s),d=t[1];if(0===c){if(0!==s)throw new Error(`Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = ${s}`);return[Qr.util.getArrayFromDType(n,0),[0,d],Qr.util.getArrayFromDType(o,0),u,l]}let p=!0,h=0;const f=new Array(c).fill(0);for(let t=0;t<s;++t){const n=e[t*d];if(n<0)throw new Error(`indices(${t}, 0) is invalid: ${n} < 0`);if(n>=c)throw new Error(`indices(${t}, 0) is invalid: ${n} >= ${c}`);++f[n],p=p&&n>=h,h=n}let m=!0;for(let e=0;e<c;++e){const t=0===f[e];u[e]=t,m=m&&!t,f[e]=Math.max(f[e],1),e>0&&(f[e]+=f[e-1])}if(m&&p){const t=e,n=r;for(let e=0;e<s;++e)l[e]=e;return[t,[s,d],n,u,l]}{const t=f[c-1],a=Qr.util.getArrayFromDType(n,t*d),p=Qr.util.getArrayFromDType(o,t),h=new Array(c).fill(0);for(let t=0;t<s;++t){const n=e[t*d],o=h[n],i=(0===n?0:f[n-1])+o;h[n]++;for(let n=0;n<d;++n)a[i*d+n]=e[t*d+n];p[i]=r[t],l[t]=i}for(let e=0;e<c;++e){if(0===h[e]){const t=0===e?0:f[e-1];a[t*d+0]=e;for(let e=1;e<d;++e)a[t*d+e]=0;p[t]=i}}return[a,[t,d],p,u,l]}}const gu={kernelName:Qr.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==o.shape.length)throw new Error(`Values must be a vector, saw:\n        ${o.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const s=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values[0],[d,p,h,f,m]=mu(s,r.shape,r.dtype,c,o.dtype,u,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],o.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function bu(e,t,n,r,o){const a=Qr.util.sizeFromShape(r),i=t[0],s=o.length,c=[];let u=1,l=-1;for(let e=0;e<s;++e){const t=o[e];if(-1===t){if(-1!==l)throw new Error(`only one output dimension may be -1, not both ${l} and ${e}`);l=e,c.push(1)}else{if(t<0)throw new Error(`size ${e} must be non-negative, not ${t}`);u*=t,c.push(t)}}if(-1!==l){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(a/u);if(u*e!==a)throw new Error(`Input to reshape is a SparseTensor with ${a}\n          dense values, but the requested shape requires a multiple of ${u}. inputShape=${r} outputShape= ${c}`);c[l]=e}const d=Qr.util.sizeFromShape(c);if(d!==a)throw new Error(`Input to reshape is a tensor with ${a} dense values, but the requested shape has ${d}. inputShape=${r} outputShape=${c}`);const p=r.length,h=[];if(p>0){h[p-1]=1;for(let e=p-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const f=[];if(s>0){f[s-1]=1;for(let e=s-2;e>=0;--e)f[e]=f[e+1]*c[e+1]}const m=Qr.util.getArrayFromDType(n,i*s);for(let t=0;t<i;++t){let n=0;for(let r=0;r<p;++r)n+=e[t*p+r]*h[r];for(let e=0;e<s;++e)m[t*s+e]=Math.trunc(n/f[e]),n%=f[e]}return[m,[i,s],c]}const yu={kernelName:Qr.SparseReshape,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==o.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${o.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.data.get(o.dataId).values),s=n.data.get(r.dataId).values,c=Array.from(n.data.get(a.dataId).values),[u,l,d]=bu(s,r.shape,r.dtype,i,c);return[n.makeTensorInfo(l,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};function Au(e,t,n,r,o,a=!1,i=0){const s=r.length;if(s!==o.length)throw new Error("segmentIds and indices should have same size.");const c=[t[0],e.length/t[0]],u=c[1],l=s>0?o[s-1]+1:0;if(l<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=l;const p=d.reduce(((e,t)=>e*t),1),h=Qr.util.getArrayFromDType(n,p);if(0===s)return l>0&&h.fill(i),[h,d];if(l<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,b=o[f];for(;;){let t=0;if(m<s){if(t=o[m],b===t){++m;continue}if(b>=t)throw new Error("segment ids are not increasing")}if(b<0||b>=l)throw new Error(`Segment id ${b} out of range [0, ${l}), possibly because segmentIds input is not sorted.`);b>g&&h.fill(i,g*u,b*u);for(let t=f;t<m;++t){const n=r[t];if(n<0||n>=c[0])throw new Error(`Bad: indices[${t}] == ${r[t]} out of range [0, ${c[0]})`);for(let t=0;t<u;t++)h[b*u+t]+=e[n*u+t]}if(a)for(let e=0;e<u;e++)h[b*u+e]/=m-f;if(f=m,++m,g=b+1,b=t,m>s)break}return g<l&&h.fill(i,g*u,l*u),[h,d]}const vu={kernelName:Qr.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${a.shape}`);const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,[u,l]=Au(i,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(l,r.dtype,u)}};const xu={kernelName:Qr.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${a.shape}`);const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,[u,l]=Au(i,r.shape,r.dtype,s,c);return n.makeTensorInfo(l,r.dtype,u)}};const ku={kernelName:Qr.SparseToDense,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=Qr.backend_util.calculateShapes(a,o,s),h=Qc(n.bufferSync(o),n.bufferSync(a),s,p,l,u,c,d,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}};const wu={kernelName:Qr.SplitV,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=Qr.util.parseAxisParam(i,o.shape)[0],c=Qr.backend_util.prepareSplitSize(o,a,s),u=new Array(o.shape.length).fill(0),l=o.shape.slice();return c.map((e=>{const t=[...l];t[s]=e;const r=ka({inputs:{x:o},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},Cu=Ao((e=>Math.sqrt(e))),Su=no(Qr.Sqrt,(e=>Math.sqrt(e))),Ou={kernelName:Qr.Sqrt,backendName:"cpu",kernelFunc:Su},Eu={kernelName:Qr.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;Jr(n,"square");const o=r.data.get(n.dataId).values,a=new Float32Array(o.length);for(let e=0;e<o.length;++e){const t=o[e];a[e]=t*t}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},Iu=lo(((e,t)=>{const n=e-t;return n*n})),Tu=Ro(Qr.SquaredDifference,Iu),Nu={kernelName:Qr.SquaredDifference,backendName:"cpu",kernelFunc:Tu},Ru=no(Qr.Step,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),ju={kernelName:Qr.Step,backendName:"cpu",kernelFunc:Ru};function Bu(e,t,n,r){const o=Object(Qr.buffer)(e,t.dtype);for(let e=0;e<o.size;e++){const a=o.indexToLoc(e),i=new Array(a.length);for(let e=0;e<i.length;e++)i[e]=a[e]*n[e]+r[e];o.set(t.get(...i),...a)}return o}const _u={kernelName:Qr.StridedSlice,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=r;Jr(o,"stridedSlice");const{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:A,strides:v}=Qr.slice_util.sliceInfo(o.shape,a,i,s,c,u,l,d,p);let x;if(m)x=$o({inputs:{x:o},backend:n,attrs:{shape:f}});else if(g||b){Qr.util.assert(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=Qr.slice_util.computeOutShape(y,A,v),t=ka({inputs:{x:o},backend:n,attrs:{begin:y,size:e}});x=$o({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=Bu(h,n.bufferSync(o),v,y);x=n.makeTensorInfo(f,e.dtype,e.values)}return x}};class Du{constructor(e,t,n,r,o,a){this.separator=Qr.util.encodeString(e),this.nGramWidths=t,this.leftPad=Qr.util.encodeString(n),this.rightPad=Qr.util.encodeString(r),this.padWidth=o,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,o,a){for(let i=0;i<o;++i){const s=this.getPadWidth(a),c=Math.max(0,s-i),u=Math.max(0,s-(o-(i+1))),l=a-(c+u),d=t+(c>0?0:i-s);let p=0;p+=c*this.leftPad.length;for(let t=0;t<l;++t)p+=e[d+t].length;p+=u*this.rightPad.length;p+=(c+u+l-1)*this.separator.length,n[r+i]=new Uint8Array(p);const h=n[r+i];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<c;++e)m(this.leftPad),m(this.separator);for(let t=0;t<l-1;++t)m(e[d+t]),m(this.separator);if(l>0){m(e[d+l-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let o=1;o<r;++o){let r=t[o]>=e;if(r=r&&t[o]<=n,!r)throw new Error(`Invalid split value ${t[o]}, must be in [${e}, ${n}]`);e=t[o]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const o=r-1,a=Qr.util.getArrayFromDType("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=o;++e)a[e]=0;return[e,a]}a[0]=0;for(let e=1;e<=o;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),a[e]=a[e-1]+r}const i=new Array(a[o]);for(let n=0;n<o;++n){const r=t[n];let o=a[n];if(this.nGramWidths.forEach((a=>{const s=t[n+1]-t[n],c=this.getNumNGrams(s,a);this.createNGrams(e,r,i,o,c,a),o+=c})),this.preserveShort&&o===a[n]){const a=t[n+1]-t[n];if(0===a)continue;const s=a+2*this.padWidth,c=1;this.createNGrams(e,r,i,o,c,s)}}return[i,a]}}function Mu(e,t,n,r,o,a,i,s){return new Du(n,r,o,a,i,s).compute(e,t)}const $u={kernelName:Qr.StringNGrams,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:c,preserveShortSequences:u}=r,{data:l,dataSplits:d}=t,p=n.data.get(l.dataId).values,h=n.data.get(d.dataId).values,[f,m]=Mu(p,h,o,a,i,s,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function Pu(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let a=e.indexOf(o);for(;-1!==a;){const t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(o)}return void(n&&0===e.length||r.push(e))}let o=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(o,a);n&&0===t.length||r.push(t),o=a+1}}function Lu(e,t,n){const r=e.length,o=[];let a=0,i=0;const s=new Array(r);for(let c=0;c<r;++c){const r=o.length;Pu(e[c],t,n,o);const u=o.length-r;s[c]=u,a+=u,i=Math.max(i,u)}const c=Qr.util.getArrayFromDType("int32",2*a),u=new Array(a),l=[r,i];let d=0;for(let e=0;e<r;++e)for(let t=0;t<s[e];++t)c[2*d]=e,c[2*d+1]=t,u[d]=o[d],++d;return[c,u,l]}const Fu={kernelName:Qr.StringSplit,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values[0],[u,l,d]=Lu(s,c,o),p=l.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function zu(e,t){const n=Qr.util.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Qr.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}const Uu={kernelName:Qr.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=zu(n.data.get(a.dataId).values,o);return n.makeTensorInfo(a.shape,"int32",i)}},Wu=no(Qr.Tan,(e=>Math.tan(e))),Vu={kernelName:Qr.Tan,backendName:"cpu",kernelFunc:Wu},qu=no(Qr.Tanh,(e=>Math.tanh(e))),Gu={kernelName:Qr.Tanh,backendName:"cpu",kernelFunc:qu};function Hu(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=Object(Qr.buffer)(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),o=new Array(e.rank);for(let t=0;t<o.length;t++)o[t]=n[t]%e.shape[t];const a=e.locToIndex(o);r.values[t]=e.values[a]}return r}const Ku={kernelName:Qr.Tile,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;Jr(o,"tile");const i=Hu(n.bufferSync(o),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},Yu=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function Xu(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,i=Math.log(o),s=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*s*(o-s)/o)*Math.sign(a-o/2);Xu(e,t,Math.max(n,Math.floor(t-a*s/o+c)),Math.min(r,Math.floor(t+(o-a)*s/o+c)))}const o=e[t];let a=n,i=r;for(Qr.util.swap(e,n,t),Yu(e[r],o)>0&&Qr.util.swap(e,n,r);a<i;){for(Qr.util.swap(e,a,i),a++,i--;Yu(e[a],o)<0;)a+=1;for(;Yu(e[i],o)>0;)i-=1}0===Yu(e[n],o)?Qr.util.swap(e,n,i):(i+=1,Qr.util.swap(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function Zu(e,t,n,r,o){const a=t[t.length-1],[i,s]=[e.length/a,a],c=Qr.util.getTypedArrayFromDType(n,i*r),u=Qr.util.getTypedArrayFromDType("int32",i*r);for(let t=0;t<i;t++){const n=t*s,a=e.subarray(n,n+s);let i=new Array(a.length);a.forEach(((e,t)=>i[t]={value:e,index:t})),r<i.length&&(Xu(i,r),i=i.slice(0,r)),o&&i.sort(Yu);const l=t*r,d=c.subarray(l,l+r),p=u.subarray(l,l+r);for(let e=0;e<r;e++)d[e]=i[e].value,p[e]=i[e].index}const l=t.slice();return l[l.length-1]=r,[Object(Qr.buffer)(l,n,c),Object(Qr.buffer)(l,"int32",u)]}const Qu={kernelName:Qr.TopK,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r;Jr(o,"topk");const s=n.data.get(o.dataId).values,[c,u]=Zu(s,o.shape,o.dtype,a,i);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const Ju={kernelName:Qr.Transform,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:c,outputShape:u}=n,[l,d,p,h]=o.shape,[f,m]=null!=u?u:[d,p],g=[l,f,m,h],b=Qr.util.computeStrides(o.shape),y=b[0],A=b[1],v=b[2],x=Qr.util.getTypedArrayFromDType(o.dtype,Qr.util.sizeFromShape(g));x.fill(c);const k=r.data.get(o.dataId).values,w=r.data.get(a.dataId).values;for(let e=0;e<l;++e){const t=1===a.shape[0]?w:w.subarray(8*e,8*e+8);for(let n=0;n<f;++n)for(let r=0;r<m;++r)for(let o=0;o<h;++o){let a;const u=t[6]*r+t[7]*n+1;if(0===u)continue;const l=(t[0]*r+t[1]*n+t[2])/u,h=(t[3]*r+t[4]*n+t[5])/u,f=el(l,p,s),m=el(h,d,s);switch(i){case"nearest":a=nl(k,d,p,y,A,v,e,m,f,o,c);break;case"bilinear":a=rl(k,d,p,y,A,v,e,m,f,o,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}x[e*y+n*A+r*v+o]=a}return r.makeTensorInfo(g,o.dtype,x)}return{dataId:r.write(x,g,o.dtype),shape:o.shape,dtype:o.dtype}}};function el(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Qr.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return Qr.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Qr.util.clamp(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function tl(e,t,n,r,o,a,i,s,c,u,l){return 0<=s&&s<t&&0<=c&&c<n?e[i*r+s*o+c*a+u]:l}function nl(e,t,n,r,o,a,i,s,c,u,l){return tl(e,t,n,r,o,a,i,Math.round(s),Math.round(c),u,l)}function rl(e,t,n,r,o,a,i,s,c,u,l){const d=Math.floor(s),p=Math.floor(c),h=d+1,f=p+1;return(h-s)*((f-c)*tl(e,t,n,r,o,a,i,d,p,u,l)+(c-p)*tl(e,t,n,r,o,a,i,d,f,u,l))+(s-d)*((f-c)*tl(e,t,n,r,o,a,i,h,p,u,l)+(c-p)*tl(e,t,n,r,o,a,i,h,f,u,l))}function ol(e,t,n,r){const o=Qr.util.parseAxisParam(t,n)[0],a=[1,n[0],1];for(let e=0;e<o;e++)a[0]*=n[e];a[1]=n[o];for(let e=o+1;e<n.length;e++)a[2]*=n[e];const i={},s=new Int32Array(n[o]),c=new Qr.TensorBuffer(a,r,e),u=[],l=1===a[0]&&1===a[2];for(let t=0;t<n[o];t++){let n;if(l)n=e[t].toString();else{const e=[];for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)e.push(c.get(n,t,r));n=e.join(",")}if(void 0!==i[n])s[t]=i[n];else{const e=Object.keys(i).length;i[n]=e,s[t]=e,u.push(t)}}const d=a.slice();d[1]=Object.keys(i).length;const p=new Qr.TensorBuffer(d,r);u.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)p.set(c.get(n,e,r),n,t,r)}));const h=n.slice();return h[o]=d[1],{outputValues:p.values,outputShape:h,indices:s}}const al={kernelName:Qr.Unique,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;Jr(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:s,outputShape:c,indices:u}=ol(i,o,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const il={kernelName:Qr.Unpack,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o.shape.length,s=o.shape[a],c=new Array(i-1);let u=0;for(let e=0;e<i;e++)e!==a&&(c[u++]=o.shape[e]);const l=new Array(i).fill(0),d=o.shape.slice();d[a]=1;const p=new Array(s);for(let e=0;e<p.length;e++){l[a]=e;const t=ka({inputs:{x:o},backend:n,attrs:{begin:l,size:d}});p[e]=$o({inputs:{x:t},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(t)}return p}};const sl={kernelName:Qr.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r;Jr(o,"unsortedSegmentSum");const s=[],c=[],u=o.shape.length-a.shape.length;let l=a;for(let e=0;e<u;++e){const t=Ri({inputs:{input:l},backend:n,attrs:{dim:e+1}});l=t,c.push(t)}for(let e=0;e<i;++e){const t=Qr.util.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),a=yi({inputs:{a:r,b:l},backend:n}),i=To({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=di({inputs:{a:i,b:o},backend:n}),d=hi({inputs:{x:u},backend:n,attrs:{axis:0,keepDims:!1}});s.push(d),c.push(r),c.push(a),c.push(i),c.push(u),c.push(d)}const d=Tc({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},cl=[zo,Wo,qo,Ho,Mo,Ko,Qo,Jo,ea,ta,ra,aa,sa,la,pa,ga,ba,ya,Aa,Fo,va,Ca,Ea,Ia,No,Ra,Ba,So,_a,La,Ua,Wa,za,qa,Ga,Va,Ka,Xa,Za,Qa,Ja,ei,ni,ri,oi,ai,ii,ci,si,Pi,mi,ao,gi,Ai,Ei,Ni,ji,Di,Gi,Ki,Yi,Qi,ts,ns,rs,as,ss,ls,hs,so,fs,$a,gs,ys,vs,uo,ws,Os,Is,Rs,Bs,Ms,Ps,zs,Us,Ws,Ys,Xs,Zs,Qs,Js,ec,Gs,tc,nc,ac,ic,uc,hc,pi,mc,bc,Ac,xc,Cc,Sc,Ic,Nc,Rc,_c,fo,Mc,Pc,Io,Fc,go,yo,Po,zc,Uc,Wc,Vc,qc,Gc,Kc,Zc,Jc,eu,ou,ko,iu,cu,lu,wa,pc,hu,fu,gu,yu,vu,xu,ku,wu,Ou,Eu,Nu,ju,_u,$u,Fu,Uu,Ui,fi,Vu,Gu,Ku,Qu,Zo,Ju,al,il,sl,Ec];for(const e of cl)Object(Qr.registerKernel)(e);const ul={},ll={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dl(e){if(!(e in ul)){const t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete ul[e]}),!1),1===e)return t.getContext("webgl",ll)||t.getContext("experimental-webgl",ll);return t.getContext("webgl2",ll)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;ul[e]=t}const t=ul[e];return t.isContextLost()?(delete ul[e],dl(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),ul[e])}var pl,hl,fl;function ml(e,t){return[t,e]}function gl(e){const t=Qr.util.sizeFromShape(e),n=Math.ceil(t/4);return Qr.util.sizeToSquarishShape(n)}function bl(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function yl(e,t){const n=e;let r,o,a,i,s,c,u,l,d,p;return 2===Object(Qr.env)().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,a=n.RGBA16F,i=n.RGBA32F,s=n.RED,u=4,l=1,d=n.HALF_FLOAT,p=n.FLOAT):(r=e.RGBA,o=e.RGBA,a=e.RGBA,i=n.RGBA,s=e.RGBA,u=4,l=4,d=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT),c=e.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:c,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:p}}function Al(e,t){const n=t();return Object(Qr.env)().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(pl||(pl={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(hl||(hl={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(fl||(fl={}));function vl(e){return!!(Object(Qr.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function xl(e,t){return Nl(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}function kl(e,t){const n=Nl(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(Al(e,(()=>e.shaderSource(n,t))),Al(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){const n=wl.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map(((e,t)=>Qr.util.rightPad((t+1).toString(),a)+e));let s=0;for(let e=0;e<i.length;e++)s=Math.max(i[e].length,s);const c=i.slice(0,r-1),u=i.slice(r-1,r),l=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${Qr.util.rightPad(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const wl=/ERROR: [0-9]+:([0-9]+):/g;function Cl(e,t){if(Al(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Sl(e,t,n,r,o,a,i){const s=e.getAttribLocation(t,n);return-1!==s&&(Al(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),Al(e,(()=>e.vertexAttribPointer(s,o,e.FLOAT,!1,a,i))),Al(e,(()=>e.enableVertexAttribArray(s))),!0)}function Ol(e,t,n,r){Al(e,(()=>function(e,t,n){Rl(e,n),Al(e,(()=>e.activeTexture(e.TEXTURE0+n))),Al(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),Al(e,(()=>e.uniform1i(n,r)))}function El(e,t,n){Al(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),Al(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function Il(e,t){Al(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),Al(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function Tl(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function Nl(e,t,n){const r=Al(e,(()=>t()));if(null==r)throw new Error(n);return r}function Rl(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function jl(e,t=2){return Qr.util.sizeFromShape(e.slice(0,e.length-t))}function Bl(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function _l(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[jl(e),...Bl(e)]),t}function Dl(e){return e%2==0}function Ml(e,t){if(e=e.slice(-2),t=t.slice(-2),Qr.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Dl(n)&&Dl(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Dl(e[0])&&Dl(t[0])}let $l,Pl;function Ll(e,t){return null!=e.getExtension(t)}function Fl(e){try{if(null!=dl(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function zl(e){if(0===e)return!1;const t=dl(e);if(1!==e){if(Ll(t,"EXT_color_buffer_float"))return Ul(t);const e="EXT_color_buffer_half_float";if(Ll(t,e)){const n=t.getExtension(e);return function(e,t){const n=yl(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const o=1,a=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,n)}return!1}if(!Ll(t,"OES_texture_float"))return!1;if(!Ll(t,"WEBGL_color_buffer_float"))return!1;return Ul(t)}function Ul(e){const t=yl(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function Wl(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Qr.util.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const Vl=Object(Qr.env)();function ql(){let e,t,n,r,o,a,i,s,c,u;return 2===Object(Qr.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:c,defineRound:u}}function Gl(e,t,n="index"){const r=Qr.util.computeStrides(t);return r.map(((t,o)=>`${`int ${e[o]} = ${n} / ${t}`}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${t}`:`index -= ${e[o]} * ${t}`};`)).join("")}function Hl(e,t,n="index"){const r=Qr.util.computeStrides(t);return r.map(((t,o)=>`${`int ${e[o]} = ${n} / outShapeStrides[${o}]`}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * outShapeStrides[${o}]`:`index -= ${e[o]} * outShapeStrides[${o}]`};`)).join("")}function Kl(e,t,n="index"){const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),o=new Array(n-1);o[n-2]=r[n-1];for(let e=n-3;e>=0;--e)o[e]=`(${o[e+1]} * ${r[e+1]})`;return o}(e.map(((e,t)=>t)),t);return r.map(((t,o)=>`${`int ${e[o]} = ${n} / ${r[o]}`}; ${o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${r[o]}`:`index -= ${e[o]} * ${r[o]}`};`)).join("")}function Yl(e){const t=Qr.util.computeStrides(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}Vl.registerFlag("HAS_WEBGL",(()=>Vl.getNumber("WEBGL_VERSION")>0)),Vl.registerFlag("WEBGL_VERSION",(()=>Fl(2)?2:Fl(1)?1:0)),Vl.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Vl.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Vl.get("WEBGL_VERSION"))),Vl.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Vl.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Vl.registerFlag("WEBGL_PACK",(()=>Vl.getBool("HAS_WEBGL"))),Vl.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_CLIP",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_PACK_REDUCE",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_CONV_IM2COL",(()=>Vl.getBool("WEBGL_PACK"))),Vl.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==$l){const t=dl(e);$l=t.getParameter(t.MAX_TEXTURE_SIZE)}return $l}(Vl.getNumber("WEBGL_VERSION")))),Vl.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==Pl){const t=dl(e);Pl=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Pl)}(Vl.getNumber("WEBGL_VERSION")))),Vl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=Vl.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=dl(e);return t=Ll(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Ll(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),Vl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Vl.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Qr.device_util.isMobile())),Vl.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=dl(e);if(1===e){if(!Ll(t,"OES_texture_float"))return!1}else if(!Ll(t,"EXT_color_buffer_float"))return!1;return Ul(t)}(Vl.getNumber("WEBGL_VERSION")))),Vl.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Vl.getBool("WEBGL_FORCE_F16_TEXTURES")&&Vl.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Vl.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>zl(Vl.getNumber("WEBGL_VERSION")))),Vl.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=Vl.getNumber("WEBGL_VERSION"))&&null!=dl(e).fenceSync;var e})),Vl.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Vl.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Vl.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),Vl.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Qr.device_util.isMobile()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),Vl.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Vl.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Vl.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Vl.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128));const Xl="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:Zl}=Qr.backend_util;function Ql(e,t,n){const r=[];if(e.forEach((e=>{const t=Qr.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=ud(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const o=r.join("\n"),a=e.map((e=>function(e,t,n=!1,r){let o="";o+=n?ed(e,r):Jl(e,r);const a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(o+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=Zl(e.shapeInfo.logicalShape,t.logicalShape),c=cd(i),u=i-a;let l;const d=["x","y","z","w","u","v"];l=0===a?"":i<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${d[e+u]} = 0;`)).join("\n");let p="";p=i<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${d[t+u]}`)).join(", ");let h="return outputValue;";const f=1===Qr.util.sizeFromShape(e.shapeInfo.logicalShape),m=1===Qr.util.sizeFromShape(t.logicalShape);if(1!==a||f||m){if(f&&!m)h=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=a-2,t=a-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?h="return vec4(outputValue.x);":s.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${o}() {\n      ${c} coords = getOutputCoords();\n      ${l}\n      vec4 outputValue = get${r}(${p});\n      ${h}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&Qr.util.arraysEqual(i,a))return`\n      float ${o}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=cd(c),l=Zl(e.shapeInfo.logicalShape,t.logicalShape),d=c-s;let p;const h=["x","y","z","w","u","v"];p=0===s?"":c<2&&l.length>=1?"coords = 0;":l.map((e=>`coords.${h[e+d]} = 0;`)).join("\n");let f="";f=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+d]}`)).join(", ");return`\n    float ${o}() {\n      ${u} coords = getOutputCoords();\n      ${p}\n      return get${r}(${f});\n    }\n  `}(e,t));return o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,s=ql(),c=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let u,l,d=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${td}\n    ${nd}\n    ${rd}\n  `}(s);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return ad();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Qr.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const o=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),a=o*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),a=o*Math.ceil(e[e.length-2]/2);let i=a,s="",c="b, r, c";for(let t=2;t<e.length-1;t++)i*=e[e.length-t-1],s=`\n      int b${t} = index / ${i};\n      index -= b${t} * ${i};\n    `+s,c=`b${t}, `+c;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec${e.length}(${c});\n    }\n  `}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),l=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(u=function(e,t,n){switch(e.length){case 0:return ad();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(Qr.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${Hl(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=Gl(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${Hl(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=Gl(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=Gl(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=Gl(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i,n.enableShapeUniforms),l=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),n.packedInputs&&(d+=od);return[d,c,l,o,u,a,n.userCode].join("\n")}function Jl(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,a]=e.shapeInfo.texShape;if(1===o&&1===a)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const i=id(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,c]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${c}, ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${sd(e)}\n      }\n    `;const o=e.shapeInfo.texShape,a=o[0],i=o[1];if(1===i&&1===a)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=id(n);if(1===i)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===a)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${i}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&Qr.util.arraysEqual(n,a)){if(t)return`\n      float ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=a[0];return`\n    float ${o}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:i,keptDims:s}=Qr.util.squeezeShape(n),c=i;if(c.length<n.length){const n=["row","col"];return`\n      ${Jl(ld(e,c),t)}\n      float ${o}(int row, int col) {\n        return ${o}(${dd(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${sd(e)}\n      }\n    `;const u=a[0],l=a[1],d=id(r);if(1===l)return t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${o}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${o}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${o}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${u}, ${l}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:s,keptDims:c}=Qr.util.squeezeShape(n),u=s;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${Jl(ld(e,u),t)}\n        float ${o}(int row, int col, int depth) {\n          return ${o}(${dd(n,c)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${i}, 1)));\n        ${sd(e)}\n      }\n    `;const l=e.shapeInfo.texShape,d=l[0],p=l[1],h=e.shapeInfo.flatOffset;if(p===a&&null==h)return t?`\n      float ${o}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${o}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${i}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${p}.0, ${d}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(p===i&&null==h)return t?`\n      float ${o}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=id(r);if(t)return`\n    float ${o}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * ${a} + col * ${i} + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${o}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${i} + depth + ${f};\n        vec2 uv = uvFromFlat(${d}, ${p}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,s=n[1]*i,{newShape:c,keptDims:u}=Qr.util.squeezeShape(n);if(c.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${Jl(ld(e,c),t)}\n      float ${o}(int row, int col, int depth, int depth2) {\n        return ${o}(${dd(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${i}, ${a}, 1)));\n        ${sd(e)}\n      }\n    `;const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===s&&null==l)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${i}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${p}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(h===a&&null==l)return t?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${p}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const b=id(r);if(t)return`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${i} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${h}, index + ${b});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,{newShape:c,keptDims:u}=Qr.util.squeezeShape(t);if(c.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${Jl(ld(e,c))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${dd(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${i}, ${a}, ${o})) +\n          depth3;\n        ${sd(e)}\n      }\n    `;const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];if(h===s&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===o&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=id(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${i} + depth * ${a} +\n          depth2 * ${o} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${p}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:a}=Qr.util.squeezeShape(t);if(o.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${Jl(ld(e,o))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${dd(t,a)});\n      }\n    `}const i=t[5],s=t[4]*i,c=t[3]*s,u=t[2]*c,l=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${u}, ${c}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${sd(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===l&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${c}, ${s}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===i&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=id(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${u} + depth * ${c} +\n          depth2 * ${s} + depth3 * ${i} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ed(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=ql();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=ql();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=a[0],s=a[1],c=ql();if(null!=a&&Qr.util.arraysEqual(n,a))return t?`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${c.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${o}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${i}.0);\n\n        return ${c.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${o}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${c.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=Math.ceil(n[1]/2);return`\n    vec4 ${o}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${l}, ${u[0]}, ${u[1]}, row, col);\n      return ${c.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=[1,2],a=["b","row","col"];return`\n        ${ed(ld(e,n.slice(1)),t)}\n        vec4 ${o}(int b, int row, int col) {\n          return ${o}(${dd(a,r)});\n        }\n      `}const s=ql();if(t)return`\n    vec4 ${o}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const c=i[0],u=i[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return`\n    vec4 ${o}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${c}, ${u}, ${d}, ${l}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=ql();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);\n    }\n  `;const a=e.shapeInfo.logicalShape,i=a.length,s=e.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=c[0],l=c[1],d=Math.ceil(a[i-1]/2);let p=d*Math.ceil(a[i-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let e=2;e<i-1;e++)h=`int b${e}, `+h,p*=a[i-e-1],f=`b${e} * ${p} + `+f;return`\n    vec4 ${r}(${h}) {\n      int index = ${f};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${u});\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const td="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",nd="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",rd="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",od="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function ad(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function id(e){return`offset${e}`}function sd(e){const t=e.name,n=Qr.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function cd(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function ud(e,t,n){const{newShape:r,keptDims:o}=Qr.util.squeezeShape(t),a=t.length,i=e&&3===a&&1===t[0],s=i?t.slice(1):r,c=!e&&a>1&&!Qr.util.arraysEqual(t,n)&&r.length<a||i;return{useSqueezeShape:c,uniformShape:c?s:t,keptDims:o}}function ld(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function dd(e,t){return t.map((t=>e[t])).join(", ")}function pd(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,o=t[n],a=o.shape;if(!Qr.util.arraysEqual(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(e.isUniform&&o.isUniform)return;const i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!Qr.util.arraysEqual(i,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${s} must match`)}))}function hd(e){return Object(Qr.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class fd{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pl.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ql();this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Hl(["r","c","d"],e):Gl(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class md{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pl.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ql();this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Hl(["r","c","d"],e):Gl(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class gd{constructor(e){this.variableNames=["A"],this.outTexUsage=hl.DOWNLOAD;const t=ql();this.outputShape=e,this.userCode=`\n      ${Xl}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class bd{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=hl.DOWNLOAD;const t=ql();this.outputShape=e,this.userCode=`\n      ${Xl}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}class yd{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ql();this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Yl(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${n.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${n.output} = vec4(${r}, 0., 0., 0.);\n      }\n    `}}class Ad{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ql();this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length);let r="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let o=0;o<=1;o++){const a=2*t+o;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${o};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${a}] = values[0];\n            } else if (offset == 1) {\n              result[${a}] = values[1];\n            } else if (offset == 2) {\n              result[${a}] = values[2];\n            } else {\n              result[${a}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Yl(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${o};\n        }\n    `}}function vd(e){const t=ql();return function(e,t){const n=Nl(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(Al(e,(()=>e.shaderSource(n,t))),Al(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function xd(e){return function(e,t){const n=Nl(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Al(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Al(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function kd(e){return function(e,t){const n=Nl(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return Al(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),Al(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function wd(e,t,n,r,o,a){!function(e,t){const n=Object(Qr.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const i=function(e){return Nl(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return Al(e,(()=>e.bindTexture(s,i))),Al(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),Al(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),Al(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),Al(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),Al(e,(()=>e.texImage2D(s,0,r,t,n,0,o,a,null))),Al(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),i}function Cd(e){return e.internalFormatFloat}function Sd(e){return e.internalFormatHalfFloat}function Od(e){return e.downloadTextureFormat}function Ed(e){return e.internalFormatPackedFloat}function Id(e){return e.internalFormatPackedHalfFloat}function Td(e,t,n,r,o,a,i,s){const c=e,u=new Float32Array(function(e,t){const[n,r]=bl(e,t);return n*r*4}(a,i));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}class Nd{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=Object(Qr.env)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){ul[e]=t}(t,e)):this.gl=dl(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===Object(Qr.env)().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=xl(this.gl,e),Ll(this.gl,t))this.textureHalfFloatExtension=xl(this.gl,t);else if(Object(Qr.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Ll(this.gl,r))this.colorBufferHalfFloatExtension=xl(this.gl,r);else if(Object(Qr.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Ll(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Ll(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=xd(this.gl),this.indexBuffer=kd(this.gl),this.framebuffer=function(e){return Nl(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=yl(this.gl,this.textureHalfFloatExtension)}get debug(){return Object(Qr.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Al(e,(()=>e.finish())),Al(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),Al(e,(()=>e.deleteFramebuffer(this.framebuffer))),Al(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),Al(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),Al(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=ml(t,n);return wd(e,o,a,Cd(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=ml(t,n);return wd(e,o,a,Sd(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=ml(t,n);return wd(e,o,a,Od(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){Al(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?Al(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):Al(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),Al(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,o,a){let i,s,c;Al(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,c=a.internalFormatPackedFloat),i.set(o),Al(e,(()=>e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,s,i))),Al(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=bl(t,n);return wd(e,o,a,Id(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=bl(t,n);return wd(e,o,a,Ed(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Il(this.gl,this.framebuffer),this.outputTexture=null),Al(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[o,a]=ml(t,n),i=new Uint8Array(t*n*4);return Al(e,(()=>e.readPixels(0,0,o,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,o,a){return Td(this.gl,e,0,0,0,o,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const o=e.createBuffer();Al(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o)));const a=16*t*n;return Al(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ))),Al(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),Al(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),o}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Object(Qr.env)().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=o}else Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return Al(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl,n=kl(t,e);null==this.vertexShader&&(this.vertexShader=vd(t));const r=function(e){return Nl(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);return Al(t,(()=>t.attachShader(r,this.vertexShader))),Al(t,(()=>t.attachShader(r,n))),function(e,t){if(Al(e,(()=>e.linkProgram(t))),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,r),this.debug&&Cl(t,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return Al(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),Sl(e,t,"clipSpacePos",n,3,20,0)&&Sl(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Al(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Cl(this.gl,this.program),Al(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return Nl(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Al(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Ol(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,o]=bl(t,n);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&Cl(this.gl,this.program),Tl(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),Al(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Al(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=xl(this.gl,2===Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Qr.util.repeatedTry((()=>this.disposed||this.isQueryAvailable(e,Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Qr.util.repeatedTry((()=>(this.pollItems(),0===this.itemsToPoll.length)))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),El(this.gl,e,this.framebuffer),this.debug&&Tl(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(El(this.gl,this.outputTexture,this.framebuffer),this.debug&&Tl(this.gl)):Il(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;El(r,e,this.framebuffer),this.debug&&Tl(r),this.outputTexture=e,Al(r,(()=>r.viewport(0,0,t,n))),Al(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),Al(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:Rd,bincountImpl:jd,bincountReduceImpl:Bd,ceilImpl:_d,concatImpl:Dd,equalImpl:Md,expImpl:$d,expm1Impl:Pd,floorImpl:Ld,gatherNdImpl:Fd,gatherV2Impl:zd,greaterImpl:Ud,greaterEqualImpl:Wd,lessImpl:Vd,lessEqualImpl:qd,linSpaceImpl:Gd,logImpl:Hd,maxImpl:Kd,maximumImpl:Yd,minimumImpl:Xd,multiplyImpl:Zd,negImpl:Qd,notEqualImpl:Jd,prodImpl:ep,rangeImpl:tp,rsqrtImpl:np,sigmoidImpl:rp,simpleAbsImpl:op,sliceImpl:ap,sparseFillEmptyRowsImpl:ip,sparseReshapeImpl:sp,sparseSegmentReductionImpl:cp,sqrtImpl:up,stridedSliceImpl:lp,stringNGramsImpl:dp,stringSplitImpl:pp,stringToHashBucketFastImpl:hp,subImpl:fp,tileImpl:mp,topKImpl:gp,transposeImpl:bp,uniqueImpl:yp}=r;function Ap(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function vp(e,t){return 1===t?[e]:Ap(e,t)}class xp{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;const t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=vp("rc",t),r=cd(t),o=function(e,t,n){if(1===e)return`rc > ${t[0]}`;let r="";for(let o=e-2;o<e;o++)r+=`${n[o]} >= ${t[o]}`,o<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";const o=r.slice(-2);return`\n    int r = ${o[0]};\n    int c = ${o[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${t};\n    bool rEdge = rp1 >= ${n};\n  `}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){const n=e.length,r=function(e,t){const n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let a=`${0===r?"r":"rp1"}, ${0===o?"c":"cp1"}`;for(let n=2;n<e;n++)a=`${t[t.length-1-n]},`+a;n.push(a)}return n}(n,t);if(1===n)return`getA(rc),\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\n            0, 0`;return`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(e,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${o}) {\n            setOutput(vec4(0));\n          } else {\n            ${a}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}}class kp{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var r,o;this.userCode=`\n      ${r=t,o=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${o?Kl(["r","c","d"],"inputShape"):Gl(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Yl(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class wp{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=Sp(t,n),o=Op(e,r,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const a=Cp(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[o].shift();return this.usedTextures[o].push(e),e}let i;return r===fl.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===fl.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===fl.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===fl.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===fl.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=Sp(n,r),a=Op(t,o,r);a in this.freeTextures||(this.freeTextures[a]=[]);const i=Cp(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Object(Qr.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const c=this.usedTextures[a],u=c.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(u,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Cp(e,t,n,r,o){const a=function(e,t){switch(e){case fl.PACKED_2X2_FLOAT32:return Ed(t);case fl.PACKED_2X2_FLOAT16:return Id(t);case fl.UNPACKED_FLOAT32:return Cd(t);case fl.UNPACKED_FLOAT16:return Sd(t);case fl.PACKED_4X1_UNSIGNED_BYTE:return Od(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let i;if(o){const[t,n]=bl(e[0],e[1]);i=t*n}else{const[t,n]=ml(e[0],e[1]);i=t*n}return i*function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}(n,a)}function Sp(e,t){if(e===hl.UPLOAD)return fl.PACKED_2X2_FLOAT32;if(e===hl.RENDER||null==e)return function(e){return Object(Qr.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?fl.PACKED_2X2_FLOAT32:fl.UNPACKED_FLOAT32:e?fl.PACKED_2X2_FLOAT16:fl.UNPACKED_FLOAT16}(t);if(e===hl.DOWNLOAD||e===hl.PIXELS)return fl.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function Op(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class Ep{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const Ip="return abs(x);";const Tp="return x;";class Np{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class Rp{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;const t=e.length,n=vp("rc",t),r=cd(t),o=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${o});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}const jp=Qr.kernel_impls.whereImpl,Bp={};const _p=Object(Qr.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class Dp extends Qr.KernelBackend{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Object(Qr.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){const e=dl(Object(Qr.env)().getNumber("WEBGL_VERSION"));this.binaryCache=((t=Object(Qr.env)().getNumber("WEBGL_VERSION"))in Bp||(Bp[t]={}),Bp[t]),this.gpgpu=new Nd(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var t;this.textureManager=new wp(this.gpgpu),this.numMBBeforeWarning=null==Object(Qr.env)().global.screen?1024:Object(Qr.env)().global.screen.height*Object(Qr.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Qr.DataStorage(this,Object(Qr.engine)())}nextDataId(){return Dp.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((Object(Qr.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(Qr.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:hl.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,o){if(Object(Qr.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:hl.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:a,shape:i,isPacked:s}=t;if(null!=a){let t;t=s?new Np(i,Tp):new Ep(i,Tp);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),o=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const c=null!=this.activeTimers;let u,l;if(c&&(u=Qr.util.now()),"complex64"===r){const e=this.readSync(o.real.dataId),t=this.readSync(o.imag.dataId);l=Qr.backend_util.mergeRealAndImagArrays(e,t)}else l=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Qr.util.now()-u),this.convertAndCacheOnCPU(e,l)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:a,complexTensorInfos:i,isPacked:s}=t;if(null!=o){let t;t=s?new Np(r,Tp):new Ep(r,Tp);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:a}],a),o=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if(!Object(Qr.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Object(Qr.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,u,l=null;if("complex64"!==a&&Object(Qr.env)().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const t=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(t.texture,...gl(r))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]),t=e[0],n=e[1];u=Qr.backend_util.mergeRealAndImagArrays(t,n)}else if(null==l)u=this.getValuesFromTexture(e);else{const e=Qr.util.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(l,e)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=l){const e=this.gpgpu.gl;Al(e,(()=>e.deleteBuffer(l)))}const d=this.convertAndCacheOnCPU(e,u),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Object(Qr.engine)().removeDataId(e,this),this.pendingDeletes--),d}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>Qr.util.decodeString(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(Qr.buffer)(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!vl(n)){if(Object(Qr.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=Qr.util.sizeFromShape(t);if(Object(Qr.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...gl(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),a}const a=Object(Qr.env)().getBool("WEBGL_PACK")&&!0===r,i=a?_l(t):t,s=a?new bd(i):new gd(i),c=this.runWebGLProgram(s,[{shape:i,dtype:n,dataId:e}],"float32"),u=this.texData.get(c.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(c),l}timerAvailable(){return Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=Qr.util.flatten(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=Qr.util.flatten(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i.kernelMs=Qr.util.sum(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Qr.util.now(),endMs:null}}endTimer(e){return Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Qr.util.now(),e)}async getQueryTime(e){if(Object(Qr.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:o,isPacked:a,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,o,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=_p){return Object(Qr.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&Qr.util.sizeFromShape(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){Qr.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return jp(e.shape,t)}packedUnaryOp(e,t,n){const r=new Np(e.shape,t),o=this.compileAndRun(r,[e],n);return Object(Qr.engine)().makeTensorFromDataId(o.dataId,o.shape,o.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=op(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Object(Qr.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ip,e.dtype);const t=new Ep(e.shape,Ip),n=this.compileAndRun(t,[e]);return Object(Qr.engine)().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Qr.util.isString(n[0])){const o=n.map((e=>Qr.util.encodeString(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:r}=this.makeTensorInfo(e,t,n);return Object(Qr.engine)().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){const t=new Rp(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new xp(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[jl(e.shape),...Bl(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[jl(t),...Bl(t)],a=new kp(o,n),i=[n],s=this.runWebGLProgram(a,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:o}=t,a=_l(r);let i;const s=gl(a);i=n?new md(a):new fd(a);const c=[s];return{dtype:o,shape:r,dataId:this.runWebGLProgram(i,[{shape:a,dtype:o,dataId:e}],o,c,!0).dataId}}runWebGLProgram(e,t,n,r,o=!1){const a=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(a.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===pl.DENSE){const t=gl(e.outputShape);i.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===Qr.util.sizeFromShape(a.shape))return i.values=Qr.util.getTypedArrayFromDType(a.dtype,0),a;const s=[],c=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Qr.util.sizeFromShape(t.shape)<=Object(Qr.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),s.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!Ml(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),s.push(t),n=this.texData.get(t.dataId),e.shape=r}return this.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const u={shape:a.shape,texData:i,isUniform:!1},l=function(e,t,n){let r="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:c}=ud(e.packedInputs,t.shape,a);let u="",l="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=Qr.util.computeStrides(s);d=`${e[0]===a[1]}_${e[e.length-1]===a[1]}`}}else l=`${s[0]>1}_${s[1]>1}`;const p=t.shape.length,h=2===s.length&&Qr.util.arraysEqual(t.shape,a),f=1===Qr.util.sizeFromShape(t.shape),m=Qr.backend_util.getBroadcastDims(t.shape,n.shape),g=!e.packedInputs&&p===n.shape.length&&Qr.util.arraysEqual(a,n.texData.texShape),b=e.packedInputs||s.length>2?"":`${a[0]>1}_${a[1]>1}`;r+=`${p}_${g}_${i?c:""}_${s.length}_${f}_${m}_${h}_${u}_${l}_${d}_${b}_${o}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${o}`}}));const o=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+o+`${Object(Qr.env)().getNumber("WEBGL_VERSION")}`,a}(e,c,u),d=this.getAndSaveBinary(l,(()=>function(e,t,n,r){const o=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=o.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Ql(o,i,t),c=e.createProgram(s);let u=null;const l=e.getUniformLocation(c,"NAN",!1);1===Object(Qr.env)().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(c,"INFINITY",!1));const d=!1,p={},h={},f={};for(let n=0;n<t.variableNames.length;n++){const r=t.variableNames[n];p[r]=e.getUniformLocation(c,r,d),p[`offset${r}`]=e.getUniformLocation(c,`offset${r}`,d),t.enableShapeUniforms&&(h[`${r}Shape`]=e.getUniformLocation(c,`${r}Shape`,d),f[`${r}TexShape`]=e.getUniformLocation(c,`${r}TexShape`,d))}let m,g,b;t.enableShapeUniforms&&(m=e.getUniformLocation(c,"outShape",d),b=e.getUniformLocation(c,"outShapeStrides",d),g=e.getUniformLocation(c,"outTexShape",d));const y=[];return t.customUniforms&&t.customUniforms.forEach(((t,n)=>{y[n]=e.getUniformLocation(c,t.name,d)})),{program:t,source:s,webGLProgram:c,uniformLocations:p,customUniformLocations:y,inShapeInfos:a,outShapeInfo:i,infLoc:u,nanLoc:l,inShapesLocations:h,inTexShapesLocations:f,outShapeLocation:m,outShapeStridesLocation:b,outTexShapeLocation:g}}(this.gpgpu,e,c,u))),p=null!=this.activeTimers;let h;p&&(h=this.startTimer()),function(e,t,n,r,o){t.program.enableShapeUniforms||(pd(t.inShapeInfos,n),pd([t.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,i[0],i[1]):e.setOutputMatrixTexture(a,i[0],i[1]),e.setProgram(t.webGLProgram),1===Object(Qr.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,r)=>{const o=t.program.variableNames[r],a=t.uniformLocations[o],i=t.uniformLocations[`offset${o}`],s=t.inShapesLocations[`${o}Shape`],c=t.inTexShapesLocations[`${o}TexShape`];if(s){const{uniformShape:r}=ud(t.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:e.gl.uniform1iv(s,new Int32Array(r));break;case 2:e.gl.uniform2iv(s,new Int32Array(r));break;case 3:e.gl.uniform3iv(s,new Int32Array(r));break;case 4:e.gl.uniform4iv(s,new Int32Array(r))}}if(c&&e.gl.uniform2i(c,n.texData.texShape[0],n.texData.texShape[1]),null!=a)if(n.isUniform)if(Qr.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)}));const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=Qr.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach(((n,r)=>{const a=t.customUniformLocations[r],i=o[r];if("float"===n.type)e.gl.uniform1fv(a,i);else if("vec2"===n.type)e.gl.uniform2fv(a,i);else if("vec3"===n.type)e.gl.uniform3fv(a,i);else if("vec4"===n.type)e.gl.uniform4fv(a,i);else if("int"===n.type)e.gl.uniform1iv(a,i);else if("ivec2"===n.type)e.gl.uniform2iv(a,i);else if("ivec3"===n.type)e.gl.uniform3iv(a,i);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(a,i)}})),e.executeProgram()}(this.gpgpu,d,c,u,r),s.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));const f=Object(Qr.env)().get("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=Qr.util.now();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Object(Qr.env)().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===o){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r,o=!1){n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Object(Qr.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(Qr.tidy)((()=>{if(!Object(Qr.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Object(Qr.env)().getBool("DEBUG");Object(Qr.env)().set("DEBUG",!1);const t=this.abs(Object(Qr.scalar)(1e-8)).dataSync()[0];if(Object(Qr.env)().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:a,usage:i,isPacked:s}=t;if(null!=a)return;const c=null!=this.activeTimers;let u;c&&(u=Qr.util.now());let l=t.texShape;if(null==l&&(l=function(e,t=!1){let n=Object(Qr.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map(((t,n)=>n>=e.length-2?Qr.util.nearestLargerEven(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=Qr.util.squeezeShape(e);e=t.newShape}let r=Qr.util.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=jl(e);let n=2,o=2;return e.length&&([n,o]=Bl(e)),r=t*(n/2)*(o/2),Qr.util.sizeToSquarishShape(r).map((e=>2*e))}return Qr.util.sizeToSquarishShape(r)}(n,s),t.texShape=l),null!=o){const e=_l(n);let a,i=l[1],d=l[0];const p=o instanceof Uint8Array||o instanceof Uint8ClampedArray;s?([i,d]=bl(l[0],l[1]),a=new Ad(e,p)):a=new yd(e,p);const h=this.makeTensorInfo([d,i],r);this.texData.get(h.dataId).usage=p?hl.PIXELS:hl.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(h.dataId),i,d,o);const f=[[d,i]],m=!0,g=this.runWebGLProgram(a,[h],r,f,m),b=this.texData.get(g.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(h),this.texData.delete(g.dataId),t.values=null,c&&(this.uploadWaitMs+=Qr.util.now()-u)}else{const e=this.acquireTexture(l,i,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*Qr.util.bytesPerElement(t)}}Dp.nextDataId=0,Qr.device_util.isBrowser()&&Object(Qr.registerBackend)("webgl",(()=>new Dp),2);class Mp{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Qr.backend_util.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=hd(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class $p{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Qr.backend_util.assertAndGetBroadcastShape(t,n);const o=this.outputShape.length;this.enableShapeUniforms=hd(o);let a="";if(r)if(0===o||1===Qr.util.sizeFromShape(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(a=`\n          ${cd(o)} coords = getOutputCoords();\n        `,1===o)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=vp("coords",o);this.enableShapeUniforms?a+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= outShape[${o} - 2];\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= outShape[${o} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:a+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= ${this.outputShape[o-2]};\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= ${this.outputShape[o-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}function Pp(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Lp={kernelName:Qr.Identity,backendName:"webgl",kernelFunc:Pp};function Fp(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),s=Pp({inputs:{x:r},backend:n}),c=Pp({inputs:{x:o},backend:n});return i.complexTensorInfos={real:s,imag:c},a}const zp={kernelName:Qr.Complex,backendName:"webgl",kernelFunc:Fp},Up="return (a < 0.) ? b * a : a;",Wp="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const Vp={kernelName:Qr.LeakyRelu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r,i=n.makeTensorInfo([],"float32",Qr.util.createScalarValue(a,"float32")),s=Object(Qr.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $p(Wp,o.shape,i.shape):new Mp(Up,o.shape,i.shape),c=n.runWebGLProgram(s,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),c}},qp="return (a < 0.) ? b * a : a;",Gp="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const Hp={kernelName:Qr.Prelu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,a=Object(Qr.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $p(Gp,r.shape,o.shape):new Mp(qp,r.shape,o.shape);return n.runWebGLProgram(a,[r,o],"float32")}};function Kp({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:a})=>{const{x:i}=o,s=a,c=r||i.dtype;if(s.shouldExecuteOnCPU([i])&&null!=n){const e=s.texData.get(i.dataId),t=n(e.values,c);return s.makeTensorInfo(i.shape,c,t)}let u;return u=Object(Qr.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new Np(i.shape,t):new Ep(i.shape,e),s.runWebGLProgram(u,[i],c)}}function Yp({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:a}){return({inputs:i,backend:s})=>{const{a:c,b:u}=i,l=s;if(r&&"complex64"===c.dtype){const t=l.texData.get(c.dataId),n=l.texData.get(u.dataId),[r,o]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,o={dataId:n.dataId,dtype:n.dtype,shape:c.shape},a={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i=new Mp(e,c.shape,u.shape);return l.runWebGLProgram(i,[o,a],Object(Qr.upcastType)(n.dtype,r.dtype))})),a=Fp({inputs:{real:r,imag:o},backend:l});return l.disposeIntermediateTensorInfo(r),l.disposeIntermediateTensorInfo(o),a}const d=a||Object(Qr.upcastType)(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||l.shouldExecuteOnCPU([c,u]))&&null!=o){const e=l.texData.get(c.dataId).values,t=l.texData.get(u.dataId).values,n="string"===c.dtype?Qr.backend_util.fromUint8ToStringArray(e):e,r="string"===c.dtype?Qr.backend_util.fromUint8ToStringArray(t):t,[a,i]=o(c.shape,u.shape,n,r,d),s=l.makeTensorInfo(i,d);return l.texData.get(s.dataId).values=a,s}let p;return p=Object(Qr.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new $p(t,c.shape,u.shape,n):new Mp(e,c.shape,u.shape),l.runWebGLProgram(p,[c,u],d)}}function Xp(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?Gp:qp;if("leakyrelu"===e)return t?Wp:Up;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class Zp{constructor(e,t,n,r=!1,o=!1,a=!1,i=null,s=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=hd(this.outputShape.length);const u=r?e[1]:e[2],l=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";i&&(m=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,g="result = activation(result);");const b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",A="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(A=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          int batchA = ${y};\n          int batchB = ${A};\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${b}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const Qp="return areal * breal - aimag * bimag;",Jp="return areal * bimag + aimag * breal;";class eh{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Qr.backend_util.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const th="return a * b;";function nh(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=Qr.backend_util.upcastType(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),a=new eh(Qp,r.shape,o.shape),i=new eh(Jp,r.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],c=n.runWebGLProgram(a,s,"float32"),u=n.runWebGLProgram(i,s,"float32"),l=Fp({inputs:{real:c,imag:u},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),l}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[i,s]=Zd(r.shape,o.shape,e.values,t.values,a),c=n.makeTensorInfo(s,a);return n.texData.get(c.dataId).values=i,c}let i;return i=Object(Qr.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $p(th,r.shape,o.shape):new Mp(th,r.shape,o.shape),n.runWebGLProgram(i,[r,o],a)}const rh={kernelName:Qr.Multiply,backendName:"webgl",kernelFunc:nh};function oh(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=n,s=Qr.util.sizeFromShape(o.shape),c=Qr.util.inferFromImplicitShape(a,s),u=Qr.util.sizeFromShape(c);Qr.util.assert(s===u,(()=>`The new shape (${c}) has ${u} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const l=i.texData.get(o.dataId);return!l.isPacked||Ml(o.shape,c)||null!==l.texture&&Ml(l.shape,c)?(i.incRef(o.dataId),{dataId:o.dataId,shape:c,dtype:o.dtype}):function(e,t,n){const r=[jl(e.shape),...Bl(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},a=[jl(t),...Bl(t)],i=new kp(a,r),s=[r],c=n.runWebGLProgram(i,[o],e.dtype,s,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(o,c,i)}const ah={kernelName:Qr.Reshape,backendName:"webgl",kernelFunc:oh};class ih{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];const i=4*Math.floor(n/4),s=n%4;let c="sumValue += dot(values, ones);";if(null!=t){const e=1/t;c=`sumValue += dot(values * ${Qr.util.isInt(e)?e.toPrecision(2):e}, ones);`}let u="";o%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${c}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${c}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}class sh{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const u=4*Math.floor(n/4),l=n%4;let d=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,p="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let h="";o%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${c});\n      }\n    `}}function ch(e,t,n,r){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Qr.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let a=e;for(let i=0;i<o.length;i++){const{inSize:s,windowSize:c,outSize:u}=o[i];let l,d;l="mean"===n?0===i?new ih({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u},s):new ih({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u}):new sh({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:u},n),d=a,a=r.runWebGLProgram(l,[a],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return a}class uh{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=cd(this.rank),o=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${o}));\n    }\n    `}}class lh{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=cd(this.rank),o=Ap("rc",this.rank),a=new Array(this.rank);for(let e=0;e<t.length;e++)a[t[e]]=o[e];const i=`vec2(${a.slice(-2).join()})`,s=`++${o[this.rank-1]} < ${n[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${s}) {\n        result[1] = ${c};\n      }\n      --${o[this.rank-1]};\n      if(++${o[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${c};\n        if(${s}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function dh(e,t,n){const r=Object(Qr.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lh(e.shape,t):new uh(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function ph(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;return function(e,t,n,r){const o=t,a=e.shape.length,i=Qr.util.parseAxisParam(o,e.shape);let s=i;const c=Qr.backend_util.getAxesPermutation(s,a),u=null!=c;let l=e;u&&(l=dh(e,c,r),s=Qr.backend_util.getInnerMostAxes(s.length,a)),Qr.backend_util.assertAxesAreInnerMostDims("sum",s,a);const[d,p]=Qr.backend_util.computeOutAndReduceShapes(l.shape,s);let h=d;n&&(h=Qr.backend_util.expandShapeToKeepDim(d,i));const f=Qr.util.sizeFromShape(p),m=oh({inputs:{x:l},attrs:{shape:[Qr.util.sizeFromShape(e.shape)/f,f]},backend:r}),g=ch(m,Object(Qr.sumOutType)(e.dtype),"sum",r),b=oh({inputs:{x:g},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(l),b}(o,a,i,n)}const hh={kernelName:Qr.Sum,backendName:"webgl",kernelFunc:ph};function fh(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:a}=r,i=n,s=o.shape.length,c=new Array(s);for(let e=0;e<c.length;e++)c[e]=o.shape[a[e]];let u;if(i.shouldExecuteOnCPU([o])){const e=i.texData.get(o.dataId).values,t=bp(e,o.shape,o.dtype,a,c);u=i.makeTensorInfo(c,o.dtype);i.texData.get(u.dataId).values=t}else u=dh(o,a,i);return u}const mh={kernelName:Qr.Transpose,backendName:"webgl",kernelFunc:fh};function gh({a:e,b:t,transposeA:n,transposeB:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}){const u=e.shape.length,l=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],p=r?t.shape[l-1]:t.shape[l-2],h=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[l-2]:t.shape[l-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),b=Qr.util.sizeFromShape(m),y=Qr.util.sizeFromShape(g),A=b===y||1===b||1===y;Qr.util.assert(u>=2&&l>=2&&A,(()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${m}) and (${g}).`));const v=(b>y?e.shape.slice(0,-2):t.shape.slice(0,-2)).concat([h,f]);Qr.util.assert(d===p,(()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const x=n?[b,d,h]:[b,h,d],k=r?[y,f,p]:[y,p,f],w=oh({inputs:{x:e},backend:o,attrs:{shape:x}}),C=oh({inputs:{x:t},backend:o,attrs:{shape:k}}),S=[w,C],O=Math.max(b,y),E=n?w.shape[1]:w.shape[2],I=null!=a,T=null!=i,N="leakyrelu"===c,R=null!=c?Xp(c,!0):null;let j;if((1===h||1===f)&&E>1e3&&!1===(I||T||N||null!=R)){let e=w,t=C;n&&(e=fh({inputs:{x:w},backend:o,attrs:{perm:[0,2,1]}}),S.push(e)),r&&(t=fh({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),S.push(t));const a=1===f;let i=e;1!==f&&(i=oh({inputs:{x:e},backend:o,attrs:{shape:[O,E,1]}}),S.push(i));const s=1===f?2:1;let c=t;a&&(c=oh({inputs:{x:t},backend:o,attrs:{shape:[O,1,E]}}),S.push(c));const u=nh({inputs:{a:i,b:c},backend:o});j=ph({inputs:{x:u},backend:o,attrs:{axis:s,keepDims:!0}}),S.push(u)}else{const c=Object(Qr.upcastType)(e.dtype,t.dtype),u=new Zp(x,k,[O,h,f],n,r,I,R,T,N),l=[w,C];if(null!=a&&l.push(a),T&&l.push(i),N){const e=o.makeTensorInfo([],"float32",Qr.util.createScalarValue(s,"float32"));l.push(e),S.push(e)}j=o.runWebGLProgram(u,l,c)}const B=oh({inputs:{x:j},backend:o,attrs:{shape:v}});S.push(j);for(const e of S)o.disposeIntermediateTensorInfo(e);return B}const bh={kernelName:Qr._FusedMatMul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=r;return gh({a:o,b:a,transposeA:c,transposeB:u,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:l})}},yh="return abs(x);";const Ah={kernelName:Qr.Abs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=op(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=Object(Qr.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Np(r.shape,yh):new Ep(r.shape,yh),n.runWebGLProgram(o,[r],r.dtype)}},vh=Kp({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),xh={kernelName:Qr.Acos,backendName:"webgl",kernelFunc:vh},kh=Kp({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),wh={kernelName:Qr.Acosh,backendName:"webgl",kernelFunc:kh},Ch="return a + b;",Sh=Yp({opSnippet:Ch,packedOpSnippet:Ch,supportsComplex:!0,cpuKernelImpl:Rd}),Oh={kernelName:Qr.Add,backendName:"webgl",kernelFunc:Sh};class Eh{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class Ih{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const Th={kernelName:Qr.AddN,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,o=n;if(1===o.length)return Pp({inputs:{x:o[0]},backend:r});if(o.length>Object(Qr.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:r}),a=e({inputs:o.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const a=o.map((e=>e.dtype)).reduce(((e,t)=>Object(Qr.upcastType)(e,t))),i=o.map((e=>e.shape)),s=Object(Qr.env)().getBool("WEBGL_PACK")?new Ih(o[0].shape,i):new Eh(o[0].shape,i);return r.runWebGLProgram(s,o,a)}};const Nh={kernelName:Qr.All,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=Qr.util.parseAxisParam(a,o.shape);let u=c;const l=Qr.backend_util.getAxesPermutation(u,s);let d=o;null!=l&&(d=fh({inputs:{x:o},backend:n,attrs:{perm:l}}),u=Qr.backend_util.getInnerMostAxes(u.length,s)),Qr.backend_util.assertAxesAreInnerMostDims("all",u,s);const[p,h]=Qr.backend_util.computeOutAndReduceShapes(d.shape,u),f=oh({inputs:{x:d},backend:n,attrs:{shape:[-1,Qr.util.sizeFromShape(h)]}}),m=ch(f,f.dtype,"all",n);let g;if(i){g=oh({inputs:{x:m},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(p,c)}})}else g=oh({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}};const Rh={kernelName:Qr.Any,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=Qr.util.parseAxisParam(a,o.shape);let u=c;const l=Qr.backend_util.getAxesPermutation(u,s);let d=o;null!=l&&(d=fh({inputs:{x:o},backend:n,attrs:{perm:l}}),u=Qr.backend_util.getInnerMostAxes(u.length,s)),Qr.backend_util.assertAxesAreInnerMostDims("any",u,s);const[p,h]=Qr.backend_util.computeOutAndReduceShapes(d.shape,u),f=oh({inputs:{x:d},backend:n,attrs:{shape:[-1,Qr.util.sizeFromShape(h)]}}),m=ch(f,f.dtype,"any",n);let g;if(i){g=oh({inputs:{x:m},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(p,c)}})}else g=oh({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}};class jh{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];const i="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${i} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class Bh{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Qr.util.assert(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,c=cd(s),u=vp("coords",s);let l,d;if(1===a){d=s+1;const e=cd(d);l=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[s-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[s-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[s-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[s-2]};`}else d=s,l=`\n        ${c} sourceLocR = coords;\n        ++${u[s-1]};\n        ${c} sourceLocG = coords;\n        ++${u[s-2]};\n        ${c} sourceLocA = coords;\n        --${u[s-1]};\n        ${c} sourceLocB = coords;\n        --${u[s-2]};`;const p=["x","y","z","w","u","v"].slice(0,d),h="."+p[d-1],f=p.map((e=>"int "+e)),m=vp("sourceLocR",d-1).concat("inIdx.r"),g=vp("sourceLocG",d-1).concat("inIdx.g"),b=vp("sourceLocB",d-1).concat("inIdx.b"),y=vp("sourceLocA",d-1).concat("inIdx.a"),A="max"===n?"greaterThan":"lessThan",v=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${p.join()}),\n                                          vec2(${p.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${p.join()}),\n                               vec2(${p.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${c} coords = getOutputCoords();\n        bool hasNextCol = ${u[s-1]} < ${i[s-1]-1};\n        bool hasNextRow = ${u[s-2]} < ${i[s-2]-1};\n        ${l}\n        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},\n          sourceLocB${h}, sourceLocA${h}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${v}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${A}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function _h(e,t,n,r=null){let o=t.shape[0],a=t.shape[1];null!=r&&(o=r.shape[0],a=r.shape[1]);const i=Qr.backend_util.computeOptimalWindowSize(a),s={windowSize:i,inSize:a,batchSize:o,outSize:Math.ceil(a/i)},c=new jh(s,n,null==r),u=[t];null!=r&&u.push(r);const l=e.runWebGLProgram(c,u,"int32");if(1===l.shape[1])return l;const d=_h(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function Dh(e,t,n,r=null){const o=null!=r?r.shape:t.shape,a=o[o.length-1],i=Qr.backend_util.computeOptimalWindowSize(a),s=new Bh(o,i,n,null==r),c=null==r?[t]:[t,r],u=e.runWebGLProgram(s,c,"int32");if(u.shape.length===t.shape.length){const r=Dh(e,t,n,u);return e.disposeIntermediateTensorInfo(u),r}return u}function Mh(e,t,n,r){const o=[n];if(Qr.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Object(Qr.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],a=e.texData.get(t.dataId);let i=t;null!==a&&a.isPacked&&(i=e.unpackTensor(t),n.push(i));const[s,c]=Qr.backend_util.computeOutAndReduceShapes(i.shape,o),u=Qr.util.sizeFromShape(c),l=oh({inputs:{x:i},backend:e,attrs:{shape:[-1,u]}});n.push(l);const d=_h(e,l,r);n.push(d);const p=oh({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),p}return Dh(e,t,r)}const $h={kernelName:Qr.ArgMax,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=Qr.util.parseAxisParam(a,o.shape);const s=Qr.backend_util.getAxesPermutation(i,o.shape.length);let c=o;const u=[];null!=s&&(c=fh({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(c),i=Qr.backend_util.getInnerMostAxes(i.length,c.shape.length)),Qr.backend_util.assertAxesAreInnerMostDims("argMax",[i[0]],c.shape.length);const l=Mh(n,c,i[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};const Ph={kernelName:Qr.ArgMin,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=Qr.util.parseAxisParam(a,o.shape);const s=Qr.backend_util.getAxesPermutation(i,o.shape.length);let c=o;const u=[];null!=s&&(c=fh({inputs:{x:o},backend:n,attrs:{perm:s}}),u.push(c),i=Qr.backend_util.getInnerMostAxes(i.length,c.shape.length)),Qr.backend_util.assertAxesAreInnerMostDims("argMin",[i[0]],c.shape.length);const l=Mh(n,c,i[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}},Lh=Kp({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Fh={kernelName:Qr.Asin,backendName:"webgl",kernelFunc:Lh},zh=Kp({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),Uh={kernelName:Qr.Asinh,backendName:"webgl",kernelFunc:zh},Wh=Kp({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),Vh={kernelName:Qr.Atan,backendName:"webgl",kernelFunc:Wh},qh=Yp({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Gh={kernelName:Qr.Atan2,backendName:"webgl",kernelFunc:qh},Hh=Kp({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Kh={kernelName:Qr.Atanh,backendName:"webgl",kernelFunc:Hh};class Yh{constructor(e,t,n,r=!1,o=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideHeight,s=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(f||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${s});\n        const ivec2 pads = ivec2(${p}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?o?m:g:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(y="avgValue / count");const A=4*Math.floor(a/4),v=a%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${s});\n      const ivec2 pads = ivec2(${p}, ${h});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${A}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${A};\n          if (${1===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===v}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${y});\n      }\n    `}}class Xh{constructor(e,t,n,r=!1,o=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const y="avg"===t;let A="0.0";if(y||(A="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${i}, ${s}, ${c});\n        const ivec3 pads = ivec3(${m}, ${g}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${p};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${d}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / count");const x=4*Math.floor(a/4),k=a%4,w=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${i}, ${s}, ${c});\n      const ivec3 pads = ivec3(${m}, ${g}, ${b});\n      const float initializationValue = ${A};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${A});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${p};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${d};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\n              );\n\n              ${w}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${w}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${w}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                initializationValue\n              );\n\n              ${w}\n            }\n          }\n          setOutput(${v});\n        }\n      }\n    `}}const Zh={kernelName:Qr.AvgPool,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;Wl(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=Qr.backend_util.computePool2DInfo(o.shape,a,i,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Qr.util.arraysEqual(u.inShape,u.outShape))return Pp({inputs:{x:o},backend:n});const l=new Yh(u,"avg",!1);return n.runWebGLProgram(l,[o],"float32")}};const Qh={kernelName:Qr.AvgPool3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c,dataFormat:u}=r,l=Qr.backend_util.computePool3DInfo(o.shape,a,i,[1,1,1],s,c,u),d=new Xh(l,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}};class Jh{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.top,l=c-1-e.padInfo.left,d=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${l});\n      const float avgMultiplier = float(${d});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${i}) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ef{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=l-1-e.padInfo.front,f=d-1-e.padInfo.top,m=p-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${o}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${d};\n              wR += ${c}) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const tf={kernelName:Qr.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=r,d=Qr.backend_util.computePool3DInfo(i.shape,s,c,[1,1,1],u,l),p=new ef(d);return n.runWebGLProgram(p,[o],i.dtype)}};const nf={kernelName:Qr.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;Wl([o,a],"avgPoolGrad");const{filterSize:s,strides:c,pad:u}=r,l=Qr.backend_util.computePool2DInfo(i.shape,s,c,1,u),d=new Jh(l);return n.runWebGLProgram(d,[o],i.dtype)}};const rf={kernelName:Qr.BatchMatMul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;return gh({a:o,b:a,transposeA:i,transposeB:s,backend:n})}};class of{constructor(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Qr.backend_util.assertAndGetBroadcastShape(e,t),Qr.backend_util.assertAndGetBroadcastShape(e,n);let i="0.0";null!=r&&(Qr.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="1.0";null!=o&&(Qr.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class af{constructor(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Qr.backend_util.assertAndGetBroadcastShape(e,t),Qr.backend_util.assertAndGetBroadcastShape(e,n);let i="vec4(0.0)";null!=r&&(Qr.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=o&&(Qr.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const sf={kernelName:Qr.FusedBatchNorm,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:o,variance:a,offset:i,scale:s}=e;Qr.util.assert(o.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Qr.util.assert(null==i||o.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Qr.util.assert(null==s||o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:c}=n;null==c&&(c=.001);const u=[r,o,a];let l=null;null!=i&&(l=i.shape,u.push(i));let d=null;null!=s&&(d=s.shape,u.push(s));const p=Object(Qr.env)().getBool("WEBGL_PACK_NORMALIZATION")?new af(r.shape,o.shape,a.shape,l,d,c):new of(r.shape,o.shape,a.shape,l,d,c);return t.runWebGLProgram(p,u,u[0].dtype)}};class cf{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=cd(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return uf.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map(((e,t)=>`sourceLoc.${uf[t]} = start[${t}] + coords.${uf[t]};`)).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const uf=["x","y","z","w","u","v"];class lf{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=cd(this.rank),n=vp("coords",this.rank),r=vp("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${o})`,i=`\n      result.x = ${a};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${i}\n        ${s}\n        setOutput(result);\n      }\n    `}}function df(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r,[s,c]=Qr.slice_util.parseSliceParams(o,a,i);if(Qr.slice_util.assertParamsValid(o,s,c),0===Qr.util.sizeFromShape(c))return n.makeTensorInfo(c,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=ap(e.values,s,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,t)}const{isPacked:u}=n.texData.get(o.dataId),l=Qr.slice_util.isSliceContinous(o.shape,s,c);if(u||!l){const e=Object(Qr.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lf(c):new cf(c),t=[s];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,r){const o=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),i=r.texData.get(a.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let s=Qr.slice_util.computeFlatOffset(t,Qr.util.computeStrides(e.shape));o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};const c=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,c+1),a}(o,s,c,n)}const pf={kernelName:Qr.Slice,backendName:"webgl",kernelFunc:df},hf={kernelName:Qr.BatchToSpaceND,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;Qr.util.assert(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),c=Qr.backend_util.getReshaped(o.shape,a,s),u=Qr.backend_util.getPermuted(c.length,a.length),l=Qr.backend_util.getReshapedPermuted(o.shape,a,s),d=Qr.backend_util.getSliceBeginCoords(i,a.length),p=Qr.backend_util.getSliceSize(l,i,a.length),h=[],f=oh({inputs:{x:o},backend:n,attrs:{shape:c}}),m=fh({inputs:{x:f},backend:n,attrs:{perm:u}}),g=oh({inputs:{x:m},backend:n,attrs:{shape:l}}),b=df({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}};const ff={kernelName:Qr.Bincount,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=n.readSync(o.dataId),c=n.readSync(a.dataId),u=jd(s,c,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,u)}};const mf={kernelName:Qr.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.readSync(r.dataId),i=n.readSync(o.dataId),s=Qr.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},gf=Yp({opSnippet:"return float(a != b);",cpuKernelImpl:Jd,dtype:"bool"}),bf={kernelName:Qr.NotEqual,backendName:"webgl",kernelFunc:gf};function yf(e){const{inputs:t,backend:n}=e,{input:r}=t;return Pp({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const Af={kernelName:Qr.Real,backendName:"webgl",kernelFunc:yf};const vf={kernelName:Qr.Cast,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:o}=t,{x:a}=n,{dtype:i}=o;if("complex64"===i){if("complex64"===a.dtype)return Pp({inputs:{x:a},backend:r});const t=Qr.zeros(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),o=Fp({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),o}if("complex64"===a.dtype){const t=yf({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!Qr.util.hasEncodingLoss(a.dtype,i)){const e=Pp({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if("int32"===i)return function(e,t){const n=new Ep(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",Qr.util.getTypedArrayFromDType("bool",1)),t=gf({inputs:{a:a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}},xf="return ceil(x);",kf=Kp({opSnippet:xf,packedOpSnippet:xf,cpuKernelImpl:_d}),wf={kernelName:Qr.Ceil,backendName:"webgl",kernelFunc:kf};class Cf{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Sf{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Of={kernelName:Qr.ClipByValue,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=r;let s;s=Object(Qr.env)().getBool("WEBGL_PACK_CLIP")?new Sf(o.shape):new Cf(o.shape);const c=[[a],[i]];return n.runWebGLProgram(s,[o],o.dtype,c)}};class Ef{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function If(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const Tf={kernelName:Qr.ComplexAbs,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),a=new Ef(r.shape),i=[If(r,o.complexTensorInfos.real),If(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}};class Nf{constructor(e){this.outputShape=[],this.outputShape=Qr.backend_util.computeOutShape(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,o=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class Rf{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Qr.backend_util.computeOutShape(e,t);const n=this.outputShape,r=n.length,o=cd(r),a=vp("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let n=1;n<s.length;n++)s[n]=s[n-1]+e[n][t];const c=i[t],u=i.slice(-2),l=i.join();let d=`if (${c} < ${s[0]}) {\n        return getChannel(\n            getT0(${l}), vec2(${u.join()}));\n        }`;for(let e=1;e<s.length;e++){const t=s[e-1];d+=`\n        if (${c} < ${s[e]}  && ${c} >= ${s[e-1]}) {\n          return getChannel(\n            getT${e}(${jf(i,c,t)}),\n            vec2(${jf(u,c,t)}));\n        }`}const p=s.length,h=s[s.length-1];d+=`\n        return getChannel(\n          getT${p}(${jf(i,c,h)}),\n          vec2(${jf(u,c,h)}));`,this.userCode=`\n      float getValue(${i.map((e=>"int "+e))}) {\n        ${d}\n      }\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${n[r-2]} &&\n            ${a[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function jf(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function Bf(e){const{inputs:t,backend:n}=e,{input:r}=t;return Pp({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const _f={kernelName:Qr.Imag,backendName:"webgl",kernelFunc:Bf};function Df(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>yf({inputs:{input:e},backend:n}))),o=e.map((e=>Bf({inputs:{input:e},backend:n}))),a=Df(r,t,n),i=Df(o,t,n),s=Fp({inputs:{real:a,imag:i},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),o.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}let o=n.shouldExecuteOnCPU(e);if("string"===r&&(o=!0),o){const o=e.map((e=>{const r=Qr.util.sizeFromShape(e.shape.slice(t));return oh({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),a=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=Qr.backend_util.computeOutShape(o.map((e=>e.shape)),1),s=1===o[0].shape[0],c=Dd(a,i,r,s),u=Qr.backend_util.computeOutShape(e.map((e=>e.shape)),t),l=n.makeTensorInfo(u,r,c);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}if(e.length>Object(Qr.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(e.length/2),o=Df(e.slice(0,r),t,n),a=Df(e.slice(r),t,n),i=Df([o,a],t,n);return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}if(Object(Qr.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const o=new Rf(e.map((e=>e.shape)),t);return n.runWebGLProgram(o,e,r)}const{tensors2D:a,outShape:i}=function(e,t,n){const r=Qr.backend_util.computeOutShape(e.map((e=>e.shape)),t);return{tensors2D:e.map((e=>oh({inputs:{x:e},attrs:{shape:[-1,Qr.util.sizeFromShape(e.shape.slice(t))]},backend:n}))),outShape:r}}(e,t,n),s=new Nf(a.map((e=>e.shape))),c=n.runWebGLProgram(s,a,r);a.forEach((e=>n.disposeIntermediateTensorInfo(e)));const u=oh({inputs:{x:c},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(c),u}function Mf(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=Qr.util.parseAxisParam(o,t[0].shape)[0],i=Qr.backend_util.computeOutShape(t.map((e=>e.shape)),a);if(0===Qr.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>Qr.util.sizeFromShape(e.shape)>0));if(1===s.length)return Pp({inputs:{x:s[0]},backend:n});const c=s.map((e=>e.shape));return Qr.backend_util.assertParamsConsistent(c,a),Df(s,a,n)}const $f={kernelName:Qr.Concat,backendName:"webgl",kernelFunc:Mf};class Pf{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,b=m?2:3,y=m?3:1;let A="",v="";n&&(A=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,v="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${A}\n\n      const ivec2 strides = ivec2(${s}, ${c});\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${y}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${b}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${l};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${h}) *\n                    getW(wR, wC, ${h}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${h}, xR, xC) *\n                    getW(wR, wC, ${h}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2),\n                getW(wR, wC, ${h} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1),\n                  getX(batch, xR, xC, ${h} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC),\n                  getX(batch, ${h} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${v}\n        setOutput(result);\n      }\n    `}}class Lf{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${o}, ${a}, ${i});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Ff{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=hd(this.outputShape.length);const{dataFormat:n}=t,r=ql(),o="channelsLast"===n,a=o?0:1,i=o?1:2,s=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`;let c="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)c+=`\n          blockIndex = rc.y + ${t};\n          pos = rc.x + ${e};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${i}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${o}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${r.output} = result;\n      }\n    `}}function zf({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:s=null}){const c=e.shape,u=r.texData.get(e.dataId),l=n.inChannels,d=c[0]*c[1]*c[2],p=n.outChannels,h="channelsLast"===n.dataFormat;let f;const m=[];if(!((1===d||1===p)&&l>1e3)&&u.isPacked&&h&&null!=u.texture&&c[2]%2!=0&&Qr.util.arraysEqual(u.shape.slice(-3),c.slice(-3))){const l=c[0]*c[1]*(c[2]+1),d={dataId:e.dataId,shape:[1,l,n.inChannels],dtype:e.dtype},p=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,Qr.util.assert(Ml(u.shape,d.shape),(()=>`packed reshape ${u.shape} to ${d.shape} isn't free`));const h=oh({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(h);const g=gh({a:d,b:h,backend:r,transposeA:false,transposeB:false,bias:o,activation:s,preluActivationWeights:a,leakyreluAlpha:i}),b=r.texData.get(g.dataId);Qr.util.assert(b.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=p,b.shape=n.outShape,f=Pp({inputs:{x:g},backend:r}),f.shape=n.outShape,m.push(g)}else{const u=oh({inputs:{x:e},backend:r,attrs:{shape:[1,h?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],n.inChannels]}}),l=oh({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),d=gh({a:u,b:l,transposeA:false,transposeB:false,backend:r,bias:o,activation:s,preluActivationWeights:a,leakyreluAlpha:i});f=oh({inputs:{x:d},backend:r,attrs:{shape:n.outShape}}),m.push(u),m.push(l),m.push(d)}for(const e of m)r.disposeIntermediateTensorInfo(e);return f}function Uf({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:s=null}){const{filterWidth:c,filterHeight:u,inChannels:l,outWidth:d,outHeight:p,dataFormat:h}=n,f="channelsLast"===h,m=c*u*l,g=p*d,b=[m,g],y=[],A=oh({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),v=oh({inputs:{x:t},backend:r,attrs:{shape:[1,m,Qr.util.sizeFromShape(t.shape)/m]}});y.push(A),y.push(v);const x=new Ff(b,n),k=[A.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],w=r.runWebGLProgram(x,[A],"float32",k),C=oh({inputs:{x:w},backend:r,attrs:{shape:[1,b[0],b[1]]}});y.push(w),y.push(C);const S=null!=o,O=null!=a,E="leakyrelu"===s,I=s?Xp(s,!0):null,T=new Zp(C.shape,v.shape,[1,g,n.outChannels],!0,!1,S,I,O,E),N=[C,v];if(o&&N.push(o),O&&N.push(a),E){const e=r.makeTensorInfo([],"float32",Qr.util.createScalarValue(i,"float32"));N.push(e),y.push(e)}const R=r.runWebGLProgram(T,N,"float32"),j=oh({inputs:{x:R},backend:r,attrs:{shape:f?[1,p,d,n.outChannels]:[1,n.outChannels,p,d]}});y.push(R);for(const e of y)r.disposeIntermediateTensorInfo(e);return j}const Wf={kernelName:Qr.Conv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:c,dilations:u,dimRoundingMode:l}=r,d=Qr.backend_util.convertConv2DDataFormat(c),p=Qr.backend_util.computeConv2DInfo(o.shape,a.shape,i,u,s,l,!1,d);let h;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(Object(Qr.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])h=Uf({x:o,filter:a,convInfo:p,backend:n});else{const e=new Pf(p);h=n.runWebGLProgram(e,[o,a],"float32")}else h=zf({x:o,filter:a,convInfo:p,backend:n});const f=oh({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),f}};class Vf{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${o};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${a}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class qf{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,c=a?1:2,u=a?2:3,l=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Gf{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${o};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${a};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${i};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Hf{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,c=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${c}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${o}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Kf={kernelName:Qr.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:c,dimRoundingMode:u,filterShape:l}=r,d=Qr.backend_util.convertConv2DDataFormat(c),p=Qr.backend_util.computeConv2DInfo(o.shape,l,i,1,s,u,!1,d),h=new Vf(p);return n.runWebGLProgram(h,[o,a],"float32")}};const Yf={kernelName:Qr.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:c,dataFormat:u,dimRoundingMode:l}=r,d=Qr.backend_util.convertConv2DDataFormat(u),p=Qr.backend_util.computeConv2DInfo(i,a.shape,s,1,c,l,!1,d),h=new qf(p);return n.runWebGLProgram(h,[o,a],"float32")}};const Xf={kernelName:Qr.Conv3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r,u=Qr.backend_util.computeConv3DInfo(o.shape,a.shape,i,c,s),l=new Lf(u);return n.runWebGLProgram(l,[o,a],"float32")}};const Zf={kernelName:Qr.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:c}=r,u=Qr.backend_util.computeConv3DInfo(o.shape,c,i,1,s),l=new Gf(u);return n.runWebGLProgram(l,[o,a],"float32")}};const Qf={kernelName:Qr.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:c}=r,u=Qr.backend_util.computeConv3DInfo(c,a.shape,s,1,i),l=new Hf(u);return n.runWebGLProgram(l,[o,a],"float32")}},Jf=Kp({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),em={kernelName:Qr.Cos,backendName:"webgl",kernelFunc:Jf},tm=Kp({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),nm={kernelName:Qr.Cosh,backendName:"webgl",kernelFunc:tm};class rm{constructor(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,c]=e,[u]=t,[l,d]=n;this.outputShape=[u,l,d,c];const p="bilinear"===r?1:0,[h,f]=[i-1+".0",s-1+".0"],[m,g,b]=l>1?[""+(i-1)/(l-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[y,A,v]=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${A};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${o}));\n          return;\n        }\n        float in_x = ${v};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${o}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${p} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const om={kernelName:Qr.CropAndResize,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:c,extrapolationValue:u}=r,l=new rm(o.shape,a.shape,s,c,u);return n.runWebGLProgram(l,[o,a,i],"float32")}};class am{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=e;const r=e.length,o=t?"0.0":`getX(${im(r,"coords")})`,a=e[e.length-1];let i="",s="";t?(i=n?"end != "+(a-1):"end != 0",s=n?"end + 1":"end - 1"):(i=n?`end + pow2 < ${a}`:"end >= pow2",s=n?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${cd(r)} coords = getOutputCoords();\n        int end = ${sm(r,"coords")};\n        float val = ${o};\n        int pow2 = int(pow(2.0, index));\n        if (${i}) {\n          int idx = ${s};\n          ${sm(r,"coords")} = idx;\n          val += getX(${im(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}}function im(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function sm(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}const cm={kernelName:Qr.Cumsum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r,c=o.shape.length,u=Qr.backend_util.getAxesPermutation([a],c);let l=o;null!=u&&(l=fh({inputs:{x:o},backend:n,attrs:{perm:u}}));const d=Qr.backend_util.getInnerMostAxes(1,c)[0];if(d!==c-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${a}`);const p=l.shape[d];let h=Pp({inputs:{x:l},backend:n});for(let e=0;e<=Math.ceil(Math.log2(p))-1;e++){const t=new am(l.shape,!1,s),r=[[e]],o=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(o)}if(i){const e=new am(l.shape,i,s),t=h;h=n.runWebGLProgram(e,[h],h.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=u){const e=fh({inputs:{x:h},backend:n,attrs:{perm:Qr.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),e}return h}};const um={kernelName:Qr.DenseBincount,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=n.readSync(o.dataId),t=n.readSync(a.dataId),r=jd(e,t,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,r)}if(2===o.shape.length){const e=n.bufferSync(o),t=n.bufferSync(a),r=Bd(e,t,i,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}};class lm{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const dm={kernelName:Qr.DepthToSpace,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r,s=o.shape[0],c=("NHWC"===i?o.shape[1]:o.shape[2])*a,u=("NHWC"===i?o.shape[2]:o.shape[3])*a,l=("NHWC"===i?o.shape[3]:o.shape[1])/(a*a),d=new lm("NHWC"===i?[s,c,u,l]:[s,l,c,u],a,i);return n.runWebGLProgram(d,[o],o.dtype)}};class pm{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=hd(this.outputShape.length);const a=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let c="",u="";n&&(c=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const l=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${c}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${l}\n        ${u}\n        setOutput(result);\n      }\n    `}}class hm{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=hd(this.outputShape.length);const a=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,l=e.filterWidth,d=l;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<l;e++)p+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;p+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let e=0;e<l;e++)p+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(d+1)/2;e++){const t=2*e;if(p+=`\n          xC = xCCorner + ${t*c};\n          `,1===s){if(t<l&&(i%2==1?(p+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,p+=1===c&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):p+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<l)){const e=i%2==0?Qr.util.nearestLargerEven(c):c;c%2==0&&i%2==1||c%2!=0&&i%2!=1?(p+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,c>1&&(p+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                      xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${t}Ready = 1;\n                    }\n                    `),p+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                  `):p+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<l&&(i%2==1?(p+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<l&&(p+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(p+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<l&&(p+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<l&&(p+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<l&&(p+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}p+="\n    }\n  ",p+="\n      }\n    ";let h="",f="";n&&(h=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${h}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${p}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const fm={kernelName:Qr.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c,dimRoundingMode:u}=r;let l=c;null==l&&(l=[1,1]),Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(i,l),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`));const d=Qr.backend_util.computeConv2DInfo(o.shape,a.shape,i,l,s,u,!0);let p;p=Object(Qr.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new hm(d):new pm(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[o,a],"float32",h)}};class mm{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${a} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${o};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class gm{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const bm={kernelName:Qr.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,filterShape:l}=r,d=Qr.backend_util.computeConv2DInfo(o.shape,l,i,s,c,u,!0),p=new mm(d);return n.runWebGLProgram(p,[o,a],"float32")}};const ym={kernelName:Qr.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:u,inputShape:l}=r,d=Qr.backend_util.computeConv2DInfo(l,a.shape,i,s,c,u,!0),p=new gm(d);return n.runWebGLProgram(p,[o,a],"float32")}};class Am{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const vm={kernelName:Qr.Diag,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],a=Qr.util.sizeFromShape(r.shape),i=oh({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new Am(a),c=n.runWebGLProgram(s,[i],i.dtype),u=oh({inputs:{x:c},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),u}};class xm{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:o,strideWidth:a,filterHeight:i,filterWidth:s,dilationHeight:c,dilationWidth:u}=e,{top:l,left:d}=r;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${a});\n      const ivec2 pads = ivec2(${l}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${i}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const km={kernelName:Qr.Dilation2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r,u=Qr.backend_util.computeDilation2DInfo(o.shape,a.shape,i,s,"NHWC",c);let l;const d=new xm(u);l=n.runWebGLProgram(d,[o,a],"float32");const p=oh({inputs:{x:l},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(l),p}};const wm={kernelName:Qr.Einsum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:c}=Qr.backend_util.decodeEinsumEquation(o,a.length);Qr.backend_util.checkEinsumDimSizes(i.length,c,a);const{path:u,steps:l}=Qr.backend_util.getEinsumComputePath(s,c),d=l.length;let p=null,h=i.length;const f=[];for(let e=0;e<d;++e){for(const t of l[e]){const{permutationIndices:e,expandDims:r}=Qr.backend_util.getEinsumPermutation(h,c[t]);let o;Qr.backend_util.isIdentityPermutation(e)?o=a[t]:(o=fh({inputs:{x:a[t]},backend:n,attrs:{perm:e}}),f.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);Qr.util.arraysEqual(o.shape,i)||(o=oh({inputs:{x:o},backend:n,attrs:{shape:i}}),f.push(o)),null===p?p=o:(p=nh({inputs:{a:o,b:p},backend:n}),f.push(p))}e<d-1&&(u[e]>=0&&(p=ph({inputs:{x:p},backend:n,attrs:{axis:u[e]-(i.length-h),keepDims:!1}}),f.push(p)),h--)}for(const e of f)e!==p&&n.disposeIntermediateTensorInfo(e);return p}},Cm=Kp({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Sm={kernelName:Qr.Elu,backendName:"webgl",kernelFunc:Cm},Om={kernelName:Qr.EluGrad,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,a=Object(Qr.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new $p("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new Mp("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,o.shape);return n.runWebGLProgram(a,[r,o],r.dtype)}},Em=Yp({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Md}),Im={kernelName:Qr.Equal,backendName:"webgl",kernelFunc:Em},Tm=Kp({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Qr.backend_util.ERF_P};\n  float a1 = ${Qr.backend_util.ERF_A1};\n  float a2 = ${Qr.backend_util.ERF_A2};\n  float a3 = ${Qr.backend_util.ERF_A3};\n  float a4 = ${Qr.backend_util.ERF_A4};\n  float a5 = ${Qr.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),Nm={kernelName:Qr.Erf,backendName:"webgl",kernelFunc:Tm},Rm="return exp(x);",jm=Kp({opSnippet:Rm,packedOpSnippet:Rm,cpuKernelImpl:$d,dtype:"float32"}),Bm={kernelName:Qr.Exp,backendName:"webgl",kernelFunc:jm};function _m(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:a}=t,i=a.shape.length,s=a.shape.slice();let c=o;return o<0&&(Qr.util.assert(-(i+1)<=o,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),c=i+o+1),s.splice(c,0,1),oh({inputs:{x:a},backend:r,attrs:{shape:s}})}const Dm={kernelName:Qr.ExpandDims,backendName:"webgl",kernelFunc:_m},Mm="return exp(x) - 1.0;",$m=Kp({opSnippet:Mm,packedOpSnippet:Mm,cpuKernelImpl:Pd}),Pm={kernelName:Qr.Expm1,backendName:"webgl",kernelFunc:$m};class Lm{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const o=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=n?`${r}.0`:"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);i="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${o};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${i}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function Fm(e,t,n){const r=n.texData.get(e.dataId),o=Qr.util.sizeFromShape(e.shape),a=e.shape[e.shape.length-1],i=oh({inputs:{x:e},backend:n,attrs:{shape:[o/a,a]}}),s=i.shape,c=new Lm("real",s,t),u=new Lm("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(c,l,"float32"),p=n.runWebGLProgram(u,l,"float32"),h=Fp({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const f=oh({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(h),f}const zm={kernelName:Qr.FFT,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Fm(r,!1,n)}};class Um{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function Wm(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:a}=n;if(a=a||Qr.util.inferDtype(o),"string"===a){const e=Qr.util.getArrayFromDType(a,Qr.util.sizeFromShape(r));return e.fill(o),t.makeTensorInfo(r,a,e)}{const e=new Um(r,o),n=[[o]];return t.runWebGLProgram(e,[],a,n)}}const Vm={kernelName:Qr.Fill,backendName:"webgl",kernelFunc:Wm};class qm{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Gm={kernelName:Qr.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,o=new qm(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}},Hm="return floor(x);",Km=Kp({opSnippet:Hm,packedOpSnippet:Hm,cpuKernelImpl:Ld}),Ym={kernelName:Qr.Floor,backendName:"webgl",kernelFunc:Km},Xm=Yp({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Zm={kernelName:Qr.FloorDiv,backendName:"webgl",kernelFunc:Xm};class Qm{constructor(e){this.variableNames=["A"];const t=ql(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class Jm{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ql(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const eg={kernelName:Qr.FromPixels,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:a}=r,i="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,[c,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=[u,c],d=[u,c,a];(s||i)&&(null==tg&&(tg=document.createElement("canvas").getContext("2d")),tg.canvas.width=c,tg.canvas.height=u,tg.drawImage(o,0,0,c,u),o=tg.canvas);const p=n.makeTensorInfo(l,"int32");n.texData.get(p.dataId).usage=hl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),o);const h=Object(Qr.env)().getBool("WEBGL_PACK")?new Jm(d):new Qm(d),f=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),f}};let tg;const ng={kernelName:Qr.FusedConv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dataFormat:l,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=Qr.backend_util.convertConv2DDataFormat(l),g=Qr.backend_util.computeConv2DInfo(o.shape,a.shape,c,d,u,p,!1,m);let b;const y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Object(Qr.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])b=Uf({x:o,filter:a,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:s,leakyreluAlpha:f});else{const e=null!=i,t=null!=s,r="leakyrelu"===h,c=h?Xp(h,!1):null,u=new Pf(g,e,c,t,r),l=[o,a];if(i&&l.push(i),s&&l.push(s),r){const e=n.makeTensorInfo([],"float32",Qr.util.createScalarValue(f,"float32"));l.push(e),y.push(e)}b=n.runWebGLProgram(u,l,"float32")}else b=zf({x:o,filter:a,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:s,leakyreluAlpha:f});const A=oh({inputs:{x:b},backend:n,attrs:{shape:g.outShape}});return y.push(b),y.forEach((e=>n.disposeIntermediateTensorInfo(e))),A}};const rg={kernelName:Qr.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:u,dilations:l,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,f=[];let m=l;null==m&&(m=[1,1]),Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(c,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations '${m}'`));const g=Qr.backend_util.computeConv2DInfo(o.shape,a.shape,c,m,u,d,!0),b=Object(Qr.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,y=p?Xp(p,b):null,A=[o,a],v=null!=i,x=null!=s,k="leakyrelu"===p;if(v&&A.push(i),x&&A.push(s),k){const e=n.makeTensorInfo([],"float32",Qr.util.createScalarValue(h,"float32"));A.push(e),f.push(e)}let w;w=b?new hm(g,v,y,x,k):new pm(g,v,y,x,k);const C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],S=n.runWebGLProgram(w,A,"float32",C);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};class og{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=cd(t.length),o=cd(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${o} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${a};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}const ag={kernelName:Qr.GatherNd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=o.shape,i=a[a.length-1],s=Qr.util.sizeFromShape(r.shape),[c,u,l,d]=Qr.backend_util.prepareAndValidate(r,o),p=oh({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),h=oh({inputs:{x:r},backend:n,attrs:{shape:[Qr.util.sizeFromShape(r.shape)/l,l]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(r),a=Fd(e,t,r.dtype,u,i,l,d,r.shape,s);return n.makeTensorInfo(c,r.dtype,a.values)}const f=new og(i,d,[u,l]),m=n.runWebGLProgram(f,[h,p],h.dtype),g=oh({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};class ig{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=cd(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("int(getIndices(resRC.x, resRC.z))"):r.push(`${n[t]}`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}function sg(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r,c=Qr.util.parseAxisParam(i,o.shape)[0],u=n.readSync(a.dataId),l=o.shape[c];for(let e=0;e<u.length;++e){const t=u[e];Qr.util.assert(t<=l-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${l-1}]`))}const d=Qr.backend_util.segment_util.collectGatherOpShapeInfo(o,a,c,s),p=Qr.util.sizeFromShape(a.shape),h=[],f=oh({inputs:{x:o},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),m=oh({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,p/d.batchSize]}});h.push(f),h.push(m);const g=[d.batchSize,d.outerSize,p/d.batchSize,d.sliceSize];if(n.shouldExecuteOnCPU([o,a])||"string"===o.dtype){const e=n.bufferSync(m),t=n.bufferSync(f),r=zd(t,e,g);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(d.outputShape,r.dtype,r.values)}const b=new ig(f.shape,g),y=n.runWebGLProgram(b,[f,m],f.dtype);h.push(y);const A=oh({inputs:{x:y},backend:n,attrs:{shape:d.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),A}const cg={kernelName:Qr.GatherV2,backendName:"webgl",kernelFunc:sg},ug=Yp({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Ud,dtype:"bool"}),lg={kernelName:Qr.Greater,backendName:"webgl",kernelFunc:ug},dg=Yp({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Wd}),pg={kernelName:Qr.GreaterEqual,backendName:"webgl",kernelFunc:dg};const hg={kernelName:Qr.IFFT,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return Fm(r,!0,n)}},fg=Kp({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),mg={kernelName:Qr.IsFinite,backendName:"webgl",kernelFunc:fg},gg=Kp({opSnippet:"return float(isinf(x));",dtype:"bool"}),bg={kernelName:Qr.IsInf,backendName:"webgl",kernelFunc:gg},yg=Kp({opSnippet:"return float(isnan(x));",dtype:"bool"}),Ag={kernelName:Qr.IsNan,backendName:"webgl",kernelFunc:yg},vg=Yp({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Vd,dtype:"bool"}),xg={kernelName:Qr.Less,backendName:"webgl",kernelFunc:vg},kg=Yp({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:qd,dtype:"bool"}),wg={kernelName:Qr.LessEqual,backendName:"webgl",kernelFunc:kg};const Cg={kernelName:Qr.LinSpace,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=Gd(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},Sg=Kp({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Hd}),Og={kernelName:Qr.Log,backendName:"webgl",kernelFunc:Sg},Eg=Kp({opSnippet:"return log(1.0 + x);"}),Ig={kernelName:Qr.Log1p,backendName:"webgl",kernelFunc:Eg},Tg=Yp({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Ng={kernelName:Qr.LogicalAnd,backendName:"webgl",kernelFunc:Tg},Rg=Kp({opSnippet:"return float(!(x >= 1.0));"}),jg={kernelName:Qr.LogicalNot,backendName:"webgl",kernelFunc:Rg},Bg=Yp({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),_g={kernelName:Qr.LogicalOr,backendName:"webgl",kernelFunc:Bg};class Dg{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];const a=t,i=e[3]-1;let s;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;s=.5===o?`inversesqrt(${c})`:1===o?`1.0/(${c})`:`exp(log(${c}) * float(-${o}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}class Mg{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,i=e[3]-1;let s;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;s=.5===o?`inversesqrt(${c})`:1===o?`1.0/(${c})`:`exp(log(${c}) * float(-${o}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}const $g={kernelName:Qr.LRN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:c}=r,u=Object(Qr.env)().getBool("WEBGL_PACK_NORMALIZATION")?new Mg(o.shape,a,i,s,c):new Dg(o.shape,a,i,s,c);return n.runWebGLProgram(u,[o],o.dtype)}};class Pg{constructor(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${o})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${o});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const Lg={kernelName:Qr.LRNGrad,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:c,alpha:u,beta:l}=r,d=new Pg(o.shape,s,c,u,l);return n.runWebGLProgram(d,[o,a,i],o.dtype)}};function Fg(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=o.shape.length,c=Qr.util.parseAxisParam(a,o.shape);let u=c;const l=Qr.backend_util.getAxesPermutation(u,s),d=null!=l,p=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(p){const e=n.texData.get(h.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=o.shape[l[e]];const r=bp(e,o.shape,o.dtype,l,t);h=n.makeTensorInfo(t,o.dtype);n.texData.get(h.dataId).values=r}else h=dh(o,l,n);u=Qr.backend_util.getInnerMostAxes(u.length,s)}Qr.backend_util.assertAxesAreInnerMostDims("max",u,s);const[f,m]=Qr.backend_util.computeOutAndReduceShapes(h.shape,u);let g,b=f;if(i&&(b=Qr.backend_util.expandShapeToKeepDim(f,c)),p){const e=n.texData.get(h.dataId).values,t=Kd(e,Qr.util.sizeFromShape(m),b,o.dtype);g=n.makeTensorInfo(b,o.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const o=Qr.util.sizeFromShape(t),a=oh({inputs:{x:e},attrs:{shape:[Qr.util.sizeFromShape(e.shape)/o,o]},backend:r}),i=ch(a,e.dtype,"max",r),s=oh({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(h,m,b,n);return d&&n.disposeIntermediateTensorInfo(h),g}const zg={kernelName:Qr.Max,backendName:"webgl",kernelFunc:Fg},Ug=Yp({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Yd}),Wg={kernelName:Qr.Maximum,backendName:"webgl",kernelFunc:Ug};const Vg={kernelName:Qr.MaxPool,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;Wl(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const u=Qr.backend_util.computePool2DInfo(o.shape,a,i,1,s,c);if(1===u.filterWidth&&1===u.filterHeight&&Qr.util.arraysEqual(u.inShape,u.outShape))return Pp({inputs:{x:o},backend:n});const l=new Yh(u,"max",!1);return n.runWebGLProgram(l,[o],o.dtype)}};const qg={kernelName:Qr.MaxPool3D,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dataFormat:c,dimRoundingMode:u}=r,l=Qr.backend_util.computePool3DInfo(o.shape,a,i,[1,1,1],s,u,c),d=new Xh(l,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}};class Gg{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,c=o*a-1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Hg{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.front,d=c-1-e.padInfo.top,p=u-1-e.padInfo.left,h=s*c*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${d}, ${p});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${o}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${a}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${i}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Kg={kernelName:Qr.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:c,pad:u,dimRoundingMode:l}=r,d=Qr.backend_util.computePool3DInfo(i.shape,s,c,[1,1,1],u,l),p=new Xh(d,"max",!0),h=n.runWebGLProgram(p,[i],i.dtype),f=new Hg(d),m=n.runWebGLProgram(f,[o,h],i.dtype);return n.disposeIntermediateTensorInfo(h),m}};const Yg={kernelName:Qr.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;Wl([a,i],"maxPoolGrad");const{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=Qr.backend_util.computePool2DInfo(s.shape,c,u,1,l,d),h=new Yh(p,"max",!0),f=n.runWebGLProgram(h,[s],s.dtype),m=new Gg(p),g=n.runWebGLProgram(m,[o,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const Xg={kernelName:Qr.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:o,strides:a,pad:i,includeBatchInIndex:s}=t,c=n;Qr.util.assert(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const u=[1,1];Qr.util.assert(Qr.backend_util.eitherStridesOrDilationsAreOne(a,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`));const l=Qr.backend_util.computePool2DInfo(r.shape,o,a,u,i),[d,p]=function(e,t,n,r){let o=new Yh(n,"max",!1);const a=r.runWebGLProgram(o,[e],"float32");return o=new Yh(n,"max",!0,!0,t),[a,r.runWebGLProgram(o,[e],"float32")]}(r,s,l,c);return[d,p]}};const Zg={kernelName:Qr.Mean,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:o,axis:a}=t,i=n,s=r.shape.length,c=Qr.util.parseAxisParam(a,r.shape);let u=c;const l=Qr.backend_util.getAxesPermutation(u,s),d=null!=l,p=i.shouldExecuteOnCPU([r]),h=[];let f=r;if(d){if(p){const e=i.texData.get(f.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=r.shape[l[e]];const n=bp(e,r.shape,r.dtype,l,t);f=i.makeTensorInfo(t,r.dtype);i.texData.get(f.dataId).values=n}else f=dh(r,l,i);h.push(f),u=Qr.backend_util.getInnerMostAxes(u.length,s)}Qr.backend_util.assertAxesAreInnerMostDims("sum",u,s);const[m,g]=Qr.backend_util.computeOutAndReduceShapes(f.shape,u);let b=m;o&&(b=Qr.backend_util.expandShapeToKeepDim(m,c));const y=function(e,t,n,r){const o=Qr.util.sizeFromShape(t),a=oh({inputs:{x:e},attrs:{shape:[Qr.util.sizeFromShape(e.shape)/o,o]},backend:r}),i=ch(a,"float32","mean",r),s=oh({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(f,g,b,i);for(const e of h)i.disposeIntermediateTensorInfo(e);return y}};const Qg={kernelName:Qr.Min,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=Qr.util.parseAxisParam(a,o.shape);let u=c;const l=Qr.backend_util.getAxesPermutation(u,s);let d=o;null!=l&&(d=fh({inputs:{x:o},backend:n,attrs:{perm:l}}),u=Qr.backend_util.getInnerMostAxes(u.length,o.shape.length)),Qr.backend_util.assertAxesAreInnerMostDims("min",u,s);const[p,h]=Qr.backend_util.computeOutAndReduceShapes(d.shape,u),f=oh({inputs:{x:d},backend:n,attrs:{shape:[-1,Qr.util.sizeFromShape(h)]}}),m=ch(f,f.dtype,"min",n);let g;if(i){g=oh({inputs:{x:m},backend:n,attrs:{shape:Qr.backend_util.expandShapeToKeepDim(p,c)}})}else g=oh({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(d),g}},Jg=Yp({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Xd}),eb={kernelName:Qr.Minimum,backendName:"webgl",kernelFunc:Jg};class tb{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=cd(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===n?0:1;this.userCode=1!==r?`\n      ${o} start = ${o}(${a});\n      ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${o} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class nb{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=cd(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=vp("rc",r),c=vp("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d="reflect"===n?0:1;let p="";if(1===r){const e=`\n        ${o} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${d};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${d};\n        }\n        source -= start;\n      `;p=`\n        ${o} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n      `}else{const e=`\n        ${o} source = rc;\n        ${o} lt = ${o}(lessThan(source, start));\n        ${o} gte = ${o}(greaterThanEqual(source, end));\n        ${o} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${d}) +\n                gte * ((end - 1) * 2 - source + ${d});\n        source -= start;\n      `;p=`\n        ${o} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${c.join()}), ${l});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${c.join()}), ${l});\n          }\n        }\n      `}this.userCode=`\n      const ${o} start = ${o}(${a});\n      const ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const rb={kernelName:Qr.MirrorPad,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:o,mode:a}=n,i=Object(Qr.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nb(r.shape,o,a):new tb(r.shape,o,a);return t.runWebGLProgram(i,[r],r.dtype)}},ob=Yp({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),ab={kernelName:Qr.Mod,backendName:"webgl",kernelFunc:ob};class ib{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const sb=Yp({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),cb={kernelName:Qr.RealDiv,backendName:"webgl",kernelFunc:sb},ub="return a - b;",lb=Yp({opSnippet:ub,packedOpSnippet:ub,supportsComplex:!0,cpuKernelImpl:fp}),db={kernelName:Qr.Sub,backendName:"webgl",kernelFunc:lb};function pb(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=Qr.util.parseAxisParam([a],o.shape),s=Fg({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),c=Qr.backend_util.expandShapeToKeepDim(s.shape,i),u=oh({inputs:{x:s},backend:n,attrs:{shape:c}}),l=lb({inputs:{a:o,b:u},backend:n}),d=jm({inputs:{x:l},backend:n}),p=ph({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=oh({inputs:{x:p},backend:n,attrs:{shape:c}}),f=sb({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),f}const hb={kernelName:Qr.Softmax,backendName:"webgl",kernelFunc:pb};const fb={kernelName:Qr.Multinomial,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r,c=s?o:pb({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=c.shape[0],l=c.shape[1],d=new ib(u,l,a),p=[[i]],h=n.runWebGLProgram(d,[c],"int32",p);return s||n.disposeIntermediateTensorInfo(c),h}},mb="return -x;";const gb={kernelName:Qr.Neg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,o]=Qd(e.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,t)}let o;return o=Object(Qr.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Np(r.shape,mb):new Ep(r.shape,mb),n.runWebGLProgram(o,[r],r.dtype)}},bb=Qr.kernel_impls.nonMaxSuppressionV3Impl;const yb={kernelName:Qr.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){Qr.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=r,u=n.readSync(o.dataId),l=n.readSync(a.dataId),{selectedIndices:d}=bb(u,l,i,s,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Ab=Qr.kernel_impls.nonMaxSuppressionV4Impl;const vb={kernelName:Qr.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){Qr.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:u}=r,l=n.readSync(o.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:h}=Ab(l,d,i,s,c,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},xb=Qr.kernel_impls.nonMaxSuppressionV5Impl;const kb={kernelName:Qr.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){Qr.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:u}=r,l=n.readSync(o.dataId),d=n.readSync(a.dataId),p=i,h=s,f=c,m=u,{selectedIndices:g,selectedScores:b}=xb(l,d,p,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}};class wb{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const Cb={kernelName:Qr.OneHot,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{depth:a,onValue:i,offValue:s}=r,c=Qr.util.sizeFromShape(o.shape),u=new wb(c,a,i,s),l=oh({inputs:{x:o},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[l],o.dtype);n.disposeIntermediateTensorInfo(l);const p=oh({inputs:{x:d},backend:n,attrs:{shape:[...o.shape,a]}});return n.disposeIntermediateTensorInfo(d),p}};function Sb(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=yf({inputs:{input:r},backend:n}),t=Sb({inputs:{x:e},backend:n}),o=Bf({inputs:{input:r},backend:n}),a=Sb({inputs:{x:o},backend:n}),i=Fp({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return Wm({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Ob={kernelName:Qr.ZerosLike,backendName:"webgl",kernelFunc:Sb};const Eb={kernelName:Qr.OnesLike,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===o.dtype){const t=yf({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=Bf({inputs:{input:o},backend:r}),i=Sb({inputs:{x:a},backend:r}),s=Fp({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return Wm({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:r})}};const Ib={kernelName:Qr.Pack,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return _m({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{Qr.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Qr.util.assert(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=Mf({inputs:t.map((e=>{const t=_m({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};class Tb{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=cd(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${o} start = ${o}(${a});\n      ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${o} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class Nb{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=cd(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=vp("rc",r),c=vp("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d=[`${o} rc = outputLoc;`,`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let e=0,t=1===r?2:4;e<t;e++)h+=`\n        ${d[e]}\n        if (${p}) {\n          result[${e}] = float(value);\n        } else {\n          ${o} source = rc - start;\n          result[${e}] = getChannel(getX(${c.join()}), ${l});\n        }\n      `;h+=1===r?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${a});\n      const ${o} end = ${o}(${i});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const Rb=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;if(0===Qr.util.sizeFromShape(o.shape)){return Wm({backend:n,attrs:{shape:a.map(((e,t)=>e[0]+o.shape[t]+e[1])),value:i,dtype:o.dtype}})}const s=Object(Qr.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nb(o.shape,a,i):new Tb(o.shape,a,i),c=[[i]];return n.runWebGLProgram(s,[o],o.dtype,c)},jb={kernelName:Qr.PadV2,backendName:"webgl",kernelFunc:Rb},Bb=Yp({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),_b={kernelName:Qr.Pow,backendName:"webgl",kernelFunc:Bb};const Db={kernelName:Qr.Prod,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=[],u=Qr.util.parseAxisParam(a,o.shape);let l=u;const d=Qr.backend_util.getAxesPermutation(l,s);let p,h=o;if(null!=d&&(h=fh({inputs:{x:o},backend:n,attrs:{perm:d}}),l=Qr.backend_util.getInnerMostAxes(l.length,s),c.push(h)),Qr.backend_util.assertAxesAreInnerMostDims("prod",l,s),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:r,outDtype:o}=ep(h.shape,h.dtype,e,l);p=n.makeTensorInfo(r,o,t)}else{const[e,t]=Qr.backend_util.computeOutAndReduceShapes(h.shape,l),r=Qr.util.sizeFromShape(t),a=oh({inputs:{x:h},backend:n,attrs:{shape:[-1,r]}}),i=ch(a,Object(Qr.sumOutType)(o.dtype),"prod",n);p=oh({inputs:{x:i},backend:n,attrs:{shape:e}}),c.push(a),c.push(i)}if(i){c.push(p);const e=Qr.backend_util.expandShapeToKeepDim(p.shape,u);p=oh({inputs:{x:p},backend:n,attrs:{shape:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}},Mb=e=>{const{backend:t,attrs:n}=e,{start:r,stop:o,step:a,dtype:i}=n,s=tp(r,o,a,i);return t.makeTensorInfo([s.length],i,s)},$b={kernelName:Qr.Range,backendName:"webgl",kernelFunc:Mb},Pb=Kp({opSnippet:"return 1.0 / x;"}),Lb={kernelName:Qr.Reciprocal,backendName:"webgl",kernelFunc:Pb},Fb=Kp({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),zb={kernelName:Qr.Relu,backendName:"webgl",kernelFunc:Fb},Ub=Kp({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Wb={kernelName:Qr.Relu6,backendName:"webgl",kernelFunc:Ub};class Vb{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class qb{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const Gb={kernelName:Qr.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[c,u]=s,l=Object(Qr.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qb(o.shape,c,u,a,i):new Vb(o.shape,c,u,a,i);return n.runWebGLProgram(l,[o],"float32")}};class Hb{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],c=[n&&a>1?a-1:a,n&&i>1?i-1:i],u=s[0]/c[0],l=s[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Kb={kernelName:Qr.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new Hb(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class Yb{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class Xb{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const u=[r&&t>1?i-1:i,r&&n>1?s-1:s],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const Zb={kernelName:Qr.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[c,u]=s,l=Object(Qr.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Xb(o.shape,c,u,a,i):new Yb(o.shape,c,u,a,i);return n.runWebGLProgram(l,[o],o.dtype)}};class Qb{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],c=[n&&a>1?a-1:a,n&&i>1?i-1:i],u=s[0]/c[0],l=s[1]/c[1],d=1/u,p=1/l,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${o}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Jb={kernelName:Qr.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new Qb(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class ey{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),o=cd(n);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class ty{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=vp("rc",n),o=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,i=cd(n);function s(n){const r=e.map(((r,o)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(o,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${o}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return s(e)}(r.slice())};\n          if(${o}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            if(${o}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const ny={kernelName:Qr.Reverse,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r,i=o.shape.length,s=Qr.util.parseAxisParam(a,o.shape);if(0===i)return Pp({inputs:{x:o},backend:n});const c=Object(Qr.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ty(o.shape,s):new ey(o.shape,s);return n.runWebGLProgram(c,[o],o.dtype)}};class ry{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let o="";o="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${o}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const oy={kernelName:Qr.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:o,fillValue:a,center:i}=t,s=n,c=new ry(r.shape,a),[u,l]=Qr.backend_util.getImageCenter(i,r.shape[1],r.shape[2]),d=[[u,l,Math.sin(o),Math.cos(o)]];return s.runWebGLProgram(c,[r],r.dtype,d)}},ay=Kp({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),iy={kernelName:Qr.Round,backendName:"webgl",kernelFunc:ay},sy=Kp({opSnippet:"return inversesqrt(x);",cpuKernelImpl:np}),cy={kernelName:Qr.Rsqrt,backendName:"webgl",kernelFunc:sy};class uy{constructor(e,t,n,r,o,a,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const s=cd(o.length),c=cd(a.length);let u="";1===n?u="i":2===n&&(u="i, j");const l=`getIndices(${u})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const p=`getUpdates(${d})`,h=t>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${o});\n\n        void main() {\n          ${c} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${l});\n              flattenedIndex += index * ${h};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}const ly={kernelName:Qr.ScatterNd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:c,sliceSize:u,strides:l,outputSize:d}=Qr.backend_util.calculateShapes(a,o,i),p=[d/u,u];if(0===d)return n.makeTensorInfo(i,o.dtype);const h=oh({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),f=oh({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new uy(c,s,h.shape.length,f.shape.length,l,p),b=n.runWebGLProgram(g,[f,h,m],f.dtype),y=oh({inputs:{x:b},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(m),y}};class dy{constructor(e,t,n){let r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)o="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=[];for(let r=0;r<t.length;r++)i.push(`${n[r]}`),r<e&&a.push(`${n[r]}`);r=a.join(),o=i.join()}const a=cd(n);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${o}));\n        } else {\n          setOutput(getB(${o}));\n        }\n      }\n    `}}const py={kernelName:Qr.Select,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t,i=new dy(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,a],Object(Qr.upcastType)(o.dtype,a.dtype))}},hy=Kp({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Qr.backend_util.SELU_SCALEALPHA};\n  float scale = ${Qr.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),fy={kernelName:Qr.Selu,backendName:"webgl",kernelFunc:hy},my="return 1.0 / (1.0 + exp(-1.0 * x));",gy=Kp({opSnippet:my,packedOpSnippet:my,cpuKernelImpl:rp}),by={kernelName:Qr.Sigmoid,backendName:"webgl",kernelFunc:gy},yy=Kp({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Ay={kernelName:Qr.Sign,backendName:"webgl",kernelFunc:yy},vy=Kp({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),xy={kernelName:Qr.Sin,backendName:"webgl",kernelFunc:vy},ky=Kp({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),wy={kernelName:Qr.Sinh,backendName:"webgl",kernelFunc:ky},Cy=Kp({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Sy={kernelName:Qr.Softplus,backendName:"webgl",kernelFunc:Cy},Oy={kernelName:Qr.SpaceToBatchND,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;Qr.util.assert(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...i);for(let e=1+a.length;e<o.shape.length;++e)c.push([0,0]);const u=[],l=Rb({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),d=Qr.backend_util.getReshaped(l.shape,a,s,!1),p=Qr.backend_util.getPermuted(d.length,a.length,!1),h=Qr.backend_util.getReshapedPermuted(l.shape,a,s,!1),f=oh({inputs:{x:l},backend:n,attrs:{shape:d}}),m=fh({inputs:{x:f},backend:n,attrs:{perm:p}}),g=oh({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(l),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const Ey={kernelName:Qr.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==o.shape.length)throw new Error(`Values must be a vector, saw:\n         ${o.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const s=n.readSync(r.dataId),c=n.readSync(o.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId)[0],[d,p,h,f,m]=ip(s,r.shape,r.dtype,c,o.dtype,u,l);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],o.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const Iy={kernelName:Qr.SparseReshape,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==o.shape.length)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.readSync(o.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(a.dataId)),[u,l,d]=sp(s,r.shape,r.dtype,i,c);return[n.makeTensorInfo(l,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};const Ty={kernelName:Qr.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${a.shape}`);const i=n.readSync(r.dataId),s=n.readSync(o.dataId),c=n.readSync(a.dataId),[u,l]=cp(i,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(l,r.dtype,u)}};const Ny={kernelName:Qr.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${o.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${a.shape}`);const i=n.readSync(r.dataId),s=n.readSync(o.dataId),c=n.readSync(a.dataId),[u,l]=cp(i,r.shape,r.dtype,s,c);return n.makeTensorInfo(l,r.dtype,u)}};const Ry={kernelName:Qr.SparseToDense,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:c,numUpdates:u,strides:l,outputSize:d}=Qr.backend_util.calculateShapes(a,o,s),p=new uy(u,c,o.shape.length,a.shape.length,l,[d,1],!1),h=n.runWebGLProgram(p,[a,o,i],a.dtype),f=oh({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),f}};const jy={kernelName:Qr.SplitV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=Qr.util.parseAxisParam(i,o.shape)[0],c=Qr.backend_util.prepareSplitSize(o,a,s),u=o.shape.length,l=new Array(u).fill(0),d=o.shape.slice();return c.map((e=>{const t=[...d];t[s]=e;const r=df({inputs:{x:o},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},By="return sqrt(x);",_y=Kp({opSnippet:By,packedOpSnippet:By,cpuKernelImpl:up}),Dy={kernelName:Qr.Sqrt,backendName:"webgl",kernelFunc:_y},My=Kp({opSnippet:"return x * x;"}),$y={kernelName:Qr.Square,backendName:"webgl",kernelFunc:My},Py="return (a - b) * (a - b);",Ly=Yp({opSnippet:Py,packedOpSnippet:Py}),Fy={kernelName:Qr.SquaredDifference,backendName:"webgl",kernelFunc:Ly};const zy={kernelName:Qr.Step,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,o=`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,a=new Ep(r.shape,o);return n.runWebGLProgram(a,[r],r.dtype)}};class Uy{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,o=cd(n.length),a=cd(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${o} begin = ${o}(${e});\n      ${o} strides = ${o}(${t});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}const Wy={kernelName:Qr.StridedSlice,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:c,endMask:u,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:A,strides:v}=Qr.slice_util.sliceInfo(o.shape,a,i,s,c,u,l,d,p);let x;if(m)x=oh({inputs:{x:o},backend:n,attrs:{shape:f}});else if(g||b){Qr.util.assert(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const e=Qr.slice_util.computeOutShape(y,A,v),t=df({inputs:{x:o},backend:n,attrs:{begin:y,size:e}});x=oh({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=Object(Qr.buffer)(o.shape,o.dtype,e),r=lp(h,t,v,y);x=n.makeTensorInfo(f,o.dtype,r.values)}else{const e=new Uy(y,v,h);x=n.runWebGLProgram(e,[o],o.dtype)}}const k=oh({inputs:{x:x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(x),k}};const Vy={kernelName:Qr.StringNGrams,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:c,preserveShortSequences:u}=r,{data:l,dataSplits:d}=t,p=n.readSync(l.dataId),h=n.readSync(d.dataId),[f,m]=dp(p,h,o,a,i,s,c,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};const qy={kernelName:Qr.StringSplit,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const s=n.readSync(a.dataId),c=n.readSync(i.dataId)[0],[u,l,d]=pp(s,c,o),p=l.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const Gy={kernelName:Qr.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),s=hp(i,o);return n.makeTensorInfo(a.shape,"int32",s)}},Hy=Kp({opSnippet:"return tan(x);"}),Ky={kernelName:Qr.Tan,backendName:"webgl",kernelFunc:Hy},Yy=Kp({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Xy={kernelName:Qr.Tanh,backendName:"webgl",kernelFunc:Yy};class Zy{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=cd(this.rank),o=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${o}));\n      }\n    `}}function Qy(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>Qr.util.decodeString(e))):e,r=Object(Qr.buffer)(o.shape,o.dtype,t),i=mp(r,a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new Zy(o.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const Jy={kernelName:Qr.Tile,backendName:"webgl",kernelFunc:Qy};class eA{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class tA{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function nA(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function rA(e){let t=1;for(;t<e;)t*=2;return t}const oA={kernelName:Qr.TopK,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r,s=Object(Qr.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=Object(Qr.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,l=u[u.length-1];if(n.shouldExecuteOnCPU([o])||l<s||a>c){const e=n.readSync(o.dataId),[t,r]=gp(e,u,o.dtype,a,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===l)return[o,Wm({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),p=null!==d&&d.isPacked,h=p?n.unpackTensor(o):o,f=Qr.util.sizeFromShape(u)/l,m=oh({inputs:{x:h},attrs:{shape:[f,l]},backend:n});p&&nA(n,h);const g=rA(a),b=rA(l);let y=null;const A=()=>null===y?[m,m]:[m,y],v=(e,t,r)=>{const o=A(),a=new eA(r),i=[[l],[null===y?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=y;y=n.runWebGLProgram(a,o,"int32",i),nA(n,s)};for(let e=1;e<g;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)v(t,n,[f,b])}for(let e=b;e>g;e/=2){const t=A(),r=new tA([f,e/2]),o=[[l],[null===y?1:0],[g]],a=y;y=n.runWebGLProgram(r,t,"int32",o),nA(n,a);const i=g/2,s=2*i;for(let e=i;e>=1;e/=2)v(s,e,y.shape)}let x=y;y=df({inputs:{x:y},backend:n,attrs:{begin:0,size:[f,a]}}),nA(n,x);let k=sg({inputs:{x:m,indices:y},backend:n,attrs:{axis:1,batchDims:1}});nA(n,m);const w=u.slice(0,-1);w.push(a),x=y,y=oh({inputs:{x:y},attrs:{shape:w},backend:n}),nA(n,x);const C=k;return k=oh({inputs:{x:k},attrs:{shape:w},backend:n}),nA(n,C),[k,y]}};class aA{constructor(e,t,n,r,o,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i="nearest"===n?1:2;let s;switch(r){case"constant":s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4;break;default:s=1}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${s} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${o});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${o});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${i} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const iA={kernelName:Qr.Transform,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:c,outputShape:u}=r,[l,d,p,h]=o.shape,[f,m]=null!=u?u:[d,p],g=new aA(d,p,i,s,c,[l,f,m,h]);return n.runWebGLProgram(g,[o,a],"float32")}};const sA={kernelName:Qr.Unique,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;Wl(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:s,outputShape:c,indices:u}=yp(i,o,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const cA={kernelName:Qr.Unpack,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o,s=i.shape.length,c=o.shape[a],u=new Array(s-1);let l=0;for(let e=0;e<s;e++)e!==a&&(u[l++]=i.shape[e]);const d=[],p=new Array(s).fill(0),h=i.shape.slice();h[a]=1;const f=new Array(c);for(let e=0;e<f.length;e++){p[a]=e;const t=df({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),r=oh({inputs:{x:t},backend:n,attrs:{shape:u}});f[e]=r,d.push(t)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class uA{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];const s=4*Math.floor(n/4),c=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let l="";o%n>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return initializationValue;\n        }\n      `);let d="";o%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${d}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const lA=[$g,Lg,bh,Ah,xh,wh,Oh,Th,Nh,Rh,$h,Ph,Fh,Uh,Gh,Vh,Kh,Qh,Zh,tf,nf,rf,sf,hf,ff,mf,vf,wf,Of,Tf,zp,$f,Kf,Yf,Wf,Zf,Qf,Xf,em,nm,om,cm,um,dm,bm,ym,fm,vm,km,wm,Sm,Om,Im,Nm,Bm,Dm,Pm,zm,Vm,Gm,Ym,Zm,eg,ng,rg,ag,cg,lg,pg,Lp,hg,_f,mg,bg,Ag,Vp,xg,wg,Cg,Ig,Og,Ng,jg,_g,zg,qg,Vg,Kg,Yg,Xg,Wg,Zg,Qg,eb,rb,ab,fb,rh,gb,yb,vb,kb,bf,Cb,Eb,Ib,jb,_b,Hp,Db,$b,Af,cb,Lb,Wb,zb,ah,Gb,Kb,Zb,Jb,ny,oy,iy,cy,ly,py,fy,by,Ay,xy,wy,pf,hb,Sy,Oy,Ey,Iy,Ty,Ny,Ry,jy,Dy,$y,Fy,zy,Wy,Vy,qy,Gy,db,hh,Ky,Xy,Jy,oA,iA,mh,sA,cA,{kernelName:Qr.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r,s=o.shape.length,c=[];let u=0;const l=Qr.backend_util.getAxesPermutation([u],s);let d=o;null!=l&&(d=fh({inputs:{x:o},backend:n,attrs:{perm:l}}),c.push(d),u=Qr.backend_util.getInnerMostAxes(1,s)[0]);const p=Qr.backend_util.segment_util.computeOutShape(d.shape,u,i),h=Qr.util.sizeFromShape([d.shape[u]]),f=oh({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});c.push(f);const m=Object(Qr.sumOutType)(o.dtype),g=(e,t,r,o,a)=>{const i=e.shape[0],s=e.shape[1],u=Qr.backend_util.segment_util.segOpComputeOptimalWindowSize(s,a),l=new uA({windowSize:u,inSize:s,batchSize:i,numSegments:a},t),d=n.compileAndRun(l,[e,r],o);if(c.push(d),d.shape[1]===a)return d;const p=Mb({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),h=Qy({inputs:{x:p},backend:n,attrs:{reps:[s/u]}});c.push(p),c.push(h);return g(d,t,h,o,a)},b=oh({inputs:{x:g(f,"unsortedSegmentSum",a,m,i)},backend:n,attrs:{shape:p}});let y=b;if(null!=l){c.push(b);const e=Qr.backend_util.getUndoAxesPermutation(l);y=fh({inputs:{x:y},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}},Ob];for(const e of lA)Object(Qr.registerKernel)(e);var dA=n(46),pA=n(2);class hA{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return Object(pA.e)(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return Object(pA.e)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(dA.f)(this.node.rawAttrs,e,t);if(null!=n.s)return Object(dA.i)(this.node.rawAttrs,e,t);if(null!=n.b)return Object(dA.c)(this.node.rawAttrs,e,t);if(null!=n.shape)return Object(dA.k)(this.node.rawAttrs,e,t);if(null!=n.type)return Object(dA.e)(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(dA.g)(this.node.rawAttrs,e,t);if(null!=n.list.s)return Object(dA.h)(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Object(dA.j)(this.node.rawAttrs,e,t);if(null!=n.list.b)return Object(dA.b)(this.node.rawAttrs,e,t);if(null!=n.list.type)return Object(dA.d)(this.node.rawAttrs,e,t)}return t}}var fA=n(87),mA=n(12),gA=n(183),bA=n(218),yA=n(11),AA=n(19),vA=n(206),xA=n(124),kA=n(13),wA=n(140),CA=n(125),SA=n(67),OA=n(148);var EA=n(38),IA=n(181),TA=n(182),NA=n(188),RA=n(189),jA=n(190),BA=n(191),_A=n(192),DA=n(195),MA=n(48),$A=n(200),PA=n(201),LA=n(130),FA=n(208),zA=n(55),UA=n(209),WA=n(131),VA=n(68),qA=n(135),GA=n(97),HA=n(44),KA=n(222),YA=n(91),XA=n(78),ZA=n(146),QA=n(224),JA=n(64),ev=n(227),tv=n(226),nv=n(228),rv=n(136),ov=n(54),av=n(37),iv=n(114),sv=n(231),cv=n(196),uv=n(145),lv=n(223),dv=n(221),pv=n(134),hv=n(143),fv=n(210);function mv(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){Qr.util.assert(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];Qr.util.assert(o<0||a<0||o===a,(()=>n+` Shapes ${e} and ${t} must match`))}}}function gv(e){return"number"!=typeof e&&!e.some((e=>e<0))}function bv(e,t,n){let r=yv(e,n);const o=!gv(r);if(o&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach((e=>{r=yv(e.shape,r)})),!gv(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function yv(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const o=e[r],a=t[r];if(o>=0&&a>=0&&o!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=o>=0?o:a}return n}class Av{constructor(e,t,n,r,o,a,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Object(Qr.scalar)(0),Object(Qr.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),mv(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Object(Qr.keep)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Object(Qr.tensor)([],[0].concat(this.elementShape));const n=this.readMany(e);return mv(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Object(Qr.stack)(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Object(Qr.tensor)([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return mv(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Object(Qr.concat)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,Object(Qr.unstack)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=0===n?0:t.size/n,a=[];Object(Qr.tidy)((()=>{t=Object(Qr.reshape)(t,[1,n,o]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],s=[1,e[n],o];a[n]=Object(Qr.reshape)(Object(Qr.slice)(t,i,s),this.elementShape)}return a}));const i=[];for(let t=0;t<e.length;t++)i[t]=t;this.writeMany(i,a)}}class vv{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);mv(t,e.shape,"TensorList shape mismatch: "),Object(Qr.keep)(e)})),this.idTensor=Object(Qr.scalar)(0),this.maxNumElements=r,Object(Qr.keep)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new vv([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);mv(e,this.elementShape,"TensorList shape mismatch: ");const r=bv(this.elementShape,this.tensors,e);return Object(Qr.tidy)((()=>{const e=this.tensors.map((e=>Object(Qr.reshape)(e,r)));return Object(Qr.stack)(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=bv(this.elementShape,this.tensors,e),r=this.tensors.pop();return mv(r.shape,e,"TensorList shape mismatch: "),Object(Qr.reshape)(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(mv(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(Qr.keep)(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);mv(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=bv(this.elementShape,this.tensors,t);return Object(Qr.reshape)(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);mv(this.elementShape,t.shape,"TensorList shape mismatch: "),Object(Qr.keep)(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);mv(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=bv(this.elementShape,this.tensors,n);return 0===e.length?Object(Qr.tensor)([],[0].concat(r)):Object(Qr.tidy)((()=>{const t=e.map((e=>Object(Qr.reshape)(this.tensors[e],r)));return Object(Qr.stack)(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);mv(this.elementShape,t,"TensorList shape mismatch: ");const n=bv(this.elementShape,this.tensors,t);return 0===this.size()?Object(Qr.tensor)([],[0].concat(n)):Object(Qr.tidy)((()=>{const e=this.tensors.map((e=>Object(Qr.reshape)(e,n)));return Object(Qr.concat)(e,0)}))}}const xv=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=Object(pA.d)("thenBranch",e,t,n),o=Object(pA.d)("elseBranch",e,t,n),a=Object(pA.d)("cond",e,t,n),i=Object(pA.d)("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Object(pA.d)("body",e,t,n),o=Object(pA.d)("cond",e,t,n),a=Object(pA.d)("args",e,t,n),i=await n.functionMap[o].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map((e=>e.id));let c=await i[0].data();i.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let u=a;for(;c[0];){const e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await n.functionMap[o].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);c=await a[0].data(),a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return u}case"LoopCond":{const r=Object(pA.d)("pred",e,t,n);return[Object(pA.a)(r)]}case"Switch":{const r=Object(pA.d)("pred",e,t,n);let o=Object(pA.d)("data",e,t,n);return o.kept||(o=Object(pA.a)(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==Object(pA.e)(e,t,n)));if(r){const e=Object(pA.e)(r,t,n);return[Object(pA.a)(e)]}return}case"Enter":{const r=Object(pA.d)("frameName",e,t,n),o=Object(pA.d)("tensor",e,t,n);return n.enterFrame(r),[Object(pA.a)(o)]}case"Exit":{const r=Object(pA.d)("tensor",e,t,n);return n.exitFrame(),[Object(pA.a)(r)]}case"NextIteration":{const r=Object(pA.d)("tensor",e,t,n);return n.nextIteration(),[Object(pA.a)(r)]}case"TensorArrayV3":{const r=Object(pA.d)("size",e,t,n),o=Object(pA.d)("dtype",e,t,n),a=Object(pA.d)("elementShape",e,t,n),i=Object(pA.d)("dynamicSize",e,t,n),s=Object(pA.d)("clearAfterRead",e,t,n),c=Object(pA.d)("identicalElementShapes",e,t,n),u=Object(pA.d)("name",e,t,n),l=new Av(u,o,r,a,c,i,s);return n.addTensorArray(l),[l.idTensor,Object(Qr.scalar)(1)]}case"TensorArrayWriteV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=Object(pA.d)("index",e,t,n),a=Object(pA.d)("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(o,a),[i.idTensor]}case"TensorArrayReadV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=Object(pA.d)("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=Object(pA.d)("indices",e,t,n),a=Object(pA.d)("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,a)]}case"TensorArrayScatterV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=Object(pA.d)("indices",e,t,n),a=Object(pA.d)("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(o,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),a=Object(pA.d)("dtype",e,t,n);return[o.concat(a)]}case"TensorArraySplitV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=Object(pA.d)("tensor",e,t,n),a=Object(pA.d)("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(a,o),[i.idTensor]}case"TensorArraySizeV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return[Object(Qr.scalar)(o.size(),"int32")]}case"TensorArrayCloseV3":{const r=Object(pA.d)("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const r=Object(pA.d)("tensorListId",e,t,n),o=Object(pA.d)("index",e,t,n),a=Object(pA.d)("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(o,a),[i.idTensor]}case"TensorListGetItem":{const r=Object(pA.d)("tensorListId",e,t,n),o=Object(pA.d)("index",e,t,n),a=Object(pA.d)("elementShape",e,t,n),i=Object(pA.d)("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Object(pA.d)("indices",e,t,n),o=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(null!=r&&-1!==r&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);const a=new vv([],n,e.dtype,r),i=Object(Qr.unstack)(e,0);return t.forEach(((e,t)=>{a.setItem(e,i[t])})),a}(Object(pA.d)("tensor",e,t,n),r,Object(pA.d)("elementShape",e,t,n),Object(pA.d)("numElements",e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Object(pA.d)("elementShape",e,t,n),o=Object(pA.d)("elementDType",e,t,n);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=function(e,t,n){return new vv([],e,t,n)}(r,o,Object(pA.d)(a,e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListGather":{const r=Object(pA.d)("tensorListId",e,t,n),o=Object(pA.d)("indices",e,t,n),a=Object(pA.d)("elementShape",e,t,n),i=Object(pA.d)("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,i,a)]}case"TensorListStack":{const r=Object(pA.d)("tensorListId",e,t,n),o=Object(pA.d)("elementShape",e,t,n),a=Object(pA.d)("elementDType",e,t,n),i=Object(pA.d)("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,a,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);mv(e.shape.slice(1),t,"TensorList shape mismatch: ");const o=Object(Qr.unstack)(e);return new vv(o,t,r)}(Object(pA.d)("tensor",e,t,n),Object(pA.d)("elementShape",e,t,n),Object(pA.d)("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{const r=Object(pA.d)("tensorListId",e,t,n),o=n.getTensorList(r.id),a=Object(pA.d)("dtype",e,t,n),i=Object(pA.d)("elementShape",e,t,n);return[o.concat(a,i)]}case"TensorListPushBack":{const r=Object(pA.d)("tensorListId",e,t,n),o=Object(pA.d)("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(o),[a.idTensor]}case"TensorListPopBack":{const r=Object(pA.d)("tensorListId",e,t,n),o=Object(pA.d)("elementShape",e,t,n),a=Object(pA.d)("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,a)]}case"TensorListSplit":{const r=Object(pA.d)("tensor",e,t,n),o=Object(pA.d)("elementShape",e,t,n),a=function(e,t,n){let r=0;const o=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const a=yv(e.shape.slice(1),n),i=0===r?0:e.size/r,s=Object(Qr.tidy)((()=>{const n=[];e=Object(Qr.reshape)(e,[1,r,i]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:o[r-1],0],c=[1,t[r],i];n[r]=Object(Qr.reshape)(Object(Qr.slice)(e,s,c),a)}return e.dispose(),n})),c=new vv([],n,e.dtype,t.length);for(let e=0;e<s.length;e++)c.setItem(e,s[e]);return c}(r,Object(pA.d)("lengths",e,t,n),o);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var kv=n(197),wv=n(76),Cv=n(121),Sv=n(198),Ov=n(96),Ev=n(199),Iv=n(126),Tv=n(139),Nv=n(216),Rv=n(193),jv=n(215),Bv=n(205);function _v(e,t,n){const[r,o]=Object(pA.d)("fusedOps",e,t,n),a="biasadd"===r,i=!a,s="prelu"===o,c="fusedbatchnorm"===r,u=Object(pA.d)("numArgs",e,t,n);if(a){if(s&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=Object(pA.d)("strides",e,t,n),d=Object(pA.c)(e,t,n),p=Object(pA.d)("dataFormat",e,t,n).toUpperCase(),h=Object(pA.d)("dilations",e,t,n);let[f,m]=Object(pA.d)("args",e,t,n);i&&(m=f,f=void 0);return{stride:l,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:o,leakyreluAlpha:Object(pA.d)("leakyreluAlpha",e,t,n)}}var Dv=n(75),Mv=n(212),$v=n(219),Pv=n(116),Lv=n(71),Fv=n(220),zv=n(144),Uv=n(82),Wv=n(233),Vv=n(77),qv=n(36);var Gv=n(21),Hv=n(151),Kv=n(225);function Yv(e,t,n){return{boxes:Object(pA.d)("boxes",e,t,n),scores:Object(pA.d)("scores",e,t,n),maxOutputSize:Object(pA.d)("maxOutputSize",e,t,n),iouThreshold:Object(pA.d)("iouThreshold",e,t,n),scoreThreshold:Object(pA.d)("scoreThreshold",e,t,n),softNmsSigma:Object(pA.d)("softNmsSigma",e,t,n)}}var Xv=n(232),Zv=n(234);var Qv=n(42),Jv=n(16);class ex{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Object(Qr.scalar)(0),this.tensorMap=new Map,Object(Qr.keep)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Jv.a(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),Object(Qr.tidy)((()=>{const e=Object(Qr.unstack)(t),r=n.length,o=e.length;Qr.util.assert(r===o,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${o} elements.`));for(let t=0;t<r;t++){const r=n[t],o=e[t];Object(Qr.keep)(o),this.tensorMap.set(r,o)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Object(Qr.tidy)((()=>{const e=[];for(let r=0;r<n.length;r++){const o=n[r],a=this.findWithDefault(o,t);e.push(a)}return Object(Qr.stack)(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}var tx=n(129),nx=n(141),rx=n(88),ox=n(133),ax=n(211),ix=n(98),sx=n(89),cx=n(137),ux=n(138),lx=n(57);var dx=n(22),px=n(207),hx=n(93);var fx=n(79),mx=n(213),gx=n(229),bx=n(214),yx=n(258);var Ax=n(65),vx=n(90),xx=n(115),kx=n(25),wx=n(184),Cx=n(185),Sx=n(186),Ox=n(187),Ex=n(202),Ix=n(128),Tx=n(203);var Nx=n(32),Rx=n(132),jx=n(49),Bx=n(24),_x=n(230),Dx=n(101),Mx=n(9),$x=n(70),Px=n(102),Lx=n(80),Fx=n(69),zx=n(235),Ux=n(236);var Wx=n(99),Vx=n(92),qx=n(100),Gx=n(147);var Hx=n(72),Kx=n(217),Yx=n(62),Xx=n(142),Zx=n(127),Qx=n(204),Jx=n(106),ek=n(194);function tk(e,t,n,r){const o=((e,t,n)=>{switch(e.category){case"arithmetic":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[mA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"AddN":return[gA.a(Object(pA.d)("tensors",e,t,n))];case"FloorMod":case"Mod":return[bA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Mul":return[yA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"RealDiv":case"Div":return[AA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"DivNoNan":return[vA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"FloorDiv":return[xA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Sub":return[kA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Minimum":return[wA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Maximum":return[CA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Pow":return[SA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"SquaredDifference":return[OA.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[EA.a(Object(pA.d)("x",e,t,n))];case"Acos":return[IA.a(Object(pA.d)("x",e,t,n))];case"Acosh":return[TA.a(Object(pA.d)("x",e,t,n))];case"Asin":return[NA.a(Object(pA.d)("x",e,t,n))];case"Asinh":return[RA.a(Object(pA.d)("x",e,t,n))];case"Atan":return[jA.a(Object(pA.d)("x",e,t,n))];case"Atan2":return[BA.a(Object(pA.d)("x",e,t,n),Object(pA.d)("y",e,t,n))];case"Atanh":return[_A.a(Object(pA.d)("x",e,t,n))];case"Ceil":return[DA.a(Object(pA.d)("x",e,t,n))];case"Complex":return[MA.a(Object(pA.d)("real",e,t,n),Object(pA.d)("imag",e,t,n))];case"Cos":return[$A.a(Object(pA.d)("x",e,t,n))];case"Cosh":return[PA.a(Object(pA.d)("x",e,t,n))];case"Elu":return[LA.a(Object(pA.d)("x",e,t,n))];case"Erf":return[FA.a(Object(pA.d)("x",e,t,n))];case"Exp":return[zA.a(Object(pA.d)("x",e,t,n))];case"Expm1":return[UA.a(Object(pA.d)("x",e,t,n))];case"Floor":return[WA.a(Object(pA.d)("x",e,t,n))];case"Log":return[VA.a(Object(pA.d)("x",e,t,n))];case"Log1p":return[qA.a(Object(pA.d)("x",e,t,n))];case"Imag":return[GA.a(Object(pA.d)("x",e,t,n))];case"Neg":return[HA.a(Object(pA.d)("x",e,t,n))];case"Reciprocal":return[KA.a(Object(pA.d)("x",e,t,n))];case"Real":return[YA.a(Object(pA.d)("x",e,t,n))];case"Relu":return[XA.a(Object(pA.d)("x",e,t,n))];case"Round":return[ZA.a(Object(pA.d)("x",e,t,n))];case"Selu":return[QA.a(Object(pA.d)("x",e,t,n))];case"Sigmoid":return[JA.a(Object(pA.d)("x",e,t,n))];case"Sin":return[ev.a(Object(pA.d)("x",e,t,n))];case"Sign":return[tv.a(Object(pA.d)("x",e,t,n))];case"Sinh":return[nv.a(Object(pA.d)("x",e,t,n))];case"Softplus":return[rv.a(Object(pA.d)("x",e,t,n))];case"Sqrt":return[ov.a(Object(pA.d)("x",e,t,n))];case"Square":return[av.a(Object(pA.d)("x",e,t,n))];case"Tanh":return[iv.a(Object(pA.d)("x",e,t,n))];case"Tan":return[sv.a(Object(pA.d)("x",e,t,n))];case"ClipByValue":return[cv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("clipValueMin",e,t,n),Object(pA.d)("clipValueMax",e,t,n))];case"Relu6":return[uv.a(Object(pA.d)("x",e,t,n))];case"Rsqrt":return[lv.a(Object(pA.e)(e.inputNames[0],t,n))];case"Prod":return[dv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("axes",e,t,n))];case"LeakyRelu":return[pv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("alpha",e,t,n))];case"Prelu":return[hv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("alpha",e,t,n))];case"IsNan":return[fv.a(Object(pA.e)(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return xv(e,t,n);case"convolution":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Conv1D":{const r=Object(pA.d)("stride",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("dataFormat",e,t,n).toUpperCase(),i=Object(pA.d)("dilation",e,t,n);return[kv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("filter",e,t,n),r,o,a,i)]}case"Conv2D":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.c)(e,t,n),a=Object(pA.d)("dataFormat",e,t,n).toUpperCase(),i=Object(pA.d)("dilations",e,t,n);return[wv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("filter",e,t,n),[r[1],r[2]],o,a,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:r,pad:o,dataFormat:a,dilations:i,biasArg:s,preluArg:c,activationFunc:u,leakyreluAlpha:l}=_v(e,t,n);return[Cv.rb.conv2d({x:Object(pA.d)("x",e,t,n),filter:Object(pA.d)("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:s,activation:u,preluActivationWeights:c,leakyreluAlpha:l})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:o,dataFormat:a,dilations:i,biasArg:s,preluArg:c,activationFunc:u,leakyreluAlpha:l}=_v(e,t,n);return[Cv.rb.depthwiseConv2d({x:Object(pA.d)("x",e,t,n),filter:Object(pA.d)("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:s,activation:u,preluActivationWeights:c,leakyreluAlpha:l})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Object(pA.d)("outputShape",e,t,n),o=Object(pA.d)("strides",e,t,n),a=Object(pA.c)(e,t,n);return[Sv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("filter",e,t,n),r,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.c)(e,t,n),a=Object(pA.d)("dilations",e,t,n),i=Object(pA.d)("dataFormat",e,t,n).toUpperCase();return[Ov.a(Object(pA.d)("input",e,t,n),Object(pA.d)("filter",e,t,n),[r[1],r[2]],o,i,[a[1],a[2]])]}case"Conv3D":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("dataFormat",e,t,n).toUpperCase(),i=Object(pA.d)("dilations",e,t,n);return[Ev.a(Object(pA.d)("x",e,t,n),Object(pA.d)("filter",e,t,n),[r[1],r[2],r[3]],o,a,[i[1],i[2],i[3]])]}case"AvgPool":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("kernelSize",e,t,n);return[Iv.a(Object(pA.d)("x",e,t,n),[a[1],a[2]],[r[1],r[2]],o)]}case"MaxPool":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("kernelSize",e,t,n);return[Tv.a(Object(pA.d)("x",e,t,n),[a[1],a[2]],[r[1],r[2]],o)]}case"MaxPoolWithArgmax":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("kernelSize",e,t,n),i=Object(pA.d)("includeBatchInIndex",e,t,n),{result:s,indexes:c}=Nv.a(Object(pA.d)("x",e,t,n),[a[1],a[2]],[r[1],r[2]],o,i);return[s,c]}case"AvgPool3D":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("kernelSize",e,t,n);return[Rv.a(Object(pA.d)("x",e,t,n),[a[1],a[2],a[3]],[r[1],r[2],r[3]],o)]}case"MaxPool3D":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("kernelSize",e,t,n);return[jv.a(Object(pA.d)("x",e,t,n),[a[1],a[2],a[3]],[r[1],r[2],r[3]],o)]}case"Dilation2D":{const r=Object(pA.d)("strides",e,t,n),o=Object(pA.d)("pad",e,t,n),a=Object(pA.d)("dilations",e,t,n),i=r[1],s=r[2],c=a[1],u=a[2];return[Bv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("filter",e,t,n),[i,s],o,[c,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Fill":{const r=Object(pA.d)("shape",e,t,n),o=Object(pA.d)("dtype",e,t,n),a=Object(pA.d)("value",e,t,n);return[Dv.a(r,a,o)]}case"LinSpace":{const r=Object(pA.d)("start",e,t,n),o=Object(pA.d)("stop",e,t,n),a=Object(pA.d)("num",e,t,n);return[Mv.a(r,o,a)]}case"Multinomial":{const r=Object(pA.d)("logits",e,t,n),o=Object(pA.d)("numSamples",e,t,n),a=Object(pA.d)("seed",e,t,n);return[$v.a(r,o,a)]}case"OneHot":{const r=Object(pA.d)("indices",e,t,n),o=Object(pA.d)("depth",e,t,n),a=Object(pA.d)("onValue",e,t,n),i=Object(pA.d)("offValue",e,t,n);return[Pv.a(r,o,a,i)]}case"Ones":return[Lv.a(Object(pA.d)("shape",e,t,n),Object(pA.d)("dtype",e,t,n))];case"OnesLike":return[Fv.a(Object(pA.d)("x",e,t,n))];case"RandomUniform":return[zv.a(Object(pA.d)("shape",e,t,n),Object(pA.d)("minval",e,t,n),Object(pA.d)("maxval",e,t,n),Object(pA.d)("dtype",e,t,n))];case"Range":{const r=Object(pA.d)("start",e,t,n),o=Object(pA.d)("stop",e,t,n),a=Object(pA.d)("step",e,t,n);return[Uv.a(r,o,a,Object(pA.d)("dtype",e,t,n))]}case"TruncatedNormal":{const r=Object(pA.d)("shape",e,t,n),o=Object(pA.d)("mean",e,t,n),a=Object(pA.d)("stdDev",e,t,n),i=Object(pA.d)("seed",e,t,n);return[Wv.a(r,o,a,Object(pA.d)("dtype",e,t,n),i)]}case"Zeros":return[Vv.a(Object(pA.d)("shape",e,t,n),Object(pA.d)("dtype",e,t,n))];case"ZerosLike":return[qv.a(Object(pA.d)("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:s,softNmsSigma:c}=Yv(e,t,n),u=await Cv.yb.nonMaxSuppressionWithScoreAsync(r,o,a,i,s,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:s}=Yv(e,t,n),c=Object(pA.d)("padToMaxOutputSize",e,t,n),u=await Cv.yb.nonMaxSuppressionPaddedAsync(r,o,a,i,s,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:s}=Yv(e,t,n);return[await Cv.yb.nonMaxSuppressionAsync(r,o,a,i,s)]}case"Where":{const r=Gv.a(Object(pA.d)("condition",e,t,n),"bool"),o=[await Hv.a(r)];return r.dispose(),o}case"ListDiff":return Kv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"TopKV2":{const r=Object(pA.d)("x",e,t,n),o=Object(pA.d)("k",e,t,n),a=Object(pA.d)("sorted",e,t,n),i=Xv.a(r,o,a);return[i.values,i.indices]}case"Unique":{const r=Object(pA.d)("x",e,t,n),o=Zv.a(r);return[o.values,o.indices]}case"UniqueV2":{const r=Object(pA.d)("x",e,t,n),o=Object(pA.d)("axis",e,t,n),a=Zv.a(r,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"image":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=Object(pA.d)("images",e,t,n),o=Object(pA.d)("size",e,t,n),a=Object(pA.d)("alignCorners",e,t,n),i=Object(pA.d)("halfPixelCenters",e,t,n);return[Cv.yb.resizeBilinear(r,[o[0],o[1]],a,i)]}case"ResizeNearestNeighbor":{const r=Object(pA.d)("images",e,t,n),o=Object(pA.d)("size",e,t,n),a=Object(pA.d)("alignCorners",e,t,n),i=Object(pA.d)("halfPixelCenters",e,t,n);return[Cv.yb.resizeNearestNeighbor(r,[o[0],o[1]],a,i)]}case"CropAndResize":{const r=Object(pA.d)("image",e,t,n),o=Object(pA.d)("boxes",e,t,n),a=Object(pA.d)("boxInd",e,t,n),i=Object(pA.d)("cropSize",e,t,n),s=Object(pA.d)("method",e,t,n),c=Object(pA.d)("extrapolationValue",e,t,n);return[Cv.yb.cropAndResize(r,o,a,i,s,c)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=Object(pA.d)("default",e,t,n);return[Object(pA.e)(e.name,t,n)||r];case"Placeholder":return[Object(pA.e)(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const r=Object(pA.d)("x",e,t,n);return[Object(pA.a)(r)]}case"IdentityN":return Object(pA.d)("x",e,t,n).map((e=>Object(pA.a)(e)));case"Snapshot":const o=Object(pA.d)("x",e,t,n);return[Object(pA.a)(o)];case"Shape":return[Qv.a(Object(pA.d)("x",e,t,n).shape,"int32")];case"ShapeN":return Object(pA.d)("x",e,t,n).map((e=>Qv.a(e.shape)));case"Size":return[Jv.a(Object(pA.d)("x",e,t,n).size,"int32")];case"Rank":return[Jv.a(Object(pA.d)("x",e,t,n).rank,"int32")];case"NoOp":return[Jv.a(1)];case"Print":const a=Object(pA.d)("x",e,t,n),i=Object(pA.d)("data",e,t,n),s=Object(pA.d)("message",e,t,n),c=Object(pA.d)("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Equal":return[tx.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"NotEqual":return[nx.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Greater":return[rx.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"GreaterEqual":return[ox.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Less":return[ax.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"LessEqual":return[ix.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"LogicalAnd":return[sx.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"LogicalNot":return[cx.a(Object(pA.d)("a",e,t,n))];case"LogicalOr":return[ux.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];case"Select":case"SelectV2":return[lx.a(Object(pA.d)("condition",e,t,n),Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[dx.a(Object(pA.d)("a",e,t,n),Object(pA.d)("b",e,t,n),Object(pA.d)("transposeA",e,t,n),Object(pA.d)("transposeB",e,t,n))];case"Einsum":return[px.a(Object(pA.d)("equation",e,t,n),...Object(pA.d)("tensors",e,t,n))];case"Transpose":return[hx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("perm",e,t,n))];case"_FusedMatMul":const[r,o]=Object(pA.d)("fusedOps",e,t,n),a="biasadd"===r,i="prelu"===o,s=Object(pA.d)("numArgs",e,t,n),c=Object(pA.d)("leakyreluAlpha",e,t,n);if(a){if(i&&2!==s)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==s)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,l]=Object(pA.d)("args",e,t,n);return[Cv.rb.matMul({a:Object(pA.d)("a",e,t,n),b:Object(pA.d)("b",e,t,n),transposeA:Object(pA.d)("transposeA",e,t,n),transposeB:Object(pA.d)("transposeB",e,t,n),bias:u,activation:o,preluActivationWeights:l,leakyreluAlpha:c})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[fx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("mean",e,t,n),Object(pA.d)("variance",e,t,n),Object(pA.d)("offset",e,t,n),Object(pA.d)("scale",e,t,n),Object(pA.d)("epsilon",e,t,n))];case"LRN":return[mx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("radius",e,t,n),Object(pA.d)("bias",e,t,n),Object(pA.d)("alpha",e,t,n),Object(pA.d)("beta",e,t,n))];case"Softmax":return[gx.a(Object(pA.d)("x",e,t,n))];case"LogSoftmax":return[bx.a(Object(pA.d)("x",e,t,n))];case"SparseToDense":return[yx.a(Object(pA.d)("sparseIndices",e,t,n),Object(pA.d)("outputShape",e,t,n),Object(pA.d)("sparseValues",e,t,n),Object(pA.d)("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Max":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[Ax.a(Object(pA.d)("x",e,t,n),r,o)]}case"Mean":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[vx.a(Object(pA.d)("x",e,t,n),r,o)]}case"Min":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[xx.a(Object(pA.d)("x",e,t,n),r,o)]}case"Sum":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[kx.a(Object(pA.d)("x",e,t,n),r,o)]}case"All":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[wx.a(Object(pA.d)("x",e,t,n),r,o)]}case"Any":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[Cx.a(Object(pA.d)("x",e,t,n),r,o)]}case"ArgMax":{const r=Object(pA.d)("axis",e,t,n);return[Sx.a(Object(pA.d)("x",e,t,n),r)]}case"ArgMin":{const r=Object(pA.d)("axis",e,t,n);return[Ox.a(Object(pA.d)("x",e,t,n),r)]}case"Prod":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("keepDims",e,t,n);return[dv.a(Object(pA.d)("x",e,t,n),r,o)]}case"Cumsum":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("exclusive",e,t,n),a=Object(pA.d)("reverse",e,t,n);return[Ex.a(Object(pA.d)("x",e,t,n),r,o,a)]}case"Bincount":const r=Object(pA.d)("x",e,t,n),o=Object(pA.d)("weights",e,t,n),a=Object(pA.d)("size",e,t,n);return[Ix.a(r,o,a)];case"DenseBincount":{const r=Object(pA.d)("x",e,t,n),o=Object(pA.d)("weights",e,t,n),a=Object(pA.d)("size",e,t,n),i=Object(pA.d)("binaryOutput",e,t,n);return[Tx.a(r,o,a,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=Object(pA.d)("n",e,t,n),o=Object(pA.d)("axis",e,t,n);let a=Object(pA.d)("tensors",e,t,n);return a=a.slice(0,r),[Nx.a(a,o)]}case"Gather":{const r=Object(pA.d)("x",e,t,n),o=Object(pA.d)("indices",e,t,n);return[Rx.a(r,Gv.a(o,"int32"),0)]}case"GatherV2":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("batchDims",e,t,n),a=Object(pA.d)("x",e,t,n),i=Object(pA.d)("indices",e,t,n);return[Rx.a(a,Gv.a(i,"int32"),r,o)]}case"Reverse":{const r=Object(pA.d)("dims",e,t,n),o=[];for(let e=0;e<r.length;e++)r[e]&&o.push(e);const a=Object(pA.d)("x",e,t,n);return[jx.a(a,o)]}case"ReverseV2":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("x",e,t,n);return[jx.a(o,r)]}case"Slice":{const r=Object(pA.d)("begin",e,t,n),o=Object(pA.d)("size",e,t,n);return[Bx.a(Object(pA.d)("x",e,t,n),r,o)]}case"StridedSlice":{const r=Object(pA.d)("begin",e,t,n),o=Object(pA.d)("end",e,t,n),a=Object(pA.d)("strides",e,t,n),i=Object(pA.d)("beginMask",e,t,n),s=Object(pA.d)("endMask",e,t,n),c=Object(pA.d)("ellipsisMask",e,t,n),u=Object(pA.d)("newAxisMask",e,t,n),l=Object(pA.d)("shrinkAxisMask",e,t,n),d=Object(pA.d)("x",e,t,n);return[_x.a(d,r,o,a,i,s,c,u,l)]}case"Pack":return Object(Qr.tidy)((()=>{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("tensors",e,t,n),a=o[0].shape,i=Dx.a(o[0]).shape,s=o.map((e=>{const t=Qr.util.arraysEqual(e.shape,a);if(!t&&!Qr.util.arraysEqual(Dx.a(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:Mx.a(e,a)}));return[$x.a(s,r)]}));case"Unpack":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("tensor",e,t,n);return Px.a(o,r)}case"Tile":{const r=Object(pA.d)("reps",e,t,n);return[Lx.a(Object(pA.d)("x",e,t,n),r)]}case"Split":case"SplitV":{const r=Object(pA.d)("axis",e,t,n),o=Object(pA.d)("numOrSizeSplits",e,t,n),a=Object(pA.d)("x",e,t,n);return Fx.a(a,o,r)}case"ScatterNd":{const r=Object(pA.d)("indices",e,t,n),o=Object(pA.d)("values",e,t,n),a=Object(pA.d)("shape",e,t,n);return[zx.a(r,o,a)]}case"GatherNd":{const r=Object(pA.d)("x",e,t,n),o=Object(pA.d)("indices",e,t,n);return[Ux.a(r,o)]}case"SparseToDense":{const r=Object(pA.d)("sparseIndices",e,t,n),o=Object(pA.d)("outputShape",e,t,n),a=Object(pA.d)("sparseValues",e,t,n),i=Object(pA.d)("defaultValue",e,t,n);return[yx.a(r,a,o,a.dtype===i.dtype?i:Gv.a(i,a.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:o,emptyRowIndicator:a,reverseIndexMap:i}=Cv.nd.sparseFillEmptyRows(Object(pA.d)("indices",e,t,n),Object(pA.d)("values",e,t,n),Object(pA.d)("denseShape",e,t,n),Object(pA.d)("defaultValue",e,t,n));return[r,o,a,i]}case"SparseReshape":{const{outputIndices:r,outputShape:o}=Cv.nd.sparseReshape(Object(pA.d)("inputIndices",e,t,n),Object(pA.d)("inputShape",e,t,n),Object(pA.d)("newShape",e,t,n));return[r,o]}case"SparseSegmentMean":return[Cv.nd.sparseSegmentMean(Object(pA.d)("data",e,t,n),Object(pA.d)("indices",e,t,n),Object(pA.d)("segmentIds",e,t,n))];case"SparseSegmentSum":return[Cv.nd.sparseSegmentSum(Object(pA.d)("data",e,t,n),Object(pA.d)("indices",e,t,n),Object(pA.d)("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"FFT":return[Wx.a(Object(pA.d)("x",e,t,n))];case"IFFT":return[Vx.a(Object(pA.d)("x",e,t,n))];case"RFFT":return[qx.a(Object(pA.d)("x",e,t,n))];case"IRFFT":return[Gx.a(Object(pA.d)("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:o}=Cv.yd.stringNGrams(Object(pA.d)("data",e,t,n),Object(pA.d)("dataSplits",e,t,n),Object(pA.d)("separator",e,t,n),Object(pA.d)("nGramWidths",e,t,n),Object(pA.d)("leftPad",e,t,n),Object(pA.d)("rightPad",e,t,n),Object(pA.d)("padWidth",e,t,n),Object(pA.d)("preserveShortSequences",e,t,n));return[r,o]}case"StringSplit":{const{indices:r,values:o,shape:a}=Cv.yd.stringSplit(Object(pA.d)("input",e,t,n),Object(pA.d)("delimiter",e,t,n),Object(pA.d)("skipEmpty",e,t,n));return[r,o,a]}case"StringToHashBucketFast":return[Cv.yd.stringToHashBucketFast(Object(pA.d)("input",e,t,n),Object(pA.d)("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return Qr.tidy((()=>((e,t,n)=>{switch(e.op){case"Cast":return[Gv.a(Object(pA.d)("x",e,t,n),Object(pA.d)("dtype",e,t,n))];case"ExpandDims":{const r=Object(pA.d)("axis",e,t,n);return[Hx.a(Object(pA.d)("x",e,t,n),r)]}case"Squeeze":{const r=Object(pA.d)("axis",e,t,n);return[Dx.a(Object(pA.d)("x",e,t,n),r)]}case"Reshape":return[Mx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("shape",e,t,n))];case"MirrorPad":return[Kx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("padding",e,t,n),Object(pA.d)("mode",e,t,n))];case"PadV2":case"Pad":return[Yx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("padding",e,t,n),Object(pA.d)("constantValue",e,t,n))];case"SpaceToBatchND":{const r=Object(pA.d)("blockShape",e,t,n),o=Object(pA.d)("paddings",e,t,n);return[Xx.a(Object(pA.d)("x",e,t,n),r,o)]}case"BatchToSpaceND":{const r=Object(pA.d)("blockShape",e,t,n),o=Object(pA.d)("crops",e,t,n);return[Zx.a(Object(pA.d)("x",e,t,n),r,o)]}case"DepthToSpace":{const r=Object(pA.d)("blockSize",e,t,n),o=Object(pA.d)("dataFormat",e,t,n).toUpperCase();return[Qx.a(Object(pA.d)("x",e,t,n),r,o)]}case"BroadcastTo":return[Jx.a(Object(pA.d)("x",e,t,n),Object(pA.d)("shape",e,t,n))];case"BroadcastArgs":return[ek.a(Object(pA.d)("s0",e,t,n),Object(pA.d)("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=Object(pA.d)("keyDType",e,t,n),a=Object(pA.d)("valueDType",e,t,n),i=new ex(o,a);return r.addHashTable(e.name,i),[i.handle]}case"LookupTableImport":case"LookupTableImportV2":{const o=Object(pA.d)("tableHandle",e,t,n,r),a=Object(pA.d)("keys",e,t,n),i=Object(pA.d)("values",e,t,n),s=r.getHashTableById(o.id);return[await s.import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=Object(pA.d)("tableHandle",e,t,n,r),a=Object(pA.d)("keys",e,t,n),i=Object(pA.d)("defaultValue",e,t,n),s=r.getHashTableById(o.id);return[await s.find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=Object(pA.d)("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const o=Object(fA.a)(e.op);if(o&&o.customExecutor)return o.customExecutor(new hA(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return Qr.util.isPromise(o)?o.then((e=>[].concat(e))):[].concat(o)}class nk{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function rk(e,t,n,r){const o=new Set,a=[];let i=null,s=null;const c=new Set,u=Object.keys(e).map((e=>Object(pA.g)(e)[0]));let l=[];null!=r&&(l=r.map((e=>Object(pA.g)(e.name)[0])));const d=[...t];for(;d.length>0;){const e=d.pop();(sk(e)||ck(e)||uk(e))&&null==i&&(i=e,s=i.children.map((e=>e.name)).filter((e=>o.has(e)))),o.add(e.name),null==n[e.name]&&(-1===u.indexOf(e.name)&&-1===l.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{c.has(e.name)||(c.add(e.name),d.push(e))})):a.push(e.name)))}return{inputs:e,outputs:t,usedNodes:o,missingInputs:a,dynamicNode:i,syncInputs:s}}const ok=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],ak=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],ik=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function sk(e){return ok.indexOf(e.op)>=0}function ck(e){return ak.indexOf(e.op)>=0}function uk(e){return ik.indexOf(e.op)>=0}class lk{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new lk(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=rk(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:a}=n;if(null!=o)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const n=t.map((e=>e.name)),o=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${o}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:o}=n,a=[],i=Object.keys(o).map((e=>Object(pA.g)(e)[0])).map((t=>e.nodes[t])),s=e.initNodes;i.forEach((e=>{r.has(e.name)&&a.push(e)})),e.weights.forEach((e=>{r.has(e.name)&&a.push(e)})),null!=s&&s.forEach((e=>{r.has(e.name)&&a.push(e)}));const c=new Set,u=[];for(;a.length>0;){const e=a.pop();c.add(e.name),t[e.name]||u.push(e),e.children.forEach((e=>{!c.has(e.name)&&r.has(e.name)&&e.inputs.every((e=>c.has(e.name)))&&a.push(e)}))}return u}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[Object(pA.g)(e)[0]])),o=t.map((e=>Object(pA.g)(e)[0]));let a=o.map((e=>this.graph.nodes[e]));0===a.length&&(a=this._outputs);const i=this.getCompilationKey(r,a);let s=this.compiledMap.get(i);null==s&&(s=this.compile(e,a),this.compiledMap.set(i,s));const c={},u={};return Object(Qr.tidy)((()=>{const n=new nk(this.weightMap,c,u,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,o]=Object(pA.g)(t),a=[];a[o]=e[t],r[n]=a}));const a=this.getFrozenTensorIds(r),i={};for(let e=0;e<s.length;e++){const t=s[e];if(!r[t.name]){const e=tk(t,r,n,this._resourceManager);if(Qr.util.isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,a,o,i)}}return null==this.parent&&n.dispose(a),t.map((e=>Object(pA.e)(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,o,a,i){"control"!==t.category&&-1===a.indexOf(e)&&(n[e].forEach((e=>{null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const t=Object(pA.f)(e.name,n,r);null!=t&&t.forEach((e=>{if(e&&!e.kept&&!o.has(e.id)){const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,r={},o={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));const a=new nk(this.weightMap,r,o,this.functionExecutorMap),i=await this.executeWithControlFlow(e,a,t,n),s=t.map((e=>Object(pA.e)(e,i,a))),c=s.map((e=>e.id)),u=Object.keys(e).map((t=>e[t].id)),l=new Set([...c,...u,...this.weightIds]);return Object.keys(i).forEach((e=>{i[e].forEach((e=>{!e||e.kept||e.isDisposed||l.has(e.id)||e.dispose()}))})),null==this.parent&&a.dispose(l),s}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const o=Object.keys(e),a=o.map((e=>this.graph.nodes[Object(pA.g)(e)[0]])),i=n.map((e=>Object(pA.g)(e)[0]));let s=i.map((e=>this.graph.nodes[e]));0===s.length&&(s=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:l,syncInputs:d}=rk(e,s,this.weightMap,this._initNodes),p=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),h=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=Object(pA.g)(t),o=[];o[r]=e[t],h[n]=o}));const f={},m=this.getFrozenTensorIds(h),g={};for(;p.length>0;){const e=this.processStack(a,p,t,h,g,m,i,f,c);await Promise.all(e)}null!=l||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=s.filter((e=>!sk(e)&&!Object(pA.e)(e.name,h,t))).map((e=>e.name));if(b.length>0){let e="";throw null!=l&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${o}]. Consider providing the following inputs: [${u}]. ${e}`)}return h}processStack(e,t,n,r,o,a,i,s,c){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let l="";if("Enter"===e.node.op&&Object(pA.d)("isConstant",e.node,r,n)&&([l]=Object(pA.b)(e.node.name,n)),null==r[e.node.name]){const d=tk(e.node,r,n,this._resourceManager);l||([l]=Object(pA.b)(e.node.name,n));const p=n.currentContext;Qr.util.isPromise(d)?u.push(d.then((u=>(r[l]=u,n.currentContext=p,this.checkTensorForDisposal(l,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,c),u)))):(r[l]=d,this.checkTensorForDisposal(l,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,c))}else this.processChildNodes(e.node,t,n,r,o,c)}return u}processChildNodes(e,t,n,r,o,a){e.children.forEach((e=>{const[i]=Object(pA.b)(e.name,n);!o[i]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!Object(pA.e)(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!Object(pA.e)(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=Object(pA.g)(t),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){const e=o.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));Qr.util.assert(t,(()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}o.attrParams.dtype&&o.attrParams.dtype.value&&Qr.util.assert(n.dtype===o.attrParams.dtype.value,(()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){const t={};for(const n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){t[this._signature.inputs[n].name]=e[n]}else t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=Object(pA.g)(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){return this._signature.outputs[e].name}return e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=Object(pA.g)(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class dk{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class pk{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new dk}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=Qr.io.browserHTTPRequest(e,this.loadOptions);else{const t=Qr.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(Qr.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=Qr.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new lk(dA.a.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=dA.a.Instance.transformGraph(e.modelInitializer);this.initializer=new lk(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=Qr.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof Qr.Tensor||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce(((t,n,r)=>(t[n]=e[r],t)),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function hk(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}model.json?tfjs-format=file`);const n=new pk(e,t);return await n.load(),n}var fk=function(e,t){return(fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function mk(e,t){function n(){this.constructor=e}fk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var gk=function(){return(gk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function bk(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))}function yk(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Ak(e){var t=e.shape[2],n=Object(Qr.argMax)(e,2),r=Object(Qr.reshape)(n,[-1]);return Object(Qr.oneHot)(r,t)}function vk(e,t){return Object(Qr.tidy)((function(){return Object(Qr.cast)(Object(Qr.greater)(e,Object(Qr.scalar)(t)),"int32")}))}function xk(e,t){var n=t.shape,r=n[0],o=n[1],a=n[2];return Object(Qr.tidy)((function(){var n=Ak(t),i=Object(Qr.expandDims)(Object(Qr.range)(0,a,1,"int32"),1),s=Object(Qr.cast)(Object(Qr.matMul)(n,i),"int32"),c=Object(Qr.reshape)(s,[r,o]),u=Object(Qr.add)(c,Object(Qr.scalar)(1,"int32"));return Object(Qr.sub)(function(e,t){return Object(Qr.mul)(e,t)}(u,e),Object(Qr.scalar)(1,"int32"))}))}function kk(e){var t=e.shape,n=t[0],r=t[1],o=t[2];return Object(Qr.tidy)((function(){var t=Ak(e),a=Object(Qr.expandDims)(Object(Qr.range)(0,o,1,"int32"),1),i=Object(Qr.cast)(Object(Qr.matMul)(t,a),"int32");return Object(Qr.reshape)(i,[n,r])}))}var wk=function(){function e(e,t){this.model=e,this.outputStride=t;var n=this.model.inputs[0].shape;Qr.util.assert(-1===n[1]&&-1===n[2],(function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"}))}return e.prototype.predict=function(e){var t=this;return Object(Qr.tidy)((function(){var n=t.preprocessInput(Object(Qr.cast)(e,"float32")),r=Object(Qr.expandDims)(n,0),o=t.model.predict(r).map((function(e){return Object(Qr.squeeze)(e,[0])})),a=t.nameOutputResults(o);return{heatmapScores:Object(Qr.sigmoid)(a.heatmap),offsets:a.offsets,displacementFwd:a.displacementFwd,displacementBwd:a.displacementBwd,segmentation:a.segmentation,partHeatmaps:a.partHeatmaps,longOffsets:a.longOffsets,partOffsets:a.partOffsets}}))},e.prototype.dispose=function(){this.model.dispose()},e}(),Ck=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mk(t,e),t.prototype.preprocessInput=function(e){return Object(Qr.tidy)((function(){return Object(Qr.sub)(Object(Qr.div)(e,127.5),1)}))},t.prototype.nameOutputResults=function(e){return{offsets:e[0],segmentation:e[1],partHeatmaps:e[2],longOffsets:e[3],heatmap:e[4],displacementFwd:e[5],displacementBwd:e[6],partOffsets:e[7]}},t}(wk),Sk=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Ok=Sk.length,Ek=Sk.reduce((function(e,t,n){return e[t]=n,e}),{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map((function(e){var t=e[0],n=e[1];return[Ek[t],Ek[n]]}));function Ik(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1],s=n.top,c=n.bottom;return[i/(n.left+n.right+o),a/(s+c+r)]}function Tk(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+Ok)}}function Nk(e,t,n){var r=Tk(e.heatmapY,e.heatmapX,e.id,n),o=r.y,a=r.x;return{x:e.heatmapX*t+a,y:e.heatmapY*t+o}}function Rk(e,t,n){return e<t?t:e>n?n:e}function jk(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Bk(e,t,n){void 0===n&&(n=.3);for(var r=0,o=0,a=0;a<e.length;a++)t.keypoints[a].score>n&&(o+=1,r+=Math.pow(e[a].x-t.keypoints[a].position.x,2)+Math.pow(e[a].y-t.keypoints[a].position.y,2));return 0===o?r=1/0:r/=o,r}function _k(e,t,n,r,o,a,i){for(var s=i[0],c=i[1],u=n(e),l=u.y*r+u.x,d=o[Ok*(2*l)+t],p=o[Ok*(2*l+1)+t],h=e.y+d,f=e.x+p,m=0;m<a;m++){h=Math.min(h,s-1);var g=n({x:f=Math.min(f,c-1),y:h}),b=g.y*r+g.x;h+=d=o[Ok*(2*b)+t],f+=p=o[Ok*(2*b+1)+t]}return{x:f,y:h}}function Dk(e,t,n,r,o,a,i,s,c,u){for(var l=o[0],d=o[1],p=a[0],h=a[1],f=s[0],m=s[1],g=[],b=function(e){return function(e,t,n,r){var o=t[0],a=t[1],i=n[0],s=n[1],c=Math.round(((o+e.y+1)*s-1)/r);return{x:Math.round(((a+e.x+1)*i-1)/r),y:c}}(e,[l,d],[p,h],c)},y=0;y<r;y++){var A=_k(e,y,b,i,t,u,[f,m]);g.push(A)}for(var v=-1,x=1/0,k=0;k<n.length;k++){var w=Bk(g,n[k]);w<x&&(v=k,x=w)}return v}function Mk(e,t){var n=e[0],r=e[1];return[Math.round((r-1)/t+1),Math.round((n-1)/t+1)]}function $k(e,t,n,r,o,a,i,s,c,u,l){for(var d=i[0],p=i[1],h=e.shape,f=h[0],m=h[1],g=t.shape.slice(0,2),b=g[0],y=g[1],A=Object(Qr.reshape)(t,[b,y,2,Ok]),v=new Float32Array(l*Ok*3).fill(0),x=0;x<n.length;x++)for(var k=x*Ok*3,w=n[x],C=0;C<Ok;C++){var S=w.keypoints[C],O=k+3*C;v[O]=S.score,v[O+1]=S.position.y,v[O+2]=S.position.x}var E=Ik([r,o],[d,p],s),I=E[0],T=E[1],N=Object(Qr.tensor)(v,[l,Ok,3]),R=s.top,j=s.left,B={variableNames:["segmentation","longOffsets","poses"],outputShape:[f,m],userCode:"\n    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {\n      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));\n    }\n\n    float convertToPositionInOutputFloat(\n        int pos, int pad, float scale, int stride) {\n      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);\n    }\n\n    float dist(float x1, float y1, float x2, float y2) {\n      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);\n    }\n\n    float sampleLongOffsets(float h, float w, int d, int k) {\n      float fh = fract(h);\n      float fw = fract(w);\n      int clH = int(ceil(h));\n      int clW = int(ceil(w));\n      int flH = int(floor(h));\n      int flW = int(floor(w));\n      float o11 = getLongOffsets(flH, flW, d, k);\n      float o12 = getLongOffsets(flH, clW, d, k);\n      float o21 = getLongOffsets(clH, flW, d, k);\n      float o22 = getLongOffsets(clH, clW, d, k);\n      float o1 = mix(o11, o12, fw);\n      float o2 = mix(o21, o22, fw);\n      return mix(o1, o2, fh);\n    }\n\n    int findNearestPose(int h, int w) {\n      float prob = getSegmentation(h, w);\n      if (prob < 1.0) {\n        return -1;\n      }\n\n      // Done(Tyler): convert from output space h/w to strided space.\n      float stridedH = convertToPositionInOutputFloat(\n        h, "+R+", "+T+", "+a+");\n      float stridedW = convertToPositionInOutputFloat(\n        w, "+j+", "+I+", "+a+");\n\n      float minDist = 1000000.0;\n      int iMin = -1;\n      for (int i = 0; i < "+l+"; i++) {\n        float curDistSum = 0.0;\n        int numKpt = 0;\n        for (int k = 0; k < "+Ok+"; k++) {\n          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);\n          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);\n\n          float y = float(h) + dy;\n          float x = float(w) + dx;\n\n          for (int s = 0; s < "+c+"; s++) {\n            int yRounded = round(min(y, float("+(r-1)+")));\n            int xRounded = round(min(x, float("+(o-1)+")));\n\n            float yStrided = convertToPositionInOutputFloat(\n              yRounded, "+R+", "+T+", "+a+");\n            float xStrided = convertToPositionInOutputFloat(\n              xRounded, "+j+", "+I+", "+a+");\n\n            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);\n            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);\n\n            y = y + dy;\n            x = x + dx;\n          }\n\n          float poseScore = getPoses(i, k, 0);\n          float poseY = getPoses(i, k, 1);\n          float poseX = getPoses(i, k, 2);\n          if (poseScore > "+u+") {\n            numKpt = numKpt + 1;\n            curDistSum = curDistSum + dist(x, y, poseX, poseY);\n          }\n        }\n        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {\n          minDist = curDistSum / float(numKpt);\n          iMin = i;\n        }\n      }\n      return iMin;\n    }\n\n    void main() {\n        ivec2 coords = getOutputCoords();\n        int nearestPose = findNearestPose(coords[0], coords[1]);\n        setOutput(float(nearestPose));\n      }\n  "};return Object(Qr.backend)().compileAndRun(B,[e,A,N])}function Pk(){return"webgl"===Object(Qr.getBackend)()}function Lk(e,t,n,r,o,a,i,s,c,u,l,d){var p=i[0],h=i[1];return void 0===c&&(c=.2),void 0===u&&(u=8),void 0===l&&(l=.3),void 0===d&&(d=10),bk(this,void 0,void 0,(function(){var i,f,m,g,b;return yk(this,(function(y){switch(y.label){case 0:return i=n.filter((function(e){return e.score>=c})),Pk()?(m=Object(Qr.tidy)((function(){var n=$k(e,t,i,r,o,a,[p,h],s,u,l,d),c=Object(Qr.engine)().makeTensorFromDataId(n.dataId,n.shape,n.dtype);return i.map((function(e,t){return function(e,t){return Object(Qr.tidy)((function(){return Object(Qr.cast)(Object(Qr.equal)(e,Object(Qr.scalar)(t)),"int32")}))}(c,t)}))})),[4,Promise.all(m.map((function(e){return e.data()})))]):[3,2];case 1:return f=y.sent(),m.forEach((function(e){return e.dispose()})),[3,5];case 2:return[4,e.data()];case 3:return g=y.sent(),[4,t.data()];case 4:b=y.sent(),f=function(e,t,n,r,o,a,i,s,c,u){var l=i[0],d=i[1];void 0===u&&(u=5);for(var p=n.map((function(e){return new Uint8Array(r*o).fill(0)})),h=s.top,f=s.left,m=Ik([r,o],[l,d],s),g=m[0],b=m[1],y=Mk([l,d],a)[0],A=0;A<r;A+=1)for(var v=0;v<o;v+=1){var x=A*o+v;if(1===e[x]){var k=Dk({x:v,y:A},t,n,u,[h,f],[g,b],y,[r,o],a,c);k>=0&&(p[k][x]=1)}}return p}(g,b,i,r,o,a,[p,h],s,u),y.label=5;case 5:return[2,f.map((function(e,t){return{data:e,pose:i[t],width:o,height:r}}))]}}))}))}function Fk(e,t,n,r,o,a,i,s,c,u,l,d,p){var h=s[0],f=s[1];return void 0===u&&(u=.2),void 0===l&&(l=8),void 0===d&&(d=.3),void 0===p&&(p=10),bk(this,void 0,void 0,(function(){var s,m,g,b,y,A;return yk(this,(function(v){switch(v.label){case 0:return s=r.filter((function(e){return e.score>=u})),Pk()?(g=Object(Qr.tidy)((function(){var r=$k(e,t,s,o,a,i,[h,f],c,l,d,p),u=Object(Qr.engine)().makeTensorFromDataId(r.dataId,r.shape,r.dtype);return s.map((function(e,t){return function(e,t,n){return Object(Qr.tidy)((function(){return Object(Qr.sub)(Object(Qr.mul)(Object(Qr.cast)(Object(Qr.equal)(e,Object(Qr.scalar)(n)),"int32"),Object(Qr.add)(t,1)),1)}))}(u,n,t)}))})),[4,Promise.all(g.map((function(e){return e.data()})))]):[3,2];case 1:return m=v.sent(),g.forEach((function(e){return e.dispose()})),[3,6];case 2:return[4,e.data()];case 3:return b=v.sent(),[4,t.data()];case 4:return y=v.sent(),[4,n.data()];case 5:A=v.sent(),m=function(e,t,n,r,o,a,i,s,c,u,l){var d=s[0],p=s[1];void 0===l&&(l=5);for(var h=r.map((function(e){return new Int32Array(o*a).fill(-1)})),f=c.top,m=c.left,g=Ik([o,a],[d,p],c),b=g[0],y=g[1],A=Mk([d,p],i)[0],v=0;v<o;v+=1)for(var x=0;x<a;x+=1){var k=v*a+x;if(1===e[k]){var w=Dk({x:x,y:v},t,r,l,[f,m],[b,y],A,[o,a],i,u);w>=0&&(h[w][k]=n[k])}}return h}(b,y,A,s,o,a,i,[h,f],c,l),v.label=6;case 6:return[2,m.map((function(e,t){return{pose:s[t],data:e,height:o,width:a}}))]}}))}))}function zk(e){return Math.floor(e/2)}var Uk=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(zk(e),e);)this.exchange(e,zk(e)),e=zk(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function Wk(e,t,n,r,o,a){for(var i=a.shape,s=i[0],c=i[1],u=!0,l=Math.max(n-o,0),d=Math.min(n+o+1,s),p=l;p<d;++p){for(var h=Math.max(r-o,0),f=Math.min(r+o+1,c),m=h;m<f;++m)if(a.get(p,m,e)>t){u=!1;break}if(!u)break}return u}var Vk=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map((function(e){var t=e[0],n=e[1];return[Ek[t],Ek[n]]})),qk=Vk.map((function(e){return e[1]})),Gk=Vk.map((function(e){return e[0]}));function Hk(e,t,n,r){return{y:Rk(Math.round(e.y/t),0,n-1),x:Rk(Math.round(e.x/t),0,r-1)}}function Kk(e,t,n,r,o,a,i,s){void 0===s&&(s=2);for(var c=r.shape,u=c[0],l=c[1],d=function(e,t,n){var r=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,r+e)}}(e,Hk(t.position,a,u,l),i),p=jk(t.position,d),h=0;h<s;h++){var f=Hk(p,a,u,l),m=Tk(f.y,f.x,n,o);p=jk({x:f.x*a,y:f.y*a},{x:m.x,y:m.y})}var g=Hk(p,a,u,l),b=r.get(g.y,g.x,n);return{position:p,part:Sk[n],score:b}}function Yk(e,t,n,r,o,a){var i=t.shape[2],s=qk.length,c=new Array(i),u=e.part,l=e.score,d=Nk(u,r,n);c[u.id]={score:l,part:Sk[u.id],position:d};for(var p=s-1;p>=0;--p){var h=qk[p],f=Gk[p];c[h]&&!c[f]&&(c[f]=Kk(p,c[h],f,t,n,r,a))}for(p=0;p<s;++p)h=Gk[p],f=qk[p],c[h]&&!c[f]&&(c[f]=Kk(p,c[h],f,t,n,r,o));return c}function Xk(e,t,n,r){var o=n.x,a=n.y;return e.some((function(e){var n=e.keypoints[r].position;return function(e,t,n,r){var o=n-e,a=r-t;return o*o+a*a}(a,o,n.y,n.x)<=t}))}function Zk(e,t,n){return n.reduce((function(n,r,o){var a=r.position,i=r.score;return Xk(e,t,a,o)||(n+=i),n}),0)/n.length}function Qk(e,t,n,r,o,a,i,s){void 0===i&&(i=.5),void 0===s&&(s=20);for(var c=[],u=function(e,t,n){for(var r=n.shape,o=r[0],a=r[1],i=r[2],s=new Uk(o*a*i,(function(e){return e.score})),c=0;c<o;++c)for(var u=0;u<a;++u)for(var l=0;l<i;++l){var d=n.get(c,u,l);d<e||Wk(l,d,c,u,t,n)&&s.enqueue({score:d,part:{heatmapY:c,heatmapX:u,id:l}})}return s}(i,1,e),l=s*s;c.length<a&&!u.empty();){var d=u.dequeue();if(!Xk(c,l,Nk(d.part,o,t),d.part.id)){var p=Yk(d,e,t,o,n,r),h=Zk(c,l,p);c.push({keypoints:p,score:h})}}return c}var Jk,ew=[-123.15,-115.9,-103.06],tw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mk(t,e),t.prototype.preprocessInput=function(e){return Object(Qr.add)(e,ew)},t.prototype.nameOutputResults=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5];return{offsets:a,segmentation:e[6],partHeatmaps:i,longOffsets:o,heatmap:r,displacementFwd:n,displacementBwd:t,partOffsets:e[7]}},t}(wk),nw="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",rw="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function ow(e){if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)return function(e){if("offsetHeight"in e&&0!==e.offsetHeight&&"offsetWidth"in e&&0!==e.offsetWidth)return[e.offsetHeight,e.offsetWidth];if(null!=e.height&&null!=e.width)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")}(e);if("undefined"!=typeof ImageData&&e instanceof ImageData)return[e.height,e.width];if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)return function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]}(e);if(e instanceof Qr.Tensor)return[e.shape[0],e.shape[1]];throw new Error("error: Unknown input type: "+e+".")}function aw(e,t){return function(e,t){return(e-1)%t==0}(e,t)?e:Math.floor(e/t)*t+1}var iw={low:"low",medium:"medium",high:"high",full:"full"},sw=((Jk={})[iw.low]=.25,Jk[iw.medium]=.5,Jk[iw.high]=.75,Jk[iw.full]=1,Jk);function cw(e,t,n){var r=n[0],o=n[1],a=function(e){if("string"==typeof e){var t=sw[e];return Qr.util.assert("number"==typeof t,(function(){return"string value of inputResolution must be one of "+Object.values(iw).join(",")+" but was "+e+"."})),t}return Qr.util.assert("number"==typeof e&&e<=2&&e>=.1,(function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+e})),e}(e);return[aw(r*a,t),aw(o*a,t)]}function uw(e,t,n,r,o){var a=t[0],i=t[1],s=n[0],c=n[1],u=r[0],l=u[0],d=u[1],p=r[1],h=p[0],f=p[1];return void 0===o&&(o=!1),Object(Qr.tidy)((function(){var t=Qr.image.resizeBilinear(e,[s,c],!0);return o&&(t=Object(Qr.sigmoid)(t)),function(e,t,n){var r=t[0],o=t[1],a=n[0],i=a[0],s=a[1],c=n[1],u=c[0],l=c[1];return Object(Qr.tidy)((function(){var t=Object(Qr.expandDims)(e);return Object(Qr.squeeze)(Qr.image.cropAndResize(t,[[i/(r+i+s-1),u/(o+u+l-1),(i+r-1)/(r+i+s-1),(u+o-1)/(o+u+l-1)]],[0],[r,o]),[0])}))}(t,[a,i],[[l,d],[h,f]])}))}function lw(e,t){var n=t[0],r=t[1],o=ow(e),a=o[0],i=o[1],s=r/n,c=[0,0,0,0],u=c[0],l=c[1],d=c[2],p=c[3];return i/a<s?(u=0,l=0,d=Math.round(.5*(s*a-i)),p=Math.round(.5*(s*a-i))):(u=Math.round(.5*(1/s*i-a)),l=Math.round(.5*(1/s*i-a)),d=0,p=0),{resized:Object(Qr.tidy)((function(){var t=function(e){return e instanceof Qr.Tensor?e:Qr.browser.fromPixels(e)}(e);return t=Object(Qr.pad3d)(t,[[u,l],[d,p],[0,0]]),Qr.image.resizeBilinear(t,[n,r])})),padding:{top:u,left:d,right:p,bottom:l}}}function dw(e){return bk(this,void 0,void 0,(function(){return yk(this,(function(t){return[2,Promise.all(e.map((function(e){return e.buffer()})))]}))}))}function pw(e,t,n,r,o){var a=t[0],i=t[1],s=n[0],c=n[1],u=function(e,t,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),1===n&&1===t&&0===r&&0===o?e:e.map((function(e){return function(e,t,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),{score:e.score,keypoints:e.keypoints.map((function(e){var a=e.score,i=e.part,s=e.position;return{score:a,part:i,position:{x:s.x*n+o,y:s.y*t+r}}}))}}(e,t,n,r,o)}))}(e,(a+r.top+r.bottom)/s,(i+r.left+r.right)/c,-r.top,-r.left);return o?function(e,t){return t<=0?e:e.map((function(e){return function(e,t){return{score:e.score,keypoints:e.keypoints.map((function(e){var n=e.score,r=e.part,o=e.position;return{score:n,part:r,position:{x:t-1-o.x,y:o.y}}}))}}(e,t)}))}(u,i):u}var hw=!0,fw=!1,mw={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},gw=["MobileNetV1","ResNet50"],bw={MobileNetV1:[8,16,32],ResNet50:[32,16]},yw={MobileNetV1:[.5,.75,1],ResNet50:[1]},Aw=[1,2,4];var vw={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},xw={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function kw(e){var t=e.segmentationThreshold,n=e.maxDetections,r=e.scoreThreshold,o=e.nmsRadius;if(t<0||t>1)throw new Error("segmentationThreshold "+t+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".")}function ww(e){var t=e.segmentationThreshold,n=e.maxDetections,r=e.scoreThreshold,o=e.nmsRadius,a=e.minKeypointScore,i=e.refineSteps;if(t<0||t>1)throw new Error("segmentationThreshold "+t+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".");if(a<0||a>1)throw new Error("Invalid minKeypointScore "+a+".Should be in range [0.0, 1.0]");if(i<=0||i>20)throw new Error("Invalid refineSteps "+i+".Should be in range [1, 20]")}var Cw=function(){function e(e){this.baseModel=e}return e.prototype.predictForPersonSegmentation=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd}},e.prototype.predictForPersonSegmentationAndPart=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,partHeatmapLogits:t.partHeatmaps,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd}},e.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,longOffsets:t.longOffsets,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd,partHeatmaps:t.partHeatmaps}},e.prototype.segmentPersonActivation=function(e,t,n){var r=this;void 0===n&&(n=.5);var o=ow(e),a=o[0],i=o[1],s=cw(t,this.baseModel.outputStride,[a,i]),c=lw(e,s),u=c.resized,l=c.padding,d=Object(Qr.tidy)((function(){var e=r.predictForPersonSegmentation(u),t=e.segmentLogits,o=e.heatmapScores,s=e.offsets,c=e.displacementFwd,d=e.displacementBwd,p=u.shape,h=p[0],f=p[1],m=uw(t,[a,i],[h,f],[[l.top,l.bottom],[l.left,l.right]],hw);return{segmentation:vk(Object(Qr.squeeze)(m),n),heatmapScores:o,offsets:s,displacementFwd:c,displacementBwd:d}})),p=d.segmentation,h=d.heatmapScores,f=d.offsets,m=d.displacementFwd,g=d.displacementBwd;return u.dispose(),{segmentation:p,heatmapScores:h,offsets:f,displacementFwd:m,displacementBwd:g,padding:l,internalResolutionHeightAndWidth:s}},e.prototype.segmentPerson=function(e,t){return void 0===t&&(t=vw),bk(this,void 0,void 0,(function(){var n,r,o,a,i,s,c,u,l,d,p,h,f,m,g,b,y,A;return yk(this,(function(v){switch(v.label){case 0:return kw(t=gk(gk({},vw),t)),n=this.segmentPersonActivation(e,t.internalResolution,t.segmentationThreshold),r=n.segmentation,o=n.heatmapScores,a=n.offsets,i=n.displacementFwd,s=n.displacementBwd,c=n.padding,u=n.internalResolutionHeightAndWidth,l=r.shape,d=l[0],p=l[1],[4,r.data()];case 1:return h=v.sent(),r.dispose(),[4,dw([o,a,i,s])];case 2:return f=v.sent(),m=f[0],g=f[1],b=f[2],y=f[3],A=pw(A=Qk(m,g,b,y,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[d,p],u,c,fw),o.dispose(),a.dispose(),i.dispose(),s.dispose(),[2,{height:d,width:p,data:h,allPoses:A}]}}))}))},e.prototype.segmentMultiPerson=function(e,t){return void 0===t&&(t=xw),bk(this,void 0,void 0,(function(){var n,r,o,a,i,s,c,u,l,d,p,h,f,m,g,b,y,A,v,x,k,w=this;return yk(this,(function(C){switch(C.label){case 0:return ww(t=gk(gk({},xw),t)),n=ow(e),r=n[0],o=n[1],a=cw(t.internalResolution,this.baseModel.outputStride,[r,o]),i=lw(e,a),s=i.resized,c=i.padding,u=Object(Qr.tidy)((function(){var e,n=w.predictForMultiPersonInstanceSegmentationAndPart(s),i=n.segmentLogits,u=n.longOffsets,l=n.heatmapScores,d=n.offsets,p=n.displacementFwd,h=n.displacementBwd,f=uw(i,[r,o],a,[[c.top,c.bottom],[c.left,c.right]],hw);return e=u,{segmentation:vk(Object(Qr.squeeze)(f),t.segmentationThreshold),longOffsets:e,heatmapScoresRaw:l,offsetsRaw:d,displacementFwdRaw:p,displacementBwdRaw:h}})),l=u.segmentation,d=u.longOffsets,p=u.heatmapScoresRaw,h=u.offsetsRaw,f=u.displacementFwdRaw,m=u.displacementBwdRaw,[4,dw([p,h,f,m])];case 1:return g=C.sent(),b=g[0],y=g[1],A=g[2],v=g[3],x=pw(x=Qk(b,y,A,v,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[r,o],a,c,fw),[4,Lk(l,d,x,r,o,this.baseModel.outputStride,a,c,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return k=C.sent(),s.dispose(),l.dispose(),d.dispose(),p.dispose(),h.dispose(),f.dispose(),m.dispose(),[2,k]}}))}))},e.prototype.segmentPersonPartsActivation=function(e,t,n){var r=this;void 0===n&&(n=.5);var o=ow(e),a=o[0],i=o[1],s=cw(t,this.baseModel.outputStride,[a,i]),c=lw(e,s),u=c.resized,l=c.padding,d=Object(Qr.tidy)((function(){var e=r.predictForPersonSegmentationAndPart(u),t=e.segmentLogits,o=e.partHeatmapLogits,s=e.heatmapScores,c=e.offsets,d=e.displacementFwd,p=e.displacementBwd,h=u.shape,f=h[0],m=h[1],g=uw(t,[a,i],[f,m],[[l.top,l.bottom],[l.left,l.right]],hw),b=uw(o,[a,i],[f,m],[[l.top,l.bottom],[l.left,l.right]],hw);return{partSegmentation:xk(vk(Object(Qr.squeeze)(g),n),b),heatmapScores:s,offsets:c,displacementFwd:d,displacementBwd:p}})),p=d.partSegmentation,h=d.heatmapScores,f=d.offsets,m=d.displacementFwd,g=d.displacementBwd;return u.dispose(),{partSegmentation:p,heatmapScores:h,offsets:f,displacementFwd:m,displacementBwd:g,padding:l,internalResolutionHeightAndWidth:s}},e.prototype.segmentPersonParts=function(e,t){return void 0===t&&(t=vw),bk(this,void 0,void 0,(function(){var n,r,o,a,i,s,c,u,l,d,p,h,f,m,g,b,y,A;return yk(this,(function(v){switch(v.label){case 0:return kw(t=gk(gk({},vw),t)),n=this.segmentPersonPartsActivation(e,t.internalResolution,t.segmentationThreshold),r=n.partSegmentation,o=n.heatmapScores,a=n.offsets,i=n.displacementFwd,s=n.displacementBwd,c=n.padding,u=n.internalResolutionHeightAndWidth,l=r.shape,d=l[0],p=l[1],[4,r.data()];case 1:return h=v.sent(),r.dispose(),[4,dw([o,a,i,s])];case 2:return f=v.sent(),m=f[0],g=f[1],b=f[2],y=f[3],A=pw(A=Qk(m,g,b,y,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[d,p],u,c,fw),o.dispose(),a.dispose(),i.dispose(),s.dispose(),[2,{height:d,width:p,data:h,allPoses:A}]}}))}))},e.prototype.segmentMultiPersonParts=function(e,t){return void 0===t&&(t=xw),bk(this,void 0,void 0,(function(){var n,r,o,a,i,s,c,u,l,d,p,h,f,m,g,b,y,A,v,x,k,w,C=this;return yk(this,(function(S){switch(S.label){case 0:return ww(t=gk(gk({},xw),t)),n=ow(e),r=n[0],o=n[1],a=cw(t.internalResolution,this.baseModel.outputStride,[r,o]),i=lw(e,a),s=i.resized,c=i.padding,u=Object(Qr.tidy)((function(){var e=C.predictForMultiPersonInstanceSegmentationAndPart(s),n=e.segmentLogits,i=e.longOffsets,u=e.heatmapScores,l=e.offsets,d=e.displacementFwd,p=e.displacementBwd,h=e.partHeatmaps,f=uw(n,[r,o],a,[[c.top,c.bottom],[c.left,c.right]],hw),m=uw(h,[r,o],a,[[c.top,c.bottom],[c.left,c.right]],hw),g=i;return{segmentation:vk(Object(Qr.squeeze)(f),t.segmentationThreshold),longOffsets:g,heatmapScoresRaw:u,offsetsRaw:l,displacementFwdRaw:d,displacementBwdRaw:p,partSegmentation:kk(m)}})),l=u.segmentation,d=u.longOffsets,p=u.heatmapScoresRaw,h=u.offsetsRaw,f=u.displacementFwdRaw,m=u.displacementBwdRaw,g=u.partSegmentation,[4,dw([p,h,f,m])];case 1:return b=S.sent(),y=b[0],A=b[1],v=b[2],x=b[3],k=pw(k=Qk(y,A,v,x,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[r,o],a,c,fw),[4,Fk(l,d,g,k,r,o,this.baseModel.outputStride,a,c,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return w=S.sent(),s.dispose(),l.dispose(),d.dispose(),p.dispose(),h.dispose(),f.dispose(),m.dispose(),g.dispose(),[2,w]}}))}))},e.prototype.dispose=function(){this.baseModel.dispose()},e}();function Sw(e){return bk(this,void 0,void 0,(function(){var t,n,r,o,a,i;return yk(this,(function(s){switch(s.label){case 0:if(t=e.outputStride,n=e.quantBytes,r=e.multiplier,null==Qr)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\n        model.");return o=function(e,t,n){var r={1:"100",.75:"075",.5:"050"},o="model-stride"+e+".json";return 4===n?rw+"float/"+r[t]+"/"+o:rw+"quant"+n+"/"+r[t]+"/"+o}(t,r,n),[4,hk(e.modelUrl||o)];case 1:return a=s.sent(),i=new Ck(a,t),[2,new Cw(i)]}}))}))}function Ow(e){return bk(this,void 0,void 0,(function(){var t,n,r,o,a;return yk(this,(function(i){switch(i.label){case 0:if(t=e.outputStride,n=e.quantBytes,null==Qr)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\n        model.");return r=function(e,t){var n="model-stride"+e+".json";return 4===t?nw+"float/"+n:nw+"quant"+t+"/"+n}(t,n),[4,hk(e.modelUrl||r)];case 1:return o=i.sent(),a=new tw(o,t),[2,new Cw(a)]}}))}))}function Ew(e){return void 0===e&&(e=mw),bk(this,void 0,void 0,(function(){return yk(this,(function(t){return"ResNet50"===(e=function(e){if(null==(e=e||mw).architecture&&(e.architecture="MobileNetV1"),gw.indexOf(e.architecture)<0)throw new Error("Invalid architecture "+e.architecture+". Should be one of "+gw);if(null==e.outputStride&&(e.outputStride=16),bw[e.architecture].indexOf(e.outputStride)<0)throw new Error("Invalid outputStride "+e.outputStride+". Should be one of "+bw[e.architecture]+" for architecture "+e.architecture+".");if(null==e.multiplier&&(e.multiplier=1),yw[e.architecture].indexOf(e.multiplier)<0)throw new Error("Invalid multiplier "+e.multiplier+". Should be one of "+yw[e.architecture]+" for architecture "+e.architecture+".");if(null==e.quantBytes&&(e.quantBytes=4),Aw.indexOf(e.quantBytes)<0)throw new Error("Invalid quantBytes "+e.quantBytes+". Should be one of "+Aw+" for architecture "+e.architecture+".");return e}(e)).architecture?[2,Ow(e)]:"MobileNetV1"===e.architecture?[2,Sw(e)]:[2,null]}))}))}function Iw(e,t,n,r,o){if(void 0===t&&(t={r:0,g:0,b:0,a:0}),void 0===n&&(n={r:0,g:0,b:0,a:255}),void 0===r&&(r=!1),void 0===o&&(o=[1]),Array.isArray(e)&&0===e.length)return null;var a,i=(a=Array.isArray(e)?e:[e])[0],s=i.width,c=i.height,u=new Uint8ClampedArray(s*c*4);function l(e,t,n,r,o,a){void 0===a&&(a={r:0,g:255,b:255,a:255});for(var i=-o;i<=o;i++)for(var s=-o;s<=o;s++)if(0!==i&&0!==s){var c=(t+i)*r+(n+s);e[4*c+0]=a.r,e[4*c+1]=a.g,e[4*c+2]=a.b,e[4*c+3]=a.a}}function d(e,t,n,r,o,a){void 0===o&&(o=[1]),void 0===a&&(a=1);for(var i=0,s=-a;s<=a;s++)for(var c=function(a){if(0!==s&&0!==a){var c=(t+s)*r+(n+a);o.some((function(t){return t===e[c]}))||(i+=1)}},u=-a;u<=a;u++)c(u);return i>0}for(var p=0;p<c;p+=1)for(var h=function(e){var i=p*s+e;u[4*i+0]=n.r,u[4*i+1]=n.g,u[4*i+2]=n.b,u[4*i+3]=n.a;for(var h=function(n){if(o.some((function(e){return e===a[n].data[i]}))){u[4*i]=t.r,u[4*i+1]=t.g,u[4*i+2]=t.b,u[4*i+3]=t.a;var h=d(a[n].data,p,e,s,o);r&&p-1>=0&&p+1<c&&e-1>=0&&e+1<s&&h&&l(u,p,e,s,1)}},f=0;f<a.length;f++)h(f)},f=0;f<s;f+=1)h(f);return new ImageData(u,s,c)}class Tw{constructor(){this.performanceLogs={},this._lastReset=performance.now()}get lastReset(){return this._lastReset}startTimer(e){this.performanceLogs[e]||(this.performanceLogs[e]={lastStartTime:void 0,durations:[]}),this.performanceLogs[e].lastStartTime=performance.now()}endTimer(e){this.performanceLogs[e].durations.push(performance.now()-this.performanceLogs[e].lastStartTime)}formatPerformanceLogAndReset(){const e=Object.keys(this.performanceLogs).filter((e=>this.performanceLogs[e].durations.length)).map((e=>{const t=this.performanceLogs[e].durations;return{key:e,average:t.reduce(((e,t)=>e+t),0)/t.length}})).map((e=>`${e.key}: ${e.average.toPrecision(3)} ms`)).join(" ");return Object.keys(this.performanceLogs).forEach((e=>this.performanceLogs[e].durations.length=0)),this._lastReset=performance.now(),e}}var Nw=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Rw=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class jw{constructor(e){this.postMessage=e,this.performanceLogger=new Tw}logPerformanceAndReset(){if(performance.now()-this.performanceLogger.lastReset>1e3){const e=this.performanceLogger.formatPerformanceLogAndReset();self.console.debug(`AnalyzerWorker performance: ${e}`)}}getOrCreateContext(e){var t;const n=null===(t=this.context)||void 0===t?void 0:t.canvas;if(!n||n.width!=e.width||n.height!=e.height){const t=new OffscreenCanvas(e.width,e.height);this.context=t.getContext("2d",{alpha:!1,desynchronized:!0})}return this.context}getImageData(e){let t;if(e.imageData)t=e.imageData;else if(e.buffer)this.performanceLogger.startTimer("imageDataFromArrayBuffer"),t=new ImageData(new Uint8ClampedArray(e.buffer),e.width,e.height),this.performanceLogger.endTimer("imageDataFromArrayBuffer");else if(e.bitmap){this.performanceLogger.startTimer("imageDataFromImageBitmap");const n=this.getOrCreateContext(e.bitmap);n.drawImage(e.bitmap,0,0),t=n.getImageData(0,0,e.bitmap.width,e.bitmap.height),this.performanceLogger.endTimer("imageDataFromImageBitmap")}return t}handleMessage(e){return Rw(this,void 0,void 0,(function*(){const t=e.data;switch(t.type){case"init":this.handleMessageInit(t);break;case"analyze":this.handleMessageAnalyze(t)}}))}handleMessageInit(e){return Rw(this,void 0,void 0,(function*(){this.model=yield Ew({architecture:"MobileNetV1",outputStride:e.outputStride,multiplier:e.multiplier,quantBytes:e.quantBytes}),this.internalResolution=e.internalResolution,this.segmentationThreshold=e.segmentationThreshold,this.maxDetections=e.maxDetections,this.scoreThreshold=e.scoreThreshold,this.postMessage({ready:!0})}))}handleMessageAnalyze(e){return Rw(this,void 0,void 0,(function*(){try{if(this.model){const t=this.getImageData(e);this.performanceLogger.startTimer("modelDetection");const n=yield this.model.segmentPerson(t,{internalResolution:this.internalResolution,segmentationThreshold:this.segmentationThreshold,maxDetections:e.smartCameraMode===Br.People?this.maxDetections:1,scoreThreshold:this.scoreThreshold});this.performanceLogger.endTimer("modelDetection");const r=[];let o;if(e.backgroundMode!==jr.None){this.performanceLogger.startTimer("drawBlurMask");o=Iw(n,{r:255,g:255,b:255,a:255},{r:0,g:0,b:0,a:0}).data.buffer,r.push(o),this.performanceLogger.endTimer("drawBlurMask")}this.postMessage({allPoses:n.allPoses,blurMask:o,width:t.width,height:t.height},r)}}catch(e){this.postMessage({error:e})}this.logPerformanceAndReset()}))}}Nw([Ze],jw.prototype,"handleMessage",null);var Bw=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class _w{constructor(e,t,{forceAnalyzerInMainThread:n=!1}={}){this.tuningParameters=e,this.onInit=t,this.smartCameraMode=Br.Off,this.imageWidth=0,this.imageHeight=0,this.lastBBoxes=null,this.workerExecuting=!0,this.workerInitialized=!1,this.fpsLogger=new Lr,n?(this.mainAnalyzerWorker=new jw(this.handleAnalyzerWorkerMessage),this.mainAnalyzerWorker.handleMessageInit({type:"init",outputStride:this.tuningParameters.bodyPixModelOutputStride,multiplier:this.tuningParameters.bodyPixModelMultiplier,quantBytes:this.tuningParameters.bodyPixModelQuantBytes,internalResolution:this.tuningParameters.bodyPixSegmentInternalResolution,segmentationThreshold:this.tuningParameters.bodyPixSegmentSegmentationThreshold,maxDetections:this.tuningParameters.bodyPixSegmentMaxDetections,scoreThreshold:this.tuningParameters.bodyPixScoreThreshold})):(this.workerAnalyzerWorker=new Zr,this.workerAnalyzerWorker.onmessage=this.handleWorkerAnalyzerWorkerMessage,this.workerAnalyzerWorker.postMessage({type:"init",outputStride:this.tuningParameters.bodyPixModelOutputStride,multiplier:this.tuningParameters.bodyPixModelMultiplier,quantBytes:this.tuningParameters.bodyPixModelQuantBytes,internalResolution:this.tuningParameters.bodyPixSegmentInternalResolution,segmentationThreshold:this.tuningParameters.bodyPixSegmentSegmentationThreshold,maxDetections:this.tuningParameters.bodyPixSegmentMaxDetections,scoreThreshold:this.tuningParameters.bodyPixScoreThreshold}))}logPerformanceAndReset(){if(performance.now()-this.fpsLogger.lastReset>1e3){const e=this.fpsLogger.formatFrameLogAndReset();yt.Logging.Logger.debug(`VideoStreamAnalyzer performance: ${e}`)}}setSmartCameraMode(e){this.smartCameraMode=e}getVideoParams(e){this.imageWidth=e.width,this.imageHeight=e.height,this.modelPersonLocationAvg={x:this.imageWidth/2,y:this.imageHeight/2,scale:1},this.modelVideoSourceWindow={x:0,y:0,width:this.imageWidth,height:this.imageHeight}}getAnalyzerOutput(e){let t;if(this.modelPersonLocationAvg&&this.smartCameraMode!==Br.Off){const n=this.tuningParameters.analyzerSpringConstant;if(this.imageWidth&&this.imageHeight){const t=Math.min(1,this.modelPersonLocationAvg.scale),r=this.imageWidth*t,o=this.imageHeight*t;let a=Math.max(0,this.modelPersonLocationAvg.x-r/2),i=Math.max(0,this.modelPersonLocationAvg.y-o/2);a+r>this.imageWidth&&(a-=a+r-this.imageWidth),i+o>this.imageHeight&&(i-=i+o-this.imageHeight),e&&(this.modelVideoSourceWindow.x+=(a-this.modelVideoSourceWindow.x)*n,this.modelVideoSourceWindow.y+=(i-this.modelVideoSourceWindow.y)*n,this.modelVideoSourceWindow.width+=(r-this.modelVideoSourceWindow.width)*n,this.modelVideoSourceWindow.height+=(o-this.modelVideoSourceWindow.height)*n)}t=this.modelVideoSourceWindow}else t={x:0,y:0,width:this.imageWidth,height:this.imageHeight};return{blurMask:this.lastBlurMask,width:this.imageWidth,height:this.imageHeight,cropBox:t,debugCropBoxes:this.lastBBoxes?[...this.lastBBoxes]:[]}}analyzeFrame(e,t,n){this.imageHeight!==e.height&&this.getVideoParams(e),this.workerExecuting?this.fpsLogger.logFrameDropped():(this.workerExecuting=!0,this.mainAnalyzerWorker?(e instanceof ImageData&&this.mainAnalyzerWorker.handleMessageAnalyze({type:"analyze",backgroundMode:t,smartCameraMode:n,imageData:e}),e instanceof ImageBitmap&&this.mainAnalyzerWorker.handleMessageAnalyze({type:"analyze",backgroundMode:t,smartCameraMode:n,bitmap:e})):(e instanceof ImageData&&this.workerAnalyzerWorker.postMessage({type:"analyze",backgroundMode:t,smartCameraMode:n,buffer:e.data.buffer,width:e.width,height:e.height,channels:4},[e.data.buffer]),e instanceof ImageBitmap&&this.workerAnalyzerWorker.postMessage({type:"analyze",backgroundMode:t,smartCameraMode:n,bitmap:e},[e]))),this.logPerformanceAndReset()}BBoxToPerson(e,t,n){const{x:r,y:o,width:a,height:i}=e;let s=1;return s=t/n>1?i/n:a/t,{x:r+a/2,y:o+i/2,scale:s}}convertPoseToBBox(e,t,n){let r,o,a,i;const s=(e,t,n,r)=>e+t.position.y/r.length,c=e.keypoints.slice(0,4).reduce(s,0),u=(e.keypoints.slice(5,6).reduce(s,0)-c)/1.5;for(const s of e.keypoints)r=r?Math.max(Math.min(r,s.position.x),0):s.position.x,o=o?Math.min(Math.max(o,s.position.x),t):s.position.x,a=a?Math.max(Math.min(a,s.position.y-u),0):s.position.y,i=i?Math.min(Math.max(i,s.position.y),n):s.position.y;const l=(o-r)*this.tuningParameters.analyzerPoseExtraWidthFactor,d=(i-a)*this.tuningParameters.analyzerPoseExtraHeightFactor;return r-=l,o+=l,a-=d,i+=d,{x:Math.max(0,r),y:Math.max(0,a),width:Math.min(t,o-r),height:Math.min(n,i-a)}}handleWorkerAnalyzerWorkerMessage(e){this.handleAnalyzerWorkerMessage(e.data)}handleAnalyzerWorkerMessage(e){if(e.ready)return void(this.workerExecuting=!1);if(e.error)return void yt.Logging.Logger.error("VideoStreamAnalyzer.handleAnalyzerWorkerMessage: error from worker",e.error);this.workerInitialized||(this.onInit(),this.workerInitialized=!0);const t=e.allPoses.map((t=>({bbox:this.convertPoseToBBox(t,e.width,e.height),score:t.score}))).filter((e=>void 0!==e.bbox)),n=e.width,r=e.height;let o;if(t&&t.length>0&&n&&r&&this.smartCameraMode!==Br.Off){if(this.lastBBoxes=t.map((e=>e.bbox)),this.smartCameraMode===Br.People){const e=(e,t)=>(e.minX=Math.min(e.minX,t.bbox.x),e.minY=Math.min(e.minY,t.bbox.y),e.maxX=Math.max(e.maxX,t.bbox.x+t.bbox.width),e.maxY=Math.max(e.maxY,t.bbox.y+t.bbox.height),e),a={minX:t[0].bbox.x,minY:t[0].bbox.y,maxX:t[0].bbox.x+t[0].bbox.width,maxY:t[0].bbox.y+t[0].bbox.height},i=t.reduce(e,a),s={x:i.minX,y:i.minY,width:i.maxX-i.minX,height:i.maxY-i.minY};o=this.BBoxToPerson(s,n,r)}this.smartCameraMode===Br.Person&&(o=this.BBoxToPerson(t.sort(((e,t)=>{const o=this.BBoxToPerson(e.bbox,n,r),a=this.BBoxToPerson(t.bbox,n,r),i=Math.sqrt(Math.pow(this.modelPersonLocationAvg.x-o.x,2)+Math.pow(this.modelPersonLocationAvg.y-o.y,2)),s=Math.sqrt(Math.pow(this.modelPersonLocationAvg.x-a.x,2)+Math.pow(this.modelPersonLocationAvg.y-a.y,2)),c=Math.sqrt(Math.pow(o.scale,2)+Math.pow(e.score,2))/Math.sqrt(i);return Math.sqrt(Math.pow(a.scale,2)+Math.pow(t.score,2))/Math.sqrt(s)-c}))[0].bbox,n,r));const e=this.tuningParameters.analyzerPersonOverheadSpacePercentage;o.y=Math.max(0,o.y-o.scale*r*(e/100/2)),o.scale+=e/100}else{this.lastBBoxes=null;const e=.05;o=this.modelPersonLocationAvg,o.x+=(n/2-o.x)*e,o.y+=(r/2-o.y)*e,o.scale+=(1-o.scale)*e}if(o){this.modelVideoPersonLocations?(this.modelVideoPersonLocations.length>=this.tuningParameters.analyzerSamplesToAverage&&this.modelVideoPersonLocations.shift(),this.modelVideoPersonLocations.push(o)):this.modelVideoPersonLocations=[o];const e={x:0,y:0,scale:0};this.modelVideoPersonLocations.forEach((t=>{e.x+=t.x,e.y+=t.y,e.scale+=t.scale})),this.modelPersonLocationAvg={x:e.x/this.modelVideoPersonLocations.length,y:e.y/this.modelVideoPersonLocations.length,scale:e.scale/this.modelVideoPersonLocations.length}}this.lastBlurMask=e.blurMask,this.imageWidth=e.width,this.imageHeight=e.height,this.workerExecuting=!1,this.fpsLogger.logFrameRendered()}}function Dw(){return Dr()('!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/Panopto/Scripts/Panopto/Bundles/",r(r.s=0)}([function(t,e,r){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,r){var n=r.value;if("function"!=typeof n)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(o(n)));var a=!1;return{configurable:!0,get:function(){if(a||this===t.prototype||this.hasOwnProperty(e)||"function"!=typeof n)return n;var r=n.bind(this);return a=!0,Object.defineProperty(this,e,{configurable:!0,get:function(){return r},set:function(t){n=t,delete this[e]}}),a=!1,r},set:function(t){n=t}}}var a,i,s,u,h;r.r(e),function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DISPLAY=2]="DISPLAY",t[t.APP=3]="APP"}(a||(a={})),function(t){t[t.Primary=0]="Primary",t[t.Secondary=1]="Secondary"}(i||(i={})),function(t){t.Standard="Standard",t.High="High",t.Ultra="Ultra"}(s||(s={})),function(t){t[t.None=0]="None",t[t.Blur=1]="Blur",t[t.Overlay=2]="Overlay",t[t.Default=3]="Default",t[t.Custom=4]="Custom"}(u||(u={})),function(t){t[t.Off=0]="Off",t[t.Person=1]="Person",t[t.People=2]="People"}(h||(h={}));s.Standard,u.None,h.Off;class c{constructor(){this.performanceLogs={},this._lastReset=performance.now()}get lastReset(){return this._lastReset}startTimer(t){this.performanceLogs[t]||(this.performanceLogs[t]={lastStartTime:void 0,durations:[]}),this.performanceLogs[t].lastStartTime=performance.now()}endTimer(t){this.performanceLogs[t].durations.push(performance.now()-this.performanceLogs[t].lastStartTime)}formatPerformanceLogAndReset(){const t=Object.keys(this.performanceLogs).filter((t=>this.performanceLogs[t].durations.length)).map((t=>{const e=this.performanceLogs[t].durations;return{key:t,average:e.reduce(((t,e)=>t+e),0)/e.length}})).map((t=>`${t.key}: ${t.average.toPrecision(3)} ms`)).join(" ");return Object.keys(this.performanceLogs).forEach((t=>this.performanceLogs[t].durations.length=0)),this._lastReset=performance.now(),t}}var d=function(t,e,r,o){var n,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(a<3?n(i):a>3?n(e,r,i):n(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};class g{constructor(t){this.postMessage=t,this.performanceLogger=new c}logPerformanceAndReset(){if(performance.now()-this.performanceLogger.lastReset>1e3){const t=this.performanceLogger.formatPerformanceLogAndReset();self.console.debug(`ProcessorWorker performance: ${t}`)}}calculateBackgroundImageSourceViewport(t,e,r){if(t/e>r){const o=e*r;return{x:(t-o)/2,y:0,width:o,height:e}}{const o=t/r;return{x:0,y:(e-o)/2,width:t,height:o}}}calculateSourceViewport(t,e,r){const{cropBox:o}=e,n={x:0,y:0,width:t instanceof ImageBitmap?t.width:t.videoWidth,height:t instanceof ImageBitmap?t.height:t.videoHeight};if(r!==h.Off){const t=n.height/e.height;n.x=o.x*t,n.y=o.y*t,n.width=o.width*t,n.height=o.height*t}return n}render(t,e,r,o,n){const a=this.outputContext.canvas,{blurMask:i,cropBox:s}=r,h=this.calculateSourceViewport(t,r,n);if(this.performanceLogger.startTimer("drawCropAndZoom"),this.outputContext.drawImage(t,h.x,h.y,h.width,h.height,0,0,a.width,a.height),this.performanceLogger.endTimer("drawCropAndZoom"),i&&o!==u.None){this.performanceLogger.startTimer("drawTransparentBackground");{const t=new ImageData(new Uint8ClampedArray(r.blurMask),r.width,r.height);this.blurContext.putImageData(t,0,0),this.outputContext.save(),this.outputContext.globalCompositeOperation="destination-in";const e=o===u.Blur?this.blurMaskRadiusBackgroundBlur:this.blurMaskRadiusBackgroundImage;this.outputContext.filter=`blur(${e}px)`,this.outputContext.drawImage(this.blurContext.canvas,s.x,s.y,s.width,s.height,0,0,a.width,a.height),this.outputContext.restore()}if(this.performanceLogger.endTimer("drawTransparentBackground"),this.performanceLogger.startTimer("drawBackgroundImage"),this.outputContext.save(),this.outputContext.globalCompositeOperation="destination-over",o===u.Blur&&(this.outputContext.filter=`blur(${this.blurRadius}px)`,this.outputContext.drawImage(t,h.x,h.y,h.width,h.height,0,0,a.width,a.height)),o===u.Default||o===u.Custom)if(this.outputContext.filter="blur(0px)",e instanceof ImageBitmap){const t=this.calculateBackgroundImageSourceViewport(e.width,e.height,a.width/a.height);this.outputContext.drawImage(e,t.x,t.y,t.width,t.height,0,0,a.width,a.height)}else this.outputContext.fillStyle="black",this.outputContext.fillRect(0,0,a.width,a.height);this.outputContext.restore(),this.performanceLogger.endTimer("drawBackgroundImage")}}renderDebug(t,e,r,o,n){const a=this.outputContext.canvas,{cropBox:i,debugCropBoxes:s}=r,u=a.height/r.height;if(this.performanceLogger.startTimer("drawCropAndZoom"),this.outputContext.drawImage(t,0,0,t instanceof ImageBitmap?t.width:t.videoWidth,t instanceof ImageBitmap?t.height:t.videoHeight,0,0,a.width,a.height),n!==h.Off&&(i&&(this.outputContext.strokeStyle="#F00",this.outputContext.strokeRect(u*i.x,u*i.y,u*i.width,u*i.height)),s))for(const t of s)this.outputContext.strokeStyle="#0F0",this.outputContext.strokeRect(u*t.x,u*t.y,u*t.width,u*t.height)}handleMessage(t){const e=t.data;switch(e.type){case"init":this.handleMessageInit(e);break;case"update-background":this.handleMessageUpdateBackground(e);break;case"render":this.handleMessageRender(e)}}handleMessageInit(t){this.blurMaskRadiusBackgroundBlur=t.blurMaskRadiusBackgroundBlur,this.blurMaskRadiusBackgroundImage=t.blurMaskRadiusBackgroundImage,this.blurRadius=t.blurRadius,this.blurContext=t.blurCanvas.getContext("2d",{desynchronized:!0}),this.outputContext=t.outputCanvas.getContext("2d",{alpha:!1,desynchronized:!0})}handleMessageUpdateBackground(t){this.backgroundImageBitmap=t.backgroundImageSource}handleMessageRender(t,e=!1){this.blurContext.canvas.width=this.outputContext.canvas.width=t.imageSource.width,this.blurContext.canvas.height=this.outputContext.canvas.height=t.imageSource.height;try{t.debug?this.renderDebug(t.imageSource,this.backgroundImageBitmap,t.analyzerOutput,t.backgroundMode,t.smartCameraMode):this.render(t.imageSource,this.backgroundImageBitmap,t.analyzerOutput,t.backgroundMode,t.smartCameraMode)}catch(t){self.console.warn("ProcessorWorker render error",t)}finally{this.postMessage(void 0)}this.logPerformanceAndReset()}}d([n],g.prototype,"handleMessage",null);const l=new g(postMessage.bind(void 0));onmessage=l.handleMessage}]);\n',"Worker",void 0,void 0)}Bw([Ze],_w.prototype,"handleWorkerAnalyzerWorkerMessage",null),Bw([Ze],_w.prototype,"handleAnalyzerWorkerMessage",null);var Mw=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class $w{constructor(e){this.postMessage=e,this.performanceLogger=new Tw}logPerformanceAndReset(){if(performance.now()-this.performanceLogger.lastReset>1e3){const e=this.performanceLogger.formatPerformanceLogAndReset();self.console.debug(`ProcessorWorker performance: ${e}`)}}calculateBackgroundImageSourceViewport(e,t,n){if(e/t>n){const r=t*n;return{x:(e-r)/2,y:0,width:r,height:t}}{const r=e/n;return{x:0,y:(t-r)/2,width:e,height:r}}}calculateSourceViewport(e,t,n){const{cropBox:r}=t,o={x:0,y:0,width:e instanceof ImageBitmap?e.width:e.videoWidth,height:e instanceof ImageBitmap?e.height:e.videoHeight};if(n!==Br.Off){const e=o.height/t.height;o.x=r.x*e,o.y=r.y*e,o.width=r.width*e,o.height=r.height*e}return o}render(e,t,n,r,o){const a=this.outputContext.canvas,{blurMask:i,cropBox:s}=n,c=this.calculateSourceViewport(e,n,o);if(this.performanceLogger.startTimer("drawCropAndZoom"),this.outputContext.drawImage(e,c.x,c.y,c.width,c.height,0,0,a.width,a.height),this.performanceLogger.endTimer("drawCropAndZoom"),i&&r!==jr.None){this.performanceLogger.startTimer("drawTransparentBackground");{const e=new ImageData(new Uint8ClampedArray(n.blurMask),n.width,n.height);this.blurContext.putImageData(e,0,0),this.outputContext.save(),this.outputContext.globalCompositeOperation="destination-in";const t=r===jr.Blur?this.blurMaskRadiusBackgroundBlur:this.blurMaskRadiusBackgroundImage;this.outputContext.filter=`blur(${t}px)`,this.outputContext.drawImage(this.blurContext.canvas,s.x,s.y,s.width,s.height,0,0,a.width,a.height),this.outputContext.restore()}if(this.performanceLogger.endTimer("drawTransparentBackground"),this.performanceLogger.startTimer("drawBackgroundImage"),this.outputContext.save(),this.outputContext.globalCompositeOperation="destination-over",r===jr.Blur&&(this.outputContext.filter=`blur(${this.blurRadius}px)`,this.outputContext.drawImage(e,c.x,c.y,c.width,c.height,0,0,a.width,a.height)),r===jr.Default||r===jr.Custom)if(this.outputContext.filter="blur(0px)",t instanceof ImageBitmap){const e=this.calculateBackgroundImageSourceViewport(t.width,t.height,a.width/a.height);this.outputContext.drawImage(t,e.x,e.y,e.width,e.height,0,0,a.width,a.height)}else this.outputContext.fillStyle="black",this.outputContext.fillRect(0,0,a.width,a.height);this.outputContext.restore(),this.performanceLogger.endTimer("drawBackgroundImage")}}renderDebug(e,t,n,r,o){const a=this.outputContext.canvas,{cropBox:i,debugCropBoxes:s}=n,c=a.height/n.height;if(this.performanceLogger.startTimer("drawCropAndZoom"),this.outputContext.drawImage(e,0,0,e instanceof ImageBitmap?e.width:e.videoWidth,e instanceof ImageBitmap?e.height:e.videoHeight,0,0,a.width,a.height),o!==Br.Off&&(i&&(this.outputContext.strokeStyle="#F00",this.outputContext.strokeRect(c*i.x,c*i.y,c*i.width,c*i.height)),s))for(const e of s)this.outputContext.strokeStyle="#0F0",this.outputContext.strokeRect(c*e.x,c*e.y,c*e.width,c*e.height)}handleMessage(e){const t=e.data;switch(t.type){case"init":this.handleMessageInit(t);break;case"update-background":this.handleMessageUpdateBackground(t);break;case"render":this.handleMessageRender(t)}}handleMessageInit(e){this.blurMaskRadiusBackgroundBlur=e.blurMaskRadiusBackgroundBlur,this.blurMaskRadiusBackgroundImage=e.blurMaskRadiusBackgroundImage,this.blurRadius=e.blurRadius,this.blurContext=e.blurCanvas.getContext("2d",{desynchronized:!0}),this.outputContext=e.outputCanvas.getContext("2d",{alpha:!1,desynchronized:!0})}handleMessageUpdateBackground(e){this.backgroundImageBitmap=e.backgroundImageSource}handleMessageRender(e,t=!1){this.blurContext.canvas.width=this.outputContext.canvas.width=e.imageSource.width,this.blurContext.canvas.height=this.outputContext.canvas.height=e.imageSource.height;try{e.debug?this.renderDebug(e.imageSource,this.backgroundImageBitmap,e.analyzerOutput,e.backgroundMode,e.smartCameraMode):this.render(e.imageSource,this.backgroundImageBitmap,e.analyzerOutput,e.backgroundMode,e.smartCameraMode)}catch(e){self.console.warn("ProcessorWorker render error",e)}finally{this.postMessage(void 0)}this.logPerformanceAndReset()}}Mw([Ze],$w.prototype,"handleMessage",null);var Pw=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};class Lw{constructor(e,t,n,r,{forceRenderInMainThread:o=!1,debug:a=!1}={}){if(this.processingCanvas=t,this.tuningParameters=r,this.workerExecuting=!1,this.backgroundMode=jr.None,this.smartCameraMode=Br.Off,this.fpsLogger=new Lr,"undefined"==typeof OffscreenCanvas||o)this.mainProcessorWorker=new $w(this.handleWorkerMessage),this.mainProcessorWorker.handleMessageInit({type:"init",blurMaskRadiusBackgroundBlur:this.tuningParameters.processorBlurMaskRadiusBackgroundBlur,blurMaskRadiusBackgroundImage:this.tuningParameters.processorBlurMaskRadiusBackgroundImage,blurRadius:this.tuningParameters.processorBlurRadius,blurCanvas:e,outputCanvas:n});else{this.workerProcessorWorker=new Dw,this.workerProcessorWorker.addEventListener("message",this.handleWorkerMessage);const n=e.transferControlToOffscreen(),r=t.transferControlToOffscreen();this.workerProcessorWorker.postMessage({type:"init",blurMaskRadiusBackgroundBlur:this.tuningParameters.processorBlurMaskRadiusBackgroundBlur,blurMaskRadiusBackgroundImage:this.tuningParameters.processorBlurMaskRadiusBackgroundImage,blurRadius:this.tuningParameters.processorBlurRadius,blurCanvas:n,outputCanvas:r},[n,r])}this.outputContext=n.getContext("2d",{alpha:!1,desynchronized:!0}),this.debug=a}logPerformanceAndReset(){if(performance.now()-this.fpsLogger.lastReset>1e3){const e=this.fpsLogger.formatFrameLogAndReset();yt.Logging.Logger.debug(`VideoStreamProcessor performance: ${e}`)}}setModes(e,t){this.backgroundMode=e,this.smartCameraMode=t}handleWorkerMessage(){this.workerExecuting=!1,this.fpsLogger.logFrameRendered(),this.workerProcessorWorker&&this.outputContext.drawImage(this.processingCanvas,0,0)}renderFrameInMain(e,t){this.mainProcessorWorker.handleMessageRender({type:"render",imageSource:e,analyzerOutput:t,debug:this.debug,backgroundMode:this.backgroundMode,smartCameraMode:this.smartCameraMode})}renderFrameInWorker(e,t){this.workerProcessorWorker.postMessage({type:"render",imageSource:e,analyzerOutput:t,debug:this.debug,backgroundMode:this.backgroundMode,smartCameraMode:this.smartCameraMode},[e])}renderFrame(e,t){if(this.workerExecuting)this.fpsLogger.logFrameDropped();else if(this.workerExecuting=!0,this.mainProcessorWorker){if(!(e instanceof HTMLVideoElement))throw"Using main thread but imageSource type is not HTMLVideoElement.";this.renderFrameInMain(e,t)}else{if(!(e instanceof ImageBitmap))throw"Using worker thread but imageSource type is not ImageBitmap.";this.renderFrameInWorker(e,t)}this.logPerformanceAndReset()}updateBackground(e){if(this.mainProcessorWorker){if(!(e instanceof ImageBitmap))throw"Using main thread but imageSource type is not ImageBitmap.";this.mainProcessorWorker.handleMessageUpdateBackground({type:"update-background",backgroundImageSource:e})}else{if(!(e instanceof ImageBitmap))throw"Using worker thread but imageSource type is not ImageBitmap.";this.workerProcessorWorker.postMessage({type:"update-background",backgroundImageSource:e},[e])}}}Pw([Ze],Lw.prototype,"handleWorkerMessage",null);class Fw{constructor(e,{forceUsingCanvasElement:t=!1,forceRenderInMainThread:n=!1}={}){this.performanceLogger=new Tw;const r={alpha:!1,desynchronized:!0};if(!t&&"undefined"!=typeof OffscreenCanvas)try{this.offscreenCanvas=e.transferControlToOffscreen(),this.context=this.offscreenCanvas.getContext("2d",r)}catch(e){}void 0===this.context&&(this.context=e.getContext("2d",r),yt.Logging.Logger.warning("VideoToImageRetriever using fallback canvas rendering.")),this.forceRenderInMainThread=n}getImage(e,t){const n=this.canGetImageBitmap?this.getImageBitmap(e,t):this.getImageData(e,t);return this.logPerformanceAndReset(),n}getImageSource(e,t){const n=this.canGetImageBitmap?this.getImageBitmap(e,t):this.getVideoImageSource(e,t);return this.logPerformanceAndReset(),n}get canGetImageBitmap(){return!!this.offscreenCanvas&&!this.forceRenderInMainThread}logPerformanceAndReset(){if(performance.now()-this.performanceLogger.lastReset>1e3){const e=this.performanceLogger.formatPerformanceLogAndReset();yt.Logging.Logger.debug(`VideoToImageRetriever performance: ${e}`)}}resizeCanvasBasedOnVideoSize(e,t,n){const r=e/t,o=Math.min(t,n),a=o*r;this.context.canvas.width=a,this.context.canvas.height=o}getVideoImageSource(e,t){const{videoWidth:n,videoHeight:r}=e,o=n/r,a=Math.min(r,t),i=a*o;return e.width=i,e.height=a,e}getImageData(e,t){this.performanceLogger.startTimer("getImageData");const{videoWidth:n,videoHeight:r}=e;this.resizeCanvasBasedOnVideoSize(n,r,t),this.context.drawImage(e,0,0,n,r,0,0,this.context.canvas.width,this.context.canvas.height);const o=this.context.getImageData(0,0,this.context.canvas.width,this.context.canvas.height);return this.performanceLogger.endTimer("getImageData"),o}getImageBitmap(e,t){this.performanceLogger.startTimer("getImageBitmap");const{videoWidth:n,videoHeight:r}=e;this.resizeCanvasBasedOnVideoSize(n,r,t),this.context.drawImage(e,0,0,n,r,0,0,this.context.canvas.width,this.context.canvas.height);const o=this.offscreenCanvas.transferToImageBitmap();return this.performanceLogger.endTimer("getImageBitmap"),o}}var zw=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Uw=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class Ww extends Be.Component{constructor(e){super(e),this.primaryCanvas=Be.createRef(),this.tileCanvas=Be.createRef(),this.tileFpsLogger=new Lr,this.blurCanvas=Be.createRef(),this.processingCanvas=Be.createRef(),this.processedCanvas=Be.createRef(),this.processedFpsLogger=new Lr,this.backgroundImage=Be.createRef(),this.tileRendererHung=!1,this.cellCoords=(e,t,n,r,o,a)=>{let[i,s,c,u]=[e,t,r,o];if(n<a){const t=o*n;c=t,i=e+(r-t)/2}else{const e=r/n;u=e,s=t+(o-e)/2}return{x:i,y:s,width:c,height:u}},this.state={processedMediaStream:null,processedCanvasWidth:0,processedCanvasHeight:0,isAnalyzerInitialized:!1},this.oscilloscope=null,this.tileMediaStream=null,this.lastTileFrameTime=0,this.lastProcessedFrameTime=0,this.timeoutWorker=new Mr,this.timeoutWorker.onmessage=this.timeoutWorkerCallback.bind(this)}get tileStream(){if(this.tileCanvas.current){if(this.tileCanvasCtx&&this.tileCanvas.current!=this.tileCanvasCtx.canvas)throw"Drift!";this.tileMediaStream||(this.tileMediaStream=new Pr(this.tileCanvas.current,this.props.maxTileFPS,this.props.maxTileFPS))}return this.tileMediaStream.stream}componentDidMount(){this.lastFPSReport=performance.now(),this.lastAnalyzedFrameTime=performance.now(),this.updateBackgroundImageBitmap(),this.startAnimation()}shouldComponentUpdate(e,t){let n=!1;if(e.videoStreams.length===this.props.videoStreams.length)for(let t=0;t<e.videoStreams.length;t++)e.videoStreams[t]!==this.props.videoStreams[t]&&(n=!0);else n=!0;if(e.displayStreams.length===this.props.displayStreams.length)for(let t=0;t<e.displayStreams.length;t++)e.displayStreams[t]!==this.props.displayStreams[t]&&(n=!0);else n=!0;return!(!n&&t===this.state&&e.videoDevicesInitialized===this.props.videoDevicesInitialized&&e.isObscured===this.props.isObscured&&e.useTile===this.props.useTile&&e.tileCanvasHeight===this.props.tileCanvasHeight&&e.tileCanvasWidth===this.props.tileCanvasWidth&&e.usePIP===this.props.usePIP&&e.debug===this.props.debug&&e.oscilloscopeEnabled===this.props.oscilloscopeEnabled&&e.processedStreamMaxHeight===this.props.processedStreamMaxHeight&&e.backgroundMode===this.props.backgroundMode&&e.backgroundImageKey===this.props.backgroundImageKey&&e.smartCameraMode===this.props.smartCameraMode&&this.oscilloscope)}componentDidUpdate(e,t){const n=e.oscilloscopeEnabled&&!!e.oscilloscopeCanvas,r=this.props.oscilloscopeEnabled&&!!this.props.oscilloscopeCanvas;if(!n&&r&&(this.props.oscilloscopeCanvas&&!this.oscilloscope&&this.props.audioSource&&(this.oscilloscope=new Fr(this.props.audioSource,Ww.bufferLength,this.props.oscilloscopeCanvas.getContext("2d"))),this.startAnimation()),n&&!r&&this.oscilloscope&&(this.oscilloscope.clear(),this.oscilloscope=null,this.stopAnimation()),e.backgroundImageKey!==this.props.backgroundImageKey&&this.updateBackgroundImageBitmap(),this.tileCanvas.current&&(this.tileCanvasCtx||(this.tileCanvasCtx=this.tileCanvas.current.getContext("2d",{alpha:!1,desynchronized:!0}),this.tileOscilloscope=new Fr(this.props.audioSource,Ww.bufferLength,this.tileCanvasCtx),this.props.onTileStreamCreated(this.tileStream))),this.videoStreamProcessor&&this.videoStreamProcessor.setModes(this.props.backgroundMode,this.props.smartCameraMode),this.isAnalyzerRequired())if(this.videoToImageRetriever||(this.videoToImageRetriever=new Fw(this.primaryCanvas.current,{forceUsingCanvasElement:this.props.forceUsingCanvasElement,forceRenderInMainThread:this.props.forceRenderInMainThread})),this.videoStreamAnalyzer||(this.videoStreamAnalyzer=new _w(this.props.tuningParameters,this.handleAnalyzerInit,{forceAnalyzerInMainThread:this.props.forceAnalyzerInMainThread})),this.videoStreamProcessor||(this.videoStreamProcessor=new Lw(this.blurCanvas.current,this.processingCanvas.current,this.processedCanvas.current,this.props.tuningParameters,{debug:this.props.debug,forceRenderInMainThread:this.props.forceRenderInMainThread}),this.backgroundImageBitmap&&this.videoStreamProcessor.updateBackground(this.backgroundImageBitmap)),this.videoStreamAnalyzer.setSmartCameraMode(this.props.smartCameraMode),this.props.videoStreams.length>0){if(0==e.videoStreams.length||e.videoStreams.length>0&&e.videoStreams[0]!=this.props.videoStreams[0]||null==this.state.processedMediaStream){const e=this.props.videoStreams[0].getVideoTracks()[0].getSettings().width,t=this.props.videoStreams[0].getVideoTracks()[0].getSettings().height,n=e/t,r=Math.min(this.props.processedStreamMaxHeight,t),o=r*n;this.state.processedCanvasWidth===o&&this.state.processedCanvasHeight===r||(yt.Logging.Logger.verbose("StreamVisualizer.componentDidUpdate: Unset processed stream, canvas size changed."),this.setState({processedMediaStream:null,processedCanvasWidth:o,processedCanvasHeight:r}))}if(!this.state.processedMediaStream&&this.state.processedCanvasHeight>0&&this.processedCanvas.current){this.processedCanvasCtx=this.processedCanvas.current.getContext("2d",{alpha:!1,desynchronized:!0});const e=new Pr(this.processedCanvas.current,this.props.maxProcessedFPS,0===this.props.maxProcessedFPS?this.props.tuningParameters.processorMaxPullFpsUltra:this.props.maxProcessedFPS);yt.Logging.Logger.verbose(`StreamVisualizer.componentDidUpdate: New processed stream created: ${e.stream.id}.`),this.props.onProcessedStreamCreated&&this.props.onProcessedStreamCreated(e.stream),this.setState({processedMediaStream:e})}}else this.primaryVideoElement=null,this.state.processedMediaStream&&(yt.Logging.Logger.verbose("StreamVisualizer.componentDidUpdate: Unset processed stream, no input video streams."),this.props.onProcessedStreamCreated&&this.props.onProcessedStreamCreated(null),this.setState({processedMediaStream:null}));else this.state.processedMediaStream&&(yt.Logging.Logger.verbose("StreamVisualizer.componentDidUpdate: Unset processed stream, analyzer no longer required."),this.setState({processedMediaStream:null}),this.props.onProcessedStreamCreated&&this.props.onProcessedStreamCreated(null));let o=!1;const a=[...this.props.videoStreams,...this.props.displayStreams];if(a===[...e.videoStreams,...e.displayStreams]&&this.props.useTile===e.useTile&&this.props.backgroundMode===e.backgroundMode&&this.props.smartCameraMode===e.smartCameraMode||(o=!0),o&&a.length>0&&(this.props.useTile||this.isAnalyzerRequired())){const e=a.map((e=>e.getVideoTracks()[0].getSettings().frameRate)),t=Math.max(...e);let n=t;(this.props.maxTileFPS>0||this.props.maxProcessedFPS>0)&&(n=Math.max(this.props.maxTileFPS,this.props.maxProcessedFPS)),n=Math.min(t,n),n&&this.timeoutWorker.postMessage(1e3/n)}else this.timeoutWorker.postMessage(0)}componentWillUnmount(){this.oscilloscope&&this.oscilloscope.dispose(),this.tileOscilloscope&&this.tileOscilloscope.dispose()}updateBackgroundImageBitmap(){return Uw(this,void 0,void 0,(function*(){const{imageStorageService:e,backgroundImageKey:t}=this.props;let n;if(t){const r=yield e.getBackground(t);n=URL.createObjectURL(r)}if(n){const e=this.backgroundImage.current,t=()=>Uw(this,void 0,void 0,(function*(){e.removeEventListener("load",t);const n=yield window.createImageBitmap(this.backgroundImage.current);this.backgroundImageBitmap=n,this.videoStreamProcessor&&this.videoStreamProcessor.updateBackground(this.backgroundImageBitmap)}));this.backgroundImage.current.src=n,this.backgroundImage.current.addEventListener("load",t)}this.setState({backgroundImageUrl:n})}))}handleAnalyzerInit(){this.setState({isAnalyzerInitialized:!0})}isAnalyzerRequired(){return this.props.videoStreams.length>0&&(this.props.backgroundMode!==jr.None||this.props.smartCameraMode!==Br.Off)}togglePictureInPicture(e){try{e!==document.pictureInPictureElement?e.requestPictureInPicture():document.exitPictureInPicture()}catch(e){}}getAnalyzerImageHeight(e,t){let n=e;for(;n>t;)n/=2;return n}renderVideo(e){const t=this.props.tuningParameters.analyzerMaxFps;let n=!1;const r=this.primaryVideoElement&&this.hasUpdated(this.primaryVideoElement);if(this.isAnalyzerRequired()&&this.videoStreamAnalyzer&&r){const r=this.props.videoStreams[0].getVideoTracks()[0].getSettings().frameRate,o=e-this.lastAnalyzedFrameTime,a=Math.floor(1e3/t);if(0===t||o>=a){const t=this.videoToImageRetriever.getImage(this.primaryVideoElement.video,this.getAnalyzerImageHeight(this.primaryVideoElement.video.videoHeight,this.props.tuningParameters.analyzerMaxHeight));this.videoStreamAnalyzer.analyzeFrame(t,this.props.backgroundMode,this.props.smartCameraMode),this.lastAnalyzedFrameTime=e}const i=e-this.lastProcessedFrameTime,s=Math.floor(1e3/this.props.maxProcessedFPS);if(0===this.props.maxProcessedFPS||r<=this.props.maxProcessedFPS||i>=s){const t=this.videoStreamAnalyzer.getAnalyzerOutput(!0),r=this.videoToImageRetriever.getImageSource(this.primaryVideoElement.video,this.props.processedStreamMaxHeight);this.videoStreamProcessor.renderFrame(r,t),this.state.processedMediaStream.requestFrameIfRequired(),n=!0,this.lastProcessedFrameTime=e}}n?this.processedFpsLogger.logFrameRendered():this.processedFpsLogger.logFrameDropped();const o=e-this.lastTileFrameTime;this.props.useTile&&(0==this.props.maxTileFPS||o>=Math.floor(1e3/this.props.maxTileFPS))?this.tileVideo(e):this.tileFpsLogger.logFrameDropped();(this.props.smartCameraMode!==Br.Off||this.props.useTile)&&this.lastFPSReport+Ww.renderingReportPeriod<e&&(yt.Logging.Logger.verbose(`StreamVisualizer.tileVideo(): rendered TILE: ${this.tileFpsLogger.formatFrameLogAndReset()} PROCESSED: ${this.processedFpsLogger.formatFrameLogAndReset()}`),this.lastFPSReport=e)}timeoutWorkerCallback(e){const t=performance.now();document.hidden&&this.renderVideo(t)}startAnimation(){if(!this.drawRequest){const e=t=>{this.renderVideo(t),this.props.oscilloscopeEnabled&&this.oscilloscope&&this.oscilloscope.draw(),this.drawRequest=window.requestAnimationFrame(e)};this.drawRequest=1,e(performance.now())}}stopAnimation(){this.drawRequest&&(window.cancelAnimationFrame(this.drawRequest),this.drawRequest=0),this.oscilloscope&&this.oscilloscope.clear()}hasUpdated(e){let t=!1;const n=e.video,r=e.video;return e.video&&e.video.videoWidth&&e.video.videoHeight&&(n.mozPaintedFrames>e.decoded?(e.decoded=n.mozPaintedFrames,t=!0):r.webkitDecodedFrameCount>e.decoded?(e.decoded=r.webkitDecodedFrameCount,t=!0):(0===n.mozPaintedFrames&&this.props.standAloneMode||void 0===n.mozPaintedFrames&&void 0===r.webkitDecodedFrameCount)&&(t=!0)),t}tileVideo(e){let t=!1,n=null;if(this.tileCanvas.current&&(n=this.tileCanvasCtx,this.tileOffscreenCanvas&&(this.tileOffscreenCtx||(this.tileOffscreenCtx=this.tileOffscreenCanvas.getContext("2d",{alpha:!1,desynchronized:!0})),n=this.tileOffscreenCtx)),this.videoElements&&n){const r=Math.ceil(Math.sqrt(this.videoElements.length)),o=Math.ceil(this.videoElements.length/r),a=this.props.tileCanvasHeight/o,i=this.props.tileCanvasWidth/r,s=i/a,c=!this.videoElements.some((e=>!e.video.srcObject.getVideoTracks()[0].muted));if(this.videoElements.length&&c)n.fillStyle="transparent",n.fillRect(0,0,1,1),t=!0;else if(this.props.usePIP&&2==this.videoElements.length&&this.videoElements[1].video&&0!==this.videoElements[1].video.srcObject.getVideoTracks()[0].getSettings().deviceId.lastIndexOf("screen",0)){const e=this.videoElements[1],r=this.videoElements[0],o=e.video.videoWidth/e.video.videoHeight;e.aspect!==o&&(e.aspect=o);const a=this.props.tileCanvasWidth/3,i=a/o,s=this.props.tileCanvasWidth-a,c=this.props.tileCanvasHeight-i;if(e.video&&e.video.srcObject&&e.video.readyState>=2&&this.hasUpdated(e)){if(this.isAnalyzerRequired()&&this.videoStreamAnalyzer){const e=this.videoStreamAnalyzer.getAnalyzerOutput(!1),t=this.videoToImageRetriever.getImageSource(this.primaryVideoElement.video,this.props.processedStreamMaxHeight);this.videoStreamProcessor.renderFrame(t,e),n.drawImage(this.processedCanvasCtx.canvas,0,0,this.processedCanvasCtx.canvas.width,this.processedCanvasCtx.canvas.height,s,c,a,i)}else n.drawImage(e.video,s,c,a,i);t=!0}if(r.video&&r.video.srcObject&&r.video.readyState>=2&&this.hasUpdated(r)){const e=r.video.srcObject.getVideoTracks()[0].getSettings(),o=e.width/e.height;let s=this.props.tileCanvasHeight,c=this.props.tileCanvasWidth;let u,l=0,d=0;if(o<this.props.tileCanvasWidth/this.props.tileCanvasHeight){const e=s*o;c=e,l+=(this.props.tileCanvasWidth-e)/2,u=r.video.videoHeight/s}else{const e=c/o;s=e,d+=(this.props.tileCanvasHeight-e)/2,u=r.video.videoWidth/c}const[p,h,f,m]=[0,0,r.video.videoWidth,r.video.videoHeight-(i-d)*u],[g,b,y,A]=[l,d,c,s-(i-d)],[v,x,k,w]=[0,r.video.videoHeight-(i-d)*u,r.video.videoWidth-(a-l)*u,(i-d)*u],[C,S,O,E]=[l,this.props.tileCanvasHeight-i,c-(a-l),i-d];r.aspect!=o&&(r.aspect=o,n.clearRect(0,0,this.props.tileCanvasWidth,this.props.tileCanvasHeight)),n.drawImage(r.video,p,h,f,m,g,b,y,A),n.drawImage(r.video,v,x,k,w,C,S,O,E),t=!0}}else if(this.videoElements.length>0){for(let e=0;e<this.videoElements.length;e++)if(this.hasUpdated(this.videoElements[e])){if(this.videoElements[e].video&&this.videoElements[e].video.readyState>=2){let t=e%r*i,o=Math.floor(e/r)*a,c=i,u=a;const l=this.videoElements[e].video.videoWidth/this.videoElements[e].video.videoHeight;if(this.videoElements[e].aspect!=l&&(n.clearRect(0,0,n.canvas.width,n.canvas.height),this.videoElements[e].aspect=l),({x:t,y:o,width:c,height:u}=this.cellCoords(t,o,l,i,a,s)),0==e&&this.isAnalyzerRequired()&&this.videoStreamAnalyzer){const e=this.videoStreamAnalyzer.getAnalyzerOutput(!1),r=this.videoToImageRetriever.getImageSource(this.primaryVideoElement.video,this.props.processedStreamMaxHeight);this.videoStreamProcessor.renderFrame(r,e),this.processedCanvas.current.width&&this.processedCanvas.current.height&&n.drawImage(this.processedCanvasCtx.canvas,0,0,this.processedCanvasCtx.canvas.width,this.processedCanvasCtx.canvas.height,t,o,c,u)}else n.drawImage(this.videoElements[e].video,t,o,c,u)}t=!0}}else this.tileOscilloscope.draw(),t=!0;if(t){if(this.tileOffscreenCanvas){const e=this.tileOffscreenCanvas.transferToImageBitmap();this.tileCanvasCtx instanceof ImageBitmapRenderingContext?this.tileCanvasCtx.transferFromImageBitmap(e):this.tileCanvasCtx instanceof CanvasRenderingContext2D&&this.tileCanvasCtx.drawImage(e,0,0,this.tileOffscreenCanvas.width,this.tileOffscreenCanvas.height)}this.tileMediaStream.requestFrameIfRequired(),this.lastTileFrameTime=e}}t?(this.tileFpsLogger.logFrameRendered(),this.tileRendererHung&&(this.tileRendererHung=!1,this.props.onTileRendererResume())):(this.tileFpsLogger.logFrameDropped(),!this.tileRendererHung&&e-this.lastTileFrameTime>Ww.renderingReportPeriod&&(this.tileRendererHung=!0,this.props.onTileRendererHang()))}renderStreamVisual(e,t,n,r,o){const a=e.getVideoTracks()[0].getSettings().deviceId||e.id;let i=null,s=!1;t===ar.DISPLAY&&(s=0===a.lastIndexOf("screen",0));const c=this.props.debug?{width:"192px",height:"108px"}:{width:"2px",height:"2px"},u=r&&this.isAnalyzerRequired()&&!this.state.isAnalyzerInitialized;return Be.createElement("div",{className:"stream-visual",key:a},Be.createElement("video",{style:r&&o?c:null,id:r?"primaryVideo":"secondaryVideo",key:"input-"+e.id,muted:!0,autoPlay:!0,playsInline:!0,tabIndex:-1,ref:t=>{t&&(n.push({video:t,decoded:0,aspect:0}),o&&r||(i=t),t.srcObject?r&&t!==this.primaryVideoElement.video&&(this.primaryVideoElement={video:t,decoded:0,aspect:0}):(t.srcObject!=e&&(t.srcObject=e,t.play()),r&&(!this.primaryVideoElement||this.primaryVideoElement&&this.primaryVideoElement.video!==t)&&(this.primaryVideoElement={video:t,decoded:0,aspect:0})))}}),r&&o&&Be.createElement("video",{muted:!0,autoPlay:!0,tabIndex:-1,id:"processedStreamVideo-"+e.id,key:"processed-"+e.id,ref:e=>{e&&(i=e,e.srcObject&&e.srcObject===o.stream?yt.Logging.Logger.verbose(`StreamVisualizer.renderStreamVisual.trackProcessedVideoElement(): ${e.id} already had srcObject id=${e.srcObject.id}`):(yt.Logging.Logger.verbose(`StreamVisualizer.renderStreamVisual.trackProcessedVideoElement(): set ${e.id} srcObject to processedMediaStream.id=${o.stream.id}`),e.srcObject=o.stream))}}),Be.createElement(Ur,{isVisible:u}),!this.props.isObscured&&Be.createElement(Xr,{isPrimary:r,streamType:t,hideBackgroundButton:this.props.hideBackgroundButton,hideSmartCameraButton:this.props.hideSmartCameraButton,isBackgroundModeDefaultAvailable:this.props.isBackgroundModeDefaultAvailable,isBackgroundModeCustomAvailable:this.props.isBackgroundModeCustomAvailable,backgroundImageUrl:this.state.backgroundImageUrl,backgroundMode:this.props.backgroundMode,smartCameraMode:this.props.smartCameraMode,onBackgroundModeToggle:this.props.onBackgroundModeChange,onSmartCameraModeToggle:this.props.onSmartCameraModeChange,onPictureInPictureToggle:()=>this.togglePictureInPicture(i),onFullscreenToggle:()=>yt.Helpers.toggleFullscreen(i,!0),onRemoveStream:()=>this.props.onRemoveClick(a)}),s&&Be.createElement("div",{className:"screen-overlay"}))}render(){const{t:e}=this.props,t=this.props.videoStreams.length+this.props.displayStreams.length;let n,r=this.props.videoStreams;2===t&&r.length>0&&this.props.usePIP&&(n=r[0],r=r.slice(1));const o=r.length+this.props.displayStreams.length,a=Math.ceil(Math.sqrt(o)),i={display:"flex",width:Math.floor(100/a)+"%",height:t>2?Math.floor(100/a)+"%":"100%"};return this.videoElements=new Array,Be.createElement(Be.Fragment,null,Be.createElement("div",{className:Je()({"graph-renderers":!0,visible:this.props.showIntermediateCanvases})},Be.createElement("img",{ref:this.backgroundImage}),Be.createElement("canvas",{id:"primaryCanvas",ref:this.primaryCanvas}),Be.createElement("canvas",{id:"blurCanvas",ref:this.blurCanvas}),Be.createElement("canvas",{id:"processingCanvas",ref:this.processingCanvas}),Be.createElement("video",{autoPlay:!0,tabIndex:-1,ref:e=>{e&&this.state.processedMediaStream&&(e.srcObject=this.state.processedMediaStream.stream)}}),Be.createElement("canvas",{id:"processedCanvas",width:this.state.processedCanvasWidth,height:this.state.processedCanvasHeight,ref:this.processedCanvas}),Be.createElement("video",{autoPlay:!0,tabIndex:-1,ref:e=>{e&&this.tileMediaStream&&(e.srcObject=this.tileMediaStream.stream)}}),this.props.useTile&&Be.createElement("canvas",{id:"tileCanvas",width:this.props.tileCanvasWidth,height:this.props.tileCanvasHeight,ref:this.tileCanvas})),Be.createElement("div",{className:"stream-visualizer-container"},Be.createElement("div",{className:"tile-container"},r.map(((e,t)=>Be.createElement("div",{key:"div"+e.id,style:i},this.renderStreamVisual(e,ar.VIDEO,this.videoElements,0==t&&!n,this.state.processedMediaStream)))),this.props.displayStreams.map(((e,t)=>Be.createElement("div",{key:"div"+e.id,style:i},this.renderStreamVisual(e,ar.DISPLAY,this.videoElements))))),n&&Be.createElement("div",{className:"pip-layout-overlay"},Be.createElement("div",{className:"pip-container",key:"div"+n.id},this.renderStreamVisual(n,ar.VIDEO,this.videoElements,!0,this.state.processedMediaStream))),!t&&this.props.videoDevicesInitialized&&!this.props.isMobile&&Be.createElement("div",{className:"no-video-streams-container"},Be.createElement("div",{className:"camera call-to-action"},e("SelectCameraMessage")),Be.createElement("i",{className:"material-icons"},"videocam_off"),Be.createElement("div",{className:"record call-to-action"},e("AudioOnlyRecordMessage")))))}}Ww.bufferLength=4096,Ww.renderingReportPeriod=4e3,zw([Ze],Ww.prototype,"handleAnalyzerInit",null);var Vw=gt("webrecorder")(Ww),qw=n(179),Gw={insert:"head",singleton:!1},Hw=(He()(qw.a,Gw),qw.a.locals,n(180)),Kw={insert:"head",singleton:!1},Yw=(He()(Hw.a,Kw),Hw.a.locals,function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i});class Xw extends Be.Component{constructor(){super(...arguments),this.fileInput=Be.createRef()}handleAddCustomBackgroundClick(e){e.preventDefault(),this.fileInput.current.click()}render(){const{buttonTitle:e,onChange:t}=this.props;return Be.createElement(Be.Fragment,null,Be.createElement(At,{className:"settings-button-container",title:e,onActivate:this.handleAddCustomBackgroundClick},Be.createElement("div",{className:"not-selected"},Be.createElement("div",{className:"image-container-full"},Be.createElement(It.a,{path:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z",size:"52px"})))),Be.createElement("input",{style:{display:"none"},type:"file",accept:"image/*",onChange:t,ref:this.fileInput}))}}Yw([Ze],Xw.prototype,"handleAddCustomBackgroundClick",null);class Zw extends Be.Component{render(){const{selected:e,iconSvgPath:t,textLabel:n,onActivate:r}=this.props;return Be.createElement(At,{className:"settings-button-container",title:n,onActivate:r},Be.createElement("div",{className:e?"selected":"not-selected"},Be.createElement("div",{className:"image-container"},t&&Be.createElement(It.a,{path:t,size:"52px"})),Be.createElement("div",{className:"text-container"},n)))}}class Qw extends Be.Component{render(){const{selected:e,imageUrl:t,buttonTitle:n,deleteButtonTitle:r,textLabel:o,onActivate:a,onDelete:i}=this.props;return Be.createElement(At,{className:"settings-button-container",title:n||o,onActivate:a},Be.createElement("div",{className:e?"selected":"not-selected"},Be.createElement("div",{className:"image-container"},Be.createElement("div",{className:"image",style:{backgroundImage:`url("${t}")`}})),Be.createElement("div",{className:"text-container"},Be.createElement("div",{className:"label-container"},o),i&&Be.createElement(Tt,{className:"delete-container",title:r,path:"M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",onActivate:i}))))}}var Jw=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},eC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class tC extends Be.Component{constructor(e){super(e),this.state={isHelpPopupVisible:!1,customBackgrounds:[]}}componentDidMount(){this.loadDefaultBackground(),this.refreshCustomBackgrounds()}componentDidUpdate(e){e.defaultBackgroundImageKey!==this.props.defaultBackgroundImageKey&&this.loadDefaultBackground()}loadDefaultBackground(){return eC(this,void 0,void 0,(function*(){const{defaultBackgroundImageKey:e}=this.props;if(e){const t=yield this.props.imageStorageService.getBackground(e),n=window.URL.createObjectURL(t);this.setState({defaultBackgroundImageUrl:n})}}))}refreshCustomBackgrounds(){return eC(this,void 0,void 0,(function*(){this.setState({customBackgrounds:yield this.props.imageStorageService.listCustomBackgrounds()})}))}handleHelpMenuToggle(e,t){this.setState({isHelpPopupVisible:e},t)}handleAddCustomBackgroundChange(e){var t;return eC(this,void 0,void 0,(function*(){const{t:n}=this.props;if(null===(t=e.target.files)||void 0===t?void 0:t.length){const t=e.target.files[0],r=window.URL.createObjectURL(t);new Promise(((e,t)=>{const n=document.createElement("img");n.src=r,n.onload=e,n.onerror=t})).then((()=>eC(this,void 0,void 0,(function*(){const e=yield this.props.imageStorageService.addCustomBackground(t);this.props.onSettingChanged("backgroundModeCustomKey",e),this.props.onSettingChanged("backgroundMode",jr.Custom),this.refreshCustomBackgrounds()})))).catch((()=>{window.alert(n("AddCustomBackgroundFailedMessage"))})).finally((()=>{window.URL.revokeObjectURL(r)}))}}))}handleDeleteCustomBackground(e){return eC(this,void 0,void 0,(function*(){yield this.props.imageStorageService.deleteCustomBackground(e),this.props.settings.backgroundModeCustomKey===e&&(this.props.onSettingChanged("backgroundModeCustomKey",void 0),this.props.onSettingChanged("backgroundMode",jr.None)),this.refreshCustomBackgrounds()}))}renderCustomBackground(e,t){const{t:n,settings:r,onSettingChanged:o}=this.props,a=r.backgroundMode===jr.Custom&&r.backgroundModeCustomKey===e.key;return Be.createElement(Qw,{selected:a,imageUrl:e.dataUrl,buttonTitle:`${n("BackgroundCustomLabel")} ${t+1}`,deleteButtonTitle:`${n("DeleteCustomBackgroundLabel")} ${t+1}`,onActivate:()=>{o("backgroundModeCustomKey",e.key),o("backgroundMode",jr.Custom,"settings")},onDelete:()=>this.handleDeleteCustomBackground(e.key)})}render(){const{t:e,isExpress:t,imageStorageServiceReady:n,onSettingChanged:r,hideBackgroundSection:o,hideSmartCameraSection:a,enableLogsUpload:i,enableLogsDownload:s,onUploadLogsClick:c,onDownloadLogsClick:u}=this.props,{defaultBackgroundImageUrl:l,customBackgrounds:d,isHelpPopupVisible:p}=this.state,{backgroundMode:h,smartCameraMode:f,qualityLevel:m,countDown:g}=this.props.settings;return Be.createElement("div",{className:"settings-container"},Be.createElement("div",{className:"help-menu-container"},Be.createElement(In,{isOpen:p,isExpress:t,onToggleOpen:this.handleHelpMenuToggle,enableLogsUpload:i,enableLogsDownload:s,onUploadLogsClick:c,onDownloadLogsClick:u})),Be.createElement("div",{className:"center-container"},Be.createElement("div",{className:"section"},Be.createElement("div",{className:"header"},e("RecordingOptionsSectionLabel")),Be.createElement("div",{className:"contents"},Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"qualityRadioGroup",className:"material-icons",checked:m===sr.Standard,onChange:()=>r("qualityLevel",sr.Standard)}),e("StandardDefinitionLabel"))),Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"qualityRadioGroup",className:"material-icons",checked:m===sr.High,onChange:()=>r("qualityLevel",sr.High)}),e("HighDefinitionLabel"))),Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"qualityRadioGroup",className:"material-icons",checked:m===sr.Ultra,onChange:()=>r("qualityLevel",sr.Ultra)}),e("UltraHighDefinitionLabel"))),Be.createElement("div",{className:"column"}),Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"checkbox",className:"material-icons",checked:g,onChange:e=>r("countDown",e.target.checked)}),e("EnableCountdownLabel"))))),!this.props.disableMultistreamRecording&&Be.createElement("div",{className:"section"},Be.createElement("div",{className:"header"},e("StreamOutputSectionLabel")),Be.createElement("div",{className:"contents"},Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"streamOutputRadioGroup",className:"material-icons",checked:!this.props.settings.renderTileVideo,onChange:()=>r("renderTileVideo",!1)}),e("NoTileLabel"))),Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"streamOutputRadioGroup",className:"material-icons",checked:this.props.settings.renderTileVideo,onChange:()=>r("renderTileVideo",!0)}),e("UseTileLabel"))))),Be.createElement("div",{className:"section"},Be.createElement("div",{className:"header"},e("TileArrangementSectionLabel")),Be.createElement("div",{className:"contents"},Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"tile-layout",className:"material-icons",checked:!this.props.settings.forceTile,onChange:e=>r("forceTile",!1)}),e("TilePipLabel"))),Be.createElement("div",{className:"column"},Be.createElement("label",null,Be.createElement("input",{type:"radio",name:"tile-layout",className:"material-icons",checked:this.props.settings.forceTile,onChange:e=>r("forceTile",!0)}),e("TileSideBySideLabel"))))),!o&&Be.createElement("div",{className:"section"},Be.createElement("div",{className:"header background-label"},e("BackgroundSectionLabel"),Be.createElement("span",{className:"beta-label"},"BETA")),Be.createElement("div",{className:"contents has-image-radio-button"},Be.createElement("div",{className:"column"},Be.createElement(Zw,{selected:h===jr.None,iconSvgPath:Hr,textLabel:e("BackgroundNoneLabel"),onActivate:()=>r("backgroundMode",jr.None,"settings")})),Be.createElement("div",{className:"column"},Be.createElement(Zw,{selected:h===jr.Blur,iconSvgPath:Gr,textLabel:e("BackgroundBlurLabel"),onActivate:()=>r("backgroundMode",jr.Blur,"settings")})),n&&Be.createElement(Be.Fragment,null,l&&Be.createElement("div",{className:"column"},Be.createElement(Qw,{selected:h===jr.Default,imageUrl:l,textLabel:e("BackgroundDefaultLabel"),onActivate:()=>r("backgroundMode",jr.Default,"settings")})),d.map(((e,t)=>Be.createElement("div",{className:"column",key:e.key},this.renderCustomBackground(e,t)))),d.length<tC.MAX_CUSTOM_BACKGROUNDS&&Be.createElement("div",{className:"column"},Be.createElement(Xw,{buttonTitle:e("AddCustomBackgroundLabel"),onChange:this.handleAddCustomBackgroundChange}))))),!a&&Be.createElement("div",{className:"section"},Be.createElement("div",{className:"header smart-camera-label"},e("SmartCameraSectionLabel")),Be.createElement("div",{className:"contents has-image-radio-button"},Be.createElement("div",{className:"column"},Be.createElement(Zw,{selected:f===Br.Off,iconSvgPath:qr,textLabel:e("SmartCameraOffLabel"),onActivate:()=>r("smartCameraMode",Br.Off,"settings")})),Be.createElement("div",{className:"column"},Be.createElement(Zw,{selected:f===Br.Person,iconSvgPath:Wr,textLabel:e("SmartCameraPersonLabel"),onActivate:()=>r("smartCameraMode",Br.Person,"settings")})),Be.createElement("div",{className:"column"},Be.createElement(Zw,{selected:f===Br.People,iconSvgPath:Vr,textLabel:e("SmartCameraPeopleLabel"),onActivate:()=>r("smartCameraMode",Br.People,"settings")}))))))}}tC.MAX_CUSTOM_BACKGROUNDS=3,Jw([Ze],tC.prototype,"handleHelpMenuToggle",null),Jw([Ze],tC.prototype,"handleAddCustomBackgroundChange",null),Jw([Ze],tC.prototype,"handleDeleteCustomBackground",null);var nC=gt("webrecorder")(tC),rC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class oC{constructor(e,t,n,r){var o,a;this.options=n;const i=(null===(o=this.options)||void 0===o?void 0:o.windowObj)||window;if(!oC.canUseIndexedDb(i))throw yt.Logging.Logger.error("IndexedDbService.ctor: Browser can't use IndexedDB."),"Browser does not support IndexedDB";(null===(a=navigator.storage)||void 0===a?void 0:a.estimate)&&navigator.storage.estimate().then((e=>{yt.Logging.Logger.info(`Browser has StorageManager and estimates ${e.usage} bytes used / ${e.quota} bytes available (${Math.floor(e.usage/e.quota*100)}% full).`)})),this.readyPromise=new Promise(((n,o)=>{const a=i.indexedDB.open(e,r);a.onupgradeneeded=()=>{yt.Logging.Logger.verbose("IndexedDbService.ctor: Upgrading database.",e,t);const n=a.result;t.forEach((e=>{n.objectStoreNames.contains(e)||n.createObjectStore(e)}));for(const e of n.objectStoreNames)-1===t.indexOf(e)&&n.deleteObjectStore(e)},a.onsuccess=()=>{yt.Logging.Logger.verbose("IndexedDbService.ctor: Database opened.",e),n(a.result)},a.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.ctor: Caught abort or error event.",e),o(e)}}))}static canUseIndexedDb(e){return!!(e||window).indexedDB}ready(){return this.readyPromise}putData(e,t,n){return rC(this,void 0,void 0,(function*(){const r=new Promise((e=>{var t;if(n instanceof Blob&&(null===(t=this.options)||void 0===t?void 0:t.serializeBlobAsBinaryString)){const t=new FileReader;t.onload=()=>{n=oC.blobMarker+t.result,e(n)},t.readAsBinaryString(n)}else e(n)})),o=yield r,a=yield this.getTransaction(e,"readwrite");return a.objectStore(e).put(o,t),new Promise(((e,t)=>{a.oncomplete=()=>{e()},a.onabort=a.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.putData: Caught abort or error event.",e),t(e.target.error)}}))}))}getData(e,t){return rC(this,void 0,void 0,(function*(){const n=yield this.getTransaction(e,"readonly"),r=n.objectStore(e).get(t);return new Promise(((e,t)=>{r.onsuccess=t=>{var n;const r=t.target.result;if((null===(n=this.options)||void 0===n?void 0:n.serializeBlobAsBinaryString)&&"string"==typeof r&&0===r.indexOf(oC.blobMarker)){const t=oC.blobMarker.length,n=new Uint8Array(r.length-t);for(let e=t;e<r.length;e++)n[e-t]=r.charCodeAt(e);e(new Blob([n]))}else e(r)},n.onabort=n.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.getData: Caught abort or error event.",e),t(e.target.error)}}))}))}listKeys(e){return rC(this,void 0,void 0,(function*(){const t=yield this.getTransaction(e,"readonly"),n=t.objectStore(e).getAllKeys();return new Promise(((e,r)=>{n.onsuccess=()=>{e(n.result)},t.onabort=t.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.listData: Caught abort or error event.",e),r(n.error)}}))}))}listData(e){return rC(this,void 0,void 0,(function*(){const t=yield this.getTransaction(e,"readonly"),n=t.objectStore(e).getAll();return new Promise(((e,r)=>{n.onsuccess=t=>{e(t.target.result)},t.onabort=t.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.listData: Caught abort or error event.",e),r(e.target.error)}}))}))}deleteData(e,t){return rC(this,void 0,void 0,(function*(){const n=yield this.getTransaction(e,"readwrite");return n.objectStore(e).delete(t),new Promise(((e,t)=>{n.oncomplete=()=>{e()},n.onabort=n.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.deleteData: Caught abort or error event.",e),t(e.target.error)}}))}))}batchDeleteData(e,t){return rC(this,void 0,void 0,(function*(){const n=yield this.getTransaction(e,"readwrite");for(const r of t)n.objectStore(e).delete(r);return new Promise(((e,t)=>{n.oncomplete=()=>{e()},n.onabort=n.onerror=e=>{yt.Logging.Logger.warning("IndexedDbService.deleteData: Caught abort or error event.",e),t(e.target.error)}}))}))}getTransaction(e,t){return rC(this,void 0,void 0,(function*(){return(yield this.ready()).transaction([e],t)}))}}oC.blobMarker="Blob:";var aC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};const iC="Panopto.Logs",sC="log";class cC extends yt.Logging.LoggingTransport{constructor(e){super(e),this.logEntries=[],this.promises=[],this.indexedDbService=new oC(iC,[sC],{windowObj:e.windowObj}),this.logId=e.logId||Or(),this.ready=this.indexedDbService.ready().then((()=>this.indexedDbService.getData(sC,this.logId))).then((e=>{void 0!==e&&this.logEntries.push(...e)})),this.promises.push(this.ready)}log(e,t,n,...r){let o;o="string"==typeof n?n:JSON.stringify(n);for(const e of r)o+=" "+JSON.stringify(e);this.logEntries.push({timestamp:e,level:t,formattedMessage:o}),this.promises.push(this.ready.then((()=>this.indexedDbService.putData(sC,this.logId,this.logEntries))))}retrieveLogs(){return aC(this,void 0,void 0,(function*(){return yield Promise.all(this.promises),[...this.logEntries]}))}clearLogs(){return aC(this,void 0,void 0,(function*(){this.logEntries.length=0,yield Promise.all(this.promises),yield this.indexedDbService.deleteData(sC,this.logId)}))}getName(){return"IndexedDbTransport"}}var uC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};var lC;!function(e){e[e.RECORD_STOP=1001]="RECORD_STOP",e[e.MANUAL_UPLOAD=1002]="MANUAL_UPLOAD",e[e.UPLOAD_COMPLETED=1003]="UPLOAD_COMPLETED",e[e.SESSION_CREATE_FAILED=1004]="SESSION_CREATE_FAILED",e[e.UPLOAD_FAILED=1005]="UPLOAD_FAILED",e[e.UPLOAD_COMPLETION_FAILED=1006]="UPLOAD_COMPLETION_FAILED",e[e.UPLOAD_DELETED=1007]="UPLOAD_DELETED",e[e.TILE_RENDERER_HUNG=1008]="TILE_RENDERER_HUNG"}(lC||(lC={}));class dC extends yt.ClientLogging{constructor(e){if(super(e,"WebRecorder",204800),this.previousIndexedDbTransports=[],oC.canUseIndexedDb()){const e=Date.now();this.indexedDbTransport=new cC({loglevel:yt.Logging.LogLevel.Verbose,logId:e.toString()}),yt.Logging.Logger.addTransport(this.indexedDbTransport),this.rehydrateFromIndexedDb(e)}}rehydrateFromIndexedDb(e){return uC(this,void 0,void 0,(function*(){for(const t of yield function(e){return aC(this,void 0,void 0,(function*(){const t=new oC(iC,[sC],{windowObj:e});return yield t.ready(),t.listKeys(sC)}))}()){const n=new cC({loglevel:yt.Logging.LogLevel.Verbose,logId:t});if(e-new Date(Number.parseInt(t)).getTime()>6048e5)yield n.clearLogs();else{this.previousIndexedDbTransports.push(n);const e=yield n.retrieveLogs();for(const t of e)this.circularTransport.pushLog(t.timestamp,t.level,t.formattedMessage)}}}))}clearIndexedDbTransport(){return uC(this,void 0,void 0,(function*(){yield Promise.all([...this.previousIndexedDbTransports.map((e=>e.clearLogs())),this.indexedDbTransport.clearLogs()]),this.previousIndexedDbTransports.length=0}))}uploadLogs(e){const t=Object.create(null,{uploadLogs:{get:()=>super.uploadLogs}});return uC(this,void 0,void 0,(function*(){const n=yield t.uploadLogs.call(this,e);return this.clearIndexedDbTransport(),n}))}downloadLogs(){super.downloadLogs(),this.clearIndexedDbTransport()}}var pC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};var hC,fC,mC,gC=n(156),bC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Normal=0]="Normal",e[e.Low=1]="Low",e[e.High=2]="High"}(hC||(hC={})),function(e){e[e.Unknown=0]="Unknown",e[e.PrimaryVideo=1]="PrimaryVideo",e[e.SecondaryVideo=2]="SecondaryVideo",e[e.SecondaryPresentation=3]="SecondaryPresentation"}(fC||(fC={})),function(e){e[e.Uploading=0]="Uploading",e[e.UploadComplete=1]="UploadComplete",e[e.UploadCancelled=2]="UploadCancelled",e[e.Processing=3]="Processing",e[e.Complete=4]="Complete",e[e.ProcessingError=5]="ProcessingError",e[e.DeletingFiles=6]="DeletingFiles",e[e.Deleted=7]="Deleted",e[e.DeletingError=8]="DeletingError"}(mC||(mC={}));const yC="/PublicAPI/REST/upload",AC=!0;var vC,xC=n(118),kC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};function wC(e,t){return kC(this,void 0,void 0,(function*(){let n=xC.hex;switch(t){case"base64":n=xC.base64}return new Promise((t=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(n(e))},r.readAsArrayBuffer(e)}))}))}!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Uploading=1]="Uploading",e[e.Complete=2]="Complete",e[e.Cancelled=3]="Cancelled",e[e.Error=4]="Error"}(vC||(vC={}));var CC=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},SC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class OC{constructor(e,t,n,r,o,a){this.s3AWS=e,this.bucketKey=t,this.onPartUploadProgress=n,this.onPartUploaded=r,this.onPermanentlyFailed=o,this.withRetryOptions=a,this._state=vC.Uninitialized,this.currentPartNumber=1,this.dataToPush=[],this.etags=[],this.currentChunkUploadProgressBytes=0,this._uploadId=null,this._bytesEnqueued=0,this._bytesCompleted=0}get bytesEnqueued(){return this._bytesEnqueued}get bytesSent(){return this._bytesCompleted+this.currentChunkUploadProgressBytes}startUpload(){if(this.state!==vC.Uninitialized)throw new Error(`Error in startUpload: Invalid state: ${this.state}`);return this._state=vC.Uploading,this.lastS3Promise=this.sendCreateMultipartUpload(),this.lastS3Promise}resumeUpload(e,t){if(this.state!==vC.Uninitialized)throw new Error(`Error in startUpload: Invalid state: ${this.state}`);this._state=vC.Uploading,this._uploadId=e,this.etags=t,this.currentPartNumber=t.length+1,yt.Logging.Logger.verbose(`MultipartUploader.resumeUpload: Resuming upload ${this.uploadId} for ${this.bucketKey}.`),this.lastS3Promise=Promise.resolve()}appendData(e){if(this.state!==vC.Uploading)throw new Error(`Error in appendData: Invalid state: ${this.state}`);this.dataToPush.push(e),yt.Logging.Logger.verbose(`MultipartUploader.appendData: Appended ${e.size} bytes to ${this.uploadId}`),this.queueParts()}abortUpload(){return SC(this,void 0,void 0,(function*(){if(this.state!==vC.Uploading)throw new Error(`Error in appendData: Invalid state: ${this.state}`);const e={Bucket:OC.targetBucket,Key:this.bucketKey,UploadId:this.uploadId};try{yield this.s3AWS.abortMultipartUpload(e).promise(),this._state=vC.Cancelled}catch(e){yt.Logging.Logger.error(`MultipartUploader.abortUpload: Failed to abort a multipart upload ${this.uploadId}. Error:`,e)}}))}completeUpload(){if(this.state!==vC.Uploading)throw new Error(`Error in appendData: Invalid state: ${this.state}`);return this.queueParts({flush:!0}),this.lastS3Promise=this.lastS3Promise.then((()=>this.sendCompleteMultipartUpload())),this.lastS3Promise}queueParts({flush:e=!1}={}){const t=1===this.currentPartNumber&&e;let n=new Blob(this.dataToPush);if(0!==n.size||t){for(;n.size>OC.maxChunkSizeBytes;)yt.Logging.Logger.verbose(`MultipartUploader.queueParts: Upload ${this.uploadId} has ${n.size} bytes data to send. Data larger than maximum chunk size. Queueing maximum chunk size ${OC.maxChunkSizeBytes} bytes.`),this.queuePart(n.slice(0,OC.maxChunkSizeBytes),this.currentPartNumber++),n=n.slice(OC.maxChunkSizeBytes);n.size>OC.minChunkSizeBytes||e?(yt.Logging.Logger.verbose(`MultipartUploader.queueParts: Upload ${this.uploadId} has ${n.size} bytes data to send. Flush mode: ${e}. Remaining data more than minimum chunk size or in flush mode. Queueing all remaining data.`),this.queuePart(n,this.currentPartNumber++),this.dataToPush=[]):(yt.Logging.Logger.verbose(`MultipartUploader.queueParts: Upload ${this.uploadId} has ${n.size} bytes data to send. Remaining data less than minimum chunk size, noop.`),this.dataToPush=[n])}else yt.Logging.Logger.verbose(`MultipartUploader.queueParts: Upload ${this.uploadId} has no data to send.`)}queuePart(e,t){this.lastS3Promise=this.lastS3Promise.then((()=>this.sendUploadPart(e,t))),this._bytesEnqueued+=e.size,this.onPartUploadProgress()}sendCreateMultipartUpload(){return SC(this,void 0,void 0,(function*(){const e={Bucket:OC.targetBucket,Key:this.bucketKey};return yield hn(((t,n)=>SC(this,void 0,void 0,(function*(){try{const t=yield this.s3AWS.createMultipartUpload(e).promise();this._uploadId=t.UploadId,yt.Logging.Logger.verbose(`MultipartUploader.sendCreateMultipartUpload: Created upload ${this.uploadId} for ${this.bucketKey}.`),n()}catch(e){if(yt.Logging.Logger.error(`MultipartUploader.sendCreateMultipartUpload:  Error creating upload for ${this.bucketKey}. Error:`,e),!e.retryable)throw this._state=vC.Error,this.onPermanentlyFailed(),e;t()}}))),this.withRetryOptions)}))}sendUploadPart(e,t){return SC(this,void 0,void 0,(function*(){if(this.state!==vC.Uploading)return yt.Logging.Logger.warning(`MultipartUploader.sendUploadPart: Aborting uploadPart, upload ${this.uploadId} is no longer uploading. State: ${this.state}`),new Promise($.noop);const n={Body:e,PartNumber:t,Bucket:OC.targetBucket,Key:this.bucketKey,UploadId:this.uploadId,ContentMD5:yield wC(e,"base64")};return n.UploadId=this.uploadId,yield hn(((t,r)=>SC(this,void 0,void 0,(function*(){try{const t=this.s3AWS.uploadPart(n);t.on("httpUploadProgress",(e=>{this.currentChunkUploadProgressBytes=e.loaded,this.onPartUploadProgress()}));const o=yield t.promise();this._bytesCompleted+=e.size,this.etags.push(o.ETag),yt.Logging.Logger.verbose(`MultipartUploader.sendUploadPart: Upload ${this.uploadId} for ${this.bucketKey} part ${n.PartNumber} uploaded (${e.size} part bytes, ${this._bytesCompleted} total uploaded bytes).`),this.onPartUploaded(e.size,o.ETag),r()}catch(e){if(yt.Logging.Logger.error(`MultipartUploader.sendUploadPart: Upload ${this.uploadId} for ${this.bucketKey} part ${n.PartNumber} fail to upload. Error:`,e),!e.retryable)throw this._state=vC.Error,this.onPermanentlyFailed(),e;t()}finally{this.currentChunkUploadProgressBytes=0,this.onPartUploadProgress()}}))),this.withRetryOptions)}))}sendCompleteMultipartUpload(){return SC(this,void 0,void 0,(function*(){if(this.state!==vC.Uploading)return yt.Logging.Logger.warning(`MultipartUploader.sendCompleteMultipartUpload: Aborting completeMultipartUpload, upload ${this.uploadId} is no longer uploading. State: ${this.state}`),new Promise($.noop);const e={Bucket:OC.targetBucket,Key:this.bucketKey,UploadId:this.uploadId,MultipartUpload:{Parts:this.etags.map(((e,t)=>({PartNumber:t+1,ETag:e})))}};return yield hn(((t,n)=>SC(this,void 0,void 0,(function*(){try{yield this.s3AWS.completeMultipartUpload(e).promise(),this._state=vC.Complete,yt.Logging.Logger.verbose(`MultipartUploader.sendCompleteMultipartUpload: Upload ${this.uploadId} completed (${this._bytesCompleted} bytes pushed to ${this.bucketKey}).`),n()}catch(e){if(yt.Logging.Logger.error(`MultipartUploader.sendCompleteMultipartUpload: Upload ${this.uploadId} fail to complete. Error:`,e),!e.retryable)throw this._state=vC.Error,this.onPermanentlyFailed(),e;t()}}))),this.withRetryOptions)}))}get state(){return this._state}get uploadId(){return this._uploadId}}OC.targetBucket="Upload",OC.minChunkSizeBytes=5242880,OC.maxChunkSizeBytes=16777216,CC([Ze],OC.prototype,"sendCreateMultipartUpload",null),CC([Ze],OC.prototype,"sendUploadPart",null),CC([Ze],OC.prototype,"sendCompleteMultipartUpload",null);var EC=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},IC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class TC{constructor(e,t,n,r,o,a){this.s3AWS=e,this.uploadSnapshotController=t,this.sessionId=n,this.accessPoint=r,this.onPartUploadProgress=o,this.onPermanentlyFailed=a,this.isMultipartCompleted=!1,this._isCompleted=!1}get streamUploadId(){return this._streamUploadId}get uploadId(){return this._uploadId}get isCompleted(){return this._isCompleted}get uploadStats(){var e,t,n,r;return{bytesEnqueued:null!==(t=null===(e=this.multipartUploader)||void 0===e?void 0:e.bytesEnqueued)&&void 0!==t?t:0,bytesSent:null!==(r=null===(n=this.multipartUploader)||void 0===n?void 0:n.bytesSent)&&void 0!==r?r:0}}startUpload(e){return IC(this,void 0,void 0,(function*(){return this.ready=(()=>IC(this,void 0,void 0,(function*(){const t=e.recorderType===ir.Primary?fC.PrimaryVideo:fC.SecondaryVideo;let n;try{n=yield function(e,t,n,r){return bC(this,void 0,void 0,(function*(){const o=`${yn()}${yC}?accessPoint=${e}`,a=vn("POST",t,AC,r),i=yield kn(o,a,n);return yield i.json()}))}(this.accessPoint,{SessionID:this.sessionId,StreamType:t,StreamStartTime:`/Date(${e.absoluteStart})/`,UserFilename:e.fileName}),this._streamUploadId=n.ID,this.uploadTarget=n.UploadTarget}catch(e){throw yt.Logging.Logger.error("UcsStreamUploader.startUpload: Error calling stream upload API. Error:",e),this.onPermanentlyFailed(),e}const r=`${encodeURIComponent(n.UploadTarget.split("/").pop())}/${e.fileName}`,o=new OC(this.s3AWS,r,this.onPartUploadProgress,this.handlePartUploaded,this.handlePermanentlyFailed);yield o.startUpload(),this._uploadId=o.uploadId,this.multipartUploader=o,this.uploadSnapshotController.setStreamUploadSnapshot(n.ID,{streamUploadId:n.ID,uploadTarget:n.UploadTarget,fileName:e.fileName,bucketKey:r,uploadId:o.uploadId,etags:[],blobs:[],lastByteIndex:0,multipartUploadCompleted:!1})})))(),this.ready}))}resumeUpload(e){const t=new OC(this.s3AWS,e.bucketKey,this.onPartUploadProgress,this.handlePartUploaded,this.handlePermanentlyFailed);t.resumeUpload(e.uploadId,[...e.etags]),this.ready=Promise.resolve(),this._streamUploadId=e.streamUploadId,this.uploadTarget=e.uploadTarget,this._uploadId=e.uploadId,this.isMultipartCompleted=e.multipartUploadCompleted,this.multipartUploader=t}completeUpload(){return IC(this,void 0,void 0,(function*(){if(yield this.ready,!this.isMultipartCompleted)try{yield this.multipartUploader.completeUpload(),this.isMultipartCompleted=!0,this.uploadSnapshotController.markStreamUploadMultipartCompleted(this._streamUploadId)}finally{0===this.uploadStats.bytesSent&&yt.Logging.Logger.warning(`UcsStreamUploader.completeUpload: Upload ID ${this._uploadId} has 0-byte length.`)}try{yield function(e,t,n,r){return bC(this,void 0,void 0,(function*(){const o=`${yn()}${yC}/${e}`,a=vn("PUT",t,AC,r);yield kn(o,a,n)}))}(this._streamUploadId,{ID:this._streamUploadId,SessionID:this.sessionId,UploadTarget:this.uploadTarget,State:mC.UploadComplete})}catch(e){throw yt.Logging.Logger.error("UcsStreamUploader.completeUpload: Error calling stream upload API. Error:",e),this.onPermanentlyFailed(this.uploadId),e}this._isCompleted=!0,this.uploadSnapshotController.markStreamUploadCompleted(this._streamUploadId)}))}deleteUpload(){return IC(this,void 0,void 0,(function*(){yield this.ready,yield this.multipartUploader.abortUpload(),yield function(e,t,n){return bC(this,void 0,void 0,(function*(){const r=`${yn()}${yC}/${e}`,o=An("DELETE",AC,n);yield kn(r,o,t)}))}(this._streamUploadId)}))}appendData(e){return IC(this,void 0,void 0,(function*(){yield this.ready,this.multipartUploader.appendData(e)}))}handlePartUploaded(e,t){this.uploadSnapshotController.markStreamUploadMultipartPartUploaded(this._streamUploadId,e,t)}handlePermanentlyFailed(){this.onPermanentlyFailed(this.uploadId)}}EC([Ze],TC.prototype,"handlePartUploaded",null),EC([Ze],TC.prototype,"handlePermanentlyFailed",null);var NC=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},RC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class jC{constructor(e,t,n,r,o,a,i){this.s3AWS=e,this.uploadSnapshotController=t,this.sessionId=n,this.accessPoint=r,this.onUploadProgress=o,this.onPermanentlyFailed=a,this.onAutoSendLogRequested=i,this.streamUploaders={},this._state=vC.Uploading,this.logUploadProgressThrottled=bt.throttle(this.logUploadProgress,jC.progressLogThrottlePeriodMsec)}resumeUpload(e,t){return RC(this,void 0,void 0,(function*(){yt.Logging.Logger.verbose("UcsUploader.resumeUpload: Resuming session upload.",e);for(const t of e){yt.Logging.Logger.verbose(`UcsUploader.resumeUpload: Resuming Upload ID ${t.uploadId}.`);const e=new TC(this.s3AWS,this.uploadSnapshotController,this.sessionId,this.accessPoint,this.handlePartUploadProgress,this.onPermanentlyFailed);e.resumeUpload(t);const n=yield this.uploadSnapshotController.getIncompleteUploadData(t.streamUploadId);yt.Logging.Logger.verbose(`UcsUploader.resumeUpload:  Found ${n.length} unuploaded blobs for Upload ID ${t.uploadId}.`);for(const t of n)yield e.appendData(t);this.streamUploaders[t.fileName]=e}}))}appendDataToFile(e,t){return RC(this,void 0,void 0,(function*(){if(this.state!==vC.Uploading)throw`Invalid uploader state: ${this.state}`;let n=this.streamUploaders[e.fileName];n||(n=new TC(this.s3AWS,this.uploadSnapshotController,this.sessionId,this.accessPoint,this.handlePartUploadProgress,this.onPermanentlyFailed),this.streamUploaders[e.fileName]=n,n.startUpload(e)),yield n.appendData(t),this.uploadSnapshotController.addDataToStreamUpload(n.streamUploadId,t),yt.Logging.Logger.verbose(`UcsUploader.appendDataToFile: Appended ${t.size} bytes to Upload ID ${n.uploadId}`)}))}complete(){return RC(this,void 0,void 0,(function*(){if(this.state!==vC.Uploading)throw`Invalid state to complete: ${this.state}`;try{const e=[];for(const t in this.streamUploaders)e.push(this.streamUploaders[t].completeUpload());let t=!1;for(const n of e)try{yield n}catch(e){t=!0}this._state=vC.Complete,this.onUploadProgress(this.getUploadStats()),t||this.uploadSnapshotController.dispose(),yt.Logging.Logger.verbose(`UcsUploader.complete: Completed session upload for session ID ${this.sessionId}.`),this.onAutoSendLogRequested(lC.UPLOAD_COMPLETED)}catch(e){throw yt.Logging.Logger.error("UcsUploader.complete: Error completing session upload. Error:",e),this._state=vC.Error,this.onAutoSendLogRequested(lC.UPLOAD_COMPLETION_FAILED),e}}))}deleteUpload(){return RC(this,void 0,void 0,(function*(){if(this.state===vC.Uploading){yt.Logging.Logger.verbose("UcsUploader.deleteUpload: Upload in progress, cancelling and deleting"),this._state=vC.Cancelled;try{for(const e in this.streamUploaders){const t=this.streamUploaders[e];yield t.deleteUpload(),this.uploadSnapshotController.cancelUpload(t.streamUploadId)}}catch(e){this._state=vC.Error}finally{this.uploadSnapshotController.dispose(),this.onAutoSendLogRequested(lC.UPLOAD_DELETED)}}}))}formatBytes(e,t){if(0===e)return"0 Bytes";const n=t<=0?0:t||2,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}getUploadStats(){return Object.keys(this.streamUploaders).map((e=>this.streamUploaders[e].uploadStats)).reduce(((e,t)=>({bytesEnqueued:e.bytesEnqueued+t.bytesEnqueued,bytesSent:e.bytesSent+t.bytesSent})),{bytesEnqueued:0,bytesSent:0})}get state(){return this._state}isUploadCompleted(){return this.state===vC.Complete}handlePartUploadProgress(){const e=this.getUploadStats();this.logUploadProgressThrottled(e),this.onUploadProgress(e)}logUploadProgress(e){const t=Math.floor(e.bytesSent/e.bytesEnqueued*100),n=this.formatBytes(e.bytesSent,1),r=this.formatBytes(e.bytesEnqueued,1);yt.Logging.Logger.verbose(`UcsUploader.handleUploadProgress: ${t} percent uploaded (${n} / ${r}) for session ${this.sessionId}`)}}jC.progressLogThrottlePeriodMsec=1e3,NC([Ze],jC.prototype,"handlePartUploadProgress",null),NC([Ze],jC.prototype,"logUploadProgress",null);var BC=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},_C=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class DC{constructor(e,t,n=new Map,r=0){this.mediaStorageService=e,this.sessionId=t,this.streamUploadSnapshots=n,this.retryCount=r,this.renewLockInterval=window.setInterval(this.updateSnapshotAndRenewLock,1e3),this.updateSnapshotAndRenewLock()}dispose(){window.clearInterval(this.renewLockInterval),this.mediaStorageService.deleteSnapshot(this.sessionId)}setStreamUploadSnapshot(e,t){return _C(this,void 0,void 0,(function*(){this.streamUploadSnapshots.set(e,t),yield this.updateSnapshotAndRenewLock()}))}addDataToStreamUpload(e,t){return _C(this,void 0,void 0,(function*(){const n=this.streamUploadSnapshots.get(e);if(void 0===n)throw`Could not find snapshot for Stream Upload ID ${e}`;const r=yield this.mediaStorageService.addBlob(t);n.blobs.push({blobId:r,size:t.size,startIndex:MC(n.blobs)}),yield this.updateSnapshotAndRenewLock()}))}markStreamUploadMultipartCompleted(e){return _C(this,void 0,void 0,(function*(){yt.Logging.Logger.verbose("UploadSnapshotController.markStreamUploadMultipartCompleted",e);const t=this.streamUploadSnapshots.get(e);t.multipartUploadCompleted=!0,t.lastByteIndex!==MC(t.blobs)&&yt.Logging.Logger.warning(`UploadSnapshotController.markStreamUploadMultipartCompleted: Not all bytes have been marked as uploaded.Last byte: ${t.lastByteIndex}, total bytes: ${MC(t.blobs)}`),yield this.updateSnapshotAndRenewLock()}))}markStreamUploadCompleted(e){return _C(this,void 0,void 0,(function*(){yt.Logging.Logger.verbose("UploadSnapshotController.markStreamUploadCompleted",e);void 0!==this.streamUploadSnapshots.get(e)&&(this.streamUploadSnapshots.delete(e),yield this.updateSnapshotAndRenewLock())}))}getIncompleteUploadData(e){return _C(this,void 0,void 0,(function*(){const t=[],n=this.streamUploadSnapshots.get(e);if(void 0!==n){const e=n.lastByteIndex;for(const r of n.blobs)if(e<r.startIndex+r.size){let n=yield this.mediaStorageService.getBlob(r.blobId);e>r.startIndex&&(n=n.slice(e-r.startIndex)),t.push(n)}}return t}))}markStreamUploadMultipartPartUploaded(e,t,n){return _C(this,void 0,void 0,(function*(){yt.Logging.Logger.verbose("UploadSnapshotController.markStreamUploadMultipartPartUploaded",e,t,n);const r=this.streamUploadSnapshots.get(e);r.lastByteIndex+=t,r.etags.push(n),yield this.setStreamUploadSnapshot(e,r),yield this.mediaStorageService.batchDeleteBlobs(function(e){const t=[];for(const n of e.blobs)e.lastByteIndex>=n.startIndex+n.size&&t.push(n.blobId);return t}(r))}))}cancelUpload(e){return _C(this,void 0,void 0,(function*(){yt.Logging.Logger.debug("UploadSnapshotController.cancelUpload",e);const t=this.streamUploadSnapshots.get(e);void 0!==t&&(this.streamUploadSnapshots.delete(e),yield this.mediaStorageService.batchDeleteBlobs(t.blobs.map((e=>e.blobId))),yield this.updateSnapshotAndRenewLock())}))}updateSnapshotAndRenewLock(){return _C(this,void 0,void 0,(function*(){yield this.mediaStorageService.updateSnapshot(this.sessionId,{sessionId:this.sessionId,streamSnapshots:Array.from(this.streamUploadSnapshots.values()),lockTimestamp:Date.now(),retryCount:this.retryCount})}))}}function MC(e){let t=0;for(const n of e)t+=n.size;return t}BC([Ze],DC.prototype,"updateSnapshotAndRenewLock",null);class $C{constructor(e){this.name=e,this.id=$C.globalIdCount++,this.date=new Date}static defaultName(){const e=new Date;return e.toDateString()+" "+e.toLocaleTimeString()}getId(){return this.id}isUploaded(){return!!this.uploader&&this.uploader.isUploadCompleted()}createUploader(e,t,n,r,o,a,i){if(!this.uploader){const s=new gC({endpoint:`https://${t}/Panopto`,signatureVersion:"v2",accessKeyId:"foo",secretAccessKey:"bar",apiVersion:"2015-03-01"}),c=new DC(e,n),u=new jC(s,c,n,r,o,a,i);this.uploader=u}return this.uploader}getUploader(){return this.uploader}}$C.globalIdCount=0;var PC,LC,FC,zC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.DatabaseName="Panopto.WebRecorder.CustomBackgrounds",e.ImageObjectStoreName="image",e.ImageIndexKey="image-index"}(PC||(PC={}));class UC{constructor(e){this.indexedDbService=new oC(PC.DatabaseName,[PC.ImageObjectStoreName],e),this._ready=this.indexedDbService.ready().then()}get ready(){return this._ready}getImageIndex(){return zC(this,void 0,void 0,(function*(){let e=yield this.indexedDbService.getData(PC.ImageObjectStoreName,PC.ImageIndexKey);return e||(e={defaultBackgroundKey:void 0,customBackgroundKeys:[]}),e}))}setImageIndex(e){return zC(this,void 0,void 0,(function*(){yield this.indexedDbService.putData(PC.ImageObjectStoreName,PC.ImageIndexKey,e)}))}verifyDefaultBackground(e){return zC(this,void 0,void 0,(function*(){const t=yield this.getImageIndex(),n=t.defaultBackgroundKey,r=xC.hex(e);if(n!==r){yt.Logging.Logger.info("Refreshing default background image.");try{const o=yield fetch(e);if(o.ok)yield this.indexedDbService.putData(PC.ImageObjectStoreName,r,yield o.blob()),n&&(yield this.indexedDbService.deleteData(PC.ImageObjectStoreName,n)),t.defaultBackgroundKey=r,yield this.setImageIndex(t);else{const t={status:o.status,statusText:o.statusText,text:yield o.text()};yt.Logging.Logger.warning("ImageStorageService.verifyDefaultBackground: Failed to download background image.",e,t)}}catch(t){yt.Logging.Logger.warning("ImageStorageService.verifyDefaultBackground: Failed to download background image.",e,t)}}return t.defaultBackgroundKey}))}addCustomBackground(e){return zC(this,void 0,void 0,(function*(){const t=Or();yield this.indexedDbService.putData(PC.ImageObjectStoreName,t,e);const n=yield this.getImageIndex();return n.customBackgroundKeys.push(t),yield this.setImageIndex(n),t}))}deleteCustomBackground(e){return zC(this,void 0,void 0,(function*(){yield this.indexedDbService.deleteData(PC.ImageObjectStoreName,e);const t=yield this.getImageIndex();t.customBackgroundKeys=t.customBackgroundKeys.filter((t=>t!==e)),yield this.setImageIndex(t)}))}getBackground(e){return zC(this,void 0,void 0,(function*(){return yield this.indexedDbService.getData(PC.ImageObjectStoreName,e)}))}listCustomBackgrounds(){return zC(this,void 0,void 0,(function*(){const e=yield this.getImageIndex();return yield Promise.all(e.customBackgroundKeys.map((e=>zC(this,void 0,void 0,(function*(){const t=yield this.getBackground(e),n=URL.createObjectURL(t);return{key:e,dataUrl:n}})))))}))}}var WC=0,VC=0;var qC,GC=function(e,t,n){var r=t&&n||0,o=t||new Array(16),a=(e=e||{}).node||LC,i=void 0!==e.clockseq?e.clockseq:FC;if(null==a||null==i){var s=e.random||(e.rng||vr)();null==a&&(a=LC=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==i&&(i=FC=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:VC+1,l=c-WC+(u-VC)/1e4;if(l<0&&void 0===e.clockseq&&(i=i+1&16383),(l<0||c>WC)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");WC=c,VC=u,FC=i;var d=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[r++]=d>>>24&255,o[r++]=d>>>16&255,o[r++]=d>>>8&255,o[r++]=255&d;var p=c/4294967296*1e4&268435455;o[r++]=p>>>8&255,o[r++]=255&p,o[r++]=p>>>24&15|16,o[r++]=p>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var h=0;h<6;++h)o[r+h]=a[h];return t||Sr(o)},HC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.DatabaseName="Panopto.WebRecorder",e.SnapshotObjectStoreName="snapshot",e.MediaObjectStoreName="media"}(qC||(qC={}));class KC{constructor(e){this.indexedDbService=new oC(qC.DatabaseName,[qC.SnapshotObjectStoreName,qC.MediaObjectStoreName],e,2),this._ready=this.indexedDbService.ready().then((()=>this.verifyDataCorrectness()))}get ready(){return this._ready}verifyDataCorrectness(){return HC(this,void 0,void 0,(function*(){for(const e of yield this.indexedDbService.listKeys(qC.SnapshotObjectStoreName)){const t=yield this.indexedDbService.getData(qC.SnapshotObjectStoreName,e);t.sessionId&&t.streamSnapshots instanceof Array||(yield this.deleteSnapshot(e))}const e=[];for(const t of yield this.indexedDbService.listData(qC.SnapshotObjectStoreName))t.streamSnapshots.map((e=>e.blobs)).forEach((t=>t.forEach((t=>e.push(t.blobId)))));for(const t of yield this.indexedDbService.listKeys(qC.MediaObjectStoreName))-1===e.indexOf(t)&&(yield this.indexedDbService.deleteData(qC.MediaObjectStoreName,t))}))}updateSnapshot(e,t){return HC(this,void 0,void 0,(function*(){yield this.indexedDbService.putData(qC.SnapshotObjectStoreName,e,t)}))}deleteSnapshot(e){return HC(this,void 0,void 0,(function*(){yield this.indexedDbService.deleteData(qC.SnapshotObjectStoreName,e)}))}getSnapshots(){return HC(this,void 0,void 0,(function*(){return yield this.indexedDbService.listData(qC.SnapshotObjectStoreName)}))}addBlob(e){return HC(this,void 0,void 0,(function*(){const t=GC();return yt.Logging.Logger.debug("MediaStorageService.addDataForUpload",t,e.size),yield this.indexedDbService.putData(qC.MediaObjectStoreName,t,e),t}))}getBlob(e){return HC(this,void 0,void 0,(function*(){return yield this.indexedDbService.getData(qC.MediaObjectStoreName,e)}))}batchDeleteBlobs(e){return HC(this,void 0,void 0,(function*(){yield this.indexedDbService.batchDeleteData(qC.MediaObjectStoreName,e)}))}}class YC{get ready(){return Promise.resolve()}updateSnapshot(){return Promise.resolve()}deleteSnapshot(){return Promise.resolve()}getSnapshots(){return Promise.resolve([])}addBlob(){return Promise.resolve(void 0)}getBlob(){return Promise.resolve(void 0)}batchDeleteBlobs(){return Promise.resolve()}}const XC={channelCount:2,sampleRate:44100};class ZC{static getVideoStreamConstraints(e,t){let n,r,o;return t===sr.Standard?(n=848,r=480,o=15):t===sr.High?(n=1920,r=1080,o=30):t===sr.Ultra&&(n=3840,r=2160,o=60),{video:{deviceId:e&&{exact:e},aspectRatio:16/9,width:n,height:r,frameRate:o}}}static getAudioStreamConstraints(e){return{audio:Object.assign({deviceId:e&&{exact:e}},XC)}}static getDisplayStreamConstraints(e){let t,n,r;switch(e){case sr.Standard:t=1920,n=1200,r=15;break;case sr.High:t=1920,n=1200,r=30;break;case sr.Ultra:t=3840,n=2400,r=60;break;default:throw`Unknown quality level ${e}`}return{video:{width:t,height:n,frameRate:r},audio:XC}}}const QC={bodyPixModelOutputStride:16,bodyPixModelMultiplier:.75,bodyPixModelQuantBytes:2,bodyPixSegmentInternalResolution:"full",bodyPixSegmentSegmentationThreshold:.75,bodyPixSegmentMaxDetections:10,bodyPixScoreThreshold:.3,analyzerSamplesToAverage:15,analyzerSpringConstant:.03,analyzerPoseExtraWidthFactor:.1,analyzerPoseExtraHeightFactor:0,analyzerPersonOverheadSpacePercentage:10,analyzerMaxHeight:270,analyzerMaxFps:15,processorMaxHeightStandard:540,processorMaxFpsStandard:15,processorMaxHeightHigh:540,processorMaxFpsHigh:30,processorMaxHeightUltra:720,processorMaxFpsUltra:0,processorMaxPullFpsUltra:60,processorBlurMaskRadiusBackgroundBlur:10,processorBlurMaskRadiusBackgroundImage:2,processorBlurRadius:16,tileWidthStandard:1280,tileHeightStandard:720,tileMaxFpsStandard:15,tileWidthHigh:1920,tileHeightHigh:1080,tileMaxFpsHigh:30};var JC=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class eS{constructor(e,t,n,r,o){this.t=e,this.webServerFQDN=t,this.mediaStorageService=n,this.accessPoint=r,this.onAutoSendLogRequested=o,this.mediaStorageService.ready.then((()=>{this.completeInterruptedUploads()})).catch((()=>{yt.Logging.Logger.warning("UploadCompletionController: MediaStorageService initialization failed. Can't complete interrupted uploads.")}))}completeInterruptedUploads(){return JC(this,void 0,void 0,(function*(){const e=yield this.mediaStorageService.getSnapshots(),t=new gC({endpoint:`https://${this.webServerFQDN}/Panopto`,signatureVersion:"v2",accessKeyId:"foo",secretAccessKey:"bar",apiVersion:"2015-03-01"});for(const n of e){n.retryCount++;if(n.retryCount<=3||window.confirm(yt.Extensions.StringExtensions.format(this.t("UploadCompletionConsentLine1Message"),n.sessionId)+" "+this.t("UploadCompletionConsentLine2Message")))try{if(!n.lockTimestamp||Date.now()-n.lockTimestamp>=5e3){yt.Logging.Logger.verbose(`UploadCompletionController.completeInterruptedUploads: Completing upload for Session ID ${n.sessionId}`);const e=new DC(this.mediaStorageService,n.sessionId,new Map(n.streamSnapshots.map((e=>[e.streamUploadId,e]))),n.retryCount),r=new jC(t,e,n.sessionId,this.accessPoint,(()=>{}),(()=>{}),this.onAutoSendLogRequested);yield r.resumeUpload(n.streamSnapshots,n.retryCount),yield r.complete(),yt.Logging.Logger.verbose(`UploadCompletionController.completeInterruptedUploads: Completed upload for Session ID ${n.sessionId}`)}else yt.Logging.Logger.verbose(`UploadCompletionController.completeInterruptedUploads: Couldn't obtain lock for Session ID ${n.sessionId}`)}catch(e){yt.Logging.Logger.warning(`UploadCompletionController.completeInterruptedUploads: Failed to complete upload for Session ID ${n.sessionId}. Error: ${JSON.stringify(e)}`)}else yt.Logging.Logger.info(`UploadCompletionController.completeInterruptedUploads: User cancelled upload for Session ID ${n.sessionId}`),yield this.mediaStorageService.deleteSnapshot(n.sessionId)}}))}}var tS,nS=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},rS=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Record=1]="Record",e[e.PostRecord=2]="PostRecord",e[e.Manage=3]="Manage"}(tS||(tS={})),bn({webServerFQDN:Panopto.webServerFQDN,appRoot:Panopto.appRoot,csrfTokenCookieName:Panopto.Core.Constants.CsrfTokenCookieName,csrfTokenHeaderName:Panopto.Core.Constants.CsrfTokenHeaderName});class oS extends Be.Component{constructor(e){var t;super(e),this.uploadStats={bytesSent:0,bytesEnqueued:0},this.renderUploadProgressUpdates=!1,this.lastMediaConstraintUpdatePromise=Promise.resolve(),this.tileHangLogsSent=!1,this.dummyPeerConnection=new RTCPeerConnection,this.displayStreamsAddedToPeerConnection=[],this.scaleCanvas=()=>{this.state.stage===tS.Record&&this.oscilloscopeContainer&&this.oscilloscopeCanvas&&(this.oscilloscopeCanvas.width=this.oscilloscopeContainer.offsetWidth/2,this.oscilloscopeCanvas.height=this.oscilloscopeContainer.offsetHeight/1)},this.handleBeforeUnload=()=>this.state.recordings.some((e=>!e.isUploaded()))||void 0,this.renderUploadProgressThrottled=bt.throttle(this.renderUploadProgress,250),this.handleNewSession=()=>{this.setState({stage:tS.Record,isStateTransitioning:!0,name:"",description:"",preview:void 0,currentSessionId:void 0}),document.title=this.props.documentTitleDefault||"Panopto"},this.handleRedoSession=()=>{const{currentSessionId:e,recordings:t}=this.state;e&&this.recorder.deleteRecording().finally((()=>{this.deleteSession(e)})),this.setState({stage:tS.Record,isStateTransitioning:!0,recordings:t.slice(0,t.length-1),preview:void 0,currentSessionId:void 0})};const n=`Panopto.WebRecorderSettings[${(null===(t=null===Panopto||void 0===Panopto?void 0:Panopto.user)||void 0===t?void 0:t.userKey)||yt.Constants.UserSettingsCookieAnonymousUser}]`;this.settingsStorageService=new yt.TypedLocalStorageService(n,$r),this.mediaStorageService=this.props.standAloneMode||!oC.canUseIndexedDb()?new YC:new KC,this.mediaStorageService.ready.catch((()=>{this.mediaStorageService=new YC})),oC.canUseIndexedDb()&&(this.imageStorageService=new UC,this.imageStorageService.ready.catch((()=>{this.imageStorageService=void 0}))),this.webRecorderLogging=new dC(this.props.panoptoConstants.globalServicesFQDN),this.tuningParametersService=new yt.TypedLocalStorageService("Panopto.WebRecorder.TuningParameters",QC),this.accessPoint=this.props.standAloneMode?oS.EXPRESS_ACCESS_POINT:oS.WEB_RECORDER_ACCESS_POINT,this.props.standAloneMode||(this.uploadCompletionController=new eS(this.props.t,this.props.panoptoConstants.webServerFQDN,this.mediaStorageService,this.accessPoint,this.handleAutoSendLogRequested));const r=this.settingsStorageService.value;this.props.disableMultistreamRecording&&!r.renderTileVideo&&(r.renderTileVideo=!0,this.settingsStorageService.value=r),this.props.hideBackgroundUI&&(r.backgroundMode=jr.None,r.backgroundModeCustomKey=void 0,this.settingsStorageService.value=r),this.props.isMobile&&(r.countDown=!0,r.qualityLevel=sr.High,this.settingsStorageService.value=r),this.props.panoptoConstants.features.disableFeaturesRequiringExternalNetworkAccess&&(r.backgroundMode=jr.None,r.smartCameraMode=Br.Off,this.settingsStorageService.value=r),this.state={settings:r,stage:tS.Record,isStateTransitioning:!1,devices:[],orderedVideoDeviceIDs:[],videoDevicesInitialized:!1,recordings:[],renderedUploadStats:this.uploadStats,preview:void 0,chooserStreamType:void 0,isCountingDown:!1,isRecording:!1,isRecordingStateChanging:!1,isQuotaFetched:!e.panoptoConstants.features.quotasEnabled,isOverQuota:!1,sharingIsBlocked:this.props.initialSharingIsBlocked,name:"",description:"",folderId:null,folderName:null,currentSessionId:this.props.initialSessionId,recordingStartTime:null,isSettingsActive:!1,imageStorageServiceReady:!1,tuningParameters:this.tuningParametersService.value};const o=window.AudioContext||window.webkitAudioContext;this.audioContext=new o,this.audioMixNode=this.audioContext.createGain();const a=this.audioContext.createOscillator();a.type="sine",a.frequency.value=0,a.connect(this.audioMixNode),a.start(),this.audioPreviewGain=this.audioContext.createGain(),this.audioPreviewGain.gain.value=1e-8,this.audioMixNode.connect(this.audioPreviewGain),this.audioPreviewGain.connect(this.audioContext.destination),this.audioMixOutput=this.audioContext.createMediaStreamDestination(),this.audioMixNode.connect(this.audioMixOutput)}get currentRecording(){return this.state.recordings.length?this.state.recordings[this.state.recordings.length-1]:void 0}componentDidMount(){this.checkQuota(),this.props.initialSessionId&&this.loadExistingSession(this.props.initialSessionId),this.imageStorageService.ready.then((()=>{this.setState({imageStorageServiceReady:!0});const{defaultBackgroundImageUrl:e}=this.props.panoptoConstants;e&&this.imageStorageService.verifyDefaultBackground(e).then((e=>{this.setState({defaultBackgroundImageKey:e})}))})),this.initializeDevices(),$(window).on("resize.scaleCanvas",this.scaleCanvas),this.scaleCanvas(),$(window).on("beforeunload.recordingCheck",(()=>this.state.isRecording||void 0)),this.props.standAloneMode||$(window).on("beforeunload.uploadCheck",this.handleBeforeUnload)}componentDidUpdate(e,t){t.stage!==this.state.stage&&yt.Logging.Logger.verbose(`WebRecorderController.componentDidUpdate: Stage changed from ${t.stage} to ${this.state.stage}.`),t.settings.qualityLevel!==this.state.settings.qualityLevel&&(this.lastMediaConstraintUpdatePromise=this.lastMediaConstraintUpdatePromise.then((()=>this.updateStreamQualityLevels()))),t.stage!==tS.Record&&this.state.stage===tS.Record&&(this.checkQuota(),this.selectSettingsDevices())}componentWillUnmount(){this.audioContext.close(),clearTimeout(this.audioContextResumeTimeout),$(window).off("resize.scaleCanvas"),$(window).off("beforeunload.recordingCheck"),$(window).off("beforeunload.uploadCheck")}checkQuota(){let e=Promise.resolve();return this.props.panoptoConstants.features.quotasEnabled&&(e=this.props.initialFolderId?new Promise((e=>{this.props.folderServices.getQuotaSnapshot(this.props.initialFolderId,(t=>{const n=t.currentPeriod.storedSummary.IsUserAtOrOverQuota;this.setState({isQuotaFetched:!0,isOverQuota:n},e)}))})):new Promise((e=>{this.props.userServices.getQuotaSnapshot(this.props.panoptoConstants.user.userId,(t=>{const n=t.currentPeriod.storedSummary.IsUserAtOrOverQuota;this.setState({isQuotaFetched:!0,isOverQuota:n},e)}))}))),e}loadExistingSession(e){yt.Logging.Logger.verbose(`LoadExistingSession: Loading pre-created session, id: ${this.props.initialSessionId}.`),this.props.sessionServices.getOne(e,(e=>{e.isDeleted?(yt.Logging.Logger.error("LoadExistingSession: Error loading pre-created session -- session deleted."),this.setState({currentSessionId:void 0})):(this.setState({name:e.name}),document.title=e.name,yt.Logging.Logger.verbose(`LoadExistingSession: Loaded "${e.name}"`))}),(()=>{yt.Logging.Logger.error("LoadExistingSession: Unknown error loading pre-created session."),this.setState({currentSessionId:void 0})}))}pollForStartedAudioContext(){return yt.Logging.Logger.verbose("WebRecorderController.pollForStartedAudioContext(): polling"),new Promise(((e,t)=>{const n=r=>{yt.Logging.Logger.verbose("Polling for running AudioContext"),"running"===this.audioContext.state?e():(this.audioContext.resume().then(e).catch(t).finally((()=>window.clearTimeout(this.audioContextResumeTimeout))),this.audioContextResumeTimeout=window.setTimeout((()=>n(2*r)),r))};n(100)}))}initializeDevices(){return rS(this,void 0,void 0,(function*(){yield this.ensureDeviceAccess();const e=yield this.queryDevices();this.setState({devices:e},(()=>rS(this,void 0,void 0,(function*(){const e=new Date;this.pollForStartedAudioContext().then((()=>{const t=(new Date).getTime()-e.getTime();yt.Logging.Logger.verbose(`AudioContext in "running" mode after delay of ${t} msec.`)})),yield this.initializeVideoDevices(),yield this.initializeAudioDevices()})))),navigator.mediaDevices.ondevicechange=bt.throttle(this.handleDeviceChange,oS.deviceChangeThrottlePeriod,{leading:!1})}))}ensureDeviceAccess(){const e={};return this.queryDevices().then((t=>{var n,r,o;const a=null===(n=this.getDefaultSelectedAudioDevices(t)[0])||void 0===n?void 0:n.id;let i=null===(r=this.getDefaultSelectedVideoDevices(t)[0])||void 0===r?void 0:r.id;if(i=null!=i?i:null===(o=bt.where(t,{type:ar.VIDEO})[0])||void 0===o?void 0:o.id,void 0!==a&&(e.audio=ZC.getAudioStreamConstraints(a).audio),void 0!==i){const t=this.state.settings.qualityLevel;e.video=ZC.getVideoStreamConstraints(i,t).video}return navigator.mediaDevices.getUserMedia(e)})).then((()=>{this.sendGoogleAnalyticsEvent(wn.deviceAccessed)})).catch((e=>{this.sendGoogleAnalyticsEvent(wn.deviceDenied),yt.Logging.Logger.warning("EnsureDeviceAccess: Error requesting device access:",e)}))}getDefaultSelectedAudioDevices(e){const t=[];for(const n of this.state.settings.selectedAudioDeviceIDs)t.push(...bt.where(e,{id:n,type:ar.AUDIO}));if(!(t.length>0)){let n=bt.findWhere(e,{id:this.defaultAudioDeviceId});n=n||bt.findWhere(e,{type:ar.AUDIO}),n&&t.push(n),this.handleSettingChanged("selectedAudioDeviceIDs",[])}return t}initializeAudioDevices(){if(this.props.secondaryOnly)return;const e=this.getDefaultSelectedAudioDevices(this.state.devices).map((e=>this.selectDevice(e).catch((t=>yt.Logging.Logger.warning(`InitializeDevices: Error selecting audio device ${e.id}:`,t)))));return Promise.all(e).then()}getDefaultSelectedVideoDevices(e){const t=[];for(const n of this.state.settings.selectedVideoDeviceIDs)t.push(...bt.where(e,{id:n,type:ar.VIDEO}));return t.length>0||this.handleSettingChanged("selectedVideoDeviceIDs",[]),t}initializeVideoDevices(){const e=this.getDefaultSelectedVideoDevices(this.state.devices),t=e.map((e=>this.selectDevice(e).catch((t=>yt.Logging.Logger.warning(`InitializeDevices: Error selecting video device ${e.id}:`,t)))));return Promise.all(t).then((()=>{const t=bt.where(this.state.devices,{type:ar.VIDEO}),n=bt.where(t,{selected:!0}),r=bt.difference(t,e);let o=Promise.resolve();return n.length||(o=this.selectFallbackDevice(r)),o})).finally((()=>{this.setState({videoDevicesInitialized:!0})}))}selectFallbackDevice(e){let t=Promise.resolve();if(e.length){const n=e.shift();t=this.selectDevice(n).catch((t=>(yt.Logging.Logger.warning(`SelectFallbackVideoSource: Error selecting device ${n.id}:`,t),this.selectFallbackDevice(e))))}return t}queryDevices(){return new Promise((e=>{const t=[];navigator.mediaDevices.enumerateDevices().then((n=>{var r;const o=bt.findWhere(n,{kind:"audioinput",deviceId:"default"}),a=bt.findWhere(n,{kind:"audioinput",deviceId:"communications"})||o;let i=n.filter((e=>("audioinput"===e.kind||"videoinput"===e.kind)&&"communications"!==e.deviceId&&"default"!==e.deviceId));if(!bt.findWhere(i,{kind:"audioinput"})&&a)i.push(a);else if(this.props.isMobile){const e=bt.findWhere(i,{label:"Speakerphone"});e&&a&&(i=i.filter((t=>t!==e)),i.push(a))}this.defaultAudioDeviceId=a?(null===(r=bt.findWhere(i,{groupId:a.groupId}))||void 0===r?void 0:r.deviceId)||a.deviceId:void 0,i.forEach((e=>{const n="audioinput"===e.kind?ar.AUDIO:ar.VIDEO,r=e.deviceId?void 0:`Device id (${e.deviceId}) is empty, device type is probably blocked.`;t.push({id:e.deviceId,type:n,selected:!1,initializing:!1,label:e.label,mediaStream:void 0,mediaStreamError:r})})),e(t)}))}))}handleDeviceChange(){const{t:e}=this.props,t=this.defaultAudioDeviceId,n=this.state.devices.some((e=>e.type===ar.AUDIO&&e.id!==this.defaultAudioDeviceId&&e.selected));this.queryDevices().then((r=>{const o=r.filter((e=>!bt.findWhere(this.state.devices,{id:e.id}))),a=this.state.devices.filter((e=>e.type!==ar.DISPLAY&&!bt.findWhere(r,{id:e.id})));yt.Logging.Logger.verbose(`Device change detected: ${o.length} adds, ${a.length} removes, default: ${t} -> ${this.defaultAudioDeviceId}`);const i=[];if(o.length){const e=this.addDevices(o).then((()=>{const e=this.state.chooserStreamType===ar.VIDEO||this.state.chooserStreamType===ar.AUDIO&&this.props.multipleAudioInputsEnabled;if(bt.findWhere(o,{type:this.state.chooserStreamType})&&e)return this.ensurePreviewStreams(this.state.chooserStreamType)}));i.push(e)}a.forEach((e=>{let t=Promise.resolve();e.selected&&(t=this.deselectDevice(e)),i.push(t.then((()=>this.removeDevice(e))))})),Promise.all(i).then((()=>{if(this.state.stage!==tS.Record)return;if(this.props.secondaryOnly);else if(this.defaultAudioDeviceId===t||n){const e=!!bt.findWhere(this.state.devices,{type:ar.AUDIO,selected:!0}),t=bt.findWhere(o,{type:ar.AUDIO});!e&&t&&this.selectDevice(t)}else{const n=bt.findWhere(this.state.devices,{id:this.defaultAudioDeviceId,selected:!1}),r=bt.findWhere(this.state.devices,{id:t,selected:!0});let o=Promise.resolve();r&&(o=this.deselectDevice(r)),o.then((()=>{n?this.selectDevice(n):window.alert(e("LostAudioDeviceMessage"))}))}let r=!this.props.isMobile||!this.state.devices.some((e=>e.selected&&e.type===ar.VIDEO));o.forEach((e=>{r&&e.type===ar.VIDEO&&(this.selectDevice(e),r=!this.props.isMobile)}))}))}))}selectDevice(e){return e.initializing?Promise.resolve():this.updateDevice(e.id,(e=>Object.assign(Object.assign({},e),{initializing:!0}))).then((()=>e.mediaStream?Promise.resolve(e.mediaStream):this.getDeviceStream(e))).catch((t=>{throw this.updateDevice(e.id,(e=>Object.assign(Object.assign({},e),{initializing:!1,mediaStreamError:t.toString()}))),t})).then((t=>{let n;const r=t.getAudioTracks();return r.length&&(yt.Logging.Logger.verbose(`WebRecorderController.selectDevice: added audio track ${r.map((e=>`id: ${e.id} label: ${e.label}`))}`),n=this.audioContext.createMediaStreamSource(t),n.connect(this.audioMixNode)),this.updateDevice(e.id,(e=>Object.assign(Object.assign({},e),{selected:!0,initializing:!1,mediaStream:t,mediaStreamError:void 0,audioSourceNode:n})))})).then((()=>{var t;if((null===(t=this.recorder)||void 0===t?void 0:t.isRecording)&&this.updateRecorderStreams(),e.type===ar.AUDIO||e.type===ar.VIDEO){const t=e.type===ar.AUDIO?"selectedAudioDeviceIDs":"selectedVideoDeviceIDs",n=(this.state.settings[t]||[]).slice();-1===n.indexOf(e.id)&&n.push(e.id),this.handleSettingChanged(t,n)}}))}deselectDevice(e,t){return e.audioSourceNode&&e.audioSourceNode.disconnect(),(e.type!==this.state.chooserStreamType||e.type===ar.AUDIO&&!this.props.multipleAudioInputsEnabled)&&(e.mediaStream.getTracks().forEach((e=>e.stop())),e.mediaStream=void 0),this.updateDevice(e.id,(e=>Object.assign(Object.assign({},e),{selected:!1,audioSourceNode:void 0}))).then((()=>{var n;if((null===(n=this.recorder)||void 0===n?void 0:n.isRecording)&&this.updateRecorderStreams(),!t&&(e.type===ar.AUDIO||e.type===ar.VIDEO)){const t=e.type===ar.AUDIO?"selectedAudioDeviceIDs":"selectedVideoDeviceIDs",n=this.state.settings[t];if(n){const r=n.filter((t=>t!==e.id));this.handleSettingChanged(t,r)}}}))}getDeviceStream(e){const t=e.type===ar.VIDEO?ZC.getVideoStreamConstraints(e.id,this.state.settings.qualityLevel):ZC.getAudioStreamConstraints(e.id);return navigator.mediaDevices.getUserMedia(t).catch((e=>{throw this.sendGoogleAnalyticsEvent(wn.deviceDenied),e}))}updateDevice(e,t){return new Promise((n=>{this.setState((n=>{const r=bt.findIndex(n.devices,(t=>t.id===e));if(-1!==r){const e=n.devices[r],o=n.devices.slice(),a=t(o[r]),i=n.orderedVideoDeviceIDs.slice();if(a.type==ar.VIDEO)if(!e.selected&&a.selected)i.push(a.id);else if(e.selected&&!a.selected)for(;i.indexOf(a.id,0)>-1;)i.splice(i.indexOf(a.id,0),1);return o.splice(r,1,a),{devices:o,orderedVideoDeviceIDs:i}}return{devices:n.devices,orderedVideoDeviceIDs:n.orderedVideoDeviceIDs}}),(()=>n()))}))}handleStreamChooserTypeChanged(e){switch(void 0!==e&&this.setState({isSettingsActive:!1}),e){case ar.DISPLAY:this.sendGoogleAnalyticsEvent(wn.addDisplay);break;case ar.AUDIO:this.sendGoogleAnalyticsEvent(wn.audioMenu);break;case ar.VIDEO:this.sendGoogleAnalyticsEvent(wn.videoMenu)}const t=e===ar.DISPLAY?void 0:e;this.setState({chooserStreamType:t}),this.state.devices.filter((t=>!t.selected&&t.type!==e&&t.mediaStream)).forEach((e=>{e.mediaStream.getTracks().forEach((e=>e.stop())),e.mediaStream=void 0})),e===ar.VIDEO||e===ar.AUDIO&&this.props.multipleAudioInputsEnabled?this.ensurePreviewStreams(e):e===ar.DISPLAY&&this.pickDisplayStream().then((e=>{const t=e.getVideoTracks()[0].getSettings().deviceId||e.id;if(!bt.findWhere(this.state.devices,{id:t})){const n={id:t,type:ar.DISPLAY,selected:!1,initializing:!1,label:e.id,mediaStream:e};this.addDevices(n).then((()=>this.selectDevice(n))),e.getVideoTracks()[0].onended=()=>{this.deselectDevice(n).then((()=>this.removeDevice(n)))}}})).catch((e=>{this.sendGoogleAnalyticsEvent(wn.addDisplayFailure),yt.Logging.Logger.verbose(`Failed to get display stream: ${e.message}`)}))}ensurePreviewStreams(e){const t=[];return this.state.devices.filter((t=>t.type===e&&!t.mediaStream)).forEach((e=>{t.push(this.getDeviceStream(e).then((t=>this.updateDevice(e.id,(e=>Object.assign(Object.assign({},e),{mediaStream:t,mediaStreamError:void 0}))))).catch((t=>{const n=e.type===ar.AUDIO?"audio":"video";return yt.Logging.Logger.warning(`Failed to get preview stream for ${n} device ${e.id}:`,t),this.updateDevice(e.id,(e=>Object.assign(Object.assign({},e),{mediaStreamError:t.toString()})))})))})),Promise.all(t).then((()=>Promise.resolve()))}handleMenuCloseClick(){this.handleStreamChooserTypeChanged(void 0),this.setState({isSettingsActive:!1})}handleBottomBarClick(e){e.target===e.currentTarget&&(this.handleStreamChooserTypeChanged(void 0),this.setState({isSettingsActive:!1}))}handleDeviceToggle(e,t){const n=bt.findWhere(this.state.devices,{id:e});let r=Promise.resolve();return n&&(r=t?this.selectDevice(n):this.deselectDevice(n)),r}pickDisplayStream(){const{t:e}=this.props,t=ZC.getDisplayStreamConstraints(this.state.settings.qualityLevel);let n;return navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?n=navigator.mediaDevices.getDisplayMedia(t):navigator.getDisplayMedia?n=navigator.getDisplayMedia({video:!0}):navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints().mediaSource?(delete t.audio,t.mediaSource="screen",n=navigator.mediaDevices.getUserMedia(t)):window.alert(e("Alert_ScreenCaptureNotSupported")),n}updateStreamQualityLevels(){var e,t;const n=[];for(const r of this.state.devices)for(const o of null!==(t=null===(e=r.mediaStream)||void 0===e?void 0:e.getTracks())&&void 0!==t?t:[]){let e;"video"===o.kind&&(r.type===ar.VIDEO?e=ZC.getVideoStreamConstraints(void 0,this.state.settings.qualityLevel).video:r.type===ar.DISPLAY&&(e=ZC.getDisplayStreamConstraints(this.state.settings.qualityLevel).video,this.fixConstraintAspectRatioForChromeDisplays(o.getSettings(),e))),e&&(yt.Logging.Logger.verbose("WebRecorderController.updateStreamQualityLevels: updating track constraints.",o,e),n.push(o.applyConstraints(e)))}return Promise.all(n).then((()=>Promise.resolve()))}fixConstraintAspectRatioForChromeDisplays(e,t){const n=e.width/e.height,r=t.width,o=t.height;r/o>n?t.width=o*n:t.height=r/n}handleMobileCameraToggle(){const{t:e}=this.props,t=this.state.devices.filter((e=>e.type===ar.VIDEO)),n=t.find((e=>e.selected));if(t.length<2)return;let r,o;if(n){r=this.deselectDevice(n);const e=(t.indexOf(n)+1)%t.length;o=t[e]}else r=Promise.resolve(),o=t[0];r.then((()=>o&&this.selectDevice(o))).catch((t=>window.alert(`${e("Alert_MobileCameraSwitchError")} ${t}`)))}addDevices(e){return new Promise((t=>{this.setState((t=>({devices:t.devices.concat(e)})),t)}))}removeDevice(e){return new Promise((t=>{this.setState((t=>{const n=t.devices.slice(),r=bt.findIndex(n,(t=>t.id===e.id));return-1!==r&&n.splice(r,1),{devices:n}}),t)}))}getSelectedStreams(e){let t=[];if(e==ar.VIDEO)for(const e of this.state.orderedVideoDeviceIDs){const n=bt.findWhere(this.state.devices,{id:e,selected:!0});n&&n.mediaStream&&t.push(n.mediaStream)}else t=this.state.devices.filter((t=>t.selected&&t.mediaStream&&t.type===e)).map((e=>e.mediaStream));return t}sendGoogleAnalyticsEvent(e,t){const{panoptoConstants:n,googleAnalytics:r,standAloneMode:o}=this.props,a=o?"express":"capture",i=t||"";r.sendEvent({productId:n.googleAnalyticsId,source:a,action:e,label:i}),r.sendTagManagerEvent(e,a,i)}handleVisualizerRemoveClick(e){const t=bt.findWhere(this.state.devices,{id:e});this.deselectDevice(t).then((()=>{t.type===ar.DISPLAY&&this.removeDevice(t)}))}confirmAudioCapture(){const{t:e}=this.props,t=!!bt.findWhere(this.state.devices,{type:ar.AUDIO,selected:!0}),n=e(this.state.devices.filter((e=>e.type===ar.DISPLAY)).some((e=>e.audioSourceNode))?"Confirm_StartRecordingAudioOnly":"Confirm_StartRecordingNoAudio");return t||window.confirm(n)}handleRecordClicked(){return rS(this,void 0,void 0,(function*(){const{standAloneMode:e}=this.props,{folderId:t}=this.state;yt.Logging.Logger.verbose("WebRecorder:recordClicked() {");const n=!this.recorder||this.recorder&&!this.recorder.isRecording;if(this.state.isRecordingStateChanging){const e=n?"Record":"Stop";yt.Logging.Logger.verbose(`${e} button clicked before last click was fully handled`)}else(!n||this.props.secondaryOnly||this.confirmAudioCapture())&&(this.setState({isRecordingStateChanging:!0}),n?(yt.Logging.Logger.info("WebRecorderController.handleRecordClicked: start recording with settings:",this.settingsStorageService.value),this.checkQuota().then((()=>{const n=this.state.isOverQuota?"Record button clicked but user is over quota":e||t?"":"Record button clicked but folderId is not yet set";if(n)this.sendGoogleAnalyticsEvent(wn.startRecorderError),yt.Logging.Logger.verbose(n),this.setState({isRecordingStateChanging:!1}),this.state.isOverQuota&&this.handleOverQuotaClick();else{let e,t,n;switch(this.state.settings.qualityLevel){case sr.Standard:e="sd";break;case sr.High:e="hd";break;case sr.Ultra:e="4k"}switch(this.state.settings.backgroundMode){case jr.Blur:t="blur";break;case jr.Custom:t="custom";break;case jr.Default:t="default";break;case jr.None:t="none";break;case jr.Overlay:t="overlay"}switch(this.state.settings.smartCameraMode){case Br.Off:n="off";break;case Br.People:n="people";break;case Br.Person:n="person"}const r={smartCamera:n,qualityLevel:e,background:t,tileMode:this.state.settings.renderTileVideo&&!!this.tileVideoStream};this.sendGoogleAnalyticsEvent(wn.startRecorder,JSON.stringify(r)),this.state.settings.countDown?this.setState({isCountingDown:!0}):this.startRecording()}}))):this.recorder.isRecording&&(this.recorder.stopRecording(),this.sendGoogleAnalyticsEvent(wn.endRecorder),this.handleAutoSendLogRequested(lC.RECORD_STOP),this.setState({isRecording:!1,stage:tS.PostRecord,isStateTransitioning:!0})))}))}handleCountdownElapsed(){this.setState({isCountingDown:!1}),this.startRecording()}handleCountdownCanceled(){this.setState({isCountingDown:!1,isRecordingStateChanging:!1})}selectSettingsDevices(e=!0,t){let n=Promise.resolve();if(this.state.settings){const r=[];for(const t of this.state.settings.selectedVideoDeviceIDs)r.push(...bt.where(this.state.devices,{id:t,selected:!e,type:ar.VIDEO}));for(const t of this.state.settings.selectedAudioDeviceIDs)r.push(...bt.where(this.state.devices,{id:t,selected:!e,type:ar.AUDIO}));if(r.length){e&&this.setState({videoDevicesInitialized:!1});const o=[];for(const n of r)o.push(e?this.selectDevice(n):this.deselectDevice(n,t));const a=e?"selecting":"deselecting";n=Promise.all(o).then((()=>Promise.resolve())).catch((e=>yt.Logging.Logger.warning(`SelectSettingsDevices: Error ${a} devices:`,e))).finally((()=>{e&&this.setState({videoDevicesInitialized:!0})}))}}return n}handleOverQuotaClick(){window.open("/Panopto/Pages/Pro/AccountManagement.aspx")}createSession(e,t,n){const r=new(0,this.props.sessionType)({Name:e,Description:t,Parent:{Id:n}});return new Promise(((e,t)=>{this.props.sessionServices.create(r,(t=>{const n={id:t.id,name:t.name,description:t.description,folderId:t.parent.id,folderName:t.parent.name};yt.Logging.Logger.info(`Session ${t.id} created.`),this.setState({name:t.name,currentSessionId:t.id},(()=>e(n)));const r=this.state.settings.forceTile?5:3;!function(e,t){pC(this,void 0,void 0,(function*(){const n=[yn(),"/api/v1-beta/sessions/",e,"/multistreamLayout"].join(""),r=vn("PUT",{videoPodcastType:t},!0);yield xn(n,r)}))}(t.id,r)}),t)}))}deleteSession(e){return new Promise(((t,n)=>{this.props.sessionServices.deleteSession(e,t,n)}))}startRecording(){return rS(this,void 0,void 0,(function*(){yt.Logging.Logger.info("WebRecorderController.startRecording: User agent is: ",null===navigator||void 0===navigator?void 0:navigator.userAgent);const{standAloneMode:e}=this.props,{webServerFQDN:t}=this.props.panoptoConstants,{name:n}=this.state,r=n||$C.defaultName(),o=new $C(r);if(this.recorder=this.createRecorder(o),!e){const e=new Date;let n=Promise.resolve();if(this.state.currentSessionId){if(this.props.initialSessionId){const e=Panopto.Core.StringHelpers.setQueryParameters(location.href,{sessionId:void 0});history.replaceState(null,"",e)}}else n=this.createSession(r,this.state.description,this.state.folderId).then((()=>{yt.Logging.Logger.verbose(`Took ${(new Date).getTime()-e.getTime()}msec to create session`)})).catch((e=>{throw yt.Logging.Logger.error("StartRecording: Error creating session:",e),e}));n.then((()=>{const{currentSessionId:e}=this.state;this.recorder.startUploading((()=>o.createUploader(this.mediaStorageService,t,e,this.accessPoint,(e=>this.handleUploadProgress(o,e)),(()=>this.handlePermanentlyFailed(o)),this.handleAutoSendLogRequested)))})).catch((e=>rS(this,void 0,void 0,(function*(){this.recorder.stopRecording(),this.handleAutoSendLogRequested(lC.SESSION_CREATE_FAILED),this.setState({isRecording:!1,isRecordingStateChanging:!1,stage:tS.Record,isStateTransitioning:!0})}))))}this.updateRecorderStreams(),this.recorder.startRecording(),this.setState((e=>({recordings:e.recordings.concat(o),isRecording:!0,name:r})))}))}createRecorder(e){const{preferredMimeType:t}=this.props;return new Rr(this.props.t,e,this.state.settings.qualityLevel,this.handleRecordingActionCompleted,this.handlePreviewReady,t,{secondaryOnly:this.props.secondaryOnly})}updateRecorderStreams(){let e=this.getSelectedStreams(ar.VIDEO);const t=this.getSelectedStreams(ar.DISPLAY);for(const e of t)for(const t of e.getVideoTracks())-1===this.displayStreamsAddedToPeerConnection.findIndex((e=>e===t.id))&&(this.displayStreamsAddedToPeerConnection.push(t.id),this.dummyPeerConnection.addTrack(t),yt.Logging.Logger.verbose(`WebRecorderController.updateRecorderStreams: Added track ${t.id} to dummy RTCPeerConnection.`));this.state.settings.renderTileVideo&&this.tileVideoStream?e=[this.tileVideoStream]:this.processedPrimaryStream&&e.splice(0,1,this.processedPrimaryStream),this.recorder&&this.recorder.updateStreams(e,this.state.settings.renderTileVideo?[]:t,this.audioMixOutput instanceof MediaStreamAudioDestinationNode?this.audioMixOutput.stream:null)}setTileStream(e){this.tileVideoStream=e}setProcessedStream(e){this.processedPrimaryStream=e,this.recorder&&this.recorder.isRecording&&this.updateRecorderStreams()}handleTileRendererHang(){return rS(this,void 0,void 0,(function*(){yt.Logging.Logger.error("Tile renderer hung."),this.tileHangLogsSent||(this.handleAutoSendLogRequested(lC.TILE_RENDERER_HUNG),this.tileHangLogsSent=!0)}))}handleTileRendererResume(){yt.Logging.Logger.info("Tile renderer resumed after unexpected hang.")}handleStageTransitionEnd(e){e.target===e.currentTarget&&"transform"===e.propertyName&&(this.setState({isStateTransitioning:!1}),this.state.stage===tS.PostRecord&&this.selectSettingsDevices(!1,!0),this.state.stage===tS.PostRecord?(this.renderUploadProgressThrottled(),this.renderUploadProgressUpdates=!0,this.state.sharingIsBlocked&&this.pollForIsVerified()):this.state.stage===tS.Record&&(this.uploadStats={bytesSent:0,bytesEnqueued:0},this.renderUploadProgress(),this.renderUploadProgressUpdates=!1))}handleUploadProgress(e,t){this.state.recordings.indexOf(e)===this.state.recordings.length-1&&(this.uploadStats=t,this.renderUploadProgressUpdates&&this.renderUploadProgressThrottled())}renderUploadProgress(){this.setState({renderedUploadStats:this.uploadStats})}handlePermanentlyFailed(e){return rS(this,void 0,void 0,(function*(){const{enableAutomaticLogsUpload:t,t:n}=this.props,{recordings:r}=this.state;if(r.indexOf(e)===r.length-1&&this.recorder.isRecording){if(this.recorder.stopRecording(),t){let e;try{e=yield this.webRecorderLogging.uploadLogs({"delivery-id":this.state.currentSessionId,"event-id":lC.UPLOAD_FAILED})}catch(e){yt.Logging.Logger.error("Log upload failed.",e)}window.alert(n("UploadFailedCommonMessage")+" "+n("UploadFailedAutoSendLogMessage")+` ${e}.`)}else window.alert(n("UploadFailedCommonMessage")+" "+n("UploadFailedDownloadLogMessage"));this.setState({isRecording:!1,isRecordingStateChanging:!1,stage:tS.Record,isStateTransitioning:!0,currentSessionId:void 0})}}))}pollForIsVerified(){hn(((e,t)=>{this.state.stage!==tS.PostRecord?t():this.props.userServices.hasPermissionSomewhere(PanoptoTS.Core.Permission.SessionAccessControlPolicyEdit,(n=>{n?(this.setState({sharingIsBlocked:!1}),t()):e()}),(()=>e()))}))}handleRecordingActionCompleted(e){this.setState({isRecordingStateChanging:!1,isRecording:Boolean(e),recordingStartTime:e})}handlePreviewReady(e){this.setState({preview:e})}handleSettingChanged(e,t,n){this.setState((n=>({settings:Object.assign(Object.assign({},n.settings),{[e]:t})})),(()=>this.settingsStorageService.value=this.state.settings)),n&&("backgroundMode"===e?this.sendGoogleAnalyticsEvent(wn.backgroundBlur,n):"smartCameraMode"===e&&this.sendGoogleAnalyticsEvent(wn.smartCamera,n))}handleUploadLogsClick(){return rS(this,void 0,void 0,(function*(){const{standAloneMode:e,t:t}=this.props;try{const e=yield this.webRecorderLogging.uploadLogs({"delivery-id":this.state.currentSessionId,"event-id":lC.MANUAL_UPLOAD}),n=`${t("Alert_LogUploadSuccessfull")} ${e}`;window.alert(n),yt.Logging.Logger.info(n)}catch(n){window.alert(t(e?"StandaloneSendLogsFailedMessage":"SendLogsFailedMessage")),yt.Logging.Logger.error("Log upload failed.",n)}this.sendGoogleAnalyticsEvent(wn.sendLogs)}))}handleDownloadLogsClick(){this.webRecorderLogging.downloadLogs()}handleToggleSettings(e){this.state.isRecording||this.state.isRecordingStateChanging||(e&&this.handleStreamChooserTypeChanged(void 0),this.setState({isSettingsActive:e}),e&&this.sendGoogleAnalyticsEvent(wn.settingsOpen))}handleFolderSelected(e,t){const{folderId:n,currentSessionId:r}=this.state;this.setState({folderId:e,folderName:t}),r&&n&&e!==n&&this.props.sessionServices.getOne(r,(t=>{t.parent.id=e,this.props.sessionServices.update(t,(()=>{}))}))}handleNameChanged(e){this.setState({name:e})}handleDescriptionChanged(e){this.setState({description:e})}handleNameSubmit(e){const{currentSessionId:t}=this.state;t&&this.props.sessionServices.getOne(t,(t=>{t.name=e,this.props.sessionServices.update(t,(()=>{}))}))}handleDescriptionSubmit(e){const{currentSessionId:t}=this.state;t&&this.props.sessionServices.getOne(t,(t=>{t.description=e,this.props.sessionServices.update(t,(()=>{}))}))}handleAutoSendLogRequested(e){return rS(this,void 0,void 0,(function*(){if(this.props.enableAutomaticLogsUpload)try{const t=yield this.webRecorderLogging.uploadLogs({"delivery-id":this.state.currentSessionId,"event-id":e});yt.Logging.Logger.info(`Logs sent successfully. Reference ID: ${t}`)}catch(e){yt.Logging.Logger.error("Log upload failed.",e)}}))}getTileStreamSettings(e){const{tuningParameters:t}=this.state;return e===sr.Standard?{width:t.tileWidthStandard,height:t.tileHeightStandard,maxFps:t.tileMaxFpsStandard}:{width:t.tileWidthHigh,height:t.tileHeightHigh,maxFps:t.tileMaxFpsHigh}}getProcessingStreamSettings(e){const{tuningParameters:t}=this.state;switch(e){case sr.Standard:return{maxHeight:t.processorMaxHeightStandard,maxFps:t.processorMaxFpsStandard};case sr.High:return{maxHeight:t.processorMaxHeightHigh,maxFps:t.processorMaxFpsHigh};case sr.Ultra:return{maxHeight:t.processorMaxHeightUltra,maxFps:t.processorMaxFpsUltra}}}getBackgroundImageKey(){const{backgroundMode:e,backgroundModeCustomKey:t}=this.state.settings,{defaultBackgroundImageKey:n}=this.state;return e===jr.Custom?t:n}getAvailableBackgroundModes(){const{backgroundModeCustomKey:e}=this.state.settings,{defaultBackgroundImageKey:t}=this.state;return{default:!!t,custom:!!e}}render(){var e,t;const{t:n}=this.props,r=[this.state.stage===tS.Record?"stage-1-shown":this.state.stage===tS.PostRecord?"stage-2-shown":this.state.stage===tS.Manage?"stage-3-shown":""];this.props.isMobile&&r.push("mobile"),!this.props.allowNarrowLayout&&r.push("wide-layout-only");const o=[];this.state.isRecording&&o.push("recording"),(void 0!==this.state.chooserStreamType||this.state.isSettingsActive)&&o.push("overlay-open");const{hideBackgroundUI:a,standAloneMode:i,enableLogsUpload:s,enableLogsDownload:c}=this.props,{folderId:u,isRecordingStateChanging:l,isQuotaFetched:d,isOverQuota:p}=this.state,h=(i||!!u)&&!l&&d&&!p&&(!this.props.panoptoConstants.user||this.props.panoptoConstants.user.hasUnison),{disableFeaturesRequiringExternalNetworkAccess:f}=this.props.panoptoConstants.features,m=[];this.state.isSettingsActive&&m.push("active"),this.state.isRecordingStateChanging&&m.push("disabled");const g=this.getTileStreamSettings(this.state.settings.qualityLevel),b=this.getProcessingStreamSettings(this.state.settings.qualityLevel),{default:y,custom:A}=this.getAvailableBackgroundModes();return Be.createElement(Be.Fragment,null,Be.createElement("div",{className:"stage-container "+r.join(" ")},Be.createElement("div",{className:"stage stage-1"},Be.createElement("div",{className:"record-controls "+o.join(" ")},!this.props.isMobile&&Be.createElement(br,{streamType:this.state.chooserStreamType,devices:this.state.devices,multipleAudioInputsEnabled:this.props.multipleAudioInputsEnabled,isMac:this.props.isMac,secondaryOnly:!0===this.props.secondaryOnly,onStreamTypeChanged:this.handleStreamChooserTypeChanged,onDeviceToggle:this.handleDeviceToggle}),Be.createElement("div",{className:Je()({"visualizer-container":!0,blur:this.state.isSettingsActive})},Be.createElement(Vw,{videoDevicesInitialized:this.state.videoDevicesInitialized,videoStreams:this.getSelectedStreams(ar.VIDEO),displayStreams:this.getSelectedStreams(ar.DISPLAY),audioSource:this.audioMixNode,oscilloscopeCanvas:this.oscilloscopeCanvas,oscilloscopeEnabled:this.state.stage===tS.Record,isObscured:this.state.isSettingsActive||void 0!==this.state.chooserStreamType,useTile:this.state.settings.renderTileVideo,maxTileFPS:g.maxFps,tileCanvasWidth:g.width,tileCanvasHeight:g.height,usePIP:!this.state.settings.forceTile,standAloneMode:this.props.standAloneMode,isMobile:this.props.isMobile,maxProcessedFPS:b.maxFps,processedStreamMaxHeight:b.maxHeight,debug:this.props.debug,showIntermediateCanvases:this.props.showIntermediateCanvases,hideBackgroundButton:a||f,hideSmartCameraButton:f,isBackgroundModeDefaultAvailable:y,isBackgroundModeCustomAvailable:A,backgroundMode:this.state.settings.backgroundMode,backgroundImageKey:this.getBackgroundImageKey(),smartCameraMode:this.state.settings.smartCameraMode,onBackgroundModeChange:e=>{this.handleSettingChanged("backgroundMode",e,"overlay")},onSmartCameraModeChange:e=>{this.handleSettingChanged("smartCameraMode",e,"overlay")},tuningParameters:this.state.tuningParameters,imageStorageService:this.imageStorageService,onRemoveClick:this.handleVisualizerRemoveClick,onTileStreamCreated:this.setTileStream,onProcessedStreamCreated:this.setProcessedStream,onTileRendererHang:this.handleTileRendererHang,onTileRendererResume:this.handleTileRendererResume,forceAnalyzerInMainThread:this.props.forceAnalyzerInMainThread,forceRenderInMainThread:!0})),Be.createElement("div",{className:"record-overlay settings-overlay bottom-anchored "+(this.state.isSettingsActive?"visible":"")},Be.createElement(nC,{settings:this.state.settings,defaultBackgroundImageKey:this.state.defaultBackgroundImageKey,isExpress:this.props.standAloneMode,disableMultistreamRecording:this.props.disableMultistreamRecording,imageStorageService:this.imageStorageService,imageStorageServiceReady:this.state.imageStorageServiceReady,onSettingChanged:this.handleSettingChanged,enableLogsUpload:s,enableLogsDownload:c,onUploadLogsClick:this.handleUploadLogsClick,onDownloadLogsClick:this.handleDownloadLogsClick,sendGoogleAnalyticsEvent:this.sendGoogleAnalyticsEvent,hideBackgroundSection:a||f,hideSmartCameraSection:f})),Be.createElement("div",{className:"bottom-controls",onClick:this.handleBottomBarClick},this.state.stage===tS.Record&&Be.createElement(Be.Fragment,null,Be.createElement("div",{className:"logo-region"},this.props.standAloneMode?Be.createElement("a",{className:"panopto-logo",href:"https://www.panopto.com/plans/",target:"_blank",rel:"noopener noreferrer"},this.props.useBetaBranding?dn.PanoptoBetaLogo:dn.PanoptoLogo):Be.createElement("div",{className:"panopto-logo"},this.props.useBetaBranding?dn.PanoptoBetaLogo:dn.PanoptoLogo)),Be.createElement("div",{className:"oscilloscope-container",ref:e=>this.oscilloscopeContainer=e},Be.createElement("canvas",{ref:e=>this.oscilloscopeCanvas=e})),Be.createElement("div",{className:"center-button-container"},Be.createElement(At,{className:"record-button",onActivate:this.handleRecordClicked,disabled:!h,ariaLabel:this.state.isRecording?n("AriaLabel_StopRecordingButton"):n("AriaLabel_StartRecordingButton"),title:this.state.isOverQuota?n("Title_OverQuota"):""},Be.createElement("div",{className:"glyph"})),Be.createElement(At,{className:"menu-close-button",onActivate:this.handleMenuCloseClick,title:n("Title_CloseMenuButton"),iconCode:"clear"})),Be.createElement("div",{className:"right-controls"},this.state.isOverQuota&&Be.createElement(At,{className:"error-icon material-icons",onActivate:this.handleOverQuotaClick},Be.createElement("span",{title:n("Title_OverQuota")},"error_outline")),this.props.isMobile&&Be.createElement(At,{className:"camera-flip-button",iconCode:"cached",onActivate:this.handleMobileCameraToggle}),!this.props.isMobile&&Be.createElement(At,{className:"settings-button "+m.join(" "),iconCode:"settings",ariaLabel:n("AriaLabel_SettingsButton"),isMenuButton:!0,isMenuOpen:this.state.isSettingsActive,onActivate:()=>{this.handleToggleSettings(!this.state.isSettingsActive)}}),Be.createElement("div",{className:"time"},Be.createElement(yr,{startTime:this.state.recordingStartTime})))))),Be.createElement(cr,{isCountingDown:this.state.isCountingDown,isMobile:this.props.isMobile,onElapsed:this.handleCountdownElapsed,onCanceled:this.handleCountdownCanceled})),Be.createElement("div",{className:"stage stage-2",onTransitionEnd:this.handleStageTransitionEnd},Be.createElement(rr,{isVisible:this.state.stage===tS.PostRecord,isStateTransitioning:this.state.isStateTransitioning,name:this.state.name,description:this.state.description,currentSessionId:this.state.currentSessionId,recorder:this.recorder,recordings:this.state.recordings,uploadStats:this.state.renderedUploadStats,preview:this.state.preview,useMultistreamPreview:this.props.useMultistreamPreview&&!this.props.disableMultistreamRecording,panoptoConstants:this.props.panoptoConstants,useVideoSourceElement:this.props.useVideoSourceElement,sendGoogleAnalyticsEvent:this.sendGoogleAnalyticsEvent,standAloneMode:this.props.standAloneMode,mediaStorageService:this.mediaStorageService,isMobile:this.props.isMobile,sessionLaunch:!0===this.props.sessionLaunch,dropboxContentSharingEnabled:null===(e=this.props.dropBoxContentSharingEnabled)||void 0===e||e,accessPoint:this.accessPoint,settings:this.state.settings,fftUrl:this.props.fftUrl,webServerFQDN:this.props.webServerFQDN,panoptoOAuthHandlerUrl:this.props.panoptoOAuthHandlerUrl,panoptoClientId:this.props.panoptoClientId,googleApiKey:this.props.panoptoConstants.googleApiKey,googleClientId:this.props.panoptoConstants.googleClientId,folderServices:this.props.folderServices,tagServices:this.props.tagsServices,subscriptionService:this.props.subscriptionService,resources:this.props.resources,userServices:this.props.userServices,stringHelpers:this.props.stringHelpers,initialFolderId:this.props.initialFolderId,selectedFolderId:this.state.folderId,lockFolder:null!==(t=this.props.lockFolder)&&void 0!==t&&t,sharingIsBlocked:this.state.sharingIsBlocked,selectedFolderName:this.state.folderName,onFolderSelected:this.handleFolderSelected,createSession:this.createSession,onNewSession:this.handleNewSession,onRedoSession:this.handleRedoSession,enableLogsUpload:s,enableLogsDownload:c,onUploadLogsClick:this.handleUploadLogsClick,onDownloadLogsClick:this.handleDownloadLogsClick,onNameChanged:this.handleNameChanged,onNameSubmit:this.handleNameSubmit,onDescriptionChanged:this.handleDescriptionChanged,onDescriptionSubmit:this.handleDescriptionSubmit,onUploadProgress:this.handleUploadProgress,onAutoSendLogRequested:this.handleAutoSendLogRequested}))))}}oS.deviceChangeThrottlePeriod=500,oS.WEB_RECORDER_ACCESS_POINT=27,oS.EXPRESS_ACCESS_POINT=33,nS([Ze],oS.prototype,"handleDeviceChange",null),nS([Ze],oS.prototype,"handleStreamChooserTypeChanged",null),nS([Ze],oS.prototype,"handleMenuCloseClick",null),nS([Ze],oS.prototype,"handleBottomBarClick",null),nS([Ze],oS.prototype,"handleDeviceToggle",null),nS([Ze],oS.prototype,"handleMobileCameraToggle",null),nS([Ze],oS.prototype,"sendGoogleAnalyticsEvent",null),nS([Ze],oS.prototype,"handleVisualizerRemoveClick",null),nS([Ze],oS.prototype,"confirmAudioCapture",null),nS([Ze],oS.prototype,"handleRecordClicked",null),nS([Ze],oS.prototype,"handleCountdownElapsed",null),nS([Ze],oS.prototype,"handleCountdownCanceled",null),nS([Ze],oS.prototype,"handleOverQuotaClick",null),nS([Ze],oS.prototype,"createSession",null),nS([Ze],oS.prototype,"setTileStream",null),nS([Ze],oS.prototype,"setProcessedStream",null),nS([Ze],oS.prototype,"handleTileRendererHang",null),nS([Ze],oS.prototype,"handleTileRendererResume",null),nS([Ze],oS.prototype,"handleStageTransitionEnd",null),nS([Ze],oS.prototype,"handleUploadProgress",null),nS([Ze],oS.prototype,"renderUploadProgress",null),nS([Ze],oS.prototype,"handlePermanentlyFailed",null),nS([Ze],oS.prototype,"handleRecordingActionCompleted",null),nS([Ze],oS.prototype,"handlePreviewReady",null),nS([Ze],oS.prototype,"handleSettingChanged",null),nS([Ze],oS.prototype,"handleUploadLogsClick",null),nS([Ze],oS.prototype,"handleDownloadLogsClick",null),nS([Ze],oS.prototype,"handleToggleSettings",null),nS([Ze],oS.prototype,"handleFolderSelected",null),nS([Ze],oS.prototype,"handleNameChanged",null),nS([Ze],oS.prototype,"handleDescriptionChanged",null),nS([Ze],oS.prototype,"handleNameSubmit",null),nS([Ze],oS.prototype,"handleDescriptionSubmit",null),nS([Ze],oS.prototype,"handleAutoSendLogRequested",null);var aS=gt("webrecorder")(oS);Panopto.i18n=Y,Panopto.WebRecorder=Object(Ve.bootstrapReactComponent)(aS,(()=>{const e=new Ae;e.addDetector(qe),Y.use(Oe).use(e).use(We).init({backend:{loadPath:Panopto.localesPathFormat},detection:{order:["querystring","panopto-navigator"],caches:[]},react:{useSuspense:!1},fallbackLng:"en",supportedLngs:Panopto.supportedLngs,ns:[],interpolation:{escapeValue:!1}})}))}])}));
//# sourceMappingURL=file://///seasyn/jenkinsbuilds/rel_rtc_11.10.0/11.10.0.00017/_PublishedWebsites/WebUI/Scripts/Panopto/Bundles/webrecorder.umd.js.map